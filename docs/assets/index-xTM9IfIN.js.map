{"version":3,"file":"index-xTM9IfIN.js","sources":["../../src/shared/utility/sort-by-date.ts","../../src/shared/models/store/version-0/loan.ts","../../src/shared/models/store/current/account-data.ts","../../src/shared/models/store/current/account.ts","../../src/shared/models/store/current/get-default.ts","../../src/shared/models/store/version-0/account-data.ts","../../src/shared/models/store/version-0/account.ts","../../src/shared/models/store/version-0/mortgage.ts","../../src/shared/models/store/version-0/net-wealth.ts","../../src/shared/models/store/version-0/projected-income.ts","../../src/shared/models/store/version-2/projected-wealth.ts","../../src/shared/models/store/version-0/projected-wealth.ts","../../src/shared/models/store/version-1/store.ts","../../src/shared/models/store/version-2/store.ts","../../src/shared/models/store/current/mortgage.ts","../../src/shared/models/store/current/net-wealth.ts","../../src/shared/models/store/current/projected-income.ts","../../src/shared/models/store/current/projected-wealth.ts","../../src/shared/models/store/current/store.ts","../../src/shared/models/store/version-0/store.ts","../../src/shared/store/migrations.ts","../../src/shared/store/store.ts","../../src/shared/store/add-account-entry.ts","../../src/shared/store/add-projected-income.ts","../../src/shared/store/remove-account.ts","../../src/shared/store/remove-account-entry.ts","../../src/shared/store/remove-projected-income.ts","../../src/shared/store/reset-store.ts","../../src/shared/store/set-loan.ts","../../src/shared/store/update-account-date.ts","../../src/shared/store/update-account-name.ts","../../src/shared/store/update-account-value.ts","../../src/shared/store/update-projected-income.ts","../../src/capabilities/net-wealth/components/new-account/new-account.tsx","../../src/shared/components/ag-grid/ag-grid.tsx","../../src/shared/utility/current-date.ts","../../src/shared/utility/format-date.ts","../../src/shared/utility/format-cash.ts","../../src/shared/components/formatters/cash.tsx","../../src/capabilities/net-wealth/components/tab-types/account/column-config.tsx","../../src/capabilities/net-wealth/components/tab-types/account/hooks/useMissingYears.ts","../../src/shared/components/confirm-dialog.tsx","../../src/capabilities/net-wealth/components/tab-types/account/settings.tsx","../../src/capabilities/net-wealth/components/tab-types/account/account.tsx","../../src/shared/utility/find-nearest-on-or-before.ts","../../src/shared/utility/get-graph-dates.ts","../../src/shared/utility/mortgage-calc.ts","../../src/capabilities/net-wealth/components/tab-types/mortgage/add-entry.tsx","../../src/capabilities/net-wealth/components/tab-types/mortgage/column-config.tsx","../../src/capabilities/net-wealth/components/tab-types/mortgage/settings.tsx","../../src/capabilities/net-wealth/components/tab-types/mortgage/mortgage.tsx","../../src/capabilities/net-wealth/components/account-tabs/account-tabs.tsx","../../src/shared/utility/get-graph-value.ts","../../src/capabilities/net-wealth/components/wealth-chart/use-graph-data.ts","../../src/capabilities/net-wealth/components/wealth-chart/wealth-chart.tsx","../../src/capabilities/net-wealth/net-wealth.tsx","../../src/shared/components/card.tsx","../../src/shared/components/formatters/cash-range.tsx","../../src/shared/utility/format-percent.ts","../../src/shared/components/formatters/percent.tsx","../../src/shared/components/formatters/percent-range.tsx","../../src/shared/components/formatters/value.tsx","../../src/shared/components/formatters/cluster-value.tsx","../../src/shared/utility/to-human.ts","../../src/shared/components/formatters/countdown.tsx","../../src/shared/utility/find-same-year.ts","../../src/shared/hooks/use-dates.ts","../../src/shared/store/scenario-store.ts","../../src/shared/store/update-projected-income-date.ts","../../src/capabilities/projected-income/components/data-entry/column-config.tsx","../../src/capabilities/projected-income/components/data-entry/data-entry.tsx","../../src/capabilities/projected-income/components/income-per-period.tsx","../../src/capabilities/projected-income/hooks/use-gradient.ts","../../src/capabilities/projected-income/hooks/use-has-merit-pairs.ts","../../src/capabilities/projected-income/projected-income.tsx","../../src/capabilities/projected-wealth/hooks/use-future-retirement-contributions.ts","../../src/capabilities/projected-wealth/hooks/use-future-savings.ts","../../src/capabilities/projected-wealth/hooks/use-future-social-security.ts","../../src/shared/utility/cluster-helpers.ts","../../src/capabilities/projected-wealth/components/future-events/future-events.tsx","../../src/capabilities/projected-wealth/hooks/use-earliest-account-entry.ts","../../src/capabilities/projected-wealth/hooks/use-future-bonuses.ts","../../src/capabilities/projected-wealth/hooks/use-times-series-wealth.ts","../../src/capabilities/projected-wealth/components/wealth-chart.tsx","../../src/capabilities/projected-wealth/components/wealth-table/colum-config.tsx","../../src/capabilities/projected-wealth/components/wealth-table/wealth-table.tsx","../../src/capabilities/projected-wealth/projected-wealth.tsx","../../src/shared/store/set-projected-wealth.ts","../../src/app/config/config-entry.tsx","../../src/app/config/config.tsx","../../src/app/invalid-data-dialog.tsx","../../src/shared/hooks/use-export.tsx","../../src/shared/hooks/use-import.tsx","../../src/shared/hooks/use-store-data-error.ts","../../src/app/config/system.tsx","../../src/app/config/config-modal.tsx","../../src/app/app.tsx","../../src/shared/utility/a-payday.ts","../../src/shared/web-worker/merit-sequence.ts","../../src/shared/web-worker/entry.ts","../../src/main.tsx"],"sourcesContent":["import { DateTime } from \"luxon\";\n\nexport const sortByDate =\n  <T>(select: (data: T) => DateTime, direction: \"asc\" | \"desc\") =>\n  (a: T, b: T) =>\n    direction === \"asc\" ? select(a).toMillis() - select(b).toMillis() : select(b).toMillis() - select(a).toMillis();\n","import { z } from \"zod\";\n\nexport const loanValidator = z.object({\n  principal: z.number(),\n  ratePct: z.number(),\n  paymentsPerYear: z.number(),\n  payment: z.number(),\n  firstPaymentDate: z.string(),\n  ownershipPct: z.number(),\n});\n\nexport type Loan = z.infer<typeof loanValidator>;\n","import { z } from \"zod\";\r\n\r\nexport const accountDataValidator = z.object({\r\n  date: z.string(),\r\n  value: z.number(),\r\n});\r\n\r\nexport type AccountData = z.infer<typeof accountDataValidator>;\r\n","import { z } from \"zod\";\r\nimport { accountDataValidator } from \"./account-data\";\r\n\r\nexport const accountValidator = z.object({\r\n  type: z.literal(\"account\"),\r\n  data: z.array(accountDataValidator),\r\n});\r\n\r\nexport type Account = z.infer<typeof accountValidator>;\r\n","import { Store } from \"./store\";\r\n\r\nexport const getDefaultStore = (): Store => ({\r\n  version: 3,\r\n  projectedIncome: {\r\n    timeSeries: {\r\n      paycheck: [],\r\n      meritBonusPct: [],\r\n      companyBonusPct: [\r\n        {\r\n          date: \"2020-06-15T00:00:00.000-07:00\",\r\n          value: 0.182,\r\n        },\r\n        {\r\n          date: \"2021-06-15T00:00:00.000-07:00\",\r\n          value: 0.254,\r\n        },\r\n        {\r\n          date: \"2022-06-15T00:00:00.000-07:00\",\r\n          value: 0.272,\r\n        },\r\n        {\r\n          date: \"2023-06-15T00:00:00.000-07:00\",\r\n          value: 0.168,\r\n        },\r\n      ],\r\n      meritBonus: [],\r\n      companyBonus: [],\r\n      retirementBonus: [],\r\n      equityPct: [],\r\n      meritIncreasePct: [],\r\n    },\r\n  },\r\n  wealth: {},\r\n  projectedWealth: {\r\n    medicareSupplementalTaxThreshold: 200_000,\r\n    socialSecurityLimit: 168_600,\r\n    socialSecurityTaxRate: 0.062,\r\n    medicareSupplementalTaxRate: 0.009,\r\n    savingsPerMonth: 0,\r\n    retirementContributionPaycheck: 0,\r\n    bonusWitholdingsRate: 0,\r\n  },\r\n});\r\n","import { z } from \"zod\";\n\nexport const accountDataValidator = z.object({\n  date: z.string(),\n  value: z.number(),\n  id: z.string(),\n});\n\nexport type AccountData = z.infer<typeof accountDataValidator>;\n","import { z } from \"zod\";\nimport { accountDataValidator } from \"./account-data\";\n\nexport const accountValidator = z.object({\n  type: z.literal(\"account\"),\n  data: z.array(accountDataValidator),\n});\n\nexport type Account = z.infer<typeof accountValidator>;\n","import { z } from \"zod\";\nimport { accountDataValidator } from \"./account-data\";\nimport { loanValidator } from \"./loan\";\n\nexport const mortgageValidator = z.object({\n  type: z.literal(\"mortgage\"),\n  loan: loanValidator.optional(),\n  data: z.array(accountDataValidator),\n});\n\nexport type Mortgage = z.infer<typeof mortgageValidator>;\n","import { z } from \"zod\";\nimport { accountValidator } from \"./account\";\nimport { mortgageValidator } from \"./mortgage\";\n\nexport const wealth = z.record(z.union([accountValidator, mortgageValidator]));\n\nexport type Wealth = z.infer<typeof wealth>;\n","import { z } from \"zod\";\nimport { accountDataValidator } from \"./account-data\";\n\nexport const projectedIncome = z.object({\n  timeSeries: z.object({\n    paycheck: z.array(accountDataValidator),\n    meritIncreasePct: z.array(accountDataValidator),\n    equityPct: z.array(accountDataValidator),\n    meritBonusPct: z.array(accountDataValidator),\n    meritBonus: z.array(accountDataValidator),\n    companyBonusPct: z.array(accountDataValidator),\n    companyBonus: z.array(accountDataValidator),\n    retirementBonus: z.array(accountDataValidator),\n  }),\n});\n\nexport type ProjectedIncome = z.infer<typeof projectedIncome>;\nexport type TimeSeries = keyof ProjectedIncome[\"timeSeries\"];\n","import { z } from \"zod\";\r\n\r\nexport const projectedWealth = z.object({\r\n  socialSecurityLimit: z.number(),\r\n  socialSecurityTaxRate: z.number(),\r\n  medicareSupplementalTaxThreshold: z.number(),\r\n  medicareSupplementalTaxRate: z.number(),\r\n  savingsPerMonth: z.number(),\r\n  retirementContributionPaycheck: z.number(),\r\n  bonusWitholdingsRate: z.number(),\r\n});\r\n\r\nexport type ProjectedWealth = z.infer<typeof projectedWealth>;\r\nexport type ProjectedWealthKeys = keyof ProjectedWealth;\r\n","import { z } from \"zod\";\n\nexport const projectedWealth = z.object({\n  socialSecurityLimit: z.number(),\n  socialSecurityTaxRate: z.number(),\n  medicareSupplementalTaxThreshold: z.number(),\n  medicareSupplementalTaxRate: z.number(),\n  savingsPerMonth: z.number(),\n  retirementContributionPaycheck: z.number(),\n});\n\nexport type ProjectedWealth = z.infer<typeof projectedWealth>;\nexport type ProjectedWealthKeys = keyof ProjectedWealth;\n","import { z } from \"zod\";\nimport { wealth } from \"../version-0/net-wealth\";\nimport { projectedIncome } from \"../version-0/projected-income\";\nimport { projectedWealth } from \"../version-0/projected-wealth\";\n\nexport const storeValidator = z.object({\n  version: z.literal(1),\n  wealth: wealth,\n  projectedIncome: projectedIncome,\n  projectedWealth: projectedWealth,\n});\n\nexport type Store = z.infer<typeof storeValidator>;\n","import { z } from \"zod\";\r\nimport { projectedIncome, wealth } from \"../version-1\";\r\nimport { projectedWealth } from \"./projected-wealth\";\r\n\r\nexport const storeValidator = z.object({\r\n  version: z.literal(2),\r\n  wealth: wealth,\r\n  projectedIncome: projectedIncome,\r\n  projectedWealth: projectedWealth,\r\n});\r\n\r\nexport type Store = z.infer<typeof storeValidator>;\r\n","import { z } from \"zod\";\r\nimport { loanValidator } from \"../version-2\";\r\nimport { accountDataValidator } from \"./account-data\";\r\n\r\nexport const mortgageValidator = z.object({\r\n  type: z.literal(\"mortgage\"),\r\n  loan: loanValidator.optional(),\r\n  data: z.array(accountDataValidator),\r\n});\r\n\r\nexport type Mortgage = z.infer<typeof mortgageValidator>;\r\n","import { z } from \"zod\";\r\nimport { accountValidator } from \"./account\";\r\nimport { mortgageValidator } from \"./mortgage\";\r\n\r\nexport const wealth = z.record(z.union([accountValidator, mortgageValidator]));\r\n\r\nexport type Wealth = z.infer<typeof wealth>;\r\n","import { z } from \"zod\";\r\nimport { accountDataValidator } from \"./account-data\";\r\n\r\nexport const projectedIncome = z.object({\r\n  timeSeries: z.object({\r\n    paycheck: z.array(accountDataValidator),\r\n    meritIncreasePct: z.array(accountDataValidator),\r\n    equityPct: z.array(accountDataValidator),\r\n    meritBonusPct: z.array(accountDataValidator),\r\n    meritBonus: z.array(accountDataValidator),\r\n    companyBonusPct: z.array(accountDataValidator),\r\n    companyBonus: z.array(accountDataValidator),\r\n    retirementBonus: z.array(accountDataValidator),\r\n  }),\r\n});\r\n\r\nexport type ProjectedIncome = z.infer<typeof projectedIncome>;\r\nexport type TimeSeries = keyof ProjectedIncome[\"timeSeries\"];\r\n","import { z } from \"zod\";\r\n\r\nexport const projectedWealth = z.object({\r\n  socialSecurityLimit: z.number(),\r\n  socialSecurityTaxRate: z.number(),\r\n  medicareSupplementalTaxThreshold: z.number(),\r\n  medicareSupplementalTaxRate: z.number(),\r\n  savingsPerMonth: z.number(),\r\n  retirementContributionPaycheck: z.number(),\r\n  bonusWitholdingsRate: z.number(),\r\n});\r\n\r\nexport type ProjectedWealth = z.infer<typeof projectedWealth>;\r\nexport type ProjectedWealthKeys = keyof ProjectedWealth;\r\n","import { z } from \"zod\";\r\nimport { wealth } from \"./net-wealth\";\r\nimport { projectedIncome } from \"./projected-income\";\r\nimport { projectedWealth } from \"./projected-wealth\";\r\n\r\nexport const storeValidator = z.object({\r\n  version: z.literal(3),\r\n  wealth: wealth,\r\n  projectedIncome: projectedIncome,\r\n  projectedWealth: projectedWealth,\r\n});\r\n\r\nexport type Store = z.infer<typeof storeValidator>;\r\n","import { z } from \"zod\";\nimport { wealth } from \"./net-wealth\";\nimport { projectedIncome } from \"./projected-income\";\nimport { projectedWealth } from \"./projected-wealth\";\n\nexport const storeValidator = z.object({\n  wealth: wealth,\n  projectedIncome: projectedIncome,\n  projectedWealth: projectedWealth,\n});\n\nexport type Store = z.infer<typeof storeValidator>;\n","import { Store, storeValidator } from \"shared/models/store/current\";\r\nimport { storeValidator as storeV0Validator } from \"shared/models/store/version-0\";\r\nimport { Store as StoreV1, storeValidator as storeV1Validator } from \"shared/models/store/version-1\";\r\nimport { Store as StoreV2, storeValidator as storeV2Validator } from \"shared/models/store/version-2\";\r\n\r\nexport const migration = (data: unknown) => {\r\n  if (data === null || data === undefined) {\r\n    throw new Error(\"parsed data is null or undefined\");\r\n  } else if (typeof data !== \"object\") {\r\n    throw new Error(\"Parsed data is not an object\");\r\n  }\r\n\r\n  if (!(\"version\" in data)) {\r\n    storeV0Validator.parse(data);\r\n    (data as StoreV1).version = 1;\r\n  }\r\n\r\n  if (\"version\" in data) {\r\n    if (data.version === 1) {\r\n      storeV1Validator.parse(data);\r\n      (data as StoreV2).version = 2;\r\n      (data as StoreV2).projectedWealth.bonusWitholdingsRate = 0;\r\n    }\r\n    if (data.version === 2) {\r\n      storeV2Validator.parse(data);\r\n      (data as Store).version = 3;\r\n    }\r\n  }\r\n\r\n  const next = storeValidator.parse(data);\r\n  console.log(next);\r\n  return next;\r\n};\r\n","import { Store as CreateStore } from \"@tanstack/store\";\nimport { ZodSchema } from \"zod\";\nimport { Store, getDefaultStore, storeValidator } from \"../models/store/current\";\nimport { migration } from \"./migrations\";\n\nconst createStore = <T extends object>(validator: ZodSchema, defaultValue: T) => {\n  const key = \"store\";\n  const invalidData = \"store-invalid\";\n  const localData = localStorage.getItem(key);\n  const data = localData ? JSON.parse(localData) : defaultValue;\n  const parse = validator.safeParse(data);\n\n  if (!parse.success) {\n    try {\n      migration(data);\n      localStorage.setItem(key, JSON.stringify(data));\n    } catch (err) {\n      console.log(\"error\", err);\n      console.log(\"invalid data\", data);\n      localStorage.setItem(invalidData, JSON.stringify(data));\n      localStorage.setItem(key, JSON.stringify(defaultValue));\n    }\n  }\n\n  const store = new CreateStore<T>(data);\n  store.subscribe(() => {\n    const current = localStorage.getItem(key);\n    current && localStorage.setItem(`${key}-previous`, current);\n    localStorage.setItem(key, JSON.stringify(store.state));\n  });\n\n  return store;\n};\n\nexport const store = createStore<Store>(storeValidator, getDefaultStore());\n","import { DateTime } from \"luxon\";\r\nimport { create } from \"mutative\";\r\nimport { Account } from \"shared/models/store/current\";\r\nimport { sortByDate } from \"../utility/sort-by-date\";\r\nimport { store } from \"./store\";\r\n\r\nexport const AddAccountEntry = (accountName: string, date: DateTime<true>, amount: number) => {\r\n  store.setState((prev) => {\r\n    return create(prev, (next) => {\r\n      (next.wealth[accountName] as Account).data.push({\r\n        date: date.startOf(\"day\").toString(),\r\n        value: amount,\r\n      });\r\n      next.wealth[accountName].data.sort(sortByDate((x) => DateTime.fromISO(x.date), \"asc\"));\r\n    });\r\n  });\r\n};\r\n","import { DateTime } from \"luxon\";\r\nimport { create } from \"mutative\";\r\nimport { TimeSeries } from \"shared/models/store/current\";\r\nimport { sortByDate } from \"shared/utility/sort-by-date\";\r\nimport { store } from \"./store\";\r\n\r\nexport const addProjectedIncome = (date: DateTime, timeSeries: TimeSeries, value: number) => {\r\n  store.setState((prev) => {\r\n    return create(prev, (next) => {\r\n      next.projectedIncome.timeSeries[timeSeries] = next.projectedIncome.timeSeries[timeSeries]\r\n        .concat({\r\n          date: date.startOf(\"day\").toString(),\r\n          value,\r\n        })\r\n        .sort(sortByDate((x) => DateTime.fromISO(x.date), \"asc\"));\r\n    });\r\n  });\r\n};\r\n","import { create } from \"mutative\";\nimport { store } from \"./store\";\n\nexport const removeAccount = (accountName: string) =>\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      delete next.wealth[accountName];\n    });\n  });\n","import { create } from \"mutative\";\r\nimport { AccountData } from \"shared/models/store/current\";\r\nimport { store } from \"./store\";\r\n\r\nexport const removeAccountEntry = (accountName: string, data: AccountData) =>\r\n  store.setState((prev) => {\r\n    return create(prev, (next) => {\r\n      const idx = prev.wealth[accountName].data.findIndex((x) => x === data);\r\n      if (idx < 0) {\r\n        throw new Error(\"failed to find data\");\r\n      }\r\n\r\n      next.wealth[accountName].data.splice(idx, 1);\r\n      return next;\r\n    });\r\n  });\r\n","import { create } from \"mutative\";\r\nimport { AccountData, TimeSeries } from \"shared/models/store/current\";\r\nimport { store } from \".\";\r\n\r\nexport const removeProjectedIncome = (accountName: TimeSeries, data: AccountData) => {\r\n  store.setState((prev) => {\r\n    return create(prev, (next) => {\r\n      const idx = prev.projectedIncome.timeSeries[accountName].findIndex((x) => x === data);\r\n      if (idx < 0) {\r\n        throw new Error(\"failed to find data\");\r\n      }\r\n\r\n      next.projectedIncome.timeSeries[accountName].splice(idx, 1);\r\n    });\r\n  });\r\n};\r\n","import { getDefaultStore } from \"shared/models/store/current\";\nimport { store } from \"./store\";\n\nexport const resetStore = () => store.setState(() => getDefaultStore());\n","import { create } from \"mutative\";\nimport { Loan, Mortgage } from \"shared/models/store/current\";\nimport { store } from \"./store\";\n\nexport const setLoan = (accountName: string, loan: Loan) =>\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      if (next.wealth[accountName].type === \"mortgage\") {\n        (next.wealth[accountName] as Mortgage).loan = loan;\n      }\n    });\n  });\n","import { DateTime } from \"luxon\";\r\nimport { create } from \"mutative\";\r\nimport { AccountData } from \"shared/models/store/current\";\r\nimport { store } from \".\";\r\n\r\nexport const updateAccountDate = (accountName: string, data: AccountData, date: DateTime) => {\r\n  store.setState((prev) => {\r\n    const next = create(prev, (next) => {\r\n      const account = next.wealth[accountName];\r\n      const idx = account?.data.findIndex((x) => x === data);\r\n      if (idx < 0) {\r\n        throw new Error(\"failed to find data\");\r\n      }\r\n\r\n      account.data[idx].date = date.toISO()!;\r\n    });\r\n    return next;\r\n  });\r\n};\r\n","import { create } from \"mutative\";\nimport { store } from \"./store\";\n\nexport const updateAccountName = (currentAccountName: string, newAccountName: string) =>\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      next.wealth[newAccountName] = next.wealth[currentAccountName];\n      delete next.wealth[currentAccountName];\n    });\n  });\n","import { create } from \"mutative\";\r\nimport { AccountData } from \"shared/models/store/current\";\r\nimport { store } from \".\";\r\n\r\nexport const updateAccountValue = (accountName: string, data: AccountData, value: number) => {\r\n  store.setState((prev) => {\r\n    const next = create(prev, (next) => {\r\n      const account = next.wealth[accountName];\r\n      const idx = account?.data.findIndex((x) => x === data);\r\n      if (idx < 0) {\r\n        throw new Error(\"failed to find data\");\r\n      }\r\n\r\n      account.data[idx].value = value;\r\n    });\r\n    return next;\r\n  });\r\n};\r\n","import { create } from \"mutative\";\r\nimport { AccountData, TimeSeries } from \"shared/models/store/current\";\r\nimport { store } from \".\";\r\n\r\nexport const updateProjectedIncome = (timeSeries: TimeSeries, data: AccountData, value: number) => {\r\n  store.setState((prev) => {\r\n    const next = create(prev, (next) => {\r\n      const account = next.projectedIncome.timeSeries[timeSeries];\r\n      const idx = account.findIndex((x) => x === data);\r\n      if (idx < 0) {\r\n        throw new Error(\"failed to find data\");\r\n      }\r\n      account[idx].value = value;\r\n    });\r\n    return next;\r\n  });\r\n};\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, MenuItem, Stack, TextField } from \"@mui/material\";\nimport { create } from \"mutative\";\nimport { ReactNode, forwardRef, useRef, useState } from \"react\";\nimport { store } from \"shared/store\";\n\ntype AssetType = \"account\" | \"mortgage\";\nexport const NewAccount = forwardRef<HTMLButtonElement, { children?: ReactNode }>((props, ref) => {\n  const [open, setOpen] = useState(false);\n  const nameRef = useRef<HTMLInputElement>(null);\n  const [error, setError] = useState(false);\n  const [accountType, setAccountType] = useState<AssetType>();\n\n  return (\n    <>\n      <Button\n        ref={ref}\n        variant=\"outlined\"\n        onClick={() => {\n          setOpen(true);\n          setError(false);\n          setAccountType(undefined);\n        }}\n        sx={{ marginTop: 3 }}\n      >\n        add account\n      </Button>\n\n      <Dialog open={open} onClose={() => setOpen(false)}>\n        <DialogTitle>Add New Account</DialogTitle>\n        <DialogContent>\n          <Stack spacing={2} margin={2}>\n            <TextField\n              select\n              color={error ? \"error\" : \"primary\"}\n              onChange={(value) => {\n                setError(false);\n                setAccountType(value.target.value as AssetType);\n              }}\n              label=\"Type\"\n            >\n              <MenuItem value=\"mortgage\">Mortgage</MenuItem>\n              <MenuItem value=\"account\">Generic Account</MenuItem>\n            </TextField>\n\n            <TextField\n              placeholder=\"Name\"\n              onChange={() => {\n                setError(false);\n              }}\n              error={error}\n              inputRef={nameRef}\n            />\n          </Stack>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            disabled={error}\n            onClick={() => {\n              store.setState((prev) => {\n                return create(prev, (next) => {\n                  if (!nameRef.current?.value || !accountType || prev.wealth[nameRef.current.value]) {\n                    setError(true);\n                    return;\n                  }\n\n                  next.wealth[nameRef.current.value] = {\n                    type: accountType,\n                    data: [],\n                  };\n\n                  setOpen(false);\n                });\n              });\n            }}\n          >\n            Add\n          </Button>\n        </DialogActions>\n      </Dialog>\n      {props?.children}\n    </>\n  );\n});\n","import { AgGridReact, AgGridReactProps } from \"ag-grid-react\";\n\nexport const AgGrid = (props: AgGridReactProps & { id: string }) => {\n  const { id, ...rest } = props;\n  return (\n    <div id={id} className=\"ag-theme-quartz-dark\" style={{ height: \"100%\" }}>\n      <AgGridReact {...rest} suppressMovableColumns />\n    </div>\n  );\n};\n","import { DateTime } from \"luxon\";\n\nexport const getLocalDateTime = () => DateTime.local();\n","export const shortDate = \"yyyy-MM-dd\";\n\nexport const monthDay = \"MMM dd\";\n","export const formatCashShort = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  notation: \"compact\",\n  maximumFractionDigits: 0,\n}).format;\n\nexport const formatCash = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  maximumFractionDigits: 0,\n}).format;\n","import { Tooltip } from \"@mui/material\";\nimport { useMemo } from \"react\";\nimport { formatCash, formatCashShort } from \"shared/utility/format-cash\";\n\ninterface CashProps {\n  value?: number;\n  fallback?: number;\n  disableTooltip?: boolean;\n  compact?: boolean;\n  tooltip?: string;\n  placement?:\n    | \"top\"\n    | \"right\"\n    | \"bottom\"\n    | \"left\"\n    | \"bottom-end\"\n    | \"bottom-start\"\n    | \"left-end\"\n    | \"left-start\"\n    | \"right-end\"\n    | \"right-start\"\n    | \"top-end\"\n    | \"top-start\"\n    | undefined;\n}\nexport const Cash = ({ value, fallback, disableTooltip, compact = true, tooltip, placement }: CashProps) => {\n  const formatted = useMemo(() => {\n    if (value === undefined) {\n      return fallback;\n    }\n    return compact ? formatCashShort(value) : formatCash(value);\n  }, [compact, fallback, value]);\n\n  return (\n    <Tooltip\n      placement={placement}\n      disableHoverListener={disableTooltip || !compact || !value}\n      title={[tooltip, formatCash(value!)].join(\" \")}\n    >\n      <span>{formatted}</span>\n    </Tooltip>\n  );\n};\n","import DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\r\nimport { Button } from \"@mui/material\";\r\nimport { ColDef } from \"ag-grid-community\";\r\nimport { CustomCellRendererProps } from \"ag-grid-react\";\r\nimport { DateTime } from \"luxon\";\r\nimport { Cash } from \"shared/components/formatters/cash\";\r\nimport { AccountData } from \"shared/models/store/current\";\r\nimport { updateAccountDate, updateAccountValue } from \"shared/store\";\r\nimport { removeAccountEntry } from \"shared/store/remove-account-entry\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\n\r\nexport const createAccountColumnConfig = (accountName: string): ColDef<AccountData>[] => [\r\n  {\r\n    headerName: \"Date\",\r\n    sort: \"desc\",\r\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\r\n    valueGetter: (x) => x.data && DateTime.fromISO(x.data.date),\r\n    cellEditor: \"agDateCellEditor\",\r\n    editable: true,\r\n    valueSetter: (x) => {\r\n      const date = DateTime.fromJSDate(x.newValue);\r\n      if (date.isValid) {\r\n        updateAccountDate(accountName, x.data, date);\r\n      }\r\n      return date.isValid;\r\n    },\r\n  },\r\n  {\r\n    headerName: \"Value\",\r\n    valueGetter: (x) => x.data?.value,\r\n    valueSetter: (x) => {\r\n      updateAccountValue(accountName, x.data, +x.newValue);\r\n      return true;\r\n    },\r\n    cellRenderer: (x: CustomCellRendererProps<AccountData>) => <Cash value={x.value} placement=\"left\" />,\r\n    editable: true,\r\n    cellEditor: \"agNumberCellEditor\",\r\n    type: \"numericColumn\",\r\n  },\r\n  {\r\n    cellStyle: () => ({ display: \"inline-flex\", padding: \"0px\" }),\r\n    sortable: false,\r\n    headerName: \"\",\r\n    width: 80,\r\n    colId: \"actions\",\r\n    cellRenderer: (props: CustomCellRendererProps<AccountData>) => {\r\n      return (\r\n        <Button\r\n          onClick={() => {\r\n            props.data && removeAccountEntry(accountName, props.data);\r\n          }}\r\n          color=\"error\"\r\n          fullWidth\r\n        >\r\n          <DeleteForeverIcon />\r\n        </Button>\r\n      );\r\n    },\r\n  },\r\n];\r\n","import { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { Account } from \"shared/models/store/current\";\n\nexport const useMissingYears = (account: Account) => {\n  return useMemo(() => {\n    const years = Object.entries(Object.groupBy(account.data, (x) => DateTime.fromISO(x.date).year))\n      .map(\n        ([year, entries]) =>\n          [\n            +year,\n            !!entries?.find((x) => {\n              const date = DateTime.fromISO(x.date);\n              const janFirst = DateTime.fromObject({\n                day: 1,\n                month: 1,\n                year: +year,\n              });\n              return date.diff(janFirst, [\"days\", \"hours\"]).days == 0;\n            }),\n          ] as [number, boolean]\n      )\n      .sort(([a], [b]) => {\n        return a - b;\n      });\n\n    const lookup = Object.fromEntries(years);\n    const missing = [];\n    for (let i = years[0]?.[0] ?? 0; i <= years[years.length - 1]?.[0]; i++) {\n      if (!lookup[i]) {\n        missing.push(i);\n      }\n    }\n    return missing;\n  }, [account.data]);\n};\n","import { Button, Dialog, DialogActions, DialogTitle } from \"@mui/material\";\r\nimport React, { ReactElement, useMemo, useState } from \"react\";\r\n\r\ninterface ConfirmDialogProps {\r\n  onConfirm?: () => void;\r\n  title: string;\r\n  children: ReactElement;\r\n}\r\nexport const ConfirmDialog = (props: ConfirmDialogProps) => {\r\n  const { onConfirm, title, children } = props;\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const openButton = useMemo(() => {\r\n    return React.cloneElement(children, { onClick: () => setIsOpen(true) });\r\n  }, [children]);\r\n\r\n  return (\r\n    <>\r\n      {openButton}\r\n      <Dialog open={isOpen} onClose={() => setIsOpen(false)}>\r\n        <DialogTitle sx={{ minWidth: 300, display: \"flex\", justifyContent: \"center\" }}>{title}</DialogTitle>\r\n        <DialogActions>\r\n          <Button sx={{ marginRight: \"auto\" }} onClick={() => setIsOpen(false)}>\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"error\"\r\n            onClick={() => {\r\n              onConfirm?.();\r\n              setIsOpen(false);\r\n            }}\r\n          >\r\n            Confirm\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n","import Close from \"@mui/icons-material/Close\";\r\nimport SettingsIcon from \"@mui/icons-material/Settings\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  Stack,\r\n  TextField,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { useState } from \"react\";\r\nimport { ConfirmDialog } from \"shared/components/confirm-dialog\";\r\nimport { removeAccount, updateAccountName } from \"shared/store\";\r\n\r\ninterface AccountSettingsProps {\r\n  accountName: string;\r\n}\r\n\r\nexport const AccountSettings = (props: AccountSettingsProps) => {\r\n  const { accountName } = props;\r\n  const [nextAccountName, setNextAccountName] = useState<string>(accountName);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  return (\r\n    <>\r\n      <IconButton onClick={() => setIsOpen(true)}>\r\n        <SettingsIcon />\r\n      </IconButton>\r\n      <Dialog open={isOpen} onClose={() => setIsOpen(false)}>\r\n        <DialogTitle>\r\n          <Stack direction={\"row\"} width=\"100%\" alignItems={\"center\"} justify-content={\"space-between\"}>\r\n            <Typography variant=\"h6\">{accountName} Settings</Typography>\r\n            <IconButton onClick={() => setIsOpen(false)}>\r\n              <Close />\r\n            </IconButton>\r\n          </Stack>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Stack spacing={1} marginTop={1}>\r\n            <TextField\r\n              label=\"Account Name\"\r\n              value={nextAccountName}\r\n              onChange={(event) => setNextAccountName(event.target.value)}\r\n              placeholder=\"\"\r\n            />\r\n          </Stack>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <ConfirmDialog onConfirm={() => removeAccount(accountName)} title={`Confirm Deleting ${accountName} Account`}>\r\n            <Button sx={{ marginRight: 10 }} color=\"error\">\r\n              Delete Account\r\n            </Button>\r\n          </ConfirmDialog>\r\n          <Button\r\n            disabled={!nextAccountName}\r\n            onClick={() => {\r\n              setIsOpen(false);\r\n            }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            disabled={!nextAccountName}\r\n            onClick={() => {\r\n              accountName != nextAccountName && updateAccountName(accountName, nextAccountName);\r\n              setIsOpen(false);\r\n            }}\r\n          >\r\n            Save\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n","import { Alert, Box, Button, InputAdornment, Paper, Stack, TextField, Typography } from \"@mui/material\";\nimport Grid from \"@mui/system/Unstable_Grid\";\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo, useRef, useState } from \"react\";\nimport { AgGrid } from \"shared/components/ag-grid\";\nimport { Account } from \"shared/models/store/current\";\nimport { AddAccountEntry, store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { shortDate } from \"shared/utility/format-date\";\nimport { createAccountColumnConfig } from \"./column-config\";\nimport { useMissingYears } from \"./hooks/useMissingYears\";\nimport { AccountSettings } from \"./settings\";\n\nexport const AccountTab = (props: { accountName: string }) => {\n  const { accountName } = props;\n  const account = useStore(store, (state) => state.wealth[accountName]) as Account;\n  const [date, setDate] = useState(getLocalDateTime());\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const missingYears = useMissingYears(account);\n  const hasSameDate = useMemo(() => {\n    return !!account?.data?.find((x) => date.hasSame(DateTime.fromISO(x.date), \"day\"));\n  }, [account?.data, date]);\n\n  const onAddEntry = () => {\n    inputRef.current && AddAccountEntry(accountName, date, +inputRef.current?.value);\n  };\n\n  const accountColumnConfig = useMemo(() => {\n    return createAccountColumnConfig(accountName);\n  }, [accountName]);\n\n  return (\n    <Stack height=\"100%\" spacing={2}>\n      <Stack direction={\"row\"}>\n        <Typography variant=\"h5\">{accountName}</Typography>\n        <Box sx={{ marginLeft: \"auto\" }}>\n          <AccountSettings key={accountName} accountName={accountName} />\n        </Box>\n      </Stack>\n      {missingYears.length > 0 && (\n        <Grid xs={12}>\n          <Paper elevation={3}>\n            <Alert severity=\"warning\">Ensure an entry for Jan 1st for {missingYears.join(\", \")}</Alert>\n          </Paper>\n        </Grid>\n      )}\n\n      <DatePicker\n        format={shortDate}\n        sx={{ color: \"white\" }}\n        label=\"Date\"\n        defaultValue={date}\n        onChange={(value) => value && setDate(value)}\n      />\n      <TextField\n        key={accountName}\n        label=\"amount\"\n        type=\"number\"\n        inputRef={inputRef}\n        InputProps={{\n          startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n        }}\n        placeholder=\"0\"\n      />\n      <Button disabled={!date || hasSameDate} onClick={onAddEntry}>\n        Add Entry\n      </Button>\n\n      <AgGrid\n        reactiveCustomComponents\n        rowData={account.data}\n        columnDefs={accountColumnConfig}\n        id={account + \"-history\"}\n        autoSizeStrategy={{ type: \"fitGridWidth\" }}\n        onRowDataUpdated={(x) => x.api.sizeColumnsToFit()}\n        stopEditingWhenCellsLoseFocus\n      />\n    </Stack>\n  );\n};\n","import { DateTime } from \"luxon\";\nimport { AccountData } from \"shared/models/store/current\";\n\nexport const findNearestOnOrBefore = (date: DateTime, data: AccountData[]) => {\n  return data.find((x, idx, array) => {\n    if (idx == 0 && DateTime.fromISO(x.date).startOf(\"day\") >= date) {\n      return true;\n    }\n\n    if (\n      idx < array.length - 1 &&\n      DateTime.fromISO(x.date).startOf(\"day\") <= date &&\n      DateTime.fromISO(data[idx + 1].date).startOf(\"day\") > date\n    ) {\n      return true;\n    }\n\n    if (idx === array.length - 1) {\n      return true;\n    }\n  });\n};\n\nexport const findNearestIdxOnOrBefore = <T>(date: DateTime, data: T[], selector: (data: T) => DateTime) => {\n  return data.findIndex((x, idx, array) => {\n    if (idx == 0 && selector(x) >= date) {\n      return true;\n    }\n\n    if (idx < array.length - 1 && selector(x) <= date && selector(data[idx + 1]) > date) {\n      return true;\n    }\n\n    if (idx === array.length - 1) {\n      return true;\n    }\n  });\n};\n","import { DateTime } from \"luxon\";\nimport { Account, Mortgage } from \"shared/models/store/current\";\n\nexport const getGraphDates = (accounts: (Account | Mortgage)[]) => {\n  return [\n    ...new Set(\n      accounts.flatMap((x) => {\n        return x.data.map((x) => DateTime.fromISO(x.date).startOf(\"day\").toISO());\n      })\n    ),\n  ]\n    .map((x) => DateTime.fromISO(x!))\n    .sort((a, b) => a.toMillis() - b.toMillis()) as DateTime<true>[];\n};\n","import { DateTime } from \"luxon\";\nimport { Loan } from \"shared/models/store/current\";\n\nexport const calcLoanBalance = (date: DateTime, loan: Loan) => {\n  const { firstPaymentDate, paymentsPerYear, principal: principal, ratePct: rate, payment: monthlyPayment } = loan;\n  const annualizedRate = rate / paymentsPerYear;\n  const periods = date.diff(DateTime.fromISO(firstPaymentDate), \"months\").months;\n  const totalRate = (1 + annualizedRate) ** periods;\n  const balance = principal * totalRate - (monthlyPayment / annualizedRate) * (totalRate - 1);\n\n  return balance;\n};\n\nexport const calcEquity = (\n  ownershipPct: number,\n  houseValue: number | undefined,\n  loanBalance: number,\n  principal: number\n) => {\n  return houseValue ? houseValue * ownershipPct - loanBalance : principal - loanBalance;\n};\n","import { Button, InputAdornment, TextField } from \"@mui/material\";\nimport { Stack } from \"@mui/system\";\nimport { DatePicker } from \"@mui/x-date-pickers\";\nimport { DateTime } from \"luxon\";\nimport { useRef, useState } from \"react\";\nimport { AddAccountEntry } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\n\nexport const AddEntry = (props: { accountName: string }) => {\n  const { accountName } = props;\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [date, setDate] = useState<DateTime>();\n\n  const onAddEntry = () => {\n    const value = inputRef.current?.value;\n    if (!date || !value) {\n      return;\n    }\n    AddAccountEntry(accountName, date, +value);\n  };\n\n  return (\n    <Stack spacing={2}>\n      <DatePicker\n        defaultValue={getLocalDateTime()}\n        onChange={(date: DateTime | null) => {\n          date && setDate(date);\n        }}\n      />\n      <TextField\n        key={accountName}\n        label=\"Home value\"\n        type=\"numeric\"\n        inputRef={inputRef}\n        InputProps={{\n          startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n        }}\n        placeholder=\"0\"\n      />\n      <Button onClick={onAddEntry}>Add Home Value</Button>\n    </Stack>\n  );\n};\n","import DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\r\nimport { Button } from \"@mui/material\";\r\nimport { ColDef } from \"ag-grid-community\";\r\nimport { CustomCellRendererProps } from \"ag-grid-react\";\r\nimport { DateTime } from \"luxon\";\r\nimport { Cash } from \"shared/components/formatters/cash\";\r\nimport { AccountData } from \"shared/models/store/current\";\r\nimport { removeAccountEntry } from \"shared/store\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\n\r\nexport const createAccountColumnConfig = (accountName: string): ColDef<AccountData>[] => [\r\n  {\r\n    headerName: \"Date\",\r\n    sort: \"desc\",\r\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\r\n    valueGetter: (x) => x.data && DateTime.fromISO(x.data.date),\r\n  },\r\n  {\r\n    headerName: \"Home Value\",\r\n    cellRenderer: (x: CustomCellRendererProps<AccountData>) => <Cash value={x.value} placement=\"left\" />,\r\n    valueGetter: (x) => x.data?.value,\r\n    type: \"numericColumn\",\r\n  },\r\n  {\r\n    cellStyle: () => ({ display: \"inline-flex\", padding: \"0px\" }),\r\n    headerName: \"\",\r\n    width: 80,\r\n    sortable: false,\r\n    colId: \"actions\",\r\n    cellRenderer: (props: CustomCellRendererProps<AccountData>) => {\r\n      return (\r\n        <Button\r\n          onClick={() => {\r\n            props.data && removeAccountEntry(accountName, props.data);\r\n          }}\r\n          color=\"error\"\r\n          fullWidth\r\n        >\r\n          <DeleteForeverIcon />\r\n        </Button>\r\n      );\r\n    },\r\n  },\r\n];\r\n\r\ntype House = {\r\n  date: DateTime;\r\n  balance: number;\r\n  equity: number;\r\n};\r\n\r\nexport const mortgageColumnConfig: ColDef<House>[] = [\r\n  {\r\n    headerName: \"Date\",\r\n    sort: \"desc\",\r\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\r\n    valueGetter: (x) => x.data?.date,\r\n  },\r\n  {\r\n    headerName: \"Loan Balance\",\r\n    valueGetter: (x) => x.data?.balance.toFixed(2),\r\n    cellRenderer: (x: CustomCellRendererProps<House>) => <Cash value={x.value} placement=\"left\" />,\r\n    type: \"numericColumn\",\r\n  },\r\n  {\r\n    headerName: \"Equity\",\r\n    valueGetter: (x) => x.data?.equity.toFixed(2),\r\n    cellRenderer: (x: CustomCellRendererProps<House>) => <Cash value={x.value} placement=\"left\" />,\r\n    type: \"numericColumn\",\r\n  },\r\n];\r\n","import Close from \"@mui/icons-material/Close\";\r\nimport SettingsIcon from \"@mui/icons-material/Settings\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  Stack,\r\n  TextField,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { DatePicker } from \"@mui/x-date-pickers\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { DateTime } from \"luxon\";\r\nimport { useRef, useState } from \"react\";\r\nimport { ConfirmDialog } from \"shared/components/confirm-dialog\";\r\nimport { Loan } from \"shared/models/store/version-1\";\r\nimport { removeAccount, setLoan, store, updateAccountName } from \"shared/store\";\r\nimport { ZodIssue, z } from \"zod\";\r\n\r\nconst convertPct = (value: number) => {\r\n  return value > 1 ? value / 100 : value;\r\n};\r\n\r\nconst validator: z.ZodType<Loan> = z.object({\r\n  principal: z.number().min(0),\r\n  ratePct: z.number().min(0),\r\n  paymentsPerYear: z.number().min(0),\r\n  payment: z.number().min(0),\r\n  firstPaymentDate: z.string().datetime({ offset: true }),\r\n  ownershipPct: z.number().min(0),\r\n});\r\n\r\ninterface AccountSettingsProps {\r\n  accountName: string;\r\n}\r\n\r\nexport const AccountSettings = (props: AccountSettingsProps) => {\r\n  const { accountName } = props;\r\n  const [nextAccountName, setNextAccountName] = useState<string>(accountName);\r\n  const loan = useStore(store, (x) => {\r\n    const account = x.wealth[accountName];\r\n    if (\"loan\" in account) {\r\n      return account.loan;\r\n    }\r\n  });\r\n\r\n  const ref = useRef<Partial<Loan>>(loan ?? {});\r\n  const [error, setError] = useState<Partial<Record<keyof Loan, ZodIssue>>>({});\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const handleClose = () => {\r\n    setError({});\r\n    ref.current = loan ?? {};\r\n    setIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <IconButton onClick={() => setIsOpen(true)}>\r\n        <SettingsIcon />\r\n      </IconButton>\r\n      <Dialog open={isOpen} onClose={handleClose}>\r\n        <DialogTitle sx={{ width: \"100%\" }}>\r\n          <Box display={\"flex\"} width=\"100%\" alignItems={\"center\"} sx={{ justifyContent: \"space-between\" }}>\r\n            <Typography variant=\"h6\">{accountName} Settings</Typography>\r\n            <IconButton sx={{ marginLeft: \"auto\" }} onClick={handleClose}>\r\n              <Close />\r\n            </IconButton>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Stack spacing={2} marginTop={1}>\r\n            <TextField\r\n              label=\"Account Name\"\r\n              value={nextAccountName}\r\n              onChange={(event) => setNextAccountName(event.target.value)}\r\n              placeholder=\"\"\r\n            />\r\n            <DatePicker\r\n              defaultValue={ref.current?.firstPaymentDate ? DateTime.fromISO(ref.current.firstPaymentDate) : null}\r\n              label=\"First Payment\"\r\n              slotProps={{\r\n                textField: {\r\n                  error: !!error.firstPaymentDate,\r\n                },\r\n              }}\r\n              onChange={(value: DateTime | null) => {\r\n                if (value) {\r\n                  ref.current.firstPaymentDate = value.startOf(\"day\").toISO()!;\r\n                }\r\n              }}\r\n            />\r\n            <TextField\r\n              error={!!error.principal}\r\n              defaultValue={loan?.principal}\r\n              onChange={(event) => {\r\n                ref.current.principal = +event.target.value;\r\n              }}\r\n              variant=\"outlined\"\r\n              label=\"Principal\"\r\n              type=\"number\"\r\n            />\r\n            <TextField\r\n              error={!!error.ratePct}\r\n              defaultValue={loan?.ratePct}\r\n              onChange={(event) => {\r\n                ref.current.ratePct = convertPct(+event.target.value);\r\n              }}\r\n              variant=\"outlined\"\r\n              label=\"Rate\"\r\n              type=\"number\"\r\n            />\r\n            <TextField\r\n              error={!!error.paymentsPerYear}\r\n              defaultValue={loan?.paymentsPerYear}\r\n              onChange={(event) => {\r\n                ref.current.paymentsPerYear = +event.target.value;\r\n              }}\r\n              variant=\"outlined\"\r\n              label=\"Payments Per Year\"\r\n              type=\"number\"\r\n            />\r\n            <TextField\r\n              defaultValue={loan?.payment}\r\n              error={!!error.payment}\r\n              onChange={(event) => {\r\n                ref.current.payment = +event.target.value;\r\n              }}\r\n              variant=\"outlined\"\r\n              label=\"Payment\"\r\n              type=\"number\"\r\n            />\r\n            <TextField\r\n              defaultValue={loan?.ownershipPct}\r\n              error={!!error.ownershipPct}\r\n              onChange={(event) => {\r\n                ref.current.ownershipPct = convertPct(+event.target.value);\r\n              }}\r\n              variant=\"outlined\"\r\n              label=\"Ownership (%)\"\r\n              type=\"number\"\r\n            />\r\n          </Stack>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <ConfirmDialog\r\n            onConfirm={() => removeAccount(accountName)}\r\n            title={`Confirm Deleting ${accountName} Mortgage`}\r\n          >\r\n            <Button sx={{ marginRight: 10 }} color=\"error\">\r\n              Delete Account\r\n            </Button>\r\n          </ConfirmDialog>\r\n          <Button disabled={!nextAccountName} onClick={handleClose}>\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            disabled={!nextAccountName}\r\n            onClick={() => {\r\n              const parsed = validator.safeParse(ref.current);\r\n              if (parsed.success) {\r\n                accountName != nextAccountName && updateAccountName(accountName, nextAccountName);\r\n                setLoan(accountName, parsed.data);\r\n                handleClose();\r\n              } else {\r\n                const issues = Object.groupBy(parsed.error.issues, (x) => x.path.join(\"\"));\r\n                setError(issues);\r\n              }\r\n            }}\r\n          >\r\n            Save\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n","import { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { AgGrid } from \"shared/components/ag-grid\";\nimport { Mortgage } from \"shared/models/store/current\";\nimport { store } from \"shared/store\";\n\nimport { findNearestOnOrBefore } from \"shared/utility/find-nearest-on-or-before\";\nimport { getGraphDates } from \"shared/utility/get-graph-dates\";\nimport { calcEquity, calcLoanBalance } from \"shared/utility/mortgage-calc\";\n\nimport { Typography } from \"@mui/material\";\nimport { Box, Stack } from \"@mui/system\";\nimport { AddEntry } from \"./add-entry\";\nimport { createAccountColumnConfig, mortgageColumnConfig } from \"./column-config\";\nimport { AccountSettings } from \"./settings\";\n\nexport const MortgageTab = (props: { accountName: string }) => {\n  const { accountName } = props;\n\n  const account = useStore(store, (state) => state.wealth[accountName]) as Mortgage;\n\n  const allAccounts = useStore(store, (x) => x.wealth);\n\n  const accountColumnConfig = useMemo(() => {\n    return createAccountColumnConfig(accountName);\n  }, [accountName]);\n\n  const mortgageData = useMemo(() => {\n    if (!account?.loan) {\n      return [];\n    }\n\n    return getGraphDates(Object.values(allAccounts)).map((date) => {\n      const loanBalance = calcLoanBalance(date, account.loan!);\n      return {\n        date,\n        balance: loanBalance,\n        equity: calcEquity(\n          account.loan!.ownershipPct,\n          findNearestOnOrBefore(date, account.data)?.value,\n          loanBalance,\n          account.loan!.principal\n        ),\n      };\n    });\n  }, [account, allAccounts]);\n\n  return (\n    <Stack height=\"100%\" spacing={2}>\n      <Stack direction={\"row\"}>\n        <Typography variant=\"h5\">{accountName}</Typography>\n        <Box sx={{ marginLeft: \"auto\" }}>\n          <AccountSettings key={accountName} accountName={accountName} />\n        </Box>\n      </Stack>\n      <AddEntry accountName={accountName} />\n      <AgGrid\n        reactiveCustomComponents\n        rowData={account?.data ?? []}\n        columnDefs={accountColumnConfig}\n        id={account + \"-history\"}\n        autoSizeStrategy={{ type: \"fitGridWidth\" }}\n      />\n\n      <AgGrid\n        rowData={mortgageData}\n        columnDefs={mortgageColumnConfig}\n        id={account + \"-history\"}\n        autoSizeStrategy={{ type: \"fitGridWidth\" }}\n      />\n    </Stack>\n  );\n};\n","import { Box, Tab, Tabs } from \"@mui/material\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { useEffect, useState } from \"react\";\nimport { store } from \"shared/store\";\nimport { NewAccount } from \"../new-account\";\nimport { AccountTab } from \"../tab-types/account/account\";\nimport { MortgageTab } from \"../tab-types/mortgage\";\n\nexport const AccountTabs = () => {\n  const accounts = useStore(store, (x) => x.wealth);\n  const firstAccount = Object.keys(accounts)?.[0];\n  const [account, setAccount] = useState<string>(firstAccount);\n\n  useEffect(() => {\n    if (!accounts[account]) {\n      setAccount(Object.keys(accounts)?.[0] ?? \"\");\n    }\n  }, [account, accounts]);\n\n  return (\n    <Box display=\"flex\" width=\"100%\" height=\"100%\" gap={2}>\n      <Box display={\"flex\"} flexDirection={\"column\"} flex={\"0 1 auto\"}>\n        <Tabs\n          orientation=\"vertical\"\n          value={account}\n          onChange={(_, value) => {\n            setAccount(value as string);\n          }}\n        >\n          {Object.keys(accounts).map((account) => {\n            return <Tab key={account} value={account} label={account} />;\n          })}\n          <Tab component={NewAccount} />\n        </Tabs>\n      </Box>\n      <Box flex={\"1 1 auto\"} overflow={\"auto\"}>\n        {accounts[account]?.type === \"account\" && <AccountTab accountName={account} />}\n        {accounts[account]?.type === \"mortgage\" && <MortgageTab accountName={account} />}\n      </Box>\n    </Box>\n  );\n};\n","import { DateTime } from \"luxon\";\nimport { Account, Mortgage } from \"shared/models/store/current\";\nimport { findNearestOnOrBefore } from \"./find-nearest-on-or-before\";\nimport { calcEquity, calcLoanBalance } from \"./mortgage-calc\";\n\nconst getMortgageValue = (date: DateTime, mortgage: Mortgage) => {\n  if (!mortgage.loan) {\n    return 0;\n  }\n  const entry = findNearestOnOrBefore(date, mortgage.data);\n  if (entry?.date && mortgage.data[0] === entry && DateTime.fromISO(entry.date).startOf(\"day\") > date) {\n    return 0;\n  }\n  const { ownershipPct, principal } = mortgage.loan;\n  const balance = calcLoanBalance(date, mortgage.loan);\n  return calcEquity(ownershipPct, entry?.value, balance, principal);\n};\n\nconst getAccountValue = (date: DateTime, account: Account) => {\n  const entry = findNearestOnOrBefore(date, account.data);\n  if (entry?.date && account.data[0] === entry && DateTime.fromISO(entry.date).startOf(\"day\") > date) {\n    return 0;\n  }\n  return entry?.value;\n};\n\nexport const getGraphValue = (date: DateTime, account: Account | Mortgage) => {\n  switch (account.type) {\n    case \"account\":\n      return getAccountValue(date, account);\n    case \"mortgage\":\n      return getMortgageValue(date, account);\n  }\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { getGraphDates } from \"shared/utility/get-graph-dates\";\nimport { getGraphValue } from \"shared/utility/get-graph-value\";\n\nexport const useGraphData = () => {\n  const wealth = useStore(store, (x) => x.wealth);\n\n  return useMemo(() => {\n    const dates = getGraphDates(Object.values(wealth));\n    const accounts = Object.entries(wealth);\n    const graphData = dates.map((date) => {\n      return accounts.reduce(\n        (acc, [accountName, account]) => {\n          const value = getGraphValue(date, account);\n\n          if (value) {\n            acc[accountName] = value;\n            acc[\"total\"] = (acc[\"total\"] as number) + value;\n          } else {\n            acc[accountName] = null;\n          }\n\n          acc[\"date\"] = date.toJSDate();\n          return acc;\n        },\n        { total: 0 } as Record<string, number | Date | null>\n      );\n    });\n\n    graphData.forEach((x, idx, arr) => {\n      if (idx < arr.length - 1) {\n        Object.keys(x).forEach((key) => {\n          if (x[key] === null && arr[idx + 1][key] !== null) {\n            x[key] = 0;\n          }\n        });\n      }\n    });\n\n    const firstNonZero = graphData.findIndex((x) => (x[\"total\"] as number) > 0);\n    return graphData.slice(firstNonZero);\n  }, [wealth]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { AgAreaSeriesOptions, AgCartesianChartOptions, AgLineSeriesOptions, time } from \"ag-charts-community\";\nimport { AgChartsReact } from \"ag-charts-react\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { formatCashShort } from \"shared/utility/format-cash\";\nimport { useGraphData } from \"./use-graph-data\";\n\nexport const WealthChart = () => {\n  const wealth = useStore(store, (x) => x.wealth);\n  const data = useGraphData();\n\n  const series = useMemo(() => {\n    return [\n      ...Object.keys(wealth).map((x) => {\n        return {\n          stacked: true,\n          type: \"area\",\n          xKey: \"date\",\n          yKey: x,\n          yName: x,\n          tooltip: {\n            renderer: ({ datum, yKey, xKey }) => ({\n              content: `${DateTime.fromJSDate(datum[xKey]).toISODate()} ${formatCashShort(datum[yKey])}`,\n            }),\n          },\n        } as AgAreaSeriesOptions;\n      }),\n      {\n        type: \"line\",\n        xKey: \"date\",\n        yKey: \"total\",\n        yName: \"Total\",\n        tooltip: {\n          renderer: ({ datum, yKey, xKey }) => ({\n            content: `${DateTime.fromJSDate(datum[xKey]).toISODate()} ${formatCashShort(datum[yKey])}`,\n          }),\n        },\n      } as AgLineSeriesOptions,\n    ];\n  }, [wealth]);\n\n  const options: AgCartesianChartOptions = useMemo(\n    () => ({\n      theme: \"ag-default-dark\",\n      title: {\n        text: `Total Wealth ${formatCashShort((data[data.length - 1]?.total ?? 0) as number)}`,\n      },\n      data,\n      axes: [\n        {\n          type: \"time\",\n          position: \"bottom\",\n          label: {\n            format: \"%Y\",\n          },\n          nice: false,\n          tick: {\n            interval: time.year.every(1, { snapTo: \"start\" }),\n          },\n        },\n        {\n          type: \"number\",\n          position: \"left\",\n        },\n      ],\n      series,\n    }),\n    [data, series]\n  );\n  return <AgChartsReact options={options} />;\n};\n","import { Box } from \"@mui/material\";\nimport { AccountTabs } from \"./components/account-tabs\";\nimport { WealthChart } from \"./components/wealth-chart\";\n\nexport const NetWealth = () => {\n  return (\n    <Box display={\"flex\"} height=\"100%\" width={\"100%\"} overflow={\"hidden\"} gap={2}>\n      <Box flex=\"0 1 auto\">\n        <Box\n          width={650}\n          height={\"100%\"}\n          sx={{\n            padding: 2,\n            border: \"1px solid rgba(255,255,255,0.1)\",\n            borderRadius: 2,\n            minWidth: 480,\n            backgroundColor: \"#121212\",\n            boxShadow: \"2px 3px 9px 1px #12121252\",\n          }}\n        >\n          <AccountTabs />\n        </Box>\n      </Box>\n      <Box flex=\"1 1 auto\" overflow={\"hidden\"} width=\"100%\" height={\"100%\"}>\n        <WealthChart />\n      </Box>\n    </Box>\n  );\n};\n","import { Box, Divider, Stack, Typography } from \"@mui/material\";\nimport { ReactNode } from \"react\";\n\nexport const Card = (props: { title: ReactNode; children?: ReactNode }) => {\n  const { title, children } = props;\n\n  return (\n    <Box\n      sx={{\n        border: \"1px solid rgba(255,255,255,0.1)\",\n        borderRadius: 2,\n        minWidth: 480,\n        backgroundColor: \"#121212\",\n        boxShadow: \"2px 3px 9px 1px #12121252\",\n      }}\n    >\n      <Typography sx={{ paddingBottom: 1, paddingLeft: 2, paddingTop: 1, display: \"flex\" }} variant=\"h5\">\n        {title}\n      </Typography>\n\n      {children && (\n        <>\n          <Divider />\n          <Stack padding={1} direction={\"row\"} spacing={0.5} width={\"max-content\"} minHeight={80}>\n            {children}\n          </Stack>\n        </>\n      )}\n    </Box>\n  );\n};\n","import { Box } from \"@mui/system\";\nimport { useMemo } from \"react\";\nimport { formatCash, formatCashShort } from \"shared/utility/format-cash\";\nimport { Cash } from \"./cash\";\n\ninterface CashProps {\n  min?: number;\n  max?: number;\n  fallback?: number;\n  disableTooltip?: boolean;\n  compact?: boolean;\n  tooltip?: string;\n\n  placement?:\n    | \"top\"\n    | \"right\"\n    | \"bottom\"\n    | \"left\"\n    | \"bottom-end\"\n    | \"bottom-start\"\n    | \"left-end\"\n    | \"left-start\"\n    | \"right-end\"\n    | \"right-start\"\n    | \"top-end\"\n    | \"top-start\"\n    | undefined;\n}\nexport const CashRange = ({ min, max, fallback, disableTooltip, compact = true }: CashProps) => {\n  const showRange = useMemo(() => {\n    const minFormatted = compact ? formatCashShort(min ?? 0) : formatCash(min ?? 0);\n    const maxFormatted = compact ? formatCashShort(max ?? 0) : formatCash(max ?? 0);\n    return minFormatted !== maxFormatted;\n  }, [compact, max, min]);\n\n  return (\n    <Box>\n      {!showRange && (\n        <Cash\n          fallback={fallback}\n          value={max}\n          tooltip={min != max ? `${formatCash(min ?? 0)} - ` : undefined}\n          disableTooltip={disableTooltip}\n          compact={compact}\n        />\n      )}\n      {showRange && (\n        <>\n          <Cash value={min} fallback={fallback} disableTooltip={disableTooltip} compact={compact} />\n          <span> - </span>\n          <Cash value={max} fallback={fallback} disableTooltip={disableTooltip} compact={compact} />\n        </>\n      )}\n    </Box>\n  );\n};\n","export const formatPercent = new Intl.NumberFormat(\"en-us\", {\n  style: \"percent\",\n  maximumFractionDigits: 1,\n}).format;\n","import { Box } from \"@mui/system\";\nimport { ReactNode } from \"react\";\nimport { formatPercent } from \"shared/utility/format-percent\";\n\ninterface PercentProps {\n  value?: number;\n  probability?: number;\n  fallback?: ReactNode;\n}\n\nconst getColor = (probability?: number) => {\n  if (!probability) {\n    return \"inherit\";\n  }\n  if (probability >= 0.5) {\n    return \"green\";\n  }\n  if (probability >= 0.25) {\n    return \"yellow\";\n  }\n  return \"red\";\n};\n\nexport const Percent = ({ value, probability, fallback }: PercentProps) => {\n  return <Box color={getColor(probability)}>{value ? formatPercent(value) : fallback}</Box>;\n};\n","import { Box } from \"@mui/system\";\nimport { Percent } from \"./percent\";\n\ninterface PercentProps {\n  min?: number;\n  max?: number;\n  fallback?: number;\n}\n\nexport const PercentRange = ({ min, max, fallback }: PercentProps) => {\n  return (\n    <Box>\n      {(max ?? 0) / (min ?? 1) <= 1.005 && <Percent fallback={fallback} value={max} />}\n      {(max ?? 0) / (min ?? 1) > 1.005 && (\n        <>\n          <Percent value={min} fallback={fallback} />\n          <span> - </span>\n          <Percent value={max} fallback={fallback} />\n        </>\n      )}\n    </Box>\n  );\n};\n","import { Box } from \"@mui/material\";\r\nimport { ReactNode } from \"react\";\r\n\r\ninterface CellProps {\r\n  children?: ReactNode;\r\n  secondaryValue?: ReactNode;\r\n  tertiaryValue?: ReactNode;\r\n  title: ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport const Value = (props: CellProps) => {\r\n  const { children, secondaryValue, tertiaryValue, title, className } = props;\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: \"flex\",\r\n        minWidth: 106,\r\n        height: 64,\r\n        padding: \"0px 8px\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"flex-start\",\r\n        gap: 0.5,\r\n        flexShrink: 0,\r\n      }}\r\n      className={className}\r\n    >\r\n      <Box display={\"flex\"} alignItems={\"center\"} gap={0.5}>\r\n        <Box fontSize={18} fontWeight={700} lineHeight={\"20px\"}>\r\n          {children ? children : \"?\"}\r\n        </Box>\r\n        {!!(secondaryValue ?? tertiaryValue) && (\r\n          <Box\r\n            alignSelf={\"flex-end\"}\r\n            fontSize={12}\r\n            fontWeight={500}\r\n            lineHeight={\"16px\"}\r\n            textTransform={\"uppercase\"}\r\n            color={\"#888\"}\r\n          >\r\n            {secondaryValue ?? tertiaryValue}\r\n          </Box>\r\n        )}\r\n      </Box>\r\n      <Box fontSize={12} fontWeight={500} lineHeight={\"16px\"} textTransform={\"uppercase\"}>\r\n        {title}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import { Box } from \"@mui/material\";\r\nimport { Cluster } from \"capabilities/projected-income/hooks/use-gradient\";\r\nimport { DateTime } from \"luxon\";\r\nimport { CashRange } from \"shared/components/formatters/cash-range\";\r\nimport { Percent } from \"shared/components/formatters/percent\";\r\nimport { PercentRange } from \"shared/components/formatters/percent-range\";\r\nimport { Value } from \"shared/components/formatters/value\";\r\n\r\ninterface ClusterValueProps extends Cluster {\r\n  compact?: boolean;\r\n}\r\n\r\nconst ClusterValue = (props: ClusterValueProps) => {\r\n  const { min, max, probability, title, compact } = props;\r\n  return (\r\n    <Value\r\n      title={\r\n        <Box display={\"flex\"} gap={1}>\r\n          <span>{title}</span>\r\n          {probability < 1 && <Percent probability={probability} value={probability} />}\r\n        </Box>\r\n      }\r\n    >\r\n      {min < 1 && min > 0 && <PercentRange min={min} max={max} />}\r\n      {min > 1 && <CashRange compact={compact} min={min} max={max} />}\r\n      {min === 0 && 0}\r\n    </Value>\r\n  );\r\n};\r\n\r\nexport const ClusterValues = (props: { clusters?: Cluster[]; eventDate?: DateTime; compact?: boolean }) => {\r\n  const { clusters, eventDate, compact = true } = props;\r\n  return clusters?.map((x, i, arr) => {\r\n    const title = arr.length === 1 && (eventDate?.diffNow().toMillis() ?? -1) > 0 ? \"Expected\" : x.title;\r\n    return <ClusterValue {...x} title={title} compact={compact} key={i} />;\r\n  });\r\n};\r\n","import { Duration, DurationUnit } from \"luxon\";\r\n\r\nexport function toHuman(dur: Duration, smallestUnit: DurationUnit = \"seconds\"): string {\r\n  const units = [\"years\", \"months\", \"days\", \"hours\", \"minutes\", \"seconds\", \"milliseconds\"] as DurationUnit[];\r\n  const smallestIdx = units.indexOf(smallestUnit);\r\n  const entries = Object.entries(\r\n    dur\r\n      .shiftTo(...units)\r\n      .normalize()\r\n      .toObject()\r\n  ).filter(([, amount], idx) => amount > 0 && idx <= smallestIdx);\r\n  const dur2 = Duration.fromObject(entries.length === 0 ? { [smallestUnit]: 0 } : Object.fromEntries(entries));\r\n  return dur2.toHuman().replaceAll(\",\", \"\");\r\n}\r\n","import { Box, Tooltip } from \"@mui/material\";\nimport { DateTime } from \"luxon\";\nimport { ReactNode, useMemo } from \"react\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { shortDate } from \"shared/utility/format-date\";\nimport { toHuman } from \"shared/utility/to-human\";\n\ninterface DurationProps {\n  dateTime?: DateTime;\n  children?: ReactNode;\n  variant?: \"countdown\" | \"date\";\n  dateFormat?: string;\n}\nexport const CountDown = (props: DurationProps) => {\n  const { dateTime, children, variant = \"countdown\", dateFormat = shortDate } = props;\n\n  const countDownStr = useMemo(() => {\n    if (!dateTime) {\n      return \"??\";\n    }\n    if (variant === \"countdown\") {\n      const diff = dateTime?.diff(getLocalDateTime(), [\"years\", \"months\", \"days\", \"hours\"]);\n\n      return toHuman(diff, \"days\");\n    }\n\n    return dateTime?.toFormat(dateFormat);\n  }, [dateFormat, dateTime, variant]);\n\n  const tooltipStr = useMemo(() => {\n    if (!dateTime) {\n      return \"??\";\n    }\n\n    if (variant === \"countdown\") {\n      return dateTime?.toFormat(dateFormat);\n    }\n    const diff = dateTime?.diff(getLocalDateTime(), [\"years\", \"months\", \"days\", \"hours\"]);\n\n    return toHuman(diff, \"days\");\n  }, [dateFormat, dateTime, variant]);\n\n  const countDownColor = useMemo(() => {\n    if (!dateTime) {\n      return \"white\";\n    }\n\n    const days = dateTime.diffNow(\"days\").days;\n    if (days < 30) {\n      return \"green\";\n    } else if (days <= 60) {\n      return \"yellow\";\n    }\n\n    return \"red\";\n  }, [dateTime]);\n\n  return dateTime && dateTime > getLocalDateTime() ? (\n    <Tooltip title={tooltipStr}>\n      <Box color={countDownColor}>{countDownStr}</Box>\n    </Tooltip>\n  ) : (\n    children\n  );\n};\n","import { DateTime } from \"luxon\";\nimport { AccountData } from \"shared/models/store/current\";\n\nexport function findSameYear(year: number, data: AccountData[]): AccountData | undefined;\nexport function findSameYear(date: DateTime, data: AccountData[]): AccountData | undefined;\nexport function findSameYear(date: DateTime | number, data: AccountData[]): AccountData | undefined {\n  const year = typeof date === \"number\" ? date : date.year;\n  return data.find((x) => {\n    return DateTime.fromISO(x.date).year === year;\n  });\n}\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { AccountData } from \"shared/models/store/current\";\nimport { store } from \"shared/store\";\nimport { findSameYear } from \"shared/utility/find-same-year\";\n\nconst useRealDate = (year: number | undefined, data: AccountData[]) => {\n  return useMemo(() => {\n    if (!year) {\n      return undefined;\n    }\n    const meritBonus = findSameYear(year, data);\n    if (!meritBonus) {\n      return undefined;\n    }\n\n    return DateTime.fromISO(meritBonus.date);\n  }, [data, year]);\n};\n\nexport const useDates = (year?: number) => {\n  const timeSeries = useStore(store, (x) => x.projectedIncome.timeSeries);\n  const meritBonusDate = useRealDate(year, timeSeries.meritBonus);\n  const companyBonusDate = useRealDate(year, timeSeries.companyBonus);\n\n  return useMemo(() => {\n    return {\n      meritIncrease: DateTime.fromObject({ month: 4, day: 1, year }),\n      meritBonus: meritBonusDate ?? DateTime.fromObject({ month: 4, day: 15, year }),\n      companyBonus: companyBonusDate ?? DateTime.fromObject({ month: 6, day: 15, year }),\n      retirementBonus: DateTime.fromObject({ month: 7, day: 15, year }),\n    };\n  }, [companyBonusDate, meritBonusDate, year]);\n};\n\nexport const useDateRanges = (year: number) => {\n  return useMemo(\n    () => ({\n      base: {\n        start: DateTime.fromObject({ month: 1, day: 1, year }),\n        end: DateTime.fromObject({ month: 12, day: 31, year }).endOf(\"day\"),\n      },\n      meritBonus: {\n        start: DateTime.fromObject({ month: 1, day: 1, year: year - 1 }),\n        end: DateTime.fromObject({ month: 12, day: 31, year: year - 1 }).endOf(\"day\"),\n      },\n      companyBonus: {\n        start: DateTime.fromObject({ day: 1, month: 4, year: year - 1 }),\n        end: DateTime.fromObject({ day: 31, month: 3, year }).endOf(\"day\"),\n      },\n      retirementBonus: {\n        start: DateTime.fromObject({ day: 1, month: 7, year: year - 1 }),\n        end: DateTime.fromObject({ day: 30, month: 6, year }).endOf(\"day\"),\n      },\n    }),\n    [year]\n  );\n};\n","import { Store } from \"@tanstack/store\";\nimport { Scenario } from \"shared/models/scenario\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\n\ninterface ScenarioStore {\n  scenarios: Partial<Record<number, Scenario[]>>;\n  loading: boolean;\n  minYear: number;\n  maxYear: number;\n}\n\nconst year = getLocalDateTime().year;\nexport const scenarioStore = new Store<ScenarioStore>({\n  loading: true,\n  maxYear: year,\n  minYear: year,\n  scenarios: {},\n});\n","import { DateTime } from \"luxon\";\r\nimport { create } from \"mutative\";\r\nimport { AccountData, TimeSeries } from \"shared/models/store/current\";\r\nimport { store } from \".\";\r\n\r\nexport const updateProjectedIncomeDate = (timeSeries: TimeSeries, data: AccountData, date: DateTime) => {\r\n  store.setState((prev) => {\r\n    const next = create(prev, (next) => {\r\n      const account = next.projectedIncome.timeSeries[timeSeries];\r\n      const idx = account.findIndex((x) => x === data);\r\n      if (idx < 0) {\r\n        throw new Error(\"failed to find data\");\r\n      }\r\n\r\n      account[idx].date = date.toISO()!;\r\n    });\r\n    return next;\r\n  });\r\n};\r\n","import DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\r\nimport UpdateIcon from \"@mui/icons-material/Update\";\r\nimport { Button, Tooltip } from \"@mui/material\";\r\nimport { Stack } from \"@mui/system\";\r\nimport { ColDef, ICellRendererParams } from \"ag-grid-community\";\r\nimport { CustomCellRendererProps } from \"ag-grid-react\";\r\nimport { DateTime } from \"luxon\";\r\nimport { Cash } from \"shared/components/formatters/cash\";\r\nimport { Percent } from \"shared/components/formatters/percent\";\r\nimport { AccountData, TimeSeries } from \"shared/models/store/current\";\r\nimport { updateProjectedIncome } from \"shared/store\";\r\nimport { removeProjectedIncome } from \"shared/store/remove-projected-income\";\r\nimport { updateProjectedIncomeDate } from \"shared/store/update-projected-income-date\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\n\r\nexport const createAccountColumnConfig = (\r\n  accountName: TimeSeries,\r\n  variant: \"number\" | \"cash\" | \"percent\"\r\n): ColDef<AccountData>[] => [\r\n  {\r\n    headerName: \"Date\",\r\n    sort: \"desc\",\r\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\r\n    valueGetter: (x) => x.data && DateTime.fromISO(x.data.date),\r\n    cellRenderer: (x: ICellRendererParams<unknown, DateTime>) => {\r\n      return (\r\n        <Stack direction={\"row\"} alignItems={\"center\"}>\r\n          {x.valueFormatted}&nbsp;\r\n          {x.value && x.value > DateTime.local() && (\r\n            <Tooltip title=\"Future Event\">\r\n              <UpdateIcon htmlColor=\"yellow\" />\r\n            </Tooltip>\r\n          )}\r\n        </Stack>\r\n      );\r\n    },\r\n    cellEditor: \"agDateCellEditor\",\r\n    editable: true,\r\n    valueSetter: (x) => {\r\n      const date = DateTime.fromJSDate(x.newValue);\r\n      if (date.isValid) {\r\n        updateProjectedIncomeDate(accountName, x.data, DateTime.fromJSDate(x.newValue));\r\n      }\r\n      return date.isValid;\r\n    },\r\n  },\r\n  {\r\n    headerName: \"Value\",\r\n    valueGetter: (x) => x.data?.value,\r\n    cellRenderer: (x: CustomCellRendererProps<AccountData>) =>\r\n      variant === \"cash\" ? <Cash compact={false} value={x.value} /> : <Percent value={x.value} />,\r\n    type: \"numericColumn\",\r\n    editable: true,\r\n    cellEditor: \"agNumberCellEditor\",\r\n    valueSetter: (x) => {\r\n      updateProjectedIncome(accountName, x.data, +x.newValue);\r\n      return true;\r\n    },\r\n  },\r\n  {\r\n    cellStyle: () => ({ display: \"inline-flex\", padding: \"0px\" }),\r\n    sortable: false,\r\n    headerName: \"\",\r\n    width: 80,\r\n    colId: \"actions\",\r\n    cellRenderer: (props: CustomCellRendererProps<AccountData>) => {\r\n      return (\r\n        <Button\r\n          onClick={() => {\r\n            props.data && removeProjectedIncome(accountName, props.data);\r\n          }}\r\n          color=\"error\"\r\n          fullWidth\r\n        >\r\n          <DeleteForeverIcon />\r\n        </Button>\r\n      );\r\n    },\r\n  },\r\n];\r\n","import { Box, Button, InputAdornment, Paper, Stack, TextField, Tooltip, Typography } from \"@mui/material\";\r\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { DateTime } from \"luxon\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { AgGrid } from \"shared/components/ag-grid\";\r\nimport { TimeSeries } from \"shared/models/store/current\";\r\nimport { addProjectedIncome, store } from \"shared/store\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\nimport { createAccountColumnConfig } from \"./column-config\";\r\n\r\nconst DataEntry = (props: {\r\n  timeSeries: TimeSeries;\r\n  defaultDate: DateTime;\r\n  variant?: \"number\" | \"cash\" | \"percent\";\r\n}) => {\r\n  const { timeSeries, defaultDate, variant = \"number\" } = props;\r\n  const account = useStore(store, (state) => state.projectedIncome.timeSeries[timeSeries]);\r\n\r\n  const [date, setDate] = useState(defaultDate);\r\n  const [amount, setAmount] = useState<number | null>(null);\r\n\r\n  const hasSameDate = useMemo(() => {\r\n    return !!account?.find((x) => date.hasSame(DateTime.fromISO(x.date), \"day\"));\r\n  }, [account, date]);\r\n\r\n  const onAddEntry = () => {\r\n    if (amount != null) {\r\n      addProjectedIncome(date, timeSeries, variant === \"percent\" ? amount / 100 : amount);\r\n      setAmount(null);\r\n    }\r\n  };\r\n\r\n  const accountColumnConfig = useMemo(() => {\r\n    return createAccountColumnConfig(timeSeries, variant);\r\n  }, [timeSeries, variant]);\r\n\r\n  return (\r\n    <Box display={\"flex\"} flexDirection={\"column\"} height=\"100%\">\r\n      <Stack spacing={2} flex=\"0 1 auto\">\r\n        <DatePicker\r\n          format={shortDate}\r\n          sx={{ color: \"white\" }}\r\n          label=\"Date\"\r\n          value={date}\r\n          onChange={(value) => {\r\n            console.log(value);\r\n            value && setDate(value);\r\n          }}\r\n        />\r\n        <TextField\r\n          label=\"amount\"\r\n          value={amount ?? \"\"}\r\n          type=\"number\"\r\n          onChange={(event) => (event.target.value === \"\" ? setAmount(null) : setAmount(+event.target.value))}\r\n          InputProps={{\r\n            startAdornment: variant !== \"number\" && (\r\n              <InputAdornment position=\"start\">{variant === \"cash\" ? \"$\" : \"%\"}</InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n        <Button disabled={amount === null || !date || hasSameDate} onClick={onAddEntry}>\r\n          Add Entry\r\n        </Button>\r\n      </Stack>\r\n      <Box sx={{ paddingTop: 2, flex: \"1 1 auto\" }}>\r\n        <AgGrid\r\n          reactiveCustomComponents\r\n          rowData={account ?? []}\r\n          columnDefs={accountColumnConfig}\r\n          id={account + \"-history\"}\r\n          autoSizeStrategy={{\r\n            type: \"fitGridWidth\",\r\n          }}\r\n          stopEditingWhenCellsLoseFocus\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\ninterface LayoutProps {\r\n  title: string;\r\n  accountName: TimeSeries;\r\n  defaultDate: DateTime;\r\n  variant: \"percent\" | \"number\" | \"cash\";\r\n}\r\n\r\nexport const Layout = (props: LayoutProps) => {\r\n  const { title, accountName, defaultDate, variant } = props;\r\n  return (\r\n    <Paper sx={{ padding: 2, height: \"100%\", width: 450, flexShrink: 0 }}>\r\n      <Box display=\"flex\" flexDirection=\"column\" height=\"100%\">\r\n        <Box flex=\"0 1 auto\" marginBottom={2}>\r\n          <Typography sx={{ marginBottom: 2 }} variant=\"h5\">\r\n            {title}{\" \"}\r\n            {variant === \"cash\" && (\r\n              <Tooltip\r\n                title={\r\n                  <>\r\n                    <span>Cash values are used in lieu of Percent values.</span>\r\n                    <br />\r\n                    <span>Cash values are considered actual payment values.</span>\r\n                  </>\r\n                }\r\n              >\r\n                <span>($)</span>\r\n              </Tooltip>\r\n            )}\r\n            {variant === \"percent\" && (\r\n              <Tooltip title=\"Percentage values are used for predictions.\">\r\n                <span>(%)</span>\r\n              </Tooltip>\r\n            )}\r\n          </Typography>\r\n        </Box>\r\n        <Box flex=\"1 1 auto\">\r\n          <DataEntry variant={variant} timeSeries={accountName} defaultDate={defaultDate} />\r\n        </Box>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n};\r\n","import ArrowForwardIcon from \"@mui/icons-material/ArrowForward\";\nimport { Table, TableBody, TableCell, TableRow } from \"@mui/material\";\nimport { Cash } from \"shared/components/formatters/cash\";\nimport { IncomePerPeriod } from \"shared/models/IncomePerPeriod\";\nimport { shortDate } from \"shared/utility/format-date\";\n\ninterface IncomePerPeriodTooltipProps {\n  incomePerPeriod: IncomePerPeriod[];\n}\n\nexport const IncomePerPeriodTooltip = (props: IncomePerPeriodTooltipProps) => {\n  const { incomePerPeriod } = props;\n  return (\n    <Table sx={{ width: \"max-content\" }}>\n      <TableBody>\n        {incomePerPeriod.map(({ start, end, value, perPayday, count }, index) => {\n          return (\n            <TableRow key={index}>\n              <TableCell>\n                <Cash value={value} compact={false} />\n              </TableCell>\n              <TableCell>{start.toFormat(shortDate)}</TableCell>\n              <TableCell>\n                <ArrowForwardIcon />\n              </TableCell>\n              <TableCell>{end.toFormat(shortDate)}</TableCell>\n              <TableCell>\n                <Cash value={perPayday} compact={false} /> x {count}\n              </TableCell>\n            </TableRow>\n          );\n        })}\n        <TableRow>\n          <TableCell colSpan={4}>Total:</TableCell>\n          <TableCell>\n            <Cash value={incomePerPeriod.reduce((acc, curr) => curr.value + acc, 0)} compact={false} />\n          </TableCell>\n        </TableRow>\n      </TableBody>\n    </Table>\n  );\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { scenarioStore } from \"shared/store/scenario-store\";\nimport { ckmeans, median } from \"simple-statistics\";\n\nconst clusterTitle = (index: number, length: number) => {\n  if (length === 1) {\n    return \"Actual\";\n  } else if (length == 2) {\n    return [\"Low\", \"High\"][index];\n  } else {\n    return [\"Low\", \"Med\", \"High\"][index];\n  }\n};\n\nexport interface Cluster {\n  min: number;\n  max: number;\n  median: number;\n  probability: number;\n  title: string;\n}\n\nconst clusters = (values?: number[]): Cluster[] => {\n  if (!values) {\n    return [];\n  }\n  return ckmeans(values, Math.min(3, values.length)).map((x, i, arr) => {\n    return {\n      min: Math.min(...x),\n      max: Math.max(...x),\n      median: median(x),\n      probability: x.length / values.length,\n      title: clusterTitle(i, arr.length),\n    };\n  });\n};\n\nexport const useClusters = (year: number) => {\n  const scenarios = useStore(scenarioStore, (x) => x.scenarios[year]);\n\n  return useMemo(() => {\n    if (scenarios?.length === 0) {\n      return {\n        totalPay: [],\n        meritBonus: [],\n        retirementBonus: [],\n        companyBonus: [],\n        pay: [],\n        meritIncrease: [],\n        scenarios,\n        taxablePay: [],\n      };\n    }\n    return {\n      totalPay: clusters(scenarios?.map((x) => x.totalPay)),\n      meritBonus: clusters(scenarios?.map((x) => x.meritBonus)),\n      retirementBonus: clusters(scenarios?.map((x) => x.retirementBonus)),\n      companyBonus: clusters(scenarios?.map((x) => x.companyBonus)),\n      pay: clusters(scenarios?.map((x) => x.pay.at(-1)?.value ?? 0)),\n      meritIncrease: clusters(scenarios?.map((x) => x.meritIncreasePct + x.equityIncreasePct)),\n      taxablePay: clusters(scenarios?.map((x) => x.taxablePay)),\n      scenarios,\n    };\n  }, [scenarios]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { findSameYear } from \"shared/utility/find-same-year\";\n\nexport const useHasMeritPairs = () => {\n  const timeSeries = useStore(store, (x) => x.projectedIncome.timeSeries);\n  return useMemo(() => {\n    return (\n      timeSeries.meritIncreasePct.every((x) => {\n        return !!findSameYear(DateTime.fromISO(x.date).year, timeSeries.meritBonusPct);\n      }) &&\n      timeSeries.meritBonusPct.every((x) => {\n        return !!findSameYear(DateTime.fromISO(x.date).year, timeSeries.meritIncreasePct);\n      })\n    );\n  }, [timeSeries.meritBonusPct, timeSeries.meritIncreasePct]);\n};\n","import { Alert, CircularProgress, Tooltip } from \"@mui/material\";\r\nimport { Box, Stack } from \"@mui/system\";\r\nimport { DatePicker } from \"@mui/x-date-pickers\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { DateTime } from \"luxon\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { Card } from \"shared/components/card\";\r\nimport { Cash } from \"shared/components/formatters/cash\";\r\nimport { ClusterValues } from \"shared/components/formatters/cluster-value\";\r\nimport { CountDown } from \"shared/components/formatters/countdown\";\r\nimport { Value } from \"shared/components/formatters/value\";\r\nimport { useDateRanges, useDates } from \"shared/hooks/use-dates\";\r\nimport { IncomePerPeriod } from \"shared/models/IncomePerPeriod\";\r\nimport { scenarioStore } from \"shared/store/scenario-store\";\r\nimport { getLocalDateTime } from \"shared/utility/current-date\";\r\nimport { monthDay } from \"shared/utility/format-date\";\r\nimport { Layout } from \"./components/data-entry/data-entry\";\r\nimport { IncomePerPeriodTooltip } from \"./components/income-per-period\";\r\nimport { useClusters } from \"./hooks/use-gradient\";\r\nimport { useHasMeritPairs } from \"./hooks/use-has-merit-pairs\";\r\n\r\nexport const ProjectedIncome = () => {\r\n  const [selectedYear, setSelectedYear] = useState(getLocalDateTime().year);\r\n\r\n  const hasMissingPairs = useHasMeritPairs();\r\n  const clusters = useClusters(selectedYear);\r\n  const dates = useDates(selectedYear);\r\n  const dateRanges = useDateRanges(selectedYear);\r\n\r\n  const basePay = useMemo(() => {\r\n    if (clusters.pay.length !== 1) {\r\n      return;\r\n    }\r\n    return clusters.scenarios?.[0].basePay;\r\n  }, [clusters.pay.length, clusters.scenarios]);\r\n\r\n  const aprToApr = useMemo(() => {\r\n    if (clusters.pay.length !== 1) {\r\n      return;\r\n    }\r\n    return clusters.scenarios?.[0].aprToApr;\r\n  }, [clusters.pay.length, clusters.scenarios]);\r\n\r\n  const paychecks = useMemo(() => {\r\n    if (clusters.pay.length !== 1) {\r\n      return;\r\n    }\r\n\r\n    const payPeriods =\r\n      clusters.scenarios?.[0].payments.filter((x) => {\r\n        const payedOn = DateTime.fromISO(x.payedOn);\r\n        return payedOn >= dateRanges.base.start && payedOn <= dateRanges.base.end;\r\n      }) ?? [];\r\n\r\n    return payPeriods\r\n      .filter((x) => x.type !== \"bonus\")\r\n      .reduceRight(\r\n        (acc, curr) => {\r\n          if (acc[0]?.[0]?.value === curr.value) {\r\n            acc[0].unshift(curr);\r\n          } else {\r\n            acc.unshift([curr]);\r\n          }\r\n\r\n          return acc;\r\n        },\r\n        [] as (typeof payPeriods)[]\r\n      )\r\n      .reduce((acc, curr) => {\r\n        acc.push({\r\n          start: DateTime.fromISO(curr[0].payedOn),\r\n          end: DateTime.fromISO(curr[curr.length - 1].payedOn),\r\n          value: curr.reduce((acc, curr) => acc + curr.value, 0),\r\n          perPayday: curr[0].value,\r\n          count: curr.length,\r\n          type: curr[0].type,\r\n        });\r\n\r\n        return acc;\r\n      }, [] as IncomePerPeriod[]);\r\n  }, [clusters.pay.length, clusters.scenarios, dateRanges.base.end, dateRanges.base.start]);\r\n\r\n  const scenarios = useStore(scenarioStore);\r\n\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"row\" height=\"100%\" width={\"100%\"}>\r\n      <Box flex=\"0 1 auto\">\r\n        <Stack gap={2} direction={\"column\"} overflow={\"auto\"} height=\"100%\" paddingRight={1}>\r\n          {!hasMissingPairs && (\r\n            <Alert severity=\"error\">Every Merit Increase must have a paired Merit Bonus percent</Alert>\r\n          )}\r\n          <Card\r\n            title={\r\n              <Box display=\"flex\" alignItems={\"center\"} gap={2} width={\"100%\"}>\r\n                <span>Income</span>\r\n                <CountDown dateTime={dates.companyBonus} variant=\"date\" dateFormat={monthDay} />\r\n                <Box sx={{ display: \"flex\", marginLeft: \"auto\", alignItems: \"center\", flexWrap: \"wrap\" }}>\r\n                  {scenarios.loading && <CircularProgress style={{ width: 20, height: 20 }} />}\r\n                </Box>\r\n                <DatePicker\r\n                  sx={{ width: 90, marginRight: 2 }}\r\n                  label={\"year\"}\r\n                  views={[\"year\"]}\r\n                  minDate={getLocalDateTime().set({ year: scenarios.minYear })}\r\n                  maxDate={getLocalDateTime().set({ year: scenarios.maxYear })}\r\n                  defaultValue={getLocalDateTime()}\r\n                  slotProps={{\r\n                    textField: {\r\n                      variant: \"standard\",\r\n                      label: \"\",\r\n                    },\r\n                  }}\r\n                  onYearChange={(year) => {\r\n                    setSelectedYear(year.year);\r\n                  }}\r\n                />\r\n              </Box>\r\n            }\r\n          >\r\n            <ClusterValues clusters={clusters.totalPay} eventDate={dates.companyBonus} />\r\n          </Card>\r\n          <Card\r\n            title={\r\n              <Box display={\"flex\"} width={\"max-content\"} gap={2} marginRight={2}>\r\n                <span>Paycheck</span>\r\n                <CountDown dateTime={dates.meritIncrease} variant=\"date\" dateFormat={monthDay} />\r\n              </Box>\r\n            }\r\n          >\r\n            <ClusterValues clusters={clusters.pay} eventDate={dates.meritIncrease} compact={false} />\r\n            {basePay && (\r\n              <Tooltip\r\n                placement=\"right\"\r\n                componentsProps={{\r\n                  tooltip: {\r\n                    sx: {\r\n                      maxWidth: \"none\",\r\n                    },\r\n                  },\r\n                }}\r\n                title={paychecks && <IncomePerPeriodTooltip incomePerPeriod={paychecks} />}\r\n              >\r\n                <div>\r\n                  <Value title={\"Base Pay\"}>\r\n                    <Cash disableTooltip value={basePay} />\r\n                  </Value>\r\n                </div>\r\n              </Tooltip>\r\n            )}\r\n            {aprToApr && (\r\n              <Value title={\"APR to APR\"}>\r\n                <Cash value={aprToApr} />\r\n              </Value>\r\n            )}\r\n          </Card>\r\n          <Card\r\n            title={\r\n              <Box display={\"flex\"} width={\"max-content\"} gap={2} marginRight={2}>\r\n                <span>Merit Increase</span>\r\n                <CountDown dateTime={dates.meritIncrease} variant=\"date\" dateFormat={monthDay} />\r\n              </Box>\r\n            }\r\n          >\r\n            <ClusterValues clusters={clusters.meritIncrease} eventDate={dates.meritIncrease} />\r\n          </Card>\r\n\r\n          <Card\r\n            title={\r\n              <Box display={\"flex\"} width={\"max-content\"} gap={2} marginRight={2}>\r\n                <span>Merit Bonus</span>\r\n                <CountDown dateTime={dates.meritBonus} variant=\"date\" dateFormat={monthDay} />\r\n              </Box>\r\n            }\r\n          >\r\n            <ClusterValues clusters={clusters.meritBonus} eventDate={dates.meritBonus} />\r\n          </Card>\r\n          <Card\r\n            title={\r\n              <Box display={\"flex\"} width={\"max-content\"} gap={2} marginRight={2}>\r\n                <span>Company Bonus</span>\r\n                <CountDown dateTime={dates.companyBonus} variant=\"date\" dateFormat={monthDay} />\r\n              </Box>\r\n            }\r\n          >\r\n            <ClusterValues clusters={clusters.companyBonus} eventDate={dates.companyBonus} />\r\n          </Card>\r\n          <Card\r\n            title={\r\n              <Box display={\"flex\"} width={\"max-content\"} gap={2} marginRight={2}>\r\n                <span>Retirement Bonus</span>\r\n                <CountDown dateTime={dates.retirementBonus} variant=\"date\" dateFormat={monthDay} />\r\n              </Box>\r\n            }\r\n          >\r\n            <ClusterValues clusters={clusters.retirementBonus} eventDate={dates.retirementBonus} />\r\n          </Card>\r\n        </Stack>\r\n      </Box>\r\n      <Box flex=\"1 1 auto\" overflow={\"auto\"} paddingBottom={2} paddingLeft={1}>\r\n        <Box display={\"flex\"} height={\"100%\"} width={\"100%\"} gap={2}>\r\n          <Layout\r\n            accountName=\"paycheck\"\r\n            variant=\"cash\"\r\n            defaultDate={DateTime.fromObject({\r\n              day: 1,\r\n              month: 4,\r\n              year: selectedYear,\r\n            })}\r\n            title=\"Income Per Paycheck\"\r\n          />\r\n          <Layout\r\n            title=\"Merit Increase\"\r\n            accountName=\"meritIncreasePct\"\r\n            variant=\"percent\"\r\n            defaultDate={dates.meritIncrease}\r\n          />\r\n          <Layout title=\"Equity Increase\" accountName=\"equityPct\" variant=\"percent\" defaultDate={dates.meritIncrease} />\r\n          <Layout title=\"Merit Bonus\" accountName=\"meritBonusPct\" variant=\"percent\" defaultDate={dates.meritBonus} />\r\n          <Layout title=\"Merit Bonus\" accountName=\"meritBonus\" variant=\"cash\" defaultDate={dates.meritBonus} />\r\n          <Layout\r\n            title=\"Company Bonus Factor\"\r\n            accountName=\"companyBonusPct\"\r\n            defaultDate={dates.companyBonus}\r\n            variant=\"percent\"\r\n          />\r\n          <Layout title=\"Company Bonus\" accountName=\"companyBonus\" defaultDate={dates.companyBonus} variant=\"cash\" />\r\n          <Layout\r\n            title=\"Retirement Bonus\"\r\n            accountName=\"retirementBonus\"\r\n            defaultDate={dates.retirementBonus}\r\n            variant=\"cash\"\r\n          />\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { scenarioStore } from \"shared/store/scenario-store\";\n\nexport const useFutureRetirementContributions = (year: number) => {\n  const scenarios = useStore(scenarioStore, (x) => x.scenarios[year]);\n  const retirementContribution = useStore(store, (x) => x.projectedWealth.retirementContributionPaycheck);\n\n  return useMemo(() => {\n    return {\n      remaining: Math.min(scenarios?.at(0)?.remainingPayments ?? 0, 26) * retirementContribution,\n      perPaycheck: retirementContribution,\n    };\n  }, [retirementContribution, scenarios]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { useDateRanges } from \"shared/hooks/use-dates\";\nimport { store } from \"shared/store\";\n\nexport const useFutureSavings = (year: number) => {\n  const config = useStore(store, (x) => x.projectedWealth);\n  const dateRanges = useDateRanges(year);\n  return useMemo(() => {\n    return {\n      remaining: config.savingsPerMonth * Math.min(Math.max(0, dateRanges.base.end.diffNow(\"months\").months), 12),\n      perMonth: config.savingsPerMonth,\n    };\n  }, [config.savingsPerMonth, dateRanges.base]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { scenarioStore } from \"shared/store/scenario-store\";\n\ninterface ThresholdTaxData {\n  total: number;\n  firstOccurrence: DateTime;\n  remaining: number;\n  perPaycheck: number;\n}\n\nexport const useFutureSocialSecurity = (year: number): TresholdTax => {\n  const config = useStore(store, (x) => x.projectedWealth);\n  return useThresholdTax(year, config.socialSecurityLimit, config.socialSecurityTaxRate);\n};\n\nexport const useFutureMedicareTax = (year: number): TresholdTax => {\n  const config = useStore(store, (x) => x.projectedWealth);\n  const taxes = useThresholdTax(year, config.medicareSupplementalTaxThreshold, -1 * config.medicareSupplementalTaxRate);\n  return useMemo(() => {\n    return {\n      min: taxes.max,\n      max: taxes.min,\n    };\n  }, [taxes]);\n};\n\nexport type TresholdTax = Partial<Record<\"min\" | \"max\", ThresholdTaxData>>;\n\nconst useThresholdTax = (year: number, threshold: number, taxRate: number): TresholdTax => {\n  const scenarios = useStore(scenarioStore, (x) => x.scenarios[year]);\n\n  const data = useMemo(\n    () =>\n      (\n        (scenarios ?? [])\n          .map((x) => {\n            const total = taxRate * Math.max(0, (x.payments.at(-1)?.cumulative ?? 0) - threshold);\n            const firstOccurrence = x.payments.find((x) => x.cumulative > threshold)?.payedOn;\n            const remaining = x.payments\n              .slice(x.currentPaymentIdx)\n              .filter((x) => x.cumulative >= threshold)\n              .reduce((acc, curr) => {\n                return acc + Math.min(curr.value, curr.cumulative - threshold) * taxRate;\n              }, 0);\n            const perPaycheck = total && taxRate * (x.payments.at(-1)?.value ?? 0);\n\n            return {\n              total,\n              firstOccurrence: firstOccurrence ? DateTime.fromISO(firstOccurrence) : undefined,\n              remaining,\n              perPaycheck,\n            };\n          })\n          .filter((x) => x.firstOccurrence) as ThresholdTaxData[]\n      ).reduce(\n        (acc, curr, i) => {\n          if (i == 0) {\n            return { min: curr, max: curr };\n          } else {\n            if (curr.total < acc.min!.total) {\n              acc.min = curr;\n            }\n            if (curr.total > acc.max!.total) {\n              acc.max = curr;\n            }\n          }\n          return acc;\n        },\n        {} as Partial<Record<\"min\" | \"max\", ThresholdTaxData>>\n      ),\n    [threshold, taxRate, scenarios]\n  );\n\n  return data;\n};\n","import { Cluster } from \"capabilities/projected-income/hooks/use-gradient\";\n\nexport const scaleCluster = (cluster: Cluster | undefined, factor: number) => {\n  if (!cluster) {\n    return undefined;\n  }\n  return { ...cluster, min: cluster.min * factor, max: cluster.max * factor, median: cluster.median * factor };\n};\n\nexport const scaleClusters = (clusters: Cluster[] | undefined, factor: number): Cluster[] | undefined => {\n  return clusters?.filter((x) => x).map((x) => scaleCluster(x, factor)!);\n};\n\nexport const findMostMostLikely = (cluster: Cluster[]) => {\n  if (cluster.length === 0) {\n    return;\n  }\n  const mostLikely = cluster.reduce((acc, curr) => {\n    return acc.probability > curr.probability ? acc : curr;\n  });\n  return mostLikely;\n};\n\nexport const ExpectedValue = (Clusers: Cluster[][]) => {\n  if (Clusers.length == 0) {\n    return [];\n  }\n\n  return [\n    Clusers.reduce(\n      (acc, curr) => {\n        if (curr.length === 0) {\n          return acc;\n        }\n        const mostLikely = findMostMostLikely(curr);\n\n        acc.max += mostLikely?.max ?? 0;\n        acc.min += mostLikely?.min ?? 0;\n        acc.median += mostLikely?.median ?? 0;\n        return acc;\n      },\n      { min: 0, max: 0, median: 0, title: \"Actual\", probability: 0 }\n    ),\n  ];\n};\n","import { Box, Stack } from \"@mui/system\";\r\nimport { DatePicker } from \"@mui/x-date-pickers\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { Cluster, useClusters } from \"capabilities/projected-income/hooks/use-gradient\";\r\nimport { useFutureRetirementContributions } from \"capabilities/projected-wealth/hooks/use-future-retirement-contributions\";\r\nimport { useFutureSavings } from \"capabilities/projected-wealth/hooks/use-future-savings\";\r\nimport {\r\n  TresholdTax,\r\n  useFutureMedicareTax,\r\n  useFutureSocialSecurity,\r\n} from \"capabilities/projected-wealth/hooks/use-future-social-security\";\r\nimport { DateTime } from \"luxon\";\r\nimport { useMemo } from \"react\";\r\nimport { Card } from \"shared/components/card\";\r\nimport { Cash } from \"shared/components/formatters/cash\";\r\nimport { ClusterValues } from \"shared/components/formatters/cluster-value\";\r\nimport { CountDown } from \"shared/components/formatters/countdown\";\r\nimport { Value } from \"shared/components/formatters/value\";\r\nimport { useDates } from \"shared/hooks/use-dates\";\r\nimport { store } from \"shared/store\";\r\nimport { ExpectedValue, scaleClusters } from \"shared/utility/cluster-helpers\";\r\nimport { getLocalDateTime } from \"shared/utility/current-date\";\r\nimport { monthDay } from \"shared/utility/format-date\";\r\n\r\nconst isFuture = (date: DateTime) => date.diffNow(\"milliseconds\").milliseconds > 0;\r\n\r\nexport const FutureEvents = (props: { year: number; onChange: (year: number) => void }) => {\r\n  const { year, onChange } = props;\r\n  const dates = useDates(year);\r\n\r\n  const savings = useFutureSavings(year);\r\n  const retirement = useFutureRetirementContributions(year);\r\n  const medicare = useFutureMedicareTax(year);\r\n  const socialSecurity = useFutureSocialSecurity(year);\r\n  const clusters = useClusters(year);\r\n  const bonusTakehomeFactor = useStore(store, (x) => 1 - x.projectedWealth.bonusWitholdingsRate);\r\n\r\n  const total = useMemo(() => {\r\n    const remaining = [\r\n      isFuture(dates.meritBonus) && scaleClusters(clusters.meritBonus, bonusTakehomeFactor),\r\n      isFuture(dates.companyBonus) && scaleClusters(clusters.companyBonus, bonusTakehomeFactor),\r\n      isFuture(dates.retirementBonus) && clusters.retirementBonus,\r\n      [{ min: savings.remaining, max: savings.remaining, probability: 1, median: 1 }],\r\n      [{ min: retirement.remaining, max: retirement.remaining, probability: 1, median: 1 }],\r\n      [{ min: socialSecurity.min?.remaining ?? 0, max: socialSecurity.max?.remaining ?? 0, probability: 1, median: 1 }],\r\n      [{ min: medicare.min?.remaining, max: medicare.max?.remaining, probability: 1, median: 1 }],\r\n    ].filter((x) => x !== false) as Cluster[][];\r\n\r\n    return ExpectedValue(remaining);\r\n  }, [\r\n    bonusTakehomeFactor,\r\n    clusters.companyBonus,\r\n    clusters.meritBonus,\r\n    clusters.retirementBonus,\r\n    dates.companyBonus,\r\n    dates.meritBonus,\r\n    dates.retirementBonus,\r\n    medicare.max?.remaining,\r\n    medicare.min?.remaining,\r\n    retirement.remaining,\r\n    savings.remaining,\r\n    socialSecurity.max?.remaining,\r\n    socialSecurity.min?.remaining,\r\n  ]);\r\n\r\n  return (\r\n    <>\r\n      <Stack spacing={2} width={550} paddingRight={1}>\r\n        <Card\r\n          title={\r\n            <>\r\n              <span>Remaining Projected Wealth</span>\r\n              <DatePicker\r\n                sx={{ width: 90, marginRight: 2, marginLeft: \"auto\" }}\r\n                label={\"year\"}\r\n                views={[\"year\"]}\r\n                minDate={getLocalDateTime()}\r\n                maxDate={getLocalDateTime().plus({ years: 1 })}\r\n                value={getLocalDateTime().set({ year })}\r\n                slotProps={{\r\n                  textField: {\r\n                    variant: \"standard\",\r\n                    label: \"\",\r\n                  },\r\n                }}\r\n                onYearChange={(year) => {\r\n                  onChange(year.year);\r\n                }}\r\n              />\r\n            </>\r\n          }\r\n        >\r\n          <ClusterValues clusters={total} eventDate={dates.companyBonus} />\r\n        </Card>\r\n        {isFuture(dates.meritBonus) && (\r\n          <ClusterCard\r\n            title=\"Merit Bonus\"\r\n            date={dates.meritBonus}\r\n            cluster={scaleClusters(clusters.meritBonus, bonusTakehomeFactor)}\r\n          />\r\n        )}\r\n        {isFuture(dates.companyBonus) && (\r\n          <ClusterCard\r\n            title=\"Company Bonus\"\r\n            date={dates.companyBonus}\r\n            cluster={scaleClusters(clusters.companyBonus, bonusTakehomeFactor)}\r\n          />\r\n        )}\r\n        {isFuture(dates.retirementBonus) && (\r\n          <ClusterCard title=\"Retirement Bonus\" date={dates.retirementBonus} cluster={clusters.retirementBonus} />\r\n        )}\r\n        {!!socialSecurity.min && <ThresholdTaxCard thresholdTax={socialSecurity} title={\"Social Security Limit\"} />}\r\n        {!!medicare.min && <ThresholdTaxCard thresholdTax={medicare} title={\"Medicare Supplmental Tax\"} />}\r\n\r\n        <Card title={\"Savings & Retirement\"}>\r\n          {!!savings.perMonth && (\r\n            <Value title={\"Expected savings\"} secondaryValue={<Cash tooltip=\"Per Month\" value={savings.perMonth} />}>\r\n              <Cash tooltip=\"Total Remaining\" value={savings.remaining} />\r\n            </Value>\r\n          )}\r\n          {!!retirement.perPaycheck && (\r\n            <Value\r\n              title={\"retirement contribution\"}\r\n              secondaryValue={<Cash tooltip=\"Per Paycheck\" value={retirement.perPaycheck} />}\r\n            >\r\n              <Cash tooltip=\"Total Remaining\" value={retirement.remaining} />\r\n            </Value>\r\n          )}\r\n        </Card>\r\n      </Stack>\r\n    </>\r\n  );\r\n};\r\n\r\nconst ThresholdTaxCard = (props: { thresholdTax: TresholdTax; title: string }) => {\r\n  const { thresholdTax, title } = props;\r\n  return (\r\n    <Card\r\n      title={\r\n        <Box display={\"flex\"} width={\"max-content\"} gap={1} marginRight={2}>\r\n          <span>{title}</span>\r\n\r\n          <CountDown dateFormat={monthDay} variant=\"date\" dateTime={thresholdTax.max?.firstOccurrence} />\r\n          {thresholdTax.min &&\r\n            thresholdTax.max &&\r\n            !thresholdTax.min.firstOccurrence.equals(thresholdTax.max.firstOccurrence) && (\r\n              <>\r\n                <span>or</span>\r\n                <CountDown dateFormat={monthDay} variant=\"date\" dateTime={thresholdTax.min.firstOccurrence} />\r\n              </>\r\n            )}\r\n        </Box>\r\n      }\r\n    >\r\n      {thresholdTax.max && thresholdTax.max.total === thresholdTax.min?.total && (\r\n        <Value title={\"Remaining\"}>\r\n          <Cash value={thresholdTax.max?.remaining} compact={false} />\r\n        </Value>\r\n      )}\r\n      {thresholdTax.max && thresholdTax.max.total !== thresholdTax.min?.total && (\r\n        <>\r\n          <Value title={thresholdTax.max.firstOccurrence > getLocalDateTime() ? \"Early\" : \"Low\"}>\r\n            <Cash value={thresholdTax.max?.remaining} compact={false} />\r\n          </Value>\r\n          <Value title={thresholdTax.max.firstOccurrence > getLocalDateTime() ? \"Late\" : \"High\"}>\r\n            <Cash value={thresholdTax.min?.total} compact={false} />\r\n          </Value>\r\n        </>\r\n      )}\r\n      <Value title={\"Per Paycheck\"}>\r\n        <Cash value={thresholdTax.max?.perPaycheck} compact={false} />\r\n      </Value>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst ClusterCard = (props: { date: DateTime; cluster?: Cluster[]; title: string }) => {\r\n  const { date, cluster, title } = props;\r\n  return (\r\n    <Card\r\n      title={\r\n        <Box display={\"flex\"} width={\"max-content\"} gap={2} marginRight={2}>\r\n          <span>{title}</span>\r\n          <CountDown variant=\"date\" dateFormat={monthDay} dateTime={date} />\r\n        </Box>\r\n      }\r\n    >\r\n      <ClusterValues clusters={cluster} eventDate={date} />\r\n    </Card>\r\n  );\r\n};\r\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\n\nexport const useEarliestAccountEntry = () => {\n  const accounts = useStore(store, (x) => x.wealth);\n  return DateTime.fromMillis(\n    Object.values(accounts)\n      .map((x) => {\n        if (x.type === \"account\") {\n          return x.data[0]?.date ? DateTime.fromISO(x.data[0].date) : getLocalDateTime();\n        }\n        return getLocalDateTime();\n      })\n      .reduce((acc, curr) => Math.min(acc, curr?.toMillis() ?? Infinity), getLocalDateTime().toMillis())\n  );\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { useClusters } from \"capabilities/projected-income/hooks/use-gradient\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { useDates } from \"shared/hooks/use-dates\";\nimport { store } from \"shared/store\";\nimport { findMostMostLikely, scaleCluster } from \"shared/utility/cluster-helpers\";\n\nexport const useFutureBonuses = (year: number) => {\n  const local = DateTime.local();\n  const dates = useDates(year);\n  const clusters = useClusters(year);\n  const config = useStore(store, (x) => x.projectedWealth);\n\n  const bonuses = useMemo(() => {\n    return (\n      [\n        [\n          dates.meritBonus,\n          scaleCluster(findMostMostLikely(clusters.meritBonus), 1 - config.bonusWitholdingsRate)?.median ?? 0,\n        ],\n        [\n          dates.companyBonus,\n          scaleCluster(findMostMostLikely(clusters.companyBonus), 1 - config.bonusWitholdingsRate)?.median ?? 0,\n        ],\n        [dates.retirementBonus, findMostMostLikely(clusters.retirementBonus)?.median ?? 0],\n      ] as [DateTime, number][]\n    )\n      .map(([payedOn, amount]) => (local < payedOn ? amount : 0))\n      .reduce((acc, curr) => acc + curr, 0);\n  }, [\n    dates.meritBonus,\n    dates.companyBonus,\n    dates.retirementBonus,\n    clusters.meritBonus,\n    clusters.companyBonus,\n    clusters.retirementBonus,\n    config.bonusWitholdingsRate,\n    local,\n  ]);\n\n  return bonuses;\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { findNearestIdxOnOrBefore, findNearestOnOrBefore } from \"shared/utility/find-nearest-on-or-before\";\nimport { calcEquity, calcLoanBalance } from \"shared/utility/mortgage-calc\";\nimport { useEarliestAccountEntry } from \"./use-earliest-account-entry\";\nimport { useFutureBonuses } from \"./use-future-bonuses\";\nimport { useFutureRetirementContributions } from \"./use-future-retirement-contributions\";\nimport { useFutureSavings } from \"./use-future-savings\";\nimport { useFutureMedicareTax, useFutureSocialSecurity } from \"./use-future-social-security\";\n\nexport interface TimeSeriesWealth {\n  graphDate: Date;\n  date: DateTime;\n  wealth: number;\n  yoyCash?: number;\n  yoyPct?: number;\n}\n\nconst useFutureWealth = (year: number) => {\n  const bonuses = useFutureBonuses(year);\n  const savings = useFutureSavings(year);\n  const ssiTaxValue = useFutureSocialSecurity(year);\n  const medicareTaxValue = useFutureMedicareTax(year);\n  const retirementContribution = useFutureRetirementContributions(year);\n\n  return (\n    bonuses +\n    savings.remaining +\n    retirementContribution.remaining +\n    (ssiTaxValue.min?.remaining ?? 0) +\n    (medicareTaxValue?.min?.remaining ?? 0)\n  );\n};\n\nconst useFuturesWealth = () => {\n  const year = getLocalDateTime().year;\n  return {\n    [year + 1]: useFutureWealth(year),\n    [year + 2]: useFutureWealth(year + 1) + useFutureWealth(year),\n  };\n};\n\nexport const useTimeSeriesWealth = (year: number) => {\n  const localDateTime = getLocalDateTime();\n  const earliest = useEarliestAccountEntry();\n  const accounts = useStore(store, (x) => x.wealth);\n  const futuresWealth = useFuturesWealth();\n\n  const data = useMemo(() => {\n    if (!earliest.isValid) {\n      return [];\n    }\n\n    const dates = new Array(year + 2 - earliest.year)\n      .fill(earliest.year)\n      .map((x, i) => DateTime.fromObject({ day: 1, month: 1, year: x + i }).startOf(\"day\"));\n\n    const idx = findNearestIdxOnOrBefore(localDateTime, dates, (x) => x);\n    if (!dates.some((x) => x.equals(localDateTime.startOf(\"day\")))) {\n      dates.splice(idx + 1, 0, localDateTime);\n    }\n\n    const futureBenchmarkIdx = idx;\n\n    return dates\n      .map((date) => {\n        const accountsWealth = Object.values(accounts).map((x) => {\n          if (x.type === \"mortgage\" && x.loan) {\n            const houseValue = findNearestOnOrBefore(date, x.data);\n            const balance = calcLoanBalance(date, x.loan);\n            return calcEquity(x.loan.ownershipPct, houseValue?.value, balance, x.loan.principal);\n          } else if (x.type === \"account\") {\n            const entry = findNearestOnOrBefore(date, x.data);\n            return entry?.value ?? 0;\n          }\n          return 0;\n        });\n\n        const accountWealth = accountsWealth.reduce((acc, curr) => acc + curr, 0);\n        const futureWealth = futuresWealth[date.year] ?? 0;\n\n        return {\n          date,\n          graphDate: date.toJSDate(),\n          wealth: accountWealth + futureWealth,\n        };\n      })\n      .map((x, idx, arr) => {\n        if (x.date <= localDateTime || x.date.year === localDateTime.year + 2) {\n          const benchmarkWealth = arr[idx - 1]?.wealth;\n          if (!benchmarkWealth) {\n            return x;\n          }\n          return {\n            ...x,\n            yoyCash: x.wealth - benchmarkWealth,\n            yoyPct: x.wealth / benchmarkWealth - 1,\n          };\n        }\n\n        const benchmarkWealth = arr[futureBenchmarkIdx]?.wealth;\n        if (!benchmarkWealth) {\n          return x;\n        }\n        return {\n          ...x,\n          yoyCash: x.wealth - benchmarkWealth,\n          yoyPct: x.wealth / benchmarkWealth - 1,\n        };\n      });\n  }, [earliest.isValid, earliest.year, year, localDateTime, accounts, futuresWealth]);\n  return data as TimeSeriesWealth[];\n};\n","import { AgCartesianChartOptions, AgLineSeriesOptions } from \"ag-charts-community\";\nimport { AgChartsReact } from \"ag-charts-react\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { formatCash, formatCashShort } from \"shared/utility/format-cash\";\nimport { shortDate } from \"shared/utility/format-date\";\nimport { useTimeSeriesWealth } from \"../hooks/use-times-series-wealth\";\n\nexport const WealthChart = (props: { titleYear: number }) => {\n  const dataYear = getLocalDateTime().year + 1;\n  const { titleYear } = props;\n  const data = useTimeSeriesWealth(dataYear);\n  const offsetIdx = getLocalDateTime().year - titleYear + 1;\n\n  const series = useMemo(() => {\n    return [\n      {\n        type: \"line\",\n        xKey: \"graphDate\",\n        yKey: \"wealth\",\n        yName: \"Wealth\",\n        tooltip: {\n          renderer: ({ datum, yKey, xKey }) => ({\n            content: `${DateTime.fromJSDate(datum[xKey]).toISODate()} ${formatCash(datum[yKey])}`,\n          }),\n        },\n      },\n      {\n        type: \"line\",\n        xKey: \"graphDate\",\n        yKey: \"yoyCash\",\n        yName: \"YoY ($)\",\n        tooltip: {\n          renderer: ({ datum, yKey, xKey }) => ({\n            content: `${DateTime.fromJSDate(datum[xKey]).toISODate()} ${formatCash(datum[yKey])}`,\n          }),\n        },\n      },\n    ] as AgLineSeriesOptions[];\n  }, []);\n\n  const options: AgCartesianChartOptions = useMemo(\n    () => ({\n      theme: \"ag-default-dark\",\n      title: {\n        text: `${data[data.length - 1 - offsetIdx].date.toFormat(shortDate)} Projected wealth ${formatCashShort(\n          (data[data.length - 1 - offsetIdx]?.wealth ?? 0) as number\n        )}`,\n      },\n      data,\n      axes: [\n        {\n          type: \"time\",\n          position: \"bottom\",\n          label: {\n            format: \"%Y\",\n          },\n        },\n        {\n          type: \"number\",\n          position: \"left\",\n          nice: false,\n        },\n      ],\n      series,\n    }),\n    [data, series, offsetIdx]\n  );\n  return <AgChartsReact options={options} />;\n};\n","import QueryStatsIcon from \"@mui/icons-material/QueryStats\";\nimport UpdateIcon from \"@mui/icons-material/Update\";\nimport { Tooltip } from \"@mui/material\";\nimport { Stack } from \"@mui/system\";\nimport { ColDef, ICellRendererParams } from \"ag-grid-community\";\nimport { DateTime } from \"luxon\";\nimport { Cash } from \"shared/components/formatters/cash\";\nimport { Percent } from \"shared/components/formatters/percent\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { shortDate } from \"shared/utility/format-date\";\nimport { TimeSeriesWealth } from \"../../hooks/use-times-series-wealth\";\n\nexport const columnConfig: ColDef<TimeSeriesWealth>[] = [\n  {\n    headerName: \"Date\",\n    colId: \"date\",\n    sort: \"desc\",\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\n    valueGetter: (x) => x.data?.date,\n    cellRenderer: (x: ICellRendererParams<unknown, DateTime>) => {\n      const systemYear = getLocalDateTime().year;\n      return (\n        <Stack direction={\"row\"} alignItems={\"center\"}>\n          {x.valueFormatted}&nbsp;\n          {x.value && x.value > getLocalDateTime() && (\n            <Tooltip title=\"Future Event\">\n              <UpdateIcon htmlColor=\"yellow\" />\n            </Tooltip>\n          )}\n          {x.value &&\n            x.value.equals(\n              DateTime.fromObject({\n                day: 1,\n                month: 1,\n                year: systemYear,\n              })\n            ) && (\n              <Tooltip\n                title={`Benchmark for ${getLocalDateTime().toFormat(shortDate)} & ${getLocalDateTime().set({ day: 1, month: 1 }).plus({ years: 1 }).toFormat(shortDate)} `}\n              >\n                <QueryStatsIcon htmlColor=\"yellow\" />\n              </Tooltip>\n            )}\n        </Stack>\n      );\n    },\n  },\n  {\n    type: \"numericColumn\",\n    headerName: \"Wealth\",\n    colId: \"wealth\",\n    valueGetter: (x) => x.data?.wealth,\n    cellRenderer: (x: ICellRendererParams<unknown, number>) => {\n      return x.value && <Cash value={x.value} placement=\"left\" />;\n    },\n  },\n  {\n    colId: \"yoy-cash\",\n    type: \"numericColumn\",\n    headerName: \"YoY ($)\",\n    valueGetter: (x) => x.data?.yoyCash,\n    cellRenderer: (x: ICellRendererParams<unknown, number>) => {\n      return x.value && <Cash value={x.value} placement=\"left\" />;\n    },\n  },\n  {\n    colId: \"yoy-percent\",\n    type: \"numericColumn\",\n    headerName: \"YoY (%)\",\n    valueGetter: (x) => x.data?.yoyPct,\n    cellRenderer: (x: ICellRendererParams<unknown, number>) => {\n      return x.value && <Percent value={x.value} />;\n    },\n    minWidth: 60,\n  },\n];\n","import { Box } from \"@mui/system\";\nimport { useTimeSeriesWealth } from \"capabilities/projected-wealth/hooks/use-times-series-wealth\";\nimport { AgGrid } from \"shared/components/ag-grid\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { columnConfig } from \"./colum-config\";\n\nexport const WealthTable = () => {\n  const dataYear = getLocalDateTime().year + 1;\n  const data = useTimeSeriesWealth(dataYear);\n\n  return (\n    <Box height={\"100%\"} width={\"100%\"}>\n      <AgGrid\n        id=\"time-series-wealth\"\n        rowData={data}\n        columnDefs={columnConfig}\n        autoSizeStrategy={{ type: \"fitGridWidth\" }}\n        onRowDataUpdated={(e) => e.api.sizeColumnsToFit()}\n      />\n    </Box>\n  );\n};\n","import { Box, Stack } from \"@mui/material\";\nimport { useState } from \"react\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { FutureEvents } from \"./components/future-events\";\nimport { WealthChart } from \"./components/wealth-chart\";\nimport { WealthTable } from \"./components/wealth-table\";\n\nexport const ProjectedWealth = () => {\n  const localTime = getLocalDateTime();\n  const [year, setYear] = useState(localTime.year);\n\n  return (\n    <Box display=\"flex\" flexDirection=\"row\" height=\"100%\" width={\"100%\"} gap={1}>\n      <Box flex=\"0 1 auto\" height={\"100%\"} overflow={\"auto\"}>\n        <FutureEvents onChange={setYear} year={year} />\n      </Box>\n      <Box flex=\"1 1 auto\" overflow={\"auto\"}>\n        <Stack spacing={2} height={\"100%\"} width={\"100%\"}>\n          <WealthChart titleYear={year} />\n          <WealthTable />\n        </Stack>\n      </Box>\n    </Box>\n  );\n};\n","import { create } from \"mutative\";\nimport { ProjectedWealthKeys } from \"shared/models/store/current\";\nimport { store } from \".\";\n\nexport const setProjectedWealth = (configName: ProjectedWealthKeys, value: number) => {\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      next.projectedWealth[configName] = value;\n    });\n  });\n};\n","import { InputAdornment, TextField } from \"@mui/material\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { useCallback, useState } from \"react\";\nimport { ProjectedWealthKeys } from \"shared/models/store/current\";\nimport { store } from \"shared/store\";\nimport { setProjectedWealth } from \"shared/store/set-projected-wealth\";\n\ninterface ConfigEntryProps {\n  configName: ProjectedWealthKeys;\n  label: string;\n  variant?: \"cash\" | \"percent\";\n}\n\nexport const ConfigEntry = (props: ConfigEntryProps) => {\n  const { configName, label, variant = \"cash\" } = props;\n  const [error, setError] = useState(false);\n  const isPercent = variant === \"percent\";\n\n  const onchange = useCallback(\n    (input: string) => {\n      let value = +input;\n      const isNan = Number.isNaN(value);\n      setError(isNan);\n      if (isNan) {\n        return;\n      }\n\n      if (isPercent) {\n        value /= 100;\n      }\n\n      setProjectedWealth(configName, value);\n    },\n    [configName, isPercent]\n  );\n\n  const value = useStore(store, (x) => x.projectedWealth[configName]);\n  const defaultValue = isPercent ? value * 100 : value;\n\n  return (\n    <TextField\n      error={error}\n      variant=\"outlined\"\n      InputProps={{\n        startAdornment: <InputAdornment position=\"start\">{isPercent ? \"%\" : \"$\"}</InputAdornment>,\n      }}\n      defaultValue={defaultValue.toFixed(isPercent ? 2 : 0)}\n      type=\"numeric\"\n      label={label}\n      onChange={(event) => {\n        onchange(event.target.value);\n      }}\n    />\n  );\n};\n","import { Stack } from \"@mui/system\";\nimport { ConfigEntry } from \"./config-entry\";\n\nexport const Config = () => {\n  return (\n    <Stack spacing={2}>\n      <ConfigEntry configName=\"savingsPerMonth\" label=\"Monthly Saving Rate\" />\n      <ConfigEntry configName=\"retirementContributionPaycheck\" label=\"Retirement Contribution Per Paycheck\" />\n      <ConfigEntry configName=\"bonusWitholdingsRate\" label=\"Bonus Witholdings Rate\" variant=\"percent\" />\n      <Stack direction={\"row\"} spacing={2} width={\"100%\"} sx={{ \"& > *\": { flex: 1 } }}>\n        <ConfigEntry configName=\"socialSecurityLimit\" label=\"Social Security Tax Limit\" />\n        <ConfigEntry configName=\"socialSecurityTaxRate\" label=\"Social Security Tax\" variant=\"percent\" />\n      </Stack>\n      <Stack direction={\"row\"} spacing={2} width={\"100%\"} sx={{ \"& > *\": { flex: 1 } }}>\n        <ConfigEntry configName=\"medicareSupplementalTaxThreshold\" label=\"Medicare Supplemental Threshold\" />\n        <ConfigEntry configName=\"medicareSupplementalTaxRate\" label=\"Medicare Supplemental Tax\" variant=\"percent\" />\n      </Stack>\n    </Stack>\n  );\n};\n","import { Box, Table, TableBody, TableCell, TableHead, TableRow } from \"@mui/material\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogContentText from \"@mui/material/DialogContentText\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport { ReactNode } from \"react\";\nimport { ZodError } from \"zod\";\n\ninterface InvalidDataDialogProps {\n  open?: boolean;\n  error?: ZodError;\n  children?: ReactNode;\n}\n\nexport default function InvalidDataDialog(props: InvalidDataDialogProps) {\n  const { open, error, children } = props;\n\n  return (\n    <>\n      <Dialog open={!!open}>\n        <DialogTitle id=\"alert-dialog-title\">{\"Error Loading Data\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            <Box maxHeight={500} overflow={\"auto\"}>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Error Message</TableCell>\n                    <TableCell>Path</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {error?.issues.map((x, idx) => {\n                    return (\n                      <TableRow key={idx}>\n                        <TableCell>{x.message}</TableCell>\n                        <TableCell>{x.path.join(\".\")}</TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </Table>\n            </Box>\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>{children}</DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import { useStore } from \"@tanstack/react-store\";\nimport { useCallback } from \"react\";\nimport { store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { shortDate } from \"shared/utility/format-date\";\n\nexport const downloadJson = <T,>(filename: string, storeData: T) => {\n  const data = JSON.stringify(storeData, null, 2);\n  const link = document.createElement(\"a\");\n  link.download = filename;\n  const blob = new Blob([data], { type: \"application/json\" });\n  link.href = window.URL.createObjectURL(blob);\n  link.click();\n};\n\nexport const useExport = () => {\n  const storeData = useStore(store);\n  const onExport = useCallback(() => {\n    downloadJson(`wealth-tracker-${getLocalDateTime().toFormat(shortDate)}.json`, storeData);\n  }, [storeData]);\n\n  return onExport;\n};\n","import { useCallback } from \"react\";\nimport { storeValidator } from \"shared/models/store/current\";\nimport { store } from \"shared/store\";\nimport { migration } from \"shared/store/migrations\";\n\nfunction selectFile(contentType: string) {\n  return new Promise<File>((resolve) => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.multiple = false;\n    input.accept = contentType;\n\n    input.onchange = () => {\n      const files = Array.from(input.files ?? []);\n      resolve(files[0]);\n    };\n\n    input.click();\n  });\n}\n\nexport const useImport = () => {\n  return useCallback(() => {\n    return new Promise<void>((resolve, reject) => {\n      selectFile(\"application/json\").then((file) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = (readerEvent) => {\n          const content = readerEvent.target?.result?.toString();\n          if (content) {\n            const data = JSON.parse(window.atob(content.split(\",\")[1]));\n            const validation = storeValidator.safeParse(data);\n            if (validation.success) {\n              store.setState(() => data);\n              resolve();\n            } else {\n              try {\n                migration(data);\n                store.setState(() => data);\n                resolve();\n              } catch (err) {\n                console.log(\"error\", err);\n                console.log(\"invalid data\", data);\n                reject(err);\n              }\n            }\n          }\n        };\n      });\n    });\n  }, []);\n};\n","import { useMemo } from \"react\";\nimport { storeValidator } from \"shared/models/store/current\";\n\nexport const useStoreDataError = () => {\n  const invalidData = localStorage.getItem(\"store-invalid\");\n  return useMemo(() => {\n    if (!invalidData) {\n      return { hadError: false };\n    }\n    const jsonInvalidData = JSON.parse(invalidData);\n    const validated = storeValidator.safeParse(jsonInvalidData);\n    return {\n      hadError: !!invalidData,\n      invalidData: jsonInvalidData,\n      parseError: invalidData && !validated.success ? validated.error : undefined,\n      resetError: () => {\n        localStorage.removeItem(\"store-invalid\");\n      },\n    };\n  }, [invalidData]);\n};\n","import DeleteForever from \"@mui/icons-material/DeleteForever\";\r\nimport { Button } from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport InvalidDataDialog from \"app/invalid-data-dialog\";\r\nimport { useState } from \"react\";\r\nimport { ConfirmDialog } from \"shared/components/confirm-dialog\";\r\nimport { downloadJson, useExport } from \"shared/hooks/use-export\";\r\nimport { useImport } from \"shared/hooks/use-import\";\r\nimport { useStoreDataError } from \"shared/hooks/use-store-data-error\";\r\nimport { resetStore } from \"shared/store\";\r\nimport { getLocalDateTime } from \"shared/utility/current-date\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\n\r\nexport const System = () => {\r\n  const onExport = useExport();\r\n  const onImport = useImport();\r\n  const { hadError, parseError, resetError, invalidData } = useStoreDataError();\r\n  const [error, setError] = useState(parseError);\r\n  const [isOpen, setIsOpen] = useState(hadError);\r\n\r\n  return (\r\n    <Box marginLeft={\"auto\"} gap={2} display={\"flex\"}>\r\n      <Button\r\n        onClick={() =>\r\n          onImport().catch((err) => {\r\n            setIsOpen(true);\r\n            setError(err);\r\n          })\r\n        }\r\n      >\r\n        Import\r\n      </Button>\r\n      <Button onClick={onExport}>Export</Button>\r\n      <ConfirmDialog title=\"Reset Everything\" onConfirm={resetStore}>\r\n        <Button color=\"error\">\r\n          <DeleteForever />\r\n          Reset\r\n        </Button>\r\n      </ConfirmDialog>\r\n      <InvalidDataDialog open={isOpen} error={error}>\r\n        {hadError && (\r\n          <>\r\n            <Button\r\n              color=\"error\"\r\n              onClick={() => {\r\n                setIsOpen(false);\r\n                resetError?.();\r\n                resetStore();\r\n              }}\r\n            >\r\n              Reset\r\n            </Button>\r\n            <Button\r\n              onClick={() => {\r\n                downloadJson(`invalid-data-wealth-tracker-${getLocalDateTime().toFormat(shortDate)}.json`, invalidData);\r\n              }}\r\n            >\r\n              Download Data\r\n            </Button>\r\n\r\n            <Button\r\n              onClick={() => {\r\n                setIsOpen(false);\r\n                resetError?.();\r\n              }}\r\n            >\r\n              Ignore\r\n            </Button>\r\n          </>\r\n        )}\r\n        {!hadError && (\r\n          <Button\r\n            onClick={() => {\r\n              setIsOpen(false);\r\n            }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        )}\r\n      </InvalidDataDialog>\r\n    </Box>\r\n  );\r\n};\r\n","import CloseIcon from \"@mui/icons-material/Close\";\r\nimport SettingsIcon from \"@mui/icons-material/Settings\";\r\nimport { Box, Button, Dialog, DialogContent, DialogTitle, IconButton, Tab, Tabs } from \"@mui/material\";\r\nimport { useState } from \"react\";\r\nimport { Config } from \"./config\";\r\nimport { System } from \"./system\";\r\n\r\nexport const ConfigModal = () => {\r\n  const [tab, setTab] = useState(\"system\");\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <Button onClick={() => setIsOpen(true)}>\r\n        <SettingsIcon />\r\n      </Button>\r\n      <Dialog open={isOpen} onClose={() => setIsOpen(false)}>\r\n        <DialogTitle sx={{ display: \"flex\" }}>\r\n          <Tabs value={tab} onChange={(_, value) => setTab(value)}>\r\n            <Tab value=\"projected-wealth\" label=\"Projected Wealth\" />\r\n            <Tab value=\"system\" label=\"Data\" />\r\n          </Tabs>\r\n          <IconButton sx={{ height: \"min-content\", marginLeft: \"auto\" }} onClick={() => setIsOpen(false)}>\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box width={550} height={350} marginTop={2}>\r\n            {tab === \"projected-wealth\" && <Config />}\r\n            {tab === \"system\" && <System />}\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n","import { Box, Stack, Tab, Tabs } from \"@mui/material\";\nimport { NetWealth } from \"capabilities/net-wealth\";\nimport { ProjectedIncome } from \"capabilities/projected-income\";\nimport { ProjectedWealth } from \"capabilities/projected-wealth\";\nimport { useState } from \"react\";\nimport { ConfigModal } from \"./config/config-modal\";\n\nexport const App = () => {\n  const [tab, setTab] = useState<string>(\"wealth\");\n\n  return (\n    <Box padding={2} paddingTop={0} display={\"flex\"} flexDirection={\"column\"} height=\"100%\" gap={2}>\n      <Box flex=\"0 1 auto\">\n        <Stack direction=\"row\">\n          <Tabs value={tab} onChange={(_, value) => setTab(value)}>\n            <Tab value=\"wealth\" label=\"Total Wealth\" />\n            <Tab value=\"projected-income\" label=\"Projected Income\" />\n            <Tab value=\"projected-wealth\" label=\"Projected Wealth\" />\n          </Tabs>\n          <Box marginLeft={\"auto\"} gap={2} display={\"flex\"}>\n            <ConfigModal />\n          </Box>\n        </Stack>\n      </Box>\n      <Box flex=\"1 1 auto\" height={\"100%\"} width={\"100%\"} overflow=\"hidden\">\n        {tab === \"wealth\" && <NetWealth />}\n        {tab === \"projected-income\" && <ProjectedIncome />}\n        {tab === \"projected-wealth\" && <ProjectedWealth />}\n      </Box>\n    </Box>\n  );\n};\n","import { DateTime } from \"luxon\";\n\nexport const aPayday = DateTime.fromObject({ month: 12, day: 1, year: 2023 });\n","import { DateTime } from \"luxon\";\nimport { AccountData, ProjectedIncome } from \"shared/models/store/current\";\nimport { findSameYear } from \"shared/utility/find-same-year\";\nimport { getPayments } from \"shared/utility/get-payments\";\nimport { valueByDateRange } from \"shared/utility/get-values-by-date-range\";\n\nexport const getScenarioSize = (year: number, projectedIncome: ProjectedIncome) => {\n  const timeSeries = projectedIncome.timeSeries;\n  const pay = timeSeries.paycheck.filter((x) => DateTime.fromISO(x.date).year > year - 3);\n  const mostRecentPay = pay.at(-1) ?? timeSeries.paycheck.at(-1);\n  if (!mostRecentPay) {\n    return 0;\n  }\n\n  const yearsToGenerate = Math.max(year - DateTime.fromISO(mostRecentPay.date).year, 1);\n  return Math.pow(timeSeries.meritIncreasePct.length, yearsToGenerate) * timeSeries.companyBonus.length;\n};\n\nconst getMeritPairs = (year: number, projectedIncome: ProjectedIncome) => {\n  const timeSeries = projectedIncome.timeSeries;\n  const meritBonusPct = findSameYear(year, timeSeries.meritBonusPct);\n  const meritIncreasePct = findSameYear(year, timeSeries.meritIncreasePct);\n\n  const allMeritPairs = timeSeries.meritIncreasePct.map((x) => {\n    const meritBonusPctPair = findSameYear(DateTime.fromISO(x.date).year, timeSeries.meritBonusPct);\n    return {\n      meritIncreasePct: x.value,\n      meritBonusPct: meritBonusPctPair?.value ?? 0,\n    };\n  });\n\n  return allMeritPairs\n    .filter((x) => (meritBonusPct ? x.meritBonusPct === meritBonusPct.value : true))\n    .filter((x) => (meritIncreasePct ? x.meritIncreasePct === meritIncreasePct?.value : true));\n};\n\nexport const getMeritSequence = (year: number, projectedIncome: ProjectedIncome) => {\n  const timeSeries = projectedIncome.timeSeries;\n  const meritPairs = getMeritPairs(year, projectedIncome);\n\n  const pay = timeSeries.paycheck.filter((x) => DateTime.fromISO(x.date).year > year - 3);\n  const mostRecentPay = pay.at(-1) ?? timeSeries.paycheck.at(-1);\n\n  if (!mostRecentPay) {\n    return [];\n  }\n\n  const yearsToGenerate = Math.max(year - DateTime.fromISO(mostRecentPay.date).year, 1);\n\n  let meritSequence = meritPairs.slice().map((x) => [x]);\n  for (let i = 0; i < yearsToGenerate - 1; i++) {\n    meritSequence = meritSequence.flatMap((x) => {\n      return meritPairs.map((merit) => {\n        return x.slice().concat(merit);\n      });\n    });\n  }\n  return meritSequence;\n};\n\nexport const getEmptyMeritSequence = (year: number, projectedIncome: ProjectedIncome, pay: AccountData[]) => {\n  const timeSeries = projectedIncome.timeSeries;\n  const equityIncreasePct = findSameYear(year, timeSeries.equityPct)?.value ?? 0;\n  const meritIncreasePct = findSameYear(year, timeSeries.meritIncreasePct)?.value ?? 0;\n  const meritBonusPct = findSameYear(year, timeSeries.meritBonusPct)?.value ?? 0;\n  const meritBonuses = pay.map(\n    (x) => findSameYear(DateTime.fromISO(x.date).year, timeSeries.meritBonusPct)?.value ?? 0\n  );\n\n  const lastThreeMeritBonuses = meritBonuses.slice(-3);\n  const lastThreeMeritBonusFactor = meritBonuses.slice(-3).reduce((acc, curr) => acc + curr, 0);\n  const payments = getPayments(\n    DateTime.fromObject({ day: 1, month: 1, year: year - 1 }),\n    DateTime.fromObject({ day: 31, month: 12, year: year }).endOf(\"day\"),\n    valueByDateRange(pay)\n  );\n\n  return [\n    {\n      pay: pay.slice(),\n      lastThreeMeritBonusFactor,\n      lastThreeMeritBonuses,\n      meritBonusPct,\n      meritIncreasePct,\n      payments,\n      equityIncreasePct,\n      retirementBonusPct: 0.15,\n    },\n  ];\n};\n","import { DateTime } from \"luxon\";\nimport { create } from \"mutative\";\nimport { Scenario } from \"shared/models/scenario\";\nimport { store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { scenarioStore } from \"../store/scenario-store\";\nimport { getScenarioSize } from \"./merit-sequence\";\n\nconst currentYear = getLocalDateTime().year;\nconst maxYear = (() => {\n  const projectedIncome = store.state.projectedIncome;\n  for (let i = currentYear; i <= currentYear + 10; i++) {\n    if (getScenarioSize(i, projectedIncome) > 2499) {\n      return Math.max(currentYear, i - 1);\n    }\n  }\n  return currentYear + 10;\n})();\n\nconst worker = new Worker(new URL(\"worker.js\", import.meta.url), { type: \"module\" });\nworker.onmessage = (event: MessageEvent<{ year: number; scenarios: Scenario[] }>) => {\n  const isLoading = event.data.year !== maxYear;\n\n  scenarioStore.setState((prev) => {\n    return create(prev, (x) => {\n      x.scenarios[event.data.year] = event.data.scenarios;\n      x.loading = isLoading;\n      x.maxYear = Math.max(event.data.year, x.maxYear);\n      x.minYear = Math.min(event.data.year, x.minYear);\n    });\n  });\n};\n\nconst loadAllScenarios = () => {\n  const projectedIncome = store.state.projectedIncome;\n  const first = projectedIncome.timeSeries.paycheck[1]?.date;\n  const date = first ? DateTime.fromISO(first) : getLocalDateTime();\n  const oldestYear = date.year;\n  worker.postMessage({ year: 2024, projectedIncome });\n  for (let i = oldestYear; i < currentYear; i++) {\n    worker.postMessage({ year: i, projectedIncome });\n  }\n  for (let i = currentYear; i <= maxYear; i++) {\n    worker.postMessage({ year: i, projectedIncome });\n  }\n};\nloadAllScenarios();\n\nlet priorProjectedIncome = store.state.projectedIncome;\nstore.subscribe(() => {\n  if (priorProjectedIncome === store.state.projectedIncome) {\n    return;\n  }\n  scenarioStore.setState(() => ({ loading: false, scenarios: {}, maxYear: currentYear, minYear: currentYear }));\n  priorProjectedIncome = store.state.projectedIncome;\n  loadAllScenarios();\n});\n","import { CssBaseline, ThemeProvider, createTheme } from \"@mui/material\";\nimport { LocalizationProvider } from \"@mui/x-date-pickers\";\nimport { AdapterLuxon } from \"@mui/x-date-pickers/AdapterLuxon\";\nimport \"ag-grid-community/styles/ag-grid.css\";\nimport \"ag-grid-community/styles/ag-theme-quartz.css\";\nimport { App } from \"app/app.tsx\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport \"shared/web-worker/entry\";\nimport \"./index.css\";\n\nconst darkTheme = createTheme({\n  palette: {\n    mode: \"dark\",\n  },\n});\n\nReactDOM.createRoot(document.getElementById(\"root\")!).render(\n  <React.StrictMode>\n    <ErrorBoundary\n      fallbackRender={(props) => {\n        return (\n          <>\n            <div style={{ backgroundColor: \"#FFF\" }}>{props.error.message}</div>\n            <div style={{ backgroundColor: \"#FFF\" }}>{props.error.stackTrace}</div>\n          </>\n        );\n      }}\n    >\n      <LocalizationProvider dateAdapter={AdapterLuxon}>\n        <ThemeProvider theme={darkTheme}>\n          <CssBaseline />\n          <App />\n        </ThemeProvider>\n      </LocalizationProvider>\n    </ErrorBoundary>\n  </React.StrictMode>\n);\n"],"names":["sortByDate","select","direction","a","b","toMillis","loanValidator","z","object","principal","number","ratePct","paymentsPerYear","payment","firstPaymentDate","string","ownershipPct","accountDataValidator","date","value","accountValidator","type","literal","data","array","getDefaultStore","version","projectedIncome","timeSeries","paycheck","meritBonusPct","companyBonusPct","meritBonus","companyBonus","retirementBonus","equityPct","meritIncreasePct","wealth","projectedWealth","medicareSupplementalTaxThreshold","socialSecurityLimit","socialSecurityTaxRate","medicareSupplementalTaxRate","savingsPerMonth","retirementContributionPaycheck","bonusWitholdingsRate","id","mortgageValidator","loan","optional","record","union","storeValidator","migration","Error","storeV0Validator","parse","storeV1Validator","storeV2Validator","next","console","log","createStore","validator","defaultValue","key","invalidData","localData","localStorage","getItem","JSON","safeParse","success","setItem","stringify","err","store","CreateStore","subscribe","current","state","AddAccountEntry","accountName","amount","setState","create","prev","push","startOf","toString","sort","DateTime","fromISO","x","addProjectedIncome","concat","removeAccount","removeAccountEntry","idx","findIndex","splice","removeProjectedIncome","resetStore","setLoan","updateAccountDate","account","toISO","updateAccountName","currentAccountName","newAccountName","updateAccountValue","updateProjectedIncome","NewAccount","forwardRef","props","ref","open","setOpen","useState","nameRef","useRef","error","setError","accountType","setAccountType","undefined","marginTop","target","children","AgGrid","rest","height","getLocalDateTime","local","shortDate","monthDay","formatCashShort","Intl","NumberFormat","style","currency","notation","maximumFractionDigits","format","formatCash","Cash","fallback","disableTooltip","compact","tooltip","placement","formatted","useMemo","join","createAccountColumnConfig","headerName","valueFormatter","toFormat","valueGetter","cellEditor","editable","valueSetter","fromJSDate","newValue","isValid","cellRenderer","cellStyle","display","padding","sortable","width","colId","DeleteForeverIcon","useMissingYears","years","Object","entries","groupBy","year","map","find","janFirst","fromObject","day","month","diff","days","lookup","fromEntries","missing","i","length","ConfirmDialog","onConfirm","title","isOpen","setIsOpen","openButton","React","cloneElement","onClick","minWidth","justifyContent","marginRight","AccountSettings","nextAccountName","setNextAccountName","SettingsIcon","Close","event","AccountTab","useStore","setDate","inputRef","missingYears","hasSameDate","hasSame","onAddEntry","accountColumnConfig","marginLeft","color","startAdornment","api","sizeColumnsToFit","findNearestOnOrBefore","findNearestIdxOnOrBefore","selector","getGraphDates","accounts","Set","flatMap","calcLoanBalance","rate","monthlyPayment","annualizedRate","periods","months","totalRate","balance","calcEquity","houseValue","loanBalance","AddEntry","Stack","mortgageColumnConfig","toFixed","equity","convertPct","min","datetime","offset","handleClose","textField","parsed","issues","path","MortgageTab","allAccounts","mortgageData","values","Box","AccountTabs","firstAccount","keys","setAccount","useEffect","_","getMortgageValue","mortgage","entry","getAccountValue","getGraphValue","useGraphData","dates","graphData","reduce","acc","toJSDate","total","forEach","arr","firstNonZero","slice","WealthChart","series","stacked","xKey","yKey","yName","renderer","datum","content","toISODate","options","theme","text","axes","position","label","nice","tick","interval","time","every","snapTo","NetWealth","border","borderRadius","backgroundColor","boxShadow","Card","paddingBottom","paddingLeft","paddingTop","CashRange","max","showRange","minFormatted","maxFormatted","formatPercent","getColor","probability","Percent","PercentRange","Value","secondaryValue","tertiaryValue","className","flexDirection","alignItems","gap","flexShrink","ClusterValue","ClusterValues","clusters","eventDate","diffNow","toHuman","dur","smallestUnit","units","smallestIdx","indexOf","shiftTo","normalize","toObject","filter","Duration","replaceAll","CountDown","dateTime","variant","dateFormat","countDownStr","tooltipStr","countDownColor","findSameYear","useRealDate","useDates","meritBonusDate","companyBonusDate","meritIncrease","useDateRanges","base","start","end","endOf","scenarioStore","Store","loading","maxYear","minYear","scenarios","updateProjectedIncomeDate","valueFormatted","UpdateIcon","DataEntry","defaultDate","setAmount","flex","Layout","marginBottom","IncomePerPeriodTooltip","incomePerPeriod","perPayday","count","index","ArrowForwardIcon","curr","clusterTitle","ckmeans","Math","median","useClusters","totalPay","pay","taxablePay","at","equityIncreasePct","useHasMeritPairs","ProjectedIncome","selectedYear","setSelectedYear","hasMissingPairs","dateRanges","basePay","aprToApr","paychecks","payments","payedOn","reduceRight","unshift","flexWrap","set","sx","maxWidth","useFutureRetirementContributions","retirementContribution","remaining","remainingPayments","perPaycheck","useFutureSavings","config","perMonth","useFutureSocialSecurity","useThresholdTax","useFutureMedicareTax","taxes","threshold","taxRate","cumulative","firstOccurrence","currentPaymentIdx","scaleCluster","cluster","factor","scaleClusters","findMostMostLikely","ExpectedValue","Clusers","mostLikely","isFuture","milliseconds","FutureEvents","onChange","savings","retirement","medicare","socialSecurity","bonusTakehomeFactor","plus","ThresholdTaxCard","thresholdTax","equals","ClusterCard","useEarliestAccountEntry","fromMillis","Infinity","useFutureBonuses","bonuses","useFutureWealth","ssiTaxValue","medicareTaxValue","useFuturesWealth","useTimeSeriesWealth","localDateTime","earliest","futuresWealth","Array","fill","some","futureBenchmarkIdx","accountWealth","futureWealth","graphDate","benchmarkWealth","yoyCash","yoyPct","dataYear","titleYear","offsetIdx","columnConfig","systemYear","QueryStatsIcon","WealthTable","e","ProjectedWealth","localTime","setYear","setProjectedWealth","configName","ConfigEntry","isPercent","onchange","useCallback","input","isNan","Number","isNaN","Config","InvalidDataDialog","message","downloadJson","filename","storeData","link","document","createElement","download","blob","Blob","href","window","URL","createObjectURL","click","useExport","onExport","selectFile","contentType","Promise","multiple","accept","files","from","useImport","resolve","reject","then","reader","FileReader","readAsDataURL","file","onload","readerEvent","result","atob","split","useStoreDataError","hadError","jsonInvalidData","validated","parseError","resetError","removeItem","System","onImport","catch","DeleteForever","ConfigModal","tab","setTab","CloseIcon","App","getScenarioSize","mostRecentPay","yearsToGenerate","pow","currentYear","worker","Worker","onmessage","isLoading","loadAllScenarios","first","oldestYear","postMessage","priorProjectedIncome","darkTheme","createTheme","palette","mode","ReactDOM","createRoot","getElementById","render","stackTrace","AdapterLuxon"],"mappings":"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"}