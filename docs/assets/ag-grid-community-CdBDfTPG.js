var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});var _a,LocalEventService=(_a=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(frameworkOverrides){this.frameworkOverrides=frameworkOverrides}getListeners(eventType,async,autoCreateListenerCollection){const listenerMap=async?this.allAsyncListeners:this.allSyncListeners;let listeners=listenerMap.get(eventType);return!listeners&&autoCreateListenerCollection&&(listeners=new Set,listenerMap.set(eventType,listeners)),listeners}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(eventType,listener,async=!1){this.getListeners(eventType,async,!0).add(listener)}removeEventListener(eventType,listener,async=!1){const listeners=this.getListeners(eventType,async,!1);listeners&&(listeners.delete(listener),listeners.size===0&&(async?this.allAsyncListeners:this.allSyncListeners).delete(eventType))}addGlobalListener(listener,async=!1){(async?this.globalAsyncListeners:this.globalSyncListeners).add(listener)}removeGlobalListener(listener,async=!1){(async?this.globalAsyncListeners:this.globalSyncListeners).delete(listener)}dispatchEvent(event){const agEvent=event;this.dispatchToListeners(agEvent,!0),this.dispatchToListeners(agEvent,!1),this.firedEvents[agEvent.type]=!0}dispatchEventOnce(event){this.firedEvents[event.type]||this.dispatchEvent(event)}dispatchToListeners(event,async){const eventType=event.type;if(async&&"event"in event){const browserEvent=event.event;browserEvent instanceof Event&&(event.eventPath=browserEvent.composedPath())}const processEventListeners=__name((listeners2,originalListeners2)=>listeners2.forEach(listener=>{if(!originalListeners2.has(listener))return;const callback=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>listener(event)):()=>listener(event);async?this.dispatchAsync(callback):callback()}),"processEventListeners"),originalListeners=this.getListeners(eventType,async,!1)??new Set,listeners=new Set(originalListeners);listeners.size>0&&processEventListeners(listeners,originalListeners),new Set(async?this.globalAsyncListeners:this.globalSyncListeners).forEach(listener=>{const callback=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>listener(eventType,event)):()=>listener(eventType,event);async?this.dispatchAsync(callback):callback()})}dispatchAsync(func){if(this.asyncFunctionsQueue.push(func),!this.scheduled){const flush=__name(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)},"flush");this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(flush):flush(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const queueCopy=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],queueCopy.forEach(func=>func())}},__name(_a,"LocalEventService"),_a),ModuleNames=(ModuleNames2=>(ModuleNames2.CommunityCoreModule="@ag-grid-community/core",ModuleNames2.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",ModuleNames2.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",ModuleNames2.CsvExportModule="@ag-grid-community/csv-export",ModuleNames2.EnterpriseCoreModule="@ag-grid-enterprise/core",ModuleNames2.RowGroupingModule="@ag-grid-enterprise/row-grouping",ModuleNames2.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",ModuleNames2.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",ModuleNames2.MenuModule="@ag-grid-enterprise/menu",ModuleNames2.SetFilterModule="@ag-grid-enterprise/set-filter",ModuleNames2.MultiFilterModule="@ag-grid-enterprise/multi-filter",ModuleNames2.StatusBarModule="@ag-grid-enterprise/status-bar",ModuleNames2.SideBarModule="@ag-grid-enterprise/side-bar",ModuleNames2.RangeSelectionModule="@ag-grid-enterprise/range-selection",ModuleNames2.MasterDetailModule="@ag-grid-enterprise/master-detail",ModuleNames2.RichSelectModule="@ag-grid-enterprise/rich-select",ModuleNames2.GridChartsModule="@ag-grid-enterprise/charts",ModuleNames2.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",ModuleNames2.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",ModuleNames2.ExcelExportModule="@ag-grid-enterprise/excel-export",ModuleNames2.ClipboardModule="@ag-grid-enterprise/clipboard",ModuleNames2.SparklinesModule="@ag-grid-enterprise/sparklines",ModuleNames2.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",ModuleNames2.AngularModule="@ag-grid-community/angular",ModuleNames2.ReactModule="@ag-grid-community/react",ModuleNames2.VueModule="@ag-grid-community/vue",ModuleNames2))(ModuleNames||{}),doOnceFlags={};function _doOnce(func,key){doOnceFlags[key]||(func(),doOnceFlags[key]=!0)}__name(_doOnce,"_doOnce");function _log(message,...args){console.log("AG Grid: "+message,...args)}__name(_log,"_log");function _warnOnce(msg,...args){_doOnce(()=>console.warn("AG Grid: "+msg,...args),msg+(args==null?void 0:args.join("")))}__name(_warnOnce,"_warnOnce");function _errorOnce(msg,...args){_doOnce(()=>console.error("AG Grid: "+msg,...args),msg+(args==null?void 0:args.join("")))}__name(_errorOnce,"_errorOnce");function _isFunction(val){return!!(val&&val.constructor&&val.call&&val.apply)}__name(_isFunction,"_isFunction");function _executeInAWhile(funcs){_executeAfter(funcs,400)}__name(_executeInAWhile,"_executeInAWhile");var executeNextVMTurnFuncs=[],executeNextVMTurnPending=!1;function _executeNextVMTurn(func){executeNextVMTurnFuncs.push(func),!executeNextVMTurnPending&&(executeNextVMTurnPending=!0,window.setTimeout(()=>{const funcsCopy=executeNextVMTurnFuncs.slice();executeNextVMTurnFuncs.length=0,executeNextVMTurnPending=!1,funcsCopy.forEach(func2=>func2())},0))}__name(_executeNextVMTurn,"_executeNextVMTurn");function _executeAfter(funcs,milliseconds=0){funcs.length>0&&window.setTimeout(()=>funcs.forEach(func=>func()),milliseconds)}__name(_executeAfter,"_executeAfter");function _debounce(func,delay){let timeout;return function(...args){const context=this;window.clearTimeout(timeout),timeout=window.setTimeout(function(){func.apply(context,args)},delay)}}__name(_debounce,"_debounce");function _throttle(func,wait){let previousCall=0;return function(...args){const context=this,currentCall=new Date().getTime();currentCall-previousCall<wait||(previousCall=currentCall,func.apply(context,args))}}__name(_throttle,"_throttle");function _waitUntil(condition,callback,timeout=100,timeoutMessage){const timeStamp=new Date().getTime();let interval=null,executed=!1;const internalCallback=__name(()=>{const reachedTimeout=new Date().getTime()-timeStamp>timeout;(condition()||reachedTimeout)&&(callback(),executed=!0,interval!=null&&(window.clearInterval(interval),interval=null),reachedTimeout&&timeoutMessage&&_warnOnce(timeoutMessage))},"internalCallback");internalCallback(),executed||(interval=window.setInterval(internalCallback,10))}__name(_waitUntil,"_waitUntil");function _compose(...fns){return arg=>fns.reduce((composed,f)=>f(composed),arg)}__name(_compose,"_compose");function _makeNull(value){return value==null||value===""?null:value}__name(_makeNull,"_makeNull");function _exists(value,allowEmptyString=!1){return value!=null&&(value!==""||allowEmptyString)}__name(_exists,"_exists");function _missing(value){return!_exists(value)}__name(_missing,"_missing");function _missingOrEmpty(value){return value==null||value.length===0}__name(_missingOrEmpty,"_missingOrEmpty");function _toStringOrNull(value){return value!=null&&typeof value.toString=="function"?value.toString():null}__name(_toStringOrNull,"_toStringOrNull");function _attrToNumber(value){if(value===void 0)return;if(value===null||value==="")return null;if(typeof value=="number")return isNaN(value)?void 0:value;const valueParsed=parseInt(value,10);return isNaN(valueParsed)?void 0:valueParsed}__name(_attrToNumber,"_attrToNumber");function _attrToBoolean(value){if(value!==void 0)return value===null||value===""?!1:toBoolean(value)}__name(_attrToBoolean,"_attrToBoolean");function toBoolean(value){return typeof value=="boolean"?value:typeof value=="string"?value.toUpperCase()==="TRUE"||value=="":!1}__name(toBoolean,"toBoolean");function _jsonEquals(val1,val2){const val1Json=val1?JSON.stringify(val1):null,val2Json=val2?JSON.stringify(val2):null;return val1Json===val2Json}__name(_jsonEquals,"_jsonEquals");function _defaultComparator(valueA,valueB,accentedCompare=!1){const valueAMissing=valueA==null,valueBMissing=valueB==null;if(valueA&&valueA.toNumber&&(valueA=valueA.toNumber()),valueB&&valueB.toNumber&&(valueB=valueB.toNumber()),valueAMissing&&valueBMissing)return 0;if(valueAMissing)return-1;if(valueBMissing)return 1;function doQuickCompare(a,b){return a>b?1:a<b?-1:0}if(__name(doQuickCompare,"doQuickCompare"),typeof valueA!="string"||!accentedCompare)return doQuickCompare(valueA,valueB);try{return valueA.localeCompare(valueB)}catch{return doQuickCompare(valueA,valueB)}}__name(_defaultComparator,"_defaultComparator");function _values(object){if(object instanceof Set||object instanceof Map){const arr=[];return object.forEach(value=>arr.push(value)),arr}return Object.values(object)}__name(_values,"_values");function isRowModelType(gos,rowModelType){return gos.get("rowModelType")===rowModelType}__name(isRowModelType,"isRowModelType");function _isClientSideRowModel(gos){return isRowModelType(gos,"clientSide")}__name(_isClientSideRowModel,"_isClientSideRowModel");function _isServerSideRowModel(gos){return isRowModelType(gos,"serverSide")}__name(_isServerSideRowModel,"_isServerSideRowModel");function _isDomLayout(gos,domLayout){return gos.get("domLayout")===domLayout}__name(_isDomLayout,"_isDomLayout");function _isRowSelection(gos){return _getRowSelectionMode(gos)!==void 0}__name(_isRowSelection,"_isRowSelection");function _useAsyncEvents(gos){return!gos.get("suppressAsyncEvents")}__name(_useAsyncEvents,"_useAsyncEvents");function _isGetRowHeightFunction(gos){return typeof gos.get("getRowHeight")=="function"}__name(_isGetRowHeightFunction,"_isGetRowHeightFunction");function _shouldMaintainColumnOrder(gos,isPivotColumns){return isPivotColumns?!gos.get("enableStrictPivotColumnOrder"):gos.get("maintainColumnOrder")}__name(_shouldMaintainColumnOrder,"_shouldMaintainColumnOrder");function _getRowHeightForNode(gos,rowNode,allowEstimate=!1,defaultRowHeight){if(defaultRowHeight==null&&(defaultRowHeight=gos.environment.getDefaultRowHeight()),_isGetRowHeightFunction(gos)){if(allowEstimate)return{height:defaultRowHeight,estimated:!0};const params={node:rowNode,data:rowNode.data},height=gos.getCallback("getRowHeight")(params);if(isNumeric(height))return height===0&&_warnOnce("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,height),estimated:!1}}if(rowNode.detail&&gos.get("masterDetail"))return getMasterDetailRowHeight(gos);const gridOptionsRowHeight=gos.get("rowHeight");return{height:gridOptionsRowHeight&&isNumeric(gridOptionsRowHeight)?gridOptionsRowHeight:defaultRowHeight,estimated:!1}}__name(_getRowHeightForNode,"_getRowHeightForNode");function getMasterDetailRowHeight(gos){if(gos.get("detailRowAutoHeight"))return{height:1,estimated:!1};const defaultRowHeight=gos.get("detailRowHeight");return isNumeric(defaultRowHeight)?{height:defaultRowHeight,estimated:!1}:{height:300,estimated:!1}}__name(getMasterDetailRowHeight,"getMasterDetailRowHeight");function _getRowHeightAsNumber(gos){const{environment}=gos,gridOptionsRowHeight=gos.get("rowHeight");if(!gridOptionsRowHeight||_missing(gridOptionsRowHeight))return environment.getDefaultRowHeight();const rowHeight=environment.refreshRowHeightVariable();return rowHeight!==-1?rowHeight:(_warnOnce("row height must be a number if not using standard row model"),environment.getDefaultRowHeight())}__name(_getRowHeightAsNumber,"_getRowHeightAsNumber");function isNumeric(value){return!isNaN(value)&&typeof value=="number"&&isFinite(value)}__name(isNumeric,"isNumeric");function _getDomData(gos,element,key){const domData=element[gos.getDomDataKey()];return domData?domData[key]:void 0}__name(_getDomData,"_getDomData");function _setDomData(gos,element,key,value){const domDataKey=gos.getDomDataKey();let domData=element[domDataKey];_missing(domData)&&(domData={},element[domDataKey]=domData),domData[key]=value}__name(_setDomData,"_setDomData");function _getDocument(gos){let result=null;const gridOptionsGetDocument=gos.get("getDocument");return gridOptionsGetDocument&&_exists(gridOptionsGetDocument)?result=gridOptionsGetDocument():gos.eGridDiv&&(result=gos.eGridDiv.ownerDocument),result&&_exists(result)?result:document}__name(_getDocument,"_getDocument");function _getWindow(gos){return _getDocument(gos).defaultView||window}__name(_getWindow,"_getWindow");function _getRootNode(gos){return gos.eGridDiv.getRootNode()}__name(_getRootNode,"_getRootNode");function _getActiveDomElement(gos){return _getRootNode(gos).activeElement}__name(_getActiveDomElement,"_getActiveDomElement");function _isNothingFocused(gos){const eDocument=_getDocument(gos),activeEl=_getActiveDomElement(gos);return activeEl===null||activeEl===eDocument.body}__name(_isNothingFocused,"_isNothingFocused");function _isAnimateRows(gos){return gos.get("ensureDomOrder")?!1:gos.get("animateRows")}__name(_isAnimateRows,"_isAnimateRows");function _isGroupRowsSticky(gos){return!(gos.get("paginateChildRows")||gos.get("groupHideOpenParents")||_isDomLayout(gos,"print"))}__name(_isGroupRowsSticky,"_isGroupRowsSticky");function _isColumnsSortingCoupledToGroup(gos){const autoGroupColumnDef=gos.get("autoGroupColumnDef");return!(autoGroupColumnDef!=null&&autoGroupColumnDef.comparator)&&!gos.get("treeData")}__name(_isColumnsSortingCoupledToGroup,"_isColumnsSortingCoupledToGroup");function _getGroupAggFiltering(gos){const userValue=gos.get("groupAggFiltering");if(typeof userValue=="function")return gos.getCallback("groupAggFiltering");if(userValue===!0)return()=>!0}__name(_getGroupAggFiltering,"_getGroupAggFiltering");function _getGrandTotalRow(gos){const userValue=gos.get("grandTotalRow");if(userValue)return userValue;if(gos.get("groupIncludeTotalFooter"))return"bottom"}__name(_getGrandTotalRow,"_getGrandTotalRow");function _getGroupTotalRowCallback(gos){const userValue=gos.get("groupTotalRow");if(typeof userValue=="function")return gos.getCallback("groupTotalRow");if(userValue)return()=>userValue;const legacyValue=gos.get("groupIncludeFooter");if(typeof legacyValue=="function"){const legacyCallback=gos.getCallback("groupIncludeFooter");return p=>legacyCallback(p)?"bottom":void 0}return()=>legacyValue?"bottom":void 0}__name(_getGroupTotalRowCallback,"_getGroupTotalRowCallback");function _isGroupMultiAutoColumn(gos){return gos.exists("groupDisplayType")?gos.get("groupDisplayType")==="multipleColumns":gos.get("groupHideOpenParents")}__name(_isGroupMultiAutoColumn,"_isGroupMultiAutoColumn");function _isGroupUseEntireRow(gos,pivotMode){return pivotMode?!1:gos.get("groupDisplayType")==="groupRows"}__name(_isGroupUseEntireRow,"_isGroupUseEntireRow");function _getRowIdCallback(gos){const getRowId=gos.getCallback("getRowId");return getRowId===void 0?getRowId:params=>{let id=getRowId(params);return typeof id!="string"&&(_warnOnce("The getRowId callback must return a string. The ID ",id," is being cast to a string."),id=String(id)),id}}__name(_getRowIdCallback,"_getRowIdCallback");function _getCheckboxes(selection){return(selection==null?void 0:selection.checkboxes)??!0}__name(_getCheckboxes,"_getCheckboxes");function _getHeaderCheckbox(selection){return(selection==null?void 0:selection.mode)==="multiRow"&&(selection.headerCheckbox??!0)}__name(_getHeaderCheckbox,"_getHeaderCheckbox");function _getHideDisabledCheckboxes(selection){return(selection==null?void 0:selection.hideDisabledCheckboxes)??!1}__name(_getHideDisabledCheckboxes,"_getHideDisabledCheckboxes");function _isUsingNewRowSelectionAPI(gos){return typeof gos.get("rowSelection")!="string"}__name(_isUsingNewRowSelectionAPI,"_isUsingNewRowSelectionAPI");function _isUsingNewCellSelectionAPI(gos){return gos.get("cellSelection")!==void 0}__name(_isUsingNewCellSelectionAPI,"_isUsingNewCellSelectionAPI");function _getSuppressMultiRanges(gos){const selection=gos.get("cellSelection");return selection!==void 0?typeof selection!="boolean"?(selection==null?void 0:selection.suppressMultiRanges)??!1:!1:gos.get("suppressMultiRangeSelection")}__name(_getSuppressMultiRanges,"_getSuppressMultiRanges");function _isCellSelectionEnabled(gos){const selection=gos.get("cellSelection");return selection!==void 0?!!selection:gos.get("enableRangeSelection")}__name(_isCellSelectionEnabled,"_isCellSelectionEnabled");function _isRangeHandleEnabled(gos){var _a253;const selection=gos.get("cellSelection");return selection!==void 0?typeof selection!="boolean"?((_a253=selection.handle)==null?void 0:_a253.mode)==="range":!1:gos.get("enableRangeHandle")}__name(_isRangeHandleEnabled,"_isRangeHandleEnabled");function _isFillHandleEnabled(gos){var _a253;const selection=gos.get("cellSelection");return selection!==void 0?typeof selection!="boolean"?((_a253=selection.handle)==null?void 0:_a253.mode)==="fill":!1:gos.get("enableFillHandle")}__name(_isFillHandleEnabled,"_isFillHandleEnabled");function _getEnableClickSelection(gos){const selection=gos.get("rowSelection")??"single";if(typeof selection=="string"){const suppressRowClickSelection=gos.get("suppressRowClickSelection"),suppressRowDeselection=gos.get("suppressRowDeselection");return suppressRowClickSelection&&suppressRowDeselection?!1:suppressRowClickSelection?"enableDeselection":suppressRowDeselection?"enableSelection":!0}return selection.mode==="singleRow"||selection.mode==="multiRow"?selection.enableClickSelection??!1:!1}__name(_getEnableClickSelection,"_getEnableClickSelection");function _getEnableSelection(gos){const enableClickSelection=_getEnableClickSelection(gos);return enableClickSelection===!0||enableClickSelection==="enableSelection"}__name(_getEnableSelection,"_getEnableSelection");function _getEnableDeselection(gos){const enableClickSelection=_getEnableClickSelection(gos);return enableClickSelection===!0||enableClickSelection==="enableDeselection"}__name(_getEnableDeselection,"_getEnableDeselection");function _getIsRowSelectable(gos){const selection=gos.get("rowSelection");return typeof selection=="string"?gos.get("isRowSelectable"):selection==null?void 0:selection.isRowSelectable}__name(_getIsRowSelectable,"_getIsRowSelectable");function _getRowSelectionMode(gos){const selection=gos.get("rowSelection");if(typeof selection=="string")switch(selection){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return selection==null?void 0:selection.mode}__name(_getRowSelectionMode,"_getRowSelectionMode");function _isMultiRowSelection(gos){return _getRowSelectionMode(gos)==="multiRow"}__name(_isMultiRowSelection,"_isMultiRowSelection");function _getEnableSelectionWithoutKeys(gos){const selection=gos.get("rowSelection");return typeof selection=="string"?gos.get("rowMultiSelectWithClick"):(selection==null?void 0:selection.enableSelectionWithoutKeys)??!1}__name(_getEnableSelectionWithoutKeys,"_getEnableSelectionWithoutKeys");function _getGroupSelection(gos){const selection=gos.get("rowSelection");if(typeof selection=="string"){const groupSelectsChildren=gos.get("groupSelectsChildren"),groupSelectsFiltered=gos.get("groupSelectsFiltered");return groupSelectsChildren&&groupSelectsFiltered?"filteredDescendants":groupSelectsChildren?"descendants":"self"}return(selection==null?void 0:selection.mode)==="multiRow"?selection.groupSelects:void 0}__name(_getGroupSelection,"_getGroupSelection");function _getGroupSelectsDescendants(gos){const groupSelection=_getGroupSelection(gos);return groupSelection==="descendants"||groupSelection==="filteredDescendants"}__name(_getGroupSelectsDescendants,"_getGroupSelectsDescendants");function _isSetFilterByDefault(gos){return gos.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!gos.get("suppressSetFilterByDefault")}__name(_isSetFilterByDefault,"_isSetFilterByDefault");function _last(arr){if(!(!arr||!arr.length))return arr[arr.length-1]}__name(_last,"_last");function _areEqual(a,b,comparator){return a==null&&b==null?!0:a!=null&&b!=null&&a.length===b.length&&a.every((value,index)=>comparator?comparator(value,b[index]):b[index]===value)}__name(_areEqual,"_areEqual");function _sortNumerically(array){return array.sort((a,b)=>a-b)}__name(_sortNumerically,"_sortNumerically");function _removeFromUnorderedArray(array,object){const index=array.indexOf(object);index>=0&&(array[index]=array[array.length-1],array.pop())}__name(_removeFromUnorderedArray,"_removeFromUnorderedArray");function _removeFromArray(array,object){const index=array.indexOf(object);index>=0&&array.splice(index,1)}__name(_removeFromArray,"_removeFromArray");function _removeAllFromUnorderedArray(array,toRemove){for(let i=0;i<toRemove.length;i++)_removeFromUnorderedArray(array,toRemove[i])}__name(_removeAllFromUnorderedArray,"_removeAllFromUnorderedArray");function _removeAllFromArray(array,toRemove){for(let i=0;i<toRemove.length;i++)_removeFromArray(array,toRemove[i])}__name(_removeAllFromArray,"_removeAllFromArray");function _insertIntoArray(array,object,toIndex){array.splice(toIndex,0,object)}__name(_insertIntoArray,"_insertIntoArray");function _moveInArray(array,objectsToMove,toIndex){_removeAllFromArray(array,objectsToMove),objectsToMove.slice().reverse().forEach(obj=>_insertIntoArray(array,obj,toIndex))}__name(_moveInArray,"_moveInArray");function _includes(array,value){return array.indexOf(value)>-1}__name(_includes,"_includes");function _flatten(arrayOfArrays){return(arrayOfArrays==null?void 0:arrayOfArrays.flatMap(t=>t))??[]}__name(_flatten,"_flatten");function _pushAll(target,source){source==null||target==null||source.forEach(value=>target.push(value))}__name(_pushAll,"_pushAll");var AG_GRID_STOP_PROPAGATION="__ag_Grid_Stop_Propagation",PASSIVE_EVENTS=["touchstart","touchend","touchmove","touchcancel","scroll"],supports={};function _stopPropagationForAgGrid(event){event[AG_GRID_STOP_PROPAGATION]=!0}__name(_stopPropagationForAgGrid,"_stopPropagationForAgGrid");function _isStopPropagationForAgGrid(event){return event[AG_GRID_STOP_PROPAGATION]===!0}__name(_isStopPropagationForAgGrid,"_isStopPropagationForAgGrid");var _isEventSupported=(()=>{const tags={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return __name(eventName=>{if(typeof supports[eventName]=="boolean")return supports[eventName];const el=document.createElement(tags[eventName]||"div");return eventName="on"+eventName,supports[eventName]=eventName in el},"eventChecker")})();function _getCtrlForEventTarget(gos,eventTarget,type){let sourceElement=eventTarget;for(;sourceElement;){const renderedComp=_getDomData(gos,sourceElement,type);if(renderedComp)return renderedComp;sourceElement=sourceElement.parentElement}return null}__name(_getCtrlForEventTarget,"_getCtrlForEventTarget");function _isElementInEventPath(element,event){return!event||!element?!1:_getEventPath(event).indexOf(element)>=0}__name(_isElementInEventPath,"_isElementInEventPath");function _createEventPath(event){const res=[];let pointer=event.target;for(;pointer;)res.push(pointer),pointer=pointer.parentElement;return res}__name(_createEventPath,"_createEventPath");function _getEventPath(event){const eventNoType=event;return eventNoType.path?eventNoType.path:eventNoType.composedPath?eventNoType.composedPath():_createEventPath(eventNoType)}__name(_getEventPath,"_getEventPath");function _addSafePassiveEventListener(frameworkOverrides,eElement,event,listener){const options=_includes(PASSIVE_EVENTS,event)?{passive:!0}:void 0;frameworkOverrides&&frameworkOverrides.addEventListener&&frameworkOverrides.addEventListener(eElement,event,listener,options)}__name(_addSafePassiveEventListener,"_addSafePassiveEventListener");var _a2,BeanStub=(_a2=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(beans){this.frameworkOverrides=beans.frameworkOverrides,this.stubContext=beans.context,this.eventService=beans.eventService,this.gos=beans.gos,this.localeService=beans.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let i=0;i<this.destroyFunctions.length;i++)this.destroyFunctions[i]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(eventType,listener,async){this.localEventService||(this.localEventService=new LocalEventService),this.localEventService.addEventListener(eventType,listener,async)}removeEventListener(eventType,listener,async){this.localEventService&&this.localEventService.removeEventListener(eventType,listener,async)}dispatchLocalEvent(event){this.localEventService&&this.localEventService.dispatchEvent(event)}addManagedElementListeners(object,handlers){return this._setupListeners(object,handlers)}addManagedEventListeners(handlers){return this._setupListeners(this.eventService,handlers)}addManagedListeners(object,handlers){return this._setupListeners(object,handlers)}_setupListeners(object,handlers){const destroyFuncs=[];for(const k in handlers){const handler=handlers[k];handler&&destroyFuncs.push(this._setupListener(object,k,handler))}return destroyFuncs}_setupListener(object,event,listener){if(this.destroyed)return()=>null;object instanceof HTMLElement?_addSafePassiveEventListener(this.getFrameworkOverrides(),object,event,listener):object.addEventListener(event,listener);const destroyFunc=__name(()=>(object.removeEventListener(event,listener),null),"destroyFunc");return this.destroyFunctions.push(destroyFunc),()=>(destroyFunc(),this.destroyFunctions=this.destroyFunctions.filter(fn=>fn!==destroyFunc),null)}setupGridOptionListener(event,listener){this.gos.addPropertyEventListener(event,listener);const destroyFunc=__name(()=>(this.gos.removePropertyEventListener(event,listener),null),"destroyFunc");return this.destroyFunctions.push(destroyFunc),()=>(destroyFunc(),this.destroyFunctions=this.destroyFunctions.filter(fn=>fn!==destroyFunc),null)}addManagedPropertyListener(event,listener){return this.destroyed?()=>null:this.setupGridOptionListener(event,listener)}addManagedPropertyListeners(events,listener){if(this.destroyed)return;const eventsKey=events.join("-")+this.propertyListenerId++,wrappedListener=__name(event=>{if(event.changeSet){if(event.changeSet&&event.changeSet.id===this.lastChangeSetIdLookup[eventsKey])return;this.lastChangeSetIdLookup[eventsKey]=event.changeSet.id}const propertiesChangeEvent={type:"gridPropertyChanged",changeSet:event.changeSet,source:event.source};listener(propertiesChangeEvent)},"wrappedListener");events.forEach(event=>this.setupGridOptionListener(event,wrappedListener))}addDestroyFunc(func){this.isAlive()?this.destroyFunctions.push(func):func()}createManagedBean(bean,context){const res=this.createBean(bean,context);return this.addDestroyFunc(this.destroyBean.bind(this,bean,context)),res}createBean(bean,context,afterPreCreateCallback){return(context||this.stubContext).createBean(bean,afterPreCreateCallback)}destroyBean(bean,context){return(context||this.stubContext).destroyBean(bean)}destroyBeans(beans,context){return(context||this.stubContext).destroyBeans(beans)}},__name(_a2,"BeanStub"),_a2);function isProvidedColumnGroup(col){return col instanceof AgProvidedColumnGroup}__name(isProvidedColumnGroup,"isProvidedColumnGroup");var _a3,AgProvidedColumnGroup=(_a3=class extends BeanStub{constructor(colGroupDef,groupId,padding,level){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=getNextColInstanceId(),this.expandableListenerRemoveCallback=null,this.colGroupDef=colGroupDef,this.groupId=groupId,this.expanded=!!colGroupDef&&!!colGroupDef.openByDefault,this.padding=padding,this.level=level}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(colGroupDef,level){this.colGroupDef=colGroupDef,this.level=level,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(originalParent){this.originalParent=originalParent}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(child=>child.isVisible()):!1}isPadding(){return this.padding}setExpanded(expanded){this.expanded=expanded===void 0?!1:expanded,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(children){this.children=children}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const result=[];return this.addLeafColumns(result),result}addLeafColumns(leafColumns){this.children&&this.children.forEach(child=>{isColumn(child)?leafColumns.push(child):isProvidedColumnGroup(child)&&child.addLeafColumns(leafColumns)})}getColumnGroupShow(){const colGroupDef=this.colGroupDef;if(colGroupDef)return colGroupDef.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const listener=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(col=>col.addEventListener("visibleChanged",listener)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(col=>col.removeEventListener("visibleChanged",listener)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let atLeastOneShowingWhenOpen=!1,atLeastOneShowingWhenClosed=!1,atLeastOneChangeable=!1;const children=this.findChildrenRemovingPadding();for(let i=0,j=children.length;i<j;i++){const abstractColumn=children[i];if(!abstractColumn.isVisible())continue;const headerGroupShow=abstractColumn.getColumnGroupShow();headerGroupShow==="open"?(atLeastOneShowingWhenOpen=!0,atLeastOneChangeable=!0):headerGroupShow==="closed"?(atLeastOneShowingWhenClosed=!0,atLeastOneChangeable=!0):(atLeastOneShowingWhenOpen=!0,atLeastOneShowingWhenClosed=!0)}const expandable=atLeastOneShowingWhenOpen&&atLeastOneShowingWhenClosed&&atLeastOneChangeable;this.expandable!==expandable&&(this.expandable=expandable,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const res=[],process=__name(items=>{items.forEach(item=>{isProvidedColumnGroup(item)&&item.isPadding()?process(item.children):res.push(item)})},"process");return process(this.children),res}onColumnVisibilityChanged(){this.setExpandable()}},__name(_a3,"AgProvidedColumnGroup"),_a3),CONTROLS_COLUMN_ID_PREFIX="ag-Grid-ControlsColumn",_a4,ControlsColService=(_a4=class extends BeanStub{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){const so=this.gos.get("rowSelection");if(!so||typeof so=="string")return[];const checkboxes=_getCheckboxes(so),headerCheckbox=_getHeaderCheckbox(so);if(checkboxes||headerCheckbox){const selectionColumnDef=this.gos.get("selectionColumnDef"),colDef={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:this.gos.get("enableRtl")?"right":"left",comparator(valueA,valueB,nodeA,nodeB){const aSelected=nodeA.isSelected(),bSelected=nodeB.isSelected();return aSelected&&bSelected?0:aSelected?1:-1},editable:!1,suppressFillHandle:!0,...selectionColumnDef,colId:`${CONTROLS_COLUMN_ID_PREFIX}`},col=new AgColumn(colDef,null,colDef.colId,!1);return this.createBean(col),[col]}return[]}},__name(_a4,"ControlsColService"),_a4),GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn";function getColumnsFromTree(rootColumns){const result=[],recursiveFindColumns=__name(childColumns=>{for(let i=0;i<childColumns.length;i++){const child=childColumns[i];isColumn(child)?result.push(child):isProvidedColumnGroup(child)&&recursiveFindColumns(child.getChildren())}},"recursiveFindColumns");return recursiveFindColumns(rootColumns),result}__name(getColumnsFromTree,"getColumnsFromTree");function getWidthOfColsInList(columnList){return columnList.reduce((width,col)=>width+col.getActualWidth(),0)}__name(getWidthOfColsInList,"getWidthOfColsInList");function destroyColumnTree(context,oldTree,newTree){const oldObjectsById={};if(!oldTree)return;depthFirstOriginalTreeSearch(null,oldTree,child=>{oldObjectsById[child.getInstanceId()]=child}),newTree&&depthFirstOriginalTreeSearch(null,newTree,child=>{oldObjectsById[child.getInstanceId()]=null});const colsToDestroy=Object.values(oldObjectsById).filter(item=>item!=null);context.destroyBeans(colsToDestroy)}__name(destroyColumnTree,"destroyColumnTree");function isColumnGroupAutoCol(col){return col.getId().startsWith(GROUP_AUTO_COLUMN_ID)}__name(isColumnGroupAutoCol,"isColumnGroupAutoCol");function isColumnControlsCol(col){return col.getColId().startsWith(CONTROLS_COLUMN_ID_PREFIX)}__name(isColumnControlsCol,"isColumnControlsCol");function convertColumnTypes(type){let typeKeys=[];return type instanceof Array?type.some(a=>typeof a!="string")?_warnOnce("if colDef.type is supplied an array it should be of type 'string[]'"):typeKeys=type:typeof type=="string"?typeKeys=type.split(","):_warnOnce("colDef.type should be of type 'string' | 'string[]'"),typeKeys}__name(convertColumnTypes,"convertColumnTypes");var _a5,FrameworkEventListenerService=(_a5=class{constructor(frameworkOverrides){this.frameworkOverrides=frameworkOverrides,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(userListener){let listener=userListener;return this.frameworkOverrides.shouldWrapOutgoing&&(listener=__name(event=>{this.frameworkOverrides.wrapOutgoing(()=>userListener(event))},"listener"),this.wrappedListeners.set(userListener,listener)),listener}wrapGlobal(userListener){let listener=userListener;return this.frameworkOverrides.shouldWrapOutgoing&&(listener=__name((eventType,event)=>{this.frameworkOverrides.wrapOutgoing(()=>userListener(eventType,event))},"listener"),this.wrappedGlobalListeners.set(userListener,listener)),listener}unwrap(userListener){return this.wrappedListeners.get(userListener)??userListener}unwrapGlobal(userListener){return this.wrappedGlobalListeners.get(userListener)??userListener}},__name(_a5,"FrameworkEventListenerService"),_a5),SKIP_JS_BUILTINS=new Set(["__proto__","constructor","prototype"]);function _iterateObject(object,callback){if(object!=null){if(Array.isArray(object)){for(let i=0;i<object.length;i++)callback(i.toString(),object[i]);return}for(const[key,value]of Object.entries(object))callback(key,value)}}__name(_iterateObject,"_iterateObject");function _cloneObject(object){const copy={},keys=Object.keys(object);for(let i=0;i<keys.length;i++){if(SKIP_JS_BUILTINS.has(keys[i]))continue;const key=keys[i],value=object[key];copy[key]=value}return copy}__name(_cloneObject,"_cloneObject");function _deepCloneDefinition(object,keysToSkip){if(!object)return;const obj=object,res={};return Object.keys(obj).forEach(key=>{if(keysToSkip&&keysToSkip.indexOf(key)>=0||SKIP_JS_BUILTINS.has(key))return;const value=obj[key];_isNonNullObject(value)&&value.constructor===Object?res[key]=_deepCloneDefinition(value):res[key]=value}),res}__name(_deepCloneDefinition,"_deepCloneDefinition");function _getAllValuesInObject(obj){if(!obj)return[];const anyObject=Object;if(typeof anyObject.values=="function")return anyObject.values(obj);const ret=[];for(const key in obj)obj.hasOwnProperty(key)&&obj.propertyIsEnumerable(key)&&ret.push(obj[key]);return ret}__name(_getAllValuesInObject,"_getAllValuesInObject");function _mergeDeep(dest,source,copyUndefined=!0,makeCopyOfSimpleObjects=!1){_exists(source)&&_iterateObject(source,(key,sourceValue)=>{if(SKIP_JS_BUILTINS.has(key))return;let destValue=dest[key];destValue!==sourceValue&&(makeCopyOfSimpleObjects&&destValue==null&&sourceValue!=null&&typeof sourceValue=="object"&&sourceValue.constructor===Object&&(destValue={},dest[key]=destValue),_isNonNullObject(sourceValue)&&_isNonNullObject(destValue)&&!Array.isArray(destValue)?_mergeDeep(destValue,sourceValue,copyUndefined,makeCopyOfSimpleObjects):(copyUndefined||sourceValue!==void 0)&&(dest[key]=sourceValue))})}__name(_mergeDeep,"_mergeDeep");function _getValueUsingField(data,field,fieldContainsDots){if(!field||!data)return;if(!fieldContainsDots)return data[field];const fields=field.split(".");let currentObject=data;for(let i=0;i<fields.length;i++){if(currentObject==null)return;currentObject=currentObject[fields[i]]}return currentObject}__name(_getValueUsingField,"_getValueUsingField");function _isNonNullObject(value){return typeof value=="object"&&value!==null}__name(_isNonNullObject,"_isNonNullObject");var COL_DEF_DEFAULTS={resizable:!0,sortable:!0},instanceIdSequence=0;function getNextColInstanceId(){return instanceIdSequence++}__name(getNextColInstanceId,"getNextColInstanceId");function isColumn(col){return col instanceof AgColumn}__name(isColumn,"isColumn");var _a6,AgColumn=(_a6=class extends BeanStub{constructor(colDef,userProvidedColDef,colId,primary){super(),this.isColumn=!0,this.instanceId=getNextColInstanceId(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new LocalEventService,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.colId=colId,this.primary=primary,this.setState(colDef)}wireBeans(beans){this.columnHoverService=beans.columnHoverService}getInstanceId(){return this.instanceId}setState(colDef){colDef.sort!==void 0?(colDef.sort==="asc"||colDef.sort==="desc")&&(this.sort=colDef.sort):(colDef.initialSort==="asc"||colDef.initialSort==="desc")&&(this.sort=colDef.initialSort);const sortIndex=colDef.sortIndex,initialSortIndex=colDef.initialSortIndex;sortIndex!==void 0?sortIndex!==null&&(this.sortIndex=sortIndex):initialSortIndex!==null&&(this.sortIndex=initialSortIndex);const hide=colDef.hide,initialHide=colDef.initialHide;hide!==void 0?this.visible=!hide:this.visible=!initialHide,colDef.pinned!==void 0?this.setPinned(colDef.pinned):this.setPinned(colDef.initialPinned);const flex=colDef.flex,initialFlex=colDef.initialFlex;flex!==void 0?this.flex=flex:initialFlex!==void 0&&(this.flex=initialFlex)}setColDef(colDef,userProvidedColDef,source){this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",source))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(parent){this.parent=parent}getParent(){return this.parent}setOriginalParent(originalParent){this.originalParent=originalParent}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const suppressDotNotation=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=_exists(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!suppressDotNotation,this.tooltipFieldContainsDots=_exists(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!suppressDotNotation}initMinAndMaxWidths(){const colDef=this.colDef;this.minWidth=colDef.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=colDef.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=_exists(this.colDef.tooltipField)||_exists(this.colDef.tooltipValueGetter)||_exists(this.colDef.tooltipComponent)}resetActualWidth(source){const initialWidth=this.calculateColInitialWidth(this.colDef);this.setActualWidth(initialWidth,source,!0)}calculateColInitialWidth(colDef){let width;const colDefWidth=_attrToNumber(colDef.width),colDefInitialWidth=_attrToNumber(colDef.initialWidth);return colDefWidth!=null?width=colDefWidth:colDefInitialWidth!=null?width=colDefInitialWidth:width=200,Math.max(Math.min(width,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(colId){if(_missing(this.colDef)||_missing(this.colDef.showRowGroup))return!1;const showingAllGroups=this.colDef.showRowGroup===!0,showingThisGroup=this.colDef.showRowGroup===colId;return showingAllGroups||showingThisGroup}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(eventType,userListener){var _a253;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new FrameworkEventListenerService(this.frameworkOverrides));const listener=((_a253=this.frameworkEventListenerService)==null?void 0:_a253.wrap(userListener))??userListener;this.columnEventService.addEventListener(eventType,listener)}removeEventListener(eventType,userListener){var _a253;const listener=((_a253=this.frameworkEventListenerService)==null?void 0:_a253.unwrap(userListener))??userListener;this.columnEventService.removeEventListener(eventType,listener)}createColumnFunctionCallbackParams(rowNode){return this.gos.addGridCommonParams({node:rowNode,data:rowNode.data,column:this,colDef:this.colDef})}isSuppressNavigable(rowNode){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const params=this.createColumnFunctionCallbackParams(rowNode),userFunc=this.colDef.suppressNavigable;return userFunc(params)}return!1}isCellEditable(rowNode){if(rowNode.group){if(this.gos.get("treeData")){if(!rowNode.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(rowNode,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(rowNode){return this.isColumnFunc(rowNode,this.colDef.rowDrag)}isDndSource(rowNode){return this.isColumnFunc(rowNode,this.colDef.dndSource)}isCellCheckboxSelection(rowNode){const so=this.gos.get("rowSelection");if(so&&typeof so!="string"){const checkbox=isColumnControlsCol(this)&&_getCheckboxes(so);return this.isColumnFunc(rowNode,checkbox)}else return this.isColumnFunc(rowNode,this.colDef.checkboxSelection)}isSuppressPaste(rowNode){return this.isColumnFunc(rowNode,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(key){return this.colDef[key]??COL_DEF_DEFAULTS[key]}isColumnFunc(rowNode,value){if(typeof value=="boolean")return value;if(typeof value=="function"){const params=this.createColumnFunctionCallbackParams(rowNode);return value(params)}return!1}setHighlighted(highlighted){this.highlighted!==highlighted&&(this.highlighted=highlighted,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(moving,source){this.moving=moving,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",source))}createColumnEvent(type,source){return this.gos.addGridCommonParams({type,column:this,columns:[this],source})}isMoving(){return this.moving}getSort(){return this.sort}setSort(sort,source){this.sort!==sort&&(this.sort=sort,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",source))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return _missing(this.sort)}isSorting(){return _exists(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(sortOrder){this.sortIndex=sortOrder,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(visible,source){this.menuVisible!==visible&&(this.menuVisible=visible,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",source)))}isMenuVisible(){return this.menuVisible}setAggFunc(aggFunc){this.aggFunc=aggFunc,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(left,source){this.oldLeft=this.left,this.left!==left&&(this.left=left,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",source)))}isFilterActive(){return this.filterActive}setFilterActive(active,source,additionalEventAttributes){this.filterActive!==active&&(this.filterActive=active,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",source)));const filterChangedEvent=this.createColumnEvent("filterChanged",source);additionalEventAttributes&&_mergeDeep(filterChangedEvent,additionalEventAttributes),this.columnEventService.dispatchEvent(filterChangedEvent)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(pinned){pinned===!0||pinned==="left"?this.pinned="left":pinned==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(firstRightPinned,source){this.firstRightPinned!==firstRightPinned&&(this.firstRightPinned=firstRightPinned,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",source)))}setLastLeftPinned(lastLeftPinned,source){this.lastLeftPinned!==lastLeftPinned&&(this.lastLeftPinned=lastLeftPinned,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",source)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(visible,source){const newValue=visible===!0;this.visible!==newValue&&(this.visible=newValue,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",source))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const colDef=this.getColDef();return!colDef.suppressSpanHeaderHeight&&!colDef.autoHeaderHeight}getColumnGroupPaddingInfo(){let parent=this.getParent();if(!parent||!parent.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const numberOfParents=parent.getPaddingLevel()+1;let isSpanningTotal=!0;for(;parent;){if(!parent.isPadding()){isSpanningTotal=!1;break}parent=parent.getParent()}return{numberOfParents,isSpanningTotal}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(height){const changed=height!==this.autoHeaderHeight;return this.autoHeaderHeight=height,changed}createBaseColDefParams(rowNode){return this.gos.addGridCommonParams({node:rowNode,data:rowNode.data,colDef:this.colDef,column:this})}getColSpan(rowNode){if(_missing(this.colDef.colSpan))return 1;const params=this.createBaseColDefParams(rowNode),colSpan=this.colDef.colSpan(params);return Math.max(colSpan,1)}getRowSpan(rowNode){if(_missing(this.colDef.rowSpan))return 1;const params=this.createBaseColDefParams(rowNode),rowSpan=this.colDef.rowSpan(params);return Math.max(rowSpan,1)}setActualWidth(actualWidth,source,silent=!1){actualWidth=Math.max(actualWidth,this.minWidth),actualWidth=Math.min(actualWidth,this.maxWidth),this.actualWidth!==actualWidth&&(this.actualWidth=actualWidth,this.flex&&source!=="flex"&&source!=="gridInitializing"&&(this.flex=null),silent||this.fireColumnWidthChangedEvent(source)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(source){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",source))}isGreaterThanMax(width){return width>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(flex){this.flex!==flex&&(this.flex=flex),this.dispatchStateUpdatedEvent("flex")}setMinimum(source){this.setActualWidth(this.minWidth,source)}setRowGroupActive(rowGroup,source){this.rowGroupActive!==rowGroup&&(this.rowGroupActive=rowGroup,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",source))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(pivot,source){this.pivotActive!==pivot&&(this.pivotActive=pivot,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",source))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(value,source){this.aggregationActive!==value&&(this.aggregationActive=value,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",source)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(key){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key})}},__name(_a6,"AgColumn"),_a6),DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},_a7,ColumnKeyCreator=(_a7=class{constructor(){this.existingKeys={}}addExistingKeys(keys){for(let i=0;i<keys.length;i++)this.existingKeys[keys[i]]=!0}getUniqueKey(colId,colField){colId=_toStringOrNull(colId);let count=0;for(;;){let idToTry;if(colId?(idToTry=colId,count!==0&&(idToTry+="_"+count)):colField?(idToTry=colField,count!==0&&(idToTry+="_"+count)):idToTry=count,!this.existingKeys[idToTry])return this.existingKeys[idToTry]=!0,String(idToTry);count++}}},__name(_a7,"ColumnKeyCreator"),_a7),_a8,ColumnFactory=(_a8=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(beans){this.dataTypeService=beans.dataTypeService}createColumnTree(defs,primaryColumns,existingTree,source){const columnKeyCreator=new ColumnKeyCreator,{existingCols,existingGroups,existingColKeys}=this.extractExistingTreeData(existingTree);columnKeyCreator.addExistingKeys(existingColKeys);const unbalancedTree=this.recursivelyCreateColumns(defs,0,primaryColumns,existingCols,columnKeyCreator,existingGroups,source),treeDept=this.findMaxDept(unbalancedTree,0),columnTree=this.balanceColumnTree(unbalancedTree,0,treeDept,columnKeyCreator);return depthFirstOriginalTreeSearch(null,columnTree,__name((child,parent)=>{isProvidedColumnGroup(child)&&child.setupExpandable(),child.setOriginalParent(parent)},"deptFirstCallback")),{columnTree,treeDept}}extractExistingTreeData(existingTree){const existingCols=[],existingGroups=[],existingColKeys=[];return existingTree&&depthFirstOriginalTreeSearch(null,existingTree,item=>{if(isProvidedColumnGroup(item)){const group=item;existingGroups.push(group)}else{const col=item;existingColKeys.push(col.getId()),existingCols.push(col)}}),{existingCols,existingGroups,existingColKeys}}balanceTreeForAutoCols(autoCols,liveTree){const tree=[],dept=this.findDepth(liveTree);return autoCols.forEach(col=>{let nextChild=col;for(let i=dept-1;i>=0;i--){const autoGroup=new AgProvidedColumnGroup(null,`FAKE_PATH_${col.getId()}}_${i}`,!0,i);this.createBean(autoGroup),autoGroup.setChildren([nextChild]),nextChild.setOriginalParent(autoGroup),nextChild=autoGroup}dept===0&&col.setOriginalParent(null),tree.push(nextChild)}),[tree,dept]}findDepth(balancedColumnTree){let dept=0,pointer=balancedColumnTree;for(;pointer&&pointer[0]&&isProvidedColumnGroup(pointer[0]);)dept++,pointer=pointer[0].getChildren();return dept}balanceColumnTree(unbalancedTree,currentDept,columnDept,columnKeyCreator){const result=[];for(let i=0;i<unbalancedTree.length;i++){const child=unbalancedTree[i];if(isProvidedColumnGroup(child)){const originalGroup=child,newChildren=this.balanceColumnTree(originalGroup.getChildren(),currentDept+1,columnDept,columnKeyCreator);originalGroup.setChildren(newChildren),result.push(originalGroup)}else{let firstPaddedGroup,currentPaddedGroup;for(let j=columnDept-1;j>=currentDept;j--){const newColId=columnKeyCreator.getUniqueKey(null,null),colGroupDefMerged=this.createMergedColGroupDef(null),paddedGroup=new AgProvidedColumnGroup(colGroupDefMerged,newColId,!0,currentDept);this.createBean(paddedGroup),currentPaddedGroup&&currentPaddedGroup.setChildren([paddedGroup]),currentPaddedGroup=paddedGroup,firstPaddedGroup||(firstPaddedGroup=currentPaddedGroup)}if(firstPaddedGroup&&currentPaddedGroup)if(result.push(firstPaddedGroup),unbalancedTree.some(leaf=>isProvidedColumnGroup(leaf))){currentPaddedGroup.setChildren([child]);continue}else{currentPaddedGroup.setChildren(unbalancedTree);break}result.push(child)}}return result}findMaxDept(treeChildren,dept){let maxDeptThisLevel=dept;for(let i=0;i<treeChildren.length;i++){const abstractColumn=treeChildren[i];if(isProvidedColumnGroup(abstractColumn)){const originalGroup=abstractColumn,newDept=this.findMaxDept(originalGroup.getChildren(),dept+1);maxDeptThisLevel<newDept&&(maxDeptThisLevel=newDept)}}return maxDeptThisLevel}recursivelyCreateColumns(defs,level,primaryColumns,existingColsCopy,columnKeyCreator,existingGroups,source){if(!defs)return[];const result=new Array(defs.length);for(let i=0;i<result.length;i++){const def=defs[i];this.isColumnGroup(def)?result[i]=this.createColumnGroup(primaryColumns,def,level,existingColsCopy,columnKeyCreator,existingGroups,source):result[i]=this.createColumn(primaryColumns,def,existingColsCopy,columnKeyCreator,source)}return result}createColumnGroup(primaryColumns,colGroupDef,level,existingColumns,columnKeyCreator,existingGroups,source){const colGroupDefMerged=this.createMergedColGroupDef(colGroupDef),groupId=columnKeyCreator.getUniqueKey(colGroupDefMerged.groupId||null,null),providedGroup=new AgProvidedColumnGroup(colGroupDefMerged,groupId,!1,level);this.createBean(providedGroup);const existingGroupAndIndex=this.findExistingGroup(colGroupDef,existingGroups);existingGroupAndIndex&&existingGroups.splice(existingGroupAndIndex.idx,1);const existingGroup=existingGroupAndIndex==null?void 0:existingGroupAndIndex.group;existingGroup&&providedGroup.setExpanded(existingGroup.isExpanded());const children=this.recursivelyCreateColumns(colGroupDefMerged.children,level+1,primaryColumns,existingColumns,columnKeyCreator,existingGroups,source);return providedGroup.setChildren(children),providedGroup}createMergedColGroupDef(colGroupDef){const colGroupDefMerged={};return Object.assign(colGroupDefMerged,this.gos.get("defaultColGroupDef")),Object.assign(colGroupDefMerged,colGroupDef),colGroupDefMerged}createColumn(primaryColumns,colDef,existingColsCopy,columnKeyCreator,source){var _a253;const existingColAndIndex=this.findExistingColumn(colDef,existingColsCopy);existingColAndIndex&&(existingColsCopy==null||existingColsCopy.splice(existingColAndIndex.idx,1));let column=existingColAndIndex==null?void 0:existingColAndIndex.column;if(column){const colDefMerged=this.addColumnDefaultAndTypes(colDef,column.getColId());column.setColDef(colDefMerged,colDef,source),this.applyColumnState(column,colDefMerged,source)}else{const colId=columnKeyCreator.getUniqueKey(colDef.colId,colDef.field),colDefMerged=this.addColumnDefaultAndTypes(colDef,colId);column=new AgColumn(colDefMerged,colDef,colId,primaryColumns),this.createBean(column)}return(_a253=this.dataTypeService)==null||_a253.addColumnListeners(column),column}applyColumnState(column,colDef,source){const flex=_attrToNumber(colDef.flex);if(flex!==void 0&&column.setFlex(flex),column.getFlex()<=0){const width=_attrToNumber(colDef.width);if(width!=null)column.setActualWidth(width,source);else{const widthBeforeUpdate=column.getActualWidth();column.setActualWidth(widthBeforeUpdate,source)}}colDef.sort!==void 0&&(colDef.sort=="asc"||colDef.sort=="desc"?column.setSort(colDef.sort,source):column.setSort(void 0,source));const sortIndex=_attrToNumber(colDef.sortIndex);sortIndex!==void 0&&column.setSortIndex(sortIndex);const hide=_attrToBoolean(colDef.hide);hide!==void 0&&column.setVisible(!hide,source),colDef.pinned!==void 0&&column.setPinned(colDef.pinned)}findExistingColumn(newColDef,existingColsCopy){if(existingColsCopy)for(let i=0;i<existingColsCopy.length;i++){const def=existingColsCopy[i].getUserProvidedColDef();if(!def)continue;if(newColDef.colId!=null){if(existingColsCopy[i].getId()===newColDef.colId)return{idx:i,column:existingColsCopy[i]};continue}if(newColDef.field!=null){if(def.field===newColDef.field)return{idx:i,column:existingColsCopy[i]};continue}if(def===newColDef)return{idx:i,column:existingColsCopy[i]}}}findExistingGroup(newGroupDef,existingGroups){if(newGroupDef.groupId!=null)for(let i=0;i<existingGroups.length;i++){const existingGroup=existingGroups[i];if(existingGroup.getColGroupDef()&&existingGroup.getId()===newGroupDef.groupId)return{idx:i,group:existingGroup}}}addColumnDefaultAndTypes(colDef,colId){var _a253;const res={},defaultColDef=this.gos.get("defaultColDef");_mergeDeep(res,defaultColDef,!1,!0);const columnType=this.updateColDefAndGetColumnType(res,colDef,colId);columnType&&this.assignColumnTypes(columnType,res),_mergeDeep(res,colDef,!1,!0);const autoGroupColDef=this.gos.get("autoGroupColumnDef"),isSortingCoupled=_isColumnsSortingCoupledToGroup(this.gos);return colDef.rowGroup&&autoGroupColDef&&isSortingCoupled&&_mergeDeep(res,{sort:autoGroupColDef.sort,initialSort:autoGroupColDef.initialSort},!1,!0),(_a253=this.dataTypeService)==null||_a253.validateColDef(res),res}updateColDefAndGetColumnType(colDef,userColDef,colId){var _a253;const dataTypeDefinitionColumnType=(_a253=this.dataTypeService)==null?void 0:_a253.updateColDefAndGetColumnType(colDef,userColDef,colId),columnTypes=userColDef.type??dataTypeDefinitionColumnType??colDef.type;return colDef.type=columnTypes,columnTypes?convertColumnTypes(columnTypes):void 0}assignColumnTypes(typeKeys,colDefMerged){if(!typeKeys.length)return;const allColumnTypes=Object.assign({},DefaultColumnTypes),userTypes=this.gos.get("columnTypes")||{};_iterateObject(userTypes,(key,value)=>{key in allColumnTypes?_warnOnce(`the column type '${key}' is a default column type and cannot be overridden.`):(value.type&&_warnOnce("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),allColumnTypes[key]=value)}),typeKeys.forEach(t=>{const typeColDef=allColumnTypes[t.trim()];typeColDef?_mergeDeep(colDefMerged,typeColDef,!1,!0):_warnOnce("colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(abstractColDef){return abstractColDef.children!==void 0}},__name(_a8,"ColumnFactory"),_a8);function depthFirstOriginalTreeSearch(parent,tree,callback){if(tree)for(let i=0;i<tree.length;i++){const child=tree[i];isProvidedColumnGroup(child)&&depthFirstOriginalTreeSearch(child,child.getChildren(),callback),callback(child,parent)}}__name(depthFirstOriginalTreeSearch,"depthFirstOriginalTreeSearch");var _a9,ColumnModel=(_a9=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(beans){this.context=beans.context,this.ctrlsService=beans.ctrlsService,this.columnFactory=beans.columnFactory,this.columnSizeService=beans.columnSizeService,this.visibleColsService=beans.visibleColsService,this.columnViewportService=beans.columnViewportService,this.pivotResultColsService=beans.pivotResultColsService,this.columnAnimationService=beans.columnAnimationService,this.autoColService=beans.autoColService,this.controlsColService=beans.controlsColService,this.valueCache=beans.valueCache,this.columnDefFactory=beans.columnDefFactory,this.columnApplyStateService=beans.columnApplyStateService,this.columnGroupStateService=beans.columnGroupStateService,this.eventDispatcher=beans.columnEventDispatcher,this.columnMoveService=beans.columnMoveService,this.columnAutosizeService=beans.columnAutosizeService,this.funcColsService=beans.funcColsService,this.quickFilterService=beans.quickFilterService,this.showRowGroupColsService=beans.showRowGroupColsService,this.environment=beans.environment}postConstruct(){const pivotMode=this.gos.get("pivotMode");this.isPivotSettingAllowed(pivotMode)&&(this.pivotMode=pivotMode),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],event=>this.refreshAll(convertSourceType(event.source))),this.addManagedPropertyListener("rowSelection",event=>{this.onSelectionOptionsChanged(event.currentValue,event.previousValue,convertSourceType(event.source))}),this.addManagedPropertyListener("autoGroupColumnDef",event=>this.onAutoGroupColumnDefChanged(convertSourceType(event.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],event=>this.recreateColumnDefs(convertSourceType(event.source))),this.addManagedPropertyListener("pivotMode",event=>this.setPivotMode(this.gos.get("pivotMode"),convertSourceType(event.source))),this.addManagedEventListeners({firstDataRendered:__name(()=>this.onFirstDataRendered(),"firstDataRendered")})}createColsFromColDefs(source){var _a253,_b,_c;const dispatchEventsFunc=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(source):void 0;this.valueCache.expire();const oldCols=(_a253=this.colDefCols)==null?void 0:_a253.list,oldTree=(_b=this.colDefCols)==null?void 0:_b.tree,newTree=this.columnFactory.createColumnTree(this.colDefs,!0,oldTree,source);destroyColumnTree(this.context,(_c=this.colDefCols)==null?void 0:_c.tree,newTree.columnTree);const tree=newTree.columnTree,treeDepth=newTree.treeDept,list=getColumnsFromTree(tree),map={};list.forEach(col=>map[col.getId()]=col),this.colDefCols={tree,treeDepth,list,map},this.funcColsService.extractCols(source,oldCols),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(source),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(source),dispatchEventsFunc&&(this.changeEventsDispatching=!0,dispatchEventsFunc(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(source),source==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(newColDefs){var _a253,_b,_c;if(!this.colDefCols)return;const prevColTree=(_a253=this.cols)==null?void 0:_a253.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const shouldSortNewColDefs=_shouldMaintainColumnOrder(this.gos,this.showingPivotResult);(!newColDefs||shouldSortNewColDefs)&&this.restoreColOrder(),this.positionLockedCols(),(_b=this.showRowGroupColsService)==null||_b.refresh(),(_c=this.quickFilterService)==null||_c.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!_areEqual(prevColTree,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const pivotResultCols=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=pivotResultCols!=null,pivotResultCols){const{map,list,tree,treeDepth}=pivotResultCols;this.cols={list:list.slice(),map:{...map},tree:tree.slice(),treeDepth},pivotResultCols.list.some(col=>{var _a253;return((_a253=this.cols)==null?void 0:_a253.map[col.getColId()])!==void 0})||(this.lastPivotOrder=null)}else{const{map,list,tree,treeDepth}=this.colDefCols;this.cols={list:list.slice(),map:{...map},tree:tree.slice(),treeDepth}}}getColsToShow(){const showAutoGroupAndValuesOnly=this.isPivotMode()&&!this.isShowingPivotResult(),valueColumns=this.funcColsService.getValueColumns();return this.cols.list.filter(col=>{const isAutoGroupCol=isColumnGroupAutoCol(col);if(showAutoGroupAndValuesOnly){const isValueCol=valueColumns&&_includes(valueColumns,col);return isAutoGroupCol||isValueCol}else return isAutoGroupCol||col.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),updateColsMap(this.cols))}createAutoCols(){var _a253,_b;const groupFullWidthRow=_isGroupUseEntireRow(this.gos,this.pivotMode),suppressAutoColumn=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),rowGroupCols=this.funcColsService.getRowGroupColumns(),noAutoCols=!(rowGroupCols.length>0||this.gos.get("treeData"))||suppressAutoColumn||groupFullWidthRow,destroyPrevious=__name(()=>{this.autoCols&&(destroyColumnTree(this.context,this.autoCols.tree),this.autoCols=null)},"destroyPrevious");if(noAutoCols||!this.autoColService){destroyPrevious();return}const list=this.autoColService.createAutoCols(rowGroupCols)??[],autoColsSame=areColIdsEqual(list,((_a253=this.autoCols)==null?void 0:_a253.list)||null),newTreeDepth=this.cols.treeDepth,treeDeptSame=(this.autoCols?this.autoCols.treeDepth:-1)==newTreeDepth;if(autoColsSame&&treeDeptSame)return;destroyPrevious();const[tree,treeDepth]=this.columnFactory.balanceTreeForAutoCols(list,(_b=this.cols)==null?void 0:_b.tree);this.autoCols={list,tree,treeDepth,map:{}};const putAutocolsFirstInList=__name(cols=>{if(!cols)return null;const colsFiltered=cols.filter(col=>!isColumnGroupAutoCol(col));return[...list,...colsFiltered]},"putAutocolsFirstInList");this.lastOrder=putAutocolsFirstInList(this.lastOrder),this.lastPivotOrder=putAutocolsFirstInList(this.lastPivotOrder)}createControlsCols(){var _a253,_b,_c,_d;destroyColumnTree(this.context,(_a253=this.controlsCols)==null?void 0:_a253.tree),this.controlsCols=null;const list=((_b=this.controlsColService)==null?void 0:_b.createControlsCols())??[],[tree,treeDepth]=this.columnFactory.balanceTreeForAutoCols(list,this.cols.tree);this.controlsCols={list,tree,treeDepth,map:{}};function sortControlsColsFirst(a,b){const isAControl=isColumnControlsCol(a),isBControl=isColumnControlsCol(b);return isAControl&&!isBControl?-1:!isAControl&&isBControl?1:0}__name(sortControlsColsFirst,"sortControlsColsFirst"),(_c=this.lastOrder)==null||_c.sort(sortControlsColsFirst),(_d=this.lastPivotOrder)==null||_d.sort(sortControlsColsFirst)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),updateColsMap(this.cols))}refreshAll(source){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(source))}setColsVisible(keys,visible=!1,source){this.columnApplyStateService.applyColumnState({state:keys.map(key=>({colId:typeof key=="string"?key:key.getColId(),hide:!visible}))},source)}setColsPinned(keys,pinned,source){if(!this.cols||_missingOrEmpty(keys))return;if(_isDomLayout(this.gos,"print")){_warnOnce("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let actualPinned;pinned===!0||pinned==="left"?actualPinned="left":pinned==="right"?actualPinned="right":actualPinned=null;const updatedCols=[];keys.forEach(key=>{if(!key)return;const column=this.getCol(key);column&&column.getPinned()!==actualPinned&&(column.setPinned(actualPinned),updatedCols.push(column))}),updatedCols.length&&(this.visibleColsService.refresh(source),this.eventDispatcher.columnPinned(updatedCols,source)),this.columnAnimationService.finish()}setColumnGroupOpened(key,newValue,source){let keyAsString;isProvidedColumnGroup(key)?keyAsString=key.getId():keyAsString=key||"",this.columnGroupStateService.setColumnGroupState([{groupId:keyAsString,open:newValue}],source)}getProvidedColGroup(key){var _a253;let res=null;return depthFirstOriginalTreeSearch(null,(_a253=this.cols)==null?void 0:_a253.tree,node=>{isProvidedColumnGroup(node)&&node.getId()===key&&(res=node)}),res}isColGroupLocked(column){const groupLockGroupColumns=this.gos.get("groupLockGroupColumns");if(!column.isRowGroupActive()||groupLockGroupColumns===0)return!1;if(groupLockGroupColumns===-1)return!0;const colIndex=this.funcColsService.getRowGroupColumns().findIndex(groupCol=>groupCol.getColId()===column.getColId());return groupLockGroupColumns>colIndex}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(col=>col.isVisible()&&col.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,_isClientSideRowModel(this.gos)||_isServerSideRowModel(this.gos)||_warnOnce("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){const lastOrder=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!lastOrder)return;const lastOrderMapped=new Map(lastOrder.map((col,index)=>[col,index]));if(!this.cols.list.some(col=>lastOrderMapped.has(col)))return;const colsMap=new Map(this.cols.list.map(col=>[col,!0])),lastOrderFiltered=lastOrder.filter(col=>colsMap.has(col)),lastOrderFilteredMap=new Map(lastOrderFiltered.map(col=>[col,!0])),missingFromLastOrder=this.cols.list.filter(col=>!lastOrderFilteredMap.has(col)),res=lastOrderFiltered.slice();missingFromLastOrder.forEach(newCol=>{let parent=newCol.getOriginalParent();if(!parent){res.push(newCol);return}const siblings=[];for(;!siblings.length&&parent;)parent.getLeafColumns().forEach(leafCol=>{const presentInNewCols=res.indexOf(leafCol)>=0,notYetInSiblings=siblings.indexOf(leafCol)<0;presentInNewCols&&notYetInSiblings&&siblings.push(leafCol)}),parent=parent.getOriginalParent();if(!siblings.length){res.push(newCol);return}const indexes=siblings.map(col=>res.indexOf(col)),lastIndex=Math.max(...indexes);_insertIntoArray(res,newCol,lastIndex+1)}),this.cols.list=res}sortColsLikeKeys(colIds){if(this.cols==null)return;let newOrder=[];const processedColIds={};colIds.forEach(colId=>{if(processedColIds[colId])return;const col=this.cols.map[colId];col&&(newOrder.push(col),processedColIds[colId]=!0)});let autoGroupInsertIndex=0;if(this.cols.list.forEach(col=>{const colId=col.getColId();if(processedColIds[colId]!=null)return;colId.startsWith(GROUP_AUTO_COLUMN_ID)?_insertIntoArray(newOrder,col,autoGroupInsertIndex++):newOrder.push(col)}),newOrder=this.columnMoveService.placeLockedColumns(newOrder),!this.columnMoveService.doesMovePassMarryChildren(newOrder)){_warnOnce("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=newOrder}sortColsLikeCols(cols){!cols||cols.length<=1||cols.filter(c=>this.cols.list.indexOf(c)<0).length>0||cols.sort((a,b)=>{const indexA=this.cols.list.indexOf(a),indexB=this.cols.list.indexOf(b);return indexA-indexB})}resetColDefIntoCol(column,source){const userColDef=column.getUserProvidedColDef();if(!userColDef)return!1;const newColDef=this.columnFactory.addColumnDefaultAndTypes(userColDef,column.getColId());return column.setColDef(newColDef,userColDef,source),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(resizeOperation=>resizeOperation()),this.resizeOperationQueue=[]}pushResizeOperation(func){this.resizeOperationQueue.push(func)}moveInCols(movedColumns,toIndex,source){var _a253;_moveInArray((_a253=this.cols)==null?void 0:_a253.list,movedColumns,toIndex),this.visibleColsService.refresh(source)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){var _a253,_b;this.showingPivotResult?this.lastPivotOrder=(_a253=this.cols)==null?void 0:_a253.list:this.lastOrder=(_b=this.cols)==null?void 0:_b.list}getColumnDefs(){if(!this.colDefCols)return;const cols=this.colDefCols.list.slice();this.showingPivotResult?cols.sort((a,b)=>this.lastOrder.indexOf(a)-this.lastOrder.indexOf(b)):this.lastOrder&&cols.sort((a,b)=>this.cols.list.indexOf(a)-this.cols.list.indexOf(b));const rowGroupColumns=this.funcColsService.getRowGroupColumns(),pivotColumns=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(cols,rowGroupColumns,pivotColumns)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){var _a253;return((_a253=this.colDefCols)==null?void 0:_a253.treeDepth)>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(col=>col.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(pivotMode,source){pivotMode===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=pivotMode,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(source),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(pivot){return pivot&&this.gos.get("treeData")?(_warnOnce("Pivot mode not available with treeData."),!1):!0}isPivotActive(){const pivotColumns=this.funcColsService.getPivotColumns();return this.pivotMode&&!_missingOrEmpty(pivotColumns)}recreateColumnDefs(source){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,source),this.createColsFromColDefs(source))}setColumnDefs(columnDefs,source){this.colDefs=columnDefs,this.createColsFromColDefs(source)}destroy(){var _a253,_b,_c;destroyColumnTree(this.context,(_a253=this.colDefCols)==null?void 0:_a253.tree),destroyColumnTree(this.context,(_b=this.autoCols)==null?void 0:_b.tree),destroyColumnTree(this.context,(_c=this.controlsCols)==null?void 0:_c.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){var _a253;return(_a253=this.colDefCols)!=null&&_a253.list?this.colDefCols.list:null}getCols(){var _a253;return((_a253=this.cols)==null?void 0:_a253.list)??[]}getAllCols(){var _a253,_b,_c;const pivotResultCols=this.pivotResultColsService.getPivotResultCols(),pivotResultColsList=pivotResultCols==null?void 0:pivotResultCols.list;return[((_a253=this.colDefCols)==null?void 0:_a253.list)??[],((_b=this.autoCols)==null?void 0:_b.list)??[],((_c=this.controlsCols)==null?void 0:_c.list)??[],pivotResultColsList??[]].flat()}getColsForKeys(keys){return keys?keys.map(key=>this.getCol(key)).filter(col=>col!=null):[]}getColDefCol(key){var _a253;return(_a253=this.colDefCols)!=null&&_a253.list?this.getColFromCollection(key,this.colDefCols):null}getCol(key){return key==null?null:this.getColFromCollection(key,this.cols)}getColFromCollection(key,cols){if(cols==null)return null;const{map,list}=cols;if(typeof key=="string"&&map[key])return map[key];for(let i=0;i<list.length;i++)if(columnsMatch(list[i],key))return list[i];return this.getAutoCol(key)}getAutoCol(key){var _a253;return((_a253=this.autoCols)==null?void 0:_a253.list.find(groupCol=>columnsMatch(groupCol,key)))??null}getAutoCols(){var _a253;return((_a253=this.autoCols)==null?void 0:_a253.list)??null}setColHeaderHeight(col,height){col.setAutoHeaderHeight(height)&&(col.isColumn?this.eventDispatcher.headerHeight(col):this.eventDispatcher.groupHeaderHeight(col))}getGroupRowsHeight(){const heights=[],headerRowContainerCtrls=this.ctrlsService.getHeaderRowContainerCtrls();for(const headerRowContainerCtrl of headerRowContainerCtrls){if(!headerRowContainerCtrl)continue;const groupRowCount=headerRowContainerCtrl.getGroupRowCount()||0;for(let i=0;i<groupRowCount;i++){const headerRowCtrl=headerRowContainerCtrl.getGroupRowCtrlAtIndex(i),currentHeightAtPos=heights[i];if(headerRowCtrl){const newHeight=this.getColumnGroupHeaderRowHeight(headerRowCtrl);(currentHeightAtPos==null||newHeight>currentHeightAtPos)&&(heights[i]=newHeight)}}}return heights}getColumnGroupHeaderRowHeight(headerRowCtrl){const defaultHeight=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let displayedHeights=0;const headerRowCellCtrls=headerRowCtrl.getHeaderCtrls();for(const headerCellCtrl of headerRowCellCtrls){const column=headerCellCtrl.getColumn();if(column.isAutoHeaderHeight()){const height=column.getAutoHeaderHeight();height!=null&&height>displayedHeights&&(displayedHeights=height)}}return Math.max(defaultHeight,displayedHeights)}getColumnHeaderRowHeight(){const defaultHeight=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),displayedHeights=this.visibleColsService.getAllCols().filter(col=>col.isAutoHeaderHeight()).map(col=>col.getAutoHeaderHeight()||0);return Math.max(defaultHeight,...displayedHeights)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const autoSizeStrategy=this.gos.get("autoSizeStrategy");if((autoSizeStrategy==null?void 0:autoSizeStrategy.type)!=="fitCellContents")return;const{colIds:columns,skipHeader}=autoSizeStrategy;setTimeout(()=>{columns?this.columnAutosizeService.autoSizeCols({colKeys:columns,skipHeader,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",skipHeader)})}onAutoGroupColumnDefChanged(source){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,source)}onSelectionOptionsChanged(current,prev,source){if(typeof current=="string"||typeof prev=="string")return;const prevCheckbox=prev?_getCheckboxes(prev):void 0,currCheckbox=current?_getCheckboxes(current):void 0,checkboxHasChanged=prevCheckbox!==currCheckbox,prevHeaderCheckbox=prev?_getHeaderCheckbox(prev):void 0,currHeaderCheckbox=current?_getHeaderCheckbox(current):void 0;(checkboxHasChanged||prevHeaderCheckbox!==currHeaderCheckbox)&&this.refreshAll(source)}},__name(_a9,"ColumnModel"),_a9);function convertSourceType(source){return source==="gridOptionsUpdated"?"gridOptionsChanged":source}__name(convertSourceType,"convertSourceType");function updateColsMap(cols){cols.map={},cols.list.forEach(col=>cols.map[col.getId()]=col)}__name(updateColsMap,"updateColsMap");function columnsMatch(column,key){const columnMatches=column===key,colDefMatches=column.getColDef()===key,idMatches=column.getColId()==key;return columnMatches||colDefMatches||idMatches}__name(columnsMatch,"columnsMatch");function areColIdsEqual(colsA,colsB){return _areEqual(colsA,colsB,(a,b)=>a.getColId()===b.getColId())}__name(areColIdsEqual,"areColIdsEqual");var _a10,ColumnAutosizeService=(_a10=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(beans){this.columnModel=beans.columnModel,this.visibleColsService=beans.visibleColsService,this.animationFrameService=beans.animationFrameService,this.autoWidthCalculator=beans.autoWidthCalculator,this.eventDispatcher=beans.columnEventDispatcher,this.ctrlsService=beans.ctrlsService,this.renderStatusService=beans.renderStatusService}autoSizeCols(params){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(params));return}const{colKeys,skipHeader,skipHeaderGroups,stopAtGroup,source="api"}=params;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(params));return}this.timesDelayed=0;const columnsAutosized=[];let changesThisTimeAround=-1;const shouldSkipHeader=skipHeader??this.gos.get("skipHeaderOnAutoSize"),shouldSkipHeaderGroups=skipHeaderGroups??shouldSkipHeader;for(;changesThisTimeAround!==0;){changesThisTimeAround=0;const updatedColumns=[];colKeys.forEach(key=>{if(!key)return;const column=this.columnModel.getCol(key);if(!column||columnsAutosized.indexOf(column)>=0)return;const preferredWidth=this.autoWidthCalculator.getPreferredWidthForColumn(column,shouldSkipHeader);if(preferredWidth>0){const newWidth=this.normaliseColumnWidth(column,preferredWidth);column.setActualWidth(newWidth,source),columnsAutosized.push(column),changesThisTimeAround++}updatedColumns.push(column)}),updatedColumns.length&&this.visibleColsService.refresh(source)}shouldSkipHeaderGroups||this.autoSizeColumnGroupsByColumns(colKeys,source,stopAtGroup),this.eventDispatcher.columnResized(columnsAutosized,!0,"autosizeColumns")}autoSizeColumn(key,source,skipHeader){key&&this.autoSizeCols({colKeys:[key],skipHeader,skipHeaderGroups:!0,source})}autoSizeColumnGroupsByColumns(keys,source,stopAtGroup){const columnGroups=new Set;this.columnModel.getColsForKeys(keys).forEach(col=>{let parent=col.getParent();for(;parent&&parent!=stopAtGroup;)parent.isPadding()||columnGroups.add(parent),parent=parent.getParent()});let headerGroupCtrl;const resizedColumns=[];for(const columnGroup of columnGroups){for(const headerContainerCtrl of this.ctrlsService.getHeaderRowContainerCtrls())if(headerGroupCtrl=headerContainerCtrl.getHeaderCtrlForColumn(columnGroup),headerGroupCtrl)break;headerGroupCtrl&&headerGroupCtrl.resizeLeafColumnsToFit(source)}return resizedColumns}autoSizeAllColumns(source,skipHeader){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(source,skipHeader));return}const allDisplayedColumns=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:allDisplayedColumns,skipHeader,source})}normaliseColumnWidth(column,newWidth){const minWidth=column.getMinWidth();newWidth<minWidth&&(newWidth=minWidth);const maxWidth=column.getMaxWidth();return column.isGreaterThanMax(newWidth)&&(newWidth=maxWidth),newWidth}},__name(_a10,"ColumnAutosizeService"),_a10),_a11,FuncColsService=(_a11=class extends BeanStub{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(beans){this.columnModel=beans.columnModel,this.eventDispatcher=beans.columnEventDispatcher,this.aggFuncService=beans.aggFuncService,this.visibleColsService=beans.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:__name(column=>this.rowGroupCols.push(column),"addGroupCol"),removeGroupCol:__name(column=>_removeFromArray(this.rowGroupCols,column),"removeGroupCol"),addPivotCol:__name(column=>this.pivotCols.push(column),"addPivotCol"),removePivotCol:__name(column=>_removeFromArray(this.pivotCols,column),"removePivotCol"),addValueCol:__name(column=>this.valueCols.push(column),"addValueCol"),removeValueCol:__name(column=>_removeFromArray(this.valueCols,column),"removeValueCol")}}getSourceColumnsForGroupColumn(groupCol){const sourceColumnId=groupCol.getColDef().showRowGroup;if(!sourceColumnId)return null;if(sourceColumnId===!0)return this.rowGroupCols.slice(0);const column=this.columnModel.getColDefCol(sourceColumnId);return column?[column]:null}sortRowGroupColumns(compareFn){this.rowGroupCols.sort(compareFn)}sortPivotColumns(compareFn){this.pivotCols.sort(compareFn)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return _missingOrEmpty(this.rowGroupCols)}setColumnAggFunc(key,aggFunc,source){if(!key)return;const column=this.columnModel.getColDefCol(key);column&&(column.setAggFunc(aggFunc),this.eventDispatcher.columnChanged("columnValueChanged",[column],source))}setRowGroupColumns(colKeys,source){this.setColList(colKeys,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(added,column)=>this.setRowGroupActive(added,column,source),source)}setRowGroupActive(active,column,source){active!==column.isRowGroupActive()&&(column.setRowGroupActive(active,source),active&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([column],!1,source),!active&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([column],!0,source))}addRowGroupColumns(keys,source){this.updateColList(keys,this.rowGroupCols,!0,!0,column=>this.setRowGroupActive(!0,column,source),"columnRowGroupChanged",source)}removeRowGroupColumns(keys,source){this.updateColList(keys,this.rowGroupCols,!1,!0,column=>this.setRowGroupActive(!1,column,source),"columnRowGroupChanged",source)}addPivotColumns(keys,source){this.updateColList(keys,this.pivotCols,!0,!1,column=>column.setPivotActive(!0,source),"columnPivotChanged",source)}setPivotColumns(colKeys,source){this.setColList(colKeys,this.pivotCols,"columnPivotChanged",!0,!1,(added,column)=>{column.setPivotActive(added,source)},source)}removePivotColumns(keys,source){this.updateColList(keys,this.pivotCols,!1,!1,column=>column.setPivotActive(!1,source),"columnPivotChanged",source)}setValueColumns(colKeys,source){this.setColList(colKeys,this.valueCols,"columnValueChanged",!1,!1,(added,column)=>this.setValueActive(added,column,source),source)}setValueActive(active,column,source){if(active!==column.isValueActive()&&(column.setValueActive(active,source),active&&!column.getAggFunc()&&this.aggFuncService)){const initialAggFunc=this.aggFuncService.getDefaultAggFunc(column);column.setAggFunc(initialAggFunc)}}addValueColumns(keys,source){this.updateColList(keys,this.valueCols,!0,!1,column=>this.setValueActive(!0,column,source),"columnValueChanged",source)}removeValueColumns(keys,source){this.updateColList(keys,this.valueCols,!1,!1,column=>this.setValueActive(!1,column,source),"columnValueChanged",source)}moveRowGroupColumn(fromIndex,toIndex,source){if(this.isRowGroupEmpty())return;const column=this.rowGroupCols[fromIndex],impactedColumns=this.rowGroupCols.slice(fromIndex,toIndex);this.rowGroupCols.splice(fromIndex,1),this.rowGroupCols.splice(toIndex,0,column),this.eventDispatcher.rowGroupChanged(impactedColumns,source)}setColList(colKeys,masterList,eventName,detectOrderChange,autoGroupsNeedBuilding,columnCallback,source){const gridColumns=this.columnModel.getCols();if(_missingOrEmpty(gridColumns))return;const changes=new Map;masterList.forEach((col,idx)=>changes.set(col,idx)),masterList.length=0,_exists(colKeys)&&colKeys.forEach(key=>{const column=this.columnModel.getColDefCol(key);column&&masterList.push(column)}),masterList.forEach((col,idx)=>{const oldIndex=changes.get(col);if(oldIndex===void 0){changes.set(col,0);return}detectOrderChange&&oldIndex!==idx||changes.delete(col)}),(this.columnModel.getColDefCols()||[]).forEach(column=>{const added=masterList.indexOf(column)>=0;columnCallback(added,column)}),autoGroupsNeedBuilding&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(source),this.eventDispatcher.columnChanged(eventName,[...changes.keys()],source)}updateColList(keys,masterList,actionIsAdd,autoGroupsNeedBuilding,columnCallback,eventType,source){if(!keys||_missingOrEmpty(keys))return;let atLeastOne=!1;const updatedCols=new Set;keys.forEach(key=>{if(!key)return;const columnToAdd=this.columnModel.getColDefCol(key);if(columnToAdd){if(updatedCols.add(columnToAdd),actionIsAdd){if(masterList.indexOf(columnToAdd)>=0)return;masterList.push(columnToAdd)}else{const currentIndex=masterList.indexOf(columnToAdd);if(currentIndex<0)return;for(let i=currentIndex+1;i<masterList.length;i++)updatedCols.add(masterList[i]);_removeFromArray(masterList,columnToAdd)}columnCallback(columnToAdd),atLeastOne=!0}}),atLeastOne&&(autoGroupsNeedBuilding&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(source),this.eventDispatcher.genericColumnEvent(eventType,Array.from(updatedCols),source))}extractCols(source,oldProvidedCols){this.extractRowGroupCols(source,oldProvidedCols),this.extractPivotCols(source,oldProvidedCols),this.extractValueCols(source,oldProvidedCols)}extractValueCols(source,oldProvidedCols){this.valueCols=this.extractColsCommon(oldProvidedCols,this.valueCols,(col,flag)=>col.setValueActive(flag,source),()=>{},()=>{},colDef=>{const aggFunc=colDef.aggFunc;if(aggFunc===null||aggFunc==="")return null;if(aggFunc!==void 0)return!!aggFunc},colDef=>colDef.initialAggFunc!=null&&colDef.initialAggFunc!=""),this.valueCols.forEach(col=>{const colDef=col.getColDef();colDef.aggFunc!=null&&colDef.aggFunc!=""?col.setAggFunc(colDef.aggFunc):col.getAggFunc()||col.setAggFunc(colDef.initialAggFunc)})}extractRowGroupCols(source,oldProvidedCols){this.rowGroupCols=this.extractColsCommon(oldProvidedCols,this.rowGroupCols,(col,flag)=>col.setRowGroupActive(flag,source),colDef=>colDef.rowGroupIndex,colDef=>colDef.initialRowGroupIndex,colDef=>colDef.rowGroup,colDef=>colDef.initialRowGroup)}extractPivotCols(source,oldProvidedCols){this.pivotCols=this.extractColsCommon(oldProvidedCols,this.pivotCols,(col,flag)=>col.setPivotActive(flag,source),colDef=>colDef.pivotIndex,colDef=>colDef.initialPivotIndex,colDef=>colDef.pivot,colDef=>colDef.initialPivot)}extractColsCommon(oldProvidedCols=[],previousCols=[],setFlagFunc,getIndexFunc,getInitialIndexFunc,getValueFunc,getInitialValueFunc){const colsWithIndex=[],colsWithValue=[];(this.columnModel.getColDefCols()||[]).forEach(col=>{const colIsNew=oldProvidedCols.indexOf(col)<0,colDef=col.getColDef(),value=_attrToBoolean(getValueFunc(colDef)),initialValue=_attrToBoolean(getInitialValueFunc(colDef)),index=_attrToNumber(getIndexFunc(colDef)),initialIndex=_attrToNumber(getInitialIndexFunc(colDef));let include;value!==void 0?include=value:index!==void 0?index===null?include=!1:include=index>=0:colIsNew?initialValue!==void 0?include=initialValue:initialIndex!==void 0?include=initialIndex!=null&&initialIndex>=0:include=!1:include=previousCols.indexOf(col)>=0,include&&((colIsNew?index!=null||initialIndex!=null:index!=null)?colsWithIndex.push(col):colsWithValue.push(col))});const getIndexForCol=__name(col=>{const index=getIndexFunc(col.getColDef()),defaultIndex=getInitialIndexFunc(col.getColDef());return index??defaultIndex},"getIndexForCol");colsWithIndex.sort((colA,colB)=>{const indexA=getIndexForCol(colA),indexB=getIndexForCol(colB);return indexA===indexB?0:indexA<indexB?-1:1});const res=[].concat(colsWithIndex);return previousCols.forEach(col=>{colsWithValue.indexOf(col)>=0&&res.push(col)}),colsWithValue.forEach(col=>{res.indexOf(col)<0&&res.push(col)}),previousCols.forEach(col=>{res.indexOf(col)<0&&setFlagFunc(col,!1)}),res.forEach(col=>{previousCols.indexOf(col)<0&&setFlagFunc(col,!0)}),res}generateColumnStateForRowGroupAndPivotIndexes(updatedRowGroupColumnState,updatedPivotColumnState){const existingColumnStateUpdates={},orderColumns=__name((updatedColumnState,colList,enableProp,initialEnableProp,indexProp,initialIndexProp)=>{const primaryCols=this.columnModel.getColDefCols();if(!colList.length||!primaryCols)return[];const updatedColIdArray=Object.keys(updatedColumnState),updatedColIds=new Set(updatedColIdArray),newColIds=new Set(updatedColIdArray),allColIds=new Set(colList.map(column=>{const colId=column.getColId();return newColIds.delete(colId),colId}).concat(updatedColIdArray)),colIdsInOriginalOrder=[],originalOrderMap={};let orderIndex=0;for(let i=0;i<primaryCols.length;i++){const colId=primaryCols[i].getColId();allColIds.has(colId)&&(colIdsInOriginalOrder.push(colId),originalOrderMap[colId]=orderIndex++)}let index=1e3,hasAddedNewCols=!1,lastIndex=0;const processPrecedingNewCols=__name(colId=>{const originalOrderIndex=originalOrderMap[colId];for(let i=lastIndex;i<originalOrderIndex;i++){const newColId=colIdsInOriginalOrder[i];newColIds.has(newColId)&&(updatedColumnState[newColId][indexProp]=index++,newColIds.delete(newColId))}lastIndex=originalOrderIndex},"processPrecedingNewCols");colList.forEach(column=>{const colId=column.getColId();if(updatedColIds.has(colId))processPrecedingNewCols(colId),updatedColumnState[colId][indexProp]=index++;else{const colDef=column.getColDef();(colDef[indexProp]===null||colDef[indexProp]===void 0&&colDef[initialIndexProp]==null)&&(hasAddedNewCols||(colDef[enableProp]||colDef[enableProp]===void 0&&colDef[initialEnableProp]?processPrecedingNewCols(colId):(newColIds.forEach(newColId=>{updatedColumnState[newColId][indexProp]=index+originalOrderMap[newColId]}),index+=colIdsInOriginalOrder.length,hasAddedNewCols=!0)),existingColumnStateUpdates[colId]||(existingColumnStateUpdates[colId]={colId}),existingColumnStateUpdates[colId][indexProp]=index++)}})},"orderColumns");return orderColumns(updatedRowGroupColumnState,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),orderColumns(updatedPivotColumnState,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(existingColumnStateUpdates)}},__name(_a11,"FuncColsService"),_a11),_a12,ColumnApplyStateService=(_a12=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(beans){this.columnModel=beans.columnModel,this.eventDispatcher=beans.columnEventDispatcher,this.sortController=beans.sortController,this.columnGetStateService=beans.columnGetStateService,this.funcColsService=beans.funcColsService,this.visibleColsService=beans.visibleColsService,this.columnAnimationService=beans.columnAnimationService,this.pivotResultColsService=beans.pivotResultColsService}applyColumnState(params,source){const providedCols=this.columnModel.getColDefCols()||[];if(_missingOrEmpty(providedCols))return!1;if(params&&params.state&&!params.state.forEach)return _warnOnce("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const callbacks=this.funcColsService.getModifyColumnsNoEventsCallbacks(),applyStates=__name((states,existingColumns,getById)=>{const dispatchEventsFunc=this.compareColumnStatesAndDispatchEvents(source),columnsWithNoState=existingColumns.slice(),rowGroupIndexes={},pivotIndexes={},autoColStates=[],unmatchedAndAutoStates2=[];let unmatchedCount2=0;const previousRowGroupCols=this.funcColsService.getRowGroupColumns().slice(),previousPivotCols=this.funcColsService.getPivotColumns().slice();states.forEach(state=>{const colId=state.colId||"";if(colId.startsWith(GROUP_AUTO_COLUMN_ID)){autoColStates.push(state),unmatchedAndAutoStates2.push(state);return}const column=getById(colId);column?(this.syncColumnWithStateItem(column,state,params.defaultState,rowGroupIndexes,pivotIndexes,!1,source,callbacks),_removeFromArray(columnsWithNoState,column)):(unmatchedAndAutoStates2.push(state),unmatchedCount2+=1)});const applyDefaultsFunc=__name(col=>this.syncColumnWithStateItem(col,null,params.defaultState,rowGroupIndexes,pivotIndexes,!1,source,callbacks),"applyDefaultsFunc");columnsWithNoState.forEach(applyDefaultsFunc),this.funcColsService.sortRowGroupColumns(comparatorByIndex.bind(this,rowGroupIndexes,previousRowGroupCols)),this.funcColsService.sortPivotColumns(comparatorByIndex.bind(this,pivotIndexes,previousPivotCols)),this.columnModel.refreshCols(!1);const autoColsCopy=(this.columnModel.getAutoCols()||[]).slice();return autoColStates.forEach(stateItem=>{const autoCol=this.columnModel.getAutoCol(stateItem.colId);_removeFromArray(autoColsCopy,autoCol),this.syncColumnWithStateItem(autoCol,stateItem,params.defaultState,null,null,!0,source,callbacks)}),autoColsCopy.forEach(applyDefaultsFunc),this.orderLiveColsLikeState(params),this.visibleColsService.refresh(source),this.eventDispatcher.everythingChanged(source),dispatchEventsFunc(),{unmatchedAndAutoStates:unmatchedAndAutoStates2,unmatchedCount:unmatchedCount2}},"applyStates");this.columnAnimationService.start();let{unmatchedAndAutoStates,unmatchedCount}=applyStates(params.state||[],providedCols,id=>this.columnModel.getColDefCol(id));if(unmatchedAndAutoStates.length>0||_exists(params.defaultState)){const pivotResultCols=this.pivotResultColsService.getPivotResultCols(),pivotResultColsList=pivotResultCols==null?void 0:pivotResultCols.list;unmatchedCount=applyStates(unmatchedAndAutoStates,pivotResultColsList||[],id=>this.pivotResultColsService.getPivotResultCol(id)).unmatchedCount}return this.columnAnimationService.finish(),unmatchedCount===0}resetColumnState(source){const primaryCols=this.columnModel.getColDefCols();if(_missingOrEmpty(primaryCols))return;const primaryColumnTree=this.columnModel.getColDefColTree(),primaryColumns=getColumnsFromTree(primaryColumnTree),columnStates=[];let letRowGroupIndex=1e3,letPivotIndex=1e3,colsToProcess=[];const groupAutoCols=this.columnModel.getAutoCols();groupAutoCols&&(colsToProcess=colsToProcess.concat(groupAutoCols)),primaryColumns&&(colsToProcess=colsToProcess.concat(primaryColumns)),colsToProcess.forEach(column=>{const stateItem=this.getColumnStateFromColDef(column);_missing(stateItem.rowGroupIndex)&&stateItem.rowGroup&&(stateItem.rowGroupIndex=letRowGroupIndex++),_missing(stateItem.pivotIndex)&&stateItem.pivot&&(stateItem.pivotIndex=letPivotIndex++),columnStates.push(stateItem)}),this.applyColumnState({state:columnStates,applyOrder:!0},source)}getColumnStateFromColDef(column){const getValueOrNull=__name((a,b)=>a??b??null,"getValueOrNull"),colDef=column.getColDef(),sort=getValueOrNull(colDef.sort,colDef.initialSort),sortIndex=getValueOrNull(colDef.sortIndex,colDef.initialSortIndex),hide=getValueOrNull(colDef.hide,colDef.initialHide),pinned=getValueOrNull(colDef.pinned,colDef.initialPinned),width=getValueOrNull(colDef.width,colDef.initialWidth),flex=getValueOrNull(colDef.flex,colDef.initialFlex);let rowGroupIndex=getValueOrNull(colDef.rowGroupIndex,colDef.initialRowGroupIndex),rowGroup=getValueOrNull(colDef.rowGroup,colDef.initialRowGroup);rowGroupIndex==null&&(rowGroup==null||rowGroup==!1)&&(rowGroupIndex=null,rowGroup=null);let pivotIndex=getValueOrNull(colDef.pivotIndex,colDef.initialPivotIndex),pivot=getValueOrNull(colDef.pivot,colDef.initialPivot);pivotIndex==null&&(pivot==null||pivot==!1)&&(pivotIndex=null,pivot=null);const aggFunc=getValueOrNull(colDef.aggFunc,colDef.initialAggFunc);return{colId:column.getColId(),sort,sortIndex,hide,pinned,width,flex,rowGroup,rowGroupIndex,pivot,pivotIndex,aggFunc}}syncColumnWithStateItem(column,stateItem,defaultState,rowGroupIndexes,pivotIndexes,autoCol,source,callbacks){if(!column)return;const getValue2=__name((key1,key2)=>{const obj={value1:void 0,value2:void 0};let calculated=!1;return stateItem&&(stateItem[key1]!==void 0&&(obj.value1=stateItem[key1],calculated=!0),_exists(key2)&&stateItem[key2]!==void 0&&(obj.value2=stateItem[key2],calculated=!0)),!calculated&&defaultState&&(defaultState[key1]!==void 0&&(obj.value1=defaultState[key1]),_exists(key2)&&defaultState[key2]!==void 0&&(obj.value2=defaultState[key2])),obj},"getValue2"),hide=getValue2("hide").value1;hide!==void 0&&column.setVisible(!hide,source);const pinned=getValue2("pinned").value1;pinned!==void 0&&column.setPinned(pinned);const minColWidth=column.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),flex=getValue2("flex").value1;if(flex!==void 0&&column.setFlex(flex),flex==null){const width=getValue2("width").value1;width!=null&&minColWidth!=null&&width>=minColWidth&&column.setActualWidth(width,source)}const sort=getValue2("sort").value1;sort!==void 0&&(sort==="desc"||sort==="asc"?column.setSort(sort,source):column.setSort(void 0,source));const sortIndex=getValue2("sortIndex").value1;if(sortIndex!==void 0&&column.setSortIndex(sortIndex),autoCol||!column.isPrimary())return;const aggFunc=getValue2("aggFunc").value1;aggFunc!==void 0&&(typeof aggFunc=="string"?(column.setAggFunc(aggFunc),column.isValueActive()||(column.setValueActive(!0,source),callbacks.addValueCol(column))):(_exists(aggFunc)&&_warnOnce("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),column.isValueActive()&&(column.setValueActive(!1,source),callbacks.removeValueCol(column))));const{value1:rowGroup,value2:rowGroupIndex}=getValue2("rowGroup","rowGroupIndex");(rowGroup!==void 0||rowGroupIndex!==void 0)&&(typeof rowGroupIndex=="number"||rowGroup?(column.isRowGroupActive()||(column.setRowGroupActive(!0,source),callbacks.addGroupCol(column)),rowGroupIndexes&&typeof rowGroupIndex=="number"&&(rowGroupIndexes[column.getId()]=rowGroupIndex)):column.isRowGroupActive()&&(column.setRowGroupActive(!1,source),callbacks.removeGroupCol(column)));const{value1:pivot,value2:pivotIndex}=getValue2("pivot","pivotIndex");(pivot!==void 0||pivotIndex!==void 0)&&(typeof pivotIndex=="number"||pivot?(column.isPivotActive()||(column.setPivotActive(!0,source),callbacks.addPivotCol(column)),pivotIndexes&&typeof pivotIndex=="number"&&(pivotIndexes[column.getId()]=pivotIndex)):column.isPivotActive()&&(column.setPivotActive(!1,source),callbacks.removePivotCol(column)))}orderLiveColsLikeState(params){if(!params.applyOrder||!params.state)return;const colIds=[];params.state.forEach(item=>{item.colId!=null&&colIds.push(item.colId)}),this.columnModel.sortColsLikeKeys(colIds)}compareColumnStatesAndDispatchEvents(source){const startState={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},columnStateBefore=this.columnGetStateService.getColumnState(),columnStateBeforeMap={};return columnStateBefore.forEach(col=>{columnStateBeforeMap[col.colId]=col}),()=>{const colsForState=this.columnModel.getAllCols(),dispatchWhenListsDifferent=__name((eventType,colsBefore,colsAfter,idMapper)=>{const beforeList=colsBefore.map(idMapper),afterList=colsAfter.map(idMapper);if(_areEqual(beforeList,afterList))return;const changes=new Set(colsBefore);colsAfter.forEach(id=>{changes.delete(id)||changes.add(id)});const changesArr=[...changes];this.eventService.dispatchEvent({type:eventType,columns:changesArr,column:changesArr.length===1?changesArr[0]:null,source})},"dispatchWhenListsDifferent"),getChangedColumns=__name(changedPredicate=>{const changedColumns2=[];return colsForState.forEach(column=>{const colStateBefore=columnStateBeforeMap[column.getColId()];colStateBefore&&changedPredicate(colStateBefore,column)&&changedColumns2.push(column)}),changedColumns2},"getChangedColumns"),columnIdMapper=__name(c=>c.getColId(),"columnIdMapper");dispatchWhenListsDifferent("columnRowGroupChanged",startState.rowGroupColumns,this.funcColsService.getRowGroupColumns(),columnIdMapper),dispatchWhenListsDifferent("columnPivotChanged",startState.pivotColumns,this.funcColsService.getPivotColumns(),columnIdMapper);const changedValues=getChangedColumns(__name((cs,c)=>{const oldActive=cs.aggFunc!=null,activeChanged=oldActive!=c.isValueActive(),aggFuncChanged=oldActive&&cs.aggFunc!=c.getAggFunc();return activeChanged||aggFuncChanged},"valueChangePredicate"));changedValues.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",changedValues,source);const resizeChangePredicate=__name((cs,c)=>cs.width!=c.getActualWidth(),"resizeChangePredicate");this.eventDispatcher.columnResized(getChangedColumns(resizeChangePredicate),!0,source);const pinnedChangePredicate=__name((cs,c)=>cs.pinned!=c.getPinned(),"pinnedChangePredicate");this.eventDispatcher.columnPinned(getChangedColumns(pinnedChangePredicate),source);const visibilityChangePredicate=__name((cs,c)=>cs.hide==c.isVisible(),"visibilityChangePredicate");this.eventDispatcher.columnVisible(getChangedColumns(visibilityChangePredicate),source);const changedColumns=getChangedColumns(__name((cs,c)=>cs.sort!=c.getSort()||cs.sortIndex!=c.getSortIndex(),"sortChangePredicate"));changedColumns.length>0&&this.sortController.dispatchSortChangedEvents(source,changedColumns),this.normaliseColumnMovedEventForColumnState(columnStateBefore,source)}}normaliseColumnMovedEventForColumnState(colStateBefore,source){const colStateAfter=this.columnGetStateService.getColumnState(),colStateAfterMapped={};colStateAfter.forEach(s=>colStateAfterMapped[s.colId]=s);const colsIntersectIds={};colStateBefore.forEach(s=>{colStateAfterMapped[s.colId]&&(colsIntersectIds[s.colId]=!0)});const beforeFiltered=colStateBefore.filter(c=>colsIntersectIds[c.colId]),afterFiltered=colStateAfter.filter(c=>colsIntersectIds[c.colId]),movedColumns=[];afterFiltered.forEach((csAfter,index)=>{const csBefore=beforeFiltered&&beforeFiltered[index];if(csBefore&&csBefore.colId!==csAfter.colId){const gridCol=this.columnModel.getCol(csBefore.colId);gridCol&&movedColumns.push(gridCol)}}),movedColumns.length&&this.eventDispatcher.columnMoved({movedColumns,source,finished:!0})}},__name(_a12,"ColumnApplyStateService"),_a12),comparatorByIndex=__name((indexes,oldList,colA,colB)=>{const indexA=indexes[colA.getId()],indexB=indexes[colB.getId()],aHasIndex=indexA!=null,bHasIndex=indexB!=null;if(aHasIndex&&bHasIndex)return indexA-indexB;if(aHasIndex)return-1;if(bHasIndex)return 1;const oldIndexA=oldList.indexOf(colA),oldIndexB=oldList.indexOf(colB),aHasOldIndex=oldIndexA>=0,bHasOldIndex=oldIndexB>=0;return aHasOldIndex&&bHasOldIndex?oldIndexA-oldIndexB:aHasOldIndex?-1:1},"comparatorByIndex"),_a13,ColumnMoveService=(_a13=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(beans){this.columnModel=beans.columnModel,this.columnAnimationService=beans.columnAnimationService,this.eventDispatcher=beans.columnEventDispatcher}moveColumnByIndex(fromIndex,toIndex,source){const gridColumns=this.columnModel.getCols();if(!gridColumns)return;const column=gridColumns[fromIndex];this.moveColumns([column],toIndex,source)}moveColumns(columnsToMoveKeys,toIndex,source,finished=!0){const gridColumns=this.columnModel.getCols();if(!gridColumns)return;if(toIndex>gridColumns.length-columnsToMoveKeys.length){_warnOnce("tried to insert columns in invalid location, toIndex = ",toIndex),_warnOnce("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();const movedColumns=this.columnModel.getColsForKeys(columnsToMoveKeys);this.doesMovePassRules(movedColumns,toIndex)&&(this.columnModel.moveInCols(movedColumns,toIndex,source),this.eventDispatcher.columnMoved({movedColumns,source,toIndex,finished})),this.columnAnimationService.finish()}doesMovePassRules(columnsToMove,toIndex){const proposedColumnOrder=this.getProposedColumnOrder(columnsToMove,toIndex);return this.doesOrderPassRules(proposedColumnOrder)}doesOrderPassRules(gridOrder){return!(!this.doesMovePassMarryChildren(gridOrder)||!this.doesMovePassLockedPositions(gridOrder))}getProposedColumnOrder(columnsToMove,toIndex){const proposedColumnOrder=this.columnModel.getCols().slice();return _moveInArray(proposedColumnOrder,columnsToMove,toIndex),proposedColumnOrder}doesMovePassLockedPositions(proposedColumnOrder){const lockPositionToPlacement=__name(position=>position?position==="left"||position===!0?-1:1:0,"lockPositionToPlacement"),isRtl=this.gos.get("enableRtl");let lastPlacement=isRtl?1:-1,rulePassed=!0;return proposedColumnOrder.forEach(col=>{const placement=lockPositionToPlacement(col.getColDef().lockPosition);isRtl?placement>lastPlacement&&(rulePassed=!1):placement<lastPlacement&&(rulePassed=!1),lastPlacement=placement}),rulePassed}doesMovePassMarryChildren(allColumnsCopy){let rulePassed=!0;const gridBalancedTree=this.columnModel.getColTree();return depthFirstOriginalTreeSearch(null,gridBalancedTree,child=>{if(!isProvidedColumnGroup(child))return;const columnGroup=child,colGroupDef=columnGroup.getColGroupDef();if(!(colGroupDef&&colGroupDef.marryChildren))return;const newIndexes=[];columnGroup.getLeafColumns().forEach(col=>{const newColIndex=allColumnsCopy.indexOf(col);newIndexes.push(newColIndex)});const maxIndex=Math.max.apply(Math,newIndexes),minIndex=Math.min.apply(Math,newIndexes),spread=maxIndex-minIndex,maxSpread=columnGroup.getLeafColumns().length-1;spread>maxSpread&&(rulePassed=!1)}),rulePassed}placeLockedColumns(cols){const left=[],normal=[],right=[];return cols.forEach(col=>{const position=col.getColDef().lockPosition;position==="right"?right.push(col):position==="left"||position===!0?left.push(col):normal.push(col)}),this.gos.get("enableRtl")?[...right,...normal,...left]:[...left,...normal,...right]}},__name(_a13,"ColumnMoveService"),_a13),reUnescapedHtml=/[&<>"']/g,HTML_ESCAPES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _escapeString(toEscape,skipEscapingHtmlChars){if(toEscape==null)return null;const stringResult=toEscape.toString().toString();return skipEscapingHtmlChars?stringResult:stringResult.replace(reUnescapedHtml,chr=>HTML_ESCAPES[chr])}__name(_escapeString,"_escapeString");function _camelCaseToHumanText(camelCase){if(!camelCase||camelCase==null)return null;const rex=/([a-z])([A-Z])/g,rexCaps=/([A-Z]+)([A-Z])([a-z])/g;return camelCase.replace(rex,"$1 $2").replace(rexCaps,"$1 $2$3").replace(/\./g," ").split(" ").map(word=>word.substring(0,1).toUpperCase()+(word.length>1?word.substring(1,word.length):"")).join(" ")}__name(_camelCaseToHumanText,"_camelCaseToHumanText");var _a14,ColumnNameService=(_a14=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(beans){this.expressionService=beans.expressionService,this.funcColsService=beans.funcColsService,this.columnModel=beans.columnModel}getDisplayNameForColumn(column,location,includeAggFunc=!1){if(!column)return null;const headerName=this.getHeaderName(column.getColDef(),column,null,null,location);return includeAggFunc?this.wrapHeaderNameWithAggFunc(column,headerName):headerName}getDisplayNameForProvidedColumnGroup(columnGroup,providedColumnGroup,location){const colGroupDef=providedColumnGroup?providedColumnGroup.getColGroupDef():null;return colGroupDef?this.getHeaderName(colGroupDef,null,columnGroup,providedColumnGroup,location):null}getDisplayNameForColumnGroup(columnGroup,location){return this.getDisplayNameForProvidedColumnGroup(columnGroup,columnGroup.getProvidedColumnGroup(),location)}getHeaderName(colDef,column,columnGroup,providedColumnGroup,location){const headerValueGetter=colDef.headerValueGetter;if(headerValueGetter){const params=this.gos.addGridCommonParams({colDef,column,columnGroup,providedColumnGroup,location});return typeof headerValueGetter=="function"?headerValueGetter(params):typeof headerValueGetter=="string"?this.expressionService.evaluate(headerValueGetter,params):(_warnOnce("headerValueGetter must be a function or a string"),"")}else{if(colDef.headerName!=null)return colDef.headerName;if(colDef.field)return _camelCaseToHumanText(colDef.field)}return""}wrapHeaderNameWithAggFunc(column,headerName){if(this.gos.get("suppressAggFuncInHeader"))return headerName;const pivotValueColumn=column.getColDef().pivotValueColumn,pivotActiveOnThisColumn=_exists(pivotValueColumn);let aggFunc=null,aggFuncFound;if(pivotActiveOnThisColumn){const valueColumns=this.funcColsService.getValueColumns(),isCollapsedHeaderEnabled=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&valueColumns.length===1,isTotalColumn=column.getColDef().pivotTotalColumnIds!==void 0;if(isCollapsedHeaderEnabled&&!isTotalColumn)return headerName;aggFunc=pivotValueColumn?pivotValueColumn.getAggFunc():null,aggFuncFound=!0}else{const measureActive=column.isValueActive(),aggregationPresent=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();measureActive&&aggregationPresent?(aggFunc=column.getAggFunc(),aggFuncFound=!0):aggFuncFound=!1}if(aggFuncFound){const aggFuncString=typeof aggFunc=="string"?aggFunc:"func";return`${this.localeService.getLocaleTextFunc()(aggFuncString,aggFuncString)}(${headerName})`}return headerName}},__name(_a14,"ColumnNameService"),_a14),_a15,PivotResultColsService=(_a15=class extends BeanStub{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(beans){this.context=beans.context,this.columnModel=beans.columnModel,this.columnFactory=beans.columnFactory,this.visibleColsService=beans.visibleColsService}destroy(){var _a253;destroyColumnTree(this.context,(_a253=this.pivotResultCols)==null?void 0:_a253.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(pivotKeys,valueColKey){if(this.pivotResultCols==null)return null;const valueColumnToFind=this.columnModel.getColDefCol(valueColKey);let foundColumn=null;return this.pivotResultCols.list.forEach(column=>{const thisPivotKeys=column.getColDef().pivotKeys,pivotValueColumn=column.getColDef().pivotValueColumn;_areEqual(thisPivotKeys,pivotKeys)&&pivotValueColumn===valueColumnToFind&&(foundColumn=column)}),foundColumn}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(key){return this.pivotResultCols?this.columnModel.getColFromCollection(key,this.pivotResultCols):null}setPivotResultCols(colDefs,source){var _a253,_b;if(this.columnModel.isReady()&&!(colDefs==null&&this.pivotResultCols==null)){if(colDefs){this.processPivotResultColDef(colDefs);const balancedTreeResult=this.columnFactory.createColumnTree(colDefs,!1,((_a253=this.pivotResultCols)==null?void 0:_a253.tree)||this.previousPivotResultCols||void 0,source);destroyColumnTree(this.context,(_b=this.pivotResultCols)==null?void 0:_b.tree,balancedTreeResult.columnTree);const tree=balancedTreeResult.columnTree,treeDepth=balancedTreeResult.treeDept,list=getColumnsFromTree(tree),map={};this.pivotResultCols={tree,treeDepth,list,map},this.pivotResultCols.list.forEach(col=>this.pivotResultCols.map[col.getId()]=col);const hasPreviousCols=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!hasPreviousCols)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(source)}}processPivotResultColDef(colDefs){const columnCallback=this.gos.get("processPivotResultColDef"),groupCallback=this.gos.get("processPivotResultColGroupDef");if(!columnCallback&&!groupCallback)return;const searchForColDefs=__name(colDefs2=>{colDefs2.forEach(abstractColDef=>{if(_exists(abstractColDef.children)){const colGroupDef=abstractColDef;groupCallback&&groupCallback(colGroupDef),searchForColDefs(colGroupDef.children)}else columnCallback&&columnCallback(abstractColDef)})},"searchForColDefs");colDefs&&searchForColDefs(colDefs)}},__name(_a15,"PivotResultColsService"),_a15),_a16,ColumnSizeService=(_a16=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(beans){this.columnModel=beans.columnModel,this.columnViewportService=beans.columnViewportService,this.eventDispatcher=beans.columnEventDispatcher,this.visibleColsService=beans.visibleColsService,this.ctrlsService=beans.ctrlsService}setColumnWidths(columnWidths,shiftKey,finished,source){const sets=[];columnWidths.forEach(columnWidth=>{const col=this.columnModel.getColDefCol(columnWidth.key)||this.columnModel.getCol(columnWidth.key);if(!col)return;if(sets.push({width:columnWidth.newWidth,ratios:[1],columns:[col]}),this.gos.get("colResizeDefault")==="shift"&&(shiftKey=!shiftKey),shiftKey){const otherCol=this.visibleColsService.getColAfter(col);if(!otherCol)return;const widthDiff=col.getActualWidth()-columnWidth.newWidth,otherColWidth=otherCol.getActualWidth()+widthDiff;sets.push({width:otherColWidth,ratios:[1],columns:[otherCol]})}}),sets.length!==0&&this.resizeColumnSets({resizeSets:sets,finished,source})}resizeColumnSets(params){const{resizeSets,finished,source}=params;if(!(!resizeSets||resizeSets.every(columnResizeSet=>this.checkMinAndMaxWidthsForSet(columnResizeSet)))){if(finished){const columns=resizeSets&&resizeSets.length>0?resizeSets[0].columns:null;this.eventDispatcher.columnResized(columns,finished,source)}return}const changedCols=[],allResizedCols=[];resizeSets.forEach(set=>{const{width,columns,ratios}=set,newWidths={},finishedCols={};columns.forEach(col=>allResizedCols.push(col));let finishedColsGrew=!0,loopCount=0;for(;finishedColsGrew;){if(loopCount++,loopCount>1e3){_errorOnce("infinite loop in resizeColumnSets");break}finishedColsGrew=!1;const subsetCols=[];let subsetRatioTotal=0,pixelsToDistribute=width;columns.forEach((col,index)=>{if(finishedCols[col.getId()])pixelsToDistribute-=newWidths[col.getId()];else{subsetCols.push(col);const ratioThisCol=ratios[index];subsetRatioTotal+=ratioThisCol}});const ratioScale=1/subsetRatioTotal;subsetCols.forEach((col,index)=>{const lastCol=index===subsetCols.length-1;let colNewWidth;lastCol?colNewWidth=pixelsToDistribute:(colNewWidth=Math.round(ratios[index]*width*ratioScale),pixelsToDistribute-=colNewWidth);const minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();colNewWidth<minWidth?(colNewWidth=minWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0):maxWidth>0&&colNewWidth>maxWidth&&(colNewWidth=maxWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0),newWidths[col.getId()]=colNewWidth})}columns.forEach(col=>{const newWidth=newWidths[col.getId()];col.getActualWidth()!==newWidth&&(col.setActualWidth(newWidth,source),changedCols.push(col))})});const atLeastOneColChanged=changedCols.length>0;let flexedCols=[];atLeastOneColChanged&&(flexedCols=this.refreshFlexedColumns({resizingCols:allResizedCols,skipSetLeft:!0}),this.visibleColsService.setLeftValues(source),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const colsForEvent=allResizedCols.concat(flexedCols);(atLeastOneColChanged||finished)&&this.eventDispatcher.columnResized(colsForEvent,finished,source,flexedCols)}checkMinAndMaxWidthsForSet(columnResizeSet){const{columns,width}=columnResizeSet;let minWidthAccumulated=0,maxWidthAccumulated=0,maxWidthActive=!0;columns.forEach(col=>{const minWidth=col.getMinWidth();minWidthAccumulated+=minWidth||0;const maxWidth=col.getMaxWidth();maxWidth>0?maxWidthAccumulated+=maxWidth:maxWidthActive=!1});const minWidthPasses=width>=minWidthAccumulated,maxWidthPasses=!maxWidthActive||width<=maxWidthAccumulated;return minWidthPasses&&maxWidthPasses}refreshFlexedColumns(params={}){const source=params.source?params.source:"flex";if(params.viewportWidth!=null&&(this.flexViewportWidth=params.viewportWidth),!this.flexViewportWidth)return[];const displayedCenterCols=this.visibleColsService.getCenterCols();let flexAfterDisplayIndex=-1;if(params.resizingCols){const allResizingCols=new Set(params.resizingCols);for(let i=displayedCenterCols.length-1;i>=0;i--)if(allResizingCols.has(displayedCenterCols[i])){flexAfterDisplayIndex=i;break}}let knownColumnsWidth=0,flexingColumns=[],minimumFlexedWidth=0,totalFlex=0;for(let i=0;i<displayedCenterCols.length;i++)displayedCenterCols[i].getFlex()&&i>flexAfterDisplayIndex?(flexingColumns.push(displayedCenterCols[i]),totalFlex+=displayedCenterCols[i].getFlex(),minimumFlexedWidth+=displayedCenterCols[i].getMinWidth()):knownColumnsWidth+=displayedCenterCols[i].getActualWidth();if(!flexingColumns.length)return[];let changedColumns=[];knownColumnsWidth+minimumFlexedWidth>this.flexViewportWidth&&(flexingColumns.forEach(col=>col.setActualWidth(col.getMinWidth(),source)),changedColumns=flexingColumns,flexingColumns=[]);const flexingColumnSizes=[];let spaceForFlexingColumns;outer:for(;;){spaceForFlexingColumns=this.flexViewportWidth-knownColumnsWidth;const spacePerFlex=spaceForFlexingColumns/totalFlex;for(let i=0;i<flexingColumns.length;i++){const col=flexingColumns[i],widthByFlexRule=spacePerFlex*col.getFlex();let constrainedWidth=0;const minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();if(widthByFlexRule<minWidth?constrainedWidth=minWidth:widthByFlexRule>maxWidth&&(constrainedWidth=maxWidth),constrainedWidth){col.setActualWidth(constrainedWidth,source),_removeFromUnorderedArray(flexingColumns,col),totalFlex-=col.getFlex(),changedColumns.push(col),knownColumnsWidth+=col.getActualWidth();continue outer}flexingColumnSizes[i]=Math.floor(widthByFlexRule)}break}let remainingSpace=spaceForFlexingColumns;return flexingColumns.forEach((col,i)=>{const size=i<flexingColumns.length-1?Math.min(flexingColumnSizes[i],remainingSpace):Math.max(flexingColumnSizes[i],remainingSpace);col.setActualWidth(size,source),changedColumns.push(col),remainingSpace-=flexingColumnSizes[i]}),params.skipSetLeft||this.visibleColsService.setLeftValues(source),params.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),params.fireResizedEvent&&this.eventDispatcher.columnResized(changedColumns,!0,source,flexingColumns),flexingColumns}sizeColumnsToFit(gridWidth,source="sizeColumnsToFit",silent,params){var _a253;if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(gridWidth,source,silent,params));return}const limitsMap={};params&&((_a253=params==null?void 0:params.columnLimits)==null||_a253.forEach(({key,...dimensions})=>{limitsMap[typeof key=="string"?key:key.getColId()]=dimensions}));const allDisplayedColumns=this.visibleColsService.getAllCols(),doColumnsAlreadyFit=gridWidth===getWidthOfColsInList(allDisplayedColumns);if(gridWidth<=0||!allDisplayedColumns.length||doColumnsAlreadyFit)return;const colsToSpread=[],colsToNotSpread=[];allDisplayedColumns.forEach(column=>{column.getColDef().suppressSizeToFit===!0?colsToNotSpread.push(column):colsToSpread.push(column)});const colsToDispatchEventFor=colsToSpread.slice(0);let finishedResizing=!1;const moveToNotSpread=__name(column=>{_removeFromArray(colsToSpread,column),colsToNotSpread.push(column)},"moveToNotSpread");for(colsToSpread.forEach(column=>{column.resetActualWidth(source);const widthOverride=limitsMap==null?void 0:limitsMap[column.getId()],minOverride=(widthOverride==null?void 0:widthOverride.minWidth)??(params==null?void 0:params.defaultMinWidth),maxOverride=(widthOverride==null?void 0:widthOverride.maxWidth)??(params==null?void 0:params.defaultMaxWidth),colWidth=column.getActualWidth();typeof minOverride=="number"&&colWidth<minOverride?column.setActualWidth(minOverride,source,!0):typeof maxOverride=="number"&&colWidth>maxOverride&&column.setActualWidth(maxOverride,source,!0)});!finishedResizing;){finishedResizing=!0;const availablePixels=gridWidth-getWidthOfColsInList(colsToNotSpread);if(availablePixels<=0)colsToSpread.forEach(column=>{var _a254;const widthOverride=((_a254=limitsMap==null?void 0:limitsMap[column.getId()])==null?void 0:_a254.minWidth)??(params==null?void 0:params.defaultMinWidth);if(typeof widthOverride=="number"){column.setActualWidth(widthOverride,source,!0);return}column.setMinimum(source)});else{const scale=availablePixels/getWidthOfColsInList(colsToSpread);let pixelsForLastCol=availablePixels;for(let i=colsToSpread.length-1;i>=0;i--){const column=colsToSpread[i],widthOverride=limitsMap==null?void 0:limitsMap[column.getId()],minOverride=(widthOverride==null?void 0:widthOverride.minWidth)??(params==null?void 0:params.defaultMinWidth),maxOverride=(widthOverride==null?void 0:widthOverride.maxWidth)??(params==null?void 0:params.defaultMaxWidth),colMinWidth=column.getMinWidth(),colMaxWidth=column.getMaxWidth(),minWidth=typeof minOverride=="number"&&minOverride>colMinWidth?minOverride:colMinWidth,maxWidth=typeof maxOverride=="number"&&maxOverride<colMaxWidth?maxOverride:colMaxWidth;let newWidth=Math.round(column.getActualWidth()*scale);newWidth<minWidth?(newWidth=minWidth,moveToNotSpread(column),finishedResizing=!1):newWidth>maxWidth?(newWidth=maxWidth,moveToNotSpread(column),finishedResizing=!1):i===0&&(newWidth=pixelsForLastCol),column.setActualWidth(newWidth,source,!0),pixelsForLastCol-=newWidth}}}colsToDispatchEventFor.forEach(col=>{col.fireColumnWidthChangedEvent(source)}),this.visibleColsService.setLeftValues(source),this.visibleColsService.updateBodyWidths(),!silent&&this.eventDispatcher.columnResized(colsToDispatchEventFor,!0,source)}applyAutosizeStrategy(){const autoSizeStrategy=this.gos.get("autoSizeStrategy");if(!autoSizeStrategy)return;const{type}=autoSizeStrategy;setTimeout(()=>{if(type==="fitGridWidth"){const{columnLimits:propColumnLimits,defaultMinWidth,defaultMaxWidth}=autoSizeStrategy,columnLimits=propColumnLimits==null?void 0:propColumnLimits.map(({colId:key,minWidth,maxWidth})=>({key,minWidth,maxWidth}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth,defaultMaxWidth,columnLimits})}else type==="fitProvidedWidth"&&this.sizeColumnsToFit(autoSizeStrategy.width,"sizeColumnsToFit")})}},__name(_a16,"ColumnSizeService"),_a16);function createUniqueColumnGroupId(groupId,instanceId){return groupId+"_"+instanceId}__name(createUniqueColumnGroupId,"createUniqueColumnGroupId");function isColumnGroup(col){return col instanceof AgColumnGroup}__name(isColumnGroup,"isColumnGroup");var _a17,AgColumnGroup=(_a17=class extends BeanStub{constructor(providedColumnGroup,groupId,partId,pinned){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=groupId,this.partId=partId,this.providedColumnGroup=providedColumnGroup,this.pinned=pinned}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(parent){this.parent=parent}getUniqueId(){return createUniqueColumnGroupId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const allLeafColumns=this.getProvidedColumnGroup().getLeafColumns();return!allLeafColumns||allLeafColumns.length===0?!1:allLeafColumns.every(col=>col.isMoving())}checkLeft(){if(this.displayedChildren.forEach(child=>{isColumnGroup(child)&&child.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const lastChildLeft=_last(this.displayedChildren).getLeft();this.setLeft(lastChildLeft)}else{const firstChildLeft=this.displayedChildren[0].getLeft();this.setLeft(firstChildLeft)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(left){this.oldLeft=this.left,this.left!==left&&(this.left=left,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let groupActualWidth=0;return this.displayedChildren&&this.displayedChildren.forEach(child=>{groupActualWidth+=child.getActualWidth()}),groupActualWidth}isResizable(){if(!this.displayedChildren)return!1;let result=!1;return this.displayedChildren.forEach(child=>{child.isResizable()&&(result=!0)}),result}getMinWidth(){let result=0;return this.displayedChildren.forEach(groupChild=>{result+=groupChild.getMinWidth()}),result}addChild(child){this.children||(this.children=[]),this.children.push(child)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const result=[];return this.addLeafColumns(result),result}getDisplayedLeafColumns(){const result=[];return this.addDisplayedLeafColumns(result),result}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(expanded){this.providedColumnGroup.setExpanded(expanded)}isAutoHeaderHeight(){var _a253;return!!((_a253=this.getColGroupDef())!=null&&_a253.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(height){const changed=height!==this.autoHeaderHeight;return this.autoHeaderHeight=height,changed}addDisplayedLeafColumns(leafColumns){this.displayedChildren.forEach(child=>{isColumn(child)?leafColumns.push(child):isColumnGroup(child)&&child.addDisplayedLeafColumns(leafColumns)})}addLeafColumns(leafColumns){this.children.forEach(child=>{isColumn(child)?leafColumns.push(child):isColumnGroup(child)&&child.addLeafColumns(leafColumns)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const parent=this.getParent();return!this.isPadding()||!parent||!parent.isPadding()?0:1+parent.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let parentWithExpansion=this;for(;parentWithExpansion!=null&&parentWithExpansion.isPadding();)parentWithExpansion=parentWithExpansion.getParent();if(!(parentWithExpansion?parentWithExpansion.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(child=>{if(isColumnGroup(child)&&(!child.displayedChildren||!child.displayedChildren.length))return;switch(child.getColumnGroupShow()){case"open":parentWithExpansion.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(child);break;case"closed":parentWithExpansion.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(child);break;default:this.displayedChildren.push(child);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},__name(_a17,"AgColumnGroup"),_a17),_a18,GroupInstanceIdCreator=(_a18=class{constructor(){this.existingIds={}}getInstanceIdForKey(key){const lastResult=this.existingIds[key];let result;return typeof lastResult!="number"?result=0:result=lastResult+1,this.existingIds[key]=result,result}},__name(_a18,"GroupInstanceIdCreator"),_a18),_a19,VisibleColsService=(_a19=class extends BeanStub{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(beans){this.columnModel=beans.columnModel,this.columnSizeService=beans.columnSizeService,this.columnViewportService=beans.columnViewportService,this.eventDispatcher=beans.columnEventDispatcher}refresh(source,skipTreeBuild=!1){skipTreeBuild||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=pickDisplayedCols(this.treeLeft),this.columnsCenter=pickDisplayedCols(this.treeCenter),this.columnsRight=pickDisplayedCols(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(source),this.autoHeightCols=this.columns.filter(col=>col.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(source),this.eventDispatcher.visibleCols(source)}updateBodyWidths(){const newBodyWidth=getWidthOfColsInList(this.columnsCenter),newLeftWidth=getWidthOfColsInList(this.columnsLeft),newRightWidth=getWidthOfColsInList(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==newBodyWidth,(this.bodyWidth!==newBodyWidth||this.leftWidth!==newLeftWidth||this.rightWidth!==newRightWidth)&&(this.bodyWidth=newBodyWidth,this.leftWidth=newLeftWidth,this.rightWidth=newRightWidth,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(source){this.setLeftValuesOfCols(source),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(source){let lastLeft,firstRight;this.gos.get("enableRtl")?(lastLeft=this.columnsLeft?this.columnsLeft[0]:null,firstRight=this.columnsRight?_last(this.columnsRight):null):(lastLeft=this.columnsLeft?_last(this.columnsLeft):null,firstRight=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(col=>{col.setLastLeftPinned(col===lastLeft,source),col.setFirstRightPinned(col===firstRight,source)})}buildTrees(){const cols=this.columnModel.getColsToShow(),leftCols=cols.filter(col=>col.getPinned()=="left"),rightCols=cols.filter(col=>col.getPinned()=="right"),centerCols=cols.filter(col=>col.getPinned()!="left"&&col.getPinned()!="right"),idCreator=new GroupInstanceIdCreator;this.treeLeft=this.createGroups({columns:leftCols,idCreator,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:rightCols,idCreator,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:centerCols,idCreator,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const allColumns=this.columnModel.getCols(),pinnedLeft=[],center=[],pinnedRight=[];for(const col of allColumns){const pinned=col.getPinned();pinned?pinned===!0||pinned==="left"?pinnedLeft.push(col):pinnedRight.push(col):center.push(col)}this.ariaOrderColumns=pinnedLeft.concat(center).concat(pinnedRight)}getAriaColIndex(colOrGroup){let col;return isColumnGroup(colOrGroup)?col=colOrGroup.getLeafColumns()[0]:col=colOrGroup,this.ariaOrderColumns.indexOf(col)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(columns=>{columns.forEach(column=>{isColumnGroup(column)&&column.checkLeft()})})}setLeftValuesOfCols(source){if(!this.columnModel.getColDefCols())return;const allColumns=this.columnModel.getCols().slice(0),doingRtl=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(columns=>{if(doingRtl){let left=getWidthOfColsInList(columns);columns.forEach(column=>{left-=column.getActualWidth(),column.setLeft(left,source)})}else{let left=0;columns.forEach(column=>{column.setLeft(left,source),left+=column.getActualWidth()})}_removeAllFromUnorderedArray(allColumns,columns)}),allColumns.forEach(column=>{column.setLeft(null,source)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(column){return this.getAllCols().indexOf(column)>=0}getLeftColsForRow(rowNode){return this.columnModel.isColSpanActive()?this.getColsForRow(rowNode,this.columnsLeft):this.columnsLeft}getRightColsForRow(rowNode){return this.columnModel.isColSpanActive()?this.getColsForRow(rowNode,this.columnsRight):this.columnsRight}getColsForRow(rowNode,displayedColumns,filterCallback,emptySpaceBeforeColumn){const result=[];let lastConsideredCol=null;for(let i=0;i<displayedColumns.length;i++){const col=displayedColumns[i],maxAllowedColSpan=displayedColumns.length-i,colSpan=Math.min(col.getColSpan(rowNode),maxAllowedColSpan),columnsToCheckFilter=[col];if(colSpan>1){const colsToRemove=colSpan-1;for(let j=1;j<=colsToRemove;j++)columnsToCheckFilter.push(displayedColumns[i+j]);i+=colsToRemove}let filterPasses;filterCallback?(filterPasses=!1,columnsToCheckFilter.forEach(colForFilter=>{filterCallback(colForFilter)&&(filterPasses=!0)})):filterPasses=!0,filterPasses&&(result.length===0&&lastConsideredCol&&(emptySpaceBeforeColumn&&emptySpaceBeforeColumn(col))&&result.push(lastConsideredCol),result.push(col)),lastConsideredCol=col}return result}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(pinned){switch(pinned){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(col){const allDisplayedColumns=this.getAllCols(),oldIndex=allDisplayedColumns.indexOf(col);return oldIndex>0?allDisplayedColumns[oldIndex-1]:null}getGroupAtDirection(columnGroup,direction){const requiredLevel=columnGroup.getProvidedColumnGroup().getLevel()+columnGroup.getPaddingLevel(),colGroupLeafColumns=columnGroup.getDisplayedLeafColumns(),col=direction==="After"?_last(colGroupLeafColumns):colGroupLeafColumns[0],getDisplayColMethod=`getCol${direction}`;for(;;){const column=this[getDisplayColMethod](col);if(!column)return null;const groupPointer=this.getColGroupAtLevel(column,requiredLevel);if(groupPointer!==columnGroup)return groupPointer}}getColGroupAtLevel(column,level){let groupPointer=column.getParent(),originalGroupLevel,groupPointerLevel;for(;originalGroupLevel=groupPointer.getProvidedColumnGroup().getLevel(),groupPointerLevel=groupPointer.getPaddingLevel(),!(originalGroupLevel+groupPointerLevel<=level);)groupPointer=groupPointer.getParent();return groupPointer}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const func=__name(child=>{this.colsAndGroupsMap[child.getUniqueId()]=child},"func");depthFirstAllColumnTreeSearch(this.treeCenter,!1,func),depthFirstAllColumnTreeSearch(this.treeLeft,!1,func),depthFirstAllColumnTreeSearch(this.treeRight,!1,func)}isVisible(item){return this.colsAndGroupsMap[item.getUniqueId()]===item}updateOpenClosedVisibilityInColumnGroups(){const allColumnGroups=this.getAllTrees();depthFirstAllColumnTreeSearch(allColumnGroups,!1,child=>{isColumnGroup(child)&&child.calculateDisplayedColumns()})}getFirstColumn(){const isRtl=this.gos.get("enableRtl"),queryOrder=["getLeftCols","getCenterCols","getRightCols"];isRtl&&queryOrder.reverse();for(let i=0;i<queryOrder.length;i++){const container=this[queryOrder[i]]();if(container.length)return isRtl?_last(container):container[0]}return null}getColumnGroup(colId,partId){if(!colId)return null;if(isColumnGroup(colId))return colId;const allColumnGroups=this.getAllTrees(),checkPartId=typeof partId=="number";let result=null;return depthFirstAllColumnTreeSearch(allColumnGroups,!1,child=>{if(isColumnGroup(child)){const columnGroup=child;let matched;checkPartId?matched=colId===columnGroup.getGroupId()&&partId===columnGroup.getPartId():matched=colId===columnGroup.getGroupId(),matched&&(result=columnGroup)}}),result}getColAfter(col){const allDisplayedColumns=this.getAllCols(),oldIndex=allDisplayedColumns.indexOf(col);return oldIndex<allDisplayedColumns.length-1?allDisplayedColumns[oldIndex+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return getWidthOfColsInList(this.columnsLeft)}getDisplayedColumnsRightWidth(){return getWidthOfColsInList(this.columnsRight)}isColAtEdge(col,edge){const allColumns=this.getAllCols();if(!allColumns.length)return!1;const isFirst=edge==="first";let columnToCompare;if(isColumnGroup(col)){const leafColumns=col.getDisplayedLeafColumns();if(!leafColumns.length)return!1;columnToCompare=isFirst?leafColumns[0]:_last(leafColumns)}else columnToCompare=col;return(isFirst?allColumns[0]:_last(allColumns))===columnToCompare}createGroups(params){const{columns,idCreator,pinned,oldDisplayedGroups,isStandaloneStructure}=params,oldColumnsMapped=this.mapOldGroupsById(oldDisplayedGroups),topLevelResultCols=[];let groupsOrColsAtCurrentLevel=columns;for(;groupsOrColsAtCurrentLevel.length;){const currentlyIterating=groupsOrColsAtCurrentLevel;groupsOrColsAtCurrentLevel=[];let lastGroupedColIdx=0;const createGroupToIndex=__name(to=>{const from=lastGroupedColIdx;lastGroupedColIdx=to;const previousNode=currentlyIterating[from],previousNodeParent=(isColumnGroup(previousNode)?previousNode.getProvidedColumnGroup():previousNode).getOriginalParent();if(previousNodeParent==null){for(let i=from;i<to;i++)topLevelResultCols.push(currentlyIterating[i]);return}const newGroup=this.createColGroup(previousNodeParent,idCreator,oldColumnsMapped,pinned,isStandaloneStructure);for(let i=from;i<to;i++)newGroup.addChild(currentlyIterating[i]);groupsOrColsAtCurrentLevel.push(newGroup)},"createGroupToIndex");for(let i=1;i<currentlyIterating.length;i++){const thisNode=currentlyIterating[i],thisNodeParent=(isColumnGroup(thisNode)?thisNode.getProvidedColumnGroup():thisNode).getOriginalParent(),previousNode=currentlyIterating[lastGroupedColIdx],previousNodeParent=(isColumnGroup(previousNode)?previousNode.getProvidedColumnGroup():previousNode).getOriginalParent();thisNodeParent!==previousNodeParent&&createGroupToIndex(i)}lastGroupedColIdx<currentlyIterating.length&&createGroupToIndex(currentlyIterating.length)}return isStandaloneStructure||this.setupParentsIntoCols(topLevelResultCols,null),topLevelResultCols}createColGroup(providedGroup,groupInstanceIdCreator,oldColumnsMapped,pinned,isStandaloneStructure){const groupId=providedGroup.getGroupId(),instanceId=groupInstanceIdCreator.getInstanceIdForKey(groupId),uniqueId=createUniqueColumnGroupId(groupId,instanceId);let columnGroup=oldColumnsMapped[uniqueId];return columnGroup&&columnGroup.getProvidedColumnGroup()!==providedGroup&&(columnGroup=null),_exists(columnGroup)?columnGroup.reset():(columnGroup=new AgColumnGroup(providedGroup,groupId,instanceId,pinned),isStandaloneStructure||this.createBean(columnGroup)),columnGroup}mapOldGroupsById(displayedGroups){const result={},recursive=__name(columnsOrGroups=>{columnsOrGroups.forEach(columnOrGroup=>{if(isColumnGroup(columnOrGroup)){const columnGroup=columnOrGroup;result[columnOrGroup.getUniqueId()]=columnGroup,recursive(columnGroup.getChildren())}})},"recursive");return displayedGroups&&recursive(displayedGroups),result}setupParentsIntoCols(columnsOrGroups,parent){columnsOrGroups.forEach(columnsOrGroup=>{if(columnsOrGroup.setParent(parent),isColumnGroup(columnsOrGroup)){const columnGroup=columnsOrGroup;this.setupParentsIntoCols(columnGroup.getChildren(),columnGroup)}})}},__name(_a19,"VisibleColsService"),_a19);function depthFirstAllColumnTreeSearch(tree,useDisplayedChildren,callback){if(tree)for(let i=0;i<tree.length;i++){const child=tree[i];if(isColumnGroup(child)){const childTree=useDisplayedChildren?child.getDisplayedChildren():child.getChildren();depthFirstAllColumnTreeSearch(childTree,useDisplayedChildren,callback)}callback(child)}}__name(depthFirstAllColumnTreeSearch,"depthFirstAllColumnTreeSearch");function pickDisplayedCols(tree){const res=[];return depthFirstAllColumnTreeSearch(tree,!0,child=>{isColumn(child)&&res.push(child)}),res}__name(pickDisplayedCols,"pickDisplayedCols");var PUBLIC_EVENTS=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],INTERNAL_EVENTS=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],ALL_EVENTS=[...PUBLIC_EVENTS,...INTERNAL_EVENTS],INITIAL_GRID_OPTION_KEYS={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},_a20,_PropertyKeys=(_a20=class{},__name(_a20,"_PropertyKeys"),_a20);_PropertyKeys.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];_PropertyKeys.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"];_PropertyKeys.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];_PropertyKeys.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];_PropertyKeys.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"];_PropertyKeys.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"];_PropertyKeys.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];_PropertyKeys.ALL_PROPERTIES=[..._PropertyKeys.ARRAY_PROPERTIES,..._PropertyKeys.OBJECT_PROPERTIES,..._PropertyKeys.STRING_PROPERTIES,..._PropertyKeys.NUMBER_PROPERTIES,..._PropertyKeys.FUNCTION_PROPERTIES,..._PropertyKeys.BOOLEAN_PROPERTIES,..._PropertyKeys.OTHER_PROPERTIES];var PropertyKeys=_PropertyKeys,_a21,_ComponentUtil=(_a21=class{static getCallbackForEvent(eventName){return!eventName||eventName.length<2?eventName:"on"+eventName[0].toUpperCase()+eventName.substring(1)}},__name(_a21,"_ComponentUtil"),_a21);_ComponentUtil.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";_ComponentUtil.PUBLIC_EVENTS=PUBLIC_EVENTS;_ComponentUtil.EVENT_CALLBACKS=ALL_EVENTS.map(event=>_ComponentUtil.getCallbackForEvent(event));_ComponentUtil.BOOLEAN_PROPERTIES=PropertyKeys.BOOLEAN_PROPERTIES;_ComponentUtil.ALL_PROPERTIES=PropertyKeys.ALL_PROPERTIES;_ComponentUtil.ALL_PROPERTIES_AND_CALLBACKS=[..._ComponentUtil.ALL_PROPERTIES,..._ComponentUtil.EVENT_CALLBACKS];_ComponentUtil.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(_ComponentUtil.ALL_PROPERTIES_AND_CALLBACKS);var ComponentUtil=_ComponentUtil;function _combineAttributesAndGridOptions(gridOptions,component){typeof gridOptions!="object"&&(gridOptions={});const mergedOptions={...gridOptions};return ComponentUtil.ALL_PROPERTIES_AND_CALLBACKS.forEach(key=>{const value=component[key];typeof value<"u"&&value!==ComponentUtil.VUE_OMITTED_PROPERTY&&(mergedOptions[key]=value)}),mergedOptions}__name(_combineAttributesAndGridOptions,"_combineAttributesAndGridOptions");function _processOnChange(changes,api){if(!changes)return;const gridChanges={};let hasChanges=!1;if(Object.keys(changes).filter(key=>ComponentUtil.ALL_PROPERTIES_AND_CALLBACKS_SET.has(key)).forEach(key=>{gridChanges[key]=changes[key],hasChanges=!0}),!hasChanges)return;const internalUpdateEvent={type:"gridOptionsChanged",options:gridChanges};api.dispatchEvent(internalUpdateEvent);const event={type:"componentStateChanged"};_iterateObject(gridChanges,(key,value)=>{event[key]=value}),api.dispatchEvent(event)}__name(_processOnChange,"_processOnChange");var _a22,EmptyBean=(_a22=class extends BeanStub{},__name(_a22,"EmptyBean"),_a22);function setupCompBean(ctrl,ctx,compBean){return compBean&&ctrl.addDestroyFunc(()=>ctx.destroyBean(compBean)),compBean??ctrl}__name(setupCompBean,"setupCompBean");var _a23,CssClassManager=(_a23=class{constructor(getGui){this.cssClassStates={},this.getGui=getGui}addCssClass(className){const list=(className||"").split(" ");if(list.length>1){list.forEach(cls=>this.addCssClass(cls));return}if(this.cssClassStates[className]!==!0&&className.length){const eGui=this.getGui();eGui&&eGui.classList.add(className),this.cssClassStates[className]=!0}}removeCssClass(className){const list=(className||"").split(" ");if(list.length>1){list.forEach(cls=>this.removeCssClass(cls));return}if(this.cssClassStates[className]!==!1&&className.length){const eGui=this.getGui();eGui&&eGui.classList.remove(className),this.cssClassStates[className]=!1}}containsCssClass(className){const eGui=this.getGui();return eGui?eGui.classList.contains(className):!1}addOrRemoveCssClass(className,addOrRemove){if(!className)return;if(className.indexOf(" ")>=0){const list=(className||"").split(" ");if(list.length>1){list.forEach(cls=>this.addOrRemoveCssClass(cls,addOrRemove));return}}if(this.cssClassStates[className]!==addOrRemove&&className.length){const eGui=this.getGui();eGui&&eGui.classList.toggle(className,addOrRemove),this.cssClassStates[className]=addOrRemove}}},__name(_a23,"CssClassManager"),_a23);function _toggleAriaAttribute(element,attribute,value){value==null||typeof value=="string"&&value==""?_removeAriaAttribute(element,attribute):_setAriaAttribute(element,attribute,value)}__name(_toggleAriaAttribute,"_toggleAriaAttribute");function _setAriaAttribute(element,attribute,value){element.setAttribute(_ariaAttributeName(attribute),value.toString())}__name(_setAriaAttribute,"_setAriaAttribute");function _removeAriaAttribute(element,attribute){element.removeAttribute(_ariaAttributeName(attribute))}__name(_removeAriaAttribute,"_removeAriaAttribute");function _ariaAttributeName(attribute){return`aria-${attribute}`}__name(_ariaAttributeName,"_ariaAttributeName");function _setAriaRole(element,role){role?element.setAttribute("role",role):element.removeAttribute("role")}__name(_setAriaRole,"_setAriaRole");function _getAriaSortState(sortDirection){let sort;return sortDirection==="asc"?sort="ascending":sortDirection==="desc"?sort="descending":sortDirection==="mixed"?sort="other":sort="none",sort}__name(_getAriaSortState,"_getAriaSortState");function _getAriaLabel(element){return element.getAttribute("aria-label")}__name(_getAriaLabel,"_getAriaLabel");function _setAriaLabel(element,label){_toggleAriaAttribute(element,"label",label)}__name(_setAriaLabel,"_setAriaLabel");function _setAriaLabelledBy(element,labelledBy){_toggleAriaAttribute(element,"labelledby",labelledBy)}__name(_setAriaLabelledBy,"_setAriaLabelledBy");function _setAriaLive(element,live){_toggleAriaAttribute(element,"live",live)}__name(_setAriaLive,"_setAriaLive");function _setAriaAtomic(element,atomic){_toggleAriaAttribute(element,"atomic",atomic)}__name(_setAriaAtomic,"_setAriaAtomic");function _setAriaRelevant(element,relevant){_toggleAriaAttribute(element,"relevant",relevant)}__name(_setAriaRelevant,"_setAriaRelevant");function _setAriaDisabled(element,disabled){_toggleAriaAttribute(element,"disabled",disabled)}__name(_setAriaDisabled,"_setAriaDisabled");function _setAriaHidden(element,hidden){_toggleAriaAttribute(element,"hidden",hidden)}__name(_setAriaHidden,"_setAriaHidden");function _setAriaExpanded(element,expanded){_setAriaAttribute(element,"expanded",expanded)}__name(_setAriaExpanded,"_setAriaExpanded");function _setAriaSetSize(element,setsize){_setAriaAttribute(element,"setsize",setsize)}__name(_setAriaSetSize,"_setAriaSetSize");function _setAriaPosInSet(element,position){_setAriaAttribute(element,"posinset",position)}__name(_setAriaPosInSet,"_setAriaPosInSet");function _setAriaRowCount(element,rowCount){_setAriaAttribute(element,"rowcount",rowCount)}__name(_setAriaRowCount,"_setAriaRowCount");function _setAriaRowIndex(element,rowIndex){_setAriaAttribute(element,"rowindex",rowIndex)}__name(_setAriaRowIndex,"_setAriaRowIndex");function _setAriaColCount(element,colCount){_setAriaAttribute(element,"colcount",colCount)}__name(_setAriaColCount,"_setAriaColCount");function _setAriaColIndex(element,colIndex){_setAriaAttribute(element,"colindex",colIndex)}__name(_setAriaColIndex,"_setAriaColIndex");function _setAriaColSpan(element,colSpan){_setAriaAttribute(element,"colspan",colSpan)}__name(_setAriaColSpan,"_setAriaColSpan");function _setAriaSort(element,sort){_setAriaAttribute(element,"sort",sort)}__name(_setAriaSort,"_setAriaSort");function _removeAriaSort(element){_removeAriaAttribute(element,"sort")}__name(_removeAriaSort,"_removeAriaSort");function _setAriaSelected(element,selected){_toggleAriaAttribute(element,"selected",selected)}__name(_setAriaSelected,"_setAriaSelected");function _setAriaControls(controllerElement,controlledElement){_toggleAriaAttribute(controllerElement,"controls",controlledElement.id),_setAriaLabelledBy(controlledElement,controllerElement.id)}__name(_setAriaControls,"_setAriaControls");function _getAriaCheckboxStateName(translate,state){return state===void 0?translate("ariaIndeterminate","indeterminate"):state===!0?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked")}__name(_getAriaCheckboxStateName,"_getAriaCheckboxStateName");var isSafari,safariVersion,isChrome,isFirefox,isMacOs,isIOS,invisibleScrollbar,browserScrollbarWidth,maxDivHeight;function _isBrowserSafari(){return isSafari===void 0&&(isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),isSafari}__name(_isBrowserSafari,"_isBrowserSafari");function _getSafariVersion(){if(safariVersion===void 0)if(_isBrowserSafari()){const versionMatch=navigator.userAgent.match(/version\/(\d+)/i);versionMatch&&(safariVersion=versionMatch[1]!=null?parseFloat(versionMatch[1]):0)}else safariVersion=0;return safariVersion}__name(_getSafariVersion,"_getSafariVersion");function _isBrowserChrome(){if(isChrome===void 0){const win=window;isChrome=!!win.chrome&&(!!win.chrome.webstore||!!win.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return isChrome}__name(_isBrowserChrome,"_isBrowserChrome");function _isBrowserFirefox(){return isFirefox===void 0&&(isFirefox=/(firefox)/i.test(navigator.userAgent)),isFirefox}__name(_isBrowserFirefox,"_isBrowserFirefox");function _isMacOsUserAgent(){return isMacOs===void 0&&(isMacOs=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),isMacOs}__name(_isMacOsUserAgent,"_isMacOsUserAgent");function _isIOSUserAgent(){return isIOS===void 0&&(isIOS=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),isIOS}__name(_isIOSUserAgent,"_isIOSUserAgent");function _browserSupportsPreventScroll(){return!_isBrowserSafari()||_getSafariVersion()>=15}__name(_browserSupportsPreventScroll,"_browserSupportsPreventScroll");function _getTabIndex(el){if(!el)return null;const numberTabIndex=el.tabIndex,tabIndex=el.getAttribute("tabIndex");return numberTabIndex===-1&&(tabIndex===null||tabIndex===""&&!_isBrowserFirefox())?null:numberTabIndex.toString()}__name(_getTabIndex,"_getTabIndex");function _getMaxDivHeight(){if(maxDivHeight!==void 0)return maxDivHeight;if(!document.body)return-1;let res=1e6;const testUpTo=_isBrowserFirefox()?6e6:1e9,div=document.createElement("div");for(document.body.appendChild(div);;){const test=res*2;if(div.style.height=test+"px",test>testUpTo||div.clientHeight!==test)break;res=test}return document.body.removeChild(div),maxDivHeight=res,res}__name(_getMaxDivHeight,"_getMaxDivHeight");function _getBodyWidth(){var _a253,_b;return((_a253=document.body)==null?void 0:_a253.clientWidth)??(window.innerHeight||((_b=document.documentElement)==null?void 0:_b.clientWidth)||-1)}__name(_getBodyWidth,"_getBodyWidth");function _getBodyHeight(){var _a253,_b;return((_a253=document.body)==null?void 0:_a253.clientHeight)??(window.innerHeight||((_b=document.documentElement)==null?void 0:_b.clientHeight)||-1)}__name(_getBodyHeight,"_getBodyHeight");function _getScrollbarWidth(){return browserScrollbarWidth==null&&initScrollbarWidthAndVisibility(),browserScrollbarWidth}__name(_getScrollbarWidth,"_getScrollbarWidth");function initScrollbarWidthAndVisibility(){const body=document.body,div=document.createElement("div");div.style.width=div.style.height="100px",div.style.opacity="0",div.style.overflow="scroll",div.style.msOverflowStyle="scrollbar",div.style.position="absolute",body.appendChild(div);let width=div.offsetWidth-div.clientWidth;width===0&&div.clientWidth===0&&(width=null),div.parentNode&&div.parentNode.removeChild(div),width!=null&&(browserScrollbarWidth=width,invisibleScrollbar=width===0)}__name(initScrollbarWidthAndVisibility,"initScrollbarWidthAndVisibility");function _isInvisibleScrollbar(){return invisibleScrollbar==null&&initScrollbarWidthAndVisibility(),invisibleScrollbar}__name(_isInvisibleScrollbar,"_isInvisibleScrollbar");var rtlNegativeScroll,FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea, [href]",FOCUSABLE_EXCLUDE="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function _isFocusableFormField(element){const matches=Element.prototype.matches||Element.prototype.msMatchesSelector,isFocusable=matches.call(element,"input, select, button, textarea"),isNotFocusable=matches.call(element,FOCUSABLE_EXCLUDE),isElementVisible=_isVisible(element);return isFocusable&&!isNotFocusable&&isElementVisible}__name(_isFocusableFormField,"_isFocusableFormField");function _setDisplayed(element,displayed,options={}){const{skipAriaHidden}=options;element.classList.toggle("ag-hidden",!displayed),skipAriaHidden||_setAriaHidden(element,!displayed)}__name(_setDisplayed,"_setDisplayed");function _setVisible(element,visible,options={}){const{skipAriaHidden}=options;element.classList.toggle("ag-invisible",!visible),skipAriaHidden||_setAriaHidden(element,!visible)}__name(_setVisible,"_setVisible");function _setDisabled(element,disabled){const attributeName="disabled",addOrRemoveDisabledAttribute=disabled?e=>e.setAttribute(attributeName,""):e=>e.removeAttribute(attributeName);addOrRemoveDisabledAttribute(element),_nodeListForEach(element.querySelectorAll("input"),input=>addOrRemoveDisabledAttribute(input))}__name(_setDisabled,"_setDisabled");function _isElementChildOfClass(element,cls,maxNest){let counter=0;for(;element;){if(element.classList.contains(cls))return!0;if(element=element.parentElement,typeof maxNest=="number"){if(++counter>maxNest)break}else if(element===maxNest)break}return!1}__name(_isElementChildOfClass,"_isElementChildOfClass");function _getElementSize(el){const{height,width,borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth,paddingTop,paddingRight,paddingBottom,paddingLeft,marginTop,marginRight,marginBottom,marginLeft,boxSizing}=window.getComputedStyle(el);return{height:parseFloat(height||"0"),width:parseFloat(width||"0"),borderTopWidth:parseFloat(borderTopWidth||"0"),borderRightWidth:parseFloat(borderRightWidth||"0"),borderBottomWidth:parseFloat(borderBottomWidth||"0"),borderLeftWidth:parseFloat(borderLeftWidth||"0"),paddingTop:parseFloat(paddingTop||"0"),paddingRight:parseFloat(paddingRight||"0"),paddingBottom:parseFloat(paddingBottom||"0"),paddingLeft:parseFloat(paddingLeft||"0"),marginTop:parseFloat(marginTop||"0"),marginRight:parseFloat(marginRight||"0"),marginBottom:parseFloat(marginBottom||"0"),marginLeft:parseFloat(marginLeft||"0"),boxSizing}}__name(_getElementSize,"_getElementSize");function _getInnerHeight(el){const size=_getElementSize(el);return size.boxSizing==="border-box"?size.height-size.paddingTop-size.paddingBottom:size.height}__name(_getInnerHeight,"_getInnerHeight");function _getInnerWidth(el){const size=_getElementSize(el);return size.boxSizing==="border-box"?size.width-size.paddingLeft-size.paddingRight:size.width}__name(_getInnerWidth,"_getInnerWidth");function _getAbsoluteHeight(el){const{height,marginBottom,marginTop}=_getElementSize(el);return Math.floor(height+marginBottom+marginTop)}__name(_getAbsoluteHeight,"_getAbsoluteHeight");function _getAbsoluteWidth(el){const{width,marginLeft,marginRight}=_getElementSize(el);return Math.floor(width+marginLeft+marginRight)}__name(_getAbsoluteWidth,"_getAbsoluteWidth");function _getElementRectWithOffset(el){const offsetElementRect=el.getBoundingClientRect(),{borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth}=_getElementSize(el);return{top:offsetElementRect.top+(borderTopWidth||0),left:offsetElementRect.left+(borderLeftWidth||0),right:offsetElementRect.right+(borderRightWidth||0),bottom:offsetElementRect.bottom+(borderBottomWidth||0)}}__name(_getElementRectWithOffset,"_getElementRectWithOffset");function _isRtlNegativeScroll(){if(typeof rtlNegativeScroll=="boolean")return rtlNegativeScroll;const template=document.createElement("div");return template.style.direction="rtl",template.style.width="1px",template.style.height="1px",template.style.position="fixed",template.style.top="0px",template.style.overflow="hidden",template.dir="rtl",template.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(template),template.scrollLeft=1,rtlNegativeScroll=Math.floor(template.scrollLeft)===0,document.body.removeChild(template),rtlNegativeScroll}__name(_isRtlNegativeScroll,"_isRtlNegativeScroll");function _getScrollLeft(element,rtl){let scrollLeft=element.scrollLeft;return rtl&&(scrollLeft=Math.abs(scrollLeft),_isBrowserChrome()&&!_isRtlNegativeScroll()&&(scrollLeft=element.scrollWidth-element.clientWidth-scrollLeft)),scrollLeft}__name(_getScrollLeft,"_getScrollLeft");function _setScrollLeft(element,value,rtl){rtl&&(_isRtlNegativeScroll()?value*=-1:(_isBrowserSafari()||_isBrowserChrome())&&(value=element.scrollWidth-element.clientWidth-value)),element.scrollLeft=value}__name(_setScrollLeft,"_setScrollLeft");function _clearElement(el){for(;el&&el.firstChild;)el.removeChild(el.firstChild)}__name(_clearElement,"_clearElement");function _removeFromParent(node){node&&node.parentNode&&node.parentNode.removeChild(node)}__name(_removeFromParent,"_removeFromParent");function _isInDOM(element){return!!element.offsetParent}__name(_isInDOM,"_isInDOM");function _isVisible(element){const el=element;return el.checkVisibility?el.checkVisibility({checkVisibilityCSS:!0}):!(!_isInDOM(element)||window.getComputedStyle(element).visibility!=="visible")}__name(_isVisible,"_isVisible");function _loadTemplate(template){const tempDiv=document.createElement("div");return tempDiv.innerHTML=(template||"").trim(),tempDiv.firstChild}__name(_loadTemplate,"_loadTemplate");function _isHorizontalScrollShowing(element){return element.clientWidth<element.scrollWidth}__name(_isHorizontalScrollShowing,"_isHorizontalScrollShowing");function _isVerticalScrollShowing(element){return element.clientHeight<element.scrollHeight}__name(_isVerticalScrollShowing,"_isVerticalScrollShowing");function _setElementWidth(element,width){width==="flex"?(element.style.removeProperty("width"),element.style.removeProperty("minWidth"),element.style.removeProperty("maxWidth"),element.style.flex="1 1 auto"):_setFixedWidth(element,width)}__name(_setElementWidth,"_setElementWidth");function _setFixedWidth(element,width){width=_formatSize(width),element.style.width=width.toString(),element.style.maxWidth=width.toString(),element.style.minWidth=width.toString()}__name(_setFixedWidth,"_setFixedWidth");function _setFixedHeight(element,height){height=_formatSize(height),element.style.height=height.toString(),element.style.maxHeight=height.toString(),element.style.minHeight=height.toString()}__name(_setFixedHeight,"_setFixedHeight");function _formatSize(size){return typeof size=="number"?`${size}px`:size}__name(_formatSize,"_formatSize");function _isNodeOrElement(o){return o instanceof Node||o instanceof HTMLElement}__name(_isNodeOrElement,"_isNodeOrElement");function _copyNodeList(nodeList){if(nodeList==null)return[];const result=[];return _nodeListForEach(nodeList,node=>result.push(node)),result}__name(_copyNodeList,"_copyNodeList");function _iterateNamedNodeMap(map,callback){if(map)for(let i=0;i<map.length;i++){const attr=map[i];callback(attr.name,attr.value)}}__name(_iterateNamedNodeMap,"_iterateNamedNodeMap");function _addOrRemoveAttribute(element,name,value){value==null||value===""?element.removeAttribute(name):element.setAttribute(name,value.toString())}__name(_addOrRemoveAttribute,"_addOrRemoveAttribute");function _nodeListForEach(nodeList,action){if(nodeList!=null)for(let i=0;i<nodeList.length;i++)action(nodeList[i])}__name(_nodeListForEach,"_nodeListForEach");var _a24,NumberSequence=(_a24=class{constructor(initValue=0,step=1){this.nextValue=initValue,this.step=step}next(){const valToReturn=this.nextValue;return this.nextValue+=this.step,valToReturn}peek(){return this.nextValue}skip(count){this.nextValue+=count}},__name(_a24,"NumberSequence"),_a24),SHOW_QUICK_TOOLTIP_DIFF=1e3,FADE_OUT_TOOLTIP_TIMEOUT=1e3,INTERACTIVE_HIDE_DELAY=100,_a25,_TooltipStateManager=(_a25=class extends BeanStub{constructor(parentComp,tooltipShowDelayOverride,tooltipHideDelayOverride,shouldDisplayTooltip){super(),this.parentComp=parentComp,this.tooltipShowDelayOverride=tooltipShowDelayOverride,this.tooltipHideDelayOverride=tooltipHideDelayOverride,this.shouldDisplayTooltip=shouldDisplayTooltip,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(beans){this.popupService=beans.popupService,this.userComponentFactory=beans.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const el=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(el,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(el,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(el,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(el,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(delayOption){const delay=this.gos.get(delayOption);return delay<0&&_warnOnce(`${delayOption} should not be lower than 0`),Math.max(200,delay)}getTooltipDelay(type){return type==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const trigger=this.gos.get("tooltipTrigger");return!trigger||trigger==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!_isIOSUserAgent()&&(_a25.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var _a253;const relatedTarget=e.relatedTarget,parentCompGui=this.parentComp.getGui(),tooltipGui=(_a253=this.tooltipComp)==null?void 0:_a253.getGui();this.isInteractingWithTooltip||parentCompGui.contains(relatedTarget)||this.interactionEnabled&&(tooltipGui!=null&&tooltipGui.contains(relatedTarget))||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(mouseEvent){if(this.state!=0||_a25.isLocked)return;let delay=0;mouseEvent&&(delay=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=mouseEvent||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),delay),this.state=1}isLastTooltipHiddenRecently(){const now=new Date().getTime(),then=_a25.lastTooltipHideTime;return now-then<SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(fromHideTooltip){!fromHideTooltip&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const params={...this.parentComp.getTooltipParams()};if(!_exists(params.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const callback=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(params).newAgStackInstance().then(callback)}hideTooltip(forceHide){!forceHide&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),_a25.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),forceHide&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(tooltipInstanceCopy,tooltipComp){if(this.state!==2||this.tooltipInstanceCount!==tooltipInstanceCopy){this.destroyBean(tooltipComp);return}const eGui=tooltipComp.getGui();this.tooltipComp=tooltipComp,eGui.classList.contains("ag-tooltip")||eGui.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&eGui.classList.add("ag-tooltip-animate"),this.interactionEnabled&&eGui.classList.add("ag-tooltip-interactive");const translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({eChild:eGui,ariaLabel:translate("ariaLabelTooltip","Tooltip")});if(addPopupRes&&(this.tooltipPopupDestroyFunc=addPopupRes.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const listener=__name(()=>this.setToDoNothing(),"listener");[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:listener,columnMoved:listener})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(eGui,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(eGui,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:eGui,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var _a253;const tooltipGui=(_a253=this.tooltipComp)==null?void 0:_a253.getGui(),activeEl=_getActiveDomElement(this.gos);return!!tooltipGui&&tooltipGui.contains(activeEl)}onTooltipFocusOut(e){const parentGui=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,parentGui.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const params={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...params,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...params,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const tooltipPopupDestroyFunc=this.tooltipPopupDestroyFunc,tooltipComp=this.tooltipComp,delay=this.tooltipTrigger===0?FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{tooltipPopupDestroyFunc(),this.destroyBean(tooltipComp)},delay),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(listener=>{listener&&listener()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){_a25.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},INTERACTIVE_HIDE_DELAY)}unlockService(){_a25.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},__name(_a25,"_TooltipStateManager"),_a25);_TooltipStateManager.isLocked=!1;var TooltipStateManager=_TooltipStateManager,_a26,TooltipFeature=(_a26=class extends BeanStub{constructor(ctrl,beans){super(),this.ctrl=ctrl,beans&&(this.beans=beans)}wireBeans(beans){this.beans=beans}postConstruct(){this.refreshToolTip()}setBrowserTooltip(tooltip){const name="title",eGui=this.ctrl.getGui();eGui&&(tooltip!=null&&tooltip!=""?eGui.setAttribute(name,tooltip):eGui.removeAttribute(name))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var _a253,_b,_c,_d;if(this.tooltipManager!=null)return;const parent={getTooltipParams:__name(()=>this.getTooltipParams(),"getTooltipParams"),getGui:__name(()=>this.ctrl.getGui(),"getGui")};this.tooltipManager=this.createBean(new TooltipStateManager(parent,(_b=(_a253=this.ctrl).getTooltipShowDelayOverride)==null?void 0:_b.call(_a253),(_d=(_c=this.ctrl).getTooltipHideDelayOverride)==null?void 0:_d.call(_c),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){var _a253,_b,_c,_d,_e;const ctrl=this.ctrl,column=(_a253=ctrl.getColumn)==null?void 0:_a253.call(ctrl),colDef=(_b=ctrl.getColDef)==null?void 0:_b.call(ctrl),rowNode=(_c=ctrl.getRowNode)==null?void 0:_c.call(ctrl);return{location:ctrl.getLocation(),colDef,column,rowIndex:(_d=ctrl.getRowIndex)==null?void 0:_d.call(ctrl),node:rowNode,data:rowNode==null?void 0:rowNode.data,value:this.getTooltipText(),valueFormatted:(_e=ctrl.getValueFormatted)==null?void 0:_e.call(ctrl),hideTooltipCallback:__name(()=>{var _a254;return(_a254=this.tooltipManager)==null?void 0:_a254.hideTooltip(!0)},"hideTooltipCallback")}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},__name(_a26,"TooltipFeature"),_a26),compIdSequence=new NumberSequence,RefPlaceholder=null,_a27,Component=(_a27=class extends BeanStub{constructor(template,componentSelectors){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=compIdSequence.next(),this.cssClassManager=new CssClassManager(()=>this.eGui),this.componentSelectors=new Map((componentSelectors??[]).map(comp=>[comp.selector,comp])),template&&this.setTemplate(template)}preWireBeans(beans){super.preWireBeans(beans)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(element,paramsMap){element&&this.gos&&(this.applyElementsToComponent(element),this.createChildComponentsFromTags(element,paramsMap))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(params){const{newTooltipText,showDelayOverride,hideDelayOverride,location,shouldDisplayTooltip}=params||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==newTooltipText&&(this.tooltipText=newTooltipText);const getTooltipValue=__name(()=>this.tooltipText,"getTooltipValue");newTooltipText!=null&&(this.tooltipFeature=this.createBean(new TooltipFeature({getTooltipValue,getGui:__name(()=>this.getGui(),"getGui"),getLocation:__name(()=>location??"UNKNOWN","getLocation"),getColDef:params==null?void 0:params.getColDef,getColumn:params==null?void 0:params.getColumn,getTooltipShowDelayOverride:showDelayOverride!=null?()=>showDelayOverride:void 0,getTooltipHideDelayOverride:hideDelayOverride!=null?()=>hideDelayOverride:void 0,shouldDisplayTooltip})))}getDataRefAttribute(element){return element.getAttribute?element.getAttribute("data-ref"):null}applyElementsToComponent(element,elementRef,paramsMap,newComponent=null){if(elementRef===void 0&&(elementRef=this.getDataRefAttribute(element)),elementRef){const current=this[elementRef];if(current===RefPlaceholder)this[elementRef]=newComponent??element;else{const usedAsParamRef=paramsMap&&paramsMap[elementRef];!this.suppressDataRefValidation&&!usedAsParamRef&&_warnOnce(`Issue with data-ref: ${elementRef} on ${this.constructor.name} with ${current}`)}}}createChildComponentsFromTags(parentNode,paramsMap){_copyNodeList(parentNode.childNodes).forEach(childNode=>{if(!(childNode instanceof HTMLElement))return;const childComp=this.createComponentFromElement(childNode,childComp2=>{childComp2.getGui()&&this.copyAttributesFromNode(childNode,childComp2.getGui())},paramsMap);if(childComp){if(childComp.addItems&&childNode.children.length){this.createChildComponentsFromTags(childNode,paramsMap);const items=Array.prototype.slice.call(childNode.children);childComp.addItems(items)}this.swapComponentForNode(childComp,parentNode,childNode)}else childNode.childNodes&&this.createChildComponentsFromTags(childNode,paramsMap)})}createComponentFromElement(element,afterPreCreateCallback,paramsMap){const key=element.nodeName,elementRef=this.getDataRefAttribute(element),isAgGridComponent=key.indexOf("AG-")===0,componentSelector=isAgGridComponent?this.componentSelectors.get(key):null;let newComponent=null;if(componentSelector){_a27.elementGettingCreated=element;const componentParams=paramsMap&&elementRef?paramsMap[elementRef]:void 0;newComponent=new componentSelector.component(componentParams),newComponent.setParentComponent(this),this.createBean(newComponent,null,afterPreCreateCallback)}else isAgGridComponent&&_warnOnce(`Missing selector: ${key}`);return this.applyElementsToComponent(element,elementRef,paramsMap,newComponent),newComponent}copyAttributesFromNode(source,dest){_iterateNamedNodeMap(source.attributes,(name,value)=>dest.setAttribute(name,value))}swapComponentForNode(newComponent,parentNode,childNode){const eComponent=newComponent.getGui();parentNode.replaceChild(eComponent,childNode),parentNode.insertBefore(document.createComment(childNode.nodeName),eComponent),this.addDestroyFunc(this.destroyBean.bind(this,newComponent))}activateTabIndex(elements){const tabIndex=this.gos.get("tabIndex");elements||(elements=[]),elements.length||elements.push(this.getGui()),elements.forEach(el=>el.setAttribute("tabindex",tabIndex.toString()))}setTemplate(template,componentSelectors,paramsMap){const eGui=_loadTemplate(template);this.setTemplateFromElement(eGui,componentSelectors,paramsMap)}setTemplateFromElement(element,components,paramsMap,suppressDataRefValidation=!1){if(this.eGui=element,this.suppressDataRefValidation=suppressDataRefValidation,components)for(let i=0;i<components.length;i++){const component=components[i];this.componentSelectors.set(component.selector,component)}this.wireTemplate(element,paramsMap)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(component){this.parentComponent=component}getParentComponent(){return this.parentComponent}setGui(eGui){this.eGui=eGui}queryForHtmlElement(cssSelector){return this.eGui.querySelector(cssSelector)}getContainerAndElement(newChild,container){let parent=container;return newChild==null?null:(parent||(parent=this.eGui),_isNodeOrElement(newChild)?{element:newChild,parent}:{element:newChild.getGui(),parent})}prependChild(newChild,container){const{element,parent}=this.getContainerAndElement(newChild,container)||{};!element||!parent||parent.insertAdjacentElement("afterbegin",element)}appendChild(newChild,container){const{element,parent}=this.getContainerAndElement(newChild,container)||{};!element||!parent||parent.appendChild(element)}isDisplayed(){return this.displayed}setVisible(visible,options={}){if(visible!==this.visible){this.visible=visible;const{skipAriaHidden}=options;_setVisible(this.eGui,visible,{skipAriaHidden})}}setDisplayed(displayed,options={}){if(displayed!==this.displayed){this.displayed=displayed;const{skipAriaHidden}=options;_setDisplayed(this.eGui,displayed,{skipAriaHidden});const event={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(event)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(event,listener,options){this.eGui.addEventListener(event,listener,options),this.addDestroyFunc(()=>this.eGui.removeEventListener(event,listener))}addCssClass(className){this.cssClassManager.addCssClass(className)}removeCssClass(className){this.cssClassManager.removeCssClass(className)}containsCssClass(className){return this.cssClassManager.containsCssClass(className)}addOrRemoveCssClass(className,addOrRemove){this.cssClassManager.addOrRemoveCssClass(className,addOrRemove)}},__name(_a27,"_Component"),_a27),iconNameClassMap={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},ICONS=(()=>{const icons=new Set(Object.values(iconNameClassMap));return icons.add("eye"),icons})();function _createIcon(iconName,gos,column){const iconContents=_createIconNoSpan(iconName,gos,column);if(iconContents){const{className}=iconContents;if(typeof className=="string"&&className.indexOf("ag-icon")>-1||typeof className=="object"&&className["ag-icon"])return iconContents}const eResult=document.createElement("span");return eResult.appendChild(iconContents),eResult}__name(_createIcon,"_createIcon");function _createIconNoSpan(iconName,gos,column,forceCreate){let userProvidedIcon=null;const icons=column&&column.getColDef().icons;if(icons&&(userProvidedIcon=icons[iconName]),gos&&!userProvidedIcon){const optionsIcons=gos.get("icons");optionsIcons&&(userProvidedIcon=optionsIcons[iconName])}if(userProvidedIcon){let rendererResult;if(typeof userProvidedIcon=="function")rendererResult=userProvidedIcon();else if(typeof userProvidedIcon=="string")rendererResult=userProvidedIcon;else throw new Error("icon from grid options needs to be a string or a function");if(typeof rendererResult=="string")return _loadTemplate(rendererResult);if(_isNodeOrElement(rendererResult))return rendererResult;_warnOnce("iconRenderer should return back a string or a dom object")}else{const span=document.createElement("span");let cssClass=iconNameClassMap[iconName]??(ICONS.has(iconName)?iconName:void 0);return cssClass||(_warnOnce(`Did not find icon ${iconName}`),cssClass=""),span.setAttribute("class",`ag-icon ag-icon-${cssClass}`),span.setAttribute("unselectable","on"),_setAriaRole(span,"presentation"),span}}__name(_createIconNoSpan,"_createIconNoSpan");var _a28,DragAndDropImageComponent=(_a28=class extends Component{constructor(){super(...arguments),this.dragSource=null,this.eIcon=RefPlaceholder,this.eLabel=RefPlaceholder}postConstruct(){const create=__name(iconName=>_createIcon(iconName,this.gos,null),"create");this.dropIconMap={pinned:create("columnMovePin"),hide:create("columnMoveHide"),move:create("columnMoveMove"),left:create("columnMoveLeft"),right:create("columnMoveRight"),group:create("columnMoveGroup"),aggregate:create("columnMoveValue"),pivot:create("columnMovePivot"),notAllowed:create("dropNotAllowed")}}init(params){this.dragSource=params.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(iconName,shake=!1){var _a253,_b;_clearElement(this.eIcon);let eIcon=null;iconName||(iconName=(_a253=this.dragSource)!=null&&_a253.getDefaultIconName?(_b=this.dragSource)==null?void 0:_b.getDefaultIconName():"notAllowed"),eIcon=this.dropIconMap[iconName],this.eIcon.classList.toggle("ag-shake-left-to-right",shake),!(eIcon===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&eIcon&&this.eIcon.appendChild(eIcon)}setLabel(label){this.eLabel.textContent=_escapeString(label)}},__name(_a28,"DragAndDropImageComponent"),_a28);function _areEventsNear(e1,e2,pixelCount){if(pixelCount===0)return!1;const diffX=Math.abs(e1.clientX-e2.clientX),diffY=Math.abs(e1.clientY-e2.clientY);return Math.max(diffX,diffY)<=pixelCount}__name(_areEventsNear,"_areEventsNear");var _a29,TouchListener=(_a29=class{constructor(eElement,preventMouseClick=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new LocalEventService,this.eElement=eElement,this.preventMouseClick=preventMouseClick;const startListener=this.onTouchStart.bind(this),moveListener=this.onTouchMove.bind(this),endListener=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",startListener,{passive:!0}),this.eElement.addEventListener("touchmove",moveListener,{passive:!0}),this.eElement.addEventListener("touchend",endListener,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",startListener,{passive:!0}),this.eElement.removeEventListener("touchmove",moveListener,{passive:!0}),this.eElement.removeEventListener("touchend",endListener,{passive:!1})})}getActiveTouch(touchList){for(let i=0;i<touchList.length;i++)if(touchList[i].identifier===this.touchStart.identifier)return touchList[i];return null}addEventListener(eventType,listener){this.localEventService.addEventListener(eventType,listener)}removeEventListener(eventType,listener){this.localEventService.removeEventListener(eventType,listener)}onTouchStart(touchEvent){if(this.touching)return;this.touchStart=touchEvent.touches[0],this.touching=!0,this.moved=!1;const touchStartCopy=this.touchStart;window.setTimeout(()=>{const touchesMatch=this.touchStart===touchStartCopy;if(this.touching&&touchesMatch&&!this.moved){this.moved=!0;const event={type:"longTap",touchStart:this.touchStart,touchEvent};this.localEventService.dispatchEvent(event)}},500)}onTouchMove(touchEvent){if(!this.touching)return;const touch=this.getActiveTouch(touchEvent.touches);if(!touch)return;!_areEventsNear(touch,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(touchEvent){if(this.touching){if(!this.moved){const event={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(event),this.checkForDoubleTap()}this.preventMouseClick&&touchEvent.cancelable&&touchEvent.preventDefault(),this.touching=!1}}checkForDoubleTap(){const now=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(now-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const event={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(event),this.lastTapTime=null}else this.lastTapTime=now;else this.lastTapTime=now}destroy(){this.destroyFuncs.forEach(func=>func())}},__name(_a29,"TouchListener"),_a29);function makeSpan(dataRefSuffix,classSuffix){return`<span data-ref="eSort${dataRefSuffix}" class="ag-sort-indicator-icon ag-sort-${classSuffix} ag-hidden" aria-hidden="true"></span>`}__name(makeSpan,"makeSpan");var SortIndicatorTemplate=`<span class="ag-sort-indicator-container">
        ${makeSpan("Order","order")}
        ${makeSpan("Asc","ascending-icon")}
        ${makeSpan("Desc","descending-icon")}
        ${makeSpan("Mixed","mixed-icon")}
        ${makeSpan("None","none-icon")}
    </span>`,_a30,SortIndicatorComp=(_a30=class extends Component{constructor(skipTemplate){super(),this.eSortOrder=RefPlaceholder,this.eSortAsc=RefPlaceholder,this.eSortDesc=RefPlaceholder,this.eSortMixed=RefPlaceholder,this.eSortNone=RefPlaceholder,skipTemplate||this.setTemplate(SortIndicatorTemplate)}wireBeans(beans){this.sortController=beans.sortController}attachCustomElements(eSortOrder,eSortAsc,eSortDesc,eSortMixed,eSortNone){this.eSortOrder=eSortOrder,this.eSortAsc=eSortAsc,this.eSortDesc=eSortDesc,this.eSortMixed=eSortMixed,this.eSortNone=eSortNone}setupSort(column,suppressOrder=!1){if(this.column=column,this.suppressOrder=suppressOrder,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,column),this.addInIcon("sortDescending",this.eSortDesc,column),this.addInIcon("sortUnSort",this.eSortNone,column);const updateIcons=this.updateIcons.bind(this),sortUpdated=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",updateIcons),this.addManagedEventListeners({newColumnsLoaded:updateIcons,sortChanged:sortUpdated,columnRowGroupChanged:sortUpdated}),this.onSortChanged()}addInIcon(iconName,eParent,column){if(eParent==null)return;const eIcon=_createIconNoSpan(iconName,this.gos,column);eIcon&&eParent.appendChild(eIcon)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const sortDirection=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const isAscending=sortDirection==="asc";_setDisplayed(this.eSortAsc,isAscending,{skipAriaHidden:!0})}if(this.eSortDesc){const isDescending=sortDirection==="desc";_setDisplayed(this.eSortDesc,isDescending,{skipAriaHidden:!0})}if(this.eSortNone){const alwaysHideNoSort=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),isNone=sortDirection==null;_setDisplayed(this.eSortNone,!alwaysHideNoSort&&isNone,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const isColumnShowingRowGroup=this.column.getColDef().showRowGroup;_isColumnsSortingCoupledToGroup(this.gos)&&isColumnShowingRowGroup&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const isMixedSort=this.sortController.getDisplaySortForColumn(this.column)==="mixed";_setDisplayed(this.eSortMixed,isMixedSort,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const allColumnsWithSorting=this.sortController.getColumnsWithSortingOrdered(),indexThisCol=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,moreThanOneColSorting=allColumnsWithSorting.some(col=>this.sortController.getDisplaySortIndexForColumn(col)??!1),showIndex=indexThisCol>=0&&moreThanOneColSorting;_setDisplayed(this.eSortOrder,showIndex,{skipAriaHidden:!0}),indexThisCol>=0?this.eSortOrder.textContent=(indexThisCol+1).toString():_clearElement(this.eSortOrder)}},__name(_a30,"SortIndicatorComp"),_a30),SortIndicatorSelector={selector:"AG-SORT-INDICATOR",component:SortIndicatorComp},HeaderCompTemplate=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,_a31,HeaderComp=(_a31=class extends Component{constructor(){super(...arguments),this.eFilter=RefPlaceholder,this.eFilterButton=RefPlaceholder,this.eSortIndicator=RefPlaceholder,this.eMenu=RefPlaceholder,this.eLabel=RefPlaceholder,this.eText=RefPlaceholder,this.eSortOrder=RefPlaceholder,this.eSortAsc=RefPlaceholder,this.eSortDesc=RefPlaceholder,this.eSortMixed=RefPlaceholder,this.eSortNone=RefPlaceholder,this.lastMovingChanged=0}wireBeans(beans){this.sortController=beans.sortController,this.menuService=beans.menuService,this.funcColsService=beans.funcColsService}destroy(){super.destroy()}refresh(params){const oldParams=this.params;return this.params=params,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||oldParams.enableFilterButton!=params.enableFilterButton||oldParams.enableFilterIcon!=params.enableFilterIcon?!1:(this.setDisplayName(params),!0)}workOutTemplate(){let template=this.params.template??HeaderCompTemplate;return template=template&&template.trim?template.trim():template,template}init(params){this.params=params,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[SortIndicatorSelector]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(params)}setDisplayName(params){if(this.currentDisplayName!=params.displayName){this.currentDisplayName=params.displayName;const displayNameSanitised=_escapeString(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=displayNameSanitised)}}addInIcon(iconName,eParent,column){if(eParent==null)return;const eIcon=_createIconNoSpan(iconName,this.gos,column);eIcon&&eParent.appendChild(eIcon)}setupTap(){const{gos}=this;if(gos.get("suppressTouch"))return;const touchListener=new TouchListener(this.getGui(),!0),suppressMenuHide=this.shouldSuppressMenuHide(),tapMenuButton=suppressMenuHide&&_exists(this.eMenu),menuTouchListener=tapMenuButton?new TouchListener(this.eMenu,!0):touchListener;if(this.params.enableMenu){const eventType=tapMenuButton?"tap":"longTap",showMenuFn=__name(event=>this.params.showColumnMenuAfterMouseClick(event.touchStart),"showMenuFn");this.addManagedListeners(menuTouchListener,{[eventType]:showMenuFn})}if(this.params.enableSorting){const tapListener=__name(event=>{var _a253,_b;const target=event.touchStart.target;suppressMenuHide&&((_a253=this.eMenu)!=null&&_a253.contains(target)||(_b=this.eFilterButton)!=null&&_b.contains(target))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")},"tapListener");this.addManagedListeners(touchListener,{tap:tapListener})}if(this.params.enableFilterButton){const filterButtonTouchListener=new TouchListener(this.eFilterButton,!0);this.addManagedListeners(filterButtonTouchListener,{tap:__name(()=>this.params.showFilter(this.eFilterButton),"tap")}),this.addDestroyFunc(()=>filterButtonTouchListener.destroy())}this.addDestroyFunc(()=>touchListener.destroy()),tapMenuButton&&this.addDestroyFunc(()=>menuTouchListener.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){_removeFromParent(this.eMenu),this.eMenu=void 0;return}const isLegacyMenu=this.menuService.isLegacyMenuEnabled();this.addInIcon(isLegacyMenu?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!isLegacyMenu),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:__name(()=>this.params.showColumnMenu(this.eMenu),"click")}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(isFilterShortcut){const column=this.params.column,isLegacyMenuEnabled=this.menuService.isLegacyMenuEnabled();if(isFilterShortcut&&!isLegacyMenuEnabled){if(this.menuService.isFilterMenuInHeaderEnabled(column))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new SortIndicatorComp(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:__name(()=>{this.lastMovingChanged=new Date().getTime()},"movingChanged")}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:__name(event=>{const moving=this.params.column.isMoving(),movedRecently=new Date().getTime()-this.lastMovingChanged<50;if(!(moving||movedRecently)){const multiSort=this.gos.get("multiSortKey")==="ctrl"?event.ctrlKey||event.metaKey:event.shiftKey;this.params.progressSort(multiSort)}},"click")});const onSortingChanged=__name(()=>{const sort=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",sort==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",sort==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!sort),this.params.column.getColDef().showRowGroup){const sourceColumns=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),isMultiSorting=!(sourceColumns==null?void 0:sourceColumns.every(sourceCol=>this.params.column.getSort()==sourceCol.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",isMultiSorting)}},"onSortingChanged");this.addManagedEventListeners({sortChanged:onSortingChanged,columnRowGroupChanged:onSortingChanged})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:__name(()=>this.params.showFilter(this.eFilterButton),"click")}):this.eFilterButton=void 0}configureFilter(enabled,element,filterChangedCallback){if(!enabled)return _removeFromParent(element),!1;const column=this.params.column;return this.addInIcon("filter",element,column),this.addManagedListeners(column,{filterChanged:filterChangedCallback}),filterChangedCallback(),!0}onFilterChangedIcon(){const filterPresent=this.params.column.isFilterActive();_setDisplayed(this.eFilter,filterPresent,{skipAriaHidden:!0})}onFilterChangedButton(){const filterPresent=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",filterPresent)}getAnchorElementForMenu(isFilter){return isFilter?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},__name(_a31,"HeaderComp"),_a31),_a32,HeaderGroupComp=(_a32=class extends Component{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=RefPlaceholder,this.agClosed=RefPlaceholder,this.agLabel=RefPlaceholder}wireBeans(beans){this.columnModel=beans.columnModel}destroy(){super.destroy()}init(params){this.params=params,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&_warnOnce("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const expandAction=__name(event=>{if(_isStopPropagationForAgGrid(event))return;const newExpandedValue=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")},"expandAction");this.addTouchAndClickListeners(this.agClosed,expandAction),this.addTouchAndClickListeners(this.agOpened,expandAction);const stopPropagationAction=__name(event=>{_stopPropagationForAgGrid(event)},"stopPropagationAction");this.addManagedElementListeners(this.agClosed,{dblclick:stopPropagationAction}),this.addManagedElementListeners(this.agOpened,{dblclick:stopPropagationAction}),this.addManagedElementListeners(this.getGui(),{dblclick:expandAction}),this.updateIconVisibility();const providedColumnGroup=this.params.columnGroup.getProvidedColumnGroup(),updateIcon=this.updateIconVisibility.bind(this);this.addManagedListeners(providedColumnGroup,{expandedChanged:updateIcon,expandableChanged:updateIcon})}addTouchAndClickListeners(eElement,action){const touchListener=new TouchListener(eElement,!0);this.addManagedListeners(touchListener,{tap:action}),this.addDestroyFunc(()=>touchListener.destroy()),this.addManagedElementListeners(eElement,{click:action})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const expanded=this.params.columnGroup.isExpanded();_setDisplayed(this.agOpened,expanded),_setDisplayed(this.agClosed,!expanded)}else _setDisplayed(this.agOpened,!1),_setDisplayed(this.agClosed,!1)}addInIcon(iconName,element){const eIcon=_createIconNoSpan(iconName,this.gos,null);eIcon&&element.appendChild(eIcon)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){_setDisplayed(this.agOpened,!1),_setDisplayed(this.agClosed,!1);return}}setupLabel(){var _a253;const{displayName,columnGroup}=this.params;if(_exists(displayName)){const displayNameSanitised=_escapeString(displayName,!0);this.agLabel.textContent=displayNameSanitised}this.addOrRemoveCssClass("ag-sticky-label",!((_a253=columnGroup.getColGroupDef())!=null&&_a253.suppressStickyLabel))}},__name(_a32,"HeaderGroupComp"),_a32),ARROW_UP="↑",ARROW_DOWN="↓",_a33,AnimateShowChangeCellRenderer=(_a33=class extends Component{constructor(){super(),this.refreshCount=0;const template=document.createElement("span"),delta=document.createElement("span");delta.setAttribute("class","ag-value-change-delta");const value=document.createElement("span");value.setAttribute("class","ag-value-change-value"),template.appendChild(delta),template.appendChild(value),this.setTemplateFromElement(template)}wireBeans(beans){this.filterManager=beans.filterManager}init(params){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(params,!0)}showDelta(params,delta){const absDelta=Math.abs(delta),valueFormatted=params.formatValue(absDelta),valueToUse=_exists(valueFormatted)?valueFormatted:absDelta,deltaUp=delta>=0;deltaUp?this.eDelta.textContent=ARROW_UP+valueToUse:this.eDelta.textContent=ARROW_DOWN+valueToUse,this.eDelta.classList.toggle("ag-value-change-delta-up",deltaUp),this.eDelta.classList.toggle("ag-value-change-delta-down",!deltaUp)}setTimerToRemoveDelta(){this.refreshCount++;const refreshCountCopy=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{refreshCountCopy===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),_clearElement(this.eDelta)}refresh(params,isInitialRender=!1){var _a253;const value=params.value;if(value===this.lastValue||(_exists(params.valueFormatted)?this.eValue.textContent=params.valueFormatted:_exists(params.value)?this.eValue.textContent=value:_clearElement(this.eValue),(_a253=this.filterManager)!=null&&_a253.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof value=="number"&&typeof this.lastValue=="number"){const delta=value-this.lastValue;this.showDelta(params,delta)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),isInitialRender||this.setTimerToRemoveDelta(),this.lastValue=value,!0}},__name(_a33,"AnimateShowChangeCellRenderer"),_a33),_a34,AnimateSlideCellRenderer=(_a34=class extends Component{constructor(){super(),this.refreshCount=0;const template=document.createElement("span"),slide=document.createElement("span");slide.setAttribute("class","ag-value-slide-current"),template.appendChild(slide),this.setTemplateFromElement(template),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(beans){this.filterManager=beans.filterManager}init(params){this.refresh(params,!0)}addSlideAnimation(){this.refreshCount++;const refreshCountCopy=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const prevElement=document.createElement("span");prevElement.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=prevElement,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{refreshCountCopy===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{refreshCountCopy===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(params,isInitialRender=!1){var _a253;let value=params.value;return _missing(value)&&(value=""),value===this.lastValue||(_a253=this.filterManager)!=null&&_a253.isSuppressFlashingCellsBecauseFiltering()?!1:(isInitialRender||this.addSlideAnimation(),this.lastValue=value,_exists(params.valueFormatted)?this.eCurrent.textContent=params.valueFormatted:_exists(params.value)?this.eCurrent.textContent=value:_clearElement(this.eCurrent),!0)}},__name(_a34,"AnimateSlideCellRenderer"),_a34),_a35,KeyCode=(_a35=class{},__name(_a35,"KeyCode"),_a35);KeyCode.BACKSPACE="Backspace";KeyCode.TAB="Tab";KeyCode.ENTER="Enter";KeyCode.ESCAPE="Escape";KeyCode.SPACE=" ";KeyCode.LEFT="ArrowLeft";KeyCode.UP="ArrowUp";KeyCode.RIGHT="ArrowRight";KeyCode.DOWN="ArrowDown";KeyCode.DELETE="Delete";KeyCode.F2="F2";KeyCode.PAGE_UP="PageUp";KeyCode.PAGE_DOWN="PageDown";KeyCode.PAGE_HOME="Home";KeyCode.PAGE_END="End";KeyCode.A="KeyA";KeyCode.C="KeyC";KeyCode.D="KeyD";KeyCode.V="KeyV";KeyCode.X="KeyX";KeyCode.Y="KeyY";KeyCode.Z="KeyZ";var _a36,AgAbstractLabel=(_a36=class extends Component{constructor(config,template,components){super(template,components),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=config||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator,label,labelWidth,labelAlignment,disabled}=this.config;disabled!=null&&this.setDisabled(disabled),labelSeparator!=null&&this.setLabelSeparator(labelSeparator),label!=null&&this.setLabel(label),labelWidth!=null&&this.setLabelWidth(labelWidth),this.setLabelAlignment(labelAlignment||this.labelAlignment),this.refreshLabel()}refreshLabel(){_clearElement(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(_setDisplayed(this.eLabel,!1),_setAriaRole(this.eLabel,"presentation")):(_setDisplayed(this.eLabel,!0),_setAriaRole(this.eLabel,null))}setLabelSeparator(labelSeparator){return this.labelSeparator===labelSeparator?this:(this.labelSeparator=labelSeparator,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(label){return this.label===label?this:(this.label=label,this.refreshLabel(),this)}setLabelAlignment(alignment){const eGuiClassList=this.getGui().classList;return eGuiClassList.toggle("ag-label-align-left",alignment==="left"),eGuiClassList.toggle("ag-label-align-right",alignment==="right"),eGuiClassList.toggle("ag-label-align-top",alignment==="top"),this}setLabelEllipsis(hasEllipsis){return this.eLabel.classList.toggle("ag-label-ellipsis",hasEllipsis),this}setLabelWidth(width){return this.label==null?this:(_setElementWidth(this.eLabel,width),this)}setDisabled(disabled){disabled=!!disabled;const element=this.getGui();return _setDisabled(element,disabled),element.classList.toggle("ag-disabled",disabled),this.disabled=disabled,this}isDisabled(){return!!this.disabled}},__name(_a36,"AgAbstractLabel"),_a36),_a37,AgAbstractField=(_a37=class extends AgAbstractLabel{constructor(config,template,components,className){super(config,template,components),this.className=className}postConstruct(){super.postConstruct();const{width,value,onValueChange}=this.config;width!=null&&this.setWidth(width),value!=null&&this.setValue(value),onValueChange!=null&&this.onValueChange(onValueChange),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(label){return super.setLabel(label),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const ariaEl=this.getAriaElement(),labelId=this.getLabelId(),label=this.getLabel();label==null||label==""||_getAriaLabel(ariaEl)!==null?_setAriaLabelledBy(ariaEl,""):_setAriaLabelledBy(ariaEl,labelId??"")}setAriaLabel(label){return _setAriaLabel(this.getAriaElement(),label),this.refreshAriaLabelledBy(),this}onValueChange(callbackFn){return this.addManagedListeners(this,{fieldValueChanged:__name(()=>callbackFn(this.getValue()),"fieldValueChanged")}),this}getWidth(){return this.getGui().clientWidth}setWidth(width){return _setFixedWidth(this.getGui(),width),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(value,silent){return this.value===value?this:(this.previousValue=this.value,this.value=value,silent||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},__name(_a37,"AgAbstractField"),_a37),_a38,AgAbstractInputField=(_a38=class extends AgAbstractField{constructor(config,className,inputType="text",displayFieldTag="input"){super(config,(config==null?void 0:config.template)??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${displayFieldTag} data-ref="eInput" class="ag-input-field-input"></${displayFieldTag}>
                </div>
            </div>`,[],className),this.inputType=inputType,this.displayFieldTag=displayFieldTag,this.eLabel=RefPlaceholder,this.eWrapper=RefPlaceholder,this.eInput=RefPlaceholder}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName,inputWidth}=this.config;inputName!=null&&this.setInputName(inputName),inputWidth!=null&&this.setInputWidth(inputWidth),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:__name(e=>this.setValue(e.target.value),"input")})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(width){return _setElementWidth(this.eWrapper,width),this}setInputName(name){return this.getInputElement().setAttribute("name",name),this}getFocusableElement(){return this.eInput}setMaxLength(length){const eInput=this.eInput;return eInput.maxLength=length,this}setInputPlaceholder(placeholder){return _addOrRemoveAttribute(this.eInput,"placeholder",placeholder),this}setInputAriaLabel(label){return _setAriaLabel(this.eInput,label),this.refreshAriaLabelledBy(),this}setDisabled(disabled){return _setDisabled(this.eInput,disabled),super.setDisabled(disabled)}setAutoComplete(value){if(value===!0)_addOrRemoveAttribute(this.eInput,"autocomplete",null);else{const autoCompleteValue=typeof value=="string"?value:"off";_addOrRemoveAttribute(this.eInput,"autocomplete",autoCompleteValue)}return this}},__name(_a38,"AgAbstractInputField"),_a38),_a39,AgCheckbox=(_a39=class extends AgAbstractInputField{constructor(config,className="ag-checkbox",inputType="checkbox"){super(config,className,inputType),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly,passive}=this.config;typeof readOnly=="boolean"&&this.setReadOnly(readOnly),typeof passive=="boolean"&&this.setPassive(passive)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(passive){this.passive=passive}isReadOnly(){return this.readOnly}setReadOnly(readOnly){this.eWrapper.classList.toggle("ag-disabled",readOnly),this.eInput.disabled=readOnly,this.readOnly=readOnly}setDisabled(disabled){return this.eWrapper.classList.toggle("ag-disabled",disabled),super.setDisabled(disabled)}toggle(){if(this.eInput.disabled)return;const previousValue=this.isSelected(),nextValue=this.getNextValue();this.passive?this.dispatchChange(nextValue,previousValue):this.setValue(nextValue)}getValue(){return this.isSelected()}setValue(value,silent){return this.refreshSelectedClass(value),this.setSelected(value,silent),this}setName(name){const input=this.getInputElement();return input.name=name,this}isSelected(){return this.selected}setSelected(selected,silent){this.isSelected()!==selected&&(this.previousValue=this.isSelected(),selected=this.selected=typeof selected=="boolean"?selected:void 0,this.eInput.checked=selected,this.eInput.indeterminate=selected===void 0,silent||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(selected,previousValue,event){this.dispatchLocalEvent({type:"fieldValueChanged",selected,previousValue,event});const input=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:input.id,name:input.name,selected,previousValue})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const previousValue=this.isSelected(),selected=this.selected=e.target.checked;this.refreshSelectedClass(selected),this.dispatchChange(selected,previousValue,e)}refreshSelectedClass(value){this.eWrapper.classList.toggle("ag-checked",value===!0),this.eWrapper.classList.toggle("ag-indeterminate",value==null)}},__name(_a39,"AgCheckbox"),_a39),AgCheckboxSelector={selector:"AG-CHECKBOX",component:AgCheckbox},_a40,CheckboxCellRenderer=(_a40=class extends Component{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[AgCheckboxSelector]),this.eCheckbox=RefPlaceholder}init(params){this.refresh(params);const inputEl=this.eCheckbox.getInputElement();inputEl.setAttribute("tabindex","-1"),_setAriaLive(inputEl,"polite"),this.addManagedListeners(inputEl,{click:__name(event=>{if(_stopPropagationForAgGrid(event),this.eCheckbox.isDisabled())return;const isSelected=this.eCheckbox.getValue();this.onCheckboxChanged(isSelected)},"click"),dblclick:__name(event=>{_stopPropagationForAgGrid(event)},"dblclick")}),this.addManagedElementListeners(this.params.eGridCell,{keydown:__name(event=>{if(event.key===KeyCode.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===_getActiveDomElement(this.gos)&&this.eCheckbox.toggle();const isSelected=this.eCheckbox.getValue();this.onCheckboxChanged(isSelected),event.preventDefault()}},"keydown")})}refresh(params){return this.params=params,this.updateCheckbox(params),!0}updateCheckbox(params){var _a253;let isSelected,displayed=!0;if(params.node.group&&params.column)if(typeof params.value=="boolean")isSelected=params.value;else{const colId=params.column.getColId();colId.startsWith(GROUP_AUTO_COLUMN_ID)?isSelected=params.value==null||params.value===""?void 0:params.value==="true":params.node.aggData&&params.node.aggData[colId]!==void 0?isSelected=params.value??void 0:displayed=!1}else isSelected=params.value??void 0;if(!displayed){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(isSelected);const disabled=params.disabled!=null?params.disabled:!((_a253=params.column)!=null&&_a253.isCellEditable(params.node));this.eCheckbox.setDisabled(disabled);const translate=this.localeService.getLocaleTextFunc(),stateName=_getAriaCheckboxStateName(translate,isSelected),ariaLabel=disabled?stateName:`${translate("ariaToggleCellValue","Press SPACE to toggle cell value")} (${stateName})`;this.eCheckbox.setInputAriaLabel(ariaLabel)}onCheckboxChanged(isSelected){const{column,node,value}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column,colDef:column==null?void 0:column.getColDef(),data:node.data,node,rowIndex:node.rowIndex,rowPinned:node.rowPinned,value});const valueChanged=this.params.node.setDataValue(this.params.column,isSelected,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column,colDef:column==null?void 0:column.getColDef(),data:node.data,node,rowIndex:node.rowIndex,rowPinned:node.rowPinned,value,oldValue:value,newValue:isSelected,valueChanged}),valueChanged||this.updateCheckbox(this.params)}},__name(_a40,"CheckboxCellRenderer"),_a40),_a41,LoadingCellRenderer=(_a41=class extends Component{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=RefPlaceholder,this.eLoadingText=RefPlaceholder}init(params){params.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const localeTextFunc=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=localeTextFunc("loadingError","ERR")}setupLoading(){const eLoadingIcon=_createIconNoSpan("groupLoading",this.gos,null);eLoadingIcon&&this.eLoadingIcon.appendChild(eLoadingIcon);const localeTextFunc=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=localeTextFunc("loadingOoo","Loading")}refresh(params){return!1}destroy(){super.destroy()}},__name(_a41,"LoadingCellRenderer"),_a41),_a42,SkeletonCellRenderer=(_a42=class extends Component{constructor(){super('<div class="ag-skeleton-container"></div>')}init(params){const id=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",id),this.addDestroyFunc(()=>_setAriaLabelledBy(params.eParentOfValue)),_setAriaLabelledBy(params.eParentOfValue,id),params.node.failedLoad?this.setupFailed():this.setupLoading(params)}setupFailed(){const localeTextFunc=this.localeService.getLocaleTextFunc();this.getGui().innerText=localeTextFunc("loadingError","ERR");const ariaFailed=localeTextFunc("ariaSkeletonCellLoadingFailed","Row failed to load");_setAriaLabel(this.getGui(),ariaFailed)}setupLoading(params){const skeletonEffect=_getDocument(this.gos).createElement("div");skeletonEffect.classList.add("ag-skeleton-effect");const rowIndex=params.node.rowIndex;if(rowIndex!=null){const width=75+25*(rowIndex%2===0?Math.sin(rowIndex):Math.cos(rowIndex));skeletonEffect.style.width=`${width}%`}this.getGui().appendChild(skeletonEffect);const ariaLoading=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");_setAriaLabel(this.getGui(),ariaLoading)}refresh(params){return!1}destroy(){super.destroy()}},__name(_a42,"SkeletonCellRenderer"),_a42),_a43,OverlayComponent=(_a43=class extends Component{constructor(){super()}destroy(){super.destroy()}},__name(_a43,"OverlayComponent"),_a43),_a44,LoadingOverlayComponent=(_a44=class extends OverlayComponent{init(){var _a253;const customTemplate=_makeNull((_a253=this.gos.get("overlayLoadingTemplate"))==null?void 0:_a253.trim());if(this.setTemplate(customTemplate??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!customTemplate){const localeTextFunc=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=localeTextFunc("loadingOoo","Loading...")})}}},__name(_a44,"LoadingOverlayComponent"),_a44),_a45,NoRowsOverlayComponent=(_a45=class extends OverlayComponent{init(){var _a253;const customTemplate=_makeNull((_a253=this.gos.get("overlayNoRowsTemplate"))==null?void 0:_a253.trim());if(this.setTemplate(customTemplate??'<span class="ag-overlay-no-rows-center"></span>'),!customTemplate){const localeTextFunc=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=localeTextFunc("noRowsToShow","No Rows To Show")})}}},__name(_a45,"NoRowsOverlayComponent"),_a45),_a46,PopupComponent=(_a46=class extends Component{isPopup(){return!0}setParentComponent(container){container.addCssClass("ag-has-popup"),super.setParentComponent(container)}destroy(){const parentComp=this.parentComponent;parentComp&&parentComp.isAlive()&&parentComp.getGui().classList.remove("ag-has-popup"),super.destroy()}},__name(_a46,"PopupComponent"),_a46),_a47,TooltipComponent=(_a47=class extends PopupComponent{constructor(){super('<div class="ag-tooltip"></div>')}init(params){const{value}=params;this.getGui().textContent=_escapeString(value,!0)}},__name(_a47,"TooltipComponent"),_a47);function _fuzzyCheckStrings(inputValues,validValues,allSuggestions){const fuzzyMatches={},invalidInputs=inputValues.filter(inputValue=>!validValues.some(validValue=>validValue===inputValue));return invalidInputs.length>0&&invalidInputs.forEach(invalidInput=>fuzzyMatches[invalidInput]=_fuzzySuggestions(invalidInput,allSuggestions).values),fuzzyMatches}__name(_fuzzyCheckStrings,"_fuzzyCheckStrings");function _fuzzySuggestions(inputValue,allSuggestions,hideIrrelevant,filterByPercentageOfBestMatch){let thisSuggestions=allSuggestions.map((text,idx)=>({value:text,relevance:stringWeightedDistances(inputValue.toLowerCase(),text.toLocaleLowerCase()),idx}));if(thisSuggestions.sort((a,b)=>b.relevance-a.relevance),hideIrrelevant&&(thisSuggestions=thisSuggestions.filter(suggestion=>suggestion.relevance!==0)),thisSuggestions.length>0&&filterByPercentageOfBestMatch&&filterByPercentageOfBestMatch>0){const limit=thisSuggestions[0].relevance*filterByPercentageOfBestMatch;thisSuggestions=thisSuggestions.filter(suggestion=>limit-suggestion.relevance<0)}const values=[],indices=[];for(const suggestion of thisSuggestions)values.push(suggestion.value),indices.push(suggestion.idx);return{values,indices}}__name(_fuzzySuggestions,"_fuzzySuggestions");function stringWeightedDistances(str1,str2){const a=str1.replace(/\s/g,""),b=str2.replace(/\s/g,"");let weight=0,lastIndex=-1;for(let i=0;i<a.length;i++){const idx=b.indexOf(a[i],lastIndex+1);idx!==-1&&(lastIndex=idx,weight+=100-lastIndex*100/1e4*100)}return weight}__name(stringWeightedDistances,"stringWeightedDistances");var _a48,UserComponentRegistry=(_a48=class extends BeanStub{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:DragAndDropImageComponent,agColumnHeader:HeaderComp,agColumnGroupHeader:HeaderGroupComp,agSortIndicator:SortIndicatorComp,agAnimateShowChangeCellRenderer:AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:AnimateSlideCellRenderer,agLoadingCellRenderer:LoadingCellRenderer,agSkeletonCellRenderer:SkeletonCellRenderer,agCheckboxCellRenderer:CheckboxCellRenderer,agLoadingOverlay:LoadingOverlayComponent,agNoRowsOverlay:NoRowsOverlayComponent,agTooltipComponent:TooltipComponent},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const comps=this.gos.get("components");comps!=null&&_iterateObject(comps,(key,component)=>this.registerJsComponent(key,component))}registerDefaultComponent(name,component,params){this.agGridDefaults[name]=component,params&&(this.agGridDefaultParams[name]=params)}registerJsComponent(name,component){this.jsComps[name]=component}retrieve(propertyName,name){const createResult=__name((component,componentFromFramework,params)=>({componentFromFramework,component,params}),"createResult"),registeredViaFrameworkComp=this.getFrameworkOverrides().frameworkComponent(name,this.gos.get("components"));if(registeredViaFrameworkComp!=null)return createResult(registeredViaFrameworkComp,!0);const jsComponent=this.jsComps[name];if(jsComponent){const isFwkComp=this.getFrameworkOverrides().isFrameworkComponent(jsComponent);return createResult(jsComponent,isFwkComp)}const defaultComponent=this.agGridDefaults[name];if(defaultComponent)return createResult(defaultComponent,!1,this.agGridDefaultParams[name]);const moduleForComponent=this.enterpriseAgDefaultCompsModule[name];return moduleForComponent?this.gos.assertModuleRegistered(moduleForComponent,`AG Grid '${propertyName}' component: ${name}`):_doOnce(()=>{this.warnAboutMissingComponent(propertyName,name)},"MissingComp"+name),null}warnAboutMissingComponent(propertyName,componentName){const validComponents=[...Object.keys(this.agGridDefaults).filter(k=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(k)),...Object.keys(this.jsComps)],suggestions=_fuzzySuggestions(componentName,validComponents,!0,.8).values;_warnOnce(`Could not find '${componentName}' component. It was configured as "${propertyName}: '${componentName}'" but it wasn't found in the list of registered components.`),suggestions.length>0&&_warnOnce(`         Did you mean: [${suggestions.slice(0,3)}]?`),_warnOnce(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},__name(_a48,"UserComponentRegistry"),_a48),_a49,AgPromise=(_a49=class{constructor(callback){this.status=0,this.resolution=null,this.waiters=[],callback(value=>this.onDone(value),params=>this.onReject(params))}static all(promises){return promises.length?new _a49(resolve=>{let remainingToResolve=promises.length;const combinedValues=new Array(remainingToResolve);promises.forEach((promise,index)=>{promise.then(value=>{combinedValues[index]=value,remainingToResolve--,remainingToResolve===0&&resolve(combinedValues)})})}):_a49.resolve()}static resolve(value=null){return new _a49(resolve=>resolve(value))}then(func){return new _a49(resolve=>{this.status===1?resolve(func(this.resolution)):this.waiters.push(value=>resolve(func(value)))})}onDone(value){this.status=1,this.resolution=value,this.waiters.forEach(waiter=>waiter(value))}onReject(params){}},__name(_a49,"_AgPromise"),_a49),DateComponent={propertyName:"dateComponent",cellRenderer:!1},DragAndDropImageComponent2={propertyName:"dragAndDropImageComponent",cellRenderer:!1},HeaderComponent={propertyName:"headerComponent",cellRenderer:!1},HeaderGroupComponent={propertyName:"headerGroupComponent",cellRenderer:!1},CellRendererComponent={propertyName:"cellRenderer",cellRenderer:!0},EditorRendererComponent={propertyName:"cellRenderer",cellRenderer:!1},LoadingCellRendererComponent={propertyName:"loadingCellRenderer",cellRenderer:!0},CellEditorComponent={propertyName:"cellEditor",cellRenderer:!1},InnerRendererComponent={propertyName:"innerRenderer",cellRenderer:!0},LoadingOverlayComponent2={propertyName:"loadingOverlayComponent",cellRenderer:!1},NoRowsOverlayComponent2={propertyName:"noRowsOverlayComponent",cellRenderer:!1},TooltipComponent2={propertyName:"tooltipComponent",cellRenderer:!1},FilterComponent={propertyName:"filter",cellRenderer:!1},FloatingFilterComponent={propertyName:"floatingFilterComponent",cellRenderer:!1},ToolPanelComponent={propertyName:"toolPanel",cellRenderer:!1},StatusPanelComponent={propertyName:"statusPanel",cellRenderer:!1},FullWidth={propertyName:"fullWidthCellRenderer",cellRenderer:!0},FullWidthLoading={propertyName:"loadingCellRenderer",cellRenderer:!0},FullWidthGroup={propertyName:"groupRowRenderer",cellRenderer:!0},FullWidthDetail={propertyName:"detailCellRenderer",cellRenderer:!0},MenuItemComponent={propertyName:"menuItem",cellRenderer:!1},_a50,UserComponentFactory=(_a50=class extends BeanStub{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(beans){this.agComponentUtils=beans.agComponentUtils,this.componentMetadataProvider=beans.componentMetadataProvider,this.userComponentRegistry=beans.userComponentRegistry,this.frameworkComponentWrapper=beans.frameworkComponentWrapper,this.gridOptions=beans.gridOptions}getDragAndDropImageCompDetails(params){return this.getCompDetails(this.gridOptions,DragAndDropImageComponent2,"agDragAndDropImage",params,!0)}getHeaderCompDetails(colDef,params){return this.getCompDetails(colDef,HeaderComponent,"agColumnHeader",params)}getHeaderGroupCompDetails(params){const colGroupDef=params.columnGroup.getColGroupDef();return this.getCompDetails(colGroupDef,HeaderGroupComponent,"agColumnGroupHeader",params)}getFullWidthCellRendererDetails(params){return this.getCompDetails(this.gridOptions,FullWidth,null,params,!0)}getFullWidthLoadingCellRendererDetails(params){return this.getCompDetails(this.gridOptions,FullWidthLoading,"agLoadingCellRenderer",params,!0)}getFullWidthGroupCellRendererDetails(params){return this.getCompDetails(this.gridOptions,FullWidthGroup,"agGroupRowRenderer",params,!0)}getFullWidthDetailCellRendererDetails(params){return this.getCompDetails(this.gridOptions,FullWidthDetail,"agDetailCellRenderer",params,!0)}getInnerRendererDetails(def,params){return this.getCompDetails(def,InnerRendererComponent,null,params)}getFullWidthGroupRowInnerCellRenderer(def,params){return this.getCompDetails(def,InnerRendererComponent,null,params)}getCellRendererDetails(def,params){return this.getCompDetails(def,CellRendererComponent,null,params)}getEditorRendererDetails(def,params){return this.getCompDetails(def,EditorRendererComponent,null,params)}getLoadingCellRendererDetails(def,params){return this.getCompDetails(def,LoadingCellRendererComponent,"agSkeletonCellRenderer",params,!0)}getCellEditorDetails(def,params){return this.getCompDetails(def,CellEditorComponent,"agCellEditor",params,!0)}getFilterDetails(def,params,defaultFilter){return this.getCompDetails(def,FilterComponent,defaultFilter,params,!0)}getDateCompDetails(params){return this.getCompDetails(this.gridOptions,DateComponent,"agDateInput",params,!0)}getLoadingOverlayCompDetails(params){return this.getCompDetails(this.gridOptions,LoadingOverlayComponent2,"agLoadingOverlay",params,!0)}getNoRowsOverlayCompDetails(params){return this.getCompDetails(this.gridOptions,NoRowsOverlayComponent2,"agNoRowsOverlay",params,!0)}getTooltipCompDetails(params){return this.getCompDetails(params.colDef,TooltipComponent2,"agTooltipComponent",params,!0)}getSetFilterCellRendererDetails(def,params){return this.getCompDetails(def,CellRendererComponent,null,params)}getFloatingFilterCompDetails(def,params,defaultFloatingFilter){return this.getCompDetails(def,FloatingFilterComponent,defaultFloatingFilter,params)}getToolPanelCompDetails(toolPanelDef,params){return this.getCompDetails(toolPanelDef,ToolPanelComponent,null,params,!0)}getStatusPanelCompDetails(def,params){return this.getCompDetails(def,StatusPanelComponent,null,params,!0)}getMenuItemCompDetails(def,params){return this.getCompDetails(def,MenuItemComponent,"agMenuItem",params,!0)}getCompDetails(defObject,type,defaultName,params,mandatory=!1){const{propertyName,cellRenderer}=type;let{compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector}=_a50.getCompKeys(this.frameworkOverrides,defObject,type,params),defaultCompParams;const lookupFromRegistry=__name(key=>{const item=this.userComponentRegistry.retrieve(propertyName,key);item&&(jsComp=item.componentFromFramework?void 0:item.component,fwComp=item.componentFromFramework?item.component:void 0,defaultCompParams=item.params)},"lookupFromRegistry");if(compName!=null&&lookupFromRegistry(compName),jsComp==null&&fwComp==null&&defaultName!=null&&lookupFromRegistry(defaultName),jsComp&&cellRenderer&&!this.agComponentUtils.doesImplementIComponent(jsComp)&&(jsComp=this.agComponentUtils.adaptFunction(propertyName,jsComp)),!jsComp&&!fwComp){mandatory&&_errorOnce(`Could not find component ${compName}, did you forget to configure this component?`);return}const paramsMerged=this.mergeParamsWithApplicationProvidedParams(defObject,type,params,paramsFromSelector,defaultCompParams),componentFromFramework=jsComp==null,componentClass=jsComp||fwComp;return{componentFromFramework,componentClass,params:paramsMerged,type,popupFromSelector,popupPositionFromSelector,newAgStackInstance:__name(()=>this.newAgStackInstance(componentClass,componentFromFramework,paramsMerged,type),"newAgStackInstance")}}static getCompKeys(frameworkOverrides,defObject,type,params){const{propertyName}=type;let compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector;if(defObject){const defObjectAny=defObject,selectorFunc=defObjectAny[propertyName+"Selector"],selectorRes=selectorFunc?selectorFunc(params):null,assignComp=__name(providedJsComp=>{typeof providedJsComp=="string"?compName=providedJsComp:providedJsComp!=null&&providedJsComp!==!0&&(frameworkOverrides.isFrameworkComponent(providedJsComp)?fwComp=providedJsComp:jsComp=providedJsComp)},"assignComp");selectorRes?(assignComp(selectorRes.component),paramsFromSelector=selectorRes.params,popupFromSelector=selectorRes.popup,popupPositionFromSelector=selectorRes.popupPosition):assignComp(defObjectAny[propertyName])}return{compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector}}newAgStackInstance(ComponentClass,componentFromFramework,params,type){const propertyName=type.propertyName,jsComponent=!componentFromFramework;let instance;if(jsComponent)instance=new ComponentClass;else{const thisComponentConfig=this.componentMetadataProvider.retrieve(propertyName);instance=this.frameworkComponentWrapper.wrap(ComponentClass,thisComponentConfig.mandatoryMethodList,thisComponentConfig.optionalMethodList,type)}const deferredInit=this.initComponent(instance,params);return deferredInit==null?AgPromise.resolve(instance):deferredInit.then(()=>instance)}mergeParamsWithApplicationProvidedParams(defObject,type,paramsFromGrid,paramsFromSelector=null,defaultCompParams){const params=this.gos.getGridCommonParams();_mergeDeep(params,paramsFromGrid),defaultCompParams&&_mergeDeep(params,defaultCompParams);const defObjectAny=defObject,userParams=defObjectAny&&defObjectAny[type.propertyName+"Params"];if(typeof userParams=="function"){const userParamsFromFunc=userParams(paramsFromGrid);_mergeDeep(params,userParamsFromFunc)}else typeof userParams=="object"&&_mergeDeep(params,userParams);return _mergeDeep(params,paramsFromSelector),params}initComponent(component,params){if(this.createBean(component),component.init!=null)return component.init(params)}},__name(_a50,"_UserComponentFactory"),_a50);function _unwrapUserComp(comp){const compAsAny=comp;return compAsAny!=null&&compAsAny.getFrameworkComponentInstance!=null?compAsAny.getFrameworkComponentInstance():comp}__name(_unwrapUserComp,"_unwrapUserComp");var _a51,_ModuleRegistry=(_a51=class{static register(module){_a51.__register(module,!0,void 0)}static registerModules(modules){_a51.__registerModules(modules,!0,void 0)}static __register(module,moduleBased,gridId){_a51.runVersionChecks(module),gridId!==void 0?(_a51.areGridScopedModules=!0,_a51.gridModulesMap[gridId]===void 0&&(_a51.gridModulesMap[gridId]={}),_a51.gridModulesMap[gridId][module.moduleName]=module):_a51.globalModulesMap[module.moduleName]=module,_a51.setModuleBased(moduleBased)}static __unRegisterGridModules(gridId){delete _a51.gridModulesMap[gridId]}static __registerModules(modules,moduleBased,gridId){_a51.setModuleBased(moduleBased),modules&&modules.forEach(module=>_a51.__register(module,moduleBased,gridId))}static isValidModuleVersion(module){const[moduleMajor,moduleMinor]=module.version.split(".")||[],[currentModuleMajor,currentModuleMinor]=_a51.currentModuleVersion.split(".")||[];return moduleMajor===currentModuleMajor&&moduleMinor===currentModuleMinor}static runVersionChecks(module){_a51.currentModuleVersion||(_a51.currentModuleVersion=module.version);const errorMsg=__name(details=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${details} Please update all modules to the same version.`,"errorMsg");if(module.version?_a51.isValidModuleVersion(module)||_errorOnce(errorMsg(`'${module.moduleName}' is version ${module.version} but the other modules are version ${_a51.currentModuleVersion}.`)):_errorOnce(errorMsg(`'${module.moduleName}' is incompatible.`)),module.validate){const result=module.validate();result.isValid||_errorOnce(`${result.message}`)}}static setModuleBased(moduleBased){_a51.moduleBased===void 0?_a51.moduleBased=moduleBased:_a51.moduleBased!==moduleBased&&(_errorOnce("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),_errorOnce("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){_a51.isBundled=!0}static __assertRegistered(moduleName,reason,gridId){var _a253;if(this.__isRegistered(moduleName,gridId))return!0;let warningMessage;if(_a51.isBundled)warningMessage=`AG Grid: unable to use ${reason} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(_a51.moduleBased||_a51.moduleBased===void 0){const modName=(_a253=Object.entries(ModuleNames).find(([k,v])=>v===moduleName))==null?void 0:_a253[0];warningMessage=`AG Grid: unable to use ${reason} as the ${modName} is not registered${_a51.areGridScopedModules?` for gridId: ${gridId}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${modName} } from '${moduleName}';
    
    ModuleRegistry.registerModules([ ${modName} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else warningMessage=`AG Grid: unable to use ${reason} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return _errorOnce(warningMessage),!1}static __isRegistered(moduleName,gridId){var _a253;return!!_a51.globalModulesMap[moduleName]||!!((_a253=_a51.gridModulesMap[gridId])!=null&&_a253[moduleName])}static __getRegisteredModules(gridId){return[..._values(_a51.globalModulesMap),..._values(_a51.gridModulesMap[gridId]||{})]}static __getGridRegisteredModules(gridId){return _values(_a51.gridModulesMap[gridId]??{})||[]}static __isPackageBased(){return!_a51.moduleBased}},__name(_a51,"_ModuleRegistry"),_a51);_ModuleRegistry.globalModulesMap={};_ModuleRegistry.gridModulesMap={};_ModuleRegistry.areGridScopedModules=!1;var ModuleRegistry=_ModuleRegistry,_a52,GenericContext=(_a52=class{constructor(params){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!params||!params.beanClasses)&&(this.beanDestroyComparator=params.beanDestroyComparator,this.init(params))}init(params){var _a253;Object.entries(params.providedBeanInstances).forEach(([beanName,beanInstance])=>{this.beans[beanName]=beanInstance}),params.beanClasses.forEach(BeanClass=>{const instance=new BeanClass;instance.beanName?this.beans[instance.beanName]=instance:console.error(`Bean ${BeanClass.name} is missing beanName`),this.createdBeans.push(instance)}),(_a253=params.derivedBeans)==null||_a253.forEach(beanFunc=>{const{beanName,bean}=beanFunc(this);this.beans[beanName]=bean,this.createdBeans.push(bean)}),params.beanInitComparator&&this.createdBeans.sort(params.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(bean,afterPreCreateCallback){if(!bean)throw Error("Can't wire to bean since it is null");return this.initBeans([bean],afterPreCreateCallback),bean}initBeans(beanInstances,afterPreCreateCallback){beanInstances.forEach(instance=>{var _a253,_b;(_a253=instance.preWireBeans)==null||_a253.call(instance,this.beans),(_b=instance.wireBeans)==null||_b.call(instance,this.beans)}),beanInstances.forEach(instance=>{var _a253;return(_a253=instance.preConstruct)==null?void 0:_a253.call(instance)}),afterPreCreateCallback&&beanInstances.forEach(afterPreCreateCallback),beanInstances.forEach(instance=>{var _a253;return(_a253=instance.postConstruct)==null?void 0:_a253.call(instance)})}getBeans(){return this.beans}getBean(name){return this.beans[name]}destroy(){if(this.destroyed)return;this.destroyed=!0;const beanInstances=this.getBeanInstances();this.beanDestroyComparator&&beanInstances.sort(this.beanDestroyComparator),this.destroyBeans(beanInstances),this.beans={},this.createdBeans=[]}destroyBean(bean){var _a253;(_a253=bean==null?void 0:bean.destroy)==null||_a253.call(bean)}destroyBeans(beans){if(beans)for(let i=0;i<beans.length;i++)this.destroyBean(beans[i]);return[]}isDestroyed(){return this.destroyed}},__name(_a52,"GenericContext"),_a52),_a53,Context=(_a53=class extends GenericContext{init(params){this.gridId=params.gridId,this.beans.context=this,super.init(params)}destroy(){super.destroy(),ModuleRegistry.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},__name(_a53,"Context"),_a53),HorizontalDirection=(HorizontalDirection2=>(HorizontalDirection2[HorizontalDirection2.Left=0]="Left",HorizontalDirection2[HorizontalDirection2.Right=1]="Right",HorizontalDirection2))(HorizontalDirection||{}),_a54,DragAndDropService=(_a54=class extends BeanStub{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(beans){this.ctrlsService=beans.ctrlsService,this.dragService=beans.dragService,this.mouseEventService=beans.mouseEventService,this.environment=beans.environment,this.userComponentFactory=beans.userComponentFactory}addDragSource(dragSource,allowTouch=!1){const params={eElement:dragSource.eElement,dragStartPixels:dragSource.dragStartPixels,onDragStart:this.onDragStart.bind(this,dragSource),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:allowTouch};this.dragSourceAndParamsList.push({params,dragSource}),this.dragService.addDragSource(params)}getDragAndDropImageComponent(){const{dragAndDropImageComp}=this;return!dragAndDropImageComp||!dragAndDropImageComp.comp?null:dragAndDropImageComp.comp}removeDragSource(dragSource){const sourceAndParams=this.dragSourceAndParamsList.find(item=>item.dragSource===dragSource);sourceAndParams&&(this.dragService.removeDragSource(sourceAndParams.params),_removeFromArray(this.dragSourceAndParamsList,sourceAndParams))}destroy(){this.dragSourceAndParamsList.forEach(sourceAndParams=>this.dragService.removeDragSource(sourceAndParams.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(dragSource,mouseEvent){var _a253,_b;this.dragging=!0,this.dragSource=dragSource,this.eventLastTime=mouseEvent,this.dragItem=this.dragSource.getDragItem(),(_b=(_a253=this.dragSource).onDragStarted)==null||_b.call(_a253),this.createDragAndDropImageComponent()}onDragStop(mouseEvent){var _a253,_b,_c;if((_b=(_a253=this.dragSource)==null?void 0:_a253.onDragStopped)==null||_b.call(_a253),(_c=this.lastDropTarget)!=null&&_c.onDragStop){const draggingEvent=this.createDropTargetEvent(this.lastDropTarget,mouseEvent,null,null,!1);this.lastDropTarget.onDragStop(draggingEvent)}this.clearDragAndDropProperties()}onDragCancel(){var _a253,_b,_c;(_b=(_a253=this.dragSource)==null?void 0:_a253.onDragCancelled)==null||_b.call(_a253),(_c=this.lastDropTarget)!=null&&_c.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(mouseEvent,fromNudge=!1){var _a253,_b,_c,_d;const hDirection=this.getHorizontalDirection(mouseEvent),vDirection=this.getVerticalDirection(mouseEvent);this.eventLastTime=mouseEvent,this.positionDragAndDropImageComp(mouseEvent);const validDropTargets=this.dropTargets.filter(target=>this.isMouseOnDropTarget(mouseEvent,target)),dropTarget=this.findCurrentDropTarget(mouseEvent,validDropTargets);if(dropTarget!==this.lastDropTarget){if(this.leaveLastTargetIfExists(mouseEvent,hDirection,vDirection,fromNudge),this.lastDropTarget!==null&&dropTarget===null&&((_b=(_a253=this.dragSource)==null?void 0:_a253.onGridExit)==null||_b.call(_a253,this.dragItem)),this.lastDropTarget===null&&dropTarget!==null&&((_d=(_c=this.dragSource)==null?void 0:_c.onGridEnter)==null||_d.call(_c,this.dragItem)),this.enterDragTargetIfExists(dropTarget,mouseEvent,hDirection,vDirection,fromNudge),dropTarget&&this.dragAndDropImageComp){const{comp,promise}=this.dragAndDropImageComp;comp?comp.setIcon(dropTarget.getIconName?dropTarget.getIconName():null):promise.then(resolvedComponent=>{resolvedComponent&&resolvedComponent.setIcon(dropTarget.getIconName?dropTarget.getIconName():null)})}this.lastDropTarget=dropTarget}else if(dropTarget&&dropTarget.onDragging){const draggingEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragging(draggingEvent)}}getAllContainersFromDropTarget(dropTarget){const secondaryContainers=dropTarget.getSecondaryContainers?dropTarget.getSecondaryContainers():null,containers=[[dropTarget.getContainer()]];return secondaryContainers?containers.concat(secondaryContainers):containers}allContainersIntersect(mouseEvent,containers){for(const container of containers){const{width,height,left,right,top,bottom}=container.getBoundingClientRect();if(width===0||height===0)return!1;const horizontalFit=mouseEvent.clientX>=left&&mouseEvent.clientX<right,verticalFit=mouseEvent.clientY>=top&&mouseEvent.clientY<bottom;if(!horizontalFit||!verticalFit)return!1}return!0}isMouseOnDropTarget(mouseEvent,dropTarget){const allContainersFromDropTarget=this.getAllContainersFromDropTarget(dropTarget);let mouseOverTarget=!1;for(const currentContainers of allContainersFromDropTarget)if(this.allContainersIntersect(mouseEvent,currentContainers)){mouseOverTarget=!0;break}const{eElement,type}=this.dragSource;return dropTarget.targetContainsSource&&!dropTarget.getContainer().contains(eElement)?!1:mouseOverTarget&&dropTarget.isInterestedIn(type,eElement)}findCurrentDropTarget(mouseEvent,validDropTargets){const len=validDropTargets.length;if(len===0)return null;if(len===1)return validDropTargets[0];const elementStack=_getRootNode(this.gos).elementsFromPoint(mouseEvent.clientX,mouseEvent.clientY);for(const el of elementStack)for(const dropTarget of validDropTargets)if(_flatten(this.getAllContainersFromDropTarget(dropTarget)).indexOf(el)!==-1)return dropTarget;return null}enterDragTargetIfExists(dropTarget,mouseEvent,hDirection,vDirection,fromNudge){if(dropTarget&&dropTarget.onDragEnter){const dragEnterEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragEnter(dragEnterEvent)}}leaveLastTargetIfExists(mouseEvent,hDirection,vDirection,fromNudge){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const dragLeaveEvent=this.createDropTargetEvent(this.lastDropTarget,mouseEvent,hDirection,vDirection,fromNudge);this.lastDropTarget.onDragLeave(dragLeaveEvent)}const dragAndDropImageComponent=this.getDragAndDropImageComponent();dragAndDropImageComponent&&dragAndDropImageComponent.setIcon(null)}addDropTarget(dropTarget){this.dropTargets.push(dropTarget)}removeDropTarget(dropTarget){this.dropTargets=this.dropTargets.filter(target=>target.getContainer()!==dropTarget.getContainer())}hasExternalDropZones(){return this.dropTargets.some(zones=>zones.external)}findExternalZone(params){return this.dropTargets.filter(target=>target.external).find(zone=>zone.getContainer()===params.getContainer())||null}isDropZoneWithinThisGrid(draggingEvent){const gridGui=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget}=draggingEvent;return gridGui.contains(dropZoneTarget)}getHorizontalDirection(event){const clientX=this.eventLastTime&&this.eventLastTime.clientX,eClientX=event.clientX;return clientX===eClientX?null:clientX>eClientX?0:1}getVerticalDirection(event){const clientY=this.eventLastTime&&this.eventLastTime.clientY,eClientY=event.clientY;return clientY===eClientY?null:clientY>eClientY?0:1}createDropTargetEvent(dropTarget,event,hDirection,vDirection,fromNudge){const dropZoneTarget=dropTarget.getContainer(),rect=dropZoneTarget.getBoundingClientRect(),{dragItem,dragSource}=this,x=event.clientX-rect.left,y=event.clientY-rect.top;return this.gos.addGridCommonParams({event,x,y,vDirection,hDirection,dragSource,fromNudge,dragItem,dropZoneTarget})}positionDragAndDropImageComp(event){const dragAndDropImageComponent=this.getDragAndDropImageComponent();if(!dragAndDropImageComponent)return;const eGui=dragAndDropImageComponent.getGui(),height=eGui.getBoundingClientRect().height,browserWidth=_getBodyWidth()-2,browserHeight=_getBodyHeight()-2;if(!eGui.offsetParent)return;const offsetParentSize=_getElementRectWithOffset(eGui.offsetParent),{clientY,clientX}=event;let top=clientY-offsetParentSize.top-height/2,left=clientX-offsetParentSize.left-10;const eDocument=_getDocument(this.gos),win=eDocument.defaultView||window,windowScrollY=win.pageYOffset||eDocument.documentElement.scrollTop,windowScrollX=win.pageXOffset||eDocument.documentElement.scrollLeft;browserWidth>0&&left+eGui.clientWidth>browserWidth+windowScrollX&&(left=browserWidth+windowScrollX-eGui.clientWidth),left<0&&(left=0),browserHeight>0&&top+eGui.clientHeight>browserHeight+windowScrollY&&(top=browserHeight+windowScrollY-eGui.clientHeight),top<0&&(top=0),eGui.style.left=`${left}px`,eGui.style.top=`${top}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp}=this.dragAndDropImageComp;if(comp){const eGui=comp.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(eGui),this.destroyBean(comp)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource}=this;if(!dragSource)return;const promise=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource}).newAgStackInstance();this.dragAndDropImageComp={promise},promise.then(comp=>{!comp||!this.isAlive()||(this.processDragAndDropImageComponent(comp),this.dragAndDropImageComp.comp=comp)})}processDragAndDropImageComponent(dragAndDropImageComponent){const{dragSource,mouseEventService,environment}=this;if(!dragSource)return;const eGui=dragAndDropImageComponent.getGui();eGui.style.setProperty("position","absolute"),eGui.style.setProperty("z-index","9999"),mouseEventService.stampTopLevelGridCompWithGridInstance(eGui),environment.applyThemeClasses(eGui),dragAndDropImageComponent.setIcon(null);let{dragItemName}=dragSource;_isFunction(dragItemName)&&(dragItemName=dragItemName()),dragAndDropImageComponent.setLabel(dragItemName||""),eGui.style.top="20px",eGui.style.left="20px";const eDocument=_getDocument(this.gos);let rootNode=null,targetEl=null;try{rootNode=eDocument.fullscreenElement}catch{}finally{rootNode||(rootNode=_getRootNode(this.gos));const body=rootNode.querySelector("body");body?targetEl=body:rootNode instanceof ShadowRoot?targetEl=rootNode:rootNode instanceof Document?targetEl=rootNode==null?void 0:rootNode.documentElement:targetEl=rootNode}this.dragAndDropImageParent=targetEl,targetEl?targetEl.appendChild(eGui):_warnOnce("Could not find document body, it is needed for drag and drop.")}},__name(_a54,"DragAndDropService"),_a54),_a55,AutoScrollService=(_a55=class{constructor(params){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=params.scrollContainer,this.scrollHorizontally=params.scrollAxis.indexOf("x")!==-1,this.scrollVertically=params.scrollAxis.indexOf("y")!==-1,this.scrollByTick=params.scrollByTick!=null?params.scrollByTick:20,params.onScrollCallback&&(this.onScrollCallback=params.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=params.getVerticalPosition,this.setVerticalPosition=params.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=params.getHorizontalPosition,this.setHorizontalPosition=params.setHorizontalPosition),this.shouldSkipVerticalScroll=params.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=params.shouldSkipHorizontalScroll||(()=>!1)}check(mouseEvent,forceSkipVerticalScroll=!1){const skipVerticalScroll=forceSkipVerticalScroll||this.shouldSkipVerticalScroll();if(skipVerticalScroll&&this.shouldSkipHorizontalScroll())return;const rect=this.scrollContainer.getBoundingClientRect(),scrollTick=this.scrollByTick;this.tickLeft=mouseEvent.clientX<rect.left+scrollTick,this.tickRight=mouseEvent.clientX>rect.right-scrollTick,this.tickUp=mouseEvent.clientY<rect.top+scrollTick&&!skipVerticalScroll,this.tickDown=mouseEvent.clientY>rect.bottom-scrollTick&&!skipVerticalScroll,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const tickAmount=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const vScrollPosition=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(vScrollPosition-tickAmount),this.tickDown&&this.setVerticalPosition(vScrollPosition+tickAmount)}if(this.scrollHorizontally){const hScrollPosition=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(hScrollPosition-tickAmount),this.tickRight&&this.setHorizontalPosition(hScrollPosition+tickAmount)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},__name(_a55,"AutoScrollService"),_a55),_a56,RowDragFeature=(_a56=class extends BeanStub{wireBeans(beans){this.dragAndDropService=beans.dragAndDropService,this.rowModel=beans.rowModel,this.pageBoundsService=beans.pageBoundsService,this.focusService=beans.focusService,this.sortController=beans.sortController,this.filterManager=beans.filterManager,this.selectionService=beans.selectionService,this.mouseEventService=beans.mouseEventService,this.ctrlsService=beans.ctrlsService,this.funcColsService=beans.funcColsService,this.rangeService=beans.rangeService}constructor(eContainer){super(),this.eContainer=eContainer}postConstruct(){_isClientSideRowModel(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,p=>{const gridBodyCon=p.gridBodyCtrl;this.autoScrollService=new AutoScrollService({scrollContainer:gridBodyCon.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:__name(()=>gridBodyCon.getScrollFeature().getVScrollPosition().top,"getVerticalPosition"),setVerticalPosition:__name(position=>gridBodyCon.getScrollFeature().setVerticalScrollPosition(position),"setVerticalPosition"),onScrollCallback:__name(()=>{this.onDragging(this.lastDraggingEvent)},"onScrollCallback")})})}getContainer(){return this.eContainer}isInterestedIn(type){return type===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){var _a253;return!!(this.funcColsService.getRowGroupColumns().length||((_a253=this.filterManager)==null?void 0:_a253.isAnyFilterPresent())||this.sortController.isSortActive())}getRowNodes(draggingEvent){if(!this.isFromThisGrid(draggingEvent))return draggingEvent.dragItem.rowNodes||[];const currentNode=draggingEvent.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const selectedNodes=[...this.selectionService.getSelectedNodes()].sort((a,b)=>a.rowIndex==null||b.rowIndex==null?0:this.getRowIndexNumber(a)-this.getRowIndexNumber(b));if(selectedNodes.indexOf(currentNode)!==-1)return selectedNodes}return[currentNode]}onDragEnter(draggingEvent){draggingEvent.dragItem.rowNodes=this.getRowNodes(draggingEvent),this.dispatchGridEvent("rowDragEnter",draggingEvent),this.getRowNodes(draggingEvent).forEach(rowNode=>{rowNode.setDragging(!0)}),this.onEnterOrDragging(draggingEvent)}onDragging(draggingEvent){this.onEnterOrDragging(draggingEvent)}isFromThisGrid(draggingEvent){const{dragSourceDomDataKey}=draggingEvent.dragSource;return dragSourceDomDataKey===this.gos.getDomDataKey()}onEnterOrDragging(draggingEvent){this.dispatchGridEvent("rowDragMove",draggingEvent),this.lastDraggingEvent=draggingEvent;const pixel=this.mouseEventService.getNormalisedPosition(draggingEvent).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(draggingEvent,pixel),this.autoScrollService.check(draggingEvent.event)}doManagedDrag(draggingEvent,pixel){const isFromThisGrid=this.isFromThisGrid(draggingEvent),managedDrag=this.gos.get("rowDragManaged"),rowNodes=draggingEvent.dragItem.rowNodes;managedDrag&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!isFromThisGrid?this.dragAndDropService.isDropZoneWithinThisGrid(draggingEvent)&&this.clientSideRowModel.highlightRowAtPixel(rowNodes[0],pixel):this.moveRows(rowNodes,pixel))}getRowIndexNumber(rowNode){const rowIndexStr=rowNode.getRowIndexString();return parseInt(_last(rowIndexStr.split("-")),10)}moveRowAndClearHighlight(draggingEvent){const lastHighlightedRowNode=this.clientSideRowModel.getLastHighlightedRowNode(),isBelow=lastHighlightedRowNode&&lastHighlightedRowNode.highlighted===1,pixel=this.mouseEventService.getNormalisedPosition(draggingEvent).y,rowNodes=draggingEvent.dragItem.rowNodes;let increment=isBelow?1:0;if(this.isFromThisGrid(draggingEvent))rowNodes.forEach(rowNode=>{rowNode.rowTop<pixel&&(increment-=1)}),this.moveRows(rowNodes,pixel,increment);else{const getRowIdFunc=_getRowIdCallback(this.gos);let addIndex=this.clientSideRowModel.getRowIndexAtPixel(pixel)+1;this.clientSideRowModel.getHighlightPosition(pixel)===0&&addIndex--,this.clientSideRowModel.updateRowData({add:rowNodes.filter(node=>!this.clientSideRowModel.getRowNode((getRowIdFunc==null?void 0:getRowIdFunc({data:node.data,level:0,rowPinned:node.rowPinned}))??node.data.id)).map(node=>node.data),addIndex})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(rowNodes,pixel,increment=0){var _a253;this.clientSideRowModel.ensureRowsAtPixel(rowNodes,pixel,increment)&&(this.focusService.clearFocusedCell(),(_a253=this.rangeService)==null||_a253.removeAllCellRanges())}addRowDropZone(params){if(!params.getContainer()){_warnOnce("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(params)){_warnOnce("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let processedParams={getContainer:params.getContainer};params.fromGrid?processedParams=params:(params.onDragEnter&&(processedParams.onDragEnter=e=>{params.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",e))}),params.onDragLeave&&(processedParams.onDragLeave=e=>{params.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",e))}),params.onDragging&&(processedParams.onDragging=e=>{params.onDragging(this.draggingToRowDragEvent("rowDragMove",e))}),params.onDragStop&&(processedParams.onDragStop=e=>{params.onDragStop(this.draggingToRowDragEvent("rowDragEnd",e))}),params.onDragCancel&&(processedParams.onDragCancel=e=>{params.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",e))}));const dropTarget={isInterestedIn:__name(type=>type===2,"isInterestedIn"),getIconName:__name(()=>"move","getIconName"),external:!0,...processedParams};this.dragAndDropService.addDropTarget(dropTarget),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(dropTarget))}getRowDropZone(events){const getContainer=this.getContainer.bind(this),onDragEnter=this.onDragEnter.bind(this),onDragLeave=this.onDragLeave.bind(this),onDragging=this.onDragging.bind(this),onDragStop=this.onDragStop.bind(this),onDragCancel=this.onDragCancel.bind(this);let params;return events?params={getContainer,onDragEnter:events.onDragEnter?e=>{onDragEnter(e),events.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",e))}:onDragEnter,onDragLeave:events.onDragLeave?e=>{onDragLeave(e),events.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",e))}:onDragLeave,onDragging:events.onDragging?e=>{onDragging(e),events.onDragging(this.draggingToRowDragEvent("rowDragMove",e))}:onDragging,onDragStop:events.onDragStop?e=>{onDragStop(e),events.onDragStop(this.draggingToRowDragEvent("rowDragEnd",e))}:onDragStop,onDragCancel:events.onDragCancel?e=>{onDragCancel(e),events.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",e))}:onDragCancel,fromGrid:!0}:params={getContainer,onDragEnter,onDragLeave,onDragging,onDragStop,onDragCancel,fromGrid:!0},params}draggingToRowDragEvent(type,draggingEvent){const yNormalised=this.mouseEventService.getNormalisedPosition(draggingEvent).y,mouseIsPastLastRow=yNormalised>this.pageBoundsService.getCurrentPageHeight();let overIndex=-1,overNode;mouseIsPastLastRow||(overIndex=this.rowModel.getRowIndexAtPixel(yNormalised),overNode=this.rowModel.getRow(overIndex));let vDirectionString;switch(draggingEvent.vDirection){case 1:vDirectionString="down";break;case 0:vDirectionString="up";break;default:vDirectionString=null;break}return this.gos.addGridCommonParams({type,event:draggingEvent.event,node:draggingEvent.dragItem.rowNode,nodes:draggingEvent.dragItem.rowNodes,overIndex,overNode,y:yNormalised,vDirection:vDirectionString})}dispatchGridEvent(type,draggingEvent){const event=this.draggingToRowDragEvent(type,draggingEvent);this.eventService.dispatchEvent(event)}onDragLeave(draggingEvent){this.dispatchGridEvent("rowDragLeave",draggingEvent),this.stopDragging(draggingEvent),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(draggingEvent){this.dispatchGridEvent("rowDragEnd",draggingEvent),this.stopDragging(draggingEvent),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(draggingEvent))&&this.dragAndDropService.isDropZoneWithinThisGrid(draggingEvent)&&this.moveRowAndClearHighlight(draggingEvent)}onDragCancel(draggingEvent){this.dispatchGridEvent("rowDragCancel",draggingEvent),this.stopDragging(draggingEvent),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(draggingEvent))&&this.dragAndDropService.isDropZoneWithinThisGrid(draggingEvent)&&this.clearRowHighlight()}stopDragging(draggingEvent){this.autoScrollService.ensureCleared(),this.getRowNodes(draggingEvent).forEach(rowNode=>{rowNode.setDragging(!1)})}},__name(_a56,"RowDragFeature"),_a56),_a57,DragService=(_a57=class extends BeanStub{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(beans){this.mouseEventService=beans.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(dragSourceAndListener){const element=dragSourceAndListener.dragSource.eElement,mouseDownListener=dragSourceAndListener.mouseDownListener;if(element.removeEventListener("mousedown",mouseDownListener),dragSourceAndListener.touchEnabled){const touchStartListener=dragSourceAndListener.touchStartListener;element.removeEventListener("touchstart",touchStartListener,{passive:!0})}}removeDragSource(params){const dragSourceAndListener=this.dragSources.find(item=>item.dragSource===params);dragSourceAndListener&&(this.removeListener(dragSourceAndListener),_removeFromArray(this.dragSources,dragSourceAndListener))}isDragging(){return this.dragging}addDragSource(params){const mouseListener=this.onMouseDown.bind(this,params),{eElement,includeTouch,stopPropagationForTouch}=params;eElement.addEventListener("mousedown",mouseListener);let touchListener=null;const suppressTouch=this.gos.get("suppressTouch");includeTouch&&!suppressTouch&&(touchListener=__name(touchEvent=>{_isFocusableFormField(touchEvent.target)||(stopPropagationForTouch&&touchEvent.stopPropagation(),this.onTouchStart(params,touchEvent))},"touchListener"),eElement.addEventListener("touchstart",touchListener,{passive:!1})),this.dragSources.push({dragSource:params,mouseDownListener:mouseListener,touchStartListener:touchListener,touchEnabled:!!includeTouch})}getStartTarget(){return this.startTarget}onTouchStart(params,touchEvent){this.currentDragParams=params,this.dragging=!1;const touch=touchEvent.touches[0];this.touchLastTime=touch,this.touchStart=touch;const touchMoveEvent=__name(e=>this.onTouchMove(e,params.eElement),"touchMoveEvent"),touchEndEvent=__name(e=>this.onTouchUp(e,params.eElement),"touchEndEvent"),documentTouchMove=__name(e=>{e.cancelable&&e.preventDefault()},"documentTouchMove"),target=touchEvent.target,events=[{target:_getRootNode(this.gos),type:"touchmove",listener:documentTouchMove,options:{passive:!1}},{target,type:"touchmove",listener:touchMoveEvent,options:{passive:!0}},{target,type:"touchend",listener:touchEndEvent,options:{passive:!0}},{target,type:"touchcancel",listener:touchEndEvent,options:{passive:!0}}];this.addTemporaryEvents(events),params.dragStartPixels===0&&this.onCommonMove(touch,this.touchStart,params.eElement)}onMouseDown(params,mouseEvent){const e=mouseEvent;if(params.skipMouseEvent&&params.skipMouseEvent(mouseEvent)||e._alreadyProcessedByDragService||(e._alreadyProcessedByDragService=!0,mouseEvent.button!==0))return;this.shouldPreventMouseEvent(mouseEvent)&&mouseEvent.preventDefault(),this.currentDragParams=params,this.dragging=!1,this.mouseStartEvent=mouseEvent,this.startTarget=mouseEvent.target;const mouseMoveEvent=__name(event=>this.onMouseMove(event,params.eElement),"mouseMoveEvent"),mouseUpEvent=__name(event=>this.onMouseUp(event,params.eElement),"mouseUpEvent"),contextEvent=__name(event=>event.preventDefault(),"contextEvent"),keydownEvent=__name(event=>{event.key===KeyCode.ESCAPE&&this.cancelDrag(params.eElement)},"keydownEvent"),target=_getRootNode(this.gos),events=[{target,type:"mousemove",listener:mouseMoveEvent},{target,type:"mouseup",listener:mouseUpEvent},{target,type:"contextmenu",listener:contextEvent},{target,type:"keydown",listener:keydownEvent}];this.addTemporaryEvents(events),params.dragStartPixels===0&&this.onMouseMove(mouseEvent,params.eElement)}addTemporaryEvents(events){events.forEach(currentEvent=>{const{target,type,listener,options}=currentEvent;target.addEventListener(type,listener,options)}),this.dragEndFunctions.push(()=>{events.forEach(currentEvent=>{const{target,type,listener,options}=currentEvent;target.removeEventListener(type,listener,options)})})}isEventNearStartEvent(currentEvent,startEvent){const{dragStartPixels}=this.currentDragParams,requiredPixelDiff=_exists(dragStartPixels)?dragStartPixels:4;return _areEventsNear(currentEvent,startEvent,requiredPixelDiff)}getFirstActiveTouch(touchList){for(let i=0;i<touchList.length;i++)if(touchList[i].identifier===this.touchStart.identifier)return touchList[i];return null}onCommonMove(currentEvent,startEvent,el){if(!this.dragging){if(this.isEventNearStartEvent(currentEvent,startEvent))return;this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:el}),this.currentDragParams.onDragStart(startEvent),this.currentDragParams.onDragging(startEvent)}this.currentDragParams.onDragging(currentEvent)}onTouchMove(touchEvent,el){const touch=this.getFirstActiveTouch(touchEvent.touches);touch&&this.onCommonMove(touch,this.touchStart,el)}onMouseMove(mouseEvent,el){var _a253;_isBrowserSafari()&&((_a253=_getDocument(this.gos).getSelection())==null||_a253.removeAllRanges()),this.shouldPreventMouseEvent(mouseEvent)&&mouseEvent.preventDefault(),this.onCommonMove(mouseEvent,this.mouseStartEvent,el)}shouldPreventMouseEvent(mouseEvent){const isEnableCellTextSelect=this.gos.get("enableCellTextSelection"),isMouseMove=mouseEvent.type==="mousemove";return isEnableCellTextSelect&&isMouseMove&&mouseEvent.cancelable&&this.mouseEventService.isEventFromThisGrid(mouseEvent)&&!this.isOverFormFieldElement(mouseEvent)}isOverFormFieldElement(mouseEvent){const el=mouseEvent.target,tagName=el==null?void 0:el.tagName.toLocaleLowerCase();return!!(tagName!=null&&tagName.match("^a$|textarea|input|select|button"))}onTouchUp(touchEvent,el){let touch=this.getFirstActiveTouch(touchEvent.changedTouches);touch||(touch=this.touchLastTime),this.onUpCommon(touch,el)}onMouseUp(mouseEvent,el){this.onUpCommon(mouseEvent,el)}onUpCommon(eventOrTouch,el){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(eventOrTouch),this.eventService.dispatchEvent({type:"dragStopped",target:el})),this.resetDragProperties()}cancelDrag(el){var _a253,_b;this.eventService.dispatchEvent({type:"dragCancelled",target:el}),(_b=(_a253=this.currentDragParams)==null?void 0:_a253.onDragCancel)==null||_b.call(_a253),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(func=>func()),this.dragEndFunctions.length=0}},__name(_a57,"DragService"),_a57),_a58,RowDragComp=(_a58=class extends Component{constructor(cellValueFn,rowNode,column,customGui,dragStartPixels,suppressVisibilityChange){super(),this.cellValueFn=cellValueFn,this.rowNode=rowNode,this.column=column,this.customGui=customGui,this.dragStartPixels=dragStartPixels,this.suppressVisibilityChange=suppressVisibilityChange,this.dragSource=null}wireBeans(beans){this.beans=beans}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(_createIconNoSpan("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const strategy=this.gos.get("rowDragManaged")?new ManagedVisibilityStrategy(this,this.beans,this.rowNode,this.column):new NonManagedVisibilityStrategy(this,this.beans,this.rowNode,this.column);this.createManagedBean(strategy,this.beans.context)}}setDragElement(dragElement,dragStartPixels){this.setTemplateFromElement(dragElement,void 0,void 0,!0),this.addDragSource(dragStartPixels)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const selection=this.beans.selectionService.getSelectedNodes();return selection.indexOf(this.rowNode)!==-1?selection:[this.rowNode]}checkCompatibility(){const managed=this.gos.get("rowDragManaged");this.gos.get("treeData")&&managed&&_warnOnce("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(column){if(column){const colDef=column.getColDef();if(colDef.rowDragText)return colDef.rowDragText}return this.gos.get("rowDragText")}addDragSource(dragStartPixels=4){this.dragSource&&this.removeDragSource();const eGui=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(eGui,{mousedown:__name(e=>{e==null||e.preventDefault()},"mousedown")})[0]);const translate=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:eGui,dragItemName:__name(()=>{var _a253;const dragItem=this.getDragItem(),dragItemCount=((_a253=dragItem.rowNodes)==null?void 0:_a253.length)||1,rowDragText=this.getRowDragText(this.column);return rowDragText?rowDragText(dragItem,dragItemCount):dragItemCount===1?this.cellValueFn():`${dragItemCount} ${translate("rowDragRows","rows")}`},"dragItemName"),getDragItem:__name(()=>this.getDragItem(),"getDragItem"),dragStartPixels,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},__name(_a58,"RowDragComp"),_a58),_a59,VisibilityStrategy=(_a59=class extends BeanStub{constructor(parent,rowNode,column){super(),this.parent=parent,this.rowNode=rowNode,this.column=column}setDisplayedOrVisible(neverDisplayed){const displayedOptions={skipAriaHidden:!0};if(neverDisplayed)this.parent.setDisplayed(!1,displayedOptions);else{let shown=!0,isShownSometimes=!1;this.column&&(shown=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),isShownSometimes=_isFunction(this.column.getColDef().rowDrag)),isShownSometimes?(this.parent.setDisplayed(!0,displayedOptions),this.parent.setVisible(shown,displayedOptions)):(this.parent.setDisplayed(shown,displayedOptions),this.parent.setVisible(!0,displayedOptions))}}},__name(_a59,"VisibilityStrategy"),_a59),_a60,NonManagedVisibilityStrategy=(_a60=class extends VisibilityStrategy{constructor(parent,beans,rowNode,column){super(parent,rowNode,column),this.beans=beans}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const listener=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:listener,cellChanged:listener}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:listener}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const neverDisplayed=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(neverDisplayed)}},__name(_a60,"NonManagedVisibilityStrategy"),_a60),_a61,ManagedVisibilityStrategy=(_a61=class extends VisibilityStrategy{constructor(parent,beans,rowNode,column){super(parent,rowNode,column),this.beans=beans}postConstruct(){const listener=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:listener,filterChanged:listener,columnRowGroupChanged:listener,newColumnsLoaded:listener}),this.addManagedListeners(this.rowNode,{dataChanged:listener,cellChanged:listener}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const rowDragFeature=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),shouldPreventRowMove=rowDragFeature&&rowDragFeature.shouldPreventRowMove(),suppressRowDrag=this.gos.get("suppressRowDrag"),hasExternalDropZones=this.beans.dragAndDropService.hasExternalDropZones(),neverDisplayed=shouldPreventRowMove&&!hasExternalDropZones||suppressRowDrag;this.setDisplayedOrVisible(neverDisplayed)}},__name(_a61,"ManagedVisibilityStrategy"),_a61),IGNORED_SIBLING_PROPERTIES=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),_a62,_RowNode=(_a62=class{constructor(beans){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=_a62.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=beans}setData(data){this.setDataCommon(data,!1)}updateData(data){this.setDataCommon(data,!0)}setDataCommon(data,update){var _a253;const oldData=this.data;this.data=data,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const event=this.createDataChangedEvent(data,oldData,update);(_a253=this.localEventService)==null||_a253.dispatchEvent(event)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(newData,oldData,update){return{type:"dataChanged",node:this,oldData,newData,update}}getRowIndexString(){return this.rowIndex==null?(_errorOnce("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?_a62.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?_a62.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const oldNode=new _a62(this.beans);return oldNode.id=this.id,oldNode.data=this.data,oldNode.__daemon=!0,oldNode.selected=this.selected,oldNode.level=this.level,oldNode}setDataAndId(data,id){var _a253;const oldNode=_exists(this.id)?this.createDaemonNode():null,oldData=this.data;this.data=data,this.updateDataOnDetailNode(),this.setId(id),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,oldNode);const event=this.createDataChangedEvent(data,oldData,!1);(_a253=this.localEventService)==null||_a253.dispatchEvent(event)}checkRowSelectable(){const isRowSelectableFunc=_getIsRowSelectable(this.beans.gos);this.setRowSelectable(isRowSelectableFunc?isRowSelectableFunc(this):!0)}setRowSelectable(newVal,suppressSelectionUpdate){if(this.selectable!==newVal){if(this.selectable=newVal,this.dispatchRowEvent("selectableChanged"),suppressSelectionUpdate)return;if(_getGroupSelectsDescendants(this.beans.gos)){const selected=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:selected??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(id){var _a253;const getRowIdFunc=_getRowIdCallback(this.beans.gos);if(getRowIdFunc)if(this.data){const parentKeys=((_a253=this.parent)==null?void 0:_a253.getRoute())??[];this.id=getRowIdFunc({data:this.data,parentKeys:parentKeys.length>0?parentKeys:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(_a62.ID_PREFIX_ROW_GROUP)&&_errorOnce(`Row IDs cannot start with ${_a62.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=id}setRowTop(rowTop){this.oldRowTop=this.rowTop,this.rowTop!==rowTop&&(this.rowTop=rowTop,this.dispatchRowEvent("topChanged"),this.setDisplayed(rowTop!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(hovered){this.hovered=hovered}isHovered(){return this.hovered}setMaster(master){this.master!==master&&(this.master&&!master&&(this.expanded=!1),this.master=master,this.dispatchRowEvent("masterChanged"))}setGroup(group){this.group!==group&&(this.group&&!group&&(this.expanded=!1),this.group=group,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(rowHeight,estimated=!1){this.rowHeight=rowHeight,this.rowHeightEstimated=estimated,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(cellHeight,column){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[column.getId()]=cellHeight,cellHeight!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=_debounce(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){var _a253;let notAllPresent=!1,nonePresent=!0,newRowHeight=0;const autoHeights=this.__autoHeights;if(autoHeights==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(col=>{let cellHeight=autoHeights[col.getId()];if(cellHeight==null)if(this.beans.columnModel.isColSpanActive()){let activeColsForRow=[];switch(col.getPinned()){case"left":activeColsForRow=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":activeColsForRow=this.beans.visibleColsService.getRightColsForRow(this);break;case null:activeColsForRow=this.beans.columnViewportService.getColsWithinViewport(this);break}if(activeColsForRow.includes(col)){notAllPresent=!0;return}cellHeight=-1}else{notAllPresent=!0;return}else nonePresent=!1;cellHeight>newRowHeight&&(newRowHeight=cellHeight)}),notAllPresent)||((nonePresent||newRowHeight<10)&&(newRowHeight=_getRowHeightForNode(this.beans.gos,this).height),newRowHeight==this.rowHeight))return;this.setRowHeight(newRowHeight);const rowModel=this.beans.rowModel;(_a253=rowModel.onRowHeightChangedDebounced)==null||_a253.call(rowModel)}setExpanded(expanded,e,forceSync){if(this.expanded===expanded)return;this.expanded=expanded,this.dispatchRowEvent("expandedChanged");const event={...this.createGlobalRowEvent("rowGroupOpened"),expanded,event:e||null};this.beans.rowNodeEventThrottle.dispatchExpanded(event,forceSync),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(type){return this.beans.gos.addGridCommonParams({type,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(colKey,newValue,eventSource){const column=__name(()=>typeof colKey!="string"?colKey:this.beans.columnModel.getCol(colKey)??this.beans.columnModel.getColDefCol(colKey),"getColumnFromKey")(),oldValue=this.beans.valueService.getValueForDisplay(column,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column,colDef:column.getColDef(),data:this.data,node:this,oldValue,newValue,value:newValue,source:eventSource}),!1;const valueChanged=this.beans.valueService.setValue(this,column,newValue,eventSource);return this.dispatchCellChangedEvent(column,newValue,oldValue),this.checkRowSelectable(),valueChanged}setGroupValue(colKey,newValue){const column=this.beans.columnModel.getCol(colKey);_missing(this.groupData)&&(this.groupData={});const columnId=column.getColId(),oldValue=this.groupData[columnId];oldValue!==newValue&&(this.groupData[columnId]=newValue,this.dispatchCellChangedEvent(column,newValue,oldValue))}setAggData(newAggData){const oldAggData=this.aggData;if(this.aggData=newAggData,this.localEventService){const eventFunc=__name(colId=>{const value=this.aggData?this.aggData[colId]:void 0,oldValue=oldAggData?oldAggData[colId]:void 0;if(value===oldValue)return;const column=this.beans.columnModel.getCol(colId);column&&this.dispatchCellChangedEvent(column,value,oldValue)},"eventFunc");for(const key in oldAggData)eventFunc(key);for(const key in newAggData)(!oldAggData||!(key in oldAggData))&&eventFunc(key)}}updateHasChildren(){let newValue=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(_isServerSideRowModel(this.beans.gos)){const isTreeData=this.beans.gos.get("treeData"),isGroupFunc=this.beans.gos.get("isServerSideGroup");newValue=!this.stub&&!this.footer&&(isTreeData?!!isGroupFunc&&isGroupFunc(this.data):!!this.group)}newValue!==this.__hasChildren&&(this.__hasChildren=!!newValue,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(column,newValue,oldValue){var _a253;const cellChangedEvent={type:"cellChanged",node:this,column,newValue,oldValue};(_a253=this.localEventService)==null||_a253.dispatchEvent(cellChangedEvent)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(callback){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(child=>child.depthFirstSearch(callback)),callback(this)}calculateSelectedFromChildren(){var _a253;let atLeastOneSelected=!1,atLeastOneDeSelected=!1;if(!((_a253=this.childrenAfterGroup)!=null&&_a253.length))return this.selectable?this.selected:null;for(let i=0;i<this.childrenAfterGroup.length;i++){const child=this.childrenAfterGroup[i];let childState=child.isSelected();if(!child.selectable){const selectable=child.calculateSelectedFromChildren();if(selectable===null)continue;childState=selectable}switch(childState){case!0:atLeastOneSelected=!0;break;case!1:atLeastOneDeSelected=!0;break;default:return}}if(!(atLeastOneSelected&&atLeastOneDeSelected))return atLeastOneSelected?!0:atLeastOneDeSelected?!1:this.selectable?this.selected:null}setSelectedInitialValue(selected){this.selected=selected}dispatchRowEvent(type){var _a253;(_a253=this.localEventService)==null||_a253.dispatchEvent({type,node:this})}selectThisNode(newValue,e,source="api"){const selectionNotAllowed=!this.selectable&&newValue,selectionNotChanged=this.selected===newValue;if(selectionNotAllowed||selectionNotChanged)return!1;this.selected=newValue,this.dispatchRowEvent("rowSelected");const sibling=this.sibling;return sibling&&sibling.footer&&sibling.localEventService&&sibling.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:e||null,source}),!0}setSelected(newValue,clearSelection=!1,source="api"){if(typeof source=="boolean"){_warnOnce("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue,clearSelection,rangeSelect:!1,source})}setSelectedParams(params){return this.rowPinned?(_warnOnce("cannot select pinned rows"),0):this.id===void 0?(_warnOnce("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...params,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(eventType,userListener){var _a253;this.localEventService||(this.localEventService=new LocalEventService),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new FrameworkEventListenerService(this.beans.frameworkOverrides));const listener=((_a253=this.frameworkEventListenerService)==null?void 0:_a253.wrap(userListener))??userListener;this.localEventService.addEventListener(eventType,listener)}removeEventListener(eventType,userListener){var _a253;if(!this.localEventService)return;const listener=((_a253=this.frameworkEventListenerService)==null?void 0:_a253.unwrap(userListener))??userListener;this.localEventService.removeEventListener(eventType,listener),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(_warnOnce("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const isFullWidthCellFunc=this.beans.gos.getCallback("isFullWidthRow");return isFullWidthCellFunc?isFullWidthCellFunc({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const res=[];let pointer=this;for(;pointer&&pointer.key!=null;)res.push(pointer.key),pointer=pointer.parent;return res.reverse()}createFooter(){if(this.sibling)return;const footerNode=new _a62(this.beans);Object.keys(this).forEach(key=>{IGNORED_SIBLING_PROPERTIES.has(key)||(footerNode[key]=this[key])}),footerNode.footer=!0,footerNode.setRowTop(null),footerNode.setRowIndex(null),footerNode.oldRowTop=null,footerNode.id="rowGroupFooter_"+this.id,footerNode.sibling=this,this.sibling=footerNode}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(firstChild){this.firstChild!==firstChild&&(this.firstChild=firstChild,this.dispatchRowEvent("firstChildChanged"))}setLastChild(lastChild){this.lastChild!==lastChild&&(this.lastChild=lastChild,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(childIndex){this.childIndex!==childIndex&&(this.childIndex=childIndex,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(displayed){this.displayed!==displayed&&(this.displayed=displayed,this.dispatchRowEvent("displayedChanged"))}setDragging(dragging){this.dragging!==dragging&&(this.dragging=dragging,this.dispatchRowEvent("draggingChanged"))}setHighlighted(highlighted){this.highlighted!==highlighted&&(this.highlighted=highlighted,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(allChildrenCount){this.allChildrenCount!==allChildrenCount&&(this.allChildrenCount=allChildrenCount,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(rowIndex){this.rowIndex!==rowIndex&&(this.rowIndex=rowIndex,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(uiLevel){this.uiLevel!==uiLevel&&(this.uiLevel=uiLevel,this.dispatchRowEvent("uiLevelChanged"))}},__name(_a62,"_RowNode"),_a62);_RowNode.ID_PREFIX_ROW_GROUP="row-group-";_RowNode.ID_PREFIX_TOP_PINNED="t-";_RowNode.ID_PREFIX_BOTTOM_PINNED="b-";_RowNode.OBJECT_ID_SEQUENCE=0;var RowNode=_RowNode,_a63,FilterManager=(_a63=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(beans){this.columnModel=beans.columnModel,this.dataTypeService=beans.dataTypeService,this.quickFilterService=beans.quickFilterService,this.advancedFilterService=beans.advancedFilterService,this.columnFilterService=beans.columnFilterService}postConstruct(){const refreshFiltersForAggregations=this.refreshFiltersForAggregations.bind(this),updateAdvancedFilterColumns=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:refreshFiltersForAggregations,columnPivotChanged:refreshFiltersForAggregations,columnPivotModeChanged:refreshFiltersForAggregations,newColumnsLoaded:updateAdvancedFilterColumns,columnVisible:updateAdvancedFilterColumns,advancedFilterEnabledChanged:__name(({enabled})=>this.onAdvancedFilterEnabledChanged(enabled),"advancedFilterEnabledChanged"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",event=>this.setAdvancedFilterModel(event.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:__name(()=>this.onFilterChanged({source:"quickFilter"}),"quickFilterChanged")})}isExternalFilterPresentCallback(){const isFilterPresent=this.gos.getCallback("isExternalFilterPresent");return typeof isFilterPresent=="function"?isFilterPresent({}):!1}doesExternalFilterPass(node){const doesFilterPass=this.gos.get("doesExternalFilterPass");return typeof doesFilterPass=="function"?doesFilterPass(node):!1}setFilterModel(model,source="api"){var _a253;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}(_a253=this.columnFilterService)==null||_a253.setFilterModel(model,source)}getFilterModel(){var _a253;return((_a253=this.columnFilterService)==null?void 0:_a253.getFilterModel())??{}}isColumnFilterPresent(){var _a253;return!!((_a253=this.columnFilterService)!=null&&_a253.isColumnFilterPresent())}isAggregateFilterPresent(){var _a253;return!!((_a253=this.columnFilterService)!=null&&_a253.isAggregateFilterPresent())}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(enabled){var _a253,_b;enabled?(_a253=this.columnFilterService)!=null&&_a253.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):(_b=this.advancedFilterService)!=null&&_b.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var _a253;return!!((_a253=this.advancedFilterService)!=null&&_a253.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){var _a253;(_a253=this.quickFilterService)==null||_a253.resetQuickFilterCache()}refreshFiltersForAggregations(){_getGroupAggFiltering(this.gos)&&this.onFilterChanged()}onFilterChanged(params={}){const{source,additionalEventAttributes,columns=[]}=params;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(params):AgPromise.resolve()).then(()=>{var _a253;const filterChangedEvent={source,type:"filterChanged",columns};additionalEventAttributes&&_mergeDeep(filterChangedEvent,additionalEventAttributes),this.eventService.dispatchEvent(filterChangedEvent),(_a253=this.columnFilterService)==null||_a253.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var _a253;return!!((_a253=this.columnFilterService)!=null&&_a253.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var _a253;return!!((_a253=this.quickFilterService)!=null&&_a253.isQuickFilterPresent())}updateAggFiltering(){this.aggFiltering=!!_getGroupAggFiltering(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(filterToSkip,node){return this.doesRowPassFilter({rowNode:node,filterInstanceToSkip:filterToSkip})}doesRowPassAggregateFilters(params){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(params.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(params.rowNode,params.filterInstanceToSkip))}doesRowPassFilter(params){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(params.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(params.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(params.rowNode,params.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(params.rowNode))}isFilterActive(column){var _a253;return!!((_a253=this.columnFilterService)!=null&&_a253.isFilterActive(column))}getOrCreateFilterWrapper(column){var _a253;return((_a253=this.columnFilterService)==null?void 0:_a253.getOrCreateFilterWrapper(column))??null}getDefaultFloatingFilter(column){return this.columnFilterService.getDefaultFloatingFilter(column)}createFilterParams(column,colDef){return this.columnFilterService.createFilterParams(column,colDef)}isFilterAllowed(column){var _a253;return this.isAdvancedFilterEnabled()?!1:!!((_a253=this.columnFilterService)!=null&&_a253.isFilterAllowed(column))}getFloatingFilterCompDetails(column,showParentFilter){var _a253;return(_a253=this.columnFilterService)==null?void 0:_a253.getFloatingFilterCompDetails(column,showParentFilter)}getCurrentFloatingFilterParentModel(column){var _a253;return(_a253=this.columnFilterService)==null?void 0:_a253.getCurrentFloatingFilterParentModel(column)}destroyFilter(column,source="api"){var _a253;(_a253=this.columnFilterService)==null||_a253.destroyFilter(column,source)}areFilterCompsDifferent(oldCompDetails,newCompDetails){var _a253;return!!((_a253=this.columnFilterService)!=null&&_a253.areFilterCompsDifferent(oldCompDetails,newCompDetails))}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(expression){var _a253;if(this.isAdvancedFilterEnabled()){if((_a253=this.dataTypeService)!=null&&_a253.isPendingInference()){this.advancedFilterModelUpdateQueue.push(expression);return}this.advancedFilterService.setModel(expression??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(show,source){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source,force:show})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var _a253;return this.isAdvancedFilterEnabled()?!1:!!((_a253=this.columnFilterService)!=null&&_a253.hasFloatingFilters())}getFilterInstance(key,callback){var _a253;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return(_a253=this.columnFilterService)==null?void 0:_a253.getFilterInstance(key,callback)}getColumnFilterInstance(key){var _a253;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):((_a253=this.columnFilterService)==null?void 0:_a253.getColumnFilterInstance(key))??Promise.resolve(void 0)}warnAdvancedFilters(){_warnOnce("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(eCompToInsertBefore){var _a253;(_a253=this.advancedFilterService)==null||_a253.getCtrl().setupHeaderComp(eCompToInsertBefore)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(model=>this.setAdvancedFilterModel(model)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(key){var _a253;return(_a253=this.columnFilterService)==null?void 0:_a253.getColumnFilterModel(key)}setColumnFilterModel(key,model){var _a253;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):((_a253=this.columnFilterService)==null?void 0:_a253.setColumnFilterModel(key,model))??Promise.resolve()}setColDefPropertiesForDataType(colDef,dataTypeDefinition,formatValue){var _a253;(_a253=this.columnFilterService)==null||_a253.setColDefPropertiesForDataType(colDef,dataTypeDefinition,formatValue)}},__name(_a63,"FilterManager"),_a63),_a64,FilterWrapperComp=(_a64=class extends Component{constructor(column,source){super('<div class="ag-filter"></div>'),this.column=column,this.source=source,this.filterWrapper=null}wireBeans(beans){this.filterManager=beans.filterManager,this.columnModel=beans.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var _a253;return((_a253=this.filterWrapper)==null?void 0:_a253.filterPromise)??null}afterInit(){var _a253,_b;return((_b=(_a253=this.filterWrapper)==null?void 0:_a253.filterPromise)==null?void 0:_b.then(()=>{}))??AgPromise.resolve()}afterGuiAttached(params){var _a253,_b;(_b=(_a253=this.filterWrapper)==null?void 0:_a253.filterPromise)==null||_b.then(filter=>{var _a254;(_a254=filter==null?void 0:filter.afterGuiAttached)==null||_a254.call(filter,params)})}afterGuiDetached(){var _a253,_b;(_b=(_a253=this.filterWrapper)==null?void 0:_a253.filterPromise)==null||_b.then(filter=>{var _a254;(_a254=filter==null?void 0:filter.afterGuiDetached)==null||_a254.call(filter)})}createFilter(init){var _a253,_b;const{column,source}=this;this.filterWrapper=((_a253=this.filterManager)==null?void 0:_a253.getOrCreateFilterWrapper(column))??null,(_b=this.filterWrapper)!=null&&_b.filterPromise&&this.filterWrapper.filterPromise.then(filter=>{const guiFromFilter=filter.getGui();_exists(guiFromFilter)||_warnOnce(`getGui method from filter returned ${guiFromFilter}; it should be a DOM element.`),this.appendChild(guiFromFilter),init&&this.eventService.dispatchEvent({type:"filterOpened",column,source,eGui:this.getGui()})})}onFilterDestroyed(event){(event.source==="api"||event.source==="paramsUpdated")&&event.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(_clearElement(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},__name(_a64,"FilterWrapperComp"),_a64),RESIZE_CONTAINER_STYLE="ag-resizer-wrapper",makeDiv=__name((dataRefPrefix,classSuffix)=>`<div data-ref="${dataRefPrefix}Resizer" class="ag-resizer ag-resizer-${classSuffix}"></div>`,"makeDiv"),RESIZE_TEMPLATE=`<div class="${RESIZE_CONTAINER_STYLE}">
        ${makeDiv("eTopLeft","topLeft")}
        ${makeDiv("eTop","top")}
        ${makeDiv("eTopRight","topRight")}
        ${makeDiv("eRight","right")}
        ${makeDiv("eBottomRight","bottomRight")}
        ${makeDiv("eBottom","bottom")}
        ${makeDiv("eBottomLeft","bottomLeft")}
        ${makeDiv("eLeft","left")}
    </div>`,_a65,PositionableFeature=(_a65=class extends BeanStub{constructor(element,config){super(),this.element=element,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},config)}wireBeans(beans){this.popupService=beans.popupService,this.resizeObserverService=beans.resizeObserverService,this.dragService=beans.dragService}center(){const{clientHeight,clientWidth}=this.offsetParent,x=clientWidth/2-this.getWidth()/2,y=clientHeight/2-this.getHeight()/2;this.offsetElement(x,y)}initialisePosition(){if(this.positioned)return;const{centered,forcePopupParentAsOffsetParent,minWidth,width,minHeight,height,x,y}=this.config;this.offsetParent||this.setOffsetParent();let computedMinHeight=0,computedMinWidth=0;const isElementVisible=_isVisible(this.element);if(isElementVisible){const boundaryEl=this.findBoundaryElement(),offsetParentComputedStyles=window.getComputedStyle(boundaryEl);if(offsetParentComputedStyles.minWidth!=null){const paddingWidth=boundaryEl.offsetWidth-this.element.offsetWidth;computedMinWidth=parseInt(offsetParentComputedStyles.minWidth,10)-paddingWidth}if(offsetParentComputedStyles.minHeight!=null){const paddingHeight=boundaryEl.offsetHeight-this.element.offsetHeight;computedMinHeight=parseInt(offsetParentComputedStyles.minHeight,10)-paddingHeight}}if(this.minHeight=minHeight||computedMinHeight,this.minWidth=minWidth||computedMinWidth,width&&this.setWidth(width),height&&this.setHeight(height),(!width||!height)&&this.refreshSize(),centered)this.center();else if(x||y)this.offsetElement(x,y);else if(isElementVisible&&forcePopupParentAsOffsetParent){let boundaryEl=this.boundaryEl,initialisedDuringPositioning=!0;if(boundaryEl||(boundaryEl=this.findBoundaryElement(),initialisedDuringPositioning=!1),boundaryEl){const top=parseFloat(boundaryEl.style.top),left=parseFloat(boundaryEl.style.left);initialisedDuringPositioning?this.offsetElement(isNaN(left)?0:left,isNaN(top)?0:top):this.setPosition(left,top)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(movable,moveElement){if(!this.config.popup||movable===this.movable)return;this.movable=movable;const params=this.moveElementDragListener||{eElement:moveElement,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};movable?(this.dragService.addDragSource(params),this.moveElementDragListener=params):(this.dragService.removeDragSource(params),this.moveElementDragListener=void 0)}setResizable(resizable){if(this.clearResizeListeners(),resizable?this.addResizers():this.removeResizers(),typeof resizable=="boolean"){if(resizable===!1)return;resizable={topLeft:resizable,top:resizable,topRight:resizable,right:resizable,bottomRight:resizable,bottom:resizable,bottomLeft:resizable,left:resizable}}Object.keys(resizable).forEach(side=>{const isSideResizable=!!resizable[side],resizerEl=this.getResizerElement(side),params={dragStartPixels:0,eElement:resizerEl,onDragStart:__name(e=>this.onResizeStart(e,side),"onDragStart"),onDragging:this.onResize.bind(this),onDragStop:__name(e=>this.onResizeEnd(e,side),"onDragStop")};(isSideResizable||!this.isAlive()&&!isSideResizable)&&(isSideResizable?(this.dragService.addDragSource(params),this.resizeListeners.push(params),resizerEl.style.pointerEvents="all"):resizerEl.style.pointerEvents="none",this.resizable[side]=isSideResizable)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height,width}=this.lastSize;width!==-1&&(this.element.style.width=`${width}px`),height!==-1&&(this.element.style.height=`${height}px`)}getHeight(){return this.element.offsetHeight}setHeight(height){const{popup}=this.config,eGui=this.element;let isPercent=!1;if(typeof height=="string"&&height.indexOf("%")!==-1)_setFixedHeight(eGui,height),height=_getAbsoluteHeight(eGui),isPercent=!0;else if(height=Math.max(this.minHeight,height),this.positioned){const availableHeight=this.getAvailableHeight();availableHeight&&height>availableHeight&&(height=availableHeight)}this.getHeight()!==height&&(isPercent?(eGui.style.maxHeight="unset",eGui.style.minHeight="unset"):popup?_setFixedHeight(eGui,height):(eGui.style.height=`${height}px`,eGui.style.flex="0 0 auto",this.lastSize.height=typeof height=="number"?height:parseFloat(height)))}getAvailableHeight(){const{popup,forcePopupParentAsOffsetParent}=this.config;this.positioned||this.initialisePosition();const{clientHeight}=this.offsetParent;if(!clientHeight)return null;const elRect=this.element.getBoundingClientRect(),offsetParentRect=this.offsetParent.getBoundingClientRect(),yPosition=popup?this.position.y:elRect.top,parentTop=popup?0:offsetParentRect.top;let additionalHeight=0;if(forcePopupParentAsOffsetParent){const parentEl=this.element.parentElement;if(parentEl){const{bottom}=parentEl.getBoundingClientRect();additionalHeight=bottom-elRect.bottom}}return clientHeight+parentTop-yPosition-additionalHeight}getWidth(){return this.element.offsetWidth}setWidth(width){const eGui=this.element,{popup}=this.config;let isPercent=!1;if(typeof width=="string"&&width.indexOf("%")!==-1)_setFixedWidth(eGui,width),width=_getAbsoluteWidth(eGui),isPercent=!0;else if(this.positioned){width=Math.max(this.minWidth,width);const{clientWidth}=this.offsetParent,xPosition=popup?this.position.x:this.element.getBoundingClientRect().left;clientWidth&&width+xPosition>clientWidth&&(width=clientWidth-xPosition)}this.getWidth()!==width&&(isPercent?(eGui.style.maxWidth="unset",eGui.style.minWidth="unset"):this.config.popup?_setFixedWidth(eGui,width):(eGui.style.width=`${width}px`,eGui.style.flex=" unset",this.lastSize.width=typeof width=="number"?width:parseFloat(width)))}offsetElement(x=0,y=0){const{forcePopupParentAsOffsetParent}=this.config,ePopup=forcePopupParentAsOffsetParent?this.boundaryEl:this.element;ePopup&&(this.popupService.positionPopup({ePopup,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:__name(()=>({x,y}),"updatePosition")}),this.setPosition(parseFloat(ePopup.style.left),parseFloat(ePopup.style.top)))}constrainSizeToAvailableHeight(constrain){if(!this.config.forcePopupParentAsOffsetParent)return;const applyMaxHeightToElement=__name(()=>{const availableHeight=this.getAvailableHeight();this.element.style.setProperty("max-height",`${availableHeight}px`)},"applyMaxHeightToElement");constrain?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),applyMaxHeightToElement):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(x,y){this.position.x=x,this.position.y=y}updateDragStartPosition(x,y){this.dragStartPosition={x,y}}calculateMouseMovement(params){const{e,isLeft,isTop,anywhereWithin,topBuffer}=params,xDiff=e.clientX-this.dragStartPosition.x,yDiff=e.clientY-this.dragStartPosition.y,movementX=this.shouldSkipX(e,!!isLeft,!!anywhereWithin,xDiff)?0:xDiff,movementY=this.shouldSkipY(e,!!isTop,topBuffer,yDiff)?0:yDiff;return{movementX,movementY}}shouldSkipX(e,isLeft,anywhereWithin,diff){const elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),xPosition=this.config.popup?this.position.x:elRect.left;let skipX=xPosition<=0&&parentRect.left>=e.clientX||parentRect.right<=e.clientX&&parentRect.right<=boundaryElRect.right;return skipX?!0:(isLeft?skipX=diff<0&&e.clientX>xPosition+parentRect.left||diff>0&&e.clientX<xPosition+parentRect.left:anywhereWithin?skipX=diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<xPosition+parentRect.left:skipX=diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<boundaryElRect.right,skipX)}shouldSkipY(e,isTop,topBuffer=0,diff){const elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),yPosition=this.config.popup?this.position.y:elRect.top;let skipY=yPosition<=0&&parentRect.top>=e.clientY||parentRect.bottom<=e.clientY&&parentRect.bottom<=boundaryElRect.bottom;return skipY?!0:(isTop?skipY=diff<0&&e.clientY>yPosition+parentRect.top+topBuffer||diff>0&&e.clientY<yPosition+parentRect.top:skipY=diff<0&&e.clientY>boundaryElRect.bottom||diff>0&&e.clientY<boundaryElRect.bottom,skipY)}createResizeMap(){const eGui=this.element;this.resizerMap={topLeft:{element:eGui.querySelector("[data-ref=eTopLeftResizer]")},top:{element:eGui.querySelector("[data-ref=eTopResizer]")},topRight:{element:eGui.querySelector("[data-ref=eTopRightResizer]")},right:{element:eGui.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:eGui.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:eGui.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:eGui.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:eGui.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const eGui=this.element;if(!eGui)return;const resizers=new DOMParser().parseFromString(RESIZE_TEMPLATE,"text/html").body;eGui.appendChild(resizers.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const resizerEl=this.element.querySelector(`.${RESIZE_CONTAINER_STYLE}`);resizerEl&&this.element.removeChild(resizerEl),this.resizersAdded=!1}getResizerElement(side){return this.resizerMap[side].element}onResizeStart(e,side){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!side.match(/top/i),isRight:!!side.match(/right/i),isBottom:!!side.match(/bottom/i),isLeft:!!side.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[side].element.classList.add("ag-active");const{popup,forcePopupParentAsOffsetParent}=this.config;!popup&&!forcePopupParentAsOffsetParent&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const parent=this.element.parentElement;return parent?Array.prototype.slice.call(parent.children).filter(el=>!el.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const siblings=this.getSiblings()||[];let height=0,width=0;for(let i=0;i<siblings.length;i++){const currentEl=siblings[i],isFlex=!!currentEl.style.flex&&currentEl.style.flex!=="0 0 auto";if(currentEl===this.element)continue;let nextHeight=this.minHeight||0,nextWidth=this.minWidth||0;if(isFlex){const computedStyle=window.getComputedStyle(currentEl);computedStyle.minHeight&&(nextHeight=parseInt(computedStyle.minHeight,10)),computedStyle.minWidth&&(nextWidth=parseInt(computedStyle.minWidth,10))}else nextHeight=currentEl.offsetHeight,nextWidth=currentEl.offsetWidth;height+=nextHeight,width+=nextWidth}return{height,width}}applySizeToSiblings(vertical){let containerToFlex=null;const siblings=this.getSiblings();if(siblings){for(let i=0;i<siblings.length;i++){const el=siblings[i];el!==containerToFlex&&(vertical?el.style.height=`${el.offsetHeight}px`:el.style.width=`${el.offsetWidth}px`,el.style.flex="0 0 auto",el===this.element&&(containerToFlex=siblings[i+1]))}containerToFlex&&(containerToFlex.style.removeProperty("height"),containerToFlex.style.removeProperty("min-height"),containerToFlex.style.removeProperty("max-height"),containerToFlex.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(value=>value)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup,forcePopupParentAsOffsetParent}=this.config,{isTop,isRight,isBottom,isLeft}=this.currentResizer,isHorizontal=isRight||isLeft,isVertical=isBottom||isTop,{movementX,movementY}=this.calculateMouseMovement({e,isLeft,isTop}),xPosition=this.position.x,yPosition=this.position.y;let offsetLeft=0,offsetTop=0;if(isHorizontal&&movementX){const direction=isLeft?-1:1,oldWidth=this.getWidth(),newWidth=oldWidth+movementX*direction;let skipWidth=!1;isLeft&&(offsetLeft=oldWidth-newWidth,(xPosition+offsetLeft<=0||newWidth<=this.minWidth)&&(skipWidth=!0,offsetLeft=0)),skipWidth||this.setWidth(newWidth)}if(isVertical&&movementY){const direction=isTop?-1:1,oldHeight=this.getHeight(),newHeight=oldHeight+movementY*direction;let skipHeight=!1;isTop?(offsetTop=oldHeight-newHeight,(yPosition+offsetTop<=0||newHeight<=this.minHeight)&&(skipHeight=!0,offsetTop=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&oldHeight<newHeight&&this.getMinSizeOfSiblings().height+newHeight>this.element.parentElement.offsetHeight&&(skipHeight=!0),skipHeight||this.setHeight(newHeight)}this.updateDragStartPosition(e.clientX,e.clientY),((popup||forcePopupParentAsOffsetParent)&&offsetLeft||offsetTop)&&this.offsetElement(xPosition+offsetLeft,yPosition+offsetTop)}onResizeEnd(e,side){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[side].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const eGui=this.element;this.config.popup&&(this.config.width||this.setWidth(eGui.offsetWidth),this.config.height||this.setHeight(eGui.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x,y}=this.position;let topBuffer;this.config.calculateTopBuffer&&(topBuffer=this.config.calculateTopBuffer());const{movementX,movementY}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer});this.offsetElement(x+movementX,y+movementY),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let el=this.element;for(;el;){if(window.getComputedStyle(el).position!=="static")return el;el=el.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const params=this.resizeListeners.pop();this.dragService.removeDragSource(params)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},__name(_a65,"PositionableFeature"),_a65),_a66,_ManagedFocusFeature=(_a66=class extends BeanStub{constructor(eFocusableElement,callbacks={}){super(),this.eFocusableElement=eFocusableElement,this.callbacks=callbacks,this.callbacks={shouldStopEventPropagation:__name(()=>!1,"shouldStopEventPropagation"),onTabKeyDown:__name(e=>{if(e.defaultPrevented)return;const nextRoot=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e.shiftKey);nextRoot&&(nextRoot.focus(),e.preventDefault())},"onTabKeyDown"),...callbacks}}wireBeans(beans){this.focusService=beans.focusService}postConstruct(){this.eFocusableElement.classList.add(_a66.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(eGui){this.addManagedElementListeners(eGui,{keydown:__name(e=>{if(!(e.defaultPrevented||_isStopPropagationForAgGrid(e))){if(this.callbacks.shouldStopEventPropagation(e)){_stopPropagationForAgGrid(e);return}e.key===KeyCode.TAB?this.callbacks.onTabKeyDown(e):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(e)}},"keydown")})}},__name(_a66,"_ManagedFocusFeature"),_a66);_ManagedFocusFeature.FOCUS_MANAGED_CLASS="ag-focus-managed";var ManagedFocusFeature=_ManagedFocusFeature,FILTER_LOCALE_TEXT={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function getDebounceMs(params,debounceDefault){return isUseApplyButton(params)?(params.debounceMs!=null&&_warnOnce("debounceMs is ignored when apply button is present"),0):params.debounceMs!=null?params.debounceMs:debounceDefault}__name(getDebounceMs,"getDebounceMs");function isUseApplyButton(params){return!!params.buttons&&params.buttons.indexOf("apply")>=0}__name(isUseApplyButton,"isUseApplyButton");var _a67,ProvidedFilter=(_a67=class extends Component{constructor(filterNameKey){super(),this.filterNameKey=filterNameKey,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=RefPlaceholder,this.buttonListeners=[]}wireBeans(beans){this.rowModel=beans.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new PositionableFeature(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(paramsMap){let eGui=this.getGui();eGui&&eGui.removeEventListener("submit",this.onFormSubmit);const templateString=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(templateString,this.getAgComponents(),paramsMap),eGui=this.getGui(),eGui&&eGui.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(params){this.setParams(params),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(params){this.providedFilterParams=params,this.applyActive=isUseApplyButton(params),this.resetButtonsPanel(params)}updateParams(params){this.providedFilterParams=params,this.applyActive=isUseApplyButton(params),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(newParams,oldParams){const{buttons:oldButtons,readOnly:oldReadOnly}=oldParams??{},{buttons,readOnly}=newParams;if(oldReadOnly===readOnly&&_jsonEquals(oldButtons,buttons))return;const hasButtons=buttons&&buttons.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(_clearElement(this.eButtonsPanel),this.buttonListeners.forEach(destroyFunc=>destroyFunc()),this.buttonListeners=[]):hasButtons&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!hasButtons){this.eButtonsPanel&&_removeFromParent(this.eButtonsPanel);return}const fragment=document.createDocumentFragment(),addButton=__name(type=>{let text,clickListener;switch(type){case"apply":text=this.translate("applyFilter"),clickListener=__name(e=>this.onBtApply(!1,!1,e),"clickListener");break;case"clear":text=this.translate("clearFilter"),clickListener=__name(()=>this.onBtClear(),"clickListener");break;case"reset":text=this.translate("resetFilter"),clickListener=__name(()=>this.onBtReset(),"clickListener");break;case"cancel":text=this.translate("cancelFilter"),clickListener=__name(e=>{this.onBtCancel(e)},"clickListener");break;default:_warnOnce("Unknown button type specified");return}const button=_loadTemplate(`<button
                    type="${type==="apply"?"submit":"button"}"
                    data-ref="${type}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${text}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(button,{click:clickListener})),fragment.append(button)},"addButton");buttons.forEach(type=>addButton(type)),this.eButtonsPanel.append(fragment),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const debounceMs=getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),debounceFunc=_debounce(this.checkApplyDebounce.bind(this),debounceMs);this.onBtApplyDebounce=()=>{this.debouncePending=!0,debounceFunc()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(model){return(model!=null?this.setModelIntoUi(model):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(currentModel,afterUiUpdatedFunc){const afterAppliedFunc=__name(()=>{this.onUiChanged(!1,"prevent"),afterUiUpdatedFunc==null||afterUiUpdatedFunc()},"afterAppliedFunc");currentModel!=null?this.setModelIntoUi(currentModel).then(afterAppliedFunc):this.resetUiToDefaults().then(afterAppliedFunc)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(source="api"){const newModel=this.getModelFromUi();if(!this.isModelValid(newModel))return!1;const previousModel=this.appliedModel;return this.appliedModel=newModel,!this.areModelsEqual(previousModel,newModel)}isModelValid(model){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(afterFloatingFilter=!1,afterDataChange=!1,e){e&&e.preventDefault(),this.applyModel(afterDataChange?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter,afterDataChange,source:"columnFilter"});const{closeOnApply}=this.providedFilterParams;closeOnApply&&this.applyActive&&!afterFloatingFilter&&!afterDataChange&&this.close(e)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const keyboardEvent=e,key=keyboardEvent&&keyboardEvent.key;let params;(key==="Enter"||key==="Space")&&(params={keyboardEvent}),this.hidePopup(params),this.hidePopup=null}onUiChanged(fromFloatingFilter=!1,apply){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const isValid=this.isModelValid(this.getModelFromUi()),applyFilterButton=this.queryForHtmlElement('[data-ref="applyFilterButton"]');applyFilterButton&&_setDisabled(applyFilterButton,!isValid)}fromFloatingFilter&&!apply||apply==="immediately"?this.onBtApply(fromFloatingFilter):(!this.applyActive&&!apply||apply==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(params){params&&(this.hidePopup=params.hidePopup),this.refreshFilterResizer(params==null?void 0:params.container)}refreshFilterResizer(containerType){if(!this.positionableFeature||containerType==="toolPanel")return;const isResizable=containerType==="floatingFilter"||containerType==="columnFilter",{positionableFeature,gos}=this;isResizable?(positionableFeature.restoreLastSize(),positionableFeature.setResizable(gos.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(newParams){const oldParams=this.providedFilterParams;return this.providedFilterParams=newParams,this.resetButtonsPanel(newParams,oldParams),!0}destroy(){const eGui=this.getGui();eGui&&eGui.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(key){return this.localeService.getLocaleTextFunc()(key,FILTER_LOCALE_TEXT[key])}getCellValue(rowNode){return this.providedFilterParams.getValue(rowNode)}getPositionableElement(){return this.eFilterBody}},__name(_a67,"ProvidedFilter"),_a67),_a68,AgRadioButton=(_a68=class extends AgCheckbox{constructor(config){super(config,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(event){event.selected&&event.name&&this.eInput.name&&this.eInput.name===event.name&&event.id&&this.eInput.id!==event.id&&this.setValue(!1,!0)}},__name(_a68,"AgRadioButton"),_a68),_a69,AgList=(_a69=class extends Component{constructor(cssIdentifier="default",unFocusable=!1){super(`<div class="ag-list ag-${cssIdentifier}-list" role="listbox"></div>`),this.cssIdentifier=cssIdentifier,this.unFocusable=unFocusable,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const eGui=this.getGui();this.addManagedElementListeners(eGui,{mouseleave:__name(()=>this.clearHighlighted(),"mouseleave")}),!this.unFocusable&&this.addManagedElementListeners(eGui,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const key=e.key;switch(key){case KeyCode.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const pos=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(pos)}break;case KeyCode.DOWN:case KeyCode.UP:e.preventDefault(),this.navigate(key);break;case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:e.preventDefault(),this.navigateToPage(key);break}}navigate(key){const isDown=key===KeyCode.DOWN;let itemToHighlight;if(!this.highlightedEl)itemToHighlight=this.itemEls[isDown?0:this.itemEls.length-1];else{let nextPos=this.itemEls.indexOf(this.highlightedEl)+(isDown?1:-1);nextPos=Math.min(Math.max(nextPos,0),this.itemEls.length-1),itemToHighlight=this.itemEls[nextPos]}this.highlightItem(itemToHighlight)}navigateToPage(key){if(!this.highlightedEl||this.itemEls.length===0)return;const currentIdx=this.itemEls.indexOf(this.highlightedEl),rowCount=this.options.length-1,itemHeight=this.itemEls[0].clientHeight,pageSize=Math.floor(this.getGui().clientHeight/itemHeight);let newIndex=-1;key===KeyCode.PAGE_HOME?newIndex=0:key===KeyCode.PAGE_END?newIndex=rowCount:key===KeyCode.PAGE_DOWN?newIndex=Math.min(currentIdx+pageSize,rowCount):key===KeyCode.PAGE_UP&&(newIndex=Math.max(currentIdx-pageSize,0)),newIndex!==-1&&this.highlightItem(this.itemEls[newIndex])}addOptions(listOptions){return listOptions.forEach(listOption=>this.addOption(listOption)),this}addOption(listOption){const{value,text}=listOption,valueToRender=text||value;return this.options.push({value,text:valueToRender}),this.renderOption(value,valueToRender),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(itemEl=>{_removeFromParent(itemEl)}),this.itemEls=[]}updateIndices(){const options=this.getGui().querySelectorAll(".ag-list-item");options.forEach((option,idx)=>{_setAriaPosInSet(option,idx+1),_setAriaSetSize(option,options.length)})}renderOption(value,text){const eDocument=_getDocument(this.gos),itemEl=eDocument.createElement("div");_setAriaRole(itemEl,"option"),itemEl.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const span=eDocument.createElement("span");itemEl.appendChild(span),span.textContent=text,this.unFocusable||(itemEl.tabIndex=-1),this.itemEls.push(itemEl),this.addManagedListeners(itemEl,{mouseover:__name(()=>this.highlightItem(itemEl),"mouseover"),mousedown:__name(e=>{e.preventDefault(),e.stopPropagation(),this.setValue(value)},"mousedown")}),this.createManagedBean(new TooltipFeature({getTooltipValue:__name(()=>text,"getTooltipValue"),getGui:__name(()=>itemEl,"getGui"),getLocation:__name(()=>"UNKNOWN","getLocation"),shouldDisplayTooltip:__name(()=>span.scrollWidth>span.clientWidth,"shouldDisplayTooltip")})),this.getGui().appendChild(itemEl)}setValue(value,silent){if(this.value===value)return this.fireItemSelected(),this;if(value==null)return this.reset(silent),this;const idx=this.options.findIndex(option=>option.value===value);if(idx!==-1){const option=this.options[idx];this.value=option.value,this.displayValue=option.text,this.highlightItem(this.itemEls[idx]),silent||this.fireChangeEvent()}return this}setValueByIndex(idx){return this.setValue(this.options[idx].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const idx=this.options.findIndex(option=>option.value===this.value);idx!==-1&&this.highlightItem(this.itemEls[idx])}reset(silent){this.value=null,this.displayValue=null,this.clearHighlighted(),silent||this.fireChangeEvent()}highlightItem(el){if(!_isVisible(el))return;this.clearHighlighted(),this.highlightedEl=el,this.highlightedEl.classList.add(this.activeClass),_setAriaSelected(this.highlightedEl,!0);const eGui=this.getGui(),{scrollTop,clientHeight}=eGui,{offsetTop,offsetHeight}=el;(offsetTop+offsetHeight>scrollTop+clientHeight||offsetTop<scrollTop)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!_isVisible(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),_setAriaSelected(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},__name(_a69,"AgList"),_a69),_a70,AgPickerField=(_a70=class extends AgAbstractField{constructor(config){if(super(config,(config==null?void 0:config.template)||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,(config==null?void 0:config.agComponents)||[],config==null?void 0:config.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=RefPlaceholder,this.eWrapper=RefPlaceholder,this.eDisplayField=RefPlaceholder,this.eIcon=RefPlaceholder,this.ariaRole=config==null?void 0:config.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!config)return;const{pickerGap,maxPickerHeight,variableWidth,minPickerWidth,maxPickerWidth}=config;pickerGap!=null&&(this.pickerGap=pickerGap),this.variableWidth=!!variableWidth,maxPickerHeight!=null&&this.setPickerMaxHeight(maxPickerHeight),minPickerWidth!=null&&this.setPickerMinWidth(minPickerWidth),maxPickerWidth!=null&&this.setPickerMaxWidth(maxPickerWidth)}wireBeans(beans){this.popupService=beans.popupService}postConstruct(){super.postConstruct(),this.setupAria();const displayId=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",displayId);const ariaEl=this.getAriaElement();this.addManagedElementListeners(ariaEl,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon,inputWidth}=this.config;if(pickerIcon){const icon=_createIconNoSpan(pickerIcon,this.gos);icon&&this.eIcon.appendChild(icon)}inputWidth!=null&&this.setInputWidth(inputWidth)}setupAria(){const ariaEl=this.getAriaElement();ariaEl.setAttribute("tabindex",this.gos.get("tabIndex").toString()),_setAriaExpanded(ariaEl,!1),this.ariaRole&&_setAriaRole(ariaEl,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const focusableEl=this.getFocusableElement();if(focusableEl!==this.eWrapper&&(e==null?void 0:e.target)===focusableEl)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:case KeyCode.ENTER:case KeyCode.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case KeyCode.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const pickerGui=this.pickerComponent.getGui();pickerGui.addEventListener("focusin",this.onPickerFocusIn),pickerGui.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const ePicker=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:__name(()=>{this.hidePicker()},"bodyScroll")}));const translate=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey,pickerAriaLabelValue,modalPicker=!0}=this.config,popupParams={modal:modalPicker,eChild:ePicker,closeOnEsc:!0,closedCallback:__name(()=>{const shouldRestoreFocus=_isNothingFocused(this.gos);this.beforeHidePicker(),shouldRestoreFocus&&this.isAlive()&&this.getFocusableElement().focus()},"closedCallback"),ariaLabel:translate(pickerAriaLabelKey,pickerAriaLabelValue),anchorToElement:this.eWrapper};ePicker.style.position="absolute";const addPopupRes=this.popupService.addPopup(popupParams),{maxPickerHeight,minPickerWidth,maxPickerWidth,variableWidth}=this;variableWidth?(minPickerWidth&&(ePicker.style.minWidth=minPickerWidth),ePicker.style.width=_formatSize(_getAbsoluteWidth(this.eWrapper)),maxPickerWidth&&(ePicker.style.maxWidth=maxPickerWidth)):_setElementWidth(ePicker,maxPickerWidth??_getAbsoluteWidth(this.eWrapper));const maxHeight=maxPickerHeight??`${_getInnerHeight(this.popupService.getPopupParent())}px`;return ePicker.style.setProperty("max-height",maxHeight),this.alignPickerToComponent(),addPopupRes.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType}=this.config,{pickerGap}=this,alignSide=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:pickerType,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide,keepWithinBounds:!0,nudgeY:pickerGap})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const pickerGui=this.pickerComponent.getGui();pickerGui.removeEventListener("focusin",this.onPickerFocusIn),pickerGui.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(expanded){if(!this.isAlive())return;const ariaEl=this.getAriaElement();_setAriaExpanded(ariaEl,expanded),this.eWrapper.classList.toggle("ag-picker-expanded",expanded),this.eWrapper.classList.toggle("ag-picker-collapsed",!expanded)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var _a253;(_a253=this.pickerComponent)!=null&&_a253.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(focused){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",focused)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(width){return _setElementWidth(this.eWrapper,width),this}getFocusableElement(){return this.eWrapper}setPickerGap(gap){return this.pickerGap=gap,this}setPickerMinWidth(width){return typeof width=="number"&&(width=`${width}px`),this.minPickerWidth=width??void 0,this}setPickerMaxWidth(width){return typeof width=="number"&&(width=`${width}px`),this.maxPickerWidth=width??void 0,this}setPickerMaxHeight(height){return typeof height=="number"&&(height=`${height}px`),this.maxPickerHeight=height??void 0,this}destroy(){this.hidePicker(),super.destroy()}},__name(_a70,"AgPickerField"),_a70),_a71,AgSelect=(_a71=class extends AgPickerField{constructor(config){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...config})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options,value,placeholder}=this.config;options!=null&&this.addOptions(options),value!=null&&this.setValue(value,!0),placeholder&&value==null&&(this.eDisplayField.textContent=placeholder),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new AgList("select",!0)),this.listComponent.setParentComponent(this);const eListAriaEl=this.listComponent.getAriaElement(),listId=`ag-select-list-${this.listComponent.getCompId()}`;eListAriaEl.setAttribute("id",listId),_setAriaControls(this.getAriaElement(),eListAriaEl),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:__name(()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},"selectedItem")}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:__name(()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())},"fieldValueChanged")})}createPickerComponent(){return this.listComponent}onKeyDown(e){var _a253;const{key}=e;switch(key===KeyCode.TAB&&this.hidePicker(),key){case KeyCode.ENTER:case KeyCode.UP:case KeyCode.DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(_a253=this.listComponent)==null||_a253.handleKeyDown(e):super.onKeyDown(e);break;case KeyCode.ESCAPE:super.onKeyDown(e);break;case KeyCode.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(options){return options.forEach(option=>this.addOption(option)),this}addOption(option){return this.listComponent.addOption(option),this}clearOptions(){var _a253;return(_a253=this.listComponent)==null||_a253.clearOptions(),this}setValue(value,silent,fromPicker){if(this.value===value||!this.listComponent)return this;if(fromPicker||this.listComponent.setValue(value,!0),this.listComponent.getValue()===this.getValue())return this;let displayValue=this.listComponent.getDisplayValue();return displayValue==null&&this.config.placeholder&&(displayValue=this.config.placeholder),this.eDisplayField.textContent=displayValue,this.setTooltip({newTooltipText:displayValue??null,shouldDisplayTooltip:__name(()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth,"shouldDisplayTooltip")}),super.setValue(value,silent)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},__name(_a71,"AgSelect"),_a71),AgSelectSelector={selector:"AG-SELECT",component:AgSelect},_a72,OptionsFactory=(_a72=class{constructor(){this.customFilterOptions={}}init(params,defaultOptions){this.filterOptions=params.filterOptions||defaultOptions,this.mapCustomOptions(),this.selectDefaultItem(params)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(filterOption=>{if(typeof filterOption=="string")return;const requiredProperties=[["displayKey"],["displayName"],["predicate","test"]],propertyCheck=__name(keys=>keys.some(key=>filterOption[key]!=null)?!0:(_warnOnce(`ignoring FilterOptionDef as it doesn't contain one of '${keys}'`),!1),"propertyCheck");if(!requiredProperties.every(propertyCheck)){this.filterOptions=this.filterOptions.filter(v=>v===filterOption)||[];return}this.customFilterOptions[filterOption.displayKey]=filterOption})}selectDefaultItem(params){if(params.defaultOption)this.defaultOption=params.defaultOption;else if(this.filterOptions.length>=1){const firstFilterOption=this.filterOptions[0];typeof firstFilterOption=="string"?this.defaultOption=firstFilterOption:firstFilterOption.displayKey?this.defaultOption=firstFilterOption.displayKey:_warnOnce("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else _warnOnce("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(name){return this.customFilterOptions[name]}},__name(_a72,"OptionsFactory"),_a72),_a73,SimpleFilter=(_a73=class extends ProvidedFilter{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(type){const customOpts=this.optionsFactory.getCustomOption(type);if(customOpts){const{numberOfInputs}=customOpts;return numberOfInputs??1}return type&&["empty","notBlank","blank"].indexOf(type)>=0?0:type==="inRange"?2:1}onFloatingFilterChanged(type,value){this.setTypeFromFloatingFilter(type),this.setValueFromFloatingFilter(value),this.onUiChanged(!0)}setTypeFromFloatingFilter(type){this.eTypes.forEach((eType,position)=>{position===0?eType.setValue(type,!0):eType.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const conditions=this.getUiCompleteConditions();return conditions.length===0?null:this.maxNumConditions>1&&conditions.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions}:conditions[0]}getConditionTypes(){return this.eTypes.map(eType=>eType.getValue())}getConditionType(position){return this.eTypes[position].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(a,b){if(!a&&!b)return!0;if(!a&&b||a&&!b)return!1;const aIsSimple=!a.operator,bIsSimple=!b.operator;if(!aIsSimple&&bIsSimple||aIsSimple&&!bIsSimple)return!1;let res;if(aIsSimple){const aSimple=a,bSimple=b;res=this.areSimpleModelsEqual(aSimple,bSimple)}else{const aCombined=a,bCombined=b;res=aCombined.operator===bCombined.operator&&_areEqual(aCombined.conditions,bCombined.conditions,(aModel,bModel)=>this.areSimpleModelsEqual(aModel,bModel))}return res}shouldRefresh(newParams){var _a253;const model=this.getModel(),conditions=model?model.conditions??[model]:null,newOptionsList=((_a253=newParams.filterOptions)==null?void 0:_a253.map(option=>typeof option=="string"?option:option.displayKey))??this.getDefaultFilterOptions();return!(!(!conditions||conditions.every(condition=>newOptionsList.find(option=>option===condition.type)!==void 0))||typeof newParams.maxNumConditions=="number"&&conditions&&conditions.length>newParams.maxNumConditions)}refresh(newParams){return!this.shouldRefresh(newParams)||!super.refresh(newParams)?!1:(this.setParams(newParams),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(model){if(model.operator){const combinedModel=model;let conditions=combinedModel.conditions;conditions==null&&(conditions=[],_warnOnce("Filter model is missing 'conditions'"));const numConditions=this.validateAndUpdateConditions(conditions),numPrevConditions=this.getNumConditions();if(numConditions<numPrevConditions)this.removeConditionsAndOperators(numConditions);else if(numConditions>numPrevConditions)for(let i=numPrevConditions;i<numConditions;i++)this.createJoinOperatorPanel(),this.createOption();const orChecked=combinedModel.operator==="OR";this.eJoinOperatorsAnd.forEach(eJoinOperatorAnd=>eJoinOperatorAnd.setValue(!orChecked,!0)),this.eJoinOperatorsOr.forEach(eJoinOperatorOr=>eJoinOperatorOr.setValue(orChecked,!0)),conditions.forEach((condition,position)=>{this.eTypes[position].setValue(condition.type,!0),this.setConditionIntoUi(condition,position)})}else{const simpleModel=model;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(simpleModel.type,!0),this.setConditionIntoUi(simpleModel,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),AgPromise.resolve()}validateAndUpdateConditions(conditions){let numConditions=conditions.length;return numConditions>this.maxNumConditions&&(conditions.splice(this.maxNumConditions),_warnOnce('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),numConditions=this.maxNumConditions),numConditions}doesFilterPass(params){const model=this.getModel();if(model==null)return!0;const{operator}=model,models=[];if(operator){const combinedModel=model;models.push(...combinedModel.conditions??[])}else models.push(model);return models[operator&&operator==="OR"?"some":"every"](m=>this.individualConditionPasses(params,m))}setParams(params){super.setParams(params),this.setNumConditions(params),this.defaultJoinOperator=this.getDefaultJoinOperator(params.defaultJoinOperator),this.filterPlaceholder=params.filterPlaceholder,this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(params){this.maxNumConditions=params.maxNumConditions??2,this.maxNumConditions<1&&(_warnOnce('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=params.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(_warnOnce('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(_warnOnce('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const eType=this.createManagedBean(new AgSelect);this.eTypes.push(eType),eType.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(eType.getGui());const eConditionBody=this.createValueElement();this.eConditionBodies.push(eConditionBody),this.eFilterBody.appendChild(eConditionBody),this.putOptionsIntoDropdown(eType),this.resetType(eType);const position=this.getNumConditions()-1;this.forEachPositionInput(position,element=>this.resetInput(element)),this.addChangedListeners(eType,position)}createJoinOperatorPanel(){const eJoinOperatorPanel=document.createElement("div");this.eJoinOperatorPanels.push(eJoinOperatorPanel),eJoinOperatorPanel.classList.add("ag-filter-condition");const eJoinOperatorAnd=this.createJoinOperator(this.eJoinOperatorsAnd,eJoinOperatorPanel,"and"),eJoinOperatorOr=this.createJoinOperator(this.eJoinOperatorsOr,eJoinOperatorPanel,"or");this.eFilterBody.appendChild(eJoinOperatorPanel);const index=this.eJoinOperatorPanels.length-1,uniqueGroupId=this.joinOperatorId++;this.resetJoinOperatorAnd(eJoinOperatorAnd,index,uniqueGroupId),this.resetJoinOperatorOr(eJoinOperatorOr,index,uniqueGroupId),this.isReadOnly()||(eJoinOperatorAnd.onValueChange(this.listener),eJoinOperatorOr.onValueChange(this.listener))}createJoinOperator(eJoinOperators,eJoinOperatorPanel,andOr){const eJoinOperator=this.createManagedBean(new AgRadioButton);return eJoinOperators.push(eJoinOperator),eJoinOperator.addCssClass("ag-filter-condition-operator"),eJoinOperator.addCssClass(`ag-filter-condition-operator-${andOr}`),eJoinOperatorPanel.appendChild(eJoinOperator.getGui()),eJoinOperator}getDefaultJoinOperator(defaultJoinOperator){return defaultJoinOperator==="AND"||defaultJoinOperator==="OR"?defaultJoinOperator:"AND"}createFilterListOptions(){const filterOptions=this.optionsFactory.getFilterOptions();this.filterListOptions=filterOptions.map(option=>typeof option=="string"?this.createBoilerplateListOption(option):this.createCustomListOption(option))}putOptionsIntoDropdown(eType){this.filterListOptions.forEach(listOption=>{eType.addOption(listOption)}),eType.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(option){return{value:option,text:this.translate(option)}}createCustomListOption(option){const{displayKey}=option,customOption=this.optionsFactory.getCustomOption(option.displayKey);return{value:displayKey,text:customOption?this.localeService.getLocaleTextFunc()(customOption.displayKey,customOption.displayName):this.translate(displayKey)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const joinOperator=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,joinOperator)}updateNumConditions(){let lastUiCompletePosition=-1,areAllConditionsUiComplete=!0;for(let position=0;position<this.getNumConditions();position++)this.isConditionUiComplete(position)?lastUiCompletePosition=position:areAllConditionsUiComplete=!1;if(this.shouldAddNewConditionAtEnd(areAllConditionsUiComplete))this.createJoinOperatorPanel(),this.createOption();else{const activePosition=this.lastUiCompletePosition??this.getNumConditions()-2;if(lastUiCompletePosition<activePosition){this.removeConditionsAndOperators(activePosition+1);const removeStartPosition=lastUiCompletePosition+1,numConditionsToRemove=activePosition-removeStartPosition;numConditionsToRemove>0&&this.removeConditionsAndOperators(removeStartPosition,numConditionsToRemove),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=lastUiCompletePosition}updateConditionStatusesAndValues(lastUiCompletePosition,joinOperator){this.eTypes.forEach((eType,position)=>{const disabled=this.isConditionDisabled(position,lastUiCompletePosition);eType.setDisabled(disabled||this.filterListOptions.length<=1),position===1&&(_setDisabled(this.eJoinOperatorPanels[0],disabled),this.eJoinOperatorsAnd[0].setDisabled(disabled),this.eJoinOperatorsOr[0].setDisabled(disabled))}),this.eConditionBodies.forEach((element,index)=>{_setDisplayed(element,this.isConditionBodyVisible(index))});const orChecked=(joinOperator??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(eJoinOperatorAnd=>{eJoinOperatorAnd.setValue(!orChecked,!0)}),this.eJoinOperatorsOr.forEach(eJoinOperatorOr=>{eJoinOperatorOr.setValue(orChecked,!0)}),this.forEachInput((element,index,position,numberOfInputs)=>{this.setElementDisplayed(element,index<numberOfInputs),this.setElementDisabled(element,this.isConditionDisabled(position,lastUiCompletePosition))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(areAllConditionsUiComplete){return areAllConditionsUiComplete&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(startPosition,deleteCount){if(startPosition>=this.getNumConditions())return;this.removeComponents(this.eTypes,startPosition,deleteCount),this.removeElements(this.eConditionBodies,startPosition,deleteCount),this.removeValueElements(startPosition,deleteCount);const joinOperatorIndex=Math.max(startPosition-1,0);this.removeElements(this.eJoinOperatorPanels,joinOperatorIndex,deleteCount),this.removeComponents(this.eJoinOperatorsAnd,joinOperatorIndex,deleteCount),this.removeComponents(this.eJoinOperatorsOr,joinOperatorIndex,deleteCount)}removeElements(elements,startPosition,deleteCount){this.removeItems(elements,startPosition,deleteCount).forEach(element=>_removeFromParent(element))}removeComponents(components,startPosition,deleteCount){this.removeItems(components,startPosition,deleteCount).forEach(comp=>{_removeFromParent(comp.getGui()),this.destroyBean(comp)})}removeItems(items,startPosition,deleteCount){return deleteCount==null?items.splice(startPosition):items.splice(startPosition,deleteCount)}afterGuiAttached(params){if(super.afterGuiAttached(params),this.resetPlaceholder(),!(params!=null&&params.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const firstInput=this.getInputs(0)[0];if(!firstInput)return;firstInput instanceof AgAbstractInputField&&firstInput.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const appliedModel=this.getModel();this.resetUiToActiveModel(appliedModel);let lastUiCompletePosition=-1,updatedLastUiCompletePosition=-1,conditionsRemoved=!1;const joinOperator=this.getJoinOperator();for(let position=this.getNumConditions()-1;position>=0;position--)if(this.isConditionUiComplete(position))lastUiCompletePosition===-1&&(lastUiCompletePosition=position,updatedLastUiCompletePosition=position);else{const shouldRemovePositionAtEnd=position>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(position-1),positionBeforeLastUiCompletePosition=position<lastUiCompletePosition;(shouldRemovePositionAtEnd||positionBeforeLastUiCompletePosition)&&(this.removeConditionsAndOperators(position,1),conditionsRemoved=!0,positionBeforeLastUiCompletePosition&&updatedLastUiCompletePosition--)}let shouldUpdateConditionStatusesAndValues=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),shouldUpdateConditionStatusesAndValues=!0),this.shouldAddNewConditionAtEnd(updatedLastUiCompletePosition===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),shouldUpdateConditionStatusesAndValues=!0),shouldUpdateConditionStatusesAndValues&&this.updateConditionStatusesAndValues(updatedLastUiCompletePosition,joinOperator),conditionsRemoved&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=updatedLastUiCompletePosition}getPlaceholderText(defaultPlaceholder,position){let placeholder=this.translate(defaultPlaceholder);if(_isFunction(this.filterPlaceholder)){const filterPlaceholderFn=this.filterPlaceholder,filterOptionKey=this.eTypes[position].getValue(),filterOption=this.translate(filterOptionKey);placeholder=filterPlaceholderFn({filterOptionKey,filterOption,placeholder})}else typeof this.filterPlaceholder=="string"&&(placeholder=this.filterPlaceholder);return placeholder}resetPlaceholder(){const globalTranslate=this.localeService.getLocaleTextFunc();this.forEachInput((element,index,position,numberOfInputs)=>{if(!(element instanceof AgAbstractInputField))return;const placeholder=index===0&&numberOfInputs>1?"inRangeStart":index===0?"filterOoo":"inRangeEnd",ariaLabel=index===0&&numberOfInputs>1?globalTranslate("ariaFilterFromValue","Filter from value"):index===0?globalTranslate("ariaFilterValue","Filter Value"):globalTranslate("ariaFilterToValue","Filter to Value");element.setInputPlaceholder(this.getPlaceholderText(placeholder,position)),element.setInputAriaLabel(ariaLabel)})}setElementValue(element,value,fromFloatingFilter){element instanceof AgAbstractInputField&&element.setValue(value!=null?String(value):null,!0)}setElementDisplayed(element,displayed){element instanceof Component&&_setDisplayed(element.getGui(),displayed)}setElementDisabled(element,disabled){element instanceof Component&&_setDisabled(element.getGui(),disabled)}attachElementOnChange(element,listener){element instanceof AgAbstractInputField&&element.onValueChange(listener)}forEachInput(cb){this.getConditionTypes().forEach((type,position)=>{this.forEachPositionTypeInput(position,type,cb)})}forEachPositionInput(position,cb){const type=this.getConditionType(position);this.forEachPositionTypeInput(position,type,cb)}forEachPositionTypeInput(position,type,cb){const numberOfInputs=this.getNumberOfInputs(type),inputs=this.getInputs(position);for(let index=0;index<inputs.length;index++){const input=inputs[index];input!=null&&cb(input,index,position,numberOfInputs)}}isConditionDisabled(position,lastUiCompletePosition){return this.isReadOnly()?!0:position===0?!1:position>lastUiCompletePosition+1}isConditionBodyVisible(position){const type=this.getConditionType(position);return this.getNumberOfInputs(type)>0}isConditionUiComplete(position){return!(position>=this.getNumConditions()||this.getConditionType(position)==="empty"||this.getValues(position).some(v=>v==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const conditions=[];for(let position=0;position<this.getNumConditions();position++)this.isConditionUiComplete(position)&&conditions.push(this.createCondition(position));return conditions}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let i=this.getNumConditions();i<this.numAlwaysVisibleConditions;i++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(silent){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(eType=>this.resetType(eType)),this.eJoinOperatorsAnd.forEach((eJoinOperatorAnd,index)=>this.resetJoinOperatorAnd(eJoinOperatorAnd,index,this.joinOperatorId+index)),this.eJoinOperatorsOr.forEach((eJoinOperatorOr,index)=>this.resetJoinOperatorOr(eJoinOperatorOr,index,this.joinOperatorId+index)),this.joinOperatorId++,this.forEachInput(element=>this.resetInput(element)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,silent||this.onUiChanged(),AgPromise.resolve()}resetType(eType){const filteringLabel=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");eType.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(filteringLabel).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(eJoinOperatorAnd,index,uniqueGroupId){this.resetJoinOperator(eJoinOperatorAnd,index,this.isDefaultOperator("AND"),this.translate("andCondition"),uniqueGroupId)}resetJoinOperatorOr(eJoinOperatorOr,index,uniqueGroupId){this.resetJoinOperator(eJoinOperatorOr,index,this.isDefaultOperator("OR"),this.translate("orCondition"),uniqueGroupId)}resetJoinOperator(eJoinOperator,index,value,label,uniqueGroupId){this.updateJoinOperatorDisabled(eJoinOperator.setValue(value,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${uniqueGroupId}`).setLabel(label),index)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((eJoinOperator,index)=>this.updateJoinOperatorDisabled(eJoinOperator,index)),this.eJoinOperatorsOr.forEach((eJoinOperator,index)=>this.updateJoinOperatorDisabled(eJoinOperator,index))}updateJoinOperatorDisabled(eJoinOperator,index){eJoinOperator.setDisabled(this.isReadOnly()||index>0)}resetInput(element){this.setElementValue(element,null),this.setElementDisabled(element,this.isReadOnly())}setConditionIntoUi(model,position){const values=this.mapValuesFromModel(model);this.forEachInput((element,index,elPosition)=>{elPosition===position&&this.setElementValue(element,values[index]!=null?values[index]:null)})}setValueFromFloatingFilter(value){this.forEachInput((element,index,position)=>{this.setElementValue(element,index===0&&position===0?value:null,!0)})}isDefaultOperator(operator){return operator===this.defaultJoinOperator}addChangedListeners(eType,position){this.isReadOnly()||(eType.onValueChange(this.listener),this.forEachPositionInput(position,element=>{this.attachElementOnChange(element,this.listener)}))}individualConditionPasses(params,filterModel){const cellValue=this.getCellValue(params.node),values=this.mapValuesFromModel(filterModel),customFilterOption=this.optionsFactory.getCustomOption(filterModel.type),customFilterResult=this.evaluateCustomFilter(customFilterOption,values,cellValue);return customFilterResult??(cellValue==null?this.evaluateNullValue(filterModel.type):this.evaluateNonNullValue(values,cellValue,filterModel,params))}evaluateCustomFilter(customFilterOption,values,cellValue){if(customFilterOption==null)return;const{predicate}=customFilterOption;if(predicate!=null&&!values.some(v=>v==null))return predicate(values,cellValue)}isBlank(cellValue){return cellValue==null||typeof cellValue=="string"&&cellValue.trim().length===0}hasInvalidInputs(){return!1}},__name(_a73,"SimpleFilter"),_a73),_a74,ScalarFilter=(_a74=class extends SimpleFilter{setParams(params){super.setParams(params),this.scalarFilterParams=params}evaluateNullValue(filterType){switch(filterType){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(values,cellValue,filterModel){const comparator=this.comparator(),compareResult=values[0]!=null?comparator(values[0],cellValue):0;switch(filterModel.type){case"equals":return compareResult===0;case"notEqual":return compareResult!==0;case"greaterThan":return compareResult>0;case"greaterThanOrEqual":return compareResult>=0;case"lessThan":return compareResult<0;case"lessThanOrEqual":return compareResult<=0;case"inRange":{const compareToResult=comparator(values[1],cellValue);return this.scalarFilterParams.inRangeInclusive?compareResult>=0&&compareToResult<=0:compareResult>0&&compareToResult<0}case"blank":return this.isBlank(cellValue);case"notBlank":return!this.isBlank(cellValue);default:return _warnOnce('Unexpected type of filter "'+filterModel.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},__name(_a74,"ScalarFilter"),_a74),A_KEYCODE=65,C_KEYCODE=67,V_KEYCODE=86,D_KEYCODE=68,Z_KEYCODE=90,Y_KEYCODE=89;function _isEventFromPrintableCharacter(event){var _a253;return event.altKey||event.ctrlKey||event.metaKey?!1:((_a253=event.key)==null?void 0:_a253.length)===1}__name(_isEventFromPrintableCharacter,"_isEventFromPrintableCharacter");function _isUserSuppressingKeyboardEvent(gos,keyboardEvent,rowNode,column,editing){const colDefFunc=column?column.getColDef().suppressKeyboardEvent:void 0;if(!colDefFunc)return!1;const params=gos.addGridCommonParams({event:keyboardEvent,editing,column,node:rowNode,data:rowNode.data,colDef:column.getColDef()});return!!(colDefFunc&&colDefFunc(params))}__name(_isUserSuppressingKeyboardEvent,"_isUserSuppressingKeyboardEvent");function _isUserSuppressingHeaderKeyboardEvent(gos,keyboardEvent,headerRowIndex,column){const colDef=column.getDefinition(),colDefFunc=colDef&&colDef.suppressHeaderKeyboardEvent;if(!_exists(colDefFunc))return!1;const params=gos.addGridCommonParams({colDef,column,headerRowIndex,event:keyboardEvent});return!!colDefFunc(params)}__name(_isUserSuppressingHeaderKeyboardEvent,"_isUserSuppressingHeaderKeyboardEvent");function _normaliseQwertyAzerty(keyboardEvent){const{keyCode}=keyboardEvent;let code;switch(keyCode){case A_KEYCODE:code=KeyCode.A;break;case C_KEYCODE:code=KeyCode.C;break;case V_KEYCODE:code=KeyCode.V;break;case D_KEYCODE:code=KeyCode.D;break;case Z_KEYCODE:code=KeyCode.Z;break;case Y_KEYCODE:code=KeyCode.Y;break;default:code=keyboardEvent.code}return code}__name(_normaliseQwertyAzerty,"_normaliseQwertyAzerty");function _isDeleteKey(key,alwaysReturnFalseOnBackspace=!1){return key===KeyCode.DELETE?!0:!alwaysReturnFalseOnBackspace&&key===KeyCode.BACKSPACE?_isMacOsUserAgent():!1}__name(_isDeleteKey,"_isDeleteKey");var _a75,AgInputTextField=(_a75=class extends AgAbstractInputField{constructor(config,className="ag-text-field",inputType="text"){super(config,className,inputType)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(value,silent){return this.eInput.value!==value&&(this.eInput.value=_exists(value)?value:""),super.setValue(value,silent)}setStartValue(value){this.setValue(value,!0)}preventDisallowedCharacters(){const pattern=new RegExp(`[${this.config.allowedCharPattern}]`),preventCharacters=__name(event=>{_isEventFromPrintableCharacter(event)&&event.key&&!pattern.test(event.key)&&event.preventDefault()},"preventCharacters");this.addManagedListeners(this.eInput,{keydown:preventCharacters,paste:__name(e=>{var _a253;const text=(_a253=e.clipboardData)==null?void 0:_a253.getData("text");text&&text.split("").some(c=>!pattern.test(c))&&e.preventDefault()},"paste")})}},__name(_a75,"AgInputTextField"),_a75),AgInputTextFieldSelector={selector:"AG-INPUT-TEXT-FIELD",component:AgInputTextField},_a76,AgInputNumberField=(_a76=class extends AgInputTextField{constructor(config){super(config,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:__name(()=>{const floatedValue=parseFloat(this.eInput.value),value=isNaN(floatedValue)?"":this.normalizeValue(floatedValue.toString());this.value!==value&&this.setValue(value)},"blur"),wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision,min,max,step}=this.config;typeof precision=="number"&&this.setPrecision(precision),typeof min=="number"&&this.setMin(min),typeof max=="number"&&this.setMax(max),typeof step=="number"&&this.setStep(step)}onWheel(e){_getActiveDomElement(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(value){if(value==="")return"";this.precision!=null&&(value=this.adjustPrecision(value));const val=parseFloat(value);return this.min!=null&&val<this.min?value=this.min.toString():this.max!=null&&val>this.max&&(value=this.max.toString()),value}adjustPrecision(value,isScientificNotation){if(this.precision==null)return value;if(isScientificNotation){const floatString=parseFloat(value).toFixed(this.precision);return parseFloat(floatString).toString()}const parts=String(value).split(".");if(parts.length>1){if(parts[1].length<=this.precision)return value;if(this.precision>0)return`${parts[0]}.${parts[1].slice(0,this.precision)}`}return parts[0]}setMin(min){return this.min===min?this:(this.min=min,_addOrRemoveAttribute(this.eInput,"min",min),this)}setMax(max){return this.max===max?this:(this.max=max,_addOrRemoveAttribute(this.eInput,"max",max),this)}setPrecision(precision){return this.precision=precision,this}setStep(step){return this.step===step?this:(this.step=step,_addOrRemoveAttribute(this.eInput,"step",step),this)}setValue(value,silent){return this.setValueOrInputValue(v=>super.setValue(v,silent),()=>this,value)}setStartValue(value){return this.setValueOrInputValue(v=>super.setValue(v,!0),v=>{this.eInput.value=v},value)}setValueOrInputValue(setValueFunc,setInputValueOnlyFunc,value){if(_exists(value)){let setInputValueOnly=this.isScientificNotation(value);if(setInputValueOnly&&this.eInput.validity.valid)return setValueFunc(value);if(!setInputValueOnly){value=this.adjustPrecision(value);const normalizedValue=this.normalizeValue(value);setInputValueOnly=value!=normalizedValue}if(setInputValueOnly)return setInputValueOnlyFunc(value)}return setValueFunc(value)}getValue(){if(!this.eInput.validity.valid)return;const inputValue=this.eInput.value;return this.isScientificNotation(inputValue)?this.adjustPrecision(inputValue,!0):super.getValue()}isScientificNotation(value){return typeof value=="string"&&value.includes("e")}},__name(_a76,"AgInputNumberField"),_a76),AgInputNumberFieldSelector={selector:"AG-INPUT-NUMBER-FIELD",component:AgInputNumberField},DEFAULT_NUMBER_FILTER_OPTIONS=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],_a77,SimpleFilterModelFormatter=(_a77=class{constructor(localeService,optionsFactory,valueFormatter){this.localeService=localeService,this.optionsFactory=optionsFactory,this.valueFormatter=valueFormatter}getModelAsString(model){if(!model)return null;const isCombined=model.operator!=null,translate=this.localeService.getLocaleTextFunc();if(isCombined){const combinedModel=model,customOptions=(combinedModel.conditions??[]).map(condition=>this.getModelAsString(condition)),joinOperatorTranslateKey=combinedModel.operator==="AND"?"andCondition":"orCondition";return customOptions.join(` ${translate(joinOperatorTranslateKey,FILTER_LOCALE_TEXT[joinOperatorTranslateKey])} `)}else{if(model.type==="blank"||model.type==="notBlank")return translate(model.type,model.type);{const condition=model,customOption=this.optionsFactory.getCustomOption(condition.type),{displayKey,displayName,numberOfInputs}=customOption||{};return displayKey&&displayName&&numberOfInputs===0?(translate(displayKey,displayName),displayName):this.conditionToString(condition,customOption)}}}updateParams(params){this.optionsFactory=params.optionsFactory}formatValue(value){return this.valueFormatter?this.valueFormatter(value??null)??"":String(value)}},__name(_a77,"SimpleFilterModelFormatter"),_a77),_a78,NumberFilterModelFormatter=(_a78=class extends SimpleFilterModelFormatter{conditionToString(condition,options){const{numberOfInputs}=options||{};return condition.type=="inRange"||numberOfInputs===2?`${this.formatValue(condition.filter)}-${this.formatValue(condition.filterTo)}`:condition.filter!=null?this.formatValue(condition.filter):`${condition.type}`}},__name(_a78,"NumberFilterModelFormatter"),_a78);function getAllowedCharPattern(filterParams){const{allowedCharPattern}=filterParams??{};return allowedCharPattern??null}__name(getAllowedCharPattern,"getAllowedCharPattern");var _a79,NumberFilter=(_a79=class extends ScalarFilter{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(params){return this.numberFilterParams.allowedCharPattern!==params.allowedCharPattern?!1:super.refresh(params)}mapValuesFromModel(filterModel){const{filter,filterTo,type}=filterModel||{};return[this.processValue(filter),this.processValue(filterTo)].slice(0,this.getNumberOfInputs(type))}getDefaultDebounceMs(){return 500}comparator(){return(left,right)=>left===right?0:left<right?1:-1}setParams(params){this.numberFilterParams=params,super.setParams(params),this.filterModelFormatter=new NumberFilterModelFormatter(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return DEFAULT_NUMBER_FILTER_OPTIONS}setElementValue(element,value,fromFloatingFilter){const valueToSet=!fromFloatingFilter&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(value??null):value;super.setElementValue(element,valueToSet)}createValueElement(){const allowedCharPattern=getAllowedCharPattern(this.numberFilterParams),eCondition=document.createElement("div");return eCondition.classList.add("ag-filter-body"),_setAriaRole(eCondition,"presentation"),this.createFromToElement(eCondition,this.eValuesFrom,"from",allowedCharPattern),this.createFromToElement(eCondition,this.eValuesTo,"to",allowedCharPattern),eCondition}createFromToElement(eCondition,eValues,fromTo,allowedCharPattern){const eValue=this.createManagedBean(allowedCharPattern?new AgInputTextField({allowedCharPattern}):new AgInputNumberField);eValue.addCssClass(`ag-filter-${fromTo}`),eValue.addCssClass("ag-filter-filter"),eValues.push(eValue),eCondition.appendChild(eValue.getGui())}removeValueElements(startPosition,deleteCount){this.removeComponents(this.eValuesFrom,startPosition,deleteCount),this.removeComponents(this.eValuesTo,startPosition,deleteCount)}getValues(position){const result=[];return this.forEachPositionInput(position,(element,index,_elPosition,numberOfInputs)=>{index<numberOfInputs&&result.push(this.processValue(this.stringToFloat(element.getValue())))}),result}areSimpleModelsEqual(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type}getFilterType(){return"number"}processValue(value){return value==null||isNaN(value)?null:value}stringToFloat(value){if(typeof value=="number")return value;let filterText=_makeNull(value);return filterText!=null&&filterText.trim()===""&&(filterText=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(filterText):filterText==null||filterText.trim()==="-"?null:parseFloat(filterText)}createCondition(position){const type=this.getConditionType(position),model={filterType:this.getFilterType(),type},values=this.getValues(position);return values.length>0&&(model.filter=values[0]),values.length>1&&(model.filterTo=values[1]),model}getInputs(position){return position>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[position],this.eValuesTo[position]]}getModelAsString(model){return this.filterModelFormatter.getModelAsString(model)??""}hasInvalidInputs(){let invalidInputs=!1;return this.forEachInput(element=>{if(!element.getInputElement().validity.valid){invalidInputs=!0;return}}),invalidInputs}},__name(_a79,"NumberFilter"),_a79),DEFAULT_TEXT_FILTER_OPTIONS=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],_a80,TextFilterModelFormatter=(_a80=class extends SimpleFilterModelFormatter{conditionToString(condition,options){const{numberOfInputs}=options||{};return condition.type=="inRange"||numberOfInputs===2?`${condition.filter}-${condition.filterTo}`:condition.filter!=null?`${condition.filter}`:`${condition.type}`}},__name(_a80,"TextFilterModelFormatter"),_a80);function trimInputForFilter(value){const trimmedInput=value&&value.trim();return trimmedInput===""?value:trimmedInput}__name(trimInputForFilter,"trimInputForFilter");var _a81,TextFilter=(_a81=class extends SimpleFilter{constructor(){super("textFilter"),this.defaultFormatter=from=>from,this.defaultLowercaseFormatter=from=>from==null?null:from.toString().toLowerCase(),this.defaultMatcher=({filterOption,value,filterText})=>{if(filterText==null)return!1;switch(filterOption){case"contains":return value.indexOf(filterText)>=0;case"notContains":return value.indexOf(filterText)<0;case"equals":return value===filterText;case"notEqual":return value!=filterText;case"startsWith":return value.indexOf(filterText)===0;case"endsWith":{const index=value.lastIndexOf(filterText);return index>=0&&index===value.length-filterText.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(params){this.textFilterParams=params,super.setParams(params),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new TextFilterModelFormatter(this.localeService,this.optionsFactory)}getTextMatcher(){const legacyComparator=this.textFilterParams.textCustomComparator;return legacyComparator?(_warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption,value,filterText})=>legacyComparator(filterOption,value,filterText)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(position){const type=this.getConditionType(position),model={filterType:this.getFilterType(),type},values=this.getValuesWithSideEffects(position,!0);return values.length>0&&(model.filter=values[0]),values.length>1&&(model.filterTo=values[1]),model}getFilterType(){return"text"}areSimpleModelsEqual(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type}getInputs(position){return position>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[position],this.eValuesTo[position]]}getValues(position){return this.getValuesWithSideEffects(position,!1)}getValuesWithSideEffects(position,applySideEffects){const result=[];return this.forEachPositionInput(position,(element,index,_elPosition,numberOfInputs)=>{if(index<numberOfInputs){let value=_makeNull(element.getValue());applySideEffects&&this.textFilterParams.trimInput&&(value=trimInputForFilter(value)??null,element.setValue(value,!0)),result.push(value)}}),result}getDefaultFilterOptions(){return DEFAULT_TEXT_FILTER_OPTIONS}createValueElement(){const eCondition=document.createElement("div");return eCondition.classList.add("ag-filter-body"),_setAriaRole(eCondition,"presentation"),this.createFromToElement(eCondition,this.eValuesFrom,"from"),this.createFromToElement(eCondition,this.eValuesTo,"to"),eCondition}createFromToElement(eCondition,eValues,fromTo){const eValue=this.createManagedBean(new AgInputTextField);eValue.addCssClass(`ag-filter-${fromTo}`),eValue.addCssClass("ag-filter-filter"),eValues.push(eValue),eCondition.appendChild(eValue.getGui())}removeValueElements(startPosition,deleteCount){this.removeComponents(this.eValuesFrom,startPosition,deleteCount),this.removeComponents(this.eValuesTo,startPosition,deleteCount)}mapValuesFromModel(filterModel){const{filter,filterTo,type}=filterModel||{};return[filter||null,filterTo||null].slice(0,this.getNumberOfInputs(type))}evaluateNullValue(filterType){return filterType?["notEqual","notContains","blank"].indexOf(filterType)>=0:!1}evaluateNonNullValue(values,cellValue,filterModel,params){const formattedValues=values.map(v=>this.formatter(v))||[],cellValueFormatted=this.formatter(cellValue),{api,colDef,column,context,textFormatter}=this.textFilterParams;if(filterModel.type==="blank")return this.isBlank(cellValue);if(filterModel.type==="notBlank")return!this.isBlank(cellValue);const matcherParams={api,colDef,column,context,node:params.node,data:params.data,filterOption:filterModel.type,value:cellValueFormatted,textFormatter};return formattedValues.some(v=>this.matcher({...matcherParams,filterText:v}))}getModelAsString(model){return this.filterModelFormatter.getModelAsString(model)??""}},__name(_a81,"TextFilter"),_a81);function toNumber(value){if(typeof value=="number")return value;if(typeof value=="string"){const parsed=parseInt(value);return isNaN(parsed)?void 0:parsed}}__name(toNumber,"toNumber");function toConstrainedNum(min,max=Number.MAX_VALUE){return value=>{const num=toNumber(value);if(!(num==null||num<min||num>max))return num}}__name(toConstrainedNum,"toConstrainedNum");function _padStartWidthZeros(value,totalStringSize){return value.toString().padStart(totalStringSize,"0")}__name(_padStartWidthZeros,"_padStartWidthZeros");function _createArrayOfNumbers(first,last){const result=[];for(let i=first;i<=last;i++)result.push(i);return result}__name(_createArrayOfNumbers,"_createArrayOfNumbers");function _formatNumberCommas(value,thousandSeparator,decimalSeparator){return typeof value!="number"?"":value.toString().replace(".",decimalSeparator).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${thousandSeparator}`)}__name(_formatNumberCommas,"_formatNumberCommas");function _serialiseDate(date,includeTime=!0,separator="-"){if(!date)return null;let serialised=[date.getFullYear(),date.getMonth()+1,date.getDate()].map(part=>_padStartWidthZeros(part,2)).join(separator);return includeTime&&(serialised+=" "+[date.getHours(),date.getMinutes(),date.getSeconds()].map(part=>_padStartWidthZeros(part,2)).join(":")),serialised}__name(_serialiseDate,"_serialiseDate");var calculateOrdinal=__name(value=>{if(value>3&&value<21)return"th";switch(value%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},"calculateOrdinal");function _dateToFormattedString(date,format="YYYY-MM-DD"){const fullYear=_padStartWidthZeros(date.getFullYear(),4),months=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],replace={YYYY:__name(()=>fullYear.slice(fullYear.length-4,fullYear.length),"YYYY"),YY:__name(()=>fullYear.slice(fullYear.length-2,fullYear.length),"YY"),Y:__name(()=>`${date.getFullYear()}`,"Y"),MMMM:__name(()=>months[date.getMonth()],"MMMM"),MMM:__name(()=>months[date.getMonth()].slice(0,3),"MMM"),MM:__name(()=>_padStartWidthZeros(date.getMonth()+1,2),"MM"),Mo:__name(()=>`${date.getMonth()+1}${calculateOrdinal(date.getMonth()+1)}`,"Mo"),M:__name(()=>`${date.getMonth()+1}`,"M"),Do:__name(()=>`${date.getDate()}${calculateOrdinal(date.getDate())}`,"Do"),DD:__name(()=>_padStartWidthZeros(date.getDate(),2),"DD"),D:__name(()=>`${date.getDate()}`,"D"),dddd:__name(()=>days[date.getDay()],"dddd"),ddd:__name(()=>days[date.getDay()].slice(0,3),"ddd"),dd:__name(()=>days[date.getDay()].slice(0,2),"dd"),do:__name(()=>`${date.getDay()}${calculateOrdinal(date.getDay())}`,"do"),d:__name(()=>`${date.getDay()}`,"d")},regexp=new RegExp(Object.keys(replace).join("|"),"g");return format.replace(regexp,match=>match in replace?replace[match]():match)}__name(_dateToFormattedString,"_dateToFormattedString");function _parseDateTimeFromString(value){if(!value)return null;const[dateStr,timeStr]=value.split(" ");if(!dateStr)return null;const fields=dateStr.split("-").map(f=>parseInt(f,10));if(fields.filter(f=>!isNaN(f)).length!==3)return null;const[year,month,day]=fields,date=new Date(year,month-1,day);if(date.getFullYear()!==year||date.getMonth()!==month-1||date.getDate()!==day)return null;if(!timeStr||timeStr==="00:00:00")return date;const[hours,minutes,seconds]=timeStr.split(":").map(part=>parseInt(part,10));return hours>=0&&hours<24&&date.setHours(hours),minutes>=0&&minutes<60&&date.setMinutes(minutes),seconds>=0&&seconds<60&&date.setSeconds(seconds),date}__name(_parseDateTimeFromString,"_parseDateTimeFromString");var _a82,DateCompWrapper=(_a82=class{constructor(context,userComponentFactory,dateComponentParams,eParent,onReady){this.alive=!0,this.context=context,this.eParent=eParent,userComponentFactory.getDateCompDetails(dateComponentParams).newAgStackInstance().then(dateComp=>{if(!this.alive){context.destroyBean(dateComp);return}this.dateComp=dateComp,dateComp&&(eParent.appendChild(dateComp.getGui()),dateComp.afterGuiAttached&&dateComp.afterGuiAttached(),this.tempValue&&dateComp.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),onReady==null||onReady(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(value){this.dateComp?this.dateComp.setDate(value):this.tempValue=value}setDisabled(disabled){this.dateComp?this.setDateCompDisabled(disabled):this.disabled=disabled}setDisplayed(displayed){_setDisplayed(this.eParent,displayed)}setInputPlaceholder(placeholder){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(placeholder)}setInputAriaLabel(label){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(label)}afterGuiAttached(params){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(params)}updateParams(params){var _a253,_b;let hasRefreshed=!1;(_a253=this.dateComp)!=null&&_a253.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(params)!==null&&(hasRefreshed=!0),!hasRefreshed&&((_b=this.dateComp)!=null&&_b.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(params)!==null&&_warnOnce("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(disabled){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(disabled)}},__name(_a82,"DateCompWrapper"),_a82),DEFAULT_DATE_FILTER_OPTIONS=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],_a83,DateFilterModelFormatter=(_a83=class extends SimpleFilterModelFormatter{constructor(dateFilterParams,localeService,optionsFactory){super(localeService,optionsFactory),this.dateFilterParams=dateFilterParams}conditionToString(condition,options){const{type}=condition,{numberOfInputs}=options||{},isRange=type=="inRange"||numberOfInputs===2,dateFrom=_parseDateTimeFromString(condition.dateFrom),dateTo=_parseDateTimeFromString(condition.dateTo),format=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(isRange){const formattedFrom=dateFrom!==null?_dateToFormattedString(dateFrom,format):"null",formattedTo=dateTo!==null?_dateToFormattedString(dateTo,format):"null";return`${formattedFrom}-${formattedTo}`}return dateFrom!=null?_dateToFormattedString(dateFrom,format):`${type}`}updateParams(params){super.updateParams(params),this.dateFilterParams=params.dateFilterParams}},__name(_a83,"DateFilterModelFormatter"),_a83),DEFAULT_MIN_YEAR=1e3,DEFAULT_MAX_YEAR=1/0,_a84,DateFilter=(_a84=class extends ScalarFilter{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=DEFAULT_MIN_YEAR,this.maxValidYear=DEFAULT_MAX_YEAR,this.minValidDate=null,this.maxValidDate=null}wireBeans(beans){super.wireBeans(beans),this.context=beans.context,this.userComponentFactory=beans.userComponentFactory}afterGuiAttached(params){super.afterGuiAttached(params),this.dateConditionFromComps[0].afterGuiAttached(params)}mapValuesFromModel(filterModel){const{dateFrom,dateTo,type}=filterModel||{};return[dateFrom&&_parseDateTimeFromString(dateFrom)||null,dateTo&&_parseDateTimeFromString(dateTo)||null].slice(0,this.getNumberOfInputs(type))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(filterDate,cellValue){const cellAsDate=cellValue;return cellValue==null||cellAsDate<filterDate?-1:cellAsDate>filterDate?1:0}setParams(params){this.dateFilterParams=params,super.setParams(params);const yearParser=__name((param,fallback)=>{if(params[param]!=null)if(isNaN(params[param]))_warnOnce(`DateFilter ${param} is not a number`);else return params[param]==null?fallback:Number(params[param]);return fallback},"yearParser");this.minValidYear=yearParser("minValidYear",DEFAULT_MIN_YEAR),this.maxValidYear=yearParser("maxValidYear",DEFAULT_MAX_YEAR),this.minValidYear>this.maxValidYear&&_warnOnce("DateFilter minValidYear should be <= maxValidYear"),params.minValidDate?this.minValidDate=params.minValidDate instanceof Date?params.minValidDate:_parseDateTimeFromString(params.minValidDate):this.minValidDate=null,params.maxValidDate?this.maxValidDate=params.maxValidDate instanceof Date?params.maxValidDate:_parseDateTimeFromString(params.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&_warnOnce("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new DateFilterModelFormatter(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(element){const dateCompWrapper=new DateCompWrapper(this.context,this.userComponentFactory,{onDateChanged:__name(()=>this.onUiChanged(),"onDateChanged"),filterParams:this.dateFilterParams},element);return this.addDestroyFunc(()=>dateCompWrapper.destroy()),dateCompWrapper}setElementValue(element,value){element.setDate(value)}setElementDisplayed(element,displayed){element.setDisplayed(displayed)}setElementDisabled(element,disabled){element.setDisabled(disabled)}getDefaultFilterOptions(){return DEFAULT_DATE_FILTER_OPTIONS}createValueElement(){const eCondition=_getDocument(this.gos).createElement("div");return eCondition.classList.add("ag-filter-body"),this.createFromToElement(eCondition,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(eCondition,this.eConditionPanelsTo,this.dateConditionToComps,"to"),eCondition}createFromToElement(eCondition,eConditionPanels,dateConditionComps,fromTo){const eConditionPanel=_getDocument(this.gos).createElement("div");eConditionPanel.classList.add(`ag-filter-${fromTo}`),eConditionPanel.classList.add(`ag-filter-date-${fromTo}`),eConditionPanels.push(eConditionPanel),eCondition.appendChild(eConditionPanel),dateConditionComps.push(this.createDateCompWrapper(eConditionPanel))}removeValueElements(startPosition,deleteCount){this.removeDateComps(this.dateConditionFromComps,startPosition,deleteCount),this.removeDateComps(this.dateConditionToComps,startPosition,deleteCount),this.removeItems(this.eConditionPanelsFrom,startPosition,deleteCount),this.removeItems(this.eConditionPanelsTo,startPosition,deleteCount)}removeDateComps(components,startPosition,deleteCount){this.removeItems(components,startPosition,deleteCount).forEach(comp=>comp.destroy())}isValidDateValue(value){if(value===null)return!1;if(this.minValidDate){if(value<this.minValidDate)return!1}else if(value.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(value>this.maxValidDate)return!1}else if(value.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(position){if(!super.isConditionUiComplete(position))return!1;let valid=!0;return this.forEachInput((element,index,elPosition,numberOfInputs)=>{elPosition!==position||!valid||index>=numberOfInputs||(valid=valid&&this.isValidDateValue(element.getDate()))}),valid}areSimpleModelsEqual(aSimple,bSimple){return aSimple.dateFrom===bSimple.dateFrom&&aSimple.dateTo===bSimple.dateTo&&aSimple.type===bSimple.type}getFilterType(){return"date"}createCondition(position){const type=this.getConditionType(position),model={},values=this.getValues(position);return values.length>0&&(model.dateFrom=_serialiseDate(values[0])),values.length>1&&(model.dateTo=_serialiseDate(values[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type,...model}}resetPlaceholder(){const globalTranslate=this.localeService.getLocaleTextFunc(),placeholder=this.translate("dateFormatOoo"),ariaLabel=globalTranslate("ariaFilterValue","Filter Value");this.forEachInput(element=>{element.setInputPlaceholder(placeholder),element.setInputAriaLabel(ariaLabel)})}getInputs(position){return position>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[position],this.dateConditionToComps[position]]}getValues(position){const result=[];return this.forEachPositionInput(position,(element,index,_elPosition,numberOfInputs)=>{index<numberOfInputs&&result.push(element.getDate())}),result}translate(key){return key==="lessThan"?super.translate("before"):key==="greaterThan"?super.translate("after"):super.translate(key)}getModelAsString(model){return this.filterModelFormatter.getModelAsString(model)??""}},__name(_a84,"DateFilter"),_a84),_a85,SetLeftFeature=(_a85=class extends BeanStub{constructor(columnOrGroup,eCell,beans,colsSpanning){super(),this.columnOrGroup=columnOrGroup,this.columnOrGroup=columnOrGroup,this.eCell=eCell,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=colsSpanning,this.beans=beans}setColsSpanning(colsSpanning){this.colsSpanning=colsSpanning,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?_last(this.colsSpanning):this.columnOrGroup}postConstruct(){const onLeftChanged=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:onLeftChanged}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:onLeftChanged}),this.addManagedPropertyListener("domLayout",onLeftChanged)}setLeftFirstTime(){const suppressMoveAnimation=this.beans.gos.get("suppressColumnMoveAnimation"),oldLeftExists=_exists(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&oldLeftExists&&!suppressMoveAnimation?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft(),oldLeft=colOrGroup.getOldLeft(),oldActualLeft=this.modifyLeftForPrintLayout(colOrGroup,oldLeft),actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left);this.setLeft(oldActualLeft),this.actualLeft=actualLeft,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===actualLeft&&this.setLeft(actualLeft)})}onLeftChanged(){const colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(colOrGroup,leftPosition){if(!_isDomLayout(this.beans.gos,"print")||colOrGroup.getPinned()==="left")return leftPosition;const leftWidth=this.beans.visibleColsService.getColsLeftWidth();if(colOrGroup.getPinned()==="right"){const bodyWidth=this.beans.visibleColsService.getBodyContainerWidth();return leftWidth+bodyWidth+leftPosition}return leftWidth+leftPosition}setLeft(value){if(_exists(value)&&(this.eCell.style.left=`${value}px`),isColumnGroup(this.columnOrGroup)){const children=this.columnOrGroup.getLeafColumns();if(!children.length)return;children.length>1&&_setAriaColSpan(this.ariaEl,children.length)}}},__name(_a85,"SetLeftFeature"),_a85),CSS_FIRST_COLUMN="ag-column-first",CSS_LAST_COLUMN="ag-column-last";function _getHeaderClassesFromColDef(abstractColDef,gos,column,columnGroup){return _missing(abstractColDef)?[]:getColumnClassesFromCollDef(abstractColDef.headerClass,abstractColDef,gos,column,columnGroup)}__name(_getHeaderClassesFromColDef,"_getHeaderClassesFromColDef");function refreshFirstAndLastStyles(comp,column,presentedColsService){comp.addOrRemoveCssClass(CSS_FIRST_COLUMN,presentedColsService.isColAtEdge(column,"first")),comp.addOrRemoveCssClass(CSS_LAST_COLUMN,presentedColsService.isColAtEdge(column,"last"))}__name(refreshFirstAndLastStyles,"refreshFirstAndLastStyles");function getClassParams(abstractColDef,gos,column,columnGroup){return gos.addGridCommonParams({colDef:abstractColDef,column,columnGroup})}__name(getClassParams,"getClassParams");function getColumnClassesFromCollDef(classesOrFunc,abstractColDef,gos,column,columnGroup){if(_missing(classesOrFunc))return[];let classToUse;if(typeof classesOrFunc=="function"){const params=getClassParams(abstractColDef,gos,column,columnGroup);classToUse=classesOrFunc(params)}else classToUse=classesOrFunc;return typeof classToUse=="string"?[classToUse]:Array.isArray(classToUse)?[...classToUse]:[]}__name(getColumnClassesFromCollDef,"getColumnClassesFromCollDef");var instanceIdSequence2=0,_a86,_AbstractHeaderCellCtrl=(_a86=class extends BeanStub{constructor(columnGroupChild,beans,parentRowCtrl){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=columnGroupChild,this.parentRowCtrl=parentRowCtrl,this.beans=beans,this.instanceId=columnGroupChild.getUniqueId()+"-"+instanceIdSequence2++}wireBeans(beans){this.pinnedWidthService=beans.pinnedWidthService,this.focusService=beans.focusService,this.userComponentFactory=beans.userComponentFactory,this.ctrlsService=beans.ctrlsService,this.dragAndDropService=beans.dragAndDropService,this.menuService=beans.menuService}postConstruct(){const refreshTabIndex=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],refreshTabIndex),this.addManagedEventListeners({overlayExclusiveChanged:refreshTabIndex})}shouldStopEventPropagation(e){const{headerRowIndex,column}=this.focusService.getFocusedHeader();return _isUserSuppressingHeaderKeyboardEvent(this.gos,e,headerRowIndex,column)}getWrapperHasFocus(){return _getActiveDomElement(this.gos)===this.eGui}setGui(eGui,compBean){this.eGui=eGui,this.addDomData(compBean),compBean.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),compBean.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(params){const{wrapperElement,checkMeasuringCallback,compBean}=params,{animationFrameService,resizeObserverService,columnModel,gos}=this.beans,measureHeight=__name(timesCalled=>{if(!this.isAlive()||!compBean.isAlive())return;const{paddingTop,paddingBottom,borderBottomWidth,borderTopWidth}=_getElementSize(this.getGui()),extraHeight=paddingTop+paddingBottom+borderBottomWidth+borderTopWidth,autoHeight=wrapperElement.offsetHeight+extraHeight;if(timesCalled<5){const doc=_getDocument(gos),notYetInDom=!doc||!doc.contains(wrapperElement),possiblyNoContentYet=autoHeight==0;if(notYetInDom||possiblyNoContentYet){animationFrameService.requestAnimationFrame(()=>measureHeight(timesCalled+1));return}}columnModel.setColHeaderHeight(this.column,autoHeight)},"measureHeight");let isMeasuring=!1,stopResizeObserver;const checkMeasuring=__name(()=>{const newValue=this.column.isAutoHeaderHeight();newValue&&!isMeasuring&&startMeasuring(),!newValue&&isMeasuring&&stopMeasuring()},"checkMeasuring"),startMeasuring=__name(()=>{isMeasuring=!0,measureHeight(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),stopResizeObserver=resizeObserverService.observeResize(wrapperElement,()=>measureHeight(0))},"startMeasuring"),stopMeasuring=__name(()=>{isMeasuring=!1,stopResizeObserver&&stopResizeObserver(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),stopResizeObserver=void 0},"stopMeasuring");checkMeasuring(),compBean.addDestroyFunc(()=>stopMeasuring()),compBean.addManagedListeners(this.column,{widthChanged:__name(()=>isMeasuring&&measureHeight(0),"widthChanged")}),compBean.addManagedEventListeners({sortChanged:__name(()=>{isMeasuring&&window.setTimeout(()=>measureHeight(0))},"sortChanged")}),checkMeasuringCallback&&checkMeasuringCallback(checkMeasuring)}onDisplayedColumnsChanged(){const{comp,column,beans,eGui}=this;!comp||!column||!eGui||(refreshFirstAndLastStyles(comp,column,beans.visibleColsService),_setAriaColIndex(eGui,beans.visibleColsService.getAriaColIndex(column)))}addResizeAndMoveKeyboardListeners(compBean){this.resizeFeature&&compBean.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const suppressHeaderFocus=this.focusService.isHeaderFocusSuppressed();this.eGui&&_addOrRemoveAttribute(this.eGui,"tabindex",suppressHeaderFocus?null:"-1")}onGuiKeyDown(e){var _a253;const activeEl=_getActiveDomElement(this.gos),isLeftOrRight=e.key===KeyCode.LEFT||e.key===KeyCode.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),activeEl!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||isLeftOrRight)&&(e.preventDefault(),e.stopImmediatePropagation()),!isLeftOrRight))return;const isLeft=e.key===KeyCode.LEFT!==this.gos.get("enableRtl"),direction=HorizontalDirection[isLeft?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const diff=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(diff,e.shiftKey),(_a253=this.resizeFeature)==null||_a253.toggleColumnResizing(!0)}else this.moveHeader(direction)}getViewportAdjustedResizeDiff(e){let diff=this.getResizeDiff(e);if(this.column.getPinned()){const leftWidth=this.pinnedWidthService.getPinnedLeftWidth(),rightWidth=this.pinnedWidthService.getPinnedRightWidth(),bodyWidth=_getInnerWidth(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(leftWidth+rightWidth+diff>bodyWidth)if(bodyWidth>leftWidth+rightWidth)diff=bodyWidth-leftWidth-rightWidth;else return 0}return diff}getResizeDiff(e){let isLeft=e.key===KeyCode.LEFT!==this.gos.get("enableRtl");const pinned=this.column.getPinned(),isRtl=this.gos.get("enableRtl");return pinned&&isRtl!==(pinned==="right")&&(isLeft=!isLeft),(isLeft?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var _a253;(_a253=this.resizeFeature)==null||_a253.toggleColumnResizing(!1)},150))}handleKeyDown(e){const wrapperHasFocus=this.getWrapperHasFocus();switch(e.key){case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:wrapperHasFocus&&e.preventDefault()}}addDomData(compBean){const key=_a86.DOM_DATA_KEY_HEADER_CTRL;_setDomData(this.gos,this.eGui,key,this),compBean.addDestroyFunc(()=>_setDomData(this.gos,this.eGui,key,null))}getGui(){return this.eGui}focus(event){return this.eGui?(this.lastFocusEvent=event||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(mouseEvent,touchEvent,column){const event=mouseEvent??touchEvent;this.gos.get("preventDefaultOnContextMenu")&&event.preventDefault(),this.menuService.isHeaderContextMenuEnabled(column)&&this.menuService.showHeaderContextMenu(column,mouseEvent,touchEvent),this.dispatchColumnMouseEvent("columnHeaderContextMenu",column)}dispatchColumnMouseEvent(eventType,column){this.eventService.dispatchEvent({type:eventType,column})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}},__name(_a86,"_AbstractHeaderCellCtrl"),_a86);_AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var AbstractHeaderCellCtrl=_AbstractHeaderCellCtrl,_a87,HoverFeature=(_a87=class extends BeanStub{wireBeans(beans){this.columnHoverService=beans.columnHoverService}constructor(columns,element){super(),this.columns=columns,this.element=element}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},__name(_a87,"HoverFeature"),_a87),_a88,HeaderFilterCellCtrl=(_a88=class extends AbstractHeaderCellCtrl{constructor(column,beans,parentRowCtrl){super(column,beans,parentRowCtrl),this.iconCreated=!1,this.column=column}setComp(comp,eGui,eButtonShowMainFilter,eFloatingFilterBody,compBean){this.comp=comp,compBean=setupCompBean(this,this.beans.context,compBean),this.eButtonShowMainFilter=eButtonShowMainFilter,this.eFloatingFilterBody=eFloatingFilterBody,this.setGui(eGui,compBean),this.setupActive(),this.setupWidth(compBean),this.setupLeft(compBean),this.setupHover(compBean),this.setupFocus(compBean),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(compBean),this.setupUi(),compBean.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(compBean),compBean.addManagedListeners(this.column,{colDefChanged:__name(()=>this.onColDefChanged(compBean),"colDefChanged")}),compBean.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){const colDef=this.column.getColDef(),filterExists=!!colDef.filter,floatingFilterExists=!!colDef.floatingFilter;this.active=filterExists&&floatingFilterExists}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const eMenuIcon=_createIconNoSpan("filter",this.gos,this.column);eMenuIcon&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(eMenuIcon))}setupFocus(compBean){compBean.createManagedBean(new ManagedFocusFeature(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const localeTextFunc=this.localeService.getLocaleTextFunc();_setAriaLabel(this.eButtonShowMainFilter,localeTextFunc("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(_getActiveDomElement(this.gos)===this.eGui)return;const nextFocusableEl=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(nextFocusableEl){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),nextFocusableEl.focus();return}const nextFocusableColumn=this.findNextColumnWithFloatingFilter(e.shiftKey);nextFocusableColumn&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:nextFocusableColumn},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(backwards){const presentedColsService=this.beans.visibleColsService;let nextCol=this.column;do if(nextCol=backwards?presentedColsService.getColBefore(nextCol):presentedColsService.getColAfter(nextCol),!nextCol)break;while(!nextCol.getColDef().filter||!nextCol.getColDef().floatingFilter);return nextCol}handleKeyDown(e){super.handleKeyDown(e);const wrapperHasFocus=this.getWrapperHasFocus();switch(e.key){case KeyCode.UP:case KeyCode.DOWN:wrapperHasFocus||e.preventDefault();case KeyCode.LEFT:case KeyCode.RIGHT:if(wrapperHasFocus)return;e.stopPropagation();case KeyCode.ENTER:wrapperHasFocus&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case KeyCode.ESCAPE:wrapperHasFocus||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const notFromHeaderWrapper=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),fromWithinHeader=!!e.relatedTarget&&_isElementChildOfClass(e.relatedTarget,"ag-floating-filter");if(notFromHeaderWrapper&&fromWithinHeader&&e.target===this.eGui){const lastFocusEvent=this.lastFocusEvent,fromTab=!!(lastFocusEvent&&lastFocusEvent.key===KeyCode.TAB);if(lastFocusEvent&&fromTab){const shouldFocusLast=lastFocusEvent.shiftKey;this.focusService.focusInto(this.eGui,shouldFocusLast)}}const rowIndex=this.getRowIndex();this.beans.focusService.setFocusedHeader(rowIndex,this.column)}setupHover(compBean){compBean.createManagedBean(new HoverFeature([this.column],this.eGui));const listener=__name(()=>{if(!this.gos.get("columnHoverHighlight"))return;const hovered=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",hovered)},"listener");compBean.addManagedEventListeners({columnHoverChanged:listener}),listener()}setupLeft(compBean){const setLeftFeature=new SetLeftFeature(this.column,this.eGui,this.beans);compBean.createManagedBean(setLeftFeature)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){var _a253;if(!this.active)return;const compDetails=(_a253=this.beans.filterManager)==null?void 0:_a253.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());compDetails&&this.setCompDetails(compDetails)}setCompDetails(compDetails){this.userCompDetails=compDetails,this.comp.setCompDetails(compDetails)}showParentFilter(){const eventSource=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:eventSource,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(compBean){if(!this.active)return;const{filterManager}=this.beans,syncWithFilter=__name(event=>{if((event==null?void 0:event.source)==="filterDestroyed"&&!this.isAlive())return;const compPromise=this.comp.getFloatingFilterComp();compPromise&&compPromise.then(comp=>{if(comp){const parentModel=filterManager==null?void 0:filterManager.getCurrentFloatingFilterParentModel(this.column),filterChangedEvent=event?{...event,columns:event.columns??[],source:event.source==="api"?"api":"columnFilter"}:null;comp.onParentModelChanged(parentModel,filterChangedEvent)}})},"syncWithFilter");[this.destroySyncListener]=compBean.addManagedListeners(this.column,{filterChanged:syncWithFilter}),filterManager!=null&&filterManager.isFilterActive(this.column)&&syncWithFilter(null)}setupWidth(compBean){const listener=__name(()=>{const width=`${this.column.getActualWidth()}px`;this.comp.setWidth(width)},"listener");compBean.addManagedListeners(this.column,{widthChanged:listener}),listener()}setupFilterChangedListener(compBean){this.active&&([this.destroyFilterChangedListener]=compBean.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var _a253;if(!this.suppressFilterButton&&this.comp){const isFilterAllowed=!!((_a253=this.beans.filterManager)!=null&&_a253.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(isFilterAllowed),this.highlightFilterButtonWhenActive&&isFilterAllowed&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(compBean){var _a253;const wasActive=this.active;this.setupActive();const becomeActive=!wasActive&&this.active;wasActive&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const newCompDetails=this.active?(_a253=this.beans.filterManager)==null?void 0:_a253.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,compPromise=this.comp.getFloatingFilterComp();!compPromise||!newCompDetails?this.updateCompDetails(compBean,newCompDetails,becomeActive):compPromise.then(compInstance=>{var _a254;!compInstance||(_a254=this.beans.filterManager)!=null&&_a254.areFilterCompsDifferent(this.userCompDetails??null,newCompDetails)?this.updateCompDetails(compBean,newCompDetails,becomeActive):this.updateFloatingFilterParams(newCompDetails)})}updateCompDetails(compBean,compDetails,becomeActive){this.isAlive()&&(this.setCompDetails(compDetails),this.setupFilterButton(),this.setupUi(),becomeActive&&(this.setupSyncWithFilter(compBean),this.setupFilterChangedListener(compBean)))}updateFloatingFilterParams(userCompDetails){var _a253;if(!userCompDetails)return;const params=userCompDetails.params;(_a253=this.comp.getFloatingFilterComp())==null||_a253.then(floatingFilter=>{let hasRefreshed=!1;floatingFilter!=null&&floatingFilter.refresh&&typeof floatingFilter.refresh=="function"&&floatingFilter.refresh(params)!==null&&(hasRefreshed=!0),!hasRefreshed&&(floatingFilter!=null&&floatingFilter.onParamsUpdated)&&typeof floatingFilter.onParamsUpdated=="function"&&floatingFilter.onParamsUpdated(params)!==null&&_warnOnce("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}},__name(_a88,"HeaderFilterCellCtrl"),_a88);var VERSION="32.2.1";function isColumnFilterPresent(beans){var _a253,_b;return!!((_a253=beans.filterManager)!=null&&_a253.isColumnFilterPresent())||!!((_b=beans.filterManager)!=null&&_b.isAggregateFilterPresent())}__name(isColumnFilterPresent,"isColumnFilterPresent");function getFilterInstance(beans,key,callback){var _a253;return(_a253=beans.filterManager)==null?void 0:_a253.getFilterInstance(key,callback)}__name(getFilterInstance,"getFilterInstance");function getColumnFilterInstance(beans,key){var _a253;return((_a253=beans.filterManager)==null?void 0:_a253.getColumnFilterInstance(key))??Promise.resolve(void 0)}__name(getColumnFilterInstance,"getColumnFilterInstance");function destroyFilter(beans,key){var _a253;const column=beans.columnModel.getColDefCol(key);if(column)return(_a253=beans.filterManager)==null?void 0:_a253.destroyFilter(column,"api")}__name(destroyFilter,"destroyFilter");function setFilterModel(beans,model){beans.frameworkOverrides.wrapIncoming(()=>{var _a253;return(_a253=beans.filterManager)==null?void 0:_a253.setFilterModel(model)})}__name(setFilterModel,"setFilterModel");function getFilterModel(beans){var _a253;return((_a253=beans.filterManager)==null?void 0:_a253.getFilterModel())??{}}__name(getFilterModel,"getFilterModel");function getColumnFilterModel(beans,column){var _a253;return((_a253=beans.filterManager)==null?void 0:_a253.getColumnFilterModel(column))??null}__name(getColumnFilterModel,"getColumnFilterModel");function setColumnFilterModel(beans,column,model){var _a253;return((_a253=beans.filterManager)==null?void 0:_a253.setColumnFilterModel(column,model))??Promise.resolve()}__name(setColumnFilterModel,"setColumnFilterModel");function showColumnFilter(beans,colKey){const column=beans.columnModel.getCol(colKey);if(!column){_errorOnce(`column '${colKey}' not found`);return}beans.menuService.showFilterMenu({column,containerType:"columnFilter",positionBy:"auto"})}__name(showColumnFilter,"showColumnFilter");function getDefaultFloatingFilterType(frameworkOverrides,def,getFromDefault){if(def==null)return null;let defaultFloatingFilterType=null;const{compName,jsComp,fwComp}=UserComponentFactory.getCompKeys(frameworkOverrides,def,FilterComponent);return compName?defaultFloatingFilterType={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[compName]:jsComp==null&&fwComp==null&&def.filter===!0&&(defaultFloatingFilterType=getFromDefault()),defaultFloatingFilterType}__name(getDefaultFloatingFilterType,"getDefaultFloatingFilterType");var MONTH_LOCALE_TEXT={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},MONTH_KEYS=["january","february","march","april","may","june","july","august","september","october","november","december"],_a89,ColumnFilterService=(_a89=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(beans){this.valueService=beans.valueService,this.columnModel=beans.columnModel,this.rowModel=beans.rowModel,this.userComponentFactory=beans.userComponentFactory,this.rowRenderer=beans.rowRenderer,this.dataTypeService=beans.dataTypeService,this.filterManager=beans.filterManager}postConstruct(){var _a253,_b;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:__name(()=>this.onNewRowsLoaded("rowDataUpdated"),"rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...((_b=(_a253=this.gos.get("initialState"))==null?void 0:_a253.filter)==null?void 0:_b.filterModel)??{}}}setFilterModel(model,source="api"){var _a253;if((_a253=this.dataTypeService)!=null&&_a253.isPendingInference()){this.filterModelUpdateQueue.push({model,source});return}const allPromises=[],previousModel=this.getFilterModel(!0);if(model){const modelKeys=new Set(Object.keys(model));this.allColumnFilters.forEach((filterWrapper,colId)=>{const newModel=model[colId];allPromises.push(this.setModelOnFilterWrapper(filterWrapper.filterPromise,newModel)),modelKeys.delete(colId)}),modelKeys.forEach(colId=>{const column=this.columnModel.getColDefCol(colId)||this.columnModel.getCol(colId);if(!column){_warnOnce("setFilterModel() - no column found for colId: "+colId);return}if(!column.isFilterAllowed()){_warnOnce("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+colId);return}const filterWrapper=this.getOrCreateFilterWrapper(column);if(!filterWrapper){_warnOnce("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+colId);return}allPromises.push(this.setModelOnFilterWrapper(filterWrapper.filterPromise,model[colId]))})}else this.allColumnFilters.forEach(filterWrapper=>{allPromises.push(this.setModelOnFilterWrapper(filterWrapper.filterPromise,null))});AgPromise.all(allPromises).then(()=>{var _a254;const currentModel=this.getFilterModel(!0),columns=[];this.allColumnFilters.forEach((filterWrapper,colId)=>{const before=previousModel?previousModel[colId]:null,after=currentModel?currentModel[colId]:null;_jsonEquals(before,after)||columns.push(filterWrapper.column)}),columns.length>0&&((_a254=this.filterManager)==null||_a254.onFilterChanged({columns,source}))})}setModelOnFilterWrapper(filterPromise,newModel){return new AgPromise(resolve=>{filterPromise.then(filter=>{typeof filter.setModel!="function"&&(_warnOnce("filter missing setModel method, which is needed for setFilterModel"),resolve()),(filter.setModel(newModel)||AgPromise.resolve()).then(()=>resolve())})})}getFilterModel(excludeInitialState){const result={},{allColumnFilters,initialFilterModel}=this;return allColumnFilters.forEach((filterWrapper,key)=>{const model=this.getModelFromFilterWrapper(filterWrapper);_exists(model)&&(result[key]=model)}),excludeInitialState||Object.entries(initialFilterModel).forEach(([colId,model])=>{var _a253;_exists(model)&&!allColumnFilters.has(colId)&&((_a253=this.columnModel.getCol(colId))!=null&&_a253.isFilterAllowed())&&(result[colId]=model)}),result}getModelFromFilterWrapper(filterWrapper){const{filter}=filterWrapper;return filter?typeof filter.getModel!="function"?(_warnOnce("filter API missing getModel method, which is needed for getFilterModel"),null):filter.getModel():this.getModelFromInitialState(filterWrapper.column)}getModelFromInitialState(column){return this.initialFilterModel[column.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(filterWrapper=>this.disposeFilterWrapper(filterWrapper,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(node,filterToSkip){return this.doColumnFiltersPass(node,filterToSkip,!0)}updateActiveFilters(){const isFilterActive=__name(filter=>filter?filter.isFilterActive?filter.isFilterActive():(_warnOnce("Filter is missing isFilterActive() method"),!1):!1,"isFilterActive"),groupFilterEnabled=!!_getGroupAggFiltering(this.gos),isAggFilter=__name(column=>{if(!column.isPrimary())return!0;const isShowingPrimaryColumns=!this.columnModel.isPivotActive();return!column.isValueActive()||!isShowingPrimaryColumns?!1:this.columnModel.isPivotMode()?!0:groupFilterEnabled},"isAggFilter"),activeAggregateFilters=[],activeColumnFilters=[];return this.forEachColumnFilter((filter,filterWrapper)=>{isFilterActive(filter)&&(isAggFilter(filterWrapper.column)?activeAggregateFilters.push(filter):activeColumnFilters.push(filter))}).then(()=>{this.activeAggregateFilters=activeAggregateFilters,this.activeColumnFilters=activeColumnFilters})}updateFilterFlagInColumns(source,additionalEventAttributes){return this.forEachColumnFilter((filter,filterWrapper)=>filterWrapper.column.setFilterActive(filter.isFilterActive(),source,additionalEventAttributes))}forEachColumnFilter(callback){return AgPromise.all(Array.from(this.allColumnFilters.values()).map(filterWrapper=>filterWrapper.filterPromise.then(filter=>callback(filter,filterWrapper))))}doColumnFiltersPass(node,filterToSkip,targetAggregates){const{data,aggData}=node,targetedFilters=targetAggregates?this.activeAggregateFilters:this.activeColumnFilters,targetedData=targetAggregates?aggData:data;for(let i=0;i<targetedFilters.length;i++){const filter=targetedFilters[i];if(!(filter==null||filter===filterToSkip)){if(typeof filter.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!filter.doesFilterPass({node,data:targetedData}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(params){const action=__name(()=>{var _a253;return(_a253=this.filterManager)==null?void 0:_a253.onFilterChanged(params)},"action");this.rowRenderer.isRefreshInProgress()?setTimeout(action,0):action()}updateBeforeFilterChanged(params={}){const{filterInstance,additionalEventAttributes}=params;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",additionalEventAttributes).then(()=>{this.allColumnFilters.forEach(filterWrapper=>{filterWrapper.filterPromise&&filterWrapper.filterPromise.then(filter=>{filter&&filter!==filterInstance&&filter.onAnyFilterChanged&&filter.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(source){this.forEachColumnFilter(filter=>{filter.onNewRowsLoaded&&filter.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(source,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(column){return({node})=>this.valueService.getValue(column,node,!0)}createGetValue(filterColumn){return(rowNode,column)=>{const columnToUse=column?this.columnModel.getCol(column):filterColumn;return columnToUse?this.valueService.getValue(columnToUse,rowNode,!0):void 0}}isFilterActive(column){const{filter}=this.cachedFilter(column)??{};return filter?filter.isFilterActive():this.getModelFromInitialState(column)!=null}getOrCreateFilterWrapper(column){if(!column.isFilterAllowed())return null;let filterWrapper=this.cachedFilter(column);return filterWrapper||(filterWrapper=this.createFilterWrapper(column),this.setColumnFilterWrapper(column,filterWrapper)),filterWrapper}cachedFilter(column){return this.allColumnFilters.get(column.getColId())}getDefaultFilter(column){var _a253;let defaultFilter;if(_isSetFilterByDefault(this.gos))defaultFilter="agSetColumnFilter";else{const cellDataType=(_a253=this.dataTypeService)==null?void 0:_a253.getBaseDataType(column);cellDataType==="number"?defaultFilter="agNumberColumnFilter":cellDataType==="date"||cellDataType==="dateString"?defaultFilter="agDateColumnFilter":defaultFilter="agTextColumnFilter"}return defaultFilter}getDefaultFloatingFilter(column){var _a253;let defaultFloatingFilterType;if(_isSetFilterByDefault(this.gos))defaultFloatingFilterType="agSetColumnFloatingFilter";else{const cellDataType=(_a253=this.dataTypeService)==null?void 0:_a253.getBaseDataType(column);cellDataType==="number"?defaultFloatingFilterType="agNumberColumnFloatingFilter":cellDataType==="date"||cellDataType==="dateString"?defaultFloatingFilterType="agDateColumnFloatingFilter":defaultFloatingFilterType="agTextColumnFloatingFilter"}return defaultFloatingFilterType}createFilterInstance(column,filterWrapper){const defaultFilter=this.getDefaultFilter(column),colDef=column.getColDef();let filterInstance;const params={...this.createFilterParams(column,colDef),filterModifiedCallback:__name(()=>this.filterModifiedCallbackFactory(filterInstance,column)(),"filterModifiedCallback"),filterChangedCallback:__name(additionalEventAttributes=>this.filterChangedCallbackFactory(filterInstance,column)(additionalEventAttributes),"filterChangedCallback"),doesRowPassOtherFilter:__name(node=>this.filterManager?this.filterManager.doesRowPassOtherFilters(filterInstance,node):!0,"doesRowPassOtherFilter")},compDetails=this.userComponentFactory.getFilterDetails(colDef,params,defaultFilter);return compDetails?{filterPromise:__name(()=>{const filterPromise=compDetails.newAgStackInstance();return filterPromise!=null&&filterPromise.then(r=>{filterInstance=r,filterWrapper&&(filterWrapper.filter=r)}),filterPromise},"filterPromise"),compDetails}:{filterPromise:null,compDetails:null}}createFilterParams(column,colDef){return this.gos.addGridCommonParams({column,colDef:_cloneObject(colDef),rowModel:this.rowModel,filterChangedCallback:__name(()=>{},"filterChangedCallback"),filterModifiedCallback:__name(()=>{},"filterModifiedCallback"),valueGetter:this.createValueGetter(column),getValue:this.createGetValue(column),doesRowPassOtherFilter:__name(()=>!0,"doesRowPassOtherFilter")})}createFilterWrapper(column){const filterWrapper={column,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise,compDetails}=this.createFilterInstance(column,filterWrapper);return filterWrapper.filterPromise=(filterPromise==null?void 0:filterPromise())??null,filterWrapper.compDetails=compDetails,filterWrapper}onColumnsChanged(){var _a253;const columns=[];this.allColumnFilters.forEach((wrapper,colId)=>{let currentColumn;wrapper.column.isPrimary()?currentColumn=this.columnModel.getColDefCol(colId):currentColumn=this.columnModel.getCol(colId),!(currentColumn&&currentColumn===wrapper.column)&&(columns.push(wrapper.column),this.disposeFilterWrapper(wrapper,"columnChanged"),this.disposeColumnListener(colId))});const allFiltersAreGroupFilters=columns.every(column=>column.getColDef().filter==="agGroupColumnFilter");columns.length>0&&!allFiltersAreGroupFilters?(_a253=this.filterManager)==null||_a253.onFilterChanged({columns,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const groupColumns=this.columnModel.getAutoCols();groupColumns==null||groupColumns.forEach(groupColumn=>{groupColumn.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(groupColumn)})}isFilterAllowed(column){if(!column.isFilterAllowed())return!1;const{filter}=this.allColumnFilters.get(column.getColId())??{};return filter&&typeof(filter==null?void 0:filter.isFilterAllowed)=="function"?filter.isFilterAllowed():!0}getFloatingFilterCompDetails(column,showParentFilter){const parentFilterInstance=__name(callback=>{var _a253;const filterComponent=(_a253=this.getOrCreateFilterWrapper(column))==null?void 0:_a253.filterPromise;filterComponent!=null&&filterComponent.then(instance=>{callback(_unwrapUserComp(instance))})},"parentFilterInstance"),colDef=column.getColDef(),filterParams={...this.createFilterParams(column,colDef),filterChangedCallback:__name(()=>parentFilterInstance(filterInstance=>this.filterChangedCallbackFactory(filterInstance,column)()),"filterChangedCallback")},finalFilterParams=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(colDef,FilterComponent,filterParams);let defaultFloatingFilterType=getDefaultFloatingFilterType(this.frameworkOverrides,colDef,()=>this.getDefaultFloatingFilter(column));defaultFloatingFilterType==null&&(defaultFloatingFilterType="agReadOnlyFloatingFilter");const params={column,filterParams:finalFilterParams,currentParentModel:__name(()=>this.getCurrentFloatingFilterParentModel(column),"currentParentModel"),parentFilterInstance,showParentFilter,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(colDef,params,defaultFloatingFilterType)}getCurrentFloatingFilterParentModel(column){return this.getModelFromFilterWrapper(this.cachedFilter(column)??{column})}destroyFilter(column,source="api"){var _a253;const colId=column.getColId(),filterWrapper=this.allColumnFilters.get(colId);this.disposeColumnListener(colId),delete this.initialFilterModel[colId],filterWrapper&&(this.disposeFilterWrapper(filterWrapper,source),(_a253=this.filterManager)==null||_a253.onFilterChanged({columns:[column],source:"api"}))}disposeColumnListener(colId){const columnListener=this.allColumnListeners.get(colId);columnListener&&(this.allColumnListeners.delete(colId),columnListener())}disposeFilterWrapper(filterWrapper,source){filterWrapper.filterPromise.then(filter=>{this.destroyBean(filter),filterWrapper.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(filterWrapper.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source,column:filterWrapper.column})})}filterModifiedCallbackFactory(filter,column){return()=>{this.eventService.dispatchEvent({type:"filterModified",column,filterInstance:filter})}}filterChangedCallbackFactory(filter,column){return additionalEventAttributes=>{const source=(additionalEventAttributes==null?void 0:additionalEventAttributes.source)??"columnFilter",params={filter,additionalEventAttributes,columns:[column],source};this.callOnFilterChangedOutsideRenderCycle(params)}}checkDestroyFilter(colId){const filterWrapper=this.allColumnFilters.get(colId);if(!filterWrapper)return;const column=filterWrapper.column,{compDetails}=column.isFilterAllowed()?this.createFilterInstance(column):{compDetails:null};if(this.areFilterCompsDifferent(filterWrapper.compDetails,compDetails)){this.destroyFilter(column,"paramsUpdated");return}const newFilterParams=column.getColDef().filterParams;if(!filterWrapper.filterPromise){this.destroyFilter(column,"paramsUpdated");return}filterWrapper.filterPromise.then(filter=>{(filter!=null&&filter.refresh?filter.refresh({...this.createFilterParams(column,column.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(filter,column),filterChangedCallback:this.filterChangedCallbackFactory(filter,column),doesRowPassOtherFilter:__name(node=>this.filterManager?this.filterManager.doesRowPassOtherFilters(filter,node):!0,"doesRowPassOtherFilter"),...newFilterParams}):!0)===!1&&this.destroyFilter(column,"paramsUpdated")})}setColumnFilterWrapper(column,filterWrapper){const colId=column.getColId();this.allColumnFilters.set(colId,filterWrapper),this.allColumnListeners.set(colId,this.addManagedListeners(column,{colDefChanged:__name(()=>this.checkDestroyFilter(colId),"colDefChanged")})[0])}areFilterCompsDifferent(oldCompDetails,newCompDetails){if(!newCompDetails||!oldCompDetails)return!0;const{componentClass:oldComponentClass}=oldCompDetails,{componentClass:newComponentClass}=newCompDetails;return!(oldComponentClass===newComponentClass||(oldComponentClass==null?void 0:oldComponentClass.render)&&(newComponentClass==null?void 0:newComponentClass.render)&&oldComponentClass.render===newComponentClass.render)}hasFloatingFilters(){return this.columnModel.getCols().some(col=>col.getColDef().floatingFilter)}getFilterInstance(key,callback){callback&&this.getFilterInstanceImpl(key).then(filter=>{const unwrapped=_unwrapUserComp(filter);callback(unwrapped)})}getColumnFilterInstance(key){return new Promise(resolve=>{this.getFilterInstanceImpl(key).then(filter=>{resolve(_unwrapUserComp(filter))})})}getFilterInstanceImpl(key){var _a253;const column=this.columnModel.getColDefCol(key);return column?((_a253=this.getOrCreateFilterWrapper(column))==null?void 0:_a253.filterPromise)??AgPromise.resolve(null):AgPromise.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model,source})=>this.setFilterModel(model,source)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key,model,resolve})=>{this.setColumnFilterModel(key,model).then(()=>resolve())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(key){const filterWrapper=this.getFilterWrapper(key);return filterWrapper?this.getModelFromFilterWrapper(filterWrapper):null}setColumnFilterModel(key,model){var _a253;if((_a253=this.dataTypeService)!=null&&_a253.isPendingInference()){let resolve=__name(()=>{},"resolve");const promise=new Promise(res=>{resolve=res});return this.columnFilterModelUpdateQueue.push({key,model,resolve}),promise}const column=this.columnModel.getColDefCol(key),filterWrapper=column?this.getOrCreateFilterWrapper(column):null;return filterWrapper?__name(promise=>new Promise(resolve=>{promise.then(result=>resolve(result))}),"convertPromise")(this.setModelOnFilterWrapper(filterWrapper.filterPromise,model)):Promise.resolve()}getFilterWrapper(key){const column=this.columnModel.getColDefCol(key);return column?this.cachedFilter(column)??null:null}setColDefPropertiesForDataType(colDef,dataTypeDefinition,formatValue){const usingSetFilter=_isSetFilterByDefault(this.gos),translate=this.localeService.getLocaleTextFunc(),mergeFilterParams=__name(params=>{const{filterParams}=colDef;colDef.filterParams=typeof filterParams=="object"?{...filterParams,...params}:params},"mergeFilterParams");switch(dataTypeDefinition.baseDataType){case"number":{usingSetFilter&&mergeFilterParams({comparator:__name((a,b)=>{const valA=a==null?0:parseInt(a),valB=b==null?0:parseInt(b);return valA===valB?0:valA>valB?1:-1},"comparator")});break}case"boolean":{mergeFilterParams(usingSetFilter?{valueFormatter:__name(params=>_exists(params.value)?translate(String(params.value),params.value?"True":"False"):translate("blanks","(Blanks)"),"valueFormatter")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:__name((_filterValues,cellValue)=>cellValue,"predicate"),numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:__name((_filterValues,cellValue)=>cellValue===!1,"predicate"),numberOfInputs:0}]});break}case"date":{usingSetFilter&&mergeFilterParams({valueFormatter:__name(params=>{const valueFormatted=formatValue(params);return _exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")},"valueFormatter"),treeList:!0,treeListFormatter:__name((pathKey,level)=>{if(level===1&&pathKey!=null){const monthKey=MONTH_KEYS[Number(pathKey)-1];return translate(monthKey,MONTH_LOCALE_TEXT[monthKey])}return pathKey??translate("blanks","(Blanks)")},"treeListFormatter")});break}case"dateString":{const convertToDate=dataTypeDefinition.dateParser;mergeFilterParams(usingSetFilter?{valueFormatter:__name(params=>{const valueFormatted=formatValue(params);return _exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")},"valueFormatter"),treeList:!0,treeListPathGetter:__name(value=>{const date=convertToDate(value??void 0);return date?[String(date.getFullYear()),String(date.getMonth()+1),String(date.getDate())]:null},"treeListPathGetter"),treeListFormatter:__name((pathKey,level)=>{if(level===1&&pathKey!=null){const monthKey=MONTH_KEYS[Number(pathKey)-1];return translate(monthKey,MONTH_LOCALE_TEXT[monthKey])}return pathKey??translate("blanks","(Blanks)")},"treeListFormatter")}:{comparator:__name((filterDate,cellValue)=>{const cellAsDate=convertToDate(cellValue);return cellValue==null||cellAsDate<filterDate?-1:cellAsDate>filterDate?1:0},"comparator")});break}case"object":{usingSetFilter?mergeFilterParams({valueFormatter:__name(params=>{const valueFormatted=formatValue(params);return _exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")},"valueFormatter")}):colDef.filterValueGetter=params=>formatValue({column:params.column,node:params.node,value:this.valueService.getValue(params.column,params.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(filterWrapper=>this.disposeFilterWrapper(filterWrapper,"gridDestroyed")),this.allColumnListeners.clear()}},__name(_a89,"ColumnFilterService"),_a89);function isAnyFilterPresent(beans){var _a253;return!!((_a253=beans.filterManager)!=null&&_a253.isAnyFilterPresent())}__name(isAnyFilterPresent,"isAnyFilterPresent");function onFilterChanged(beans,source="api"){var _a253;(_a253=beans.filterManager)==null||_a253.onFilterChanged({source})}__name(onFilterChanged,"onFilterChanged");var _a90,ReadOnlyFloatingFilter=(_a90=class extends Component{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[AgInputTextFieldSelector]),this.eFloatingFilterText=RefPlaceholder}wireBeans(beans){this.columnNameService=beans.columnNameService}destroy(){super.destroy()}init(params){this.params=params;const displayName=this.columnNameService.getDisplayNameForColumn(params.column,"header",!0),translate=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${displayName} ${translate("ariaFilterInput","Filter Input")}`)}onParentModelChanged(parentModel){if(parentModel==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(filterInstance=>{if(filterInstance.getModelAsString){const modelAsString=filterInstance.getModelAsString(parentModel);this.eFloatingFilterText.setValue(modelAsString)}})}onParamsUpdated(params){this.refresh(params)}refresh(params){this.init(params)}},__name(_a90,"ReadOnlyFloatingFilter"),_a90),_a91,SimpleFloatingFilter=(_a91=class extends Component{wireBeans(beans){this.columnNameService=beans.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(event){return event&&event.afterFloatingFilter}isEventFromDataChange(event){return event==null?void 0:event.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(model){if(!model){this.lastType=this.optionsFactory.getDefaultOption();return}const isCombined=model.operator;let condition;isCombined?condition=model.conditions[0]:condition=model,this.lastType=condition.type}canWeEditAfterModelFromParentFilter(model){if(!model)return this.isTypeEditable(this.lastType);if(model.operator)return!1;const simpleModel=model;return this.isTypeEditable(simpleModel.type)}init(params){this.setSimpleParams(params,!1)}setSimpleParams(params,update=!0){this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params.filterParams,this.getDefaultFilterOptions()),update||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!params.filterParams.readOnly;const editable=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(editable)}onParamsUpdated(params){this.refresh(params)}refresh(params){this.setSimpleParams(params)}doesFilterHaveSingleInput(filterType){const customFilterOption=this.optionsFactory.getCustomOption(filterType),{numberOfInputs}=customFilterOption||{};return numberOfInputs==null||numberOfInputs==1}isTypeEditable(type){const uneditableTypes=["inRange","empty","blank","notBlank"];return!!type&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(type)&&uneditableTypes.indexOf(type)<0}getAriaLabel(params){const displayName=this.columnNameService.getDisplayNameForColumn(params.column,"header",!0),translate=this.localeService.getLocaleTextFunc();return`${displayName} ${translate("ariaFilterInput","Filter Input")}`}},__name(_a91,"SimpleFloatingFilter"),_a91),_a92,DateFloatingFilter=(_a92=class extends SimpleFloatingFilter{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[AgInputTextFieldSelector]),this.eReadOnlyText=RefPlaceholder,this.eDateWrapper=RefPlaceholder}wireBeans(beans){super.wireBeans(beans),this.context=beans.context,this.userComponentFactory=beans.userComponentFactory}getDefaultFilterOptions(){return DEFAULT_DATE_FILTER_OPTIONS}init(params){super.init(params),this.params=params,this.filterParams=params.filterParams,this.createDateComponent(),this.filterModelFormatter=new DateFilterModelFormatter(this.filterParams,this.localeService,this.optionsFactory);const translate=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(translate("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(params){this.refresh(params)}refresh(params){super.refresh(params),this.params=params,this.filterParams=params.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(params.currentParentModel())}updateCompOnModelChange(model){const allowEditing=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(model);if(this.setEditable(allowEditing),allowEditing){if(model){const dateModel=model;this.dateComp.setDate(_parseDateTimeFromString(dateModel.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(model)),this.dateComp.setDate(null)}setEditable(editable){_setDisplayed(this.eDateWrapper,editable),_setDisplayed(this.eReadOnlyText.getGui(),!editable)}onParentModelChanged(model,event){this.isEventFromFloatingFilter(event)||this.isEventFromDataChange(event)||(super.setLastTypeFromModel(model),this.updateCompOnModelChange(model))}onDateChanged(){const filterValueDate=this.dateComp.getDate(),filterValueText=_serialiseDate(filterValueDate);this.params.parentFilterInstance(filterInstance=>{if(filterInstance){const date=_parseDateTimeFromString(filterValueText);filterInstance.onFloatingFilterChanged(this.getLastType()||null,date)}})}getDateComponentParams(){const debounceMs=getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:_debounce(this.onDateChanged.bind(this),debounceMs),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new DateCompWrapper(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,dateComp=>{dateComp.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const params=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(params)}getFilterModelFormatter(){return this.filterModelFormatter}},__name(_a92,"DateFloatingFilter"),_a92),_a93,DefaultDateComponent=(_a93=class extends Component{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[AgInputTextFieldSelector]),this.eDateInput=RefPlaceholder}destroy(){super.destroy()}init(params){this.params=params,this.setParams(params);const inputElement=this.eDateInput.getInputElement();this.addManagedListeners(inputElement,{mouseDown:__name(()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||inputElement.focus()},"mouseDown"),input:__name(e=>{e.target===_getActiveDomElement(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())},"input")})}setParams(params){const inputElement=this.eDateInput.getInputElement(),shouldUseBrowserDatePicker=this.shouldUseBrowserDatePicker(params);this.usingSafariDatePicker=shouldUseBrowserDatePicker&&_isBrowserSafari(),inputElement.type=shouldUseBrowserDatePicker?"date":"text";const{minValidYear,maxValidYear,minValidDate,maxValidDate}=params.filterParams||{};if(minValidDate&&minValidYear&&_warnOnce("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),maxValidDate&&maxValidYear&&_warnOnce("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),minValidDate&&maxValidDate){const[parsedMinValidDate,parsedMaxValidDate]=[minValidDate,maxValidDate].map(v=>v instanceof Date?v:_parseDateTimeFromString(v));parsedMinValidDate&&parsedMaxValidDate&&parsedMinValidDate.getTime()>parsedMaxValidDate.getTime()&&_warnOnce("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}minValidDate?minValidDate instanceof Date?inputElement.min=_dateToFormattedString(minValidDate):inputElement.min=minValidDate:minValidYear&&(inputElement.min=`${minValidYear}-01-01`),maxValidDate?maxValidDate instanceof Date?inputElement.max=_dateToFormattedString(maxValidDate):inputElement.max=maxValidDate:maxValidYear&&(inputElement.max=`${maxValidYear}-12-31`)}onParamsUpdated(params){this.refresh(params)}refresh(params){this.params=params,this.setParams(params)}getDate(){return _parseDateTimeFromString(this.eDateInput.getValue())}setDate(date){this.eDateInput.setValue(_serialiseDate(date,!1))}setInputPlaceholder(placeholder){this.eDateInput.setInputPlaceholder(placeholder)}setInputAriaLabel(ariaLabel){this.eDateInput.setAriaLabel(ariaLabel)}setDisabled(disabled){this.eDateInput.setDisabled(disabled)}afterGuiAttached(params){(!params||!params.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(params){return params.filterParams&&params.filterParams.browserDatePicker!=null?params.filterParams.browserDatePicker:_isBrowserChrome()||_isBrowserFirefox()||_isBrowserSafari()&&_getSafariVersion()>=14.1}},__name(_a93,"DefaultDateComponent"),_a93),_a94,FloatingFilterTextInputService=(_a94=class extends BeanStub{constructor(params){super(),this.params=params,this.eFloatingFilterTextInput=RefPlaceholder,this.valueChangedListener=()=>{}}setupGui(parentElement){var _a253;this.eFloatingFilterTextInput=this.createManagedBean(new AgInputTextField((_a253=this.params)==null?void 0:_a253.config));const eInput=this.eFloatingFilterTextInput.getGui();parentElement.appendChild(eInput);const listener=__name(e=>this.valueChangedListener(e),"listener");this.addManagedListeners(eInput,{input:listener,keydown:listener})}setEditable(editable){this.eFloatingFilterTextInput.setDisabled(!editable)}setAutoComplete(autoComplete){this.eFloatingFilterTextInput.setAutoComplete(autoComplete)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(value,silent){this.eFloatingFilterTextInput.setValue(value,silent)}setValueChangedListener(listener){this.valueChangedListener=listener}setParams(params){this.setAriaLabel(params.ariaLabel),params.autoComplete!==void 0&&this.setAutoComplete(params.autoComplete)}setAriaLabel(ariaLabel){this.eFloatingFilterTextInput.setInputAriaLabel(ariaLabel)}},__name(_a94,"FloatingFilterTextInputService"),_a94),_a95,TextInputFloatingFilter=(_a95=class extends SimpleFloatingFilter{constructor(){super(...arguments),this.eFloatingFilterInputContainer=RefPlaceholder}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(model,event){this.isEventFromFloatingFilter(event)||this.isEventFromDataChange(event)||(this.setLastTypeFromModel(model),this.setEditable(this.canWeEditAfterModelFromParentFilter(model)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(model)))}init(params){this.setupFloatingFilterInputService(params),super.init(params),this.setTextInputParams(params)}setupFloatingFilterInputService(params){this.floatingFilterInputService=this.createFloatingFilterInputService(params),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(params){this.params=params;const autoComplete=params.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(params),autoComplete}),this.applyActive=isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const debounceMs=getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),toDebounce=_debounce(this.syncUpWithParentFilter.bind(this),debounceMs);this.floatingFilterInputService.setValueChangedListener(toDebounce)}}onParamsUpdated(params){this.refresh(params)}refresh(params){super.refresh(params),this.setTextInputParams(params)}recreateFloatingFilterInputService(params){const value=this.floatingFilterInputService.getValue();_clearElement(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(params),this.floatingFilterInputService.setValue(value,!0)}syncUpWithParentFilter(e){const isEnterKey=e.key===KeyCode.ENTER;if(this.applyActive&&!isEnterKey)return;let value=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(value=trimInputForFilter(value),this.floatingFilterInputService.setValue(value,!0)),this.params.parentFilterInstance(filterInstance=>{filterInstance&&filterInstance.onFloatingFilterChanged(this.getLastType()||null,value||null)})}setEditable(editable){this.floatingFilterInputService.setEditable(editable)}},__name(_a95,"TextInputFloatingFilter"),_a95),_a96,FloatingFilterNumberInputService=(_a96=class extends BeanStub{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(parentElement){this.eFloatingFilterNumberInput=this.createManagedBean(new AgInputNumberField),this.eFloatingFilterTextInput=this.createManagedBean(new AgInputTextField),this.eFloatingFilterTextInput.setDisabled(!0);const eNumberInput=this.eFloatingFilterNumberInput.getGui(),eTextInput=this.eFloatingFilterTextInput.getGui();parentElement.appendChild(eNumberInput),parentElement.appendChild(eTextInput),this.setupListeners(eNumberInput,e=>this.valueChangedListener(e)),this.setupListeners(eTextInput,e=>this.valueChangedListener(e))}setEditable(editable){this.numberInputActive=editable,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(autoComplete){this.eFloatingFilterNumberInput.setAutoComplete(autoComplete),this.eFloatingFilterTextInput.setAutoComplete(autoComplete)}getValue(){return this.getActiveInputElement().getValue()}setValue(value,silent){this.getActiveInputElement().setValue(value,silent)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(listener){this.valueChangedListener=listener}setupListeners(element,listener){this.addManagedListeners(element,{input:listener,keydown:listener})}setParams(params){this.setAriaLabel(params.ariaLabel),params.autoComplete!==void 0&&this.setAutoComplete(params.autoComplete)}setAriaLabel(ariaLabel){this.eFloatingFilterNumberInput.setInputAriaLabel(ariaLabel),this.eFloatingFilterTextInput.setInputAriaLabel(ariaLabel)}},__name(_a96,"FloatingFilterNumberInputService"),_a96),_a97,NumberFloatingFilter=(_a97=class extends TextInputFloatingFilter{init(params){var _a253;super.init(params),this.filterModelFormatter=new NumberFilterModelFormatter(this.localeService,this.optionsFactory,(_a253=params.filterParams)==null?void 0:_a253.numberFormatter)}onParamsUpdated(params){this.refresh(params)}refresh(params){getAllowedCharPattern(params.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(params),super.refresh(params),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return DEFAULT_NUMBER_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(params){return this.allowedCharPattern=getAllowedCharPattern(params.filterParams),this.allowedCharPattern?this.createManagedBean(new FloatingFilterTextInputService({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new FloatingFilterNumberInputService)}},__name(_a97,"NumberFloatingFilter"),_a97),_a98,TextFloatingFilter=(_a98=class extends TextInputFloatingFilter{init(params){super.init(params),this.filterModelFormatter=new TextFilterModelFormatter(this.localeService,this.optionsFactory)}onParamsUpdated(params){this.refresh(params)}refresh(params){super.refresh(params),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return DEFAULT_TEXT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new FloatingFilterTextInputService)}},__name(_a98,"TextFloatingFilter"),_a98);function isQuickFilterPresent(beans){var _a253;return!!((_a253=beans.filterManager)!=null&&_a253.isQuickFilterPresent())}__name(isQuickFilterPresent,"isQuickFilterPresent");function getQuickFilter(beans){return beans.gos.get("quickFilterText")}__name(getQuickFilter,"getQuickFilter");function resetQuickFilter(beans){var _a253;(_a253=beans.filterManager)==null||_a253.resetQuickFilterCache()}__name(resetQuickFilter,"resetQuickFilter");var _a99,QuickFilterService=(_a99=class extends BeanStub{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(beans){this.valueService=beans.valueService,this.columnModel=beans.columnModel,this.rowModel=beans.rowModel,this.pivotResultColsService=beans.pivotResultColsService}postConstruct(){const resetListener=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:resetListener,newColumnsLoaded:resetListener,columnRowGroupChanged:resetListener,columnVisible:__name(()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()},"columnVisible")}),this.addManagedPropertyListener("quickFilterText",e=>this.setQuickFilter(e.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){var _a253;const pivotMode=this.columnModel.isPivotMode(),groupAutoCols=this.columnModel.getAutoCols(),providedCols=this.columnModel.getColDefCols();let columnsForQuickFilter=(pivotMode&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?(_a253=this.pivotResultColsService.getPivotResultCols())==null?void 0:_a253.list:providedCols)??[];groupAutoCols&&(columnsForQuickFilter=columnsForQuickFilter.concat(groupAutoCols)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?columnsForQuickFilter:columnsForQuickFilter.filter(col=>col.isVisible()||col.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(node){const usingCache=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(usingCache,node):this.quickFilterParts.every(part=>usingCache?this.doesRowPassQuickFilterCache(node,part):this.doesRowPassQuickFilterNoCache(node,part))}resetQuickFilterCache(){this.rowModel.forEachNode(node=>node.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter,parser}=this;quickFilter?this.quickFilterParts=parser?parser(quickFilter):quickFilter.split(" "):this.quickFilterParts=null}parseQuickFilter(newFilter){return _exists(newFilter)?_isClientSideRowModel(this.gos)?newFilter.toUpperCase():(_warnOnce("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(newFilter){if(newFilter!=null&&typeof newFilter!="string"){_warnOnce(`Grid option quickFilterText only supports string inputs, received: ${typeof newFilter}`);return}const parsedFilter=this.parseQuickFilter(newFilter);this.quickFilter!==parsedFilter&&(this.quickFilter=parsedFilter,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const parser=this.gos.get("quickFilterParser"),matcher=this.gos.get("quickFilterMatcher"),hasChanged=parser!==this.parser||matcher!==this.matcher;this.parser=parser,this.matcher=matcher,hasChanged&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(node,filterPart){return this.colsForQuickFilter.some(column=>{const part=this.getQuickFilterTextForColumn(column,node);return _exists(part)&&part.indexOf(filterPart)>=0})}doesRowPassQuickFilterCache(node,filterPart){return this.checkGenerateQuickFilterAggregateText(node),node.quickFilterAggregateText.indexOf(filterPart)>=0}doesRowPassQuickFilterMatcher(usingCache,node){let quickFilterAggregateText;usingCache?(this.checkGenerateQuickFilterAggregateText(node),quickFilterAggregateText=node.quickFilterAggregateText):quickFilterAggregateText=this.getQuickFilterAggregateText(node);const{quickFilterParts,matcher}=this;return matcher(quickFilterParts,quickFilterAggregateText)}checkGenerateQuickFilterAggregateText(node){node.quickFilterAggregateText||(node.quickFilterAggregateText=this.getQuickFilterAggregateText(node))}getQuickFilterTextForColumn(column,node){let value=this.valueService.getValue(column,node,!0);const colDef=column.getColDef();if(colDef.getQuickFilterText){const params=this.gos.addGridCommonParams({value,node,data:node.data,column,colDef});value=colDef.getQuickFilterText(params)}return _exists(value)?value.toString().toUpperCase():null}getQuickFilterAggregateText(node){const stringParts=[];return this.colsForQuickFilter.forEach(column=>{const part=this.getQuickFilterTextForColumn(column,node);_exists(part)&&stringParts.push(part)}),stringParts.join(`
`)}},__name(_a99,"QuickFilterService"),_a99),FilterCoreModule={version:VERSION,moduleName:"@ag-grid-community/filter-core",beans:[FilterManager]},FilterApiModule={version:VERSION,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent,onFilterChanged},dependantModules:[FilterCoreModule]},ColumnFilterModule={version:VERSION,moduleName:"@ag-grid-community/column-filter",beans:[ColumnFilterService],dependantModules:[FilterCoreModule]},ColumnFilterApiModule={version:VERSION,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent,getFilterInstance,getColumnFilterInstance,destroyFilter,setFilterModel,getFilterModel,getColumnFilterModel,setColumnFilterModel,showColumnFilter},dependantModules:[ColumnFilterModule,FilterApiModule]},FloatingFilterCoreModule={version:VERSION,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:HeaderFilterCellCtrl}],dependantModules:[ColumnFilterModule]},ReadOnlyFloatingFilterModule={version:VERSION,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:ReadOnlyFloatingFilter}],dependantModules:[FloatingFilterCoreModule]},SimpleFilterModule={version:VERSION,moduleName:"@ag-grid-community/simple-filter",dependantModules:[ColumnFilterModule],userComponents:[{name:"agTextColumnFilter",classImp:TextFilter},{name:"agNumberColumnFilter",classImp:NumberFilter},{name:"agDateColumnFilter",classImp:DateFilter},{name:"agDateInput",classImp:DefaultDateComponent}]},SimpleFloatingFilterModule={version:VERSION,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[SimpleFilterModule,FloatingFilterCoreModule],userComponents:[{name:"agTextColumnFloatingFilter",classImp:TextFloatingFilter},{name:"agNumberColumnFloatingFilter",classImp:NumberFloatingFilter},{name:"agDateColumnFloatingFilter",classImp:DateFloatingFilter}]},QuickFilterCoreModule={version:VERSION,moduleName:"@ag-grid-community/quick-filter-core",beans:[QuickFilterService],dependantModules:[FilterCoreModule]},QuickFilterApiModule={version:VERSION,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent,getQuickFilter,resetQuickFilter},dependantModules:[QuickFilterCoreModule]},QuickFilterModule={version:VERSION,moduleName:"@ag-grid-community/quick-filter",dependantModules:[QuickFilterCoreModule,QuickFilterApiModule]},FilterModule={version:VERSION,moduleName:"@ag-grid-community/filter",dependantModules:[SimpleFloatingFilterModule,ReadOnlyFloatingFilterModule,QuickFilterModule,ColumnFilterApiModule]},HeaderRowType=(HeaderRowType2=>(HeaderRowType2.COLUMN_GROUP="group",HeaderRowType2.COLUMN="column",HeaderRowType2.FLOATING_FILTER="filter",HeaderRowType2))(HeaderRowType||{}),_a100,HeaderNavigationService=(_a100=class extends BeanStub{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(beans){this.focusService=beans.focusService,this.headerPositionUtils=beans.headerPositionUtils,this.ctrlsService=beans.ctrlsService,this.columnModel=beans.columnModel,this.visibleColService=beans.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,p=>{this.gridBodyCon=p.gridBodyCtrl});const eDocument=_getDocument(this.gos);this.addManagedElementListeners(eDocument,{mousedown:__name(()=>this.setCurrentHeaderRowWithoutSpan(-1),"mousedown")})}getHeaderRowCount(){var _a253;return((_a253=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:_a253.getRowCount())??0}getHeaderPositionForColumn(colKey,floatingFilter){let column;if(typeof colKey=="string"?(column=this.columnModel.getCol(colKey),column||(column=this.visibleColService.getColumnGroup(colKey))):column=colKey,!column)return null;const centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl(),allCtrls=centerHeaderContainer==null?void 0:centerHeaderContainer.getAllCtrls(),isFloatingFilterVisible=_last(allCtrls||[]).getType()==="filter",headerRowCount=this.getHeaderRowCount()-1;let row=-1,col=column;for(;col;)row++,col=col.getParent();let headerRowIndex=row;return floatingFilter&&isFloatingFilterVisible&&headerRowIndex===headerRowCount-1&&headerRowIndex++,headerRowIndex===-1?null:{headerRowIndex,column}}navigateVertically(direction,fromHeader,event){if(fromHeader||(fromHeader=this.focusService.getFocusedHeader()),!fromHeader)return!1;const{headerRowIndex}=fromHeader,column=fromHeader.column,rowLen=this.getHeaderRowCount(),isUp=direction===0;let{headerRowIndex:nextRow,column:nextFocusColumn,headerRowIndexWithoutSpan}=isUp?this.headerPositionUtils.getColumnVisibleParent(column,headerRowIndex):this.headerPositionUtils.getColumnVisibleChild(column,headerRowIndex),skipColumn=!1;return nextRow<0&&(nextRow=0,nextFocusColumn=column,skipColumn=!0),nextRow>=rowLen?(nextRow=-1,this.setCurrentHeaderRowWithoutSpan(-1)):headerRowIndexWithoutSpan!==void 0&&(this.currentHeaderRowWithoutSpan=headerRowIndexWithoutSpan),!skipColumn&&!nextFocusColumn?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:nextRow,column:nextFocusColumn},allowUserOverride:!0,event})}setCurrentHeaderRowWithoutSpan(row){this.currentHeaderRowWithoutSpan=row}navigateHorizontally(direction,fromTab=!1,event){const focusedHeader=this.focusService.getFocusedHeader(),isLeft=direction===2,isRtl=this.gos.get("enableRtl");let nextHeader,normalisedDirection;if(this.currentHeaderRowWithoutSpan!==-1?focusedHeader.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=focusedHeader.headerRowIndex,isLeft!==isRtl?(normalisedDirection="Before",nextHeader=this.headerPositionUtils.findHeader(focusedHeader,normalisedDirection)):(normalisedDirection="After",nextHeader=this.headerPositionUtils.findHeader(focusedHeader,normalisedDirection)),nextHeader||!fromTab)return this.focusService.focusHeaderPosition({headerPosition:nextHeader,direction:normalisedDirection,fromTab,allowUserOverride:!0,event});if(fromTab){const userFunc=this.gos.getCallback("tabToNextHeader");if(userFunc)return this.focusService.focusHeaderPositionFromUserFunc({userFunc,headerPosition:nextHeader,direction:normalisedDirection})}return this.focusNextHeaderRow(focusedHeader,normalisedDirection,event)}focusNextHeaderRow(focusedHeader,direction,event){const currentIndex=focusedHeader.headerRowIndex;let nextPosition=null,nextRowIndex;if(direction==="Before"?currentIndex>0&&(nextRowIndex=currentIndex-1,this.currentHeaderRowWithoutSpan-=1,nextPosition=this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex,"end")):(nextRowIndex=currentIndex+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),nextPosition=this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex,"start")),!nextPosition)return!1;const{column,headerRowIndex}=this.headerPositionUtils.getHeaderIndexToFocus(nextPosition.column,nextPosition==null?void 0:nextPosition.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column,headerRowIndex},direction,fromTab:!0,allowUserOverride:!0,event})}scrollToColumn(column,direction="After"){if(column.getPinned())return;let columnToScrollTo;if(isColumnGroup(column)){const columns=column.getDisplayedLeafColumns();columnToScrollTo=direction==="Before"?_last(columns):columns[0]}else columnToScrollTo=column;this.gridBodyCon.getScrollFeature().ensureColumnVisible(columnToScrollTo)}},__name(_a100,"HeaderNavigationService"),_a100),_a101,GridHeaderCtrl=(_a101=class extends BeanStub{wireBeans(beans){this.animationFrameService=beans.animationFrameService,this.headerNavigationService=beans.headerNavigationService,this.focusService=beans.focusService,this.columnModel=beans.columnModel,this.visibleColsService=beans.visibleColsService,this.ctrlsService=beans.ctrlsService,this.filterManager=beans.filterManager,this.menuService=beans.menuService}setComp(comp,eGui,eFocusableElement){this.comp=comp,this.eGui=eGui,this.createManagedBean(new ManagedFocusFeature(eFocusableElement,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const listener=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:listener}),this.mockContextMenuForIPad(listener),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const listener=this.setHeaderHeight.bind(this);listener(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],listener),this.addManagedEventListeners({displayedColumnsChanged:listener,columnHeaderHeightChanged:listener,columnGroupHeaderHeightChanged:__name(()=>this.animationFrameService.requestAnimationFrame(()=>listener()),"columnGroupHeaderHeightChanged"),gridStylesChanged:listener,advancedFilterEnabledChanged:listener})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){var _a253;const{columnModel}=this;let totalHeaderHeight=0;const groupHeight=this.columnModel.getGroupRowsHeight().reduce((prev,curr)=>prev+curr,0),headerHeight=this.columnModel.getColumnHeaderRowHeight();if((_a253=this.filterManager)!=null&&_a253.hasFloatingFilters()&&(totalHeaderHeight+=columnModel.getFloatingFiltersHeight()),totalHeaderHeight+=groupHeight,totalHeaderHeight+=headerHeight,this.headerHeight===totalHeaderHeight)return;this.headerHeight=totalHeaderHeight;const px=`${totalHeaderHeight+1}px`;this.comp.setHeightAndMinHeight(px),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const pivotMode=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",pivotMode),this.comp.addOrRemoveCssClass("ag-pivot-off",!pivotMode)}onDisplayedColumnsChanged(){const shouldAllowOverflow=this.visibleColsService.getAllCols().some(col=>col.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",shouldAllowOverflow)}onTabKeyDown(e){const isRtl=this.gos.get("enableRtl"),backwards=e.shiftKey,direction=backwards!==isRtl?2:3;(this.headerNavigationService.navigateHorizontally(direction,!0,e)||!backwards&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(backwards))&&e.preventDefault()}handleKeyDown(e){let direction=null;switch(e.key){case KeyCode.LEFT:direction=2;case KeyCode.RIGHT:{_exists(direction)||(direction=3),this.headerNavigationService.navigateHorizontally(direction,!1,e)&&e.preventDefault();break}case KeyCode.UP:direction=0;case KeyCode.DOWN:{_exists(direction)||(direction=1),this.headerNavigationService.navigateVertically(direction,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget}=e;!relatedTarget&&this.eGui.contains(_getActiveDomElement(this.gos))||this.eGui.contains(relatedTarget)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(mouseEvent,touch,touchEvent){var _a253;if(!mouseEvent&&!touchEvent||!this.menuService.isHeaderContextMenuEnabled())return;const{target}=mouseEvent??touch;(target===this.eGui||target===((_a253=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:_a253.getViewportElement()))&&this.menuService.showHeaderContextMenu(void 0,mouseEvent,touchEvent)}mockContextMenuForIPad(listener){if(!_isIOSUserAgent())return;const touchListener=new TouchListener(this.eGui),longTapListener=__name(event=>{listener(void 0,event.touchStart,event.touchEvent)},"longTapListener");this.addManagedListeners(touchListener,{longTap:longTapListener}),this.addDestroyFunc(()=>touchListener.destroy())}},__name(_a101,"GridHeaderCtrl"),_a101),_a102,CenterWidthFeature=(_a102=class extends BeanStub{constructor(callback,addSpacer=!1){super(),this.callback=callback,this.addSpacer=addSpacer}wireBeans(beans){this.visibleColsService=beans.visibleColsService,this.scrollVisibleService=beans.scrollVisibleService}postConstruct(){const listener=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",listener),this.addManagedEventListeners({columnContainerWidthChanged:listener,displayedColumnsChanged:listener,leftPinnedWidthChanged:listener}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:listener,scrollVisibilityChanged:listener,scrollbarWidthChanged:listener}),this.setWidth()}setWidth(){const printLayout=_isDomLayout(this.gos,"print"),centerWidth=this.visibleColsService.getBodyContainerWidth(),leftWidth=this.visibleColsService.getColsLeftWidth(),rightWidth=this.visibleColsService.getDisplayedColumnsRightWidth();let totalWidth;printLayout?totalWidth=centerWidth+leftWidth+rightWidth:(totalWidth=centerWidth,this.addSpacer&&(this.gos.get("enableRtl")?leftWidth:rightWidth)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(totalWidth+=this.scrollVisibleService.getScrollbarWidth())),this.callback(totalWidth)}},__name(_a102,"CenterWidthFeature"),_a102),_a103,BodyDropPivotTarget=(_a103=class extends BeanStub{constructor(pinned){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=pinned}wireBeans(beans){this.funcColsService=beans.funcColsService}onDragEnter(draggingEvent){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const dragColumns=draggingEvent.dragItem.columns;dragColumns&&dragColumns.forEach(column=>{column.isPrimary()&&(column.isAnyFunctionActive()||(column.isAllowValue()?this.columnsToAggregate.push(column):column.isAllowRowGroup()?this.columnsToGroup.push(column):column.isAllowPivot()&&this.columnsToPivot.push(column)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(draggingEvent){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(draggingEvent){}onDragStop(draggingEvent){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}},__name(_a103,"BodyDropPivotTarget"),_a103);function getBestColumnMoveIndexFromXPosition(params){const{isFromHeader,fromLeft,xPosition,fromEnter,fakeEvent,pinned,gos,columnModel,columnMoveService,visibleColsService}=params;let{allMovingColumns}=params;if(isFromHeader){const newCols=[];allMovingColumns.forEach(col=>{var _a253;let movingGroup=null,parent=col.getParent();for(;parent!=null&&parent.getDisplayedLeafColumns().length===1;)movingGroup=parent,parent=parent.getParent();movingGroup!=null?(!!((_a253=movingGroup.getColGroupDef())!=null&&_a253.marryChildren)?movingGroup.getProvidedColumnGroup().getLeafColumns():movingGroup.getLeafColumns()).forEach(newCol=>{newCols.includes(newCol)||newCols.push(newCol)}):newCols.includes(col)||newCols.push(col)}),allMovingColumns=newCols}const allMovingColumnsOrdered=allMovingColumns.slice();columnModel.sortColsLikeCols(allMovingColumnsOrdered);const validMoves=calculateValidMoves({movingCols:allMovingColumnsOrdered,draggingRight:fromLeft,xPosition,pinned,gos,columnModel,visibleColsService}),oldIndex=calculateOldIndex(allMovingColumnsOrdered,columnModel);if(validMoves.length===0)return;const firstValidMove=validMoves[0];let constrainDirection=oldIndex!==null&&!fromEnter;if(isFromHeader&&(constrainDirection=oldIndex!==null),constrainDirection&&!fakeEvent&&(!fromLeft&&firstValidMove>=oldIndex||fromLeft&&firstValidMove<=oldIndex))return;const displayedCols=visibleColsService.getAllCols(),potentialMoves=[];let targetOrder=null;for(let i=0;i<validMoves.length;i++){const move=validMoves[i],order=columnMoveService.getProposedColumnOrder(allMovingColumnsOrdered,move);if(!columnMoveService.doesOrderPassRules(order))continue;const displayedOrder=order.filter(col=>displayedCols.includes(col));if(targetOrder===null)targetOrder=displayedOrder;else if(!_areEqual(displayedOrder,targetOrder))break;const fragCount=groupFragCount(order);potentialMoves.push({move,fragCount})}if(potentialMoves.length===0)return;potentialMoves.sort((a,b)=>a.fragCount-b.fragCount);const toIndex=potentialMoves[0].move;if(!(toIndex>columnModel.getCols().length-allMovingColumns.length))return{columns:allMovingColumns,toIndex}}__name(getBestColumnMoveIndexFromXPosition,"getBestColumnMoveIndexFromXPosition");function attemptMoveColumns(params){const{columns,toIndex}=getBestColumnMoveIndexFromXPosition(params)||{},{finished,columnMoveService}=params;return!columns||toIndex==null?null:(columnMoveService.moveColumns(columns,toIndex,"uiColumnMoved",finished),finished?null:{columns,toIndex})}__name(attemptMoveColumns,"attemptMoveColumns");function calculateOldIndex(movingCols,columnModel){const gridCols=columnModel.getCols(),indexes=_sortNumerically(movingCols.map(col=>gridCols.indexOf(col))),firstIndex=indexes[0];return _last(indexes)-firstIndex!==indexes.length-1?null:firstIndex}__name(calculateOldIndex,"calculateOldIndex");function groupFragCount(columns){function parents(col){const result=[];let parent=col.getOriginalParent();for(;parent!=null;)result.push(parent),parent=parent.getOriginalParent();return result}__name(parents,"parents");let count=0;for(let i=0;i<columns.length-1;i++){let a=parents(columns[i]),b=parents(columns[i+1]);[a,b]=a.length>b.length?[a,b]:[b,a],a.forEach(parent=>{b.indexOf(parent)===-1&&count++})}return count}__name(groupFragCount,"groupFragCount");function getDisplayedColumns(visibleColsService,type){switch(type){case"left":return visibleColsService.getLeftCols();case"right":return visibleColsService.getRightCols();default:return visibleColsService.getCenterCols()}}__name(getDisplayedColumns,"getDisplayedColumns");function calculateValidMoves(params){const{movingCols,draggingRight,xPosition,pinned,gos,columnModel,visibleColsService}=params;if(gos.get("suppressMovableColumns")||movingCols.some(col=>col.getColDef().suppressMovable))return[];const allDisplayedCols=getDisplayedColumns(visibleColsService,pinned),allGridCols=columnModel.getCols(),movingDisplayedCols=allDisplayedCols.filter(col=>_includes(movingCols,col)),otherDisplayedCols=allDisplayedCols.filter(col=>!_includes(movingCols,col)),otherGridCols=allGridCols.filter(col=>!_includes(movingCols,col));let displayIndex=0,availableWidth=xPosition;if(draggingRight){let widthOfMovingDisplayedCols=0;movingDisplayedCols.forEach(col=>widthOfMovingDisplayedCols+=col.getActualWidth()),availableWidth-=widthOfMovingDisplayedCols}if(availableWidth>0){for(let i=0;i<otherDisplayedCols.length;i++){const col=otherDisplayedCols[i];if(availableWidth-=col.getActualWidth(),availableWidth<0)break;displayIndex++}draggingRight&&displayIndex++}let firstValidMove;if(displayIndex>0){const leftColumn=otherDisplayedCols[displayIndex-1];firstValidMove=otherGridCols.indexOf(leftColumn)+1}else firstValidMove=otherGridCols.indexOf(otherDisplayedCols[0]),firstValidMove===-1&&(firstValidMove=0);const validMoves=[firstValidMove],numberComparator=__name((a,b)=>a-b,"numberComparator");if(draggingRight){let pointer=firstValidMove+1;const lastIndex=allGridCols.length-1;for(;pointer<=lastIndex;)validMoves.push(pointer),pointer++;validMoves.sort(numberComparator)}else{let pointer=firstValidMove;const lastIndex=allGridCols.length-1;let displacedCol=allGridCols[pointer];for(;pointer<=lastIndex&&allDisplayedCols.indexOf(displacedCol)<0;)pointer++,validMoves.push(pointer),displacedCol=allGridCols[pointer];pointer=firstValidMove-1;const firstDisplayIndex=0;for(;pointer>=firstDisplayIndex;)validMoves.push(pointer),pointer--;validMoves.sort(numberComparator).reverse()}return validMoves}__name(calculateValidMoves,"calculateValidMoves");function normaliseX(params){var _a253;const{pinned,fromKeyboard,gos,ctrlsService,useHeaderRow,skipScrollPadding}=params;let eViewport=(_a253=ctrlsService.getHeaderRowContainerCtrl(pinned))==null?void 0:_a253.getViewportElement(),{x}=params;return eViewport?(fromKeyboard&&(x-=eViewport.getBoundingClientRect().left),gos.get("enableRtl")&&(useHeaderRow&&(eViewport=eViewport.querySelector(".ag-header-row")),x=eViewport.clientWidth-x),pinned==null&&!skipScrollPadding&&(x+=ctrlsService.get("center").getCenterViewportScrollLeft()),x):0}__name(normaliseX,"normaliseX");function setColumnsMoving(columns,isMoving){for(const column of columns)column.setMoving(isMoving,"uiColumnMoved")}__name(setColumnsMoving,"setColumnsMoving");var MOVE_FAIL_THRESHOLD=7,SCROLL_MOVE_WIDTH=100,SCROLL_GAP_NEEDED_BEFORE_MOVE=SCROLL_MOVE_WIDTH/2,SCROLL_ACCELERATION_RATE=5,SCROLL_TIME_INTERVAL=100,_a104,MoveColumnFeature=(_a104=class extends BeanStub{constructor(pinned){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=pinned,this.isCenterContainer=!_exists(pinned)}wireBeans(beans){this.columnModel=beans.columnModel,this.visibleColsService=beans.visibleColsService,this.columnMoveService=beans.columnMoveService,this.dragAndDropService=beans.dragAndDropService,this.ctrlsService=beans.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,p=>{this.gridBodyCon=p.gridBodyCtrl})}getIconName(){var _a253;const columns=((_a253=this.lastDraggingEvent)==null?void 0:_a253.dragItem.columns)??[];for(const col of columns){const colPinned=col.getPinned();if(col.getColDef().lockPinned){if(colPinned==this.pinned)return"move";continue}if(colPinned===this.pinned||!this.pinned)return"move";if(!colPinned&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(draggingEvent){const columns=draggingEvent.dragItem.columns;if(draggingEvent.dragSource.type===0)this.setColumnsVisible(columns,!0,"uiColumnDragged");else{const visibleState=draggingEvent.dragItem.visibleState,visibleColumns=(columns||[]).filter(column=>visibleState[column.getId()]);this.setColumnsVisible(visibleColumns,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(columns,this.pinned),this.onDragging(draggingEvent,!0,!0)}onDragging(draggingEvent=this.lastDraggingEvent,fromEnter=!1,fakeEvent=!1,finished=!1){const isSuppressMoveWhenDragging=this.gos.get("suppressMoveWhenColumnDragging");if(finished&&!isSuppressMoveWhenDragging){this.finishColumnMoving();return}if(this.lastDraggingEvent=draggingEvent,!draggingEvent||!finished&&_missing(draggingEvent.hDirection))return;const{pinned,gos,ctrlsService}=this,mouseX=normaliseX({x:draggingEvent.x,pinned,gos,ctrlsService});fromEnter||this.checkCenterForScrolling(mouseX),isSuppressMoveWhenDragging?this.handleColumnDragWhileSuppressingMovement(draggingEvent,fromEnter,fakeEvent,mouseX,finished):this.handleColumnDragWhileAllowingMovement(draggingEvent,fromEnter,fakeEvent,mouseX,finished)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(columns,visible,source){if(!columns)return;const allowedCols=columns.filter(c=>!c.getColDef().lockVisible);this.columnModel.setColsVisible(allowedCols,visible,source)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns,toIndex}=this.lastMovedInfo;this.columnMoveService.moveColumns(columns,toIndex,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(draggingEvent,fromEnter,fakeEvent,mouseX,finished){const allMovingColumns=this.getAllMovingColumns(draggingEvent,!0);if(finished){const isAttemptingToPin=this.isAttemptingToPin(allMovingColumns);isAttemptingToPin&&this.attemptToPinColumns(allMovingColumns,void 0,!0);const{fromLeft,xPosition}=this.getNormalisedXPositionInfo(allMovingColumns,isAttemptingToPin)||{};if(fromLeft==null||xPosition==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns,xPosition,fromEnter,fakeEvent,fromLeft})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(draggingEvent))return;this.highlightHoveredColumn(allMovingColumns,mouseX)}}handleColumnDragWhileAllowingMovement(draggingEvent,fromEnter,fakeEvent,mouseX,finished){const allMovingColumns=this.getAllMovingColumns(draggingEvent),fromLeft=this.normaliseDirection(draggingEvent.hDirection)===1,isFromHeader=draggingEvent.dragSource.type===1,params=this.getMoveColumnParams({allMovingColumns,isFromHeader,xPosition:mouseX,fromLeft,fromEnter,fakeEvent}),lastMovedInfo=attemptMoveColumns({...params,finished});lastMovedInfo&&(this.lastMovedInfo=lastMovedInfo)}getAllMovingColumns(draggingEvent,useSplit=!1){const dragItem=draggingEvent.dragSource.getDragItem();let columns=null;useSplit?(columns=dragItem.columnsInSplit,columns||(columns=dragItem.columns)):columns=dragItem.columns;const conditionCallback=__name(col=>col.getColDef().lockPinned?col.getPinned()==this.pinned:!0,"conditionCallback");return columns?columns.filter(conditionCallback):[]}getMoveColumnParams(params){const{allMovingColumns,isFromHeader,xPosition,fromLeft,fromEnter,fakeEvent}=params,{pinned,gos,columnModel,columnMoveService,visibleColsService}=this;return{allMovingColumns,isFromHeader,fromLeft,xPosition,pinned,fromEnter,fakeEvent,gos,columnModel,columnMoveService,visibleColsService}}findFirstAndLastMovingColumns(allMovingColumns){const moveLen=allMovingColumns.length;let firstMovingCol,lastMovingCol;for(let i=0;i<=moveLen;i++){if(!firstMovingCol){const leftCol=allMovingColumns[i];leftCol.getLeft()!=null&&(firstMovingCol=leftCol)}if(!lastMovingCol){const rightCol=allMovingColumns[moveLen-1-i];rightCol.getLeft()!=null&&(lastMovingCol=rightCol)}if(firstMovingCol&&lastMovingCol)break}return{firstMovingCol,lastMovingCol}}highlightHoveredColumn(movingColumns,mouseX){var _a253;const{gos,columnModel}=this,isRtl=gos.get("enableRtl"),consideredColumns=columnModel.getCols().filter(col=>col.isVisible()&&col.getPinned()===this.pinned);let start=null,width=null,targetColumn=null;for(const col of consideredColumns){if(width=col.getActualWidth(),start=this.getNormalisedColumnLeft(col,0,isRtl),start!=null){const end=start+width;if(start<=mouseX&&end>=mouseX){targetColumn=col;break}}start=null,width=null}if(targetColumn)movingColumns.indexOf(targetColumn)!==-1&&(targetColumn=null);else{for(let i=consideredColumns.length-1;i>=0;i--){const currentColumn=consideredColumns[i],parent=consideredColumns[i].getParent();if(!parent){targetColumn=currentColumn;break}const leafDisplayedCols=parent==null?void 0:parent.getDisplayedLeafColumns();if(leafDisplayedCols.length){targetColumn=_last(leafDisplayedCols);break}}if(!targetColumn)return;start=this.getNormalisedColumnLeft(targetColumn,0,isRtl),width=targetColumn.getActualWidth()}if(((_a253=this.lastHighlightedColumn)==null?void 0:_a253.column)!==targetColumn&&this.clearHighlighted(),targetColumn==null||start==null||width==null)return;let position;mouseX-start<width/2!==isRtl?position=0:position=1,targetColumn.setHighlighted(position),this.lastHighlightedColumn={column:targetColumn,position}}getNormalisedXPositionInfo(allMovingColumns,isAttemptingToPin){const{gos,visibleColsService}=this,isRtl=gos.get("enableRtl"),{firstMovingCol,column,position}=this.getColumnMoveAndTargetInfo(allMovingColumns,isAttemptingToPin,isRtl);if(!firstMovingCol||!column||position==null)return;const visibleColumns=visibleColsService.getAllCols(),movingColIndex=visibleColumns.indexOf(firstMovingCol),targetIndex=visibleColumns.indexOf(column),isBefore=position===0!==isRtl,fromLeft=movingColIndex<targetIndex||movingColIndex===targetIndex&&!isBefore;let diff=0;if(isBefore?fromLeft&&(diff-=1):fromLeft||(diff+=1),targetIndex+diff===movingColIndex)return;const targetColumn=visibleColumns[targetIndex+diff];if(!targetColumn)return;const xPosition=this.getNormalisedColumnLeft(targetColumn,20,isRtl);return{fromLeft,xPosition}}getColumnMoveAndTargetInfo(allMovingColumns,isAttemptingToPin,isRtl){const lastHighlightedColumn=this.lastHighlightedColumn||{},{firstMovingCol,lastMovingCol}=this.findFirstAndLastMovingColumns(allMovingColumns);if(!firstMovingCol||!lastMovingCol||lastHighlightedColumn.column||!isAttemptingToPin)return{firstMovingCol,...lastHighlightedColumn};const isLeft=this.getPinDirection()==="left";return{firstMovingCol,position:isLeft?1:0,column:isLeft!==isRtl?firstMovingCol:lastMovingCol}}normaliseDirection(hDirection){if(this.gos.get("enableRtl"))switch(hDirection){case 0:return 1;case 1:return 0}return hDirection}getNormalisedColumnLeft(col,padding,isRtl){const{gos,ctrlsService}=this,left=col.getLeft();if(left==null)return null;const width=col.getActualWidth();return normaliseX({x:isRtl?left+width-padding:left+padding,pinned:col.getPinned(),useHeaderRow:isRtl,skipScrollPadding:!0,gos,ctrlsService})}isAttemptingToPin(columns){const isMovingHorizontally=this.needToMoveLeft||this.needToMoveRight,isFailedMoreThanThreshold=this.failedMoveAttempts>MOVE_FAIL_THRESHOLD;return isMovingHorizontally&&isFailedMoreThanThreshold||columns.some(col=>col.getPinned()!==this.pinned)}moveColumnsAfterHighlight(params){const{allMovingColumns,xPosition,fromEnter,fakeEvent,fromLeft}=params,columnMoveParams=this.getMoveColumnParams({allMovingColumns,isFromHeader:!0,xPosition,fromLeft,fromEnter,fakeEvent}),{columns,toIndex}=getBestColumnMoveIndexFromXPosition(columnMoveParams)||{};columns&&toIndex!=null&&(this.lastMovedInfo={columns,toIndex}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(xAdjustedForScroll){if(!this.isCenterContainer)return;const centerCtrl=this.ctrlsService.get("center"),firstVisiblePixel=centerCtrl.getCenterViewportScrollLeft(),lastVisiblePixel=firstVisiblePixel+centerCtrl.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=xAdjustedForScroll<firstVisiblePixel+SCROLL_GAP_NEEDED_BEFORE_MOVE,this.needToMoveLeft=xAdjustedForScroll>lastVisiblePixel-SCROLL_GAP_NEEDED_BEFORE_MOVE):(this.needToMoveLeft=xAdjustedForScroll<firstVisiblePixel+SCROLL_GAP_NEEDED_BEFORE_MOVE,this.needToMoveRight=xAdjustedForScroll>lastVisiblePixel-SCROLL_GAP_NEEDED_BEFORE_MOVE),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var _a253;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),SCROLL_TIME_INTERVAL),(_a253=this.dragAndDropService.getDragAndDropImageComponent())==null||_a253.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var _a253;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,(_a253=this.dragAndDropService.getDragAndDropImageComponent())==null||_a253.setIcon(this.getIconName()))}moveInterval(){var _a253,_b;let pixelsToMove;this.intervalCount++,pixelsToMove=10+this.intervalCount*SCROLL_ACCELERATION_RATE,pixelsToMove>SCROLL_MOVE_WIDTH&&(pixelsToMove=SCROLL_MOVE_WIDTH);let pixelsMoved=null;const scrollFeature=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?pixelsMoved=scrollFeature.scrollHorizontally(-pixelsToMove):this.needToMoveRight&&(pixelsMoved=scrollFeature.scrollHorizontally(pixelsToMove)),pixelsMoved!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=MOVE_FAIL_THRESHOLD+1)return;if((_a253=this.dragAndDropService.getDragAndDropImageComponent())==null||_a253.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const columns=(_b=this.lastDraggingEvent)==null?void 0:_b.dragItem.columns;this.attemptToPinColumns(columns,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(columns,pinned,fromMoving=!1){const allowedCols=(columns||[]).filter(c=>!c.getColDef().lockPinned);return allowedCols.length?(fromMoving&&(pinned=this.getPinDirection()),this.columnModel.setColsPinned(allowedCols,pinned,"uiColumnDragged"),fromMoving&&this.dragAndDropService.nudge(),allowedCols.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},__name(_a104,"MoveColumnFeature"),_a104),_a105,BodyDropTarget=(_a105=class extends BeanStub{wireBeans(beans){this.dragAndDropService=beans.dragAndDropService,this.columnModel=beans.columnModel,this.ctrlsService=beans.ctrlsService}constructor(pinned,eContainer){super(),this.pinned=pinned,this.eContainer=eContainer}postConstruct(){this.ctrlsService.whenReady(this,p=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.left.getContainerElement()],[p.bottomLeft.getContainerElement()],[p.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.right.getContainerElement()],[p.bottomRight.getContainerElement()],[p.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.center.getViewportElement()],[p.bottomCenter.getViewportElement()],[p.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new MoveColumnFeature(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new BodyDropPivotTarget(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(type){return type===1||type===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(draggingEvent){return this.columnModel.isPivotMode()&&draggingEvent.dragSource.type===0}onDragEnter(draggingEvent){this.currentDropListener=this.isDropColumnInPivotMode(draggingEvent)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(draggingEvent)}onDragLeave(params){this.currentDropListener.onDragLeave(params)}onDragging(params){this.currentDropListener.onDragging(params)}onDragStop(params){this.currentDropListener.onDragStop(params)}onDragCancel(){this.currentDropListener.onDragCancel()}},__name(_a105,"BodyDropTarget"),_a105),_a106,ResizeFeature=(_a106=class extends BeanStub{wireBeans(beans){this.horizontalResizeService=beans.horizontalResizeService,this.pinnedWidthService=beans.pinnedWidthService,this.ctrlsService=beans.ctrlsService,this.columnSizeService=beans.columnSizeService,this.columnAutosizeService=beans.columnAutosizeService}constructor(pinned,column,eResize,comp,ctrl){super(),this.pinned=pinned,this.column=column,this.eResize=eResize,this.comp=comp,this.ctrl=ctrl}postConstruct(){const destroyResizeFuncs=[];let canResize,canAutosize;const addResize=__name(()=>{if(_setDisplayed(this.eResize,canResize),!canResize)return;const finishedWithResizeFunc=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(destroyResizeFuncs.push(finishedWithResizeFunc),canAutosize){const skipHeaderOnAutoSize=this.gos.get("skipHeaderOnAutoSize"),autoSizeColListener=__name(()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",skipHeaderOnAutoSize)},"autoSizeColListener");this.eResize.addEventListener("dblclick",autoSizeColListener);const touchListener=new TouchListener(this.eResize);touchListener.addEventListener("doubleTap",autoSizeColListener),destroyResizeFuncs.push(()=>{this.eResize.removeEventListener("dblclick",autoSizeColListener),touchListener.removeEventListener("doubleTap",autoSizeColListener),touchListener.destroy()})}},"addResize"),removeResize=__name(()=>{destroyResizeFuncs.forEach(f=>f()),destroyResizeFuncs.length=0},"removeResize"),refresh=__name(()=>{const resize=this.column.isResizable(),autoSize=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(resize!==canResize||autoSize!==canAutosize)&&(canResize=resize,canAutosize=autoSize,removeResize(),addResize())},"refresh");refresh(),this.addDestroyFunc(removeResize),this.ctrl.setRefreshFunction("resize",refresh)}onResizing(finished,resizeAmount){const{column:key,lastResizeAmount,resizeStartWidth}=this,resizeAmountNormalised=this.normaliseResizeAmount(resizeAmount),newWidth=resizeStartWidth+resizeAmountNormalised,columnWidths=[{key,newWidth}];if(this.column.getPinned()){const leftWidth=this.pinnedWidthService.getPinnedLeftWidth(),rightWidth=this.pinnedWidthService.getPinnedRightWidth(),bodyWidth=_getInnerWidth(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(leftWidth+rightWidth+(resizeAmountNormalised-lastResizeAmount)>bodyWidth)return}this.lastResizeAmount=resizeAmountNormalised,this.columnSizeService.setColumnWidths(columnWidths,this.resizeWithShiftKey,finished,"uiColumnResized"),finished&&this.toggleColumnResizing(!1)}onResizeStart(shiftKey){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=shiftKey,this.toggleColumnResizing(!0)}toggleColumnResizing(resizing){this.comp.addOrRemoveCssClass("ag-column-resizing",resizing)}normaliseResizeAmount(dragChange){let result=dragChange;const notPinningLeft=this.pinned!=="left",pinningRight=this.pinned==="right";return this.gos.get("enableRtl")?notPinningLeft&&(result*=-1):pinningRight&&(result*=-1),result}},__name(_a106,"ResizeFeature"),_a106),_a107,SelectAllFeature=(_a107=class extends BeanStub{constructor(column){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=column}wireBeans(beans){this.rowModel=beans.rowModel,this.selectionService=beans.selectionService}postConstruct(){const setRowSelectionOptions=__name(rowSelection=>{rowSelection&&typeof rowSelection!="string"&&(this.selectionOptions=rowSelection)},"setRowSelectionOptions");setRowSelectionOptions(this.gos.get("rowSelection")),this.addManagedPropertyListener("rowSelection",e=>setRowSelectionOptions(e.currentValue))}onSpaceKeyDown(e){const checkbox=this.cbSelectAll;checkbox.isDisplayed()&&!checkbox.getGui().contains(_getActiveDomElement(this.gos))&&(e.preventDefault(),checkbox.setValue(!checkbox.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(ctrl){this.headerCellCtrl=ctrl,this.cbSelectAll=this.createManagedBean(new AgCheckbox),this.cbSelectAll.addCssClass("ag-header-select-all"),_setAriaRole(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),_setAriaHidden(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const allSelected=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(allSelected);const hasNodesToSelect=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!hasNodesToSelect),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const translate=this.localeService.getLocaleTextFunc(),ariaStatus=this.cbSelectAll.getValue()?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked"),ariaLabel=translate("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${ariaLabel} (${ariaStatus})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${ariaLabel} (${ariaStatus})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(feature){return _isMultiRowSelection(this.gos)?!0:(_warnOnce(`${feature} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(feature){return _isClientSideRowModel(this.gos)||_isServerSideRowModel(this.gos)?!0:(_warnOnce(`${feature} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const value=this.cbSelectAll.getValue(),justFiltered=this.isFilteredOnly(),justCurrentPage=this.isCurrentPageOnly();let source="uiSelectAll";justCurrentPage?source="uiSelectAllCurrentPage":justFiltered&&(source="uiSelectAllFiltered");const params={source,justFiltered,justCurrentPage};value?this.selectionService.selectAllRowNodes(params):this.selectionService.deselectAllRowNodes(params)}isCheckboxSelection(){const so=this.selectionOptions,newHeaderCheckbox=so&&_getHeaderCheckbox(so)&&isColumnControlsCol(this.column),headerCheckboxSelection=this.column.getColDef().headerCheckboxSelection;let result=!1;return newHeaderCheckbox?result=!0:typeof headerCheckboxSelection=="function"?result=headerCheckboxSelection(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):result=!!headerCheckboxSelection,result&&this.checkRightRowModelType(newHeaderCheckbox?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(newHeaderCheckbox?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const so=this.selectionOptions;return so!==void 0?so.mode==="multiRow"&&so.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const so=this.selectionOptions;return so!==void 0?so.mode==="multiRow"&&so.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},__name(_a107,"SelectAllFeature"),_a107),_a108,HeaderCellCtrl=(_a108=class extends AbstractHeaderCellCtrl{constructor(column,beans,parentRowCtrl){super(column,beans,parentRowCtrl),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=column}setComp(comp,eGui,eResize,eHeaderCompWrapper,compBean){this.comp=comp,compBean=setupCompBean(this,this.beans.context,compBean),this.setGui(eGui,compBean),this.updateState(),this.setupWidth(compBean),this.setupMovingCss(compBean),this.setupMenuClass(compBean),this.setupSortableClass(compBean),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:eHeaderCompWrapper,checkMeasuringCallback:__name(checkMeasuring=>this.setRefreshFunction("measuring",checkMeasuring),"checkMeasuringCallback"),compBean}),this.addColumnHoverListener(compBean),this.setupFilterClass(compBean),this.setupClassesFromColDef(),this.setupTooltip(compBean),this.addActiveHeaderMouseListeners(compBean),this.setupSelectAll(compBean),this.setupUserComp(compBean),this.refreshAria(),this.resizeFeature=compBean.createManagedBean(new ResizeFeature(this.getPinned(),this.column,eResize,comp,this)),compBean.createManagedBean(new HoverFeature([this.column],eGui)),compBean.createManagedBean(new SetLeftFeature(this.column,eGui,this.beans)),compBean.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:__name(e=>this.shouldStopEventPropagation(e),"shouldStopEventPropagation"),onTabKeyDown:__name(()=>null,"onTabKeyDown"),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(compBean),compBean.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(compBean)),compBean.addManagedListeners(this.column,{colDefChanged:__name(()=>this.refresh(compBean),"colDefChanged")}),compBean.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const listener=__name(()=>this.checkDisplayName(compBean),"listener");compBean.addManagedEventListeners({columnValueChanged:listener,columnRowGroupChanged:listener,columnPivotChanged:listener,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),compBean.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(delta,shiftKey){if(!this.column.isResizable())return;const actualWidth=this.column.getActualWidth(),minWidth=this.column.getMinWidth(),maxWidth=this.column.getMaxWidth(),newWidth=Math.min(Math.max(actualWidth+delta,minWidth),maxWidth);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth}],shiftKey,!0,"uiColumnResized")}moveHeader(hDirection){const{eGui,beans,column,ctrlsService}=this,{gos,columnModel,columnMoveService,visibleColsService}=beans,pinned=this.getPinned(),left=eGui.getBoundingClientRect().left,width=column.getActualWidth(),isRtl=gos.get("enableRtl"),xPosition=normaliseX({x:hDirection===0!==isRtl?left-20:left+width+20,pinned,fromKeyboard:!0,gos,ctrlsService}),headerPosition=this.focusService.getFocusedHeader();attemptMoveColumns({allMovingColumns:[column],isFromHeader:!0,fromLeft:hDirection===1,xPosition,pinned,fromEnter:!1,fakeEvent:!1,gos,columnModel,columnMoveService,visibleColsService,finished:!0}),ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(column,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&headerPosition&&this.restoreFocus(headerPosition)}restoreFocus(previousPosition){this.focusService.focusHeaderPosition({headerPosition:{...previousPosition,column:this.column}})}setupUserComp(compBean){const compDetails=this.lookupUserCompDetails(compBean);this.setCompDetails(compDetails)}setCompDetails(compDetails){this.userCompDetails=compDetails,this.comp.setUserCompDetails(compDetails)}lookupUserCompDetails(compBean){const params=this.createParams(compBean),colDef=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(colDef,params)}createParams(compBean){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:__name(buttonElement=>{this.menuService.showColumnMenu({column:this.column,buttonElement,positionBy:"button"})},"showColumnMenu"),showColumnMenuAfterMouseClick:__name(mouseEvent=>{this.menuService.showColumnMenu({column:this.column,mouseEvent,positionBy:"mouse"})},"showColumnMenuAfterMouseClick"),showFilter:__name(buttonElement=>{this.menuService.showFilterMenu({column:this.column,buttonElement,containerType:"columnFilter",positionBy:"button"})},"showFilter"),progressSort:__name(multiSort=>{this.beans.sortController.progressSort(this.column,!!multiSort,"uiColumnSorted")},"progressSort"),setSort:__name((sort,multiSort)=>{this.beans.sortController.setSortForColumn(this.column,sort,!!multiSort,"uiColumnSorted")},"setSort"),eGridHeader:this.getGui(),setTooltip:__name((value,shouldDisplayTooltip)=>{this.setupTooltip(compBean,value,shouldDisplayTooltip)},"setTooltip")})}setupSelectAll(compBean){this.selectAllFeature=compBean.createManagedBean(new SelectAllFeature(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===KeyCode.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===KeyCode.ENTER&&this.onEnterKeyDown(e),e.key===KeyCode.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const multiSort=e.shiftKey;this.beans.sortController.progressSort(this.column,multiSort,"uiColumnSorted")}}showMenuOnKeyPress(e,isFilterShortcut){const headerComp=this.comp.getUserCompInstance();!headerComp||!(headerComp instanceof HeaderComp)||headerComp.onMenuKeyboardShortcut(isFilterShortcut)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const rowIndex=this.getRowIndex();this.focusService.setFocusedHeader(rowIndex,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(compBean,value,shouldDisplayTooltip){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const isTooltipWhenTruncated=this.gos.get("tooltipShowMode")==="whenTruncated",eGui=this.eGui,colDef=this.column.getColDef();!shouldDisplayTooltip&&isTooltipWhenTruncated&&!colDef.headerComponent&&(shouldDisplayTooltip=__name(()=>{const textEl=eGui.querySelector(".ag-header-cell-text");return textEl?textEl.scrollWidth>textEl.clientWidth:!0},"shouldDisplayTooltip"));const tooltipCtrl={getColumn:__name(()=>this.column,"getColumn"),getColDef:__name(()=>this.column.getColDef(),"getColDef"),getGui:__name(()=>eGui,"getGui"),getLocation:__name(()=>"header","getLocation"),getTooltipValue:__name(()=>value??this.column.getColDef().headerTooltip,"getTooltipValue"),shouldDisplayTooltip},tooltipFeature=compBean.createManagedBean(new TooltipFeature(tooltipCtrl));this.setRefreshFunction("tooltip",()=>tooltipFeature.refreshToolTip())}setupClassesFromColDef(){const refreshHeaderClasses=__name(()=>{const colDef=this.column.getColDef(),classes=_getHeaderClassesFromColDef(colDef,this.gos,this.column,null),oldClasses=this.userHeaderClasses;this.userHeaderClasses=new Set(classes),classes.forEach(c=>{oldClasses.has(c)?oldClasses.delete(c):this.comp.addOrRemoveCssClass(c,!0)}),oldClasses.forEach(c=>this.comp.addOrRemoveCssClass(c,!1))},"refreshHeaderClasses");this.setRefreshFunction("headerClasses",refreshHeaderClasses),refreshHeaderClasses()}setDragSource(eSource){if(this.dragSourceElement=eSource,this.removeDragSource(),!eSource||!this.draggable)return;const{column,beans,displayName,dragAndDropService,gos}=this,{columnModel}=beans;let hideColumnOnExit=!this.gos.get("suppressDragLeaveHidesColumns");const dragSource=this.dragSource={type:1,eElement:eSource,getDefaultIconName:__name(()=>hideColumnOnExit?"hide":"notAllowed","getDefaultIconName"),getDragItem:__name(()=>this.createDragItem(column),"getDragItem"),dragItemName:displayName,onDragStarted:__name(()=>{hideColumnOnExit=!gos.get("suppressDragLeaveHidesColumns"),setColumnsMoving([column],!0)},"onDragStarted"),onDragStopped:__name(()=>setColumnsMoving([column],!1),"onDragStopped"),onDragCancelled:__name(()=>setColumnsMoving([column],!1),"onDragCancelled"),onGridEnter:__name(dragItem=>{var _a253;if(hideColumnOnExit){const unlockedColumns=((_a253=dragItem==null?void 0:dragItem.columns)==null?void 0:_a253.filter(col=>!col.getColDef().lockVisible))||[];columnModel.setColsVisible(unlockedColumns,!0,"uiColumnMoved")}},"onGridEnter"),onGridExit:__name(dragItem=>{var _a253;if(hideColumnOnExit){const unlockedColumns=((_a253=dragItem==null?void 0:dragItem.columns)==null?void 0:_a253.filter(col=>!col.getColDef().lockVisible))||[];columnModel.setColsVisible(unlockedColumns,!1,"uiColumnMoved")}},"onGridExit")};dragAndDropService.addDragSource(dragSource,!0)}createDragItem(column){const visibleState={};return visibleState[column.getId()]=column.isVisible(),{columns:[column],visibleState}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(name,func){this.refreshFunctions[name]=func}refresh(compBean){this.updateState(),this.refreshHeaderComp(compBean),this.refreshAria(),Object.values(this.refreshFunctions).forEach(f=>f())}refreshHeaderComp(compBean){const newCompDetails=this.lookupUserCompDetails(compBean);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==newCompDetails.componentClass?this.attemptHeaderCompRefresh(newCompDetails.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(newCompDetails)}attemptHeaderCompRefresh(params){const headerComp=this.comp.getUserCompInstance();return!headerComp||!headerComp.refresh?!1:headerComp.refresh(params)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(compBean){this.displayName!==this.calculateDisplayName()&&this.refresh(compBean)}workOutDraggable(){const colDef=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!colDef.suppressMovable&&!colDef.lockPosition)||!!colDef.enableRowGroup||!!colDef.enablePivot}setupWidth(compBean){const listener=__name(()=>{const columnWidth=this.column.getActualWidth();this.comp.setWidth(`${columnWidth}px`)},"listener");compBean.addManagedListeners(this.column,{widthChanged:listener}),listener()}setupMovingCss(compBean){const listener=__name(()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())},"listener");compBean.addManagedListeners(this.column,{movingChanged:listener}),listener()}setupMenuClass(compBean){const listener=__name(()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())},"listener");compBean.addManagedListeners(this.column,{menuVisibleChanged:listener}),listener()}setupSortableClass(compBean){const updateSortableCssClass=__name(()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)},"updateSortableCssClass");updateSortableCssClass(),this.setRefreshFunction("updateSortable",updateSortableCssClass),compBean.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(compBean){const listener=__name(()=>{const isFilterActive=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",isFilterActive),this.refreshAria()},"listener");compBean.addManagedListeners(this.column,{filterActiveChanged:listener}),listener()}setupWrapTextClass(){const listener=__name(()=>{const wrapText=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",wrapText)},"listener");listener(),this.setRefreshFunction("wrapText",listener)}onHeaderHighlightChanged(){const highlighted=this.column.getHighlighted(),beforeOn=highlighted===0,afterOn=highlighted===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",beforeOn),this.comp.addOrRemoveCssClass("ag-header-highlight-after",afterOn)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui,column,comp,beans}=this;if(!column.isSpanHeaderHeight()){eGui.style.removeProperty("top"),eGui.style.removeProperty("height"),comp.addOrRemoveCssClass("ag-header-span-height",!1),comp.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents,isSpanningTotal}=this.column.getColumnGroupPaddingInfo();comp.addOrRemoveCssClass("ag-header-span-height",numberOfParents>0);const{columnModel}=beans,headerHeight=columnModel.getColumnHeaderRowHeight();if(numberOfParents===0){comp.addOrRemoveCssClass("ag-header-span-total",!1),eGui.style.setProperty("top","0px"),eGui.style.setProperty("height",`${headerHeight}px`);return}comp.addOrRemoveCssClass("ag-header-span-total",isSpanningTotal);const groupHeaderHeight=this.beans.columnModel.getGroupRowsHeight();let extraHeight=0;for(let i=0;i<numberOfParents;i++)extraHeight+=groupHeaderHeight[groupHeaderHeight.length-1-i];eGui.style.setProperty("top",`${-extraHeight}px`),eGui.style.setProperty("height",`${headerHeight+extraHeight}px`)}refreshAriaSort(){if(this.sortable){const translate=this.localeService.getLocaleTextFunc(),sort=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(_getAriaSortState(sort)),this.setAriaDescriptionProperty("sort",translate("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const translate=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",translate("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const translate=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",translate("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const translate=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",translate("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(property,value){value!=null?this.ariaDescriptionProperties.set(property,value):this.ariaDescriptionProperties.delete(property)}announceAriaDescription(){if(!this.eGui.contains(_getActiveDomElement(this.beans.gos)))return;const ariaDescription=Array.from(this.ariaDescriptionProperties.keys()).sort((a,b)=>a==="filter"?-1:b.charCodeAt(0)-a.charCodeAt(0)).map(key=>this.ariaDescriptionProperties.get(key)).join(". ");this.beans.ariaAnnouncementService.announceValue(ariaDescription,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(compBean){const listener=__name(()=>{if(!this.gos.get("columnHoverHighlight"))return;const isHovered=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",isHovered)},"listener");compBean.addManagedEventListeners({columnHoverChanged:listener}),listener()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(compBean){const listener=__name(e=>this.handleMouseOverChange(e.type==="mouseenter"),"listener"),clickListener=__name(()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),"clickListener"),contextMenuListener=__name(event=>this.handleContextMenuMouseEvent(event,void 0,this.column),"contextMenuListener");compBean.addManagedListeners(this.getGui(),{mouseenter:listener,mouseleave:listener,click:clickListener,contextmenu:contextMenuListener})}handleMouseOverChange(isMouseOver){this.setActiveHeader(isMouseOver),this.eventService.dispatchEvent({type:isMouseOver?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(active){this.comp.addOrRemoveCssClass("ag-header-active",active)}getAnchorElementForMenu(isFilter){const headerComp=this.comp.getUserCompInstance();return headerComp instanceof HeaderComp?headerComp.getAnchorElementForMenu(isFilter):this.getGui()}destroy(){super.destroy()}},__name(_a108,"HeaderCellCtrl"),_a108),_a109,GroupResizeFeature=(_a109=class extends BeanStub{wireBeans(beans){this.horizontalResizeService=beans.horizontalResizeService,this.autoWidthCalculator=beans.autoWidthCalculator,this.visibleColsService=beans.visibleColsService,this.columnSizeService=beans.columnSizeService,this.columnAutosizeService=beans.columnAutosizeService}constructor(comp,eResize,pinned,columnGroup){super(),this.eResize=eResize,this.comp=comp,this.pinned=pinned,this.columnGroup=columnGroup}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const finishedWithResizeFunc=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(finishedWithResizeFunc),!this.gos.get("suppressAutoSize")){const skipHeaderOnAutoSize=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const keys=[];this.columnGroup.getDisplayedLeafColumns().forEach(column=>{column.getColDef().suppressAutoSize||keys.push(column.getColId())}),keys.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:keys,skipHeader:skipHeaderOnAutoSize,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(shiftKey){const initialValues=this.getInitialValues(shiftKey);this.storeLocalValues(initialValues),this.toggleColumnResizing(!0)}onResizing(finished,resizeAmount,source="uiColumnResized"){const resizeAmountNormalised=this.normaliseDragChange(resizeAmount),width=this.resizeStartWidth+resizeAmountNormalised;this.resizeColumnsFromLocalValues(width,source,finished)}getInitialValues(shiftKey){const columnsToResize=this.getColumnsToResize(),resizeStartWidth=this.getInitialSizeOfColumns(columnsToResize),resizeRatios=this.getSizeRatiosOfColumns(columnsToResize,resizeStartWidth),columnSizeAndRatios={columnsToResize,resizeStartWidth,resizeRatios};let groupAfter=null;if(shiftKey&&(groupAfter=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),groupAfter){const takeFromLeafCols=groupAfter.getDisplayedLeafColumns(),groupAfterColumns=columnSizeAndRatios.groupAfterColumns=takeFromLeafCols.filter(col=>col.isResizable()),groupAfterStartWidth=columnSizeAndRatios.groupAfterStartWidth=this.getInitialSizeOfColumns(groupAfterColumns);columnSizeAndRatios.groupAfterRatios=this.getSizeRatiosOfColumns(groupAfterColumns,groupAfterStartWidth)}else columnSizeAndRatios.groupAfterColumns=void 0,columnSizeAndRatios.groupAfterStartWidth=void 0,columnSizeAndRatios.groupAfterRatios=void 0;return columnSizeAndRatios}storeLocalValues(initialValues){const{columnsToResize,resizeStartWidth,resizeRatios,groupAfterColumns,groupAfterStartWidth,groupAfterRatios}=initialValues;this.resizeCols=columnsToResize,this.resizeStartWidth=resizeStartWidth,this.resizeRatios=resizeRatios,this.resizeTakeFromCols=groupAfterColumns,this.resizeTakeFromStartWidth=groupAfterStartWidth,this.resizeTakeFromRatios=groupAfterRatios}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(source){const preferredSize=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),initialValues=this.getInitialValues();preferredSize>initialValues.resizeStartWidth&&this.resizeColumns(initialValues,preferredSize,source,!0)}resizeColumnsFromLocalValues(totalWidth,source,finished=!0){if(!this.resizeCols||!this.resizeRatios)return;const initialValues={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(initialValues,totalWidth,source,finished)}resizeColumns(initialValues,totalWidth,source,finished=!0){const{columnsToResize,resizeStartWidth,resizeRatios,groupAfterColumns,groupAfterStartWidth,groupAfterRatios}=initialValues,resizeSets=[];if(resizeSets.push({columns:columnsToResize,ratios:resizeRatios,width:totalWidth}),groupAfterColumns){const diff=totalWidth-resizeStartWidth;resizeSets.push({columns:groupAfterColumns,ratios:groupAfterRatios,width:groupAfterStartWidth-diff})}this.columnSizeService.resizeColumnSets({resizeSets,finished,source}),finished&&this.toggleColumnResizing(!1)}toggleColumnResizing(resizing){this.comp.addOrRemoveCssClass("ag-column-resizing",resizing)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(col=>col.isResizable())}getInitialSizeOfColumns(columns){return columns.reduce((totalWidth,column)=>totalWidth+column.getActualWidth(),0)}getSizeRatiosOfColumns(columns,initialSizeOfColumns){return columns.map(column=>column.getActualWidth()/initialSizeOfColumns)}normaliseDragChange(dragChange){let result=dragChange;return this.gos.get("enableRtl")?this.pinned!=="left"&&(result*=-1):this.pinned==="right"&&(result*=-1),result}destroy(){super.destroy(),this.clearLocalValues()}},__name(_a109,"GroupResizeFeature"),_a109),_a110,GroupWidthFeature=(_a110=class extends BeanStub{constructor(comp,columnGroup){super(),this.removeChildListenersFuncs=[],this.columnGroup=columnGroup,this.comp=comp}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const widthChangedListener=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(column=>{column.addEventListener("widthChanged",widthChangedListener),column.addEventListener("visibleChanged",widthChangedListener),this.removeChildListenersFuncs.push(()=>{column.removeEventListener("widthChanged",widthChangedListener),column.removeEventListener("visibleChanged",widthChangedListener)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(func=>func()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const columnWidth=this.columnGroup.getActualWidth();this.comp.setWidth(`${columnWidth}px`),this.comp.addOrRemoveCssClass("ag-hidden",columnWidth===0)}},__name(_a110,"GroupWidthFeature"),_a110),_a111,HeaderGroupCellCtrl=(_a111=class extends AbstractHeaderCellCtrl{constructor(columnGroup,beans,parentRowCtrl){super(columnGroup,beans,parentRowCtrl),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const eGui=this.getGui();this.setDragSource(eGui)}},this.column=columnGroup}setComp(comp,eGui,eResize,eHeaderCompWrapper,compBean){this.comp=comp,compBean=setupCompBean(this,this.beans.context,compBean),this.setGui(eGui,compBean),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(compBean),this.setupExpandable(compBean),this.setupTooltip(compBean),this.setupAutoHeight({wrapperElement:eHeaderCompWrapper,compBean}),this.setupUserComp(compBean),this.addHeaderMouseListeners(compBean);const pinned=this.getParentRowCtrl().getPinned(),leafCols=this.column.getProvidedColumnGroup().getLeafColumns();compBean.createManagedBean(new HoverFeature(leafCols,eGui)),compBean.createManagedBean(new SetLeftFeature(this.column,eGui,this.beans)),compBean.createManagedBean(new GroupWidthFeature(comp,this.column)),this.resizeFeature=compBean.createManagedBean(new GroupResizeFeature(comp,eResize,pinned,this.column)),compBean.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:__name(()=>{},"onTabKeyDown"),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(compBean,leafCols),compBean.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(compBean),compBean.addDestroyFunc(()=>this.clearComponent())}addHighlightListeners(compBean,columns){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const column of columns)compBean.addManagedListeners(column,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,column)})}onLeafColumnHighlightChanged(column){const displayedColumns=this.column.getDisplayedLeafColumns(),isFirst=displayedColumns[0]===column,isLast=_last(displayedColumns)===column;if(!isFirst&&!isLast)return;const highlighted=column.getHighlighted(),isColumnMoveAtThisLevel=!!this.getParentRowCtrl().findHeaderCellCtrl(ctrl=>ctrl.getColumnGroupChild().isMoving());let beforeOn=!1,afterOn=!1;if(isColumnMoveAtThisLevel){const isRtl=this.beans.gos.get("enableRtl"),isHighlightAfter=highlighted===1,isHighlightBefore=highlighted===0;isFirst&&(isRtl?afterOn=isHighlightAfter:beforeOn=isHighlightBefore),isLast&&(isRtl?beforeOn=isHighlightBefore:afterOn=isHighlightAfter)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",beforeOn),this.comp.addOrRemoveCssClass("ag-header-highlight-after",afterOn)}getColumn(){return this.column}resizeHeader(delta,shiftKey){if(!this.resizeFeature)return;const initialValues=this.resizeFeature.getInitialValues(shiftKey);this.resizeFeature.resizeColumns(initialValues,initialValues.resizeStartWidth+delta,"uiColumnResized",!0)}moveHeader(hDirection){const{beans,eGui,column,ctrlsService}=this,{gos,columnModel,columnMoveService,visibleColsService}=beans,isRtl=gos.get("enableRtl"),isLeft=hDirection===0,pinned=this.getPinned(),rect=eGui.getBoundingClientRect(),left=rect.left,width=rect.width,xPosition=normaliseX({x:isLeft!==isRtl?left-20:left+width+20,pinned,fromKeyboard:!0,gos,ctrlsService}),id=column.getGroupId(),headerPosition=this.focusService.getFocusedHeader();attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:hDirection===1,xPosition,pinned,fromEnter:!1,fakeEvent:!1,gos,columnModel,columnMoveService,visibleColsService,finished:!0});const displayedLeafColumns=column.getDisplayedLeafColumns(),targetColumn=isLeft?displayedLeafColumns[0]:_last(displayedLeafColumns);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(targetColumn,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&headerPosition&&this.restoreFocus(id,column,headerPosition)}restoreFocus(groupId,previousColumnGroup,previousPosition){const leafCols=previousColumnGroup.getLeafColumns();if(!leafCols.length)return;const parent=leafCols[0].getParent();if(!parent)return;const newColumnGroup=this.findGroupWidthId(parent,groupId);newColumnGroup&&this.focusService.focusHeaderPosition({headerPosition:{...previousPosition,column:newColumnGroup}})}findGroupWidthId(columnGroup,id){for(;columnGroup;){if(columnGroup.getGroupId()===id)return columnGroup;columnGroup=columnGroup.getParent()}return null}resizeLeafColumnsToFit(source){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(source)}setupUserComp(compBean){const params=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:__name(expanded=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),expanded,"gridInitializing")},"setExpanded"),setTooltip:__name((value,shouldDisplayTooltip)=>{this.setupTooltip(compBean,value,shouldDisplayTooltip)},"setTooltip")}),compDetails=this.userComponentFactory.getHeaderGroupCompDetails(params);this.comp.setUserCompDetails(compDetails)}addHeaderMouseListeners(compBean){const listener=__name(e=>this.handleMouseOverChange(e.type==="mouseenter"),"listener"),clickListener=__name(()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),"clickListener"),contextMenuListener=__name(event=>this.handleContextMenuMouseEvent(event,void 0,this.column.getProvidedColumnGroup()),"contextMenuListener");compBean.addManagedListeners(this.getGui(),{mouseenter:listener,mouseleave:listener,click:clickListener,contextmenu:contextMenuListener})}handleMouseOverChange(isMouseOver){this.eventService.dispatchEvent({type:isMouseOver?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(compBean,value,shouldDisplayTooltip){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const colGroupDef=this.column.getColGroupDef(),isTooltipWhenTruncated=this.gos.get("tooltipShowMode")==="whenTruncated",eGui=this.eGui;!shouldDisplayTooltip&&isTooltipWhenTruncated&&!(colGroupDef!=null&&colGroupDef.headerGroupComponent)&&(shouldDisplayTooltip=__name(()=>{const textEl=eGui.querySelector(".ag-header-group-text");return textEl?textEl.scrollWidth>textEl.clientWidth:!0},"shouldDisplayTooltip"));const tooltipCtrl={getColumn:__name(()=>this.column,"getColumn"),getGui:__name(()=>eGui,"getGui"),getLocation:__name(()=>"headerGroup","getLocation"),getTooltipValue:__name(()=>value??(colGroupDef&&colGroupDef.headerTooltip),"getTooltipValue"),shouldDisplayTooltip};colGroupDef&&(tooltipCtrl.getColDef=()=>colGroupDef),compBean.createManagedBean(new TooltipFeature(tooltipCtrl))}setupExpandable(compBean){const providedColGroup=this.column.getProvidedColumnGroup();this.refreshExpanded();const listener=this.refreshExpanded.bind(this);compBean.addManagedListeners(providedColGroup,{expandedChanged:listener,expandableChanged:listener})}refreshExpanded(){const{column}=this;this.expandable=column.isExpandable();const expanded=column.isExpanded();this.expandable?this.comp.setAriaExpanded(expanded?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const colGroupDef=this.column.getColGroupDef(),classes=_getHeaderClassesFromColDef(colGroupDef,this.gos,null,this.column);this.column.isPadding()?(classes.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(col=>col.isSpanHeaderHeight())&&classes.push("ag-header-span-height")):(classes.push("ag-header-group-cell-with-group"),colGroupDef!=null&&colGroupDef.wrapHeaderText&&classes.push("ag-header-cell-wrap-text")),classes.forEach(c=>this.comp.addOrRemoveCssClass(c,!0))}setupMovingCss(compBean){const leafColumns=this.column.getProvidedColumnGroup().getLeafColumns(),listener=__name(()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving()),"listener");leafColumns.forEach(col=>{compBean.addManagedListeners(col,{movingChanged:listener})}),listener()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const rowIndex=this.getRowIndex();this.beans.focusService.setFocusedHeader(rowIndex,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const wrapperHasFocus=this.getWrapperHasFocus();if(!(!this.expandable||!wrapperHasFocus)&&e.key===KeyCode.ENTER){const column=this.column,newExpandedValue=!column.isExpanded();this.beans.columnModel.setColumnGroupOpened(column.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")}}setDragSource(eHeaderGroup){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!eHeaderGroup))return;const{beans,column,displayName,gos,dragAndDropService}=this,{columnModel}=beans,allLeafColumns=column.getProvidedColumnGroup().getLeafColumns();let hideColumnOnExit=!gos.get("suppressDragLeaveHidesColumns");const dragSource=this.dragSource={type:1,eElement:eHeaderGroup,getDefaultIconName:__name(()=>hideColumnOnExit?"hide":"notAllowed","getDefaultIconName"),dragItemName:displayName,getDragItem:__name(()=>this.getDragItemForGroup(column),"getDragItem"),onDragStarted:__name(()=>{hideColumnOnExit=!gos.get("suppressDragLeaveHidesColumns"),setColumnsMoving(allLeafColumns,!0)},"onDragStarted"),onDragStopped:__name(()=>setColumnsMoving(allLeafColumns,!1),"onDragStopped"),onDragCancelled:__name(()=>setColumnsMoving(allLeafColumns,!1),"onDragCancelled"),onGridEnter:__name(dragItem=>{if(hideColumnOnExit){const{columns=[],visibleState}=dragItem??{},unlockedColumns=columns.filter(col=>!col.getColDef().lockVisible&&(!visibleState||visibleState[col.getColId()]));columnModel.setColsVisible(unlockedColumns,!0,"uiColumnMoved")}},"onGridEnter"),onGridExit:__name(dragItem=>{var _a253;if(hideColumnOnExit){const unlockedColumns=((_a253=dragItem==null?void 0:dragItem.columns)==null?void 0:_a253.filter(col=>!col.getColDef().lockVisible))||[];columnModel.setColsVisible(unlockedColumns,!1,"uiColumnMoved")}},"onGridExit")};dragAndDropService.addDragSource(dragSource,!0)}getDragItemForGroup(columnGroup){const allColumnsOriginalOrder=columnGroup.getProvidedColumnGroup().getLeafColumns(),visibleState={};allColumnsOriginalOrder.forEach(column=>visibleState[column.getId()]=column.isVisible());const allColumnsCurrentOrder=[];this.beans.visibleColsService.getAllCols().forEach(column=>{allColumnsOriginalOrder.indexOf(column)>=0&&(allColumnsCurrentOrder.push(column),_removeFromArray(allColumnsOriginalOrder,column))}),allColumnsOriginalOrder.forEach(column=>allColumnsCurrentOrder.push(column));const columnsInSplit=[],columnGroupColumns=columnGroup.getLeafColumns();for(const col of allColumnsCurrentOrder)columnGroupColumns.indexOf(col)!==-1&&columnsInSplit.push(col);return{columns:allColumnsCurrentOrder,columnsInSplit,visibleState}}isSuppressMoving(){let childSuppressesMoving=!1;return this.column.getLeafColumns().forEach(column=>{(column.getColDef().suppressMovable||column.getColDef().lockPosition)&&(childSuppressesMoving=!0)}),childSuppressesMoving||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},__name(_a111,"HeaderGroupCellCtrl"),_a111),instanceIdSequence3=0,_a112,HeaderRowCtrl=(_a112=class extends BeanStub{constructor(rowIndex,pinned,type){super(),this.instanceId=instanceIdSequence3++,this.rowIndex=rowIndex,this.pinned=pinned,this.type=type;const typeClass=type=="group"?"ag-header-row-column-group":type=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${typeClass}`}wireBeans(beans){this.beans=beans}postConstruct(){this.isPrintLayout=_isDomLayout(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(ctrl=>ctrl.getGui()!=null):!1}setComp(comp,compBean,initCompState=!0){this.comp=comp,compBean=setupCompBean(this,this.beans.context,compBean),initCompState&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(compBean)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(compBean){const onHeightChanged=this.onRowHeightChanged.bind(this);compBean.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:__name(params=>this.onVirtualColumnsChanged(params.afterScroll),"virtualColumnsChanged"),columnGroupHeaderHeightChanged:onHeightChanged,columnHeaderHeightChanged:onHeightChanged,gridStylesChanged:onHeightChanged,advancedFilterEnabledChanged:onHeightChanged}),compBean.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),compBean.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),compBean.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],onHeightChanged)}getHeaderCellCtrl(column){if(this.headerCellCtrls)return _values(this.headerCellCtrls).find(cellCtrl=>cellCtrl.getColumnGroupChild()===column)}onDisplayedColumnsChanged(){this.isPrintLayout=_isDomLayout(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const width=this.getWidthForRow();this.comp.setWidth(`${width}px`)}getWidthForRow(){const{visibleColsService:presentedColsService}=this.beans;return this.isPrintLayout?this.pinned!=null?0:presentedColsService.getContainerWidth("right")+presentedColsService.getContainerWidth("left")+presentedColsService.getContainerWidth(null):presentedColsService.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset,rowHeight}=this.getTopAndHeight();this.comp.setTop(topOffset+"px"),this.comp.setHeight(rowHeight+"px")}getTopAndHeight(){const{columnModel,filterManager}=this.beans,sizes=[],groupHeadersHeight=columnModel.getGroupRowsHeight(),headerHeight=columnModel.getColumnHeaderRowHeight();sizes.push(...groupHeadersHeight),sizes.push(headerHeight),filterManager!=null&&filterManager.hasFloatingFilters()&&sizes.push(columnModel.getFloatingFiltersHeight());let topOffset=0;for(let i=0;i<this.rowIndex;i++)topOffset+=sizes[i];const rowHeight=sizes[this.rowIndex];return{topOffset,rowHeight}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(afterScroll=!1){const ctrlsToDisplay=this.getHeaderCtrls(),forceOrder=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(ctrlsToDisplay,forceOrder,afterScroll)}getHeaderCtrls(){const oldCtrls=this.headerCellCtrls;this.headerCellCtrls=new Map;const columns=this.getColumnsInViewport();for(const child of columns)this.recycleAndCreateHeaderCtrls(child,oldCtrls);const isFocusedAndDisplayed=__name(ctrl=>{const{focusService,visibleColsService}=this.beans;return focusService.isHeaderWrapperFocused(ctrl)?visibleColsService.isVisible(ctrl.getColumnGroupChild()):!1},"isFocusedAndDisplayed");if(oldCtrls)for(const[id,oldCtrl]of oldCtrls)isFocusedAndDisplayed(oldCtrl)?this.headerCellCtrls.set(id,oldCtrl):this.destroyBean(oldCtrl);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){var _a253;return Array.from(((_a253=this.headerCellCtrls)==null?void 0:_a253.values())??[])}recycleAndCreateHeaderCtrls(headerColumn,oldCtrls){if(!this.headerCellCtrls||headerColumn.isEmptyGroup())return;const idOfChild=headerColumn.getUniqueId();let headerCtrl;if(oldCtrls&&(headerCtrl=oldCtrls.get(idOfChild),oldCtrls.delete(idOfChild)),headerCtrl&&headerCtrl.getColumnGroupChild()!=headerColumn&&(this.destroyBean(headerCtrl),headerCtrl=void 0),headerCtrl==null)switch(this.type){case"filter":{headerCtrl=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",headerColumn,this.beans,this));break}case"group":headerCtrl=this.createBean(new HeaderGroupCellCtrl(headerColumn,this.beans,this));break;default:headerCtrl=this.createBean(new HeaderCellCtrl(headerColumn,this.beans,this));break}this.headerCellCtrls.set(idOfChild,headerCtrl)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let viewportColumns=[];const actualDepth=this.getActualDepth(),{columnViewportService}=this.beans;return["left",null,"right"].forEach(pinned=>{const items=columnViewportService.getHeadersToRender(pinned,actualDepth);viewportColumns=viewportColumns.concat(items)}),viewportColumns}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(column){if(!this.headerCellCtrls)return;const allCtrls=this.getHeaderCellCtrls();let ctrl;return typeof column=="function"?ctrl=allCtrls.find(column):ctrl=allCtrls.find(ctrl2=>ctrl2.getColumnGroupChild()==column),ctrl}focusHeader(column,event){const ctrl=this.findHeaderCellCtrl(column);return ctrl?ctrl.focus(event):!1}destroy(){var _a253;(_a253=this.headerCellCtrls)==null||_a253.forEach(ctrl=>{this.destroyBean(ctrl)}),this.headerCellCtrls=void 0,super.destroy()}},__name(_a112,"HeaderRowCtrl"),_a112),_a113,HeaderRowContainerCtrl=(_a113=class extends BeanStub{constructor(pinned){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=pinned}wireBeans(beans){this.ctrlsService=beans.ctrlsService,this.scrollVisibleService=beans.scrollVisibleService,this.pinnedWidthService=beans.pinnedWidthService,this.columnModel=beans.columnModel,this.focusService=beans.focusService,this.filterManager=beans.filterManager}setComp(comp,eGui){this.comp=comp,this.eViewport=eGui,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const onDisplayedColsChanged=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:onDisplayedColsChanged,advancedFilterEnabledChanged:onDisplayedColsChanged});const headerType=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(headerType,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const res=[...this.groupsRowCtrls];return this.columnsRowCtrl&&res.push(this.columnsRowCtrl),this.filtersRowCtrl&&res.push(this.filtersRowCtrl),res}refresh(keepColumns=!1){const sequence=new NumberSequence,focusedHeaderPosition=this.focusService.getFocusHeaderToUseAfterRefresh(),refreshColumnGroups=__name(()=>{const groupRowCount=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let i=0;i<groupRowCount;i++){const ctrl=this.createBean(new HeaderRowCtrl(sequence.next(),this.pinned,"group"));this.groupsRowCtrls.push(ctrl)}},"refreshColumnGroups"),refreshColumns=__name(()=>{const rowIndex=sequence.next(),needNewInstance=!this.hidden&&(this.columnsRowCtrl==null||!keepColumns||this.columnsRowCtrl.getRowIndex()!==rowIndex);(needNewInstance||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),needNewInstance&&(this.columnsRowCtrl=this.createBean(new HeaderRowCtrl(rowIndex,this.pinned,"column")))},"refreshColumns"),refreshFilters=__name(()=>{var _a253;this.includeFloatingFilter=!!((_a253=this.filterManager)!=null&&_a253.hasFloatingFilters())&&!this.hidden;const destroyPreviousComp=__name(()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)},"destroyPreviousComp");if(!this.includeFloatingFilter){destroyPreviousComp();return}const rowIndex=sequence.next();if(this.filtersRowCtrl){const rowIndexMismatch=this.filtersRowCtrl.getRowIndex()!==rowIndex;(!keepColumns||rowIndexMismatch)&&destroyPreviousComp()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new HeaderRowCtrl(rowIndex,this.pinned,"filter")))},"refreshFilters");refreshColumnGroups(),refreshColumns(),refreshFilters();const allCtrls=this.getAllCtrls();this.comp.setCtrls(allCtrls),this.restoreFocusOnHeader(focusedHeaderPosition)}getHeaderCtrlForColumn(column){var _a253;if(isColumn(column))return(_a253=this.columnsRowCtrl)==null?void 0:_a253.getHeaderCellCtrl(column);if(this.groupsRowCtrls.length!==0)for(let i=0;i<this.groupsRowCtrls.length;i++){const ctrl=this.groupsRowCtrls[i].getHeaderCellCtrl(column);if(ctrl)return ctrl}}getHtmlElementForColumnHeader(column){const cellCtrl=this.getHeaderCtrlForColumn(column);return cellCtrl?cellCtrl.getGui():null}getRowType(rowIndex){const ctrl=this.getAllCtrls()[rowIndex];return ctrl?ctrl.getType():void 0}focusHeader(rowIndex,column,event){const ctrl=this.getAllCtrls()[rowIndex];return ctrl?ctrl.focusHeader(column,event):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(index){return this.groupsRowCtrls[index]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(offset){this.comp.setViewportScrollLeft(offset)}onScrollCallback(fn){this.addManagedElementListeners(this.getViewportElement(),{scroll:fn})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(dropContainer){const bodyDropTarget=new BodyDropTarget(this.pinned,dropContainer);this.createManagedBean(bodyDropTarget)}restoreFocusOnHeader(position){if(!position)return;const{column}=position;column.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:position})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){var _a253;const includeFloatingFilter=((_a253=this.filterManager)==null?void 0:_a253.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==includeFloatingFilter&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new CenterWidthFeature(width=>this.comp.setCenterWidth(`${width}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;const pinningLeft=this.pinned==="left",pinningRight=this.pinned==="right";this.hidden=!0;const listener=__name(()=>{const width=pinningLeft?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(width==null)return;const hidden=width==0,hiddenChanged=this.hidden!==hidden,isRtl=this.gos.get("enableRtl"),scrollbarWidth=this.scrollVisibleService.getScrollbarWidth(),widthWithPadding=this.scrollVisibleService.isVerticalScrollShowing()&&(isRtl&&pinningLeft||!isRtl&&pinningRight)?width+scrollbarWidth:width;this.comp.setPinnedContainerWidth(`${widthWithPadding}px`),this.comp.setDisplayed(!hidden),hiddenChanged&&(this.hidden=hidden,this.refresh())},"listener");this.addManagedEventListeners({leftPinnedWidthChanged:listener,rightPinnedWidthChanged:listener,scrollVisibilityChanged:listener,scrollbarWidthChanged:listener})}},__name(_a113,"HeaderRowContainerCtrl"),_a113),_a114,LayoutFeature=(_a114=class extends BeanStub{constructor(view){super(),this.view=view}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const domLayout=this.getDomLayout(),params={autoHeight:domLayout==="autoHeight",normal:domLayout==="normal",print:domLayout==="print"},cssClass=params.autoHeight?"ag-layout-auto-height":params.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(cssClass,params)}getDomLayout(){const domLayout=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(domLayout)===-1?(_warnOnce(`${domLayout} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):domLayout}},__name(_a114,"LayoutFeature"),_a114),_a115,OverlayWrapperComponent=(_a115=class extends Component{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=RefPlaceholder,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(beans){this.overlayService=beans.overlayService,this.focusService=beans.focusService,this.visibleColsService=beans.visibleColsService}handleKeyDown(e){if(e.key!==KeyCode.TAB||e.defaultPrevented||_isStopPropagationForAgGrid(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let isFocused=!1;e.shiftKey?isFocused=this.focusService.focusGridView(_last(this.visibleColsService.getAllCols()),!0,!1):isFocused=this.focusService.focusNextGridCoreContainer(!1),isFocused&&e.preventDefault()}updateLayoutClasses(cssClass,params){const overlayWrapperClassList=this.eOverlayWrapper.classList;overlayWrapperClassList.toggle("ag-layout-auto-height",params.autoHeight),overlayWrapperClassList.toggle("ag-layout-normal",params.normal),overlayWrapperClassList.toggle("ag-layout-print",params.print)}postConstruct(){this.createManagedBean(new LayoutFeature(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(overlayWrapperCssClass){const overlayWrapperClassList=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&overlayWrapperClassList.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=overlayWrapperCssClass,overlayWrapperClassList.toggle(overlayWrapperCssClass,!0)}showOverlay(overlayComponentPromise,overlayWrapperCssClass,exclusive,gridOption){if(this.setWrapperTypeClass(overlayWrapperCssClass),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=overlayComponentPromise,!!overlayComponentPromise){if(this.setDisplayed(!0,{skipAriaHidden:!0}),exclusive&&this.focusService.isGridFocused()){const activeElement=_getActiveDomElement(this.gos);activeElement&&!_isNothingFocused(this.gos)&&(this.elToFocusAfter=activeElement)}overlayComponentPromise.then(comp=>{if(this.activePromise!==overlayComponentPromise){this.activeOverlay!==comp&&(this.destroyBean(comp),comp=null);return}if(this.activePromise=null,!comp)return;if(this.activeOverlay!==comp&&(this.eOverlayWrapper.appendChild(comp.getGui()),this.activeOverlay=comp,gridOption)){const component=comp;this.updateListenerDestroyFunc=this.addManagedPropertyListener(gridOption,({currentValue})=>{var _a253;(_a253=component.refresh)==null||_a253.call(component,this.gos.addGridCommonParams({...currentValue??{}}))})}const focusService=this.focusService;exclusive&&focusService.isGridFocused()&&focusService.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(padding){this.eOverlayWrapper.style.setProperty("padding-top",`${padding}px`)}destroyActiveOverlay(){var _a253;this.activePromise=null;const activeOverlay=this.activeOverlay;if(!activeOverlay)return;let elementToFocus=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,elementToFocus&&!this.focusService.isGridFocused()&&(elementToFocus=null);const updateListenerDestroyFunc=this.updateListenerDestroyFunc;updateListenerDestroyFunc&&(updateListenerDestroyFunc(),this.updateListenerDestroyFunc=null),this.destroyBean(activeOverlay),_clearElement(this.eOverlayWrapper),(_a253=elementToFocus==null?void 0:elementToFocus.focus)==null||_a253.call(elementToFocus,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},__name(_a115,"OverlayWrapperComponent"),_a115),_a116,AbstractFakeScrollComp=(_a116=class extends Component{constructor(template,direction){super(),this.direction=direction,this.eViewport=RefPlaceholder,this.eContainer=RefPlaceholder,this.hideTimeout=null,this.setTemplate(template)}wireBeans(beans){this.animationFrameService=beans.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",_isMacOsUserAgent()||_isIOSUserAgent())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=_isInvisibleScrollbar(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const eGui=this.getGui(),onActivate=__name(()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),"onActivate"),onDeactivate=__name(()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1),"onDeactivate");this.addManagedListeners(eGui,{mouseenter:onActivate,mousedown:onActivate,touchstart:onActivate,mouseleave:onDeactivate,touchend:onDeactivate})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:__name(params=>{params.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},"bodyScroll"),bodyScrollEnd:__name(()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)},"bodyScrollEnd")})}attemptSettingScrollPosition(value){const viewport=this.getViewportElement();_waitUntil(()=>_isVisible(viewport),()=>this.setScrollPosition(value),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(fn){this.addManagedElementListeners(this.getViewportElement(),{scroll:fn})}},__name(_a116,"AbstractFakeScrollComp"),_a116),_a117,FakeHScrollComp=(_a117=class extends AbstractFakeScrollComp{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=RefPlaceholder,this.eRightSpacer=RefPlaceholder}wireBeans(beans){super.wireBeans(beans),this.visibleColsService=beans.visibleColsService,this.pinnedRowModel=beans.pinnedRowModel,this.ctrlsService=beans.ctrlsService,this.scrollVisibleService=beans.scrollVisibleService}postConstruct(){super.postConstruct();const spacerWidthsListener=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:spacerWidthsListener,displayedColumnsWidthChanged:spacerWidthsListener,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",spacerWidthsListener),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new CenterWidthFeature(width=>this.eContainer.style.width=`${width}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const bottomPinnedHeight=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${bottomPinnedHeight}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const vScrollShowing=this.scrollVisibleService.isVerticalScrollShowing();let rightSpacing=this.visibleColsService.getDisplayedColumnsRightWidth();const scrollOnRight=!this.enableRtl&&vScrollShowing,scrollbarWidth=this.scrollVisibleService.getScrollbarWidth();scrollOnRight&&(rightSpacing+=scrollbarWidth),_setFixedWidth(this.eRightSpacer,rightSpacing),this.eRightSpacer.classList.toggle("ag-scroller-corner",rightSpacing<=scrollbarWidth);let leftSpacing=this.visibleColsService.getColsLeftWidth();this.enableRtl&&vScrollShowing&&(leftSpacing+=scrollbarWidth),_setFixedWidth(this.eLeftSpacer,leftSpacing),this.eLeftSpacer.classList.toggle("ag-scroller-corner",leftSpacing<=scrollbarWidth)}setScrollVisible(){const hScrollShowing=this.scrollVisibleService.isHorizontalScrollShowing(),invisibleScrollbar2=this.invisibleScrollbar,isSuppressHorizontalScroll=this.gos.get("suppressHorizontalScroll"),scrollbarWidth=hScrollShowing&&this.scrollVisibleService.getScrollbarWidth()||0,scrollContainerSize=isSuppressHorizontalScroll?0:scrollbarWidth===0&&invisibleScrollbar2?16:scrollbarWidth;this.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar2),_setFixedHeight(this.getGui(),scrollContainerSize),_setFixedHeight(this.eViewport,scrollContainerSize),_setFixedHeight(this.eContainer,scrollContainerSize),this.setDisplayed(hScrollShowing,{skipAriaHidden:!0})}getScrollPosition(){return _getScrollLeft(this.getViewportElement(),this.enableRtl)}setScrollPosition(value){_isVisible(this.getViewportElement())||this.attemptSettingScrollPosition(value),_setScrollLeft(this.getViewportElement(),value,this.enableRtl)}},__name(_a117,"FakeHScrollComp"),_a117),_a118,SetHeightFeature=(_a118=class extends BeanStub{wireBeans(beans){this.maxDivHeightScaler=beans.rowContainerHeightService}constructor(eContainer,eViewport){super(),this.eContainer=eContainer,this.eViewport=eViewport}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const height=this.maxDivHeightScaler.getUiContainerHeight(),heightString=height!=null?`${height}px`:"";this.eContainer.style.height=heightString,this.eViewport&&(this.eViewport.style.height=heightString)}},__name(_a118,"SetHeightFeature"),_a118),_a119,FakeVScrollComp=(_a119=class extends AbstractFakeScrollComp{wireBeans(beans){super.wireBeans(beans),this.ctrlsService=beans.ctrlsService,this.scrollVisibleService=beans.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new SetHeightFeature(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const vScrollShowing=this.scrollVisibleService.isVerticalScrollShowing(),invisibleScrollbar2=this.invisibleScrollbar,scrollbarWidth=vScrollShowing&&this.scrollVisibleService.getScrollbarWidth()||0,adjustedScrollbarWidth=scrollbarWidth===0&&invisibleScrollbar2?16:scrollbarWidth;this.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar2),_setFixedWidth(this.getGui(),adjustedScrollbarWidth),_setFixedWidth(this.eViewport,adjustedScrollbarWidth),_setFixedWidth(this.eContainer,adjustedScrollbarWidth),this.setDisplayed(vScrollShowing,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService}=this,gridBodyViewportEl=ctrlsService.getGridBodyCtrl().getBodyViewportElement(),eViewportScrollTop=this.getScrollPosition(),gridBodyViewportScrollTop=gridBodyViewportEl.scrollTop;eViewportScrollTop!=gridBodyViewportScrollTop&&this.setScrollPosition(gridBodyViewportScrollTop,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(value,force){!force&&!_isVisible(this.getViewportElement())&&this.attemptSettingScrollPosition(value),this.getViewportElement().scrollTop=value}},__name(_a119,"FakeVScrollComp"),_a119),HorizontalSources=(HorizontalSources2=>(HorizontalSources2.FakeHScrollbar="fakeHScrollComp",HorizontalSources2.Header="centerHeader",HorizontalSources2.PinnedTop="topCenter",HorizontalSources2.PinnedBottom="bottomCenter",HorizontalSources2.StickyTop="stickyTopCenter",HorizontalSources2.StickyBottom="stickyBottomCenter",HorizontalSources2))(HorizontalSources||{}),_a120,GridBodyScrollFeature=(_a120=class extends BeanStub{constructor(eBodyViewport){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=eBodyViewport,this.resetLastHScrollDebounced=_debounce(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=_debounce(()=>this.lastScrollSource[0]=null,500)}wireBeans(beans){this.ctrlsService=beans.ctrlsService,this.animationFrameService=beans.animationFrameService,this.paginationService=beans.paginationService,this.pageBoundsService=beans.pageBoundsService,this.rowModel=beans.rowModel,this.heightScaler=beans.rowContainerHeightService,this.rowRenderer=beans.rowRenderer,this.columnModel=beans.columnModel,this.visibleColsService=beans.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,p=>{this.centerRowsCtrl=p.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const source of Object.values(HorizontalSources)){const scrollPartner=this.ctrlsService.get(source);this.registerScrollPartner(scrollPartner,this.onHScroll.bind(this,source))}}addVerticalScrollListeners(){const fakeVScrollComp=this.ctrlsService.get("fakeVScrollComp"),isDebounce=this.gos.get("debounceVerticalScrollbar"),onVScroll=isDebounce?_debounce(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),onFakeVScroll=isDebounce?_debounce(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:onVScroll}),this.registerScrollPartner(fakeVScrollComp,onFakeVScroll)}registerScrollPartner(comp,callback){comp.onScrollCallback(callback)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(scrollLeft){this.centerRowsCtrl!=null&&(scrollLeft===void 0&&(scrollLeft=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(scrollLeft)))}setScrollLeftForAllContainersExceptCurrent(scrollLeft){for(const container of[...Object.values(HorizontalSources),"Viewport"]){if(this.lastScrollSource[1]===container)continue;const viewport=this.getViewportForSource(container);_setScrollLeft(viewport,scrollLeft,this.enableRtl)}}getViewportForSource(source){return source==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(source).getViewportElement()}isControllingScroll(source,direction){return this.lastScrollSource[direction]==null?(direction===0?this.lastScrollSource[0]=source:this.lastScrollSource[1]=source,!0):this.lastScrollSource[direction]===source}onHScroll(source){if(!this.isControllingScroll(source,1))return;const centerContainerViewport=this.centerRowsCtrl.getViewportElement(),{scrollLeft}=centerContainerViewport;if(this.shouldBlockScrollUpdate(1,scrollLeft,!0))return;const newScrollLeft=_getScrollLeft(this.getViewportForSource(source),this.enableRtl);this.doHorizontalScroll(Math.round(newScrollLeft)),this.resetLastHScrollDebounced()}onVScroll(source){if(!this.isControllingScroll(source,0))return;let scrollTop;source==="Viewport"?scrollTop=this.eBodyViewport.scrollTop:scrollTop=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,scrollTop,!0)&&(this.animationFrameService.setScrollTop(scrollTop),this.nextScrollTop=scrollTop,source==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(scrollTop):this.eBodyViewport.scrollTop=scrollTop,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(scrollLeft){const fakeScrollLeft=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===scrollLeft&&scrollLeft===fakeScrollLeft||(this.scrollLeft=scrollLeft,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(scrollLeft),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(direction){const bodyScrollEvent={type:"bodyScroll",direction:direction===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(bodyScrollEvent),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent({...bodyScrollEvent,type:"bodyScrollEnd"})},100)}shouldBlockScrollUpdate(direction,scrollTo,touchOnly=!1){return touchOnly&&!_isIOSUserAgent()?!1:direction===0?this.shouldBlockVerticalScroll(scrollTo):this.shouldBlockHorizontalScroll(scrollTo)}shouldBlockVerticalScroll(scrollTo){const clientHeight=_getInnerHeight(this.eBodyViewport),{scrollHeight}=this.eBodyViewport;return scrollTo<0||scrollTo+clientHeight>scrollHeight}shouldBlockHorizontalScroll(scrollTo){const clientWidth=this.centerRowsCtrl.getCenterWidth(),{scrollWidth}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&_isRtlNegativeScroll()){if(scrollTo>0)return!0}else if(scrollTo<0)return!0;return Math.abs(scrollTo)+clientWidth>scrollWidth}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const frameNeeded=this.scrollTop!=this.nextScrollTop;return frameNeeded&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),frameNeeded}setHorizontalScrollPosition(hScrollPosition,fromAlignedGridsService=!1){const maxScrollLeft=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!fromAlignedGridsService&&this.shouldBlockScrollUpdate(1,hScrollPosition)&&(this.enableRtl&&_isRtlNegativeScroll()?hScrollPosition=hScrollPosition>0?0:maxScrollLeft:hScrollPosition=Math.min(Math.max(hScrollPosition,0),maxScrollLeft)),_setScrollLeft(this.centerRowsCtrl.getViewportElement(),Math.abs(hScrollPosition),this.enableRtl),this.doHorizontalScroll(hScrollPosition)}setVerticalScrollPosition(vScrollPosition){this.eBodyViewport.scrollTop=vScrollPosition}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(pixels){const oldScrollPosition=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(oldScrollPosition+pixels),this.centerRowsCtrl.getViewportElement().scrollLeft-oldScrollPosition}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(comparator,position=null){const rowCount=this.rowModel.getRowCount();let indexToSelect=-1;for(let i=0;i<rowCount;i++){const node=this.rowModel.getRow(i);if(typeof comparator=="function"){if(node&&comparator(node)){indexToSelect=i;break}}else if(comparator===node||comparator===node.data){indexToSelect=i;break}}indexToSelect>=0&&this.ensureIndexVisible(indexToSelect,position)}ensureIndexVisible(index,position){if(_isDomLayout(this.gos,"print"))return;const rowCount=this.rowModel.getRowCount();if(typeof index!="number"||index<0||index>=rowCount){_warnOnce("Invalid row index for ensureIndexVisible: "+index);return}const paginationPanelEnabled=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{var _a253;paginationPanelEnabled||(_a253=this.paginationService)==null||_a253.goToPageWithIndex(index);const gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),stickyTopHeight=gridBodyCtrl.getStickyTopHeight(),stickyBottomHeight=gridBodyCtrl.getStickyBottomHeight(),rowNode=this.rowModel.getRow(index);let rowGotShiftedDuringOperation;do{const startingRowTop=rowNode.rowTop,startingRowHeight=rowNode.rowHeight,paginationOffset=this.pageBoundsService.getPixelOffset(),rowTopPixel=rowNode.rowTop-paginationOffset,rowBottomPixel=rowTopPixel+rowNode.rowHeight,scrollPosition=this.getVScrollPosition(),heightOffset=this.heightScaler.getDivStretchOffset(),vScrollTop=scrollPosition.top+heightOffset,vScrollBottom=scrollPosition.bottom+heightOffset,viewportHeight=vScrollBottom-vScrollTop,pxTop=this.heightScaler.getScrollPositionForPixel(rowTopPixel),pxBottom=this.heightScaler.getScrollPositionForPixel(rowBottomPixel-viewportHeight),pxMiddle=Math.min((pxTop+pxBottom)/2,rowTopPixel),rowAboveViewport=vScrollTop+stickyTopHeight>rowTopPixel,rowBelowViewport=vScrollBottom-stickyBottomHeight<rowBottomPixel;let newScrollPosition=null;position==="top"?newScrollPosition=pxTop:position==="bottom"?newScrollPosition=pxBottom:position==="middle"?newScrollPosition=pxMiddle:rowAboveViewport?newScrollPosition=pxTop-stickyTopHeight:rowBelowViewport&&(newScrollPosition=pxBottom+stickyBottomHeight),newScrollPosition!==null&&(this.setVerticalScrollPosition(newScrollPosition),this.rowRenderer.redraw({afterScroll:!0})),rowGotShiftedDuringOperation=startingRowTop!==rowNode.rowTop||startingRowHeight!==rowNode.rowHeight}while(rowGotShiftedDuringOperation);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(key,position="auto"){const column=this.columnModel.getCol(key);if(!column||column.isPinned()||!this.visibleColsService.isColDisplayed(column))return;const newHorizontalScroll=this.getPositionedHorizontalScroll(column,position);this.getFrameworkOverrides().wrapIncoming(()=>{newHorizontalScroll!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(newHorizontalScroll),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(top,left){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(left),this.setVerticalScrollPosition(top),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(column,position){const{columnBeforeStart,columnAfterEnd}=this.isColumnOutsideViewport(column),viewportTooSmallForColumn=this.centerRowsCtrl.getCenterWidth()<column.getActualWidth(),viewportWidth=this.centerRowsCtrl.getCenterWidth(),isRtl=this.enableRtl;let alignColToStart=(isRtl?columnBeforeStart:columnAfterEnd)||viewportTooSmallForColumn,alignColToEnd=isRtl?columnAfterEnd:columnBeforeStart;position!=="auto"&&(alignColToStart=position==="start",alignColToEnd=position==="end");const isMiddle=position==="middle";if(alignColToStart||alignColToEnd||isMiddle){const{colLeft,colMiddle,colRight}=this.getColumnBounds(column);return isMiddle?colMiddle-viewportWidth/2:alignColToStart?isRtl?colRight:colLeft:isRtl?colLeft-viewportWidth:colRight-viewportWidth}return null}isColumnOutsideViewport(column){const{start:viewportStart,end:viewportEnd}=this.getViewportBounds(),{colLeft,colRight}=this.getColumnBounds(column),isRtl=this.enableRtl,columnBeforeStart=isRtl?viewportStart>colRight:viewportEnd<colRight,columnAfterEnd=isRtl?viewportEnd<colLeft:viewportStart>colLeft;return{columnBeforeStart,columnAfterEnd}}getColumnBounds(column){const isRtl=this.enableRtl,bodyWidth=this.visibleColsService.getBodyContainerWidth(),colWidth=column.getActualWidth(),colLeft=column.getLeft(),multiplier=isRtl?-1:1,colLeftPixel=isRtl?bodyWidth-colLeft:colLeft,colRightPixel=colLeftPixel+colWidth*multiplier,colMidPixel=colLeftPixel+colWidth/2*multiplier;return{colLeft:colLeftPixel,colMiddle:colMidPixel,colRight:colRightPixel}}getViewportBounds(){const viewportWidth=this.centerRowsCtrl.getCenterWidth(),scrollPosition=this.centerRowsCtrl.getCenterViewportScrollLeft(),viewportStartPixel=scrollPosition,viewportEndPixel=viewportWidth+scrollPosition;return{start:viewportStartPixel,end:viewportEndPixel,width:viewportWidth}}},__name(_a120,"GridBodyScrollFeature"),_a120),_a121,ViewportSizeFeature=(_a121=class extends BeanStub{wireBeans(beans){this.ctrlsService=beans.ctrlsService,this.pinnedWidthService=beans.pinnedWidthService,this.columnModel=beans.columnModel,this.visibleColsService=beans.visibleColsService,this.columnSizeService=beans.columnSizeService,this.scrollVisibleService=beans.scrollVisibleService,this.columnViewportService=beans.columnViewportService}constructor(centerContainerCtrl){super(),this.centerContainerCtrl=centerContainerCtrl}postConstruct(){this.ctrlsService.whenReady(this,p=>{this.gridBodyCtrl=p.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const listener=__name(()=>this.onCenterViewportResized(),"listener");this.centerContainerCtrl.registerViewportResizeListener(listener),this.gridBodyCtrl.registerBodyViewportResizeListener(listener)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const newWidth=this.centerContainerCtrl.getCenterWidth();newWidth!==this.centerWidth&&(this.centerWidth=newWidth,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const eBodyViewport=this.gridBodyCtrl.getBodyViewportElement(),bodyWidth=_getInnerWidth(eBodyViewport);if(bodyWidth<=50)return;let columnsToRemove=this.getPinnedColumnsOverflowingViewport(bodyWidth-50);const processUnpinnedColumns=this.gos.getCallback("processUnpinnedColumns");columnsToRemove.length&&(processUnpinnedColumns&&(columnsToRemove=processUnpinnedColumns({columns:columnsToRemove,viewportWidth:bodyWidth})),this.columnModel.setColsPinned(columnsToRemove,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(viewportWidth){const pinnedRightWidth=this.pinnedWidthService.getPinnedRightWidth(),pinnedLeftWidth=this.pinnedWidthService.getPinnedLeftWidth(),totalPinnedWidth=pinnedRightWidth+pinnedLeftWidth;if(totalPinnedWidth<viewportWidth)return[];const pinnedLeftColumns=[...this.visibleColsService.getLeftCols()],pinnedRightColumns=[...this.visibleColsService.getRightCols()];let indexRight=0,indexLeft=0;const totalWidthRemoved=0,columnsToRemove=[];let spaceNecessary=totalPinnedWidth-totalWidthRemoved-viewportWidth;for(;(indexLeft<pinnedLeftColumns.length||indexRight<pinnedRightColumns.length)&&spaceNecessary>0;){if(indexRight<pinnedRightColumns.length){const currentColumn=pinnedRightColumns[indexRight++];spaceNecessary-=currentColumn.getActualWidth(),columnsToRemove.push(currentColumn)}if(indexLeft<pinnedLeftColumns.length&&spaceNecessary>0){const currentColumn=pinnedLeftColumns[indexLeft++];spaceNecessary-=currentColumn.getActualWidth(),columnsToRemove.push(currentColumn)}}return columnsToRemove}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const eBodyViewport=this.gridBodyCtrl.getBodyViewportElement(),bodyHeight=_getInnerHeight(eBodyViewport);this.bodyHeight!==bodyHeight&&(this.bodyHeight=bodyHeight,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const params={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(params)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const scrollWidth=this.centerContainerCtrl.getCenterWidth(),scrollPosition=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(scrollWidth,scrollPosition)}},__name(_a121,"ViewportSizeFeature"),_a121),_a122,DragListenerFeature=(_a122=class extends BeanStub{wireBeans(beans){this.dragService=beans.dragService,this.rangeService=beans.rangeService}constructor(eContainer){super(),this.eContainer=eContainer}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{_isCellSelectionEnabled(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),_isCellSelectionEnabled(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},__name(_a122,"DragListenerFeature"),_a122),_a123,CheckboxSelectionComponent=(_a123=class extends Component{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[AgCheckboxSelector]),this.eCheckbox=RefPlaceholder}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const translate=this.localeService.getLocaleTextFunc(),state=this.rowNode.isSelected(),stateName=_getAriaCheckboxStateName(translate,state),[ariaKey,ariaLabel]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],translatedLabel=translate(ariaKey,ariaLabel);this.eCheckbox.setValue(state,!0),this.eCheckbox.setInputAriaLabel(`${translatedLabel} (${stateName})`)}onClicked(newValue,groupSelectsFiltered,event){return this.rowNode.setSelectedParams({newValue,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"checkboxSelected"})}init(params){if(this.rowNode=params.rowNode,this.column=params.column,this.overrides=params.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:__name(event=>_stopPropagationForAgGrid(event),"dblclick"),click:__name(event=>{_stopPropagationForAgGrid(event);const groupSelectsFiltered=_getGroupSelection(this.gos)==="filteredDescendants",isSelected=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(isSelected,groupSelectsFiltered)?this.onClicked(!0,groupSelectsFiltered,event||{})===0&&this.onClicked(!1,groupSelectsFiltered,event):isSelected?this.onClicked(!1,groupSelectsFiltered,event):this.onClicked(!0,groupSelectsFiltered,event||{})},"click")}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),_getIsRowSelectable(this.gos)||typeof this.getIsVisible()=="function"){const showOrHideSelectListener=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:showOrHideSelectListener}),this.addManagedListeners(this.rowNode,{dataChanged:showOrHideSelectListener,cellChanged:showOrHideSelectListener}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(isSelected,groupSelectsFiltered){return groupSelectsFiltered&&(this.eCheckbox.getPreviousValue()===void 0||isSelected===void 0)&&_isClientSideRowModel(this.gos)}showOrHideSelect(){var _a253,_b,_c;let selectable=this.rowNode.selectable;const isVisible=this.getIsVisible();if(selectable)if(typeof isVisible=="function"){const extraParams=(_a253=this.overrides)==null?void 0:_a253.callbackParams;if(!this.column)selectable=isVisible({...extraParams,node:this.rowNode,data:this.rowNode.data});else{const params=this.column.createColumnFunctionCallbackParams(this.rowNode);selectable=isVisible({...extraParams,...params})}}else selectable=isVisible??!1;const so=this.gos.get("rowSelection");if(so&&typeof so!="string"?!_getHideDisabledCheckboxes(so):(_b=this.column)==null?void 0:_b.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!selectable),this.setVisible(!0),this.setDisplayed(!0);return}if((_c=this.overrides)!=null&&_c.removeHidden){this.setDisplayed(selectable);return}this.setVisible(selectable)}getIsVisible(){var _a253,_b;if(this.overrides)return this.overrides.isVisible;const so=this.gos.get("rowSelection");return so&&typeof so!="string"?_getCheckboxes(so):(_b=(_a253=this.column)==null?void 0:_a253.getColDef())==null?void 0:_b.checkboxSelection}},__name(_a123,"CheckboxSelectionComponent"),_a123),_a124,DndSourceComp=(_a124=class extends Component{constructor(rowNode,column,eCell){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=rowNode,this.column=column,this.eCell=eCell}postConstruct(){this.getGui().appendChild(_createIconNoSpan("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(dragEvent){const providedOnRowDrag=this.column.getColDef().dndSourceOnRowDrag;dragEvent.dataTransfer.setDragImage(this.eCell,0,0);const defaultOnRowDrag=__name(()=>{try{const jsonData=JSON.stringify(this.rowNode.data);dragEvent.dataTransfer.setData("application/json",jsonData),dragEvent.dataTransfer.setData("text/plain",jsonData)}catch{}},"defaultOnRowDrag");if(providedOnRowDrag){const params=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent});providedOnRowDrag(params)}else defaultOnRowDrag()}checkVisibility(){const visible=this.column.isDndSource(this.rowNode);this.setDisplayed(visible)}},__name(_a124,"DndSourceComp"),_a124),_a125,CellCustomStyleFeature=(_a125=class extends BeanStub{constructor(ctrl,beans){super(),this.staticClasses=[],this.cellCtrl=ctrl,this.beans=beans,this.column=ctrl.getColumn(),this.rowNode=ctrl.getRowNode()}setComp(comp){this.cellComp=comp,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const colDef=this.column.getColDef(),{cellClassRules}=colDef,cellClassParams=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(cellClassRules===this.cellClassRules?void 0:this.cellClassRules,cellClassRules,cellClassParams,className=>this.cellComp.addOrRemoveCssClass(className,!0),className=>this.cellComp.addOrRemoveCssClass(className,!1)),this.cellClassRules=cellClassRules}applyUserStyles(){const colDef=this.column.getColDef();if(!colDef.cellStyle)return;let styles;if(typeof colDef.cellStyle=="function"){const cellStyleParams=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),cellStyleFunc=colDef.cellStyle;styles=cellStyleFunc(cellStyleParams)}else styles=colDef.cellStyle;styles&&this.cellComp.setUserStyles(styles)}applyClassesFromColDef(){const colDef=this.column.getColDef(),cellClassParams=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(className=>this.cellComp.addOrRemoveCssClass(className,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(colDef,cellClassParams),this.staticClasses.length&&this.staticClasses.forEach(className=>this.cellComp.addOrRemoveCssClass(className,!0))}destroy(){super.destroy()}},__name(_a125,"CellCustomStyleFeature"),_a125),_a126,CellKeyboardListenerFeature=(_a126=class extends BeanStub{constructor(ctrl,beans,column,rowNode,rowCtrl){super(),this.cellCtrl=ctrl,this.beans=beans,this.rowNode=rowNode,this.rowCtrl=rowCtrl}setComp(eGui){this.eGui=eGui}onKeyDown(event){const key=event.key;switch(key){case KeyCode.ENTER:this.onEnterKeyDown(event);break;case KeyCode.F2:this.onF2KeyDown(event);break;case KeyCode.ESCAPE:this.onEscapeKeyDown(event);break;case KeyCode.TAB:this.onTabKeyDown(event);break;case KeyCode.BACKSPACE:case KeyCode.DELETE:this.onBackspaceOrDeleteKeyDown(key,event);break;case KeyCode.DOWN:case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.LEFT:this.onNavigationKeyDown(event,key);break}}onNavigationKeyDown(event,key){this.cellCtrl.isEditing()||(event.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(event):this.beans.navigationService.navigateToNextCell(event,key,this.cellCtrl.getCellPosition(),!0),event.preventDefault())}onShiftRangeSelect(event){if(!this.beans.rangeService)return;const endCell=this.beans.rangeService.extendLatestRangeInDirection(event);endCell&&this.beans.navigationService.ensureCellVisible(endCell)}onTabKeyDown(event){this.beans.navigationService.onTabKeyDown(this.cellCtrl,event)}onBackspaceOrDeleteKeyDown(key,event){const{cellCtrl,beans,rowNode}=this,{gos,rangeService,eventService}=beans;if(!cellCtrl.isEditing()){if(eventService.dispatchEvent({type:"keyShortcutChangedCellStart"}),_isDeleteKey(key,gos.get("enableCellEditingOnBackspace"))){if(rangeService&&_isCellSelectionEnabled(gos))rangeService.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(cellCtrl.isCellEditable()){const column=cellCtrl.getColumn(),emptyValue=this.beans.valueService.getDeleteValue(column,rowNode);rowNode.setDataValue(column,emptyValue,"cellClear")}}else cellCtrl.startRowOrCellEdit(key,event);eventService.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const key=e.shiftKey?KeyCode.UP:KeyCode.DOWN;this.beans.navigationService.navigateToNextCell(null,key,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(KeyCode.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(event){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(KeyCode.F2,event)}onEscapeKeyDown(event){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(event){if(event.target!==this.eGui||this.cellCtrl.isEditing())return;const key=event.key;key===" "?this.onSpaceKeyDown(event):this.cellCtrl.startRowOrCellEdit(key,event)&&event.preventDefault()}onSpaceKeyDown(event){const{gos}=this.beans;if(!this.cellCtrl.isEditing()&&_isRowSelection(gos)){const currentSelection=this.rowNode.isSelected(),newSelection=!currentSelection,groupSelectsFiltered=_getGroupSelection(gos)==="filteredDescendants",updatedCount=this.rowNode.setSelectedParams({newValue:newSelection,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"spaceKey"});currentSelection===void 0&&updatedCount===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"spaceKey"})}event.preventDefault()}destroy(){super.destroy()}},__name(_a126,"CellKeyboardListenerFeature"),_a126),_a127,CellMouseListenerFeature=(_a127=class extends BeanStub{constructor(ctrl,beans,column){super(),this.cellCtrl=ctrl,this.beans=beans,this.column=column}onMouseEvent(eventName,mouseEvent){if(!_isStopPropagationForAgGrid(mouseEvent))switch(eventName){case"click":this.onCellClicked(mouseEvent);break;case"mousedown":case"touchstart":this.onMouseDown(mouseEvent);break;case"dblclick":this.onCellDoubleClicked(mouseEvent);break;case"mouseout":this.onMouseOut(mouseEvent);break;case"mouseover":this.onMouseOver(mouseEvent);break}}onCellClicked(mouseEvent){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(mouseEvent),mouseEvent.preventDefault();return}const{eventService,rangeService,gos}=this.beans,isMultiKey=mouseEvent.ctrlKey||mouseEvent.metaKey;rangeService&&isMultiKey&&rangeService.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&rangeService.intersectLastRange(!0);const cellClickedEvent=this.cellCtrl.createEvent(mouseEvent,"cellClicked");eventService.dispatchEvent(cellClickedEvent);const colDef=this.column.getColDef();colDef.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{colDef.onCellClicked(cellClickedEvent)})},0),(gos.get("singleClickEdit")||colDef.singleClickEdit)&&!gos.get("suppressClickEdit")&&!(mouseEvent.shiftKey&&(rangeService==null?void 0:rangeService.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!_isIOSUserAgent()||_isEventSupported("dblclick"))return!1;const nowMillis=new Date().getTime(),res=nowMillis-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=nowMillis,res}onCellDoubleClicked(mouseEvent){const{column,beans,cellCtrl}=this,{eventService,frameworkOverrides,gos}=beans,colDef=column.getColDef(),cellDoubleClickedEvent=cellCtrl.createEvent(mouseEvent,"cellDoubleClicked");eventService.dispatchEvent(cellDoubleClickedEvent),typeof colDef.onCellDoubleClicked=="function"&&window.setTimeout(()=>{frameworkOverrides.wrapOutgoing(()=>{colDef.onCellDoubleClicked(cellDoubleClickedEvent)})},0),!gos.get("singleClickEdit")&&!gos.get("suppressClickEdit")&&cellCtrl.startRowOrCellEdit(null,mouseEvent)}onMouseDown(mouseEvent){const{ctrlKey,metaKey,shiftKey}=mouseEvent,target=mouseEvent.target,{cellCtrl,beans}=this,{eventService,rangeService,focusService,gos}=beans;if(this.isRightClickInExistingRange(mouseEvent))return;const ranges=rangeService&&rangeService.getCellRanges().length!=0;if(!shiftKey||!ranges){const shouldFocus=gos.get("enableCellTextSelection")&&mouseEvent.defaultPrevented,forceBrowserFocus=(_isBrowserSafari()||shouldFocus)&&!cellCtrl.isEditing()&&!_isFocusableFormField(target);cellCtrl.focusCell(forceBrowserFocus)}if(shiftKey&&ranges&&!focusService.isCellFocused(cellCtrl.getCellPosition())){mouseEvent.preventDefault();const focusedCellPosition=focusService.getFocusedCell();if(focusedCellPosition){const{column,rowIndex,rowPinned}=focusedCellPosition,focusedRowCtrl=beans.rowRenderer.getRowByPosition({rowIndex,rowPinned}),focusedCellCtrl=focusedRowCtrl==null?void 0:focusedRowCtrl.getCellCtrl(column);focusedCellCtrl!=null&&focusedCellCtrl.isEditing()&&focusedCellCtrl.stopEditing(),focusService.setFocusedCell({column,rowIndex,rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(target)){if(rangeService){const thisCell=this.cellCtrl.getCellPosition();if(shiftKey)rangeService.extendLatestRangeToCell(thisCell);else{const isMultiKey=ctrlKey||metaKey;rangeService.setRangeToCell(thisCell,isMultiKey)}}eventService.dispatchEvent(this.cellCtrl.createEvent(mouseEvent,"cellMouseDown"))}}isRightClickInExistingRange(mouseEvent){const{rangeService}=this.beans;if(rangeService){const cellInRange=rangeService.isCellInAnyRange(this.cellCtrl.getCellPosition()),isRightClick=mouseEvent.button===2||mouseEvent.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(cellInRange&&isRightClick)return!0}return!1}containsWidget(target){return _isElementChildOfClass(target,"ag-selection-checkbox",3)}onMouseOut(mouseEvent){this.mouseStayingInsideCell(mouseEvent)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(mouseEvent,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(mouseEvent){this.mouseStayingInsideCell(mouseEvent)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(mouseEvent,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const eGui=this.cellCtrl.getGui(),cellContainsTarget=eGui.contains(e.target),cellContainsRelatedTarget=eGui.contains(e.relatedTarget);return cellContainsTarget&&cellContainsRelatedTarget}destroy(){super.destroy()}},__name(_a127,"CellMouseListenerFeature"),_a127),_a128,CellPositionFeature=(_a128=class extends BeanStub{constructor(ctrl,beans){super(),this.cellCtrl=ctrl,this.beans=beans,this.column=ctrl.getColumn(),this.rowNode=ctrl.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:__name(()=>this.onNewColumnsLoaded(),"newColumnsLoaded")})}setComp(eGui){this.eGui=eGui,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const rowSpan=this.column.getRowSpan(this.rowNode);this.rowSpan!==rowSpan&&(this.rowSpan=rowSpan,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const colsSpanning=this.getColSpanningList();_areEqual(this.colsSpanning,colsSpanning)||(this.colsSpanning=colsSpanning,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const width=this.getCellWidth();this.eGui.style.width=`${width}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((width,col)=>width+col.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const colSpan=this.column.getColSpan(this.rowNode),colsSpanning=[];if(colSpan===1)colsSpanning.push(this.column);else{let pointer=this.column;const pinned=this.column.getPinned();for(let i=0;pointer&&i<colSpan&&(colsSpanning.push(pointer),pointer=this.beans.visibleColsService.getColAfter(pointer),!(!pointer||_missing(pointer)||pinned!==pointer.getPinned()));i++);}return colsSpanning}onLeftChanged(){if(!this.eGui)return;const left=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=left+"px"}getCellLeft(){let mostLeftCol;return this.beans.gos.get("enableRtl")&&this.colsSpanning?mostLeftCol=_last(this.colsSpanning):mostLeftCol=this.column,mostLeftCol.getLeft()}modifyLeftForPrintLayout(leftPosition){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return leftPosition;const leftWidth=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){const bodyWidth=this.beans.visibleColsService.getBodyContainerWidth();return leftWidth+bodyWidth+(leftPosition||0)}return leftWidth+(leftPosition||0)}applyRowSpan(force){if(this.rowSpan===1&&!force)return;const totalRowHeight=_getRowHeightAsNumber(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${totalRowHeight}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},__name(_a128,"CellPositionFeature"),_a128),CSS_CELL_RANGE_SELECTED="ag-cell-range-selected",CSS_CELL_RANGE_CHART="ag-cell-range-chart",CSS_CELL_RANGE_SINGLE_CELL="ag-cell-range-single-cell",CSS_CELL_RANGE_CHART_CATEGORY="ag-cell-range-chart-category",CSS_CELL_RANGE_HANDLE="ag-cell-range-handle",CSS_CELL_RANGE_TOP="ag-cell-range-top",CSS_CELL_RANGE_RIGHT="ag-cell-range-right",CSS_CELL_RANGE_BOTTOM="ag-cell-range-bottom",CSS_CELL_RANGE_LEFT="ag-cell-range-left",_a129,CellRangeFeature=(_a129=class{constructor(beans,ctrl){this.beans=beans,this.rangeService=beans.rangeService,this.selectionHandleFactory=beans.selectionHandleFactory,this.cellCtrl=ctrl}setComp(cellComp,eGui){this.cellComp=cellComp,this.eGui=eGui,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${CSS_CELL_RANGE_SELECTED}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${CSS_CELL_RANGE_SELECTED}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${CSS_CELL_RANGE_SELECTED}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${CSS_CELL_RANGE_SELECTED}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_CHART,this.hasChartRange),_setAriaSelected(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SINGLE_CELL,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const rangeBorders=this.getRangeBorders(),isSingleCell=this.isSingleCell(),isTop=!isSingleCell&&rangeBorders.top,isRight=!isSingleCell&&rangeBorders.right,isBottom=!isSingleCell&&rangeBorders.bottom,isLeft=!isSingleCell&&rangeBorders.left;this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_TOP,isTop),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_RIGHT,isRight),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_BOTTOM,isBottom),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_LEFT,isLeft)}isSingleCell(){const{rangeService}=this.beans;return this.rangeCount===1&&!!rangeService&&!rangeService.isMoreThanOneCell()}getHasChartRange(){const{rangeService}=this.beans;if(!this.rangeCount||!rangeService)return!1;const cellRanges=rangeService.getCellRanges();return cellRanges.length>0&&cellRanges.every(range=>_includes([1,0],range.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const isRtl=this.beans.gos.get("enableRtl");let top=!1,right=!1,bottom=!1,left=!1;const thisCol=this.cellCtrl.getCellPosition().column,presentedColsService=this.beans.visibleColsService;let leftCol,rightCol;isRtl?(leftCol=presentedColsService.getColAfter(thisCol),rightCol=presentedColsService.getColBefore(thisCol)):(leftCol=presentedColsService.getColBefore(thisCol),rightCol=presentedColsService.getColAfter(thisCol));const ranges=this.rangeService.getCellRanges().filter(range=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),range));leftCol||(left=!0),rightCol||(right=!0);for(let i=0;i<ranges.length&&!(top&&right&&bottom&&left);i++){const range=ranges[i],startRow=this.rangeService.getRangeStartRow(range),endRow=this.rangeService.getRangeEndRow(range);!top&&this.beans.rowPositionUtils.sameRow(startRow,this.cellCtrl.getCellPosition())&&(top=!0),!bottom&&this.beans.rowPositionUtils.sameRow(endRow,this.cellCtrl.getCellPosition())&&(bottom=!0),!left&&leftCol&&range.columns.indexOf(leftCol)<0&&(left=!0),!right&&rightCol&&range.columns.indexOf(rightCol)<0&&(right=!0)}return{top,right,bottom,left}}refreshHandle(){if(this.beans.context.isDestroyed())return;const shouldHaveSelectionHandle=this.shouldHaveSelectionHandle();this.selectionHandle&&!shouldHaveSelectionHandle&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),shouldHaveSelectionHandle&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_HANDLE,!!this.selectionHandle)}shouldHaveSelectionHandle(){const gos=this.beans.gos,cellRanges=this.rangeService.getCellRanges(),rangesLen=cellRanges.length;if(this.rangeCount<1||rangesLen<1)return!1;const cellRange=_last(cellRanges),cellPosition=this.cellCtrl.getCellPosition(),isFillHandleAvailable=_isFillHandleEnabled(gos)&&!this.cellCtrl.isSuppressFillHandle(),isRangeHandleAvailable=_isRangeHandleEnabled(gos);let handleIsAvailable=rangesLen===1&&!this.cellCtrl.isEditing()&&(isFillHandleAvailable||isRangeHandleAvailable);if(this.hasChartRange){const isCategoryCell=cellRanges[0].type===1&&this.rangeService.isCellInSpecificRange(cellPosition,cellRanges[0]);this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_CHART_CATEGORY,isCategoryCell),handleIsAvailable=cellRange.type===0}return handleIsAvailable&&cellRange.endRow!=null&&this.rangeService.isContiguousRange(cellRange)&&this.rangeService.isBottomRightCell(cellRange,cellPosition)}addSelectionHandle(){const cellRangeType=_last(this.rangeService.getCellRanges()).type,type=_isFillHandleEnabled(this.beans.gos)&&_missing(cellRangeType)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==type&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(type)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},__name(_a129,"CellRangeFeature"),_a129),CSS_CELL="ag-cell",CSS_AUTO_HEIGHT="ag-cell-auto-height",CSS_NORMAL_HEIGHT="ag-cell-normal-height",CSS_CELL_FOCUS="ag-cell-focus",CSS_CELL_FIRST_RIGHT_PINNED="ag-cell-first-right-pinned",CSS_CELL_LAST_LEFT_PINNED="ag-cell-last-left-pinned",CSS_CELL_NOT_INLINE_EDITING="ag-cell-not-inline-editing",CSS_COLUMN_HOVER="ag-column-hover",CSS_CELL_WRAP_TEXT="ag-cell-wrap-text",instanceIdSequence4=0,_a130,_CellCtrl=(_a130=class extends BeanStub{constructor(column,rowNode,beans,rowCtrl){super(),this.column=column,this.rowNode=rowNode,this.beans=beans,this.rowCtrl=rowCtrl,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=column.getId()+"-"+instanceIdSequence4++,this.colIdSanitised=_escapeString(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new CellPositionFeature(this,this.beans),this.cellCustomStyleFeature=new CellCustomStyleFeature(this,this.beans),this.cellMouseListenerFeature=new CellMouseListenerFeature(this,this.beans,this.column),this.cellKeyboardListenerFeature=new CellKeyboardListenerFeature(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&_isCellSelectionEnabled(this.beans.gos)&&(this.cellRangeFeature=new CellRangeFeature(this.beans,this))}removeFeatures(){const context=this.beans.context;this.cellPositionFeature=context.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=context.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=context.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=context.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=context.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(value,shouldDisplayTooltip){const getTooltipValue=__name(()=>{const colDef=this.column.getColDef(),data=this.rowNode.data;if(colDef.tooltipField&&_exists(data))return _getValueUsingField(data,colDef.tooltipField,this.column.isTooltipFieldContainsDots());const valueGetter=colDef.tooltipValueGetter;return valueGetter?valueGetter(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},"getTooltipValue"),isTooltipWhenTruncated=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!shouldDisplayTooltip&&isTooltipWhenTruncated&&!this.isCellRenderer()&&(shouldDisplayTooltip=__name(()=>{const eGui=this.getGui(),textEl=eGui.children.length===0?eGui:eGui.querySelector(".ag-cell-value");return textEl?textEl.scrollWidth>textEl.clientWidth:!0},"shouldDisplayTooltip"));const tooltipCtrl={getColumn:__name(()=>this.column,"getColumn"),getColDef:__name(()=>this.column.getColDef(),"getColDef"),getRowIndex:__name(()=>this.cellPosition.rowIndex,"getRowIndex"),getRowNode:__name(()=>this.rowNode,"getRowNode"),getGui:__name(()=>this.getGui(),"getGui"),getLocation:__name(()=>"cell","getLocation"),getTooltipValue:value!=null?()=>value:getTooltipValue,getValueFormatted:__name(()=>this.valueFormatted,"getValueFormatted"),shouldDisplayTooltip};this.tooltipFeature=new TooltipFeature(tooltipCtrl,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(comp,eGui,eCellWrapper,printLayout,startEditing,compBean){var _a253,_b,_c,_d;this.cellComp=comp,this.eGui=eGui,this.printLayout=printLayout,compBean??(compBean=this),this.addDomData(compBean),this.addFeatures(),compBean.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(eCellWrapper,compBean),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(_a253=this.cellPositionFeature)==null||_a253.setComp(eGui),(_b=this.cellCustomStyleFeature)==null||_b.setComp(comp),(_c=this.tooltipFeature)==null||_c.refreshToolTip(),(_d=this.cellKeyboardListenerFeature)==null||_d.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(comp,eGui),startEditing&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(func=>func()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(eCellWrapper,compBean){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!eCellWrapper)return;const eParentCell=eCellWrapper.parentElement,minRowHeight=_getRowHeightForNode(this.beans.gos,this.rowNode).height,measureHeight=__name(timesCalled=>{if(this.editing||!this.isAlive()||!compBean.isAlive())return;const{paddingTop,paddingBottom,borderBottomWidth,borderTopWidth}=_getElementSize(eParentCell),extraHeight=paddingTop+paddingBottom+borderBottomWidth+borderTopWidth,autoHeight=eCellWrapper.offsetHeight+extraHeight;if(timesCalled<5){const doc=_getDocument(this.beans.gos),notYetInDom=!doc||!doc.contains(eCellWrapper),possiblyNoContentYet=autoHeight==0;if(notYetInDom||possiblyNoContentYet){window.setTimeout(()=>measureHeight(timesCalled+1),0);return}}const newHeight=Math.max(autoHeight,minRowHeight);this.rowNode.setRowAutoHeight(newHeight,this.column)},"measureHeight"),listener=__name(()=>measureHeight(0),"listener");listener();const destroyResizeObserver=this.beans.resizeObserverService.observeResize(eCellWrapper,listener);compBean.addDestroyFunc(()=>{destroyResizeObserver(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const colDef=this.column.getColDef();return colDef.cellRenderer!=null||colDef.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(forceNewCellRendererInstance=!1){var _a253,_b;const valueToDisplay=this.getValueToDisplay();let compDetails;if(this.rowNode.stub&&((_a253=this.rowNode.groupData)==null?void 0:_a253[this.column.getId()])==null){const params=this.createCellRendererParams();compDetails=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),params)}else if(this.isCellRenderer()){const params=this.createCellRendererParams();compDetails=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),params)}this.cellComp.setRenderDetails(compDetails,valueToDisplay,forceNewCellRendererInstance),(_b=this.cellRangeFeature)==null||_b.refreshHandle()}setupControlComps(){const colDef=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(colDef)),this.includeRowDrag=this.isIncludeControl(colDef.rowDrag),this.includeDndSource=this.isIncludeControl(colDef.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(value){return this.rowNode.rowPinned!=null?!1:typeof value=="function"||value===!0}isCheckboxSelection(colDef){const{rowSelection}=this.beans.gridOptions;return colDef.checkboxSelection||isColumnControlsCol(this.column)&&rowSelection&&typeof rowSelection!="string"&&_getCheckboxes(rowSelection)}refreshShouldDestroy(){const colDef=this.column.getColDef(),selectionChanged=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(colDef)),rowDragChanged=this.includeRowDrag!=this.isIncludeControl(colDef.rowDrag),dndSourceChanged=this.includeDndSource!=this.isIncludeControl(colDef.dndSource),autoHeightChanged=this.isAutoHeight!=this.column.isAutoHeight();return selectionChanged||rowDragChanged||dndSourceChanged||autoHeightChanged}startEditing(key=null,cellStartedEdit=!1,event=null){const{editService}=this.beans;return!this.isCellEditable()||this.editing||!editService?!0:this.cellComp?editService.startEditing(this,key,cellStartedEdit,event):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(key,cellStartedEdit,event)}),!0)}setEditing(editing,compDetails){var _a253;this.editCompDetails=compDetails,this.editing!==editing&&(this.editing=editing,(_a253=this.cellRangeFeature)==null||_a253.refreshHandle())}stopRowOrCellEdit(cancel=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(cancel):this.stopEditing(cancel)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(cancel=!1){this.onCellEditorAttachedFuncs=[];const{editService}=this.beans;return!this.editing||!editService?!1:editService.stopEditing(this,cancel)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:__name(()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),"getValue"),setValue:__name(value=>this.beans.valueService.setValue(this.rowNode,this.column,value),"setValue"),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:__name((rowDraggerElement,dragStartPixels,value,suppressVisibilityChange)=>this.registerRowDragger(rowDraggerElement,dragStartPixels,suppressVisibilityChange),"registerRowDragger"),setTooltip:__name((value,shouldDisplayTooltip)=>{var _a253;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(value,shouldDisplayTooltip),(_a253=this.tooltipFeature)==null||_a253.refreshToolTip()},"setTooltip")})}setFocusOutOnEditor(){var _a253;this.editing&&((_a253=this.beans.editService)==null||_a253.setFocusOutOnEditor(this))}setFocusInOnEditor(){var _a253;this.editing&&((_a253=this.beans.editService)==null||_a253.setFocusInOnEditor(this))}onCellChanged(event){event.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(params){var _a253;this.refreshShouldDestroy()?(_a253=this.rowCtrl)==null||_a253.recreateCell(this):this.refreshCell(params)}refreshCell(params){var _a253,_b,_c,_d,_e;if(this.suppressRefreshCell||this.editing)return;const colDef=this.column.getColDef(),newData=params!=null&&!!params.newData,suppressFlash=params!=null&&!!params.suppressFlash||!!colDef.suppressCellFlash,noValueProvided=colDef.field==null&&colDef.valueGetter==null&&colDef.showRowGroup==null,forceRefresh=params&&params.forceRefresh||noValueProvided||newData,isCellCompReady=!!this.cellComp,valuesDifferent=this.updateAndFormatValue(isCellCompReady),dataNeedsUpdating=forceRefresh||valuesDifferent;if(isCellCompReady){if(dataNeedsUpdating){this.showValue(newData);const processingFilterChange=(_a253=this.beans.filterManager)==null?void 0:_a253.isSuppressFlashingCellsBecauseFiltering();!suppressFlash&&!processingFilterChange&&(this.beans.gos.get("enableCellChangeFlash")||colDef.enableCellChangeFlash)&&this.flashCell(),(_b=this.cellCustomStyleFeature)==null||_b.applyUserStyles(),(_c=this.cellCustomStyleFeature)==null||_c.applyClassesFromColDef()}(_d=this.tooltipFeature)==null||_d.refreshToolTip(),(_e=this.cellCustomStyleFeature)==null||_e.applyCellClassRules()}}stopEditingAndFocus(suppressNavigateAfterEdit=!1,shiftKey=!1){var _a253;(_a253=this.beans.editService)==null||_a253.stopEditingAndFocus(this,suppressNavigateAfterEdit,shiftKey)}flashCell(delays){const flashDuration=(delays==null?void 0:delays.flashDuration)??(delays==null?void 0:delays.flashDelay),fadeDuration=(delays==null?void 0:delays.fadeDuration)??(delays==null?void 0:delays.fadeDelay);this.animateCell("data-changed",flashDuration,fadeDuration)}animateCell(cssName,flashDuration,fadeDuration){if(!this.cellComp)return;const{gos}=this.beans;if(flashDuration||(flashDuration=gos.get("cellFlashDuration")),flashDuration===0)return;_exists(fadeDuration)||(fadeDuration=gos.get("cellFadeDuration"));const fullName=`ag-cell-${cssName}`,animationFullName=`ag-cell-${cssName}-animation`;this.cellComp.addOrRemoveCssClass(fullName,!0),this.cellComp.addOrRemoveCssClass(animationFullName,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(fullName,!1),this.cellComp.addOrRemoveCssClass(animationFullName,!0),this.eGui.style.transition=`background-color ${fadeDuration}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(animationFullName,!1),this.eGui.style.transition="")},fadeDuration))},flashDuration)})}onFlashCells(event){if(!this.cellComp)return;const cellId=this.beans.cellPositionUtils.createId(this.getCellPosition());event.cells[cellId]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(value){return this.callValueFormatter(value)??value}callValueFormatter(value){return this.beans.valueService.formatValue(this.column,this.rowNode,value)}updateAndFormatValue(compareValues){const oldValue=this.value,oldValueFormatted=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),compareValues?!this.valuesAreEqual(oldValue,this.value)||this.valueFormatted!=oldValueFormatted:!0}valuesAreEqual(val1,val2){const colDef=this.column.getColDef();return colDef.equals?colDef.equals(val1,val2):val1===val2}getComp(){return this.cellComp}getValue(){return this.value}addDomData(compBean){const element=this.getGui();_setDomData(this.beans.gos,element,_a130.DOM_DATA_KEY_CELL_CTRL,this),compBean.addDestroyFunc(()=>_setDomData(this.beans.gos,element,_a130.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(domEvent,eventType){return this.beans.gos.addGridCommonParams({type:eventType,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:domEvent,rowIndex:this.rowNode.rowIndex})}processCharacter(event){var _a253;(_a253=this.cellKeyboardListenerFeature)==null||_a253.processCharacter(event)}onKeyDown(event){var _a253;(_a253=this.cellKeyboardListenerFeature)==null||_a253.onKeyDown(event)}onMouseEvent(eventName,mouseEvent){var _a253;(_a253=this.cellMouseListenerFeature)==null||_a253.onMouseEvent(eventName,mouseEvent)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var _a253;this.cellComp&&((_a253=this.cellPositionFeature)==null||_a253.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp,column,beans}=this;refreshFirstAndLastStyles(cellComp,column,beans.visibleColsService)}refreshAriaColIndex(){const colIdx=this.beans.visibleColsService.getAriaColIndex(this.column);_setAriaColIndex(this.getGui(),colIdx)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var _a253;return(_a253=this.cellPositionFeature)==null?void 0:_a253.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(key,event=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(key,this):this.startEditing(key,!0,event):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(key,event)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(forceBrowserFocus=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(suppressCellFocus){this.eGui&&_addOrRemoveAttribute(this.eGui,"tabindex",suppressCellFocus?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const firstRightPinned=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(CSS_CELL_FIRST_RIGHT_PINNED,firstRightPinned)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const lastLeftPinned=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(CSS_CELL_LAST_LEFT_PINNED,lastLeftPinned)}onCellFocused(event){if(this.beans.focusService.isCellFocusSuppressed())return;const cellFocused=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){cellFocused&&(event!=null&&event.forceBrowserFocus)&&(this.focusEventToRestore=event);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(CSS_CELL_FOCUS,cellFocused),cellFocused&&event&&event.forceBrowserFocus){let focusEl=this.cellComp.getFocusableElement();if(this.editing){const focusableEls=this.beans.focusService.findFocusableElements(focusEl,null,!0);focusableEls.length&&(focusEl=focusableEls[0])}focusEl.focus({preventScroll:!!event.preventScrollOnBrowserFocus})}const fullRowEdit=this.beans.gos.get("editType")==="fullRow";!cellFocused&&!fullRowEdit&&this.editing&&this.stopRowOrCellEdit(),cellFocused&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:_makeNull(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(CSS_CELL,!0),this.cellComp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING,!0);const autoHeight=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(CSS_AUTO_HEIGHT,autoHeight),this.cellComp.addOrRemoveCssClass(CSS_NORMAL_HEIGHT,!autoHeight)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const isHovered=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(CSS_COLUMN_HOVER,isHovered)}onColDefChanged(){var _a253;if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?(_a253=this.beans.editService)==null||_a253.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const value=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(CSS_CELL_WRAP_TEXT,value)}dispatchCellContextMenuEvent(event){const colDef=this.column.getColDef(),cellContextMenuEvent=this.createEvent(event,"cellContextMenu");this.beans.eventService.dispatchEvent(cellContextMenuEvent),colDef.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{colDef.onCellContextMenu(cellContextMenuEvent)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const cbSelectionComponent=new CheckboxSelectionComponent;return this.beans.context.createBean(cbSelectionComponent),cbSelectionComponent.init({rowNode:this.rowNode,column:this.column}),cbSelectionComponent}createDndSource(){const dndSourceComp=new DndSourceComp(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(dndSourceComp),dndSourceComp}registerRowDragger(customElement,dragStartPixels,suppressVisibilityChange){if(this.customRowDragComp){this.customRowDragComp.setDragElement(customElement,dragStartPixels);return}const newComp=this.createRowDragComp(customElement,dragStartPixels,suppressVisibilityChange);newComp&&(this.customRowDragComp=newComp,this.addDestroyFunc(()=>{this.beans.context.destroyBean(newComp),this.customRowDragComp=null}))}createRowDragComp(customElement,dragStartPixels,suppressVisibilityChange){const pagination=this.beans.gos.get("pagination"),rowDragManaged=this.beans.gos.get("rowDragManaged"),clientSideRowModelActive=_isClientSideRowModel(this.beans.gos);if(rowDragManaged){if(!clientSideRowModelActive){_warnOnce("managed row dragging is only allowed in the Client Side Row Model");return}if(pagination){_warnOnce("managed row dragging is not possible when doing pagination");return}}const rowDragComp=new RowDragComp(()=>this.value,this.rowNode,this.column,customElement,dragStartPixels,suppressVisibilityChange);return this.beans.context.createBean(rowDragComp),rowDragComp}setSuppressRefreshCell(suppressRefreshCell){this.suppressRefreshCell=suppressRefreshCell}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(callback){this.onCellEditorAttachedFuncs.push(callback)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(func=>func()),this.onCellEditorAttachedFuncs=[]}},__name(_a130,"_CellCtrl"),_a130);_CellCtrl.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var CellCtrl=_CellCtrl,instanceIdSequence5=0,_a131,_RowCtrl=(_a131=class extends BeanStub{constructor(rowNode,beans,animateIn,useAnimationFrameForCreate,printLayout){var _a253;super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=beans,this.gos=beans.gos,this.rowNode=rowNode,this.paginationPage=((_a253=beans.paginationService)==null?void 0:_a253.getCurrentPage())??0,this.useAnimationFrameForCreate=useAnimationFrameForCreate,this.printLayout=printLayout,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=rowNode.id+"-"+instanceIdSequence5++,this.rowId=_escapeString(rowNode.id),this.initRowBusinessKey(),this.rowFocused=beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=beans.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(animateIn),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const businessKey=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=_escapeString(businessKey)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(containerType,gui){containerType==="left"?this.leftGui=gui:containerType==="right"?this.rightGui=gui:containerType==="fullWidth"?this.fullWidthGui=gui:this.centerGui=gui}setComp(rowComp,element,containerType,compBean){compBean=setupCompBean(this,this.beans.context,compBean);const gui={rowComp,element,containerType,compBean};this.allRowGuis.push(gui),this.updateGui(containerType,gui),this.initialiseRowComp(gui),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(containerType){this.allRowGuis=this.allRowGuis.filter(rowGui=>rowGui.containerType!==containerType),this.updateGui(containerType,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(cached){const displayValue=cached?"none":"";this.allRowGuis.forEach(rg=>rg.element.style.display=displayValue)}initialiseRowComp(gui){const gos=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(gui),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(gui),this.updateRowIndexes(gui),this.setFocusedClasses(gui),this.setStylesFromGridOptions(!1,gui),_isRowSelection(gos)&&this.rowNode.selectable&&this.onRowSelected(gui),this.updateColumnLists(!this.useAnimationFrameForCreate);const comp=gui.rowComp;this.getInitialRowClasses(gui.containerType).forEach(name=>comp.addOrRemoveCssClass(name,!0)),this.executeSlideAndFadeAnimations(gui),this.rowNode.group&&_setAriaExpanded(gui.element,this.rowNode.expanded==!0),this.setRowCompRowId(comp),this.setRowCompRowBusinessKey(comp),_setDomData(gos,gui.element,_a131.DOM_DATA_KEY_ROW_CTRL,this),gui.compBean.addDestroyFunc(()=>_setDomData(gos,gui.element,_a131.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,gui),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(gui),this.isFullWidth()&&this.setupFullWidth(gui),gos.get("rowDragEntireRow")&&this.addRowDraggerToRow(gui),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&gui.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(comp){this.businessKeySanitised!=null&&comp.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(comp){this.rowId=_escapeString(this.rowNode.id),this.rowId!=null&&comp.setRowId(this.rowId)}executeSlideAndFadeAnimations(gui){const{containerType}=gui;this.slideInAnimation[containerType]&&(_executeNextVMTurn(()=>{this.onTopChanged()}),this.slideInAnimation[containerType]=!1),this.fadeInAnimation[containerType]&&(_executeNextVMTurn(()=>{gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[containerType]=!1)}addRowDraggerToRow(gui){if(_isCellSelectionEnabled(this.gos)){_warnOnce("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}const translate=this.beans.localeService.getLocaleTextFunc(),rowDragComp=new RowDragComp(()=>`1 ${translate("rowDragRow","row")}`,this.rowNode,void 0,gui.element,void 0,!0),rowDragBean=this.createBean(rowDragComp,this.beans.context);this.rowDragComps.push(rowDragBean),gui.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(r=>r!==rowDragBean),this.destroyBean(rowDragBean,this.beans.context)})}setupFullWidth(gui){const pinned=this.getPinnedForContainer(gui.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const compDetails=this.createFullWidthCompDetails(gui.element,pinned);gui.rowComp.showFullWidth(compDetails)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var _a253,_b;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(gui=>{var _a254;return(_a254=gui==null?void 0:gui.rowComp)==null?void 0:_a254.getFullWidthCellRenderer()}):[(_b=(_a253=this.fullWidthGui)==null?void 0:_a253.rowComp)==null?void 0:_b.getFullWidthCellRenderer()]}getCellElement(column){const cellCtrl=this.getCellCtrl(column);return cellCtrl?cellCtrl.getGui():null}executeProcessRowPostCreateFunc(){const func=this.gos.getCallback("processRowPostCreate");if(!func||!this.areAllContainersReady())return;const params={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};func(params)}areAllContainersReady(){const isLeftReady=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),isCenterReady=!!this.centerGui,isRightReady=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return isLeftReady&&isCenterReady&&isRightReady}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const isFullWidthCellFunc=this.beans.gos.getCallback("isFullWidthRow");return isFullWidthCellFunc?isFullWidthCellFunc({rowNode:this.rowNode}):!1}setRowType(){const isStub=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),isFullWidthCell=this.isNodeFullWidthCell(),isDetailCell=this.gos.get("masterDetail")&&this.rowNode.detail,pivotMode=this.beans.columnModel.isPivotMode(),isFullWidthGroup=!!this.rowNode.group&&!this.rowNode.footer&&_isGroupUseEntireRow(this.gos,pivotMode);isStub?this.rowType="FullWidthLoading":isDetailCell?this.rowType="FullWidthDetail":isFullWidthCell?this.rowType="FullWidth":isFullWidthGroup?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(suppressAnimationFrame=!1,useFlushSync=!1){if(this.isFullWidth())return;if(suppressAnimationFrame||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(useFlushSync);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(prev,cols,pinned=null){const res={list:[],map:{}},addCell=__name((colInstanceId,cellCtrl)=>{res.list.push(cellCtrl),res.map[colInstanceId]=cellCtrl},"addCell");return cols.forEach(col=>{const colInstanceId=col.getInstanceId();let cellCtrl=prev.map[colInstanceId];cellCtrl||(cellCtrl=new CellCtrl(col,this.rowNode,this.beans,this)),addCell(colInstanceId,cellCtrl)}),prev.list.forEach(prevCellCtrl=>{const colInstanceId=prevCellCtrl.getColumn().getInstanceId();if(res.map[colInstanceId]!=null)return;if(!this.isCellEligibleToBeRemoved(prevCellCtrl,pinned)){addCell(colInstanceId,prevCellCtrl);return}prevCellCtrl.destroy()}),res}updateColumnListsImpl(useFlushSync){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(useFlushSync)}setCellCtrls(useFlushSync){this.allRowGuis.forEach(item=>{const cellControls=this.getCellCtrlsForContainer(item.containerType);item.rowComp.setCellCtrls(cellControls,useFlushSync)})}getCellCtrlsForContainer(containerType){switch(containerType){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const columnViewportService=this.beans.columnViewportService,presentedColsService=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,presentedColsService.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const centerCols=columnViewportService.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,centerCols);const leftCols=presentedColsService.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,leftCols,"left");const rightCols=presentedColsService.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,rightCols,"right")}}isCellEligibleToBeRemoved(cellCtrl,nextContainerPinned){if(cellCtrl.getColumn().getPinned()!=nextContainerPinned)return!0;const editing=cellCtrl.isEditing(),focused=this.beans.focusService.isCellFocused(cellCtrl.getCellPosition());if(editing||focused){const column2=cellCtrl.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(column2)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||_isDomLayout(this.gos,"print")}listenOnDomOrder(gui){const listener=__name(()=>{gui.rowComp.setDomOrder(this.getDomOrder())},"listener");gui.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],listener)}setAnimateFlags(animateIn){if(this.isSticky()||!animateIn)return;const oldRowTopExists=_exists(this.rowNode.oldRowTop),pinningLeft=this.beans.visibleColsService.isPinningLeft(),pinningRight=this.beans.visibleColsService.isPinningRight();if(oldRowTopExists){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=pinningLeft,this.slideInAnimation.right=pinningRight}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=pinningLeft,this.fadeInAnimation.right=pinningRight}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const tryRefresh=__name((gui,pinned)=>gui?gui.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(gui.element,pinned).params):!0,"tryRefresh"),fullWidthSuccess=tryRefresh(this.fullWidthGui,null),centerSuccess=tryRefresh(this.centerGui,null),leftSuccess=tryRefresh(this.leftGui,"left"),rightSuccess=tryRefresh(this.rightGui,"right");return fullWidthSuccess&&centerSuccess&&leftSuccess&&rightSuccess}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:__name(()=>this.onRowHeightChanged(),"heightChanged"),rowSelected:__name(()=>this.onRowSelected(),"rowSelected"),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:__name(()=>this.updateColumnLists(),"columnMoved")}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(gui=>{this.addRowDraggerToRow(gui)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:__name(()=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onRowIndexChanged())},"rowIndexChanged"),cellChanged:__name(event=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onCellChanged(event))},"cellChanged")})}onRowNodeDataChanged(event){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.refreshCell({suppressFlash:!event.update,newData:!event.update})),this.allRowGuis.forEach(gui=>{this.setRowCompRowId(gui.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(gui.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const highlighted=this.rowNode.highlighted;this.allRowGuis.forEach(gui=>{const aboveOn=highlighted===0,belowOn=highlighted===1;gui.rowComp.addOrRemoveCssClass("ag-row-highlight-above",aboveOn),gui.rowComp.addOrRemoveCssClass("ag-row-highlight-below",belowOn)})}postProcessRowDragging(){const dragging=this.rowNode.dragging;this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass("ag-row-dragging",dragging))}updateExpandedCss(){const expandable=this.rowNode.isExpandable(),expanded=this.rowNode.expanded==!0;this.allRowGuis.forEach(gui=>{gui.rowComp.addOrRemoveCssClass("ag-row-group",expandable),gui.rowComp.addOrRemoveCssClass("ag-row-group-expanded",expandable&&expanded),gui.rowComp.addOrRemoveCssClass("ag-row-group-contracted",expandable&&!expanded),_setAriaExpanded(gui.element,expandable&&expanded)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:_makeNull(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(target){return this.allRowGuis.find(c=>c.element.contains(target))}onKeyboardNavigate(keyboardEvent){const currentFullWidthComp=this.findFullWidthRowGui(keyboardEvent.target);if(!((currentFullWidthComp?currentFullWidthComp.element:null)===keyboardEvent.target))return;const node=this.rowNode,lastFocusedCell=this.beans.focusService.getFocusedCell(),cellPosition={rowIndex:node.rowIndex,rowPinned:node.rowPinned,column:(lastFocusedCell==null?void 0:lastFocusedCell.column)??this.getColumnForFullWidth(currentFullWidthComp)};this.beans.navigationService.navigateToNextCell(keyboardEvent,keyboardEvent.key,cellPosition,!0),keyboardEvent.preventDefault()}onTabKeyDown(keyboardEvent){if(keyboardEvent.defaultPrevented||_isStopPropagationForAgGrid(keyboardEvent))return;const currentFullWidthComp=this.allRowGuis.find(c=>c.element.contains(keyboardEvent.target)),currentFullWidthContainer=currentFullWidthComp?currentFullWidthComp.element:null,isFullWidthContainerFocused=currentFullWidthContainer===keyboardEvent.target,activeEl=_getActiveDomElement(this.gos);let isDetailGridCellFocused=!1;currentFullWidthContainer&&activeEl&&(isDetailGridCellFocused=currentFullWidthContainer.contains(activeEl)&&activeEl.classList.contains("ag-cell"));let nextEl=null;!isFullWidthContainerFocused&&!isDetailGridCellFocused&&(nextEl=this.beans.focusService.findNextFocusableElement(currentFullWidthContainer,!1,keyboardEvent.shiftKey)),(this.isFullWidth()&&isFullWidthContainerFocused||!nextEl)&&this.beans.navigationService.onTabKeyDown(this,keyboardEvent)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var _a253;const displayedEl=(_a253=this.allRowGuis.find(el=>_isVisible(el.element)))==null?void 0:_a253.element;return displayedEl?displayedEl.getBoundingClientRect().top:0}onSuppressCellFocusChanged(suppressCellFocus){const tabIndex=this.isFullWidth()&&suppressCellFocus?void 0:-1;this.allRowGuis.forEach(gui=>{_addOrRemoveAttribute(gui.element,"tabindex",tabIndex)})}onFullWidthRowFocused(event){var _a253;const node=this.rowNode,isFocused=event?this.isFullWidth()&&event.rowIndex===node.rowIndex&&event.rowPinned==node.rowPinned:!1,element=this.fullWidthGui?this.fullWidthGui.element:(_a253=this.centerGui)==null?void 0:_a253.element;element&&(element.classList.toggle("ag-full-width-focus",isFocused),isFocused&&(event!=null&&event.forceBrowserFocus)&&element.focus({preventScroll:!0}))}recreateCell(cellCtrl){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,cellCtrl),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,cellCtrl),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,cellCtrl),cellCtrl.destroy(),this.updateColumnLists()}removeCellCtrl(prev,cellCtrlToRemove){const res={list:[],map:{}};return prev.list.forEach(cellCtrl=>{cellCtrl!==cellCtrlToRemove&&(res.list.push(cellCtrl),res.map[cellCtrl.getColumn().getInstanceId()]=cellCtrl)}),res}onMouseEvent(eventName,mouseEvent){switch(eventName){case"dblclick":this.onRowDblClick(mouseEvent);break;case"click":this.onRowClick(mouseEvent);break;case"touchstart":case"mousedown":this.onRowMouseDown(mouseEvent);break}}createRowEvent(type,domEvent){return this.gos.addGridCommonParams({type,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:domEvent})}createRowEventWithSource(type,domEvent){const event=this.createRowEvent(type,domEvent);return event.source=this,event}onRowDblClick(mouseEvent){_isStopPropagationForAgGrid(mouseEvent)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",mouseEvent))}getColumnForFullWidth(fullWidthRowGui){const{visibleColsService}=this.beans;switch(fullWidthRowGui==null?void 0:fullWidthRowGui.containerType){case"center":return visibleColsService.getCenterCols()[0];case"left":return visibleColsService.getLeftCols()[0];case"right":return visibleColsService.getRightCols()[0];default:return visibleColsService.getAllCols()[0]}}onRowMouseDown(mouseEvent){if(this.lastMouseDownOnDragger=_isElementChildOfClass(mouseEvent.target,"ag-row-drag",3),!this.isFullWidth())return;const node=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const fullWidthRowGui=this.findFullWidthRowGui(mouseEvent.target),element=fullWidthRowGui==null?void 0:fullWidthRowGui.element,target=mouseEvent.target;let forceBrowserFocus=!0;element&&element.contains(target)&&_isFocusableFormField(target)&&(forceBrowserFocus=!1),this.beans.focusService.setFocusedCell({rowIndex:node.rowIndex,column:this.getColumnForFullWidth(fullWidthRowGui),rowPinned:node.rowPinned,forceBrowserFocus})}onRowClick(mouseEvent){if(_isStopPropagationForAgGrid(mouseEvent)||this.lastMouseDownOnDragger)return;const{gos}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",mouseEvent));const isMultiKey=mouseEvent.ctrlKey||mouseEvent.metaKey,isShiftKey=mouseEvent.shiftKey,isSelected=this.rowNode.isSelected();if(_getGroupSelectsDescendants(gos)&&this.rowNode.group||this.isRowSelectionBlocked()||!_getEnableSelection(gos)&&!isSelected||!_getEnableDeselection(gos)&&isSelected)return;const multiSelectOnClick=_getEnableSelectionWithoutKeys(gos),rowDeselectionWithCtrl=_getEnableDeselection(gos),source="rowClicked";if(isSelected)multiSelectOnClick?this.rowNode.setSelectedParams({newValue:!1,event:mouseEvent,source}):isMultiKey?rowDeselectionWithCtrl&&this.rowNode.setSelectedParams({newValue:!1,event:mouseEvent,source}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!isShiftKey,rangeSelect:isShiftKey,event:mouseEvent,source});else{const clearSelection=multiSelectOnClick?!1:!isMultiKey;this.rowNode.setSelectedParams({newValue:!0,clearSelection,rangeSelect:isShiftKey,event:mouseEvent,source})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!_isRowSelection(this.gos)}setupDetailRowAutoHeight(eDetailGui){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const checkRowSizeFunc=__name(()=>{const clientHeight=eDetailGui.clientHeight;if(clientHeight!=null&&clientHeight>0){const updateRowHeightFunc=__name(()=>{this.rowNode.setRowHeight(clientHeight),(_isClientSideRowModel(this.gos)||_isServerSideRowModel(this.gos))&&this.beans.rowModel.onRowHeightChanged()},"updateRowHeightFunc");window.setTimeout(updateRowHeightFunc,0)}},"checkRowSizeFunc"),resizeObserverDestroyFunc=this.beans.resizeObserverService.observeResize(eDetailGui,checkRowSizeFunc);this.addDestroyFunc(resizeObserverDestroyFunc),checkRowSizeFunc()}createFullWidthCompDetails(eRow,pinned){const{gos,rowNode}=this,params=gos.addGridCommonParams({fullWidth:!0,data:rowNode.data,node:rowNode,value:rowNode.key,valueFormatted:rowNode.key,eGridCell:eRow,eParentOfValue:eRow,pinned,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:__name((rowDraggerElement,dragStartPixels,value,suppressVisibilityChange)=>this.addFullWidthRowDragging(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange),"registerRowDragger"),setTooltip:__name((value,shouldDisplayTooltip)=>this.refreshRowTooltip(value,shouldDisplayTooltip),"setTooltip")}),compFactory=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return compFactory.getFullWidthDetailCellRendererDetails(params);case"FullWidthGroup":return compFactory.getFullWidthGroupCellRendererDetails(params);case"FullWidthLoading":return compFactory.getFullWidthLoadingCellRendererDetails(params);default:return compFactory.getFullWidthCellRendererDetails(params)}}refreshRowTooltip(value,shouldDisplayTooltip){if(!this.fullWidthGui)return;const tooltipParams={getGui:__name(()=>this.fullWidthGui.element,"getGui"),getTooltipValue:__name(()=>value,"getTooltipValue"),getLocation:__name(()=>"fullWidthRow","getLocation"),shouldDisplayTooltip};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new TooltipFeature(tooltipParams,this.beans))}addFullWidthRowDragging(rowDraggerElement,dragStartPixels,value="",suppressVisibilityChange){if(!this.isFullWidth())return;const rowDragComp=new RowDragComp(()=>value,this.rowNode,void 0,rowDraggerElement,dragStartPixels,suppressVisibilityChange);this.createBean(rowDragComp,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(rowDragComp,this.beans.context)})}onUiLevelChanged(){const newLevel=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=newLevel){const classToAdd="ag-row-level-"+newLevel,classToRemove="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(gui=>{gui.rowComp.addOrRemoveCssClass(classToAdd,!0),gui.rowComp.addOrRemoveCssClass(classToRemove,!1)})}this.rowLevel=newLevel}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const newFirst=this.isFirstRowOnPage(),newLast=this.isLastRowOnPage();this.firstRowOnPage!==newFirst&&(this.firstRowOnPage=newFirst,this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass("ag-row-first",newFirst))),this.lastRowOnPage!==newLast&&(this.lastRowOnPage=newLast,this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass("ag-row-last",newLast)))}stopEditing(cancel=!1){var _a253;this.stoppingRowEdit||(_a253=this.beans.rowEditService)==null||_a253.stopEditing(this,cancel)}setInlineEditingCss(){const editing=this.editingRow||this.getAllCellCtrls().some(cellCtrl=>cellCtrl.isEditing());this.allRowGuis.forEach(gui=>{gui.rowComp.addOrRemoveCssClass("ag-row-inline-editing",editing),gui.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!editing)})}setEditingRow(value){this.editingRow=value}startRowEditing(key=null,sourceRenderedCell=null,event=null){var _a253;return this.editingRow?!0:((_a253=this.beans.rowEditService)==null?void 0:_a253.startEditing(this,key,sourceRenderedCell,event))??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const cssClasses=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!cssClasses||!cssClasses.length||cssClasses.forEach(classStr=>{this.allRowGuis.forEach(c=>c.rowComp.addOrRemoveCssClass(classStr,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,className=>{this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass(className,!0))},className=>{this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass(className,!1))})}setStylesFromGridOptions(updateStyles,gui){updateStyles&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(gui,gui2=>gui2.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(rowContainerType){return rowContainerType==="left"||rowContainerType==="right"?rowContainerType:null}getInitialRowClasses(rowContainerType){const pinned=this.getPinnedForContainer(rowContainerType),params={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[rowContainerType],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned};return this.beans.rowCssClassCalculator.getInitialRowClasses(params)}processStylesFromGridOptions(){const rowStyle=this.gos.get("rowStyle");if(rowStyle&&typeof rowStyle=="function"){_warnOnce("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const rowStyleFunc=this.gos.getCallback("getRowStyle");let rowStyleFuncResult;if(rowStyleFunc){const params={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};rowStyleFuncResult=rowStyleFunc(params)}return rowStyleFuncResult||rowStyle?Object.assign({},rowStyle,rowStyleFuncResult):this.emptyStyle}onRowSelected(gui){const selected=!!this.rowNode.isSelected();this.forEachGui(gui,gui2=>{gui2.rowComp.addOrRemoveCssClass("ag-row-selected",selected),_setAriaSelected(gui2.element,selected),gui2.element.contains(_getActiveDomElement(this.gos))&&(gui2===this.centerGui||gui2===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const selected=this.rowNode.isSelected();if(selected&&!_getEnableDeselection(this.gos))return;const label=this.beans.localeService.getLocaleTextFunc()(selected?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${selected?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(label,"rowSelection")}addHoverFunctionality(eGui){if(!this.active)return;const{element,compBean}=eGui,{rowNode,beans,gos}=this;compBean.addManagedListeners(element,{mouseenter:__name(()=>rowNode.onMouseEnter(),"mouseenter"),mouseleave:__name(()=>rowNode.onMouseLeave(),"mouseleave")}),compBean.addManagedListeners(rowNode,{mouseEnter:__name(()=>{!beans.dragService.isDragging()&&!gos.get("suppressRowHoverHighlight")&&(element.classList.add("ag-row-hover"),rowNode.setHovered(!0))},"mouseEnter"),mouseLeave:__name(()=>{element.classList.remove("ag-row-hover"),rowNode.setHovered(!1)},"mouseLeave")})}roundRowTopToBounds(rowTop){const range=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),minPixel=this.applyPaginationOffset(range.top,!0)-100,maxPixel=this.applyPaginationOffset(range.bottom,!0)+100;return Math.min(Math.max(minPixel,rowTop),maxPixel)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(gui,callback){gui?callback(gui):this.allRowGuis.forEach(callback)}onRowHeightChanged(gui){if(this.rowNode.rowHeight==null)return;const rowHeight=this.rowNode.rowHeight,defaultRowHeight=this.beans.environment.getDefaultRowHeight(),heightFromFunc=_isGetRowHeightFunction(this.gos)?_getRowHeightForNode(this.gos,this.rowNode).height:void 0,lineHeight=heightFromFunc?`${Math.min(defaultRowHeight,heightFromFunc)-2}px`:void 0;this.forEachGui(gui,gui2=>{gui2.element.style.height=`${rowHeight}px`,lineHeight&&gui2.element.style.setProperty("--ag-line-height",lineHeight)})}addEventListener(eventType,listener){super.addEventListener(eventType,listener)}removeEventListener(eventType,listener){super.removeEventListener(eventType,listener)}destroyFirstPass(suppressAnimation=!1){if(this.active=!1,!suppressAnimation&&_isAnimateRows(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){const rowTop=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(rowTop)}else this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const event=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(event),this.beans.eventService.dispatchEvent(event),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const destroyCellCtrls=__name(ctrls=>(ctrls.list.forEach(c=>c.destroy()),{list:[],map:{}}),"destroyCellCtrls");this.centerCellCtrls=destroyCellCtrls(this.centerCellCtrls),this.leftCellCtrls=destroyCellCtrls(this.leftCellCtrls),this.rightCellCtrls=destroyCellCtrls(this.rightCellCtrls)}setFocusedClasses(gui){this.forEachGui(gui,gui2=>{gui2.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),gui2.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const rowFocused=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);rowFocused!==this.rowFocused&&(this.rowFocused=rowFocused,this.setFocusedClasses()),!rowFocused&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){var _a253;const currentPage=((_a253=this.beans.paginationService)==null?void 0:_a253.getCurrentPage())??0;this.paginationPage!==currentPage&&(this.paginationPage=currentPage,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(topPx,reverse=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return topPx;const pixelOffset=this.beans.pageBoundsService.getPixelOffset();return topPx+pixelOffset*(reverse?1:-1)}setRowTop(pixels){if(!this.printLayout&&_exists(pixels)){const afterPaginationPixels=this.applyPaginationOffset(pixels),topPx=`${this.rowNode.isRowPinned()||this.rowNode.sticky?afterPaginationPixels:this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels)}px`;this.setRowTopStyle(topPx)}}getInitialRowTop(rowContainerType){return this.suppressRowTransform?this.getInitialRowTopShared(rowContainerType):void 0}getInitialTransform(rowContainerType){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(rowContainerType)})`}getInitialRowTopShared(rowContainerType){if(this.printLayout)return"";const rowNode=this.rowNode;let rowTop;if(this.isSticky())rowTop=rowNode.stickyRowTop;else{const pixels=this.slideInAnimation[rowContainerType]?this.roundRowTopToBounds(rowNode.oldRowTop):rowNode.rowTop,afterPaginationPixels=this.applyPaginationOffset(pixels);rowTop=rowNode.isRowPinned()?afterPaginationPixels:this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels)}return rowTop+"px"}setRowTopStyle(topPx){this.allRowGuis.forEach(gui=>this.suppressRowTransform?gui.rowComp.setTop(topPx):gui.rowComp.setTransform(`translateY(${topPx})`))}getRowNode(){return this.rowNode}getCellCtrl(column){let res=null;return this.getAllCellCtrls().forEach(cellCtrl=>{cellCtrl.getColumn()==column&&(res=cellCtrl)}),res!=null||this.getAllCellCtrls().forEach(cellCtrl=>{cellCtrl.getColSpanningList().indexOf(column)>=0&&(res=cellCtrl)}),res}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(gui){var _a253;const rowIndexStr=this.rowNode.getRowIndexString();if(rowIndexStr===null)return;const headerRowCount=this.beans.headerNavigationService.getHeaderRowCount()+(((_a253=this.beans.filterManager)==null?void 0:_a253.getHeaderRowCount())??0),rowIsEven=this.rowNode.rowIndex%2===0,ariaRowIndex=headerRowCount+this.rowNode.rowIndex+1;this.forEachGui(gui,c=>{c.rowComp.setRowIndex(rowIndexStr),c.rowComp.addOrRemoveCssClass("ag-row-even",rowIsEven),c.rowComp.addOrRemoveCssClass("ag-row-odd",!rowIsEven),_setAriaRowIndex(c.element,ariaRowIndex)})}setStoppingRowEdit(stoppingRowEdit){this.stoppingRowEdit=stoppingRowEdit}},__name(_a131,"_RowCtrl"),_a131);_RowCtrl.DOM_DATA_KEY_ROW_CTRL="renderedRow";var RowCtrl=_RowCtrl,_a132,RowContainerEventsFeature=(_a132=class extends BeanStub{wireBeans(beans){this.mouseEventService=beans.mouseEventService,this.valueService=beans.valueService,this.menuService=beans.menuService,this.ctrlsService=beans.ctrlsService,this.navigationService=beans.navigationService,this.focusService=beans.focusService,this.undoRedoService=beans.undoRedoService,this.visibleColsService=beans.visibleColsService,this.rowModel=beans.rowModel,this.pinnedRowModel=beans.pinnedRowModel,this.rangeService=beans.rangeService,this.clipboardService=beans.clipboardService}constructor(element){super(),this.element=element}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const eventName="keydown",listener=this.processKeyboardEvent.bind(this,eventName);this.addManagedElementListeners(this.element,{[eventName]:listener})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",_isEventSupported("touchstart")?"touchstart":"mousedown"].forEach(eventName=>{const listener=this.processMouseEvent.bind(this,eventName);this.addManagedElementListeners(this.element,{[eventName]:listener})})}processMouseEvent(eventName,mouseEvent){if(!this.mouseEventService.isEventFromThisGrid(mouseEvent)||_isStopPropagationForAgGrid(mouseEvent))return;const rowComp=this.getRowForEvent(mouseEvent),cellCtrl=this.mouseEventService.getRenderedCellForEvent(mouseEvent);eventName==="contextmenu"?this.handleContextMenuMouseEvent(mouseEvent,void 0,rowComp,cellCtrl):(cellCtrl&&cellCtrl.onMouseEvent(eventName,mouseEvent),rowComp&&rowComp.onMouseEvent(eventName,mouseEvent))}mockContextMenuForIPad(){if(!_isIOSUserAgent())return;const touchListener=new TouchListener(this.element),longTapListener=__name(event=>{const rowComp=this.getRowForEvent(event.touchEvent),cellComp=this.mouseEventService.getRenderedCellForEvent(event.touchEvent);this.handleContextMenuMouseEvent(void 0,event.touchEvent,rowComp,cellComp)},"longTapListener");this.addManagedListeners(touchListener,{longTap:longTapListener}),this.addDestroyFunc(()=>touchListener.destroy())}getRowForEvent(event){let sourceElement=event.target;for(;sourceElement;){const rowCon=_getDomData(this.gos,sourceElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL);if(rowCon)return rowCon;sourceElement=sourceElement.parentElement}return null}handleContextMenuMouseEvent(mouseEvent,touchEvent,rowComp,cellCtrl){const rowNode=rowComp?rowComp.getRowNode():null,column=cellCtrl?cellCtrl.getColumn():null;let value=null;if(column){const event=mouseEvent||touchEvent;cellCtrl.dispatchCellContextMenuEvent(event??null),value=this.valueService.getValue(column,rowNode)}const gridBodyCon=this.ctrlsService.getGridBodyCtrl(),anchorToElement=cellCtrl?cellCtrl.getGui():gridBodyCon.getGridBodyElement();this.menuService.showContextMenu({mouseEvent,touchEvent,rowNode,column,value,anchorToElement})}getControlsForEventTarget(target){return{cellCtrl:_getCtrlForEventTarget(this.gos,target,CellCtrl.DOM_DATA_KEY_CELL_CTRL),rowCtrl:_getCtrlForEventTarget(this.gos,target,RowCtrl.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(eventName,keyboardEvent){const{cellCtrl,rowCtrl}=this.getControlsForEventTarget(keyboardEvent.target);keyboardEvent.defaultPrevented||(cellCtrl?this.processCellKeyboardEvent(cellCtrl,eventName,keyboardEvent):rowCtrl&&rowCtrl.isFullWidth()&&this.processFullWidthRowKeyboardEvent(rowCtrl,eventName,keyboardEvent))}processCellKeyboardEvent(cellCtrl,eventName,keyboardEvent){const rowNode=cellCtrl.getRowNode(),column=cellCtrl.getColumn(),editing=cellCtrl.isEditing();!_isUserSuppressingKeyboardEvent(this.gos,keyboardEvent,rowNode,column,editing)&&eventName==="keydown"&&(!editing&&this.navigationService.handlePageScrollingKey(keyboardEvent)||cellCtrl.onKeyDown(keyboardEvent),this.doGridOperations(keyboardEvent,cellCtrl.isEditing()),_isEventFromPrintableCharacter(keyboardEvent)&&cellCtrl.processCharacter(keyboardEvent)),eventName==="keydown"&&this.eventService.dispatchEvent(cellCtrl.createEvent(keyboardEvent,"cellKeyDown"))}processFullWidthRowKeyboardEvent(rowComp,eventName,keyboardEvent){const rowNode=rowComp.getRowNode(),focusedCell=this.focusService.getFocusedCell(),column=focusedCell&&focusedCell.column;if(!_isUserSuppressingKeyboardEvent(this.gos,keyboardEvent,rowNode,column,!1)){const key=keyboardEvent.key;if(eventName==="keydown")switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:this.navigationService.handlePageScrollingKey(keyboardEvent,!0);break;case KeyCode.UP:case KeyCode.DOWN:rowComp.onKeyboardNavigate(keyboardEvent);break;case KeyCode.TAB:rowComp.onTabKeyDown(keyboardEvent);break}}eventName==="keydown"&&this.eventService.dispatchEvent(rowComp.createRowEvent("cellKeyDown",keyboardEvent))}doGridOperations(keyboardEvent,editing){if(!keyboardEvent.ctrlKey&&!keyboardEvent.metaKey||editing||!this.mouseEventService.isEventFromThisGrid(keyboardEvent))return;const keyCode=_normaliseQwertyAzerty(keyboardEvent);if(keyCode===KeyCode.A)return this.onCtrlAndA(keyboardEvent);if(keyCode===KeyCode.C)return this.onCtrlAndC(keyboardEvent);if(keyCode===KeyCode.D)return this.onCtrlAndD(keyboardEvent);if(keyCode===KeyCode.V)return this.onCtrlAndV(keyboardEvent);if(keyCode===KeyCode.X)return this.onCtrlAndX(keyboardEvent);if(keyCode===KeyCode.Y)return this.onCtrlAndY();if(keyCode===KeyCode.Z)return this.onCtrlAndZ(keyboardEvent)}onCtrlAndA(event){const{pinnedRowModel,rowModel,rangeService}=this;if(rangeService&&rowModel.isRowsToRender()){const[isEmptyPinnedTop,isEmptyPinnedBottom]=[pinnedRowModel.isEmpty("top"),pinnedRowModel.isEmpty("bottom")],floatingStart=isEmptyPinnedTop?null:"top";let floatingEnd,rowEnd;isEmptyPinnedBottom?(floatingEnd=null,rowEnd=rowModel.getRowCount()-1):(floatingEnd="bottom",rowEnd=pinnedRowModel.getPinnedBottomRowCount()-1);const allDisplayedColumns=this.visibleColsService.getAllCols();if(_missingOrEmpty(allDisplayedColumns))return;rangeService.setCellRange({rowStartIndex:0,rowStartPinned:floatingStart,rowEndIndex:rowEnd,rowEndPinned:floatingEnd,columnStart:allDisplayedColumns[0],columnEnd:_last(allDisplayedColumns)})}event.preventDefault()}onCtrlAndC(event){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl,rowCtrl}=this.getControlsForEventTarget(event.target);cellCtrl!=null&&cellCtrl.isEditing()||rowCtrl!=null&&rowCtrl.isEditing()||(event.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(event){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl,rowCtrl}=this.getControlsForEventTarget(event.target);cellCtrl!=null&&cellCtrl.isEditing()||rowCtrl!=null&&rowCtrl.isEditing()||(event.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(event){const{cellCtrl,rowCtrl}=this.getControlsForEventTarget(event.target);cellCtrl!=null&&cellCtrl.isEditing()||rowCtrl!=null&&rowCtrl.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(event){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),event.preventDefault()}onCtrlAndZ(event){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(event.preventDefault(),event.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){var _a253;(_a253=this.undoRedoService)==null||_a253.redo("ui")}},__name(_a132,"RowContainerEventsFeature"),_a132),_a133,SetPinnedLeftWidthFeature=(_a133=class extends BeanStub{wireBeans(beans){this.pinnedWidthService=beans.pinnedWidthService}constructor(element){super(),this.element=element}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const leftWidth=this.pinnedWidthService.getPinnedLeftWidth(),displayed=leftWidth>0;_setDisplayed(this.element,displayed),_setFixedWidth(this.element,leftWidth)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},__name(_a133,"SetPinnedLeftWidthFeature"),_a133),_a134,SetPinnedRightWidthFeature=(_a134=class extends BeanStub{wireBeans(beans){this.pinnedWidthService=beans.pinnedWidthService}constructor(element){super(),this.element=element}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const rightWidth=this.pinnedWidthService.getPinnedRightWidth(),displayed=rightWidth>0;_setDisplayed(this.element,displayed),_setFixedWidth(this.element,rightWidth)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},__name(_a134,"SetPinnedRightWidthFeature"),_a134),getTopRowCtrls=__name(r=>r.getTopRowCtrls(),"getTopRowCtrls"),getStickyTopRowCtrls=__name(r=>r.getStickyTopRowCtrls(),"getStickyTopRowCtrls"),getStickyBottomRowCtrls=__name(r=>r.getStickyBottomRowCtrls(),"getStickyBottomRowCtrls"),getBottomRowCtrls=__name(r=>r.getBottomRowCtrls(),"getBottomRowCtrls"),getCentreRowCtrls=__name(r=>r.getCentreRowCtrls(),"getCentreRowCtrls"),ContainerCssClasses={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:getCentreRowCtrls},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:getCentreRowCtrls},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:getCentreRowCtrls},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:getCentreRowCtrls},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:getTopRowCtrls},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:getTopRowCtrls},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:getTopRowCtrls},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:getTopRowCtrls},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:getStickyTopRowCtrls},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:getStickyTopRowCtrls},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:getStickyTopRowCtrls},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:getStickyTopRowCtrls},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:getStickyBottomRowCtrls},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:getStickyBottomRowCtrls},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:getStickyBottomRowCtrls},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:getStickyBottomRowCtrls},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:getBottomRowCtrls},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:getBottomRowCtrls},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:getBottomRowCtrls},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:getBottomRowCtrls}};function _getRowContainerOptions(name){return ContainerCssClasses[name]}__name(_getRowContainerOptions,"_getRowContainerOptions");var allTopNoFW=["topCenter","topLeft","topRight"],allBottomNoFW=["bottomCenter","bottomLeft","bottomRight"],allMiddleNoFW=["center","left","right"],allMiddle=["center","left","right","fullWidth"],allCenter=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],allLeft=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],allRight=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],allStickyTopNoFW=["stickyTopCenter","stickyTopLeft","stickyTopRight"],allStickyBottomNoFW=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],allStickyContainers=[...allStickyTopNoFW,"stickyTopFullWidth",...allStickyBottomNoFW,"stickyBottomFullWidth"],allNoFW=[...allTopNoFW,...allBottomNoFW,...allMiddleNoFW,...allStickyTopNoFW,...allStickyBottomNoFW],_a135,RowContainerCtrl=(_a135=class extends BeanStub{constructor(name){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=name,this.options=_getRowContainerOptions(name)}wireBeans(beans){this.dragService=beans.dragService,this.ctrlsService=beans.ctrlsService,this.columnViewportService=beans.columnViewportService,this.resizeObserverService=beans.resizeObserverService,this.rowRenderer=beans.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new ViewportSizeFeature(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(event){this.comp.setOffsetTop(`${event.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(names,callback){names.indexOf(this.name)>=0&&callback()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(view,eContainer,eViewport){this.comp=view,this.eContainer=eContainer,this.eViewport=eViewport,this.createManagedBean(new RowContainerEventsFeature(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const pinnedWidthChanged=__name(()=>this.onPinnedWidthChanged(),"pinnedWidthChanged");this.forContainers(allLeft,()=>{this.pinnedWidthFeature=this.createManagedBean(new SetPinnedLeftWidthFeature(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:pinnedWidthChanged})}),this.forContainers(allRight,()=>{this.pinnedWidthFeature=this.createManagedBean(new SetPinnedRightWidthFeature(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:pinnedWidthChanged})}),this.forContainers(allMiddle,()=>this.createManagedBean(new SetHeightFeature(this.eContainer,this.name==="center"?eViewport:void 0))),this.forContainers(allNoFW,()=>this.createManagedBean(new DragListenerFeature(this.eContainer))),this.forContainers(allCenter,()=>this.createManagedBean(new CenterWidthFeature(width=>this.comp.setContainerWidth(`${width}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(fn){this.addManagedElementListeners(this.getViewportElement(),{scroll:fn})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:__name(params=>this.onDisplayedRowsChanged(params.afterScroll),"displayedRowsChanged")}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(allStickyContainers.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const listener=__name(()=>{const isEnsureDomOrder=this.gos.get("ensureDomOrder"),isPrintLayout=_isDomLayout(this.gos,"print");this.comp.setDomOrder(isEnsureDomOrder||isPrintLayout)},"listener");this.addManagedPropertyListener("domLayout",listener),listener()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const preventScroll=__name(e=>{this.dragService.isDragging()&&e.cancelable&&e.preventDefault()},"preventScroll");this.eContainer.addEventListener("touchmove",preventScroll,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",preventScroll))}onHorizontalViewportChanged(afterScroll=!1){const scrollWidth=this.getCenterWidth(),scrollPosition=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(scrollWidth,scrollPosition,afterScroll)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return _getInnerWidth(this.eViewport)}getCenterViewportScrollLeft(){return _getScrollLeft(this.eViewport,this.enableRtl)}registerViewportResizeListener(listener){const unsubscribeFromResize=this.resizeObserverService.observeResize(this.eViewport,listener);this.addDestroyFunc(()=>unsubscribeFromResize())}isViewportInTheDOMTree(){return _isInDOM(this.eViewport)}getViewportScrollLeft(){return _getScrollLeft(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||_isHorizontalScrollShowing(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(offset){this.comp.setHorizontalScroll(offset)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(value){_setScrollLeft(this.eViewport,value,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const visible=this.isContainerVisible();this.visible!=visible&&(this.visible=visible,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(afterScroll=!1){const rows=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||rows.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const printLayout=_isDomLayout(this.gos,"print"),embedFW=this.gos.get("embedFullWidthRows")||printLayout,rowsThisContainer=rows.filter(rowCtrl=>{const fullWidthRow=rowCtrl.isFullWidth();return this.options.fullWidth?!embedFW&&fullWidthRow:embedFW||!fullWidthRow});this.comp.setRowCtrls({rowCtrls:rowsThisContainer,useFlushSync:afterScroll})}},__name(_a135,"RowContainerCtrl"),_a135),CSS_CLASS_FORCE_VERTICAL_SCROLL="ag-force-vertical-scroll",CSS_CLASS_CELL_SELECTABLE="ag-selectable",CSS_CLASS_COLUMN_MOVING="ag-column-moving",_a136,GridBodyCtrl=(_a136=class extends BeanStub{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(beans){this.animationFrameService=beans.animationFrameService,this.rowContainerHeightService=beans.rowContainerHeightService,this.ctrlsService=beans.ctrlsService,this.columnModel=beans.columnModel,this.columnSizeService=beans.columnSizeService,this.scrollVisibleService=beans.scrollVisibleService,this.menuService=beans.menuService,this.headerNavigationService=beans.headerNavigationService,this.dragAndDropService=beans.dragAndDropService,this.pinnedRowModel=beans.pinnedRowModel,this.rowRenderer=beans.rowRenderer,this.popupService=beans.popupService,this.mouseEventService=beans.mouseEventService,this.rowModel=beans.rowModel,this.filterManager=beans.filterManager,this.environment=beans.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(comp,eGridBody,eBodyViewport,eTop,eBottom,eStickyTop,eStickyBottom){var _a253;this.comp=comp,this.eGridBody=eGridBody,this.eBodyViewport=eBodyViewport,this.eTop=eTop,this.eBottom=eBottom,this.eStickyTop=eStickyTop,this.eStickyBottom=eStickyBottom,this.eCenterColsViewport=eBodyViewport.querySelector(`.${_getRowContainerOptions("center").viewport}`),this.eFullWidthContainer=eBodyViewport.querySelector(`.${_getRowContainerOptions("fullWidth").container}`),this.eStickyTopFullWidthContainer=eStickyTop.querySelector(`.${_getRowContainerOptions("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=eStickyBottom.querySelector(`.${_getRowContainerOptions("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",props=>this.setCellTextSelection(props.currentValue)),this.createManagedBean(new LayoutFeature(this.comp)),this.bodyScrollFeature=this.createManagedBean(new GridBodyScrollFeature(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([eTop,eBodyViewport,eBottom,eStickyTop,eStickyBottom]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(_a253=this.filterManager)==null||_a253.setupAdvancedFilterHeaderComp(eTop),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const setFloatingHeights=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:setFloatingHeights,pinnedHeightChanged:setFloatingHeights,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(elements){elements.forEach(element=>{this.addManagedElementListeners(element,{focusin:__name(e=>{const{target}=e,isFocusedElementNested=_isElementChildOfClass(target,"ag-root",element);element.classList.toggle("ag-has-focus",!isFocusedElementNested)},"focusin"),focusout:__name(e=>{const{target,relatedTarget}=e,gridContainRelatedTarget=element.contains(relatedTarget),isNestedRelatedTarget=_isElementChildOfClass(relatedTarget,"ag-root",element);_isElementChildOfClass(target,"ag-root",element)||(!gridContainRelatedTarget||isNestedRelatedTarget)&&element.classList.remove("ag-has-focus")},"focusout")})})}setColumnMovingCss(moving){this.comp.setColumnMovingCss(CSS_CLASS_COLUMN_MOVING,moving)}setCellTextSelection(selectable=!1){this.comp.setCellSelectableCss(CSS_CLASS_CELL_SELECTABLE,selectable)}onScrollVisibilityChanged(){const visible=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(visible),this.setStickyWidth(visible),this.setStickyBottomOffsetBottom();const scrollbarWidth=visible&&this.scrollVisibleService.getScrollbarWidth()||0,pad=_isInvisibleScrollbar()?16:0,width=`calc(100% + ${scrollbarWidth+pad}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(width)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const columns=this.columnModel.getCols();this.comp.setColumnCount(columns.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:__name(event=>{if(event.target instanceof HTMLImageElement)return event.preventDefault(),!1},"dragstart")})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const focusOutListener=__name(event=>{const elementWithFocus=event.relatedTarget;if(_getTabIndex(elementWithFocus)===null){this.rowRenderer.stopEditing();return}let clickInsideGrid=viewports.some(viewport=>viewport.contains(elementWithFocus))&&this.mouseEventService.isElementInThisGrid(elementWithFocus);if(!clickInsideGrid){const popupService=this.popupService;clickInsideGrid=popupService.getActivePopups().some(popup=>popup.contains(elementWithFocus))||popupService.isElementWithinCustomPopup(elementWithFocus)}clickInsideGrid||this.rowRenderer.stopEditing()},"focusOutListener"),viewports=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];viewports.forEach(viewport=>this.addManagedElementListeners(viewport,{focusout:focusOutListener}))}updateRowCount(){var _a253;const headerCount=this.headerNavigationService.getHeaderRowCount()+(((_a253=this.filterManager)==null?void 0:_a253.getHeaderRowCount())??0),rowCount=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,total=rowCount===-1?-1:headerCount+rowCount;this.comp.setRowCount(total)}registerBodyViewportResizeListener(listener){this.comp.registerBodyViewportResizeListener(listener)}setVerticalScrollPaddingVisible(visible){const overflowY=visible?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(overflowY)}isVerticalScrollShowing(){const show=this.gos.get("alwaysShowVerticalScroll"),cssClass=show?CSS_CLASS_FORCE_VERTICAL_SCROLL:null,allowVerticalScroll=_isDomLayout(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(cssClass,show),show||allowVerticalScroll&&_isVerticalScrollShowing(this.eBodyViewport)}setupRowAnimationCssClass(){let initialSizeMeasurementComplete=this.environment.hasMeasuredSizes();const updateAnimationClass=__name(()=>{const animateRows=initialSizeMeasurementComplete&&_isAnimateRows(this.gos)&&!this.rowContainerHeightService.isStretching(),animateRowsCssClass=animateRows?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(animateRowsCssClass,animateRows)},"updateAnimationClass");updateAnimationClass(),this.addManagedEventListeners({heightScaleChanged:updateAnimationClass}),this.addManagedPropertyListener("animateRows",updateAnimationClass),this.addManagedEventListeners({gridStylesChanged:__name(()=>{!initialSizeMeasurementComplete&&this.environment.hasMeasuredSizes()&&(initialSizeMeasurementComplete=!0,updateAnimationClass())},"gridStylesChanged")})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const listener=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:listener}),this.mockContextMenuForIPad(listener),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:__name(e=>this.onFullWidthContainerWheel(e),"wheel")})}onFullWidthContainerWheel(e){const{deltaX,deltaY,shiftKey}=e;(shiftKey||Math.abs(deltaX)>Math.abs(deltaY))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX,deltaY,shiftKey}=e,isHorizontalScroll=shiftKey||Math.abs(deltaX)>Math.abs(deltaY),target=e.target;isHorizontalScroll?(this.eStickyTopFullWidthContainer.contains(target)||this.eStickyBottomFullWidthContainer.contains(target))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(deltaY))}scrollGridBodyToMatchEvent(e){const{deltaX,deltaY}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:deltaX||deltaY})}onBodyViewportContextMenu(mouseEvent,touch,touchEvent){if(!mouseEvent&&!touchEvent)return;this.gos.get("preventDefaultOnContextMenu")&&(mouseEvent||touchEvent).preventDefault();const{target}=mouseEvent||touch;(target===this.eBodyViewport||target===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent,touchEvent,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(listener){if(!_isIOSUserAgent())return;const touchListener=new TouchListener(this.eBodyViewport),longTapListener=__name(event=>{listener(void 0,event.touchStart,event.touchEvent)},"longTapListener");this.addManagedListeners(touchListener,{longTap:longTapListener}),this.addDestroyFunc(()=>touchListener.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(pixels){const oldScrollPosition=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(oldScrollPosition+pixels),this.eBodyViewport.scrollTop-oldScrollPosition}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new RowDragFeature(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel}=this,floatingTopHeight=pinnedRowModel.getPinnedTopTotalHeight(),floatingBottomHeight=pinnedRowModel.getPinnedBottomTotalHeight();this.comp.setTopHeight(floatingTopHeight),this.comp.setBottomHeight(floatingBottomHeight),this.comp.setTopDisplay(floatingTopHeight?"inherit":"none"),this.comp.setBottomDisplay(floatingBottomHeight?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(height=0){this.comp.setStickyTopHeight(`${height}px`),this.stickyTopHeight=height}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(height=0){this.comp.setStickyBottomHeight(`${height}px`),this.stickyBottomHeight=height}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(vScrollVisible){if(!vScrollVisible)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const scrollbarWidth=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${scrollbarWidth}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${scrollbarWidth}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){var _a253;const headerHeight=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(((_a253=this.filterManager)==null?void 0:_a253.getHeaderHeight())??0),pinnedTopHeight=this.pinnedRowModel.getPinnedTopTotalHeight();let height=0;headerHeight>0&&(height+=headerHeight),pinnedTopHeight>0&&(height+=pinnedTopHeight),height>0&&(height+=1),this.comp.setStickyTopTop(`${height}px`)}setStickyBottomOffsetBottom(){const pinnedBottomHeight=this.pinnedRowModel.getPinnedBottomTotalHeight(),scrollbarWidth=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,height=pinnedBottomHeight+scrollbarWidth;this.comp.setStickyBottomBottom(`${height}px`)}sizeColumnsToFit(params,nextTimeout){const scrollWidthToRemove=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,availableWidth=_getInnerWidth(this.eGridBody)-scrollWidthToRemove;if(availableWidth>0){this.columnSizeService.sizeColumnsToFit(availableWidth,"sizeColumnsToFit",!1,params);return}nextTimeout===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(params,100)},0):nextTimeout===100?window.setTimeout(()=>{this.sizeColumnsToFit(params,500)},100):nextTimeout===500?window.setTimeout(()=>{this.sizeColumnsToFit(params,-1)},500):_warnOnce("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(listener){this.eBodyViewport.addEventListener("scroll",listener,{passive:!0})}removeScrollEventListener(listener){this.eBodyViewport.removeEventListener("scroll",listener)}},__name(_a136,"GridBodyCtrl"),_a136);function makeRowContainers(names){return names.map(name=>`<ag-row-container name="${name}"></ag-row-container>`).join("")}__name(makeRowContainers,"makeRowContainers");`${makeRowContainers(["topLeft","topCenter","topRight","topFullWidth"])}${makeRowContainers(["left","center","right","fullWidth"])}${makeRowContainers(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}${makeRowContainers(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}${makeRowContainers(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}`;var _a137,ScrollVisibleService=(_a137=class extends BeanStub{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(beans){this.ctrlsService=beans.ctrlsService,this.columnAnimationService=beans.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const centerRowCtrl=this.ctrlsService.get("center");if(!centerRowCtrl||this.columnAnimationService.isActive())return;const params={horizontalScrollShowing:centerRowCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(params),this.updateScrollGap()}updateScrollGap(){const centerRowCtrl=this.ctrlsService.get("center"),horizontalGap=centerRowCtrl.hasHorizontalScrollGap(),verticalGap=centerRowCtrl.hasVerticalScrollGap();(this.horizontalScrollGap!==horizontalGap||this.verticalScrollGap!==verticalGap)&&(this.horizontalScrollGap=horizontalGap,this.verticalScrollGap=verticalGap,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(params){(this.horizontalScrollShowing!==params.horizontalScrollShowing||this.verticalScrollShowing!==params.verticalScrollShowing)&&(this.horizontalScrollShowing=params.horizontalScrollShowing,this.verticalScrollShowing=params.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){const gridOptionsScrollbarWidth=this.gos.get("scrollbarWidth"),scrollbarWidth=typeof gridOptionsScrollbarWidth=="number"&&gridOptionsScrollbarWidth>=0?gridOptionsScrollbarWidth:_getScrollbarWidth();scrollbarWidth!=null&&(this.scrollbarWidth=scrollbarWidth,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},__name(_a137,"ScrollVisibleService"),_a137),GRID_DOM_KEY="__ag_grid_instance",_a138,_MouseEventService=(_a138=class extends BeanStub{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=_a138.gridInstanceSequence.next()}wireBeans(beans){this.ctrlsService=beans.ctrlsService}stampTopLevelGridCompWithGridInstance(eGridDiv){eGridDiv[GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(event){return _getCtrlForEventTarget(this.gos,event.target,CellCtrl.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(event){return this.isElementInThisGrid(event.target)}isElementInThisGrid(element){let pointer=element;for(;pointer;){const instanceId=pointer[GRID_DOM_KEY];if(_exists(instanceId))return instanceId===this.gridInstanceId;pointer=pointer.parentElement}return!1}getCellPositionForEvent(event){const cellComp=this.getRenderedCellForEvent(event);return cellComp?cellComp.getCellPosition():null}getNormalisedPosition(event){const gridPanelHasScrolls=_isDomLayout(this.gos,"normal"),e=event;let x,y;if(e.clientX!=null||e.clientY!=null?(x=e.clientX,y=e.clientY):(x=e.x,y=e.y),gridPanelHasScrolls){const gridBodyCon=this.ctrlsService.getGridBodyCtrl(),vRange=gridBodyCon.getScrollFeature().getVScrollPosition(),hRange=gridBodyCon.getScrollFeature().getHScrollPosition();x+=hRange.left,y+=vRange.top}return{x,y}}},__name(_a138,"_MouseEventService"),_a138);_MouseEventService.gridInstanceSequence=new NumberSequence;var MouseEventService=_MouseEventService,_a139,NavigationService=(_a139=class extends BeanStub{constructor(){super(),this.beanName="navigationService",this.onPageDown=_throttle(this.onPageDown,100),this.onPageUp=_throttle(this.onPageUp,100)}wireBeans(beans){this.mouseEventService=beans.mouseEventService,this.pageBoundsService=beans.pageBoundsService,this.focusService=beans.focusService,this.columnModel=beans.columnModel,this.visibleColsService=beans.visibleColsService,this.rowModel=beans.rowModel,this.ctrlsService=beans.ctrlsService,this.rowRenderer=beans.rowRenderer,this.headerNavigationService=beans.headerNavigationService,this.rowPositionUtils=beans.rowPositionUtils,this.cellNavigationService=beans.cellNavigationService,this.pinnedRowModel=beans.pinnedRowModel,this.scrollVisibleService=beans.scrollVisibleService,this.rangeService=beans.rangeService}postConstruct(){this.ctrlsService.whenReady(this,p=>{this.gridBodyCon=p.gridBodyCtrl})}handlePageScrollingKey(event,fromFullWidth=!1){const key=event.key,alt=event.altKey,ctrl=event.ctrlKey||event.metaKey,rangeServiceShouldHandleShift=!!this.rangeService&&event.shiftKey,currentCell=this.mouseEventService.getCellPositionForEvent(event);let processed=!1;switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:!ctrl&&!alt&&(this.onHomeOrEndKey(key),processed=!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.UP:case KeyCode.DOWN:if(!currentCell)return!1;ctrl&&!alt&&!rangeServiceShouldHandleShift&&(this.onCtrlUpDownLeftRight(key,currentCell),processed=!0);break;case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:!ctrl&&!alt&&(processed=this.handlePageUpDown(key,currentCell,fromFullWidth));break}return processed&&event.preventDefault(),processed}handlePageUpDown(key,currentCell,fromFullWidth){return fromFullWidth&&(currentCell=this.focusService.getFocusedCell()),currentCell?(key===KeyCode.PAGE_UP?this.onPageUp(currentCell):this.onPageDown(currentCell),!0):!1}navigateTo(navigateParams){var _a253;const{scrollIndex,scrollType,scrollColumn,focusIndex,focusColumn}=navigateParams;_exists(scrollColumn)&&!scrollColumn.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(scrollColumn),_exists(scrollIndex)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(scrollIndex,scrollType),navigateParams.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(focusIndex),this.focusService.setFocusedCell({rowIndex:focusIndex,column:focusColumn,rowPinned:null,forceBrowserFocus:!0}),(_a253=this.rangeService)==null||_a253.setRangeToCell({rowIndex:focusIndex,rowPinned:null,column:focusColumn})}onPageDown(gridCell){const scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),pixelsInOnePage=this.getViewportHeight(),pagingPixelOffset=this.pageBoundsService.getPixelOffset(),currentPageBottomPixel=scrollPosition.top+pixelsInOnePage,currentPageBottomRow=this.rowModel.getRowIndexAtPixel(currentPageBottomPixel+pagingPixelOffset);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(gridCell,currentPageBottomRow):this.navigateToNextPage(gridCell,currentPageBottomRow)}onPageUp(gridCell){const scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),pagingPixelOffset=this.pageBoundsService.getPixelOffset(),currentPageTopPixel=scrollPosition.top,currentPageTopRow=this.rowModel.getRowIndexAtPixel(currentPageTopPixel+pagingPixelOffset);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(gridCell,currentPageTopRow,!0):this.navigateToNextPage(gridCell,currentPageTopRow,!0)}navigateToNextPage(gridCell,scrollIndex,up=!1){const pixelsInOnePage=this.getViewportHeight(),firstRow=this.pageBoundsService.getFirstRow(),lastRow=this.pageBoundsService.getLastRow(),pagingPixelOffset=this.pageBoundsService.getPixelOffset(),currentRowNode=this.rowModel.getRow(gridCell.rowIndex),rowPixelDiff=up?(currentRowNode==null?void 0:currentRowNode.rowHeight)-pixelsInOnePage-pagingPixelOffset:pixelsInOnePage-pagingPixelOffset,nextCellPixel=(currentRowNode==null?void 0:currentRowNode.rowTop)+rowPixelDiff;let focusIndex=this.rowModel.getRowIndexAtPixel(nextCellPixel+pagingPixelOffset);if(focusIndex===gridCell.rowIndex){const diff=up?-1:1;scrollIndex=focusIndex=gridCell.rowIndex+diff}let scrollType;up?(scrollType="bottom",focusIndex<firstRow&&(focusIndex=firstRow),scrollIndex<firstRow&&(scrollIndex=firstRow)):(scrollType="top",focusIndex>lastRow&&(focusIndex=lastRow),scrollIndex>lastRow&&(scrollIndex=lastRow)),this.isRowTallerThanView(focusIndex)&&(scrollIndex=focusIndex,scrollType="top"),this.navigateTo({scrollIndex,scrollType,scrollColumn:null,focusIndex,focusColumn:gridCell.column})}navigateToNextPageWithAutoHeight(gridCell,scrollIndex,up=!1){this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex:scrollIndex,focusColumn:gridCell.column}),setTimeout(()=>{const focusIndex=this.getNextFocusIndexForAutoHeight(gridCell,up);this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex,focusColumn:gridCell.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(gridCell,up=!1){const step=up?-1:1,pixelsInOnePage=this.getViewportHeight(),lastRowIndex=this.pageBoundsService.getLastRow();let pixelSum=0,currentIndex=gridCell.rowIndex;for(;currentIndex>=0&&currentIndex<=lastRowIndex;){const currentCell=this.rowModel.getRow(currentIndex);if(currentCell){const currentCellHeight=currentCell.rowHeight??0;if(pixelSum+currentCellHeight>pixelsInOnePage)break;pixelSum+=currentCellHeight}currentIndex+=step}return Math.max(0,Math.min(currentIndex,lastRowIndex))}getViewportHeight(){const scrollPosition=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),scrollbarWidth=this.scrollVisibleService.getScrollbarWidth();let pixelsInOnePage=scrollPosition.bottom-scrollPosition.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(pixelsInOnePage-=scrollbarWidth),pixelsInOnePage}isRowTallerThanView(rowIndex){const rowNode=this.rowModel.getRow(rowIndex);if(!rowNode)return!1;const rowHeight=rowNode.rowHeight;return typeof rowHeight!="number"?!1:rowHeight>this.getViewportHeight()}onCtrlUpDownLeftRight(key,gridCell){const cellToFocus=this.cellNavigationService.getNextCellToFocus(key,gridCell,!0),{rowIndex}=cellToFocus,column=cellToFocus.column;this.navigateTo({scrollIndex:rowIndex,scrollType:null,scrollColumn:column,focusIndex:rowIndex,focusColumn:column})}onHomeOrEndKey(key){const homeKey=key===KeyCode.PAGE_HOME,allColumns=this.visibleColsService.getAllCols(),columnToSelect=homeKey?allColumns[0]:_last(allColumns),scrollIndex=homeKey?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex,scrollType:null,scrollColumn:columnToSelect,focusIndex:scrollIndex,focusColumn:columnToSelect})}onTabKeyDown(previous,keyboardEvent){const backwards=keyboardEvent.shiftKey,movedToNextCell=this.tabToNextCellCommon(previous,backwards,keyboardEvent);if(movedToNextCell!==!1){movedToNextCell?keyboardEvent.preventDefault():movedToNextCell===null&&this.focusService.allowFocusForNextGridCoreContainer(backwards);return}if(backwards){const{rowIndex,rowPinned}=previous.getRowPosition();(rowPinned?rowIndex===0:rowIndex===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(keyboardEvent.preventDefault(),this.focusService.focusPreviousFromFirstCell(keyboardEvent)))}else previous instanceof CellCtrl&&previous.focusCell(!0),(!backwards&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(backwards))&&keyboardEvent.preventDefault()}tabToNextCell(backwards,event){const focusedCell=this.focusService.getFocusedCell();if(!focusedCell)return!1;let cellOrRow=this.getCellByPosition(focusedCell);return!cellOrRow&&(cellOrRow=this.rowRenderer.getRowByPosition(focusedCell),!cellOrRow||!cellOrRow.isFullWidth())?!1:!!this.tabToNextCellCommon(cellOrRow,backwards,event)}tabToNextCellCommon(previous,backwards,event){let editing=previous.isEditing();if(!editing&&previous instanceof CellCtrl){const row=previous.getRowCtrl();row&&(editing=row.isEditing())}let res;return editing?this.gos.get("editType")==="fullRow"?res=this.moveToNextEditingRow(previous,backwards,event):res=this.moveToNextEditingCell(previous,backwards,event):res=this.moveToNextCellNotEditing(previous,backwards),res===null?res:res||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(previousCell,backwards,event=null){const previousPos=previousCell.getCellPosition();previousCell.getGui().focus(),previousCell.stopEditing();const nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);return nextCell===!1?null:nextCell==null?!1:(nextCell.startEditing(null,!0,event),nextCell.focusCell(!1),!0)}moveToNextEditingRow(previousCell,backwards,event=null){const previousPos=previousCell.getCellPosition(),nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);if(nextCell===!1)return null;if(nextCell==null)return!1;const nextPos=nextCell.getCellPosition(),previousEditable=this.isCellEditable(previousPos),nextEditable=this.isCellEditable(nextPos),rowsMatch=nextPos&&previousPos.rowIndex===nextPos.rowIndex&&previousPos.rowPinned===nextPos.rowPinned;return previousEditable&&previousCell.setFocusOutOnEditor(),rowsMatch||(previousCell.getRowCtrl().stopEditing(),nextCell.getRowCtrl().startRowEditing(void 0,void 0,event)),nextEditable?(nextCell.setFocusInOnEditor(),nextCell.focusCell()):nextCell.focusCell(!0),!0}moveToNextCellNotEditing(previousCell,backwards){const displayedColumns=this.visibleColsService.getAllCols();let cellPos;previousCell instanceof RowCtrl?cellPos={...previousCell.getRowPosition(),column:backwards?displayedColumns[0]:_last(displayedColumns)}:cellPos=previousCell.getCellPosition();const nextCell=this.findNextCellToFocusOn(cellPos,backwards,!1);if(nextCell===!1)return null;if(nextCell instanceof CellCtrl)nextCell.focusCell(!0);else if(nextCell)return this.tryToFocusFullWidthRow(nextCell.getRowPosition(),backwards);return _exists(nextCell)}findNextCellToFocusOn(previousPosition,backwards,startEditing){var _a253;let nextPosition=previousPosition;for(;;){previousPosition!==nextPosition&&(previousPosition=nextPosition),backwards||(nextPosition=this.getLastCellOfColSpan(nextPosition)),nextPosition=this.cellNavigationService.getNextTabbedCell(nextPosition,backwards);const userFunc=this.gos.getCallback("tabToNextCell");if(_exists(userFunc)){const userResult=userFunc({backwards,editing:startEditing,previousCellPosition:previousPosition,nextCellPosition:nextPosition||null});if(userResult===!0||userResult===null)userResult===null&&_warnOnce("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),nextPosition=previousPosition;else{if(userResult===!1)return!1;nextPosition={rowIndex:userResult.rowIndex,column:userResult.column,rowPinned:userResult.rowPinned}}}if(!nextPosition)return null;if(nextPosition.rowIndex<0){const headerLen=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextPosition.rowIndex,column:nextPosition.column},fromCell:!0}),null}const fullRowEdit=this.gos.get("editType")==="fullRow";if(startEditing&&!fullRowEdit&&!this.isCellEditable(nextPosition))continue;this.ensureCellVisible(nextPosition);const nextCell=this.getCellByPosition(nextPosition);if(!nextCell){const row=this.rowRenderer.getRowByPosition(nextPosition);if(!row||!row.isFullWidth()||startEditing)continue;return row}if(!nextCell.isSuppressNavigable())return(_a253=this.rangeService)==null||_a253.setRangeToCell(nextPosition),nextCell}}isCellEditable(cell){const rowNode=this.lookupRowNodeForCell(cell);return rowNode?cell.column.isCellEditable(rowNode):!1}getCellByPosition(cellPosition){const rowCtrl=this.rowRenderer.getRowByPosition(cellPosition);return rowCtrl?rowCtrl.getCellCtrl(cellPosition.column):null}lookupRowNodeForCell(cell){return cell.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(cell.rowIndex):cell.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(cell.rowIndex):this.rowModel.getRow(cell.rowIndex)}navigateToNextCell(event,key,currentCell,allowUserOverride){let nextCell=currentCell,hitEdgeOfGrid=!1;for(;nextCell&&(nextCell===currentCell||!this.isValidNavigateCell(nextCell));)this.gos.get("enableRtl")?key===KeyCode.LEFT&&(nextCell=this.getLastCellOfColSpan(nextCell)):key===KeyCode.RIGHT&&(nextCell=this.getLastCellOfColSpan(nextCell)),nextCell=this.cellNavigationService.getNextCellToFocus(key,nextCell),hitEdgeOfGrid=_missing(nextCell);if(hitEdgeOfGrid&&event&&event.key===KeyCode.UP&&(nextCell={rowIndex:-1,rowPinned:null,column:currentCell.column}),allowUserOverride){const userFunc=this.gos.getCallback("navigateToNextCell");if(_exists(userFunc)){const userCell=userFunc({key,previousCellPosition:currentCell,nextCellPosition:nextCell||null,event});_exists(userCell)?nextCell={rowPinned:userCell.rowPinned,rowIndex:userCell.rowIndex,column:userCell.column}:nextCell=null}}if(!nextCell)return;if(nextCell.rowIndex<0){const headerLen=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextCell.rowIndex,column:currentCell.column},event:event||void 0,fromCell:!0});return}const normalisedPosition=this.getNormalisedPosition(nextCell);normalisedPosition?this.focusPosition(normalisedPosition):this.tryToFocusFullWidthRow(nextCell)}getNormalisedPosition(cellPosition){this.ensureCellVisible(cellPosition);const cellCtrl=this.getCellByPosition(cellPosition);return cellCtrl?(cellPosition=cellCtrl.getCellPosition(),this.ensureCellVisible(cellPosition),cellPosition):null}tryToFocusFullWidthRow(position,backwards){const displayedColumns=this.visibleColsService.getAllCols(),rowComp=this.rowRenderer.getRowByPosition(position);if(!rowComp||!rowComp.isFullWidth())return!1;const currentCellFocused=this.focusService.getFocusedCell(),cellPosition={rowIndex:position.rowIndex,rowPinned:position.rowPinned,column:position.column||(backwards?_last(displayedColumns):displayedColumns[0])};this.focusPosition(cellPosition);const fromBelow=backwards??(currentCellFocused!=null&&this.rowPositionUtils.before(cellPosition,currentCellFocused));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:cellPosition.rowIndex,rowPinned:cellPosition.rowPinned,column:cellPosition.column,isFullWidthCell:!0,fromBelow}),!0}focusPosition(cellPosition){var _a253;this.focusService.setFocusedCell({rowIndex:cellPosition.rowIndex,column:cellPosition.column,rowPinned:cellPosition.rowPinned,forceBrowserFocus:!0}),(_a253=this.rangeService)==null||_a253.setRangeToCell(cellPosition)}isValidNavigateCell(cell){return!!this.rowPositionUtils.getRowNode(cell)}getLastCellOfColSpan(cell){const cellCtrl=this.getCellByPosition(cell);if(!cellCtrl)return cell;const colSpanningList=cellCtrl.getColSpanningList();return colSpanningList.length===1?cell:{rowIndex:cell.rowIndex,column:_last(colSpanningList),rowPinned:cell.rowPinned}}ensureCellVisible(gridCell){const isGroupStickyEnabled=_isGroupRowsSticky(this.gos),rowNode=this.rowModel.getRow(gridCell.rowIndex);!(isGroupStickyEnabled&&(rowNode==null?void 0:rowNode.sticky))&&_missing(gridCell.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(gridCell.rowIndex),gridCell.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(gridCell.column)}},__name(_a139,"NavigationService"),_a139),_a140,HorizontalResizeService=(_a140=class extends BeanStub{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(beans){this.dragService=beans.dragService,this.ctrlsService=beans.ctrlsService}addResizeBar(params){const dragSource={dragStartPixels:params.dragStartPixels||0,eElement:params.eResizeBar,onDragStart:this.onDragStart.bind(this,params),onDragStop:this.onDragStop.bind(this,params),onDragging:this.onDragging.bind(this,params),onDragCancel:this.onDragStop.bind(this,params),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(dragSource),__name(()=>this.dragService.removeDragSource(dragSource),"finishedWithResizeFunc")}onDragStart(params,mouseEvent){this.dragStartX=mouseEvent.clientX,this.setResizeIcons();const shiftKey=mouseEvent instanceof MouseEvent&&mouseEvent.shiftKey===!0;params.onResizeStart(shiftKey)}setResizeIcons(){const ctrl=this.ctrlsService.get("gridCtrl");ctrl.setResizeCursor(!0),ctrl.disableUserSelect(!0)}onDragStop(params){params.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const ctrl=this.ctrlsService.get("gridCtrl");ctrl.setResizeCursor(!1),ctrl.disableUserSelect(!1)}onDragging(params,mouseEvent){this.resizeAmount=mouseEvent.clientX-this.dragStartX,params.onResizing(this.resizeAmount)}},__name(_a140,"HorizontalResizeService"),_a140),_a141,StandardMenuFactory=(_a141=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(beans){this.popupService=beans.popupService,this.focusService=beans.focusService,this.ctrlsService=beans.ctrlsService,this.menuService=beans.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(column,mouseEvent,containerType){this.showPopup(column,eMenu=>{this.popupService.positionPopupUnderMouseEvent({column,type:containerType,mouseEvent,ePopup:eMenu})},containerType,mouseEvent.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(column,eventSource,containerType){let multiplier=-1,alignSide="left";const isLegacyMenuEnabled=this.menuService.isLegacyMenuEnabled();!isLegacyMenuEnabled&&this.gos.get("enableRtl")&&(multiplier=1,alignSide="right");const nudgeX=isLegacyMenuEnabled?void 0:4*multiplier,nudgeY=isLegacyMenuEnabled?void 0:4;this.showPopup(column,eMenu=>{this.popupService.positionPopupByComponent({type:containerType,eventSource,ePopup:eMenu,nudgeX,nudgeY,alignSide,keepWithinBounds:!0,position:"under",column})},containerType,eventSource,isLegacyMenuEnabled)}showPopup(column,positionCallback,containerType,eventSource,isLegacyMenuEnabled){const comp=column?this.createBean(new FilterWrapperComp(column,"COLUMN_MENU")):void 0;if(this.activeMenu=comp,!(comp!=null&&comp.hasFilter())||!column)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const eMenu=document.createElement("div");_setAriaRole(eMenu,"presentation"),eMenu.classList.add("ag-menu"),isLegacyMenuEnabled||eMenu.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(eMenu,{keydown:__name(e=>this.trapFocusWithin(e,eMenu),"keydown")}),eMenu.appendChild(comp==null?void 0:comp.getGui());let hidePopup;const afterGuiDetached=__name(()=>comp==null?void 0:comp.afterGuiDetached(),"afterGuiDetached"),anchorToElement=this.menuService.isColumnMenuAnchoringEnabled()?eventSource??this.ctrlsService.getGridBodyCtrl().getGui():void 0,closedCallback=__name(e=>{column.setMenuVisible(!1,"contextMenu");const isKeyboardEvent=e instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),isKeyboardEvent&&eventSource&&_isVisible(eventSource)){const focusableEl=this.focusService.findTabbableParent(eventSource);focusableEl&&focusableEl.focus()}afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,containerType,column)},"closedCallback"),translate=this.localeService.getLocaleTextFunc(),ariaLabel=isLegacyMenuEnabled&&containerType!=="columnFilter"?translate("ariaLabelColumnMenu","Column Menu"):translate("ariaLabelColumnFilter","Column Filter"),addPopupRes=this.popupService.addPopup({modal:!0,eChild:eMenu,closeOnEsc:!0,closedCallback,positionCallback:__name(()=>positionCallback(eMenu),"positionCallback"),anchorToElement,ariaLabel});addPopupRes&&(this.hidePopup=hidePopup=addPopupRes.hideFunc),comp.afterInit().then(()=>{positionCallback(eMenu),comp.afterGuiAttached({container:containerType,hidePopup})}),column.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,containerType,column)}trapFocusWithin(e,menu){e.key!==KeyCode.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(menu,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(menu,e.shiftKey))}dispatchVisibleChangedEvent(visible,containerType,column){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible,switchingTab:!1,key:containerType,column:column??null,columnGroup:null})}isMenuEnabled(column){return column.isFilterAllowed()&&(column.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},__name(_a141,"StandardMenuFactory"),_a141),_a142,ResizeObserverService=(_a142=class extends BeanStub{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(element,callback){const ResizeObserverImpl=_getWindow(this.gos).ResizeObserver,resizeObserver=ResizeObserverImpl?new ResizeObserverImpl(callback):null;return resizeObserver==null||resizeObserver.observe(element),()=>resizeObserver==null?void 0:resizeObserver.disconnect()}},__name(_a142,"ResizeObserverService"),_a142),_a143,AnimationFrameService=(_a143=class extends BeanStub{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(beans){this.ctrlsService=beans.ctrlsService,this.paginationService=beans.paginationService}setScrollTop(scrollTop){var _a253;const isPaginationActive=this.gos.get("pagination");if(this.scrollGoingDown=scrollTop>=this.lastScrollTop,isPaginationActive&&scrollTop===0){const currentPage=((_a253=this.paginationService)==null?void 0:_a253.getCurrentPage())??0;currentPage!==this.lastPage&&(this.lastPage=currentPage,this.scrollGoingDown=!0)}this.lastScrollTop=scrollTop}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(methodName){this.useAnimationFrame===!1&&_warnOnce(`AnimationFrameService.${methodName} called but animation frames are off`)}createTask(task,index,list){this.verifyAnimationFrameOn(list);const taskItem={task,index,createOrder:++this.taskCount};this.addTaskToList(this[list],taskItem),this.schedule()}cancelTask(task){this.cancelledTasks.add(task)}addTaskToList(taskList,task){taskList.list.push(task),taskList.sorted=!1}sortTaskList(taskList){if(taskList.sorted)return;const sortDirection=this.scrollGoingDown?1:-1;taskList.list.sort((a,b)=>a.index!==b.index?sortDirection*(b.index-a.index):b.createOrder-a.createOrder),taskList.sorted=!0}addDestroyTask(task){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(task),this.schedule()}executeFrame(millis){this.verifyAnimationFrameOn("executeFrame");const p1TaskList=this.createTasksP1,p1Tasks=p1TaskList.list,p2TaskList=this.createTasksP2,p2Tasks=p2TaskList.list,destroyTasks=this.destroyTasks,frameStart=new Date().getTime();let duration=new Date().getTime()-frameStart;const noMaxMillis=millis<=0,gridBodyCon=this.ctrlsService.getGridBodyCtrl();for(;noMaxMillis||duration<millis;){if(!gridBodyCon.getScrollFeature().scrollGridIfNeeded()){let task;if(p1Tasks.length)this.sortTaskList(p1TaskList),task=p1Tasks.pop().task;else if(p2Tasks.length)this.sortTaskList(p2TaskList),task=p2Tasks.pop().task;else if(destroyTasks.length)task=destroyTasks.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(task)||task()}duration=new Date().getTime()-frameStart}p1Tasks.length||p2Tasks.length||destroyTasks.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const callback=this.executeFrame.bind(this,60);this.requestAnimationFrame(callback)}requestAnimationFrame(callback){const win=_getWindow(this.gos);win.requestAnimationFrame?win.requestAnimationFrame(callback):win.webkitRequestAnimationFrame?win.webkitRequestAnimationFrame(callback):win.setTimeout(callback,0)}isQueueEmpty(){return!this.ticking}debounce(func){let pending=!1;return()=>{if(!this.isOn()){window.setTimeout(func,0);return}pending||(pending=!0,this.addDestroyTask(()=>{pending=!1,func()}))}}},__name(_a143,"AnimationFrameService"),_a143),_a144,ExpansionService=(_a144=class extends BeanStub{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(beans){this.rowModel=beans.rowModel}postConstruct(){this.isClientSideRowModel=_isClientSideRowModel(this.gos)}expandRows(rowIds){if(!this.isClientSideRowModel)return;const rowIdSet=new Set(rowIds);this.rowModel.forEachNode(node=>{node.id&&rowIdSet.has(node.id)&&(node.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const expandedRows=[];return this.rowModel.forEachNode(({expanded,id})=>{expanded&&id&&expandedRows.push(id)}),expandedRows}expandAll(value){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(value)}setRowNodeExpanded(rowNode,expanded,expandParents,forceSync){rowNode&&(expandParents&&rowNode.parent&&rowNode.parent.level!==-1&&this.setRowNodeExpanded(rowNode.parent,expanded,expandParents,forceSync),rowNode.setExpanded(expanded,void 0,forceSync))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},__name(_a144,"ExpansionService"),_a144),_a145,MenuService=(_a145=class extends BeanStub{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(beans){this.valueService=beans.valueService,this.filterMenuFactory=beans.filterMenuFactory,this.ctrlsService=beans.ctrlsService,this.animationFrameService=beans.animationFrameService,this.filterManager=beans.filterManager,this.rowRenderer=beans.rowRenderer,this.columnChooserFactory=beans.columnChooserFactory,this.contextMenuFactory=beans.contextMenuFactory,this.enterpriseMenuFactory=beans.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(params){this.showColumnMenuCommon(this.activeMenuFactory,params,"columnMenu")}showFilterMenu(params){const menuFactory=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(menuFactory,params,params.containerType,!0)}showHeaderContextMenu(column,mouseEvent,touchEvent){this.activeMenuFactory.showMenuAfterContextMenuEvent(column,mouseEvent,touchEvent)}getContextMenuPosition(rowNode,column){const rowCtrl=this.getRowCtrl(rowNode),eGui=this.getCellGui(rowCtrl,column);if(!eGui)return rowCtrl?{x:0,y:rowCtrl.getRowYPosition()}:{x:0,y:0};const rect=eGui.getBoundingClientRect();return{x:rect.x+rect.width/2,y:rect.y+rect.height/2}}showContextMenu(params){var _a253;const{rowNode}=params,column=params.column;let{anchorToElement,value}=params;rowNode&&column&&value==null&&(value=this.valueService.getValueForDisplay(column,rowNode)),anchorToElement==null&&(anchorToElement=this.getContextMenuAnchorElement(rowNode,column)),(_a253=this.contextMenuFactory)==null||_a253.onContextMenu(params.mouseEvent??null,params.touchEvent??null,rowNode??null,column??null,value,anchorToElement)}showColumnChooser(params){var _a253;(_a253=this.columnChooserFactory)==null||_a253.showColumnChooser(params)}hidePopupMenu(){var _a253;(_a253=this.contextMenuFactory)==null||_a253.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var _a253;(_a253=this.columnChooserFactory)==null||_a253.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(column){const{suppressMenu,suppressHeaderMenuButton}=column.getColDef();return!(suppressHeaderMenuButton??suppressMenu)&&this.activeMenuFactory.isMenuEnabled(column)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(column){var _a253;return!column.getColDef().suppressHeaderFilterButton&&!!((_a253=this.filterManager)!=null&&_a253.isFilterAllowed(column))}isHeaderContextMenuEnabled(column){const colDef=column&&isColumn(column)?column.getColDef():column==null?void 0:column.getColGroupDef();return!(colDef!=null&&colDef.suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const menuHides=!this.isSuppressMenuHide();return!(_isIOSUserAgent()&&menuHides)}isHeaderFilterButtonEnabled(column){return this.isFilterMenuInHeaderEnabled(column)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(column)}isFilterMenuItemEnabled(column){var _a253;return!!((_a253=this.filterManager)!=null&&_a253.isFilterAllowed(column))&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(column)&&!this.isFloatingFilterButtonDisplayed(column)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(column){var _a253;const colDef=column.getColDef(),legacySuppressFilterButton=(_a253=colDef.floatingFilterComponentParams)==null?void 0:_a253.suppressFilterButton;return legacySuppressFilterButton!=null&&_warnOnce("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),colDef.suppressFloatingFilterButton==null?!legacySuppressFilterButton:!colDef.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(column){return!!column.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(column)}isSuppressMenuHide(){const suppressMenuHide=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?suppressMenuHide:!1:suppressMenuHide}showColumnMenuCommon(menuFactory,params,containerType,filtersOnly){const{positionBy}=params,column=params.column;if(positionBy==="button"){const{buttonElement}=params;menuFactory.showMenuAfterButtonClick(column,buttonElement,containerType,filtersOnly)}else if(positionBy==="mouse"){const{mouseEvent}=params;menuFactory.showMenuAfterMouseEvent(column,mouseEvent,containerType,filtersOnly)}else column&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(column,"auto"),this.animationFrameService.requestAnimationFrame(()=>{var _a253;const headerCellCtrl=(_a253=this.ctrlsService.getHeaderRowContainerCtrl(column.getPinned()))==null?void 0:_a253.getHeaderCtrlForColumn(column);headerCellCtrl&&menuFactory.showMenuAfterButtonClick(column,headerCellCtrl.getAnchorElementForMenu(filtersOnly),containerType,!0)}))}getRowCtrl(rowNode){const{rowIndex,rowPinned}=rowNode||{};if(rowIndex!=null)return this.rowRenderer.getRowByPosition({rowIndex,rowPinned})||void 0}getCellGui(rowCtrl,column){if(!rowCtrl||!column)return;const cellCtrl=rowCtrl.getCellCtrl(column);return(cellCtrl==null?void 0:cellCtrl.getGui())||void 0}getContextMenuAnchorElement(rowNode,column){const gridBodyEl=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),rowCtrl=this.getRowCtrl(rowNode);if(!rowCtrl)return gridBodyEl;const cellGui=this.getCellGui(rowCtrl,column);return cellGui||(rowCtrl.isFullWidth()?rowCtrl.getFullWidthElement():gridBodyEl)}},__name(_a145,"MenuService"),_a145),_a146,AgInputTextArea=(_a146=class extends AgAbstractInputField{constructor(config){super(config,"ag-text-area",null,"textarea")}setValue(value,silent){const ret=super.setValue(value,silent);return this.eInput.value=value,ret}setCols(cols){return this.eInput.cols=cols,this}setRows(rows){return this.eInput.rows=rows,this}},__name(_a146,"AgInputTextArea"),_a146),AgInputTextAreaSelector={selector:"AG-INPUT-TEXT-AREA",component:AgInputTextArea},_a147,LargeTextCellEditor=(_a147=class extends PopupComponent{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[AgInputTextAreaSelector]),this.eTextArea=RefPlaceholder}init(params){this.params=params,this.focusAfterAttached=params.cellStartedEdit,this.eTextArea.setMaxLength(params.maxLength||200).setCols(params.cols||60).setRows(params.rows||10),_exists(params.value,!0)&&this.eTextArea.setValue(params.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(event){const key=event.key;(key===KeyCode.LEFT||key===KeyCode.UP||key===KeyCode.RIGHT||key===KeyCode.DOWN||event.shiftKey&&key===KeyCode.ENTER)&&event.stopPropagation()}afterGuiAttached(){const translate=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const value=this.eTextArea.getValue();return!_exists(value)&&!_exists(this.params.value)?this.params.value:this.params.parseValue(value)}},__name(_a147,"LargeTextCellEditor"),_a147),_a148,PopupEditorWrapper=(_a148=class extends PopupComponent{constructor(params){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=params}postConstruct(){_setDomData(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const eGui=this.getGui(),params=this.params,listener=__name(event=>{_isUserSuppressingKeyboardEvent(this.gos,event,params.node,params.column,!0)||params.onKeyDown(event)},"listener");this.addManagedElementListeners(eGui,{keydown:listener})}},__name(_a148,"PopupEditorWrapper"),_a148),_a149,SelectCellEditor=(_a149=class extends PopupComponent{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[AgSelectSelector]),this.eSelect=RefPlaceholder,this.startedByEnter=!1}wireBeans(beans){this.valueService=beans.valueService}init(params){this.focusAfterAttached=params.cellStartedEdit;const{eSelect,valueService,gos}=this,{values,value,eventKey}=params;if(_missing(values)){_warnOnce("no values found for select cellEditor");return}this.startedByEnter=eventKey!=null?eventKey===KeyCode.ENTER:!1;let hasValue=!1;values.forEach(currentValue=>{const option={value:currentValue},valueFormatted=valueService.formatValue(params.column,null,currentValue),valueFormattedExits=valueFormatted!=null;option.text=valueFormattedExits?valueFormatted:currentValue,eSelect.addOption(option),hasValue=hasValue||value===currentValue}),hasValue?eSelect.setValue(params.value,!0):params.values.length&&eSelect.setValue(params.values[0],!0);const{valueListGap,valueListMaxWidth,valueListMaxHeight}=params;valueListGap!=null&&eSelect.setPickerGap(valueListGap),valueListMaxHeight!=null&&eSelect.setPickerMaxHeight(valueListMaxHeight),valueListMaxWidth!=null&&eSelect.setPickerMaxWidth(valueListMaxWidth),gos.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:__name(()=>params.stopEditing(),"selectedItem")})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},__name(_a149,"SelectCellEditor"),_a149),_a150,SimpleCellEditor=(_a150=class extends PopupComponent{constructor(cellEditorInput){super(`
            <div class="ag-cell-edit-wrapper">
                ${cellEditorInput.getTemplate()}
            </div>`,cellEditorInput.getAgComponents()),this.cellEditorInput=cellEditorInput,this.eInput=RefPlaceholder}init(params){this.params=params;const{cellStartedEdit,eventKey,suppressPreventDefault}=params,eInput=this.eInput;this.cellEditorInput.init(eInput,params);let startValue,shouldSetStartValue=!0;cellStartedEdit?(this.focusAfterAttached=!0,eventKey===KeyCode.BACKSPACE||eventKey===KeyCode.DELETE?startValue="":eventKey&&eventKey.length===1?suppressPreventDefault?shouldSetStartValue=!1:startValue=eventKey:(startValue=this.cellEditorInput.getStartValue(),eventKey!==KeyCode.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,startValue=this.cellEditorInput.getStartValue()),shouldSetStartValue&&startValue!=null&&eInput.setStartValue(startValue),this.addManagedElementListeners(eInput.getGui(),{keydown:__name(event=>{const{key}=event;(key===KeyCode.PAGE_UP||key===KeyCode.PAGE_DOWN)&&event.preventDefault()},"keydown")})}afterGuiAttached(){var _a253,_b;const translate=this.localeService.getLocaleTextFunc(),eInput=this.eInput;if(eInput.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;_isBrowserSafari()||eInput.getFocusableElement().focus();const inputEl=eInput.getInputElement();this.highlightAllOnFocus?inputEl.select():(_b=(_a253=this.cellEditorInput).setCaret)==null||_b.call(_a253)}focusIn(){const eInput=this.eInput,focusEl=eInput.getFocusableElement(),inputEl=eInput.getInputElement();focusEl.focus(),inputEl.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},__name(_a150,"SimpleCellEditor"),_a150),_a151,TextCellEditorInput=(_a151=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[AgInputTextFieldSelector]}init(eInput,params){this.eInput=eInput,this.params=params,params.maxLength!=null&&eInput.setMaxLength(params.maxLength)}getValue(){const value=this.eInput.getValue();return!_exists(value)&&!_exists(this.params.value)?this.params.value:this.params.parseValue(value)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const value=this.eInput.getValue(),len=_exists(value)&&value.length||0;len&&this.eInput.getInputElement().setSelectionRange(len,len)}},__name(_a151,"TextCellEditorInput"),_a151),_a152,TextCellEditor=(_a152=class extends SimpleCellEditor{constructor(){super(new TextCellEditorInput)}},__name(_a152,"TextCellEditor"),_a152),_a153,NumberCellEditorInput=(_a153=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[AgInputNumberFieldSelector]}init(eInput,params){this.eInput=eInput,this.params=params,params.max!=null&&eInput.setMax(params.max),params.min!=null&&eInput.setMin(params.min),params.precision!=null&&eInput.setPrecision(params.precision),params.step!=null&&eInput.setStep(params.step);const inputEl=eInput.getInputElement();params.preventStepping?eInput.addManagedElementListeners(inputEl,{keydown:this.preventStepping}):params.showStepperButtons&&inputEl.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===KeyCode.UP||e.key===KeyCode.DOWN)&&e.preventDefault()}getValue(){const value=this.eInput.getValue();if(!_exists(value)&&!_exists(this.params.value))return this.params.value;let parsedValue=this.params.parseValue(value);if(parsedValue==null)return parsedValue;if(typeof parsedValue=="string"){if(parsedValue==="")return null;parsedValue=Number(parsedValue)}return isNaN(parsedValue)?null:parsedValue}getStartValue(){return this.params.value}setCaret(){_isBrowserSafari()&&this.eInput.getInputElement().focus({preventScroll:!0})}},__name(_a153,"NumberCellEditorInput"),_a153),_a154,NumberCellEditor=(_a154=class extends SimpleCellEditor{constructor(){super(new NumberCellEditorInput)}},__name(_a154,"NumberCellEditor"),_a154),_a155,AgInputDateField=(_a155=class extends AgInputTextField{constructor(config){super(config,"ag-date-field","date")}postConstruct(){super.postConstruct();const usingSafari=_isBrowserSafari();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:__name(()=>{this.isDisabled()||usingSafari||this.eInput.focus()},"mousedown")}),this.eInput.step="any"}onWheel(e){_getActiveDomElement(this.gos)===this.eInput&&e.preventDefault()}setMin(minDate){const min=minDate instanceof Date?_serialiseDate(minDate??null,!1)??void 0:minDate;return this.min===min?this:(this.min=min,_addOrRemoveAttribute(this.eInput,"min",min),this)}setMax(maxDate){const max=maxDate instanceof Date?_serialiseDate(maxDate??null,!1)??void 0:maxDate;return this.max===max?this:(this.max=max,_addOrRemoveAttribute(this.eInput,"max",max),this)}setStep(step){return this.step===step?this:(this.step=step,_addOrRemoveAttribute(this.eInput,"step",step),this)}getDate(){if(this.eInput.validity.valid)return _parseDateTimeFromString(this.getValue())??void 0}setDate(date,silent){this.setValue(_serialiseDate(date??null,!1),silent)}},__name(_a155,"AgInputDateField"),_a155),AgInputDateFieldSelector={selector:"AG-INPUT-DATE-FIELD",component:AgInputDateField},_a156,DateCellEditorInput=(_a156=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[AgInputDateFieldSelector]}init(eInput,params){this.eInput=eInput,this.params=params,params.min!=null&&eInput.setMin(params.min),params.max!=null&&eInput.setMax(params.max),params.step!=null&&eInput.setStep(params.step)}getValue(){const value=this.eInput.getDate();return!_exists(value)&&!_exists(this.params.value)?this.params.value:value??null}getStartValue(){const{value}=this.params;if(value instanceof Date)return _serialiseDate(value,!1)}},__name(_a156,"DateCellEditorInput"),_a156),_a157,DateCellEditor=(_a157=class extends SimpleCellEditor{constructor(){super(new DateCellEditorInput)}},__name(_a157,"DateCellEditor"),_a157),_a158,DateStringCellEditorInput=(_a158=class{constructor(getDataTypeService){this.getDataTypeService=getDataTypeService}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[AgInputDateFieldSelector]}init(eInput,params){this.eInput=eInput,this.params=params,params.min!=null&&eInput.setMin(params.min),params.max!=null&&eInput.setMax(params.max),params.step!=null&&eInput.setStep(params.step)}getValue(){const value=this.formatDate(this.eInput.getDate());return!_exists(value)&&!_exists(this.params.value)?this.params.value:this.params.parseValue(value??"")}getStartValue(){return _serialiseDate(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(value){const dataTypeService=this.getDataTypeService();return dataTypeService?dataTypeService.getDateParserFunction(this.params.column)(value):_parseDateTimeFromString(value)??void 0}formatDate(value){const dataTypeService=this.getDataTypeService();return dataTypeService?dataTypeService.getDateFormatterFunction(this.params.column)(value):_serialiseDate(value??null,!1)??void 0}},__name(_a158,"DateStringCellEditorInput"),_a158),_a159,DateStringCellEditor=(_a159=class extends SimpleCellEditor{wireBeans(beans){this.dataTypeService=beans.dataTypeService}constructor(){super(new DateStringCellEditorInput(()=>this.dataTypeService))}},__name(_a159,"DateStringCellEditor"),_a159),_a160,CheckboxCellEditor=(_a160=class extends PopupComponent{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[AgCheckboxSelector]),this.eCheckbox=RefPlaceholder}init(params){this.params=params;const isSelected=params.value??void 0;this.eCheckbox.setValue(isSelected),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(isSelected),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:__name(event=>this.setAriaLabel(event.selected),"fieldValueChanged")})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(isSelected){const translate=this.localeService.getLocaleTextFunc(),stateName=_getAriaCheckboxStateName(translate,isSelected),ariaLabel=translate("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${ariaLabel} (${stateName})`)}},__name(_a160,"CheckboxCellEditor"),_a160),_a161,UndoRedoAction=(_a161=class{constructor(cellValueChanges){this.cellValueChanges=cellValueChanges}},__name(_a161,"UndoRedoAction"),_a161),_a162,RangeUndoRedoAction=(_a162=class extends UndoRedoAction{constructor(cellValueChanges,initialRange,finalRange,ranges){super(cellValueChanges),this.initialRange=initialRange,this.finalRange=finalRange,this.ranges=ranges}},__name(_a162,"RangeUndoRedoAction"),_a162),DEFAULT_STACK_SIZE=10,_a163,UndoRedoStack=(_a163=class{constructor(maxStackSize){this.actionStack=[],this.maxStackSize=maxStackSize||DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(item){item.cellValueChanges&&item.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(item))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},__name(_a163,"UndoRedoStack"),_a163),_a164,UndoRedoService=(_a164=class extends BeanStub{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=event=>{const eventCell={column:event.column,rowIndex:event.rowIndex,rowPinned:event.rowPinned},isCellEditing=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,eventCell),isRowEditing=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,eventCell);if(!(isCellEditing||isRowEditing||this.isPasting||this.isRangeInAction))return;const{rowPinned,rowIndex,column,oldValue,value}=event,cellValueChange={rowPinned,rowIndex,columnId:column.getColId(),newValue:value,oldValue};this.cellValueChanges.push(cellValueChange)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(beans){this.focusService=beans.focusService,this.ctrlsService=beans.ctrlsService,this.cellPositionUtils=beans.cellPositionUtils,this.rowPositionUtils=beans.rowPositionUtils,this.columnModel=beans.columnModel,this.rangeService=beans.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const undoRedoLimit=this.gos.get("undoRedoCellEditingLimit");if(undoRedoLimit<=0)return;this.undoStack=new UndoRedoStack(undoRedoLimit),this.redoStack=new UndoRedoStack(undoRedoLimit),this.addListeners();const listener=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:__name(e=>{e.keepUndoRedoStack||this.clearStacks()},"modelUpdated"),columnPivotModeChanged:listener,newColumnsLoaded:listener,columnGroupOpened:listener,columnRowGroupChanged:listener,columnMoved:listener,columnPinned:listener,columnVisible:listener,rowDragEnd:listener}),this.ctrlsService.whenReady(this,p=>{this.gridBodyCtrl=p.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(source){this.eventService.dispatchEvent({type:"undoStarted",source});const operationPerformed=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source,operationPerformed})}redo(source){this.eventService.dispatchEvent({type:"redoStarted",source});const operationPerformed=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source,operationPerformed})}undoRedo(undoRedoStack,opposingUndoRedoStack,rangeProperty,cellValueChangeProperty,source){if(!undoRedoStack)return!1;const undoRedoAction=undoRedoStack.pop();return!undoRedoAction||!undoRedoAction.cellValueChanges?!1:(this.processAction(undoRedoAction,cellValueChange=>cellValueChange[cellValueChangeProperty],source),undoRedoAction instanceof RangeUndoRedoAction?this.processRange(this.rangeService,undoRedoAction.ranges||[undoRedoAction[rangeProperty]]):this.processCell(undoRedoAction.cellValueChanges),opposingUndoRedoStack.push(undoRedoAction),!0)}processAction(action,valueExtractor,source){action.cellValueChanges.forEach(cellValueChange=>{const{rowIndex,rowPinned,columnId}=cellValueChange,rowPosition={rowIndex,rowPinned},currentRow=this.rowPositionUtils.getRowNode(rowPosition);currentRow.displayed&&currentRow.setDataValue(columnId,valueExtractor(cellValueChange),source)})}processRange(rangeService,ranges){let lastFocusedCell;rangeService.removeAllCellRanges(!0),ranges.forEach((range,idx)=>{if(!range)return;const startRow=range.startRow,endRow=range.endRow;idx===ranges.length-1&&(lastFocusedCell={rowPinned:startRow.rowPinned,rowIndex:startRow.rowIndex,columnId:range.startColumn.getColId()},this.setLastFocusedCell(lastFocusedCell));const cellRangeParams={rowStartIndex:startRow.rowIndex,rowStartPinned:startRow.rowPinned,rowEndIndex:endRow.rowIndex,rowEndPinned:endRow.rowPinned,columnStart:range.startColumn,columns:range.columns};rangeService.addCellRange(cellRangeParams)})}processCell(cellValueChanges){const cellValueChange=cellValueChanges[0],{rowIndex,rowPinned}=cellValueChange,rowPosition={rowIndex,rowPinned},row=this.rowPositionUtils.getRowNode(rowPosition),lastFocusedCell={rowPinned:cellValueChange.rowPinned,rowIndex:row.rowIndex,columnId:cellValueChange.columnId};this.setLastFocusedCell(lastFocusedCell,this.rangeService)}setLastFocusedCell(lastFocusedCell,rangeService){const{rowIndex,columnId,rowPinned}=lastFocusedCell,scrollFeature=this.gridBodyCtrl.getScrollFeature(),column=this.columnModel.getCol(columnId);if(!column)return;scrollFeature.ensureIndexVisible(rowIndex),scrollFeature.ensureColumnVisible(column);const cellPosition={rowIndex,column,rowPinned};this.focusService.setFocusedCell({...cellPosition,forceBrowserFocus:!0}),rangeService==null||rangeService.setRangeToCell(cellPosition)}addListeners(){this.addManagedEventListeners({rowEditingStarted:__name(e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},"rowEditingStarted"),rowEditingStopped:__name(()=>{const action=new UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(action),this.activeRowEdit=null},"rowEditingStopped"),cellEditingStarted:__name(e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},"cellEditingStarted"),cellEditingStopped:__name(e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const action=new UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(action)}},"cellEditingStopped"),pasteStart:__name(()=>{this.isPasting=!0},"pasteStart"),pasteEnd:__name(()=>{const action=new UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(action),this.isPasting=!1},"pasteEnd"),fillStart:__name(()=>{this.isRangeInAction=!0},"fillStart"),fillEnd:__name(event=>{const action=new RangeUndoRedoAction(this.cellValueChanges,event.initialRange,event.finalRange);this.pushActionsToUndoStack(action),this.isRangeInAction=!1},"fillEnd"),keyShortcutChangedCellStart:__name(()=>{this.isRangeInAction=!0},"keyShortcutChangedCellStart"),keyShortcutChangedCellEnd:__name(()=>{let action;this.rangeService&&_isCellSelectionEnabled(this.gos)?action=new RangeUndoRedoAction(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):action=new UndoRedoAction(this.cellValueChanges),this.pushActionsToUndoStack(action),this.isRangeInAction=!1},"keyShortcutChangedCellEnd")})}pushActionsToUndoStack(action){this.undoStack.push(action),this.cellValueChanges=[],this.redoStack.clear()}},__name(_a164,"UndoRedoService"),_a164);function getVerticalPixelRange(beans){return beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}__name(getVerticalPixelRange,"getVerticalPixelRange");function getHorizontalPixelRange(beans){return beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}__name(getHorizontalPixelRange,"getHorizontalPixelRange");function ensureColumnVisible(beans,key,position="auto"){beans.frameworkOverrides.wrapIncoming(()=>beans.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(key,position),"ensureVisible")}__name(ensureColumnVisible,"ensureColumnVisible");function ensureIndexVisible(beans,index,position){beans.frameworkOverrides.wrapIncoming(()=>beans.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(index,position),"ensureVisible")}__name(ensureIndexVisible,"ensureIndexVisible");function ensureNodeVisible(beans,nodeSelector,position=null){beans.frameworkOverrides.wrapIncoming(()=>beans.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(nodeSelector,position),"ensureVisible")}__name(ensureNodeVisible,"ensureNodeVisible");function undoCellEditing(beans){var _a253;(_a253=beans.undoRedoService)==null||_a253.undo("api")}__name(undoCellEditing,"undoCellEditing");function redoCellEditing(beans){var _a253;(_a253=beans.undoRedoService)==null||_a253.redo("api")}__name(redoCellEditing,"redoCellEditing");function getCellEditorInstances(beans,params={}){return beans.rowRenderer.getCellEditorInstances(params).map(_unwrapUserComp)}__name(getCellEditorInstances,"getCellEditorInstances");function getEditingCells(beans){return beans.rowRenderer.getEditingCells()}__name(getEditingCells,"getEditingCells");function stopEditing(beans,cancel=!1){beans.rowRenderer.stopEditing(cancel)}__name(stopEditing,"stopEditing");function startEditingCell(beans,params){const column=beans.columnModel.getCol(params.colKey);if(!column){_warnOnce(`no column found for ${params.colKey}`);return}const cellPosition={rowIndex:params.rowIndex,rowPinned:params.rowPinned||null,column};params.rowPinned==null&&ensureIndexVisible(beans,params.rowIndex),ensureColumnVisible(beans,params.colKey);const cell=beans.navigationService.getCellByPosition(cellPosition);if(!cell)return;const{focusService,gos}=beans,isFocusWithinCell=__name(()=>{const activeElement=_getActiveDomElement(gos),eCell=cell.getGui();return activeElement!==eCell&&eCell.contains(activeElement)},"isFocusWithinCell"),forceBrowserFocus=gos.get("stopEditingWhenCellsLoseFocus")&&isFocusWithinCell();(forceBrowserFocus||!focusService.isCellFocused(cellPosition))&&focusService.setFocusedCell({...cellPosition,forceBrowserFocus,preventScrollOnBrowserFocus:!0}),cell.startRowOrCellEdit(params.key)}__name(startEditingCell,"startEditingCell");function getCurrentUndoSize(beans){var _a253;return((_a253=beans.undoRedoService)==null?void 0:_a253.getCurrentUndoStackSize())??0}__name(getCurrentUndoSize,"getCurrentUndoSize");function getCurrentRedoSize(beans){var _a253;return((_a253=beans.undoRedoService)==null?void 0:_a253.getCurrentRedoStackSize())??0}__name(getCurrentRedoSize,"getCurrentRedoSize");var _a165,EditService=(_a165=class extends BeanStub{constructor(){super(...arguments),this.beanName="editService"}wireBeans(beans){this.navigationService=beans.navigationService,this.userComponentFactory=beans.userComponentFactory,this.valueService=beans.valueService}startEditing(cellCtrl,key=null,cellStartedEdit=!1,event=null){var _a253;const editorParams=this.createCellEditorParams(cellCtrl,key,cellStartedEdit),colDef=cellCtrl.getColumn().getColDef(),compDetails=this.userComponentFactory.getCellEditorDetails(colDef,editorParams),popup=(compDetails==null?void 0:compDetails.popupFromSelector)!=null?compDetails.popupFromSelector:!!colDef.cellEditorPopup,position=(compDetails==null?void 0:compDetails.popupPositionFromSelector)!=null?compDetails.popupPositionFromSelector:colDef.cellEditorPopupPosition;return cellCtrl.setEditing(!0,compDetails),cellCtrl.getComp().setEditDetails(compDetails,popup,position,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(cellCtrl.createEvent(event,"cellEditingStarted")),!((_a253=compDetails==null?void 0:compDetails.params)!=null&&_a253.suppressPreventDefault)}stopEditing(cellCtrl,cancel){const cellComp=cellCtrl.getComp(),{newValue,newValueExists}=this.takeValueFromCellEditor(cancel,cellComp),rowNode=cellCtrl.getRowNode(),column=cellCtrl.getColumn(),oldValue=this.valueService.getValueForDisplay(column,rowNode);let valueChanged=!1;return newValueExists&&(valueChanged=this.saveNewValue(cellCtrl,oldValue,newValue,rowNode,column)),cellCtrl.setEditing(!1,void 0),cellComp.setEditDetails(),cellCtrl.updateAndFormatValue(!1),cellCtrl.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...cellCtrl.createEvent(null,"cellEditingStopped"),oldValue,newValue,valueChanged}),valueChanged}handleColDefChanged(cellCtrl){const cellEditor=cellCtrl.getCellEditor();if(cellEditor!=null&&cellEditor.refresh){const{eventKey,cellStartedEdit}=cellCtrl.getEditCompDetails().params,editorParams=this.createCellEditorParams(cellCtrl,eventKey,cellStartedEdit),colDef=cellCtrl.getColumn().getColDef(),compDetails=this.userComponentFactory.getCellEditorDetails(colDef,editorParams);cellEditor.refresh(compDetails.params)}}setFocusOutOnEditor(cellCtrl){const cellEditor=cellCtrl.getComp().getCellEditor();cellEditor&&cellEditor.focusOut&&cellEditor.focusOut()}setFocusInOnEditor(cellCtrl){const cellComp=cellCtrl.getComp(),cellEditor=cellComp.getCellEditor();cellEditor!=null&&cellEditor.focusIn?cellEditor.focusIn():(cellCtrl.focusCell(!0),cellCtrl.onCellEditorAttached(()=>{var _a253,_b;return(_b=(_a253=cellComp.getCellEditor())==null?void 0:_a253.focusIn)==null?void 0:_b.call(_a253)}))}stopEditingAndFocus(cellCtrl,suppressNavigateAfterEdit=!1,shiftKey=!1){cellCtrl.stopRowOrCellEdit(),cellCtrl.focusCell(!0),suppressNavigateAfterEdit||this.navigateAfterEdit(shiftKey,cellCtrl.getCellPosition())}createPopupEditorWrapper(params){return new PopupEditorWrapper(params)}takeValueFromCellEditor(cancel,cellComp){const noValueResult={newValueExists:!1};if(cancel)return noValueResult;const cellEditor=cellComp.getCellEditor();return!cellEditor||cellEditor.isCancelAfterEnd&&cellEditor.isCancelAfterEnd()?noValueResult:{newValue:cellEditor.getValue(),newValueExists:!0}}saveNewValue(cellCtrl,oldValue,newValue,rowNode,column){if(newValue===oldValue)return!1;cellCtrl.setSuppressRefreshCell(!0);const valueChanged=rowNode.setDataValue(column,newValue,"edit");return cellCtrl.setSuppressRefreshCell(!1),valueChanged}createCellEditorParams(cellCtrl,key,cellStartedEdit){const column=cellCtrl.getColumn(),rowNode=cellCtrl.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(column,rowNode),eventKey:key,column,colDef:column.getColDef(),rowIndex:cellCtrl.getCellPosition().rowIndex,node:rowNode,data:rowNode.data,cellStartedEdit,onKeyDown:cellCtrl.onKeyDown.bind(cellCtrl),stopEditing:cellCtrl.stopEditingAndFocus.bind(cellCtrl),eGridCell:cellCtrl.getGui(),parseValue:__name(newValue=>this.valueService.parseValue(column,rowNode,newValue,cellCtrl.getValue()),"parseValue"),formatValue:cellCtrl.formatValue.bind(cellCtrl)})}navigateAfterEdit(shiftKey,cellPosition){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const key=shiftKey?KeyCode.UP:KeyCode.DOWN;this.navigationService.navigateToNextCell(null,key,cellPosition,!1)}}},__name(_a165,"EditService"),_a165),_a166,RowEditService=(_a166=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(rowCtrl,key=null,sourceRenderedCell=null,event=null){let preventDefault=!0;return rowCtrl.getAllCellCtrls().reduce((prev,cellCtrl)=>{const cellStartedEdit=cellCtrl===sourceRenderedCell;return cellStartedEdit?preventDefault=cellCtrl.startEditing(key,cellStartedEdit,event):cellCtrl.startEditing(null,cellStartedEdit,event),prev?!0:cellCtrl.isEditing()},!1)&&this.setEditing(rowCtrl,!0),preventDefault}stopEditing(rowCtrl,cancel=!1){const cellControls=rowCtrl.getAllCellCtrls(),isRowEdit=rowCtrl.isEditing();rowCtrl.setStoppingRowEdit(!0);let fireRowEditEvent=!1;for(const ctrl of cellControls){const valueChanged=ctrl.stopEditing(cancel);isRowEdit&&!cancel&&!fireRowEditEvent&&valueChanged&&(fireRowEditEvent=!0)}fireRowEditEvent&&this.eventService.dispatchEvent(rowCtrl.createRowEvent("rowValueChanged")),isRowEdit&&this.setEditing(rowCtrl,!1),rowCtrl.setStoppingRowEdit(!1)}setEditing(rowCtrl,value){rowCtrl.setEditingRow(value),rowCtrl.forEachGui(void 0,gui=>gui.rowComp.addOrRemoveCssClass("ag-row-editing",value));const event=value?rowCtrl.createRowEvent("rowEditingStarted"):rowCtrl.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(event)}},__name(_a166,"RowEditService"),_a166),EditCoreModule={version:VERSION,moduleName:"@ag-grid-community/edit-core",beans:[EditService]},EditApiModule={version:VERSION,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing,redoCellEditing,getCellEditorInstances,getEditingCells,stopEditing,startEditingCell,getCurrentUndoSize,getCurrentRedoSize},dependantModules:[EditCoreModule]},UndoRedoEditModule={version:VERSION,moduleName:"@ag-grid-community/undo-redo-edit",beans:[UndoRedoService],dependantModules:[EditCoreModule]},FullRowEditModule={version:VERSION,moduleName:"@ag-grid-community/full-row-edit",beans:[RowEditService],dependantModules:[EditCoreModule]},DefaultEditorModule={version:VERSION,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:TextCellEditor}],dependantModules:[EditCoreModule]},DataTypeEditorsModule={version:VERSION,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:TextCellEditor},{name:"agNumberCellEditor",classImp:NumberCellEditor,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:DateCellEditor},{name:"agDateStringCellEditor",classImp:DateStringCellEditor},{name:"agCheckboxCellEditor",classImp:CheckboxCellEditor}],dependantModules:[DefaultEditorModule]},SelectEditorModule={version:VERSION,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:SelectCellEditor}],dependantModules:[EditCoreModule]},LargeTextEditorModule={version:VERSION,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:LargeTextCellEditor}],dependantModules:[EditCoreModule]},AllCommunityEditorsModule={version:VERSION,moduleName:"@ag-grid-community/all-editors",dependantModules:[DefaultEditorModule,DataTypeEditorsModule,SelectEditorModule,LargeTextEditorModule]},EditModule={version:VERSION,moduleName:"@ag-grid-community/editing",dependantModules:[EditCoreModule,UndoRedoEditModule,FullRowEditModule,AllCommunityEditorsModule,EditApiModule]},_a167,AutoWidthCalculator=(_a167=class extends BeanStub{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(beans){this.rowRenderer=beans.rowRenderer,this.ctrlsService=beans.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,p=>{this.centerRowContainerCtrl=p.center})}getPreferredWidthForColumn(column,skipHeader){const eHeaderCell=this.getHeaderCellForColumn(column);if(!eHeaderCell)return-1;const elements=this.rowRenderer.getAllCellsForColumn(column);return skipHeader||elements.push(eHeaderCell),this.addElementsToContainerAndGetWidth(elements)}getPreferredWidthForColumnGroup(columnGroup){const eHeaderCell=this.getHeaderCellForColumn(columnGroup);return eHeaderCell?this.addElementsToContainerAndGetWidth([eHeaderCell]):-1}addElementsToContainerAndGetWidth(elements){const eDummyContainer=document.createElement("form");eDummyContainer.style.position="fixed";const eBodyContainer=this.centerRowContainerCtrl.getContainerElement();elements.forEach(el=>this.cloneItemIntoDummy(el,eDummyContainer)),eBodyContainer.appendChild(eDummyContainer);const dummyContainerWidth=eDummyContainer.offsetWidth;eBodyContainer.removeChild(eDummyContainer);const autoSizePadding=this.getAutoSizePadding();return dummyContainerWidth+autoSizePadding}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(column){let element=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(container=>{const res=container.getHtmlElementForColumnHeader(column);res!=null&&(element=res)}),element}cloneItemIntoDummy(eCell,eDummyContainer){const eCellClone=eCell.cloneNode(!0);eCellClone.style.width="",eCellClone.style.position="static",eCellClone.style.left="";const eCloneParent=document.createElement("div"),eCloneParentClassList=eCloneParent.classList;["ag-header-cell","ag-header-group-cell"].some(cls=>eCellClone.classList.contains(cls))?(eCloneParentClassList.add("ag-header","ag-header-row"),eCloneParent.style.position="static"):eCloneParentClassList.add("ag-row");let pointer=eCell.parentElement;for(;pointer;){if(["ag-header-row","ag-row"].some(cls=>pointer.classList.contains(cls))){for(let i=0;i<pointer.classList.length;i++){const item=pointer.classList[i];item!="ag-row-position-absolute"&&eCloneParentClassList.add(item)}break}pointer=pointer.parentElement}eCloneParent.appendChild(eCellClone),eDummyContainer.appendChild(eCloneParent)}},__name(_a167,"AutoWidthCalculator"),_a167),_a168,StickyRowFeature=(_a168=class extends BeanStub{constructor(createRowCon,destroyRowCtrls){super(),this.createRowCon=createRowCon,this.destroyRowCtrls=destroyRowCtrls,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(beans){this.rowModel=beans.rowModel,this.rowRenderer=beans.rowRenderer,this.ctrlsService=beans.ctrlsService,this.pageBoundsService=beans.pageBoundsService}postConstruct(){this.isClientSide=_isClientSideRowModel(this.gos),this.ctrlsService.whenReady(this,params=>{this.gridBodyCtrl=params.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(offset){this.extraTopHeight!==offset&&(this.extraTopHeight=offset,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset}))}setOffsetBottom(offset){this.extraBottomHeight!==offset&&(this.extraBottomHeight=offset)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(row){return this.isClientSide?this.getClientSideLastPixelOfGroup(row):this.getServerSideLastPixelOfGroup(row)}getFirstPixelOfGroup(row){return row.footer?row.sibling.rowTop+row.sibling.rowHeight-1:row.hasChildren()?row.rowTop-1:0}getServerSideLastPixelOfGroup(row){var _a253,_b;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(row.isExpandable()||row.footer){if(row.master)return row.detailNode.rowTop+row.detailNode.rowHeight;if(!row.sibling||Math.abs(row.sibling.rowIndex-row.rowIndex)===1){let storeBounds=(_a253=row.childStore)==null?void 0:_a253.getStoreBounds();return row.footer&&(storeBounds=(_b=row.sibling.childStore)==null?void 0:_b.getStoreBounds()),((storeBounds==null?void 0:storeBounds.heightPx)??0)+((storeBounds==null?void 0:storeBounds.topPx)??0)}return row.footer?row.rowTop+row.rowHeight:row.sibling.rowTop+row.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(row){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(row.isExpandable()||row.footer){if(row.footer&&row.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!row.sibling||Math.abs(row.sibling.rowIndex-row.rowIndex)===1){let lastAncestor=row.footer?row.sibling:row;for(;lastAncestor.isExpandable()&&lastAncestor.expanded;)if(lastAncestor.master)lastAncestor=lastAncestor.detailNode;else if(lastAncestor.childrenAfterSort){if(lastAncestor.childrenAfterSort.length===0)break;lastAncestor=_last(lastAncestor.childrenAfterSort)}return lastAncestor.rowTop+lastAncestor.rowHeight}return row.footer?row.rowTop+row.rowHeight:row.sibling.rowTop+row.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(container){const isTop=container==="top";let newStickyContainerHeight=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(container,new Set,newStickyContainerHeight);const pixelAtContainerBoundary=isTop?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,newStickyRows=new Set,addStickyRow=__name(stickyRow=>{if(newStickyRows.add(stickyRow),isTop){const lastChildBottom=this.getLastPixelOfGroup(stickyRow),stickRowBottom=pixelAtContainerBoundary+newStickyContainerHeight+stickyRow.rowHeight;lastChildBottom<stickRowBottom?stickyRow.stickyRowTop=newStickyContainerHeight+(lastChildBottom-stickRowBottom):stickyRow.stickyRowTop=newStickyContainerHeight}else{const lastChildBottom=this.getFirstPixelOfGroup(stickyRow),stickRowTop=pixelAtContainerBoundary-(newStickyContainerHeight+stickyRow.rowHeight);lastChildBottom>stickRowTop?stickyRow.stickyRowTop=newStickyContainerHeight-(lastChildBottom-stickRowTop):stickyRow.stickyRowTop=newStickyContainerHeight}newStickyContainerHeight=0,newStickyRows.forEach(rowNode=>{const thisRowLastPx=rowNode.stickyRowTop+rowNode.rowHeight;newStickyContainerHeight<thisRowLastPx&&(newStickyContainerHeight=thisRowLastPx)})},"addStickyRow"),suppressFootersSticky=this.areFooterRowsStickySuppressed(),suppressGroupsSticky=this.gos.get("suppressGroupRowsSticky"),isRowSticky=__name(row=>{if(!row.displayed)return!1;if(row.footer){if(suppressFootersSticky===!0||suppressFootersSticky==="grand"&&row.level===-1||suppressFootersSticky==="group"&&row.level>-1)return!1;const isFooterFirstRowInGroup=row.sibling.rowIndex?row.sibling.rowIndex+1===row.rowIndex:!1;return container==="bottom"&&isFooterFirstRowInGroup?!1:!newStickyRows.has(row)}return row.isExpandable()?suppressGroupsSticky===!0||container==="bottom"?!1:!newStickyRows.has(row)&&row.expanded:!1},"isRowSticky");for(let i=0;i<100;i++){let firstPixelAfterStickyRows=pixelAtContainerBoundary+newStickyContainerHeight;isTop||(firstPixelAfterStickyRows=pixelAtContainerBoundary-newStickyContainerHeight);const firstIndex=this.rowModel.getRowIndexAtPixel(firstPixelAfterStickyRows),firstRow=this.rowModel.getRow(firstIndex);if(firstRow==null)break;const firstMissingParent=this.getStickyAncestors(firstRow).find(parent=>(isTop?parent.rowIndex<firstIndex:parent.rowIndex>firstIndex)&&isRowSticky(parent));if(firstMissingParent){addStickyRow(firstMissingParent);continue}if((isTop?firstRow.rowTop<firstPixelAfterStickyRows:firstRow.rowTop+firstRow.rowHeight>firstPixelAfterStickyRows)&&isRowSticky(firstRow)){addStickyRow(firstRow);continue}break}return isTop||newStickyRows.forEach(rowNode=>{rowNode.stickyRowTop=newStickyContainerHeight-(rowNode.stickyRowTop+rowNode.rowHeight)}),this.refreshNodesAndContainerHeight(container,newStickyRows,newStickyContainerHeight)}areFooterRowsStickySuppressed(){const suppressFootersSticky=this.gos.get("suppressStickyTotalRow");if(suppressFootersSticky===!0)return!0;const suppressGroupRows=!!this.gos.get("groupIncludeFooter")||suppressFootersSticky==="group",suppressGrandRows=!!this.gos.get("groupIncludeTotalFooter")||suppressFootersSticky==="grand";return suppressGroupRows&&suppressGrandRows?!0:suppressGrandRows?"grand":suppressGroupRows?"group":!1}canRowsBeSticky(){const isStickyEnabled=_isGroupRowsSticky(this.gos),suppressFootersSticky=this.areFooterRowsStickySuppressed(),suppressGroupsSticky=this.gos.get("suppressGroupRowsSticky");return isStickyEnabled&&(!suppressFootersSticky||!suppressGroupsSticky)}getStickyAncestors(rowNode){const ancestors=[];let p=rowNode.footer?rowNode.sibling:rowNode.parent;for(;p;)p.sibling&&ancestors.push(p.sibling),ancestors.push(p),p=p.parent;return ancestors.reverse()}checkStickyRows(){const hasTopUpdated=this.updateStickyRows("top"),hasBottomUpdated=this.updateStickyRows("bottom");return hasTopUpdated||hasBottomUpdated}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(stickRowNode){const allStickyNodes=new Set;if(this.stickyTopRowCtrls.some(ctrl=>ctrl.getRowNode()===stickRowNode)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const currentNode=this.stickyTopRowCtrls[i].getRowNode();currentNode!==stickRowNode&&allStickyNodes.add(currentNode)}this.refreshNodesAndContainerHeight("top",allStickyNodes,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const currentNode=this.stickyBottomRowCtrls[i].getRowNode();currentNode!==stickRowNode&&allStickyNodes.add(currentNode)}this.refreshNodesAndContainerHeight("bottom",allStickyNodes,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(container,newStickyNodes,height){const isTop=container==="top",previousCtrls=isTop?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,removedCtrlsMap={},remainingCtrls=[];for(let i=0;i<previousCtrls.length;i++){const node=previousCtrls[i].getRowNode();if(!newStickyNodes.has(node)){removedCtrlsMap[node.id]=previousCtrls[i],node.sticky=!1;continue}remainingCtrls.push(previousCtrls[i])}const existingNodes=new Set;for(let i=0;i<remainingCtrls.length;i++)existingNodes.add(remainingCtrls[i].getRowNode());const newCtrls=[];newStickyNodes.forEach(node=>{existingNodes.has(node)||(node.sticky=!0,newCtrls.push(this.createRowCon(node,!1,!1)))});let hasSomethingChanged=!!newCtrls.length||remainingCtrls.length!==previousCtrls.length;isTop?this.topContainerHeight!==height&&(this.topContainerHeight=height,this.gridBodyCtrl.setStickyTopHeight(height),hasSomethingChanged=!0):this.bottomContainerHeight!==height&&(this.bottomContainerHeight=height,this.gridBodyCtrl.setStickyBottomHeight(height),hasSomethingChanged=!0),this.destroyRowCtrls(removedCtrlsMap,!1);const newCtrlsList=[...remainingCtrls,...newCtrls];newCtrlsList.sort((a,b)=>b.getRowNode().rowIndex-a.getRowNode().rowIndex),isTop||newCtrlsList.reverse(),newCtrlsList.forEach(ctrl=>ctrl.setRowTop(ctrl.getRowNode().stickyRowTop));let extraHeight=0;return isTop?(newStickyNodes.forEach(node=>{node.rowIndex<this.pageBoundsService.getFirstRow()&&(extraHeight+=node.rowHeight)}),extraHeight>this.topContainerHeight&&(extraHeight=this.topContainerHeight),this.setOffsetTop(extraHeight)):(newStickyNodes.forEach(node=>{node.rowIndex>this.pageBoundsService.getLastRow()&&(extraHeight+=node.rowHeight)}),extraHeight>this.bottomContainerHeight&&(extraHeight=this.bottomContainerHeight),this.setOffsetBottom(extraHeight)),hasSomethingChanged?(isTop?this.stickyTopRowCtrls=newCtrlsList:this.stickyBottomRowCtrls=newCtrlsList,!0):!1}ensureRowHeightsValid(){let anyChange=!1;const updateRowHeight=__name(ctrl=>{const rowNode=ctrl.getRowNode();if(rowNode.rowHeightEstimated){const rowHeight=_getRowHeightForNode(this.gos,rowNode);rowNode.setRowHeight(rowHeight.height),anyChange=!0}},"updateRowHeight");return this.stickyTopRowCtrls.forEach(updateRowHeight),this.stickyBottomRowCtrls.forEach(updateRowHeight),anyChange}},__name(_a168,"StickyRowFeature"),_a168),_a169,RowRenderer=(_a169=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const onCellSelectionChanged=__name(()=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onCellSelectionChanged())},"onCellSelectionChanged"),onColumnMovedPinnedVisible=__name(()=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.updateRangeBordersIfRangeCount())},"onColumnMovedPinnedVisible"),addCellSelectionListeners=__name(()=>{this.eventService.addEventListener("cellSelectionChanged",onCellSelectionChanged),this.eventService.addEventListener("columnMoved",onColumnMovedPinnedVisible),this.eventService.addEventListener("columnPinned",onColumnMovedPinnedVisible),this.eventService.addEventListener("columnVisible",onColumnMovedPinnedVisible)},"addCellSelectionListeners"),removeCellSelectionListeners=__name(()=>{this.eventService.removeEventListener("cellSelectionChanged",onCellSelectionChanged),this.eventService.removeEventListener("columnMoved",onColumnMovedPinnedVisible),this.eventService.removeEventListener("columnPinned",onColumnMovedPinnedVisible),this.eventService.removeEventListener("columnVisible",onColumnMovedPinnedVisible)},"removeCellSelectionListeners");this.addDestroyFunc(()=>removeCellSelectionListeners()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{_isCellSelectionEnabled(this.gos)?addCellSelectionListeners():removeCellSelectionListeners()}),_isCellSelectionEnabled(this.gos)&&addCellSelectionListeners()}}wireBeans(beans){this.animationFrameService=beans.animationFrameService,this.paginationService=beans.paginationService,this.pageBoundsService=beans.pageBoundsService,this.columnModel=beans.columnModel,this.visibleColsService=beans.visibleColsService,this.pinnedRowModel=beans.pinnedRowModel,this.rowModel=beans.rowModel,this.focusService=beans.focusService,this.beans=beans,this.rowContainerHeightService=beans.rowContainerHeightService,this.ctrlsService=beans.ctrlsService,this.environment=beans.environment}postConstruct(){this.ctrlsService.whenReady(this,p=>{this.gridBodyCtrl=p.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),_isGroupRowsSticky(this.gos)&&(_isClientSideRowModel(this.gos)||_isServerSideRowModel(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new StickyRowFeature(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=_isDomLayout(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const countProp=this.getKeepDetailRowsCount(),count=countProp??3;this.cachedRowCtrls=new RowCtrlCache(count)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const liveList=_getAllValuesInObject(this.rowCtrlsByRowIndex),zombieList=_getAllValuesInObject(this.zombieRowCtrls),cachedList=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];zombieList.length>0||cachedList.length>0?this.allRowCtrls=[...liveList,...zombieList,...cachedList]:this.allRowCtrls=liveList}onCellFocusChanged(event){this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onCellFocused(event)),this.getFullWidthRowCtrls().forEach(rowCtrl=>rowCtrl.onFullWidthRowFocused(event))}onSuppressCellFocusChanged(suppressCellFocus){this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onSuppressCellFocusChanged(suppressCellFocus)),this.getFullWidthRowCtrls().forEach(rowCtrl=>rowCtrl.onSuppressCellFocusChanged(suppressCellFocus))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:__name(event=>{this.onCellFocusChanged(event)},"cellFocused"),cellFocusCleared:__name(()=>this.onCellFocusChanged(),"cellFocusCleared"),flashCells:__name(event=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onFlashCells(event))},"flashCells"),columnHoverChanged:__name(()=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onColumnHover())},"columnHoverChanged"),displayedColumnsChanged:__name(()=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onDisplayedColumnsChanged())},"displayedColumnsChanged"),displayedColumnsWidthChanged:__name(()=>{this.printLayout&&this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onLeftChanged())},"displayedColumnsWidthChanged")}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(func=>func()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(col=>{const forEachCellWithThisCol=__name(callback=>{this.getAllCellCtrls().forEach(cellCtrl=>{cellCtrl.getColumn()===col&&callback(cellCtrl)})},"forEachCellWithThisCol"),leftChangedListener=__name(()=>{forEachCellWithThisCol(cellCtrl=>cellCtrl.onLeftChanged())},"leftChangedListener"),widthChangedListener=__name(()=>{forEachCellWithThisCol(cellCtrl=>cellCtrl.onWidthChanged())},"widthChangedListener"),firstRightPinnedChangedListener=__name(()=>{forEachCellWithThisCol(cellCtrl=>cellCtrl.onFirstRightPinnedChanged())},"firstRightPinnedChangedListener"),lastLeftPinnedChangedListener=__name(()=>{forEachCellWithThisCol(cellCtrl=>cellCtrl.onLastLeftPinnedChanged())},"lastLeftPinnedChangedListener"),colDefChangedListener=__name(()=>{forEachCellWithThisCol(cellCtrl=>cellCtrl.onColDefChanged())},"colDefChangedListener");col.addEventListener("leftChanged",leftChangedListener),col.addEventListener("widthChanged",widthChangedListener),col.addEventListener("firstRightPinnedChanged",firstRightPinnedChangedListener),col.addEventListener("lastLeftPinnedChanged",lastLeftPinnedChangedListener),col.addEventListener("colDefChanged",colDefChangedListener),this.destroyFuncsForColumnListeners.push(()=>{col.removeEventListener("leftChanged",leftChangedListener),col.removeEventListener("widthChanged",widthChangedListener),col.removeEventListener("firstRightPinnedChanged",firstRightPinnedChangedListener),col.removeEventListener("lastLeftPinnedChanged",lastLeftPinnedChangedListener),col.removeEventListener("colDefChanged",colDefChangedListener)})})}onDomLayoutChanged(){const printLayout=_isDomLayout(this.gos,"print"),embedFullWidthRows=printLayout||this.gos.get("embedFullWidthRows"),destroyRows=embedFullWidthRows!==this.embedFullWidthRows||this.printLayout!==printLayout;this.printLayout=printLayout,this.embedFullWidthRows=embedFullWidthRows,destroyRows&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove)}onPageLoaded(event){const params={recycleRows:event.keepRenderedRows,animate:event.animate,newData:event.newData,newPage:event.newPage,onlyBody:!0};this.redrawAfterModelUpdate(params)}getAllCellsForColumn(column){const res=[];return this.getAllRowCtrls().forEach(rowCtrl=>{const eCell=rowCtrl.getCellElement(column);eCell&&res.push(eCell)}),res}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(rowCtrls,floating){const{pinnedRowModel,beans,printLayout}=this,rowCtrlMap=Object.fromEntries(rowCtrls.map(ctrl=>[ctrl.getRowNode().id,ctrl]));pinnedRowModel.forEachPinnedRow(floating,(node,i)=>{const rowCtrl=rowCtrls[i];rowCtrl&&pinnedRowModel.getPinnedRowById(rowCtrl.getRowNode().id,floating)===void 0&&(rowCtrl.destroyFirstPass(),rowCtrl.destroySecondPass()),node.id in rowCtrlMap?(rowCtrls[i]=rowCtrlMap[node.id],delete rowCtrlMap[node.id]):rowCtrls[i]=new RowCtrl(node,beans,!1,!1,printLayout)});const rowNodeCount=floating==="top"?pinnedRowModel.getPinnedTopRowCount():pinnedRowModel.getPinnedBottomRowCount();rowCtrls.length=rowNodeCount}onPinnedRowDataChanged(){const params={recycleRows:!0};this.redrawAfterModelUpdate(params)}redrawRow(rowNode,suppressEvent=!1){var _a253;if(rowNode.sticky)this.stickyRowFeature.refreshStickyNode(rowNode);else if((_a253=this.cachedRowCtrls)!=null&&_a253.has(rowNode)){this.cachedRowCtrls.removeRow(rowNode);return}else{const destroyAndRecreateCtrl=__name(dataStruct=>{const ctrl=dataStruct[rowNode.rowIndex];ctrl&&ctrl.getRowNode()===rowNode&&(ctrl.destroyFirstPass(),ctrl.destroySecondPass(),dataStruct[rowNode.rowIndex]=this.createRowCon(rowNode,!1,!1))},"destroyAndRecreateCtrl");switch(rowNode.rowPinned){case"top":destroyAndRecreateCtrl(this.topRowCtrls);break;case"bottom":destroyAndRecreateCtrl(this.bottomRowCtrls);break;default:destroyAndRecreateCtrl(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}suppressEvent||this.dispatchDisplayedRowsChanged(!1)}redrawRows(rowNodes){if(rowNodes!=null){rowNodes==null||rowNodes.forEach(node=>this.redrawRow(node,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(params){const focusedCell=params!=null&&params.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(focusedCell==null)return null;const activeElement=_getActiveDomElement(this.gos),cellDomData=_getDomData(this.gos,activeElement,CellCtrl.DOM_DATA_KEY_CELL_CTRL),rowDomData=_getDomData(this.gos,activeElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL);return cellDomData||rowDomData?focusedCell:null}redrawAfterModelUpdate(params={}){this.getLockOnRefresh();const focusedCell=this.getCellToRestoreFocusToAfterRefresh(params);this.updateContainerHeights(),this.scrollToTopIfNewData(params);const recycleRows=!params.domLayoutChanged&&!!params.recycleRows,animate=params.animate&&_isAnimateRows(this.gos),rowsToRecycle=recycleRows?this.getRowsToRecycle():null;if(recycleRows||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const extraHeight=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();extraHeight&&this.updateContainerHeights(extraHeight)}this.recycleRows(rowsToRecycle,animate),this.gridBodyCtrl.updateRowCount(),params.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),focusedCell!=null&&this.restoreFocusedCell(focusedCell),this.releaseLockOnRefresh()}scrollToTopIfNewData(params){var _a253;const scrollToTop=params.newData||params.newPage,suppressScrollToTop=this.gos.get("suppressScrollOnNewData");scrollToTop&&!suppressScrollToTop&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),(_a253=this.stickyRowFeature)==null||_a253.resetOffsets())}updateContainerHeights(additionalHeight=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let containerHeight=this.pageBoundsService.getCurrentPageHeight();containerHeight===0&&(containerHeight=1),this.rowContainerHeightService.setModelHeight(containerHeight+additionalHeight)}getLockOnRefresh(){var _a253,_b;if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,(_b=(_a253=this.frameworkOverrides).getLockOnRefresh)==null||_b.call(_a253)}releaseLockOnRefresh(){var _a253,_b;this.refreshInProgress=!1,(_b=(_a253=this.frameworkOverrides).releaseLockOnRefresh)==null||_b.call(_a253)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(cellPosition){cellPosition&&this.focusService.restoreFocusedCell(cellPosition,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:cellPosition.rowIndex,column:cellPosition.column,rowPinned:cellPosition.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(cancel=!1){this.getAllRowCtrls().forEach(rowCtrl=>{rowCtrl.stopEditing(cancel)})}getAllCellCtrls(){const res=[],rowCtrls=this.getAllRowCtrls(),rowCtrlsLength=rowCtrls.length;for(let i=0;i<rowCtrlsLength;i++){const cellCtrls=rowCtrls[i].getAllCellCtrls(),cellCtrlsLength=cellCtrls.length;for(let j=0;j<cellCtrlsLength;j++)res.push(cellCtrls[j])}return res}getAllRowCtrls(){const stickyTopRowCtrls=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],stickyBottomRowCtrls=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],res=[...this.topRowCtrls,...this.bottomRowCtrls,...stickyTopRowCtrls,...stickyBottomRowCtrls];for(const key in this.rowCtrlsByRowIndex)res.push(this.rowCtrlsByRowIndex[key]);return res}addRenderedRowListener(eventName,rowIndex,callback){const rowComp=this.rowCtrlsByRowIndex[rowIndex];rowComp&&rowComp.addEventListener(eventName,callback)}flashCells(params={}){this.getCellCtrls(params.rowNodes,params.columns).forEach(cellCtrl=>cellCtrl.flashCell(params))}refreshCells(params={}){const refreshCellParams={forceRefresh:params.force,newData:!1,suppressFlash:params.suppressFlash};for(const cellCtrl of this.getCellCtrls(params.rowNodes,params.columns))cellCtrl.refreshOrDestroyCell(refreshCellParams);this.refreshFullWidth(params.rowNodes)}refreshFullWidth(rowNodes){if(!rowNodes)return;let cellFocused=null;this.stickyRowFeature&&_browserSupportsPreventScroll()&&(cellFocused=this.getCellToRestoreFocusToAfterRefresh()||null);for(const rowCtrl of this.getRowCtrls(rowNodes)){if(!rowCtrl.isFullWidth())continue;rowCtrl.refreshFullWidth()||this.redrawRow(rowCtrl.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),cellFocused&&this.restoreFocusedCell(cellFocused)}getCellRendererInstances(params){var _a253;const cellRenderers=this.getCellCtrls(params.rowNodes,params.columns).map(cellCtrl=>cellCtrl.getCellRenderer()).filter(renderer=>renderer!=null);if((_a253=params.columns)!=null&&_a253.length)return cellRenderers;const fullWidthRenderers=[],rowIdMap=this.mapRowNodes(params.rowNodes);return this.getAllRowCtrls().forEach(rowCtrl=>{if(rowIdMap&&!this.isRowInMap(rowCtrl.getRowNode(),rowIdMap)||!rowCtrl.isFullWidth())return;const renderers=rowCtrl.getFullWidthCellRenderers();for(let i=0;i<renderers.length;i++){const renderer=renderers[i];renderer!=null&&fullWidthRenderers.push(renderer)}}),[...fullWidthRenderers,...cellRenderers]}getCellEditorInstances(params){const res=[];return this.getCellCtrls(params.rowNodes,params.columns).forEach(cellCtrl=>{const cellEditor=cellCtrl.getCellEditor();cellEditor&&res.push(cellEditor)}),res}getEditingCells(){const res=[];return this.getAllCellCtrls().forEach(cellCtrl=>{if(cellCtrl.isEditing()){const cellPosition=cellCtrl.getCellPosition();res.push(cellPosition)}}),res}mapRowNodes(rowNodes){if(!rowNodes)return;const res={top:{},bottom:{},normal:{}};return rowNodes.forEach(rowNode=>{const id=rowNode.id;switch(rowNode.rowPinned){case"top":res.top[id]=rowNode;break;case"bottom":res.bottom[id]=rowNode;break;default:res.normal[id]=rowNode;break}}),res}isRowInMap(rowNode,rowIdsMap){const id=rowNode.id;switch(rowNode.rowPinned){case"top":return rowIdsMap.top[id]!=null;case"bottom":return rowIdsMap.bottom[id]!=null;default:return rowIdsMap.normal[id]!=null}}getRowCtrls(rowNodes){const rowIdsMap=this.mapRowNodes(rowNodes),allRowCtrls=this.getAllRowCtrls();return!rowNodes||!rowIdsMap?allRowCtrls:allRowCtrls.filter(rowCtrl=>{const rowNode=rowCtrl.getRowNode();return this.isRowInMap(rowNode,rowIdsMap)})}getCellCtrls(rowNodes,columns){let colIdsMap;_exists(columns)&&(colIdsMap={},columns.forEach(colKey=>{const column=this.columnModel.getCol(colKey);_exists(column)&&(colIdsMap[column.getId()]=!0)}));const res=[];return this.getRowCtrls(rowNodes).forEach(rowCtrl=>{rowCtrl.getAllCellCtrls().forEach(cellCtrl=>{const colId=cellCtrl.getColumn().getId();colIdsMap&&!colIdsMap[colId]||res.push(cellCtrl)})}),res}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(suppressAnimation=!1){const rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove,suppressAnimation),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const stubNodeIndexes=[];_iterateObject(this.rowCtrlsByRowIndex,(index,rowCtrl)=>{rowCtrl.getRowNode().id==null&&stubNodeIndexes.push(index)}),this.removeRowCtrls(stubNodeIndexes);const ctrlsByIdMap={};return _iterateObject(this.rowCtrlsByRowIndex,(_,rowCtrl)=>{const rowNode=rowCtrl.getRowNode();ctrlsByIdMap[rowNode.id]=rowCtrl}),this.rowCtrlsByRowIndex={},ctrlsByIdMap}removeRowCtrls(rowsToRemove,suppressAnimation=!1){rowsToRemove.forEach(indexToRemove=>{const rowCtrl=this.rowCtrlsByRowIndex[indexToRemove];rowCtrl&&(rowCtrl.destroyFirstPass(suppressAnimation),rowCtrl.destroySecondPass()),delete this.rowCtrlsByRowIndex[indexToRemove]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(params={}){const{afterScroll}=params;let cellFocused;this.stickyRowFeature&&_browserSupportsPreventScroll()&&(cellFocused=this.getCellToRestoreFocusToAfterRefresh()||void 0);const oldFirstRow=this.firstRenderedRow,oldLastRow=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let hasStickyRowChanges=!1;if(this.stickyRowFeature){hasStickyRowChanges=this.stickyRowFeature.checkStickyRows();const extraHeight=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();extraHeight&&this.updateContainerHeights(extraHeight)}const rangeChanged=this.firstRenderedRow!==oldFirstRow||this.lastRenderedRow!==oldLastRow;if(!(afterScroll&&!hasStickyRowChanges&&!rangeChanged)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,afterScroll),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(afterScroll&&!hasStickyRowChanges),cellFocused!=null)){const newFocusedCell=this.getCellToRestoreFocusToAfterRefresh();cellFocused!=null&&newFocusedCell==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(cellFocused))}}removeRowCompsNotToDraw(indexesToDraw,suppressAnimation){const indexesToDrawMap={};indexesToDraw.forEach(index=>indexesToDrawMap[index]=!0);const indexesNotToDraw=Object.keys(this.rowCtrlsByRowIndex).filter(index=>!indexesToDrawMap[index]);this.removeRowCtrls(indexesNotToDraw,suppressAnimation)}calculateIndexesToDraw(rowsToRecycle){const indexesToDraw=_createArrayOfNumbers(this.firstRenderedRow,this.lastRenderedRow),checkRowToDraw=__name((indexStr,rowComp)=>{const index=rowComp.getRowNode().rowIndex;index!=null&&(index<this.firstRenderedRow||index>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(rowComp)&&indexesToDraw.push(index)},"checkRowToDraw");_iterateObject(this.rowCtrlsByRowIndex,checkRowToDraw),_iterateObject(rowsToRecycle,checkRowToDraw),indexesToDraw.sort((a,b)=>a-b);const ret=[];for(let i=0;i<indexesToDraw.length;i++){const currRow=indexesToDraw[i],rowNode=this.rowModel.getRow(currRow);rowNode&&!rowNode.sticky&&ret.push(currRow)}return ret}recycleRows(rowsToRecycle,animate=!1,afterScroll=!1){const indexesToDraw=this.calculateIndexesToDraw(rowsToRecycle);(this.printLayout||afterScroll)&&(animate=!1),this.removeRowCompsNotToDraw(indexesToDraw,!animate),indexesToDraw.forEach(rowIndex=>{this.createOrUpdateRowCtrl(rowIndex,rowsToRecycle,animate,afterScroll)}),rowsToRecycle&&(afterScroll&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(rowsToRecycle,animate),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(rowsToRecycle,animate)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(afterScroll=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll})}onDisplayedColumnsChanged(){const pinningLeft=this.visibleColsService.isPinningLeft(),pinningRight=this.visibleColsService.isPinningRight();(this.pinningLeft!==pinningLeft||pinningRight!==this.pinningRight)&&(this.pinningLeft=pinningLeft,this.pinningRight=pinningRight,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const rowsToRemove=[];this.getFullWidthRowCtrls().forEach(fullWidthCtrl=>{const rowIndex=fullWidthCtrl.getRowNode().rowIndex;rowsToRemove.push(rowIndex.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(rowsToRemove),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(rowNodes){const rowNodesMap=this.mapRowNodes(rowNodes);return this.getAllRowCtrls().filter(rowCtrl=>{if(!rowCtrl.isFullWidth())return!1;const rowNode=rowCtrl.getRowNode();return!(rowNodesMap!=null&&!this.isRowInMap(rowNode,rowNodesMap))})}createOrUpdateRowCtrl(rowIndex,rowsToRecycle,animate,afterScroll){let rowNode,rowCtrl=this.rowCtrlsByRowIndex[rowIndex];if(rowCtrl||(rowNode=this.rowModel.getRow(rowIndex),_exists(rowNode)&&_exists(rowsToRecycle)&&rowsToRecycle[rowNode.id]&&rowNode.alreadyRendered&&(rowCtrl=rowsToRecycle[rowNode.id],rowsToRecycle[rowNode.id]=null)),!rowCtrl)if(rowNode||(rowNode=this.rowModel.getRow(rowIndex)),_exists(rowNode))rowCtrl=this.createRowCon(rowNode,animate,afterScroll);else return;return rowNode&&(rowNode.alreadyRendered=!0),this.rowCtrlsByRowIndex[rowIndex]=rowCtrl,rowCtrl}destroyRowCtrls(rowCtrlsMap,animate){const executeInAWhileFuncs=[];_iterateObject(rowCtrlsMap,(nodeId,rowCtrl)=>{if(rowCtrl){if(this.cachedRowCtrls&&rowCtrl.isCacheable()){this.cachedRowCtrls.addRow(rowCtrl);return}if(rowCtrl.destroyFirstPass(!animate),animate){const instanceId=rowCtrl.instanceId;this.zombieRowCtrls[instanceId]=rowCtrl,executeInAWhileFuncs.push(()=>{rowCtrl.destroySecondPass(),delete this.zombieRowCtrls[instanceId]})}else rowCtrl.destroySecondPass()}}),animate&&(executeInAWhileFuncs.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),_executeInAWhile(executeInAWhileFuncs))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const rowsToBuffer=this.getRowBuffer(),defaultRowHeight=_getRowHeightAsNumber(this.gos);return rowsToBuffer*defaultRowHeight}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let newFirst,newLast;if(!this.rowModel.isRowsToRender())newFirst=0,newLast=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),newFirst=this.pageBoundsService.getFirstRow(),newLast=this.pageBoundsService.getLastRow();else{const bufferPixels=this.getRowBufferInPixels(),gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),suppressRowVirtualisation=this.gos.get("suppressRowVirtualisation");let rowHeightsChanged=!1,firstPixel,lastPixel;do{const paginationOffset=this.pageBoundsService.getPixelOffset(),{pageFirstPixel,pageLastPixel}=this.pageBoundsService.getCurrentPagePixelRange(),divStretchOffset=this.rowContainerHeightService.getDivStretchOffset(),bodyVRange=gridBodyCtrl.getScrollFeature().getVScrollPosition(),bodyTopPixel=bodyVRange.top,bodyBottomPixel=bodyVRange.bottom;suppressRowVirtualisation?(firstPixel=pageFirstPixel+divStretchOffset,lastPixel=pageLastPixel+divStretchOffset):(firstPixel=Math.max(bodyTopPixel+paginationOffset-bufferPixels,pageFirstPixel)+divStretchOffset,lastPixel=Math.min(bodyBottomPixel+paginationOffset+bufferPixels,pageLastPixel)+divStretchOffset),this.firstVisibleVPixel=Math.max(bodyTopPixel+paginationOffset,pageFirstPixel)+divStretchOffset,this.lastVisibleVPixel=Math.min(bodyBottomPixel+paginationOffset,pageLastPixel)+divStretchOffset,rowHeightsChanged=this.ensureAllRowsInRangeHaveHeightsCalculated(firstPixel,lastPixel)}while(rowHeightsChanged);let firstRowIndex=this.rowModel.getRowIndexAtPixel(firstPixel),lastRowIndex=this.rowModel.getRowIndexAtPixel(lastPixel);const pageFirstRow=this.pageBoundsService.getFirstRow(),pageLastRow=this.pageBoundsService.getLastRow();firstRowIndex<pageFirstRow&&(firstRowIndex=pageFirstRow),lastRowIndex>pageLastRow&&(lastRowIndex=pageLastRow),newFirst=firstRowIndex,newLast=lastRowIndex}const rowLayoutNormal=_isDomLayout(this.gos,"normal"),suppressRowCountRestriction=this.gos.get("suppressMaxRenderedRowRestriction"),rowBufferMaxSize=Math.max(this.getRowBuffer(),500);rowLayoutNormal&&!suppressRowCountRestriction&&newLast-newFirst>rowBufferMaxSize&&(newLast=newFirst+rowBufferMaxSize);const firstDiffers=newFirst!==this.firstRenderedRow,lastDiffers=newLast!==this.lastRenderedRow;(firstDiffers||lastDiffers)&&(this.firstRenderedRow=newFirst,this.lastRenderedRow=newLast,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:newFirst,lastRow:newLast}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(topPixel,bottomPixel){var _a253,_b;const pinnedRowHeightsChanged=(_a253=this.pinnedRowModel)==null?void 0:_a253.ensureRowHeightsValid(),stickyHeightsChanged=(_b=this.stickyRowFeature)==null?void 0:_b.ensureRowHeightsValid(),rowModelHeightsChanged=this.rowModel.ensureRowHeightsValid(topPixel,bottomPixel,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(rowModelHeightsChanged||stickyHeightsChanged)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),stickyHeightsChanged||rowModelHeightsChanged||pinnedRowHeightsChanged?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(rowComp){const rowNode=rowComp.getRowNode(),rowHasFocus=this.focusService.isRowNodeFocused(rowNode),rowIsEditing=rowComp.isEditing(),rowIsDetail=rowNode.detail;return rowHasFocus||rowIsEditing||rowIsDetail?!!this.isRowPresent(rowNode):!1}isRowPresent(rowNode){return this.rowModel.isRowPresent(rowNode)?this.paginationService?this.paginationService.isRowPresent(rowNode):!0:!1}createRowCon(rowNode,animate,afterScroll){const rowCtrlFromCache=this.cachedRowCtrls?this.cachedRowCtrls.getRow(rowNode):null;if(rowCtrlFromCache)return rowCtrlFromCache;const suppressAnimationFrame=this.gos.get("suppressAnimationFrame"),useAnimationFrameForCreate=afterScroll&&!suppressAnimationFrame&&!this.printLayout;return new RowCtrl(rowNode,this.beans,animate,useAnimationFrameForCreate,this.printLayout)}getRenderedNodes(){const renderedRows=this.rowCtrlsByRowIndex;return Object.values(renderedRows).map(rowCtrl=>rowCtrl.getRowNode())}getRowByPosition(rowPosition){let rowCtrl;const{rowIndex}=rowPosition;switch(rowPosition.rowPinned){case"top":rowCtrl=this.topRowCtrls[rowIndex];break;case"bottom":rowCtrl=this.bottomRowCtrls[rowIndex];break;default:rowCtrl=this.rowCtrlsByRowIndex[rowIndex],rowCtrl||(rowCtrl=this.getStickyTopRowCtrls().find(ctrl=>ctrl.getRowNode().rowIndex===rowIndex)||null,rowCtrl||(rowCtrl=this.getStickyBottomRowCtrls().find(ctrl=>ctrl.getRowNode().rowIndex===rowIndex)||null));break}return rowCtrl}isRangeInRenderedViewport(startIndex,endIndex){if(startIndex==null||endIndex==null)return!1;const blockAfterViewport=startIndex>this.lastRenderedRow;return!(endIndex<this.firstRenderedRow)&&!blockAfterViewport}},__name(_a169,"RowRenderer"),_a169),_a170,RowCtrlCache=(_a170=class{constructor(maxCount){this.entriesMap={},this.entriesList=[],this.maxCount=maxCount}addRow(rowCtrl){if(this.entriesMap[rowCtrl.getRowNode().id]=rowCtrl,this.entriesList.push(rowCtrl),rowCtrl.setCached(!0),this.entriesList.length>this.maxCount){const rowCtrlToDestroy=this.entriesList[0];rowCtrlToDestroy.destroyFirstPass(),rowCtrlToDestroy.destroySecondPass(),this.removeFromCache(rowCtrlToDestroy)}}getRow(rowNode){if(rowNode==null||rowNode.id==null)return null;const res=this.entriesMap[rowNode.id];return res?(this.removeFromCache(res),res.setCached(!1),res.getRowNode()!=rowNode?null:res):null}has(rowNode){return this.entriesMap[rowNode.id]!=null}removeRow(rowNode){const rowNodeId=rowNode.id,ctrl=this.entriesMap[rowNodeId];delete this.entriesMap[rowNodeId],_removeFromArray(this.entriesList,ctrl)}removeFromCache(rowCtrl){const rowNodeId=rowCtrl.getRowNode().id;delete this.entriesMap[rowNodeId],_removeFromArray(this.entriesList,rowCtrl)}getEntries(){return this.entriesList}},__name(_a170,"RowCtrlCache"),_a170),_a171,PinnedRowModel=(_a171=class extends BeanStub{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new OrderedCache,this.pinnedBottomRows=new OrderedCache}wireBeans(beans){this.beans=beans}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(floating){return(floating==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(floating){return!this.isEmpty(floating)}onGridStylesChanges(e){if(e.rowHeightChanged){const estimateRowHeight=__name(rowNode=>{rowNode.setRowHeight(rowNode.rowHeight,!0)},"estimateRowHeight");this.pinnedBottomRows.forEach(estimateRowHeight),this.pinnedTopRows.forEach(estimateRowHeight)}}ensureRowHeightsValid(){var _a253,_b;let anyChange=!1,rowTop=0;const updateRowHeight=__name(rowNode=>{if(rowNode.rowHeightEstimated){const rowHeight=_getRowHeightForNode(this.gos,rowNode);rowNode.setRowTop(rowTop),rowNode.setRowHeight(rowHeight.height),rowTop+=rowHeight.height,anyChange=!0}},"updateRowHeight");return(_a253=this.pinnedBottomRows)==null||_a253.forEach(updateRowHeight),rowTop=0,(_b=this.pinnedTopRows)==null||_b.forEach(updateRowHeight),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),anyChange}setPinnedRowData(rowData,floating){this.updateNodesFromRowData(rowData,floating),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(allData,floating){const nodes=floating==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(allData===void 0){nodes.clear();return}const getRowId=_getRowIdCallback(this.gos),idPrefix=floating==="top"?RowNode.ID_PREFIX_TOP_PINNED:RowNode.ID_PREFIX_BOTTOM_PINNED,nodesToRemove=nodes.getIds(),newOrder=[],dataIds=new Set;let nextRowTop=0,i=-1;for(const data of allData){const id=(getRowId==null?void 0:getRowId({data,level:0,rowPinned:floating}))??idPrefix+this.nextId++;if(dataIds.has(id)){_warnOnce("Duplicate ID",id,"found for pinned row with data",data,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}i++,dataIds.add(id),newOrder.push(id);const existingNode=nodes.getById(id);if(existingNode!==void 0)existingNode.data!==data&&existingNode.setData(data),nextRowTop+=this.setRowTopAndRowIndex(existingNode,nextRowTop,i),nodesToRemove.delete(id);else{const rowNode=new RowNode(this.beans);rowNode.id=id,rowNode.data=data,rowNode.rowPinned=floating,nextRowTop+=this.setRowTopAndRowIndex(rowNode,nextRowTop,i),nodes.push(rowNode)}}nodesToRemove.forEach(id=>{var _a253;(_a253=nodes.getById(id))==null||_a253.clearRowTopAndRowIndex()}),nodes.removeAllById(nodesToRemove),nodes.setOrder(newOrder)}setRowTopAndRowIndex(rowNode,rowTop,rowIndex){return rowNode.setRowTop(rowTop),rowNode.setRowHeight(_getRowHeightForNode(this.gos,rowNode).height),rowNode.setRowIndex(rowIndex),rowNode.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(index){return this.pinnedTopRows.getByIndex(index)}getPinnedBottomRow(index){return this.pinnedBottomRows.getByIndex(index)}getPinnedRowById(id,floating){return floating==="top"?this.pinnedTopRows.getById(id):this.pinnedBottomRows.getById(id)}forEachPinnedRow(floating,callback){return floating==="top"?this.pinnedTopRows.forEach(callback):this.pinnedBottomRows.forEach(callback)}getTotalHeight(rowNodes){const size=rowNodes.getSize();if(size===0)return 0;const node=rowNodes.getByIndex(size-1);return node===void 0?0:node.rowTop+node.rowHeight}},__name(_a171,"PinnedRowModel"),_a171),_a172,OrderedCache=(_a172=class{constructor(){this.cache={},this.ordering=[]}getById(id){return this.cache[id]}getByIndex(i){const id=this.ordering[i];return this.cache[id]}push(item){this.cache[item.id]=item,this.ordering.push(item.id)}removeAllById(ids){for(const id of ids)delete this.cache[id];this.ordering=this.ordering.filter(id=>!ids.has(id))}setOrder(orderedIds){this.ordering=orderedIds}forEach(callback){this.ordering.forEach((id,index)=>{const node=this.cache[id];node&&callback(node,index)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},__name(_a172,"OrderedCache"),_a172),_a173,RowNodeBlock=(_a173=class extends BeanStub{constructor(id){super(),this.state="needsLoading",this.version=0,this.id=id}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(version){this.isRequestMostRecentAndLive(version)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(version,params){this.successCommon(version,params)}pageLoaded(version,rows,lastRow){this.successCommon(version,{rowData:rows,rowCount:lastRow})}isRequestMostRecentAndLive(version){const thisIsMostRecentRequest=version===this.version,weAreNotDestroyed=this.isAlive();return thisIsMostRecentRequest&&weAreNotDestroyed}successCommon(version,params){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(version)&&(this.state="loaded",this.processServerResult(params))}dispatchLoadCompleted(success=!0){const event={type:"loadComplete",success,block:this};this.dispatchLocalEvent(event)}},__name(_a173,"RowNodeBlock"),_a173),_a174,RowNodeBlockLoader=(_a174=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(beans){this.rowModel=beans.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const blockLoadDebounceMillis=this.gos.get("blockLoadDebounceMillis");blockLoadDebounceMillis&&blockLoadDebounceMillis>0&&(this.checkBlockToLoadDebounce=_debounce(this.performCheckBlocksToLoad.bind(this),blockLoadDebounceMillis))}getMaxConcurrentDatasourceRequests(){const res=this.gos.get("maxConcurrentDatasourceRequests");if(res==null)return 2;if(!(res<=0))return res}addBlock(block){this.blocks.push(block),block.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(block){_removeFromArray(this.blocks,block)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&_log("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const loadAvailability=this.getAvailableLoadingCount(),blocksToLoad=this.blocks.filter(block=>block.getState()==="needsLoading").slice(0,loadAvailability);this.registerLoads(blocksToLoad.length),blocksToLoad.forEach(block=>block.load()),this.printCacheStatus()}getBlockState(){if(_isServerSideRowModel(this.gos))return this.rowModel.getBlockStates();const result={};return this.blocks.forEach(block=>{const{id,state}=block.getBlockStateJson();result[id]=state}),result}printCacheStatus(){this.gos.get("debug")&&_log(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(count){this.activeBlockLoadsCount+=count}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},__name(_a174,"RowNodeBlockLoader"),_a174),RowNodeBlockModule={version:VERSION,moduleName:"@ag-grid-community/row-node-block",beans:[RowNodeBlockLoader]},_a175,RowRangeSelectionContext=(_a175=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(rowModel){this.rowModel=rowModel}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(node){this.root=node,this.end=null,this.cachedRange.length=0}setEndRange(end){this.end=end,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const root=this.getRoot(),end=this.getEnd();if(root==null||end==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(root,end)}return this.cachedRange}isInRange(node){return this.root===null?!1:this.getRange().some(nodeInRange=>nodeInRange.id===node.id)}getRoot(){var _a253;return this.root&&((_a253=this.root)==null?void 0:_a253.key)===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){var _a253;return this.end&&((_a253=this.end)==null?void 0:_a253.key)===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(node){const range=this.getRange();if(range.length===0)return{keep:[],discard:[]};const discardAfter=range[0].id===this.root.id,idx=range.findIndex(rowNode=>rowNode.id===node.id);if(idx>-1){const above=range.slice(0,idx),below=range.slice(idx+1);return this.setEndRange(node),discardAfter?{keep:above,discard:below}:{keep:below,discard:above}}else return{keep:range,discard:[]}}extend(node,groupSelectsChildren=!1){const root=this.getRoot();if(root==null){const keep=this.getRange().slice();return groupSelectsChildren&&node.depthFirstSearch(node2=>!node2.group&&keep.push(node2)),keep.push(node),this.setRoot(node),{keep,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(root,node).find(newRangeNode=>{var _a253;return newRangeNode.id===((_a253=this.end)==null?void 0:_a253.id)}))return this.setEndRange(node),{keep:this.getRange(),discard:[]};{const discard=this.getRange().slice();return this.setEndRange(node),{keep:this.getRange(),discard}}}},__name(_a175,"RowRangeSelectionContext"),_a175),_a176,StylingService=(_a176=class extends BeanStub{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(beans){this.expressionService=beans.expressionService}processAllCellClasses(colDef,params,onApplicableClass,onNotApplicableClass){this.processClassRules(void 0,colDef.cellClassRules,params,onApplicableClass,onNotApplicableClass),this.processStaticCellClasses(colDef,params,onApplicableClass)}processClassRules(previousClassRules,classRules,params,onApplicableClass,onNotApplicableClass){if(classRules==null&&previousClassRules==null)return;const classesToApply={},classesToRemove={},forEachSingleClass=__name((className,callback)=>{className.split(" ").forEach(singleClass=>{singleClass.trim()!=""&&callback(singleClass)})},"forEachSingleClass");if(classRules){const classNames=Object.keys(classRules);for(let i=0;i<classNames.length;i++){const className=classNames[i],rule=classRules[className];let resultOfRule;typeof rule=="string"?resultOfRule=this.expressionService.evaluate(rule,params):typeof rule=="function"&&(resultOfRule=rule(params)),forEachSingleClass(className,singleClass=>{resultOfRule?classesToApply[singleClass]=!0:classesToRemove[singleClass]=!0})}}previousClassRules&&onNotApplicableClass&&Object.keys(previousClassRules).forEach(className=>forEachSingleClass(className,singleClass=>{classesToApply[singleClass]||(classesToRemove[singleClass]=!0)})),onNotApplicableClass&&Object.keys(classesToRemove).forEach(onNotApplicableClass),Object.keys(classesToApply).forEach(onApplicableClass)}getStaticCellClasses(colDef,params){const{cellClass}=colDef;if(!cellClass)return[];let classOrClasses;return typeof cellClass=="function"?classOrClasses=cellClass(params):classOrClasses=cellClass,typeof classOrClasses=="string"&&(classOrClasses=[classOrClasses]),classOrClasses||[]}processStaticCellClasses(colDef,params,onApplicableClass){this.getStaticCellClasses(colDef,params).forEach(cssClassItem=>{onApplicableClass(cssClassItem)})}},__name(_a176,"StylingService"),_a176),TabGuardClassNames=(TabGuardClassNames2=>(TabGuardClassNames2.TAB_GUARD="ag-tab-guard",TabGuardClassNames2.TAB_GUARD_TOP="ag-tab-guard-top",TabGuardClassNames2.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",TabGuardClassNames2))(TabGuardClassNames||{}),_a177,TabGuardCtrl=(_a177=class extends BeanStub{constructor(params){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp,eTopGuard,eBottomGuard,focusTrapActive,forceFocusOutWhenTabGuardsAreEmpty,isFocusableContainer,focusInnerElement,onFocusIn,onFocusOut,shouldStopEventPropagation,onTabKeyDown,handleKeyDown,eFocusableElement}=params;this.comp=comp,this.eTopGuard=eTopGuard,this.eBottomGuard=eBottomGuard,this.providedFocusInnerElement=focusInnerElement,this.eFocusableElement=eFocusableElement,this.focusTrapActive=!!focusTrapActive,this.forceFocusOutWhenTabGuardsAreEmpty=!!forceFocusOutWhenTabGuardsAreEmpty,this.isFocusableContainer=!!isFocusableContainer,this.providedFocusIn=onFocusIn,this.providedFocusOut=onFocusOut,this.providedShouldStopEventPropagation=shouldStopEventPropagation,this.providedOnTabKeyDown=onTabKeyDown,this.providedHandleKeyDown=handleKeyDown}wireBeans(beans){this.focusService=beans.focusService}postConstruct(){this.createManagedBean(new ManagedFocusFeature(this.eFocusableElement,{shouldStopEventPropagation:__name(()=>this.shouldStopEventPropagation(),"shouldStopEventPropagation"),onTabKeyDown:__name(e=>this.onTabKeyDown(e),"onTabKeyDown"),handleKeyDown:__name(e=>this.handleKeyDown(e),"handleKeyDown"),onFocusIn:__name(e=>this.onFocusIn(e),"onFocusIn"),onFocusOut:__name(e=>this.onFocusOut(e),"onFocusOut")})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(guard=>this.addManagedElementListeners(guard,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const tabIndex=this.gos.get("tabIndex");this.comp.setTabIndex(tabIndex.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const fromBottom=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(fromBottom):this.focusInnerElement(fromBottom)}findNextElementOutsideAndFocus(up){var _a253;const eDocument=_getDocument(this.gos),focusableEls=this.focusService.findFocusableElements(eDocument.body,null,!0),index=focusableEls.indexOf(up?this.eTopGuard:this.eBottomGuard);if(index===-1)return;let start,end;up?(start=0,end=index):(start=index+1,end=focusableEls.length);const focusableRange=focusableEls.slice(start,end),targetTabIndex=this.gos.get("tabIndex");focusableRange.sort((a,b)=>{const indexA=parseInt(a.getAttribute("tabindex")||"0"),indexB=parseInt(b.getAttribute("tabindex")||"0");return indexB===targetTabIndex?1:indexA===targetTabIndex?-1:indexA===0?1:indexB===0?-1:indexA-indexB}),(_a253=focusableRange[up?focusableRange.length-1:0])==null||_a253.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const tabGuardsAreActive=this.tabGuardsAreActive();tabGuardsAreActive&&this.deactivateTabGuards();const nextRoot=this.getNextFocusableElement(e.shiftKey);tabGuardsAreActive&&setTimeout(()=>this.activateTabGuards(),0),nextRoot&&(nextRoot.focus(),e.preventDefault())}focusInnerElement(fromBottom=!1){const focusable=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(focusable.splice(0,1),focusable.splice(focusable.length-1,1)),focusable.length&&focusable[fromBottom?focusable.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(backwards){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,backwards)}forceFocusOutOfContainer(up=!1){if(this.forcingFocusOut)return;const tabGuardToFocus=up?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,tabGuardToFocus.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(element,bottom){return element===this.eTopGuard&&!bottom||element===this.eBottomGuard&&(bottom??!0)}setAllowFocus(allowFocus){this.allowFocus=allowFocus}},__name(_a177,"TabGuardCtrl"),_a177),_a178,TabGuardFeature=(_a178=class extends BeanStub{constructor(comp){super(),this.comp=comp}initialiseTabGuard(params){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard,eBottomGuard,eFocusableElement}=this,tabGuards=[eTopGuard,eBottomGuard],compProxy={setTabIndex:__name(tabIndex=>{tabGuards.forEach(tabGuard=>tabIndex!=null?tabGuard.setAttribute("tabindex",tabIndex):tabGuard.removeAttribute("tabindex"))},"setTabIndex")};this.addTabGuards(eTopGuard,eBottomGuard);const{focusTrapActive=!1,onFocusIn,onFocusOut,focusInnerElement,handleKeyDown,onTabKeyDown,shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty,isFocusableContainer}=params;this.tabGuardCtrl=this.createManagedBean(new TabGuardCtrl({comp:compProxy,focusTrapActive,eTopGuard,eBottomGuard,eFocusableElement,onFocusIn,onFocusOut,focusInnerElement,handleKeyDown,onTabKeyDown,shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty,isFocusableContainer}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(side){const tabGuard=_getDocument(this.gos).createElement("div"),cls=side==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return tabGuard.classList.add("ag-tab-guard",cls),_setAriaRole(tabGuard,"presentation"),tabGuard}addTabGuards(topTabGuard,bottomTabGuard){this.eFocusableElement.insertAdjacentElement("afterbegin",topTabGuard),this.eFocusableElement.insertAdjacentElement("beforeend",bottomTabGuard)}removeAllChildrenExceptTabGuards(){const tabGuards=[this.eTopGuard,this.eBottomGuard];_clearElement(this.comp.getFocusableElement()),this.addTabGuards(...tabGuards)}forceFocusOutOfContainer(up=!1){this.tabGuardCtrl.forceFocusOutOfContainer(up)}appendChild(appendChild,newChild,container){_isNodeOrElement(newChild)||(newChild=newChild.getGui());const{eBottomGuard:bottomTabGuard}=this;bottomTabGuard?bottomTabGuard.insertAdjacentElement("beforebegin",newChild):appendChild(newChild,container)}},__name(_a178,"TabGuardFeature"),_a178),_a179,TabGuardComp=(_a179=class extends Component{initialiseTabGuard(params){this.tabGuardFeature=this.createManagedBean(new TabGuardFeature(this)),this.tabGuardFeature.initialiseTabGuard(params)}forceFocusOutOfContainer(up=!1){this.tabGuardFeature.forceFocusOutOfContainer(up)}appendChild(newChild,container){this.tabGuardFeature.appendChild(super.appendChild.bind(this),newChild,container)}},__name(_a179,"TabGuardComp"),_a179),instanceIdSeq=0,WAIT_FOR_POPUP_CONTENT_RESIZE=200,_a180,PopupService=(_a180=class extends BeanStub{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(beans){this.ctrlsService=beans.ctrlsService,this.resizeObserverService=beans.resizeObserverService,this.environment=beans.environment}postConstruct(){this.ctrlsService.whenReady(this,p=>{this.gridCtrl=p.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const ePopupParent=this.gos.get("popupParent");return ePopupParent||this.gridCtrl.getGui()}positionPopupForMenu(params){const{eventSource,ePopup}=params,popupIdx=this.getPopupIndex(ePopup);if(popupIdx!==-1){const popup=this.popupList[popupIdx];popup.alignedToElement=eventSource}const sourceRect=eventSource.getBoundingClientRect(),parentRect=this.getParentRect(),y=this.keepXYWithinBounds(ePopup,sourceRect.top-parentRect.top,0),minWidth=ePopup.clientWidth>0?ePopup.clientWidth:200;ePopup.style.minWidth=`${minWidth}px`;const maxX=parentRect.right-parentRect.left-minWidth;let x;this.gos.get("enableRtl")?(x=xLeftPosition(),x<0&&(x=xRightPosition(),this.setAlignedStyles(ePopup,"left")),x>maxX&&(x=0,this.setAlignedStyles(ePopup,"right"))):(x=xRightPosition(),x>maxX&&(x=xLeftPosition(),this.setAlignedStyles(ePopup,"right")),x<0&&(x=0,this.setAlignedStyles(ePopup,"left"))),ePopup.style.left=`${x}px`,ePopup.style.top=`${y}px`;function xRightPosition(){return sourceRect.right-parentRect.left-2}__name(xRightPosition,"xRightPosition");function xLeftPosition(){return sourceRect.left-parentRect.left-minWidth}__name(xLeftPosition,"xLeftPosition")}positionPopupUnderMouseEvent(params){const{ePopup,nudgeX,nudgeY,skipObserver}=params;this.positionPopup({ePopup,nudgeX,nudgeY,keepWithinBounds:!0,skipObserver,updatePosition:__name(()=>this.calculatePointerAlign(params.mouseEvent),"updatePosition"),postProcessCallback:__name(()=>this.callPostProcessPopup(params.type,params.ePopup,null,params.mouseEvent,params.column,params.rowNode),"postProcessCallback")})}calculatePointerAlign(e){const parentRect=this.getParentRect();return{x:e.clientX-parentRect.left,y:e.clientY-parentRect.top}}positionPopupByComponent(params){const{ePopup,nudgeX,nudgeY,keepWithinBounds,eventSource,alignSide="left",position="over",column,rowNode,type}=params,sourceRect=eventSource.getBoundingClientRect(),parentRect=this.getParentRect(),popupIdx=this.getPopupIndex(ePopup);if(popupIdx!==-1){const popup=this.popupList[popupIdx];popup.alignedToElement=eventSource}const updatePosition=__name(()=>{let x=sourceRect.left-parentRect.left;alignSide==="right"&&(x-=ePopup.offsetWidth-sourceRect.width);let y;return position==="over"?(y=sourceRect.top-parentRect.top,this.setAlignedStyles(ePopup,"over")):(this.setAlignedStyles(ePopup,"under"),this.shouldRenderUnderOrAbove(ePopup,sourceRect,parentRect,params.nudgeY||0)==="under"?y=sourceRect.top-parentRect.top+sourceRect.height:y=sourceRect.top-ePopup.offsetHeight-(nudgeY||0)*2-parentRect.top),{x,y}},"updatePosition");this.positionPopup({ePopup,nudgeX,nudgeY,keepWithinBounds,updatePosition,postProcessCallback:__name(()=>this.callPostProcessPopup(type,ePopup,eventSource,null,column,rowNode),"postProcessCallback")})}shouldRenderUnderOrAbove(ePopup,targetCompRect,parentRect,nudgeY){const spaceAvailableUnder=parentRect.bottom-targetCompRect.bottom,spaceAvailableAbove=targetCompRect.top-parentRect.top,spaceRequired=ePopup.offsetHeight+nudgeY;return spaceAvailableUnder>spaceRequired?"under":spaceAvailableAbove>spaceRequired||spaceAvailableAbove>spaceAvailableUnder?"above":"under"}setAlignedStyles(ePopup,positioned){const popupIdx=this.getPopupIndex(ePopup);if(popupIdx===-1)return;const popup=this.popupList[popupIdx],{alignedToElement}=popup;!alignedToElement||(["right","left","over","above","under"].forEach(position=>{alignedToElement.classList.remove(`ag-has-popup-positioned-${position}`),ePopup.classList.remove(`ag-popup-positioned-${position}`)}),!positioned)||(alignedToElement.classList.add(`ag-has-popup-positioned-${positioned}`),ePopup.classList.add(`ag-popup-positioned-${positioned}`))}callPostProcessPopup(type,ePopup,eventSource,mouseEvent,column,rowNode){const callback=this.gos.getCallback("postProcessPopup");callback&&callback({column,rowNode,ePopup,type,eventSource,mouseEvent})}positionPopup(params){const{ePopup,keepWithinBounds,nudgeX,nudgeY,skipObserver,updatePosition}=params,lastSize={width:0,height:0},updatePopupPosition=__name((fromResizeObserver=!1)=>{let{x,y}=updatePosition();fromResizeObserver&&ePopup.clientWidth===lastSize.width&&ePopup.clientHeight===lastSize.height||(lastSize.width=ePopup.clientWidth,lastSize.height=ePopup.clientHeight,nudgeX&&(x+=nudgeX),nudgeY&&(y+=nudgeY),keepWithinBounds&&(x=this.keepXYWithinBounds(ePopup,x,1),y=this.keepXYWithinBounds(ePopup,y,0)),ePopup.style.left=`${x}px`,ePopup.style.top=`${y}px`,params.postProcessCallback&&params.postProcessCallback())},"updatePopupPosition");if(updatePopupPosition(),!skipObserver){const resizeObserverDestroyFunc=this.resizeObserverService.observeResize(ePopup,()=>updatePopupPosition(!0));setTimeout(()=>resizeObserverDestroyFunc(),WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(popup=>popup.element)}getPopupList(){return this.popupList}getParentRect(){const eDocument=_getDocument(this.gos);let popupParent=this.getPopupParent();return popupParent===eDocument.body?popupParent=eDocument.documentElement:getComputedStyle(popupParent).position==="static"&&(popupParent=popupParent.offsetParent),_getElementRectWithOffset(popupParent)}keepXYWithinBounds(ePopup,position,direction){const isVertical=direction===0,sizeProperty=isVertical?"clientHeight":"clientWidth",anchorProperty=isVertical?"top":"left",offsetProperty=isVertical?"height":"width",scrollPositionProperty=isVertical?"scrollTop":"scrollLeft",eDocument=_getDocument(this.gos),docElement=eDocument.documentElement,popupParent=this.getPopupParent(),popupRect=ePopup.getBoundingClientRect(),parentRect=popupParent.getBoundingClientRect(),documentRect=eDocument.documentElement.getBoundingClientRect(),isBody=popupParent===eDocument.body,offsetSize=Math.ceil(popupRect[offsetProperty]);let sizeOfParent=isBody?(isVertical?_getAbsoluteHeight:_getAbsoluteWidth)(docElement)+docElement[scrollPositionProperty]:popupParent[sizeProperty];isBody&&(sizeOfParent-=Math.abs(documentRect[anchorProperty]-parentRect[anchorProperty]));const max=sizeOfParent-offsetSize;return Math.min(Math.max(position,0),Math.abs(max))}addPopup(params){const eDocument=_getDocument(this.gos),{eChild,ariaLabel,alwaysOnTop,positionCallback,anchorToElement}=params;if(!eDocument)return _warnOnce("could not find the document, document is empty"),{hideFunc:__name(()=>{},"hideFunc")};const pos=this.getPopupIndex(eChild);if(pos!==-1)return{hideFunc:this.popupList[pos].hideFunc};this.initialisePopupPosition(eChild);const wrapperEl=this.createPopupWrapper(eChild,ariaLabel,!!alwaysOnTop),removeListeners=this.addEventListenersToPopup({...params,wrapperEl});return positionCallback&&positionCallback(),this.addPopupToPopupList(eChild,wrapperEl,removeListeners,anchorToElement),{hideFunc:removeListeners}}initialisePopupPosition(element){const ePopupParentRect=this.getPopupParent().getBoundingClientRect();_exists(element.style.top)||(element.style.top=`${ePopupParentRect.top*-1}px`),_exists(element.style.left)||(element.style.left=`${ePopupParentRect.left*-1}px`)}createPopupWrapper(element,ariaLabel,alwaysOnTop){const ePopupParent=this.getPopupParent(),eWrapper=document.createElement("div");return this.environment.applyThemeClasses(eWrapper),eWrapper.classList.add("ag-popup"),element.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),element.hasAttribute("role")||_setAriaRole(element,"dialog"),_setAriaLabel(element,ariaLabel),eWrapper.appendChild(element),ePopupParent.appendChild(eWrapper),alwaysOnTop?this.setAlwaysOnTop(element,!0):this.bringPopupToFront(element),eWrapper}handleThemeChange(e){if(e.themeChanged)for(const popup of this.popupList)this.environment.applyThemeClasses(popup.wrapper)}addEventListenersToPopup(params){const eDocument=_getDocument(this.gos),ePopupParent=this.getPopupParent(),{wrapperEl,eChild:popupEl,closedCallback,afterGuiAttached,closeOnEsc,modal}=params;let popupHidden=!1;const hidePopupOnKeyboardEvent=__name(event=>{if(!wrapperEl.contains(_getActiveDomElement(this.gos)))return;event.key===KeyCode.ESCAPE&&!_isStopPropagationForAgGrid(event)&&removeListeners({keyboardEvent:event})},"hidePopupOnKeyboardEvent"),hidePopupOnMouseEvent=__name(event=>removeListeners({mouseEvent:event}),"hidePopupOnMouseEvent"),hidePopupOnTouchEvent=__name(event=>removeListeners({touchEvent:event}),"hidePopupOnTouchEvent"),removeListeners=__name((popupParams={})=>{const{mouseEvent,touchEvent,keyboardEvent,forceHide}=popupParams;!forceHide&&(this.isEventFromCurrentPopup({mouseEvent,touchEvent},popupEl)||popupHidden)||(popupHidden=!0,ePopupParent.removeChild(wrapperEl),eDocument.removeEventListener("keydown",hidePopupOnKeyboardEvent),eDocument.removeEventListener("mousedown",hidePopupOnMouseEvent),eDocument.removeEventListener("touchstart",hidePopupOnTouchEvent),eDocument.removeEventListener("contextmenu",hidePopupOnMouseEvent),this.eventService.removeEventListener("dragStarted",hidePopupOnMouseEvent),closedCallback&&closedCallback(mouseEvent||touchEvent||keyboardEvent),this.removePopupFromPopupList(popupEl))},"removeListeners");return afterGuiAttached&&afterGuiAttached({hidePopup:removeListeners}),window.setTimeout(()=>{closeOnEsc&&eDocument.addEventListener("keydown",hidePopupOnKeyboardEvent),modal&&(eDocument.addEventListener("mousedown",hidePopupOnMouseEvent),this.eventService.addEventListener("dragStarted",hidePopupOnMouseEvent),eDocument.addEventListener("touchstart",hidePopupOnTouchEvent),eDocument.addEventListener("contextmenu",hidePopupOnMouseEvent))},0),removeListeners}addPopupToPopupList(element,wrapperEl,removeListeners,anchorToElement){this.popupList.push({element,wrapper:wrapperEl,hideFunc:removeListeners,instanceId:instanceIdSeq++,isAnchored:!!anchorToElement}),anchorToElement&&this.setPopupPositionRelatedToElement(element,anchorToElement)}getPopupIndex(el){return this.popupList.findIndex(p=>p.element===el)}setPopupPositionRelatedToElement(popupEl,relativeElement){const popupIndex=this.getPopupIndex(popupEl);if(popupIndex===-1)return;const popup=this.popupList[popupIndex];if(popup.stopAnchoringPromise&&popup.stopAnchoringPromise.then(destroyFunc=>destroyFunc&&destroyFunc()),popup.stopAnchoringPromise=void 0,popup.isAnchored=!1,!relativeElement)return;const destroyPositionTracker=this.keepPopupPositionedRelativeTo({element:relativeElement,ePopup:popupEl,hidePopup:popup.hideFunc});return popup.stopAnchoringPromise=destroyPositionTracker,popup.isAnchored=!0,destroyPositionTracker}removePopupFromPopupList(element){this.setAlignedStyles(element,null),this.setPopupPositionRelatedToElement(element,null),this.popupList=this.popupList.filter(p=>p.element!==element)}keepPopupPositionedRelativeTo(params){const eParent=this.getPopupParent(),parentRect=eParent.getBoundingClientRect(),{element,ePopup}=params,sourceRect=element.getBoundingClientRect(),extractFromPixelValue=__name(pxSize=>parseInt(pxSize.substring(0,pxSize.length-1),10),"extractFromPixelValue"),createPosition=__name((prop,direction)=>{const initialDiff=parentRect[prop]-sourceRect[prop],initial=extractFromPixelValue(ePopup.style[prop]);return{initialDiff,lastDiff:initialDiff,initial,last:initial,direction}},"createPosition"),topPosition=createPosition("top",0),leftPosition=createPosition("left",1),fwOverrides=this.getFrameworkOverrides();return new AgPromise(resolve=>{fwOverrides.wrapIncoming(()=>{fwOverrides.setInterval(()=>{const pRect=eParent.getBoundingClientRect(),sRect=element.getBoundingClientRect();if(sRect.top==0&&sRect.left==0&&sRect.height==0&&sRect.width==0){params.hidePopup();return}const calculateNewPosition=__name((position,prop)=>{const current=extractFromPixelValue(ePopup.style[prop]);position.last!==current&&(position.initial=current,position.last=current);const currentDiff=pRect[prop]-sRect[prop];if(currentDiff!=position.lastDiff){const newValue=this.keepXYWithinBounds(ePopup,position.initial+position.initialDiff-currentDiff,position.direction);ePopup.style[prop]=`${newValue}px`,position.last=newValue}position.lastDiff=currentDiff},"calculateNewPosition");calculateNewPosition(topPosition,"top"),calculateNewPosition(leftPosition,"left")},200).then(intervalId=>{resolve(__name(()=>{intervalId!=null&&window.clearInterval(intervalId)},"result"))})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(popup=>popup.isAnchored)}isEventFromCurrentPopup(params,target){const{mouseEvent,touchEvent}=params,event=mouseEvent||touchEvent;if(!event)return!1;const indexOfThisChild=this.getPopupIndex(target);if(indexOfThisChild===-1)return!1;for(let i=indexOfThisChild;i<this.popupList.length;i++){const popup=this.popupList[i];if(_isElementInEventPath(popup.element,event))return!0}return this.isElementWithinCustomPopup(event.target)}isElementWithinCustomPopup(el){const eDocument=_getDocument(this.gos);for(;el&&el!==eDocument.body;){if(el.classList.contains("ag-custom-component-popup")||el.parentElement===null)return!0;el=el.parentElement}return!1}getWrapper(ePopup){for(;!ePopup.classList.contains("ag-popup")&&ePopup.parentElement;)ePopup=ePopup.parentElement;return ePopup.classList.contains("ag-popup")?ePopup:null}setAlwaysOnTop(ePopup,alwaysOnTop){const eWrapper=this.getWrapper(ePopup);eWrapper&&(eWrapper.classList.toggle("ag-always-on-top",!!alwaysOnTop),alwaysOnTop&&this.bringPopupToFront(eWrapper))}bringPopupToFront(ePopup){const parent=this.getPopupParent(),popupList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup")),popupLen=popupList.length,alwaysOnTopList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup.ag-always-on-top")),onTopLength=alwaysOnTopList.length,eWrapper=this.getWrapper(ePopup);if(!eWrapper||popupLen<=1||!parent.contains(ePopup))return!1;const pos=popupList.indexOf(eWrapper),innerEls=eWrapper.querySelectorAll("div"),innerElsScrollMap=[];innerEls.forEach(el=>{el.scrollTop!==0&&innerElsScrollMap.push([el,el.scrollTop])});let result=!1;for(onTopLength?eWrapper.classList.contains("ag-always-on-top")?pos!==popupLen-1&&(_last(alwaysOnTopList).insertAdjacentElement("afterend",eWrapper),result=!0):pos!==popupLen-onTopLength-1&&(alwaysOnTopList[0].insertAdjacentElement("beforebegin",eWrapper),result=!0):pos!==popupLen-1&&(_last(popupList).insertAdjacentElement("afterend",eWrapper),result=!0);innerElsScrollMap.length;){const currentEl=innerElsScrollMap.pop();currentEl[0].scrollTop=currentEl[1]}return result}},__name(_a180,"PopupService"),_a180),PASSIVE_EVENTS2=["touchstart","touchend","touchmove","touchcancel"],_a181,VanillaFrameworkOverrides=(_a181=class{constructor(frameworkName="javascript"){this.frameworkName=frameworkName,this.renderingEngine="vanilla",this.wrapIncoming=callback=>callback(),this.wrapOutgoing=callback=>callback()}setInterval(action,timeout){return new AgPromise(resolve=>{resolve(window.setInterval(action,timeout))})}addEventListener(element,type,listener,useCapture){const isPassive=_includes(PASSIVE_EVENTS2,type);element.addEventListener(type,listener,{capture:!!useCapture,passive:isPassive})}get shouldWrapOutgoing(){return!1}frameworkComponent(name){return null}isFrameworkComponent(comp){return!1}getDocLink(path){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${path?`/${path}`:""}`}},__name(_a181,"VanillaFrameworkOverrides"),_a181),_a182,CellNavigationService=(_a182=class extends BeanStub{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(beans){this.visibleColsService=beans.visibleColsService,this.rowModel=beans.rowModel,this.rowRenderer=beans.rowRenderer,this.pinnedRowModel=beans.pinnedRowModel,this.paginationService=beans.paginationService,this.pageBoundsService=beans.pageBoundsService}getNextCellToFocus(key,focusedCell,ctrlPressed=!1){return ctrlPressed?this.getNextCellToFocusWithCtrlPressed(key,focusedCell):this.getNextCellToFocusWithoutCtrlPressed(key,focusedCell)}getNextCellToFocusWithCtrlPressed(key,focusedCell){const upKey=key===KeyCode.UP,downKey=key===KeyCode.DOWN,leftKey=key===KeyCode.LEFT;let column,rowIndex;if(upKey||downKey)rowIndex=upKey?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),column=focusedCell.column;else{const allColumns=this.visibleColsService.getAllCols(),isRtl=this.gos.get("enableRtl");rowIndex=focusedCell.rowIndex,column=leftKey!==isRtl?allColumns[0]:_last(allColumns)}return{rowIndex,rowPinned:null,column}}getNextCellToFocusWithoutCtrlPressed(key,focusedCell){let pointer=focusedCell,finished=!1;for(;!finished;){switch(key){case KeyCode.UP:pointer=this.getCellAbove(pointer);break;case KeyCode.DOWN:pointer=this.getCellBelow(pointer);break;case KeyCode.RIGHT:this.gos.get("enableRtl")?pointer=this.getCellToLeft(pointer):pointer=this.getCellToRight(pointer);break;case KeyCode.LEFT:this.gos.get("enableRtl")?pointer=this.getCellToRight(pointer):pointer=this.getCellToLeft(pointer);break;default:pointer=null,_warnOnce("unknown key for navigation ",key);break}pointer?finished=this.isCellGoodToFocusOn(pointer):finished=!0}return pointer}isCellGoodToFocusOn(gridCell){const column=gridCell.column;let rowNode;switch(gridCell.rowPinned){case"top":rowNode=this.pinnedRowModel.getPinnedTopRow(gridCell.rowIndex);break;case"bottom":rowNode=this.pinnedRowModel.getPinnedBottomRow(gridCell.rowIndex);break;default:rowNode=this.rowModel.getRow(gridCell.rowIndex);break}return rowNode?!column.isSuppressNavigable(rowNode):!1}getCellToLeft(lastCell){if(!lastCell)return null;const colToLeft=this.visibleColsService.getColBefore(lastCell.column);return colToLeft?{rowIndex:lastCell.rowIndex,column:colToLeft,rowPinned:lastCell.rowPinned}:null}getCellToRight(lastCell){if(!lastCell)return null;const colToRight=this.visibleColsService.getColAfter(lastCell.column);return colToRight?{rowIndex:lastCell.rowIndex,column:colToRight,rowPinned:lastCell.rowPinned}:null}getRowBelow(rowPosition){const index=rowPosition.rowIndex,pinned=rowPosition.rowPinned;let ignoreSticky=!1;if(this.isLastRowInContainer(rowPosition))switch(pinned){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else pinned&&(ignoreSticky=!0);const rowNode=this.rowModel.getRow(rowPosition.rowIndex),nextStickyPosition=ignoreSticky?void 0:this.getNextStickyPosition(rowNode);return nextStickyPosition||{rowIndex:index+1,rowPinned:pinned}}getNextStickyPosition(rowNode,up){if(!_isGroupRowsSticky(this.gos)||!rowNode||!rowNode.sticky)return;const isTopCtrls=this.rowRenderer.getStickyTopRowCtrls().some(ctrl=>ctrl.getRowNode().rowIndex===rowNode.rowIndex);let stickyRowCtrls=[];isTopCtrls?stickyRowCtrls=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,b)=>a.getRowNode().rowIndex-b.getRowNode().rowIndex):stickyRowCtrls=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,b)=>b.getRowNode().rowIndex-a.getRowNode().rowIndex);const diff=up?-1:1,idx=stickyRowCtrls.findIndex(ctrl=>ctrl.getRowNode().rowIndex===rowNode.rowIndex),nextCtrl=stickyRowCtrls[idx+diff];if(nextCtrl)return{rowIndex:nextCtrl.getRowNode().rowIndex,rowPinned:null}}getCellBelow(lastCell){if(!lastCell)return null;const rowBelow=this.getRowBelow(lastCell);return rowBelow?{rowIndex:rowBelow.rowIndex,column:lastCell.column,rowPinned:rowBelow.rowPinned}:null}isLastRowInContainer(rowPosition){const pinned=rowPosition.rowPinned,index=rowPosition.rowIndex;return pinned==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=index:pinned==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=index:this.pageBoundsService.getLastRow()<=index}getRowAbove(rowPosition){const index=rowPosition.rowIndex,pinned=rowPosition.rowPinned,isFirstRow=pinned?index===0:index===this.pageBoundsService.getFirstRow();let ignoreSticky=!1;if(isFirstRow)return pinned==="top"?null:pinned?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;pinned&&(ignoreSticky=!0);const rowNode=this.rowModel.getRow(rowPosition.rowIndex),nextStickyPosition=ignoreSticky?void 0:this.getNextStickyPosition(rowNode,!0);return nextStickyPosition||{rowIndex:index-1,rowPinned:pinned}}getCellAbove(lastCell){if(!lastCell)return null;const rowAbove=this.getRowAbove({rowIndex:lastCell.rowIndex,rowPinned:lastCell.rowPinned});return rowAbove?{rowIndex:rowAbove.rowIndex,column:lastCell.column,rowPinned:rowAbove.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(gridCell,backwards){return backwards?this.getNextTabbedCellBackwards(gridCell):this.getNextTabbedCellForwards(gridCell)}getNextTabbedCellForwards(gridCell){var _a253;const displayedColumns=this.visibleColsService.getAllCols();let newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=this.visibleColsService.getColAfter(gridCell.column);if(!newColumn){newColumn=displayedColumns[0];const rowBelow=this.getRowBelow(gridCell);if(_missing(rowBelow)||!rowBelow.rowPinned&&!(((_a253=this.paginationService)==null?void 0:_a253.isRowInPage(rowBelow))??!0))return null;newRowIndex=rowBelow?rowBelow.rowIndex:null,newFloating=rowBelow?rowBelow.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}}getNextTabbedCellBackwards(gridCell){var _a253;const displayedColumns=this.visibleColsService.getAllCols();let newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=this.visibleColsService.getColBefore(gridCell.column);if(!newColumn){newColumn=_last(displayedColumns);const rowAbove=this.getRowAbove({rowIndex:gridCell.rowIndex,rowPinned:gridCell.rowPinned});if(_missing(rowAbove)||!rowAbove.rowPinned&&!(((_a253=this.paginationService)==null?void 0:_a253.isRowInPage(rowAbove))??!0))return null;newRowIndex=rowAbove?rowAbove.rowIndex:null,newFloating=rowAbove?rowAbove.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}}},__name(_a182,"CellNavigationService"),_a182),mod=__name((moduleName,input)=>{for(const key in input)input[key]=moduleName;return input},"mod"),gridApiFunctionsMap={...mod("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...mod("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...mod("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...mod("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...mod("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...mod("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...mod("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...mod("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...mod("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...mod("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...mod("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...mod("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...mod("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...mod("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...mod("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},defaultFns={isDestroyed:__name(()=>!0,"isDestroyed"),destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},dispatchEvent=__name((beans,event)=>beans.eventService.dispatchEvent(event),"dispatchEvent"),_a183,GridApiClass=(_a183=class{},__name(_a183,"GridApiClass"),_a183);Reflect.defineProperty(GridApiClass,"name",{value:"GridApi"});var _a184,ApiFunctionService=(_a184=class extends BeanStub{constructor(){super(),this.beanName="apiFunctionService",this.api=new GridApiClass,this.fns={...defaultFns,dispatchEvent},this.beans=null,this.preDestroyLink="";const{api}=this;for(const key in gridApiFunctionsMap)api[key]=this.makeApi(key)[key]}wireBeans(beans){this.beans=beans}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(functionName,func){var _a253;const{fns,beans}=this;fns!==defaultFns&&(fns[functionName]=((_a253=beans==null?void 0:beans.validationService)==null?void 0:_a253.validateApiFunction(functionName,func))??func)}makeApi(apiName){return{[apiName]:(...args)=>{const{beans,fns:{[apiName]:fn}}=this;return fn?fn(beans,...args):this.apiNotFound(apiName)}}}apiNotFound(fnName){const{beans,gos,preDestroyLink}=this;if(!beans)_warnOnce(`Grid API function ${fnName}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${preDestroyLink}`);else{const module=gridApiFunctionsMap[fnName];gos.assertModuleRegistered(module,`api.${fnName}`)&&_warnOnce(`API function '${fnName}' not registered to module '${module}'`)}}destroy(){super.destroy(),this.fns=defaultFns,this.beans=null}},__name(_a184,"ApiFunctionService"),_a184);function createGridApi(context){return{beanName:"gridApi",bean:context.getBean("apiFunctionService").api}}__name(createGridApi,"createGridApi");var _a185,ColumnDefFactory=(_a185=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(cols,rowGroupColumns,pivotColumns){const res=[],colGroupDefs={};return cols.forEach(col=>{const colDef=this.createDefFromColumn(col,rowGroupColumns,pivotColumns);let addToResult=!0,childDef=colDef,pointer=col.getOriginalParent(),lastPointer=null;for(;pointer;){let parentDef=null;if(pointer.isPadding()){pointer=pointer.getOriginalParent();continue}const existingParentDef=colGroupDefs[pointer.getGroupId()];if(existingParentDef){existingParentDef.children.push(childDef),addToResult=!1;break}if(parentDef=this.createDefFromGroup(pointer),parentDef&&(parentDef.children=[childDef],colGroupDefs[parentDef.groupId]=parentDef,childDef=parentDef,pointer=pointer.getOriginalParent()),pointer!=null&&lastPointer===pointer){addToResult=!1;break}lastPointer=pointer}addToResult&&res.push(childDef)}),res}createDefFromGroup(group){const defCloned=_deepCloneDefinition(group.getColGroupDef(),["children"]);return defCloned&&(defCloned.groupId=group.getGroupId()),defCloned}createDefFromColumn(col,rowGroupColumns,pivotColumns){const colDefCloned=_deepCloneDefinition(col.getColDef());return colDefCloned.colId=col.getColId(),colDefCloned.width=col.getActualWidth(),colDefCloned.rowGroup=col.isRowGroupActive(),colDefCloned.rowGroupIndex=col.isRowGroupActive()?rowGroupColumns.indexOf(col):null,colDefCloned.pivot=col.isPivotActive(),colDefCloned.pivotIndex=col.isPivotActive()?pivotColumns.indexOf(col):null,colDefCloned.aggFunc=col.isValueActive()?col.getAggFunc():null,colDefCloned.hide=col.isVisible()?void 0:!0,colDefCloned.pinned=col.isPinned()?col.getPinned():null,colDefCloned.sort=col.getSort()?col.getSort():null,colDefCloned.sortIndex=col.getSortIndex()!=null?col.getSortIndex():null,colDefCloned}},__name(_a185,"ColumnDefFactory"),_a185),_a186,ColumnEventDispatcher=(_a186=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(source){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(col){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:col,columns:[col],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(col){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:col,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(impactedGroups){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:impactedGroups.length===1?impactedGroups[0]:void 0,columnGroups:impactedGroups})}rowGroupChanged(impactedColumns,source){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:impactedColumns,column:impactedColumns.length===1?impactedColumns[0]:null,source})}genericColumnEvent(eventType,masterList,source){this.eventService.dispatchEvent({type:eventType,columns:masterList,column:masterList.length===1?masterList[0]:null,source})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(afterScroll){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll})}newColumnsLoaded(source){this.eventService.dispatchEvent({type:"newColumnsLoaded",source})}everythingChanged(source){this.eventService.dispatchEvent({type:"columnEverythingChanged",source})}columnMoved(params){const{movedColumns,source,toIndex,finished}=params;this.eventService.dispatchEvent({type:"columnMoved",columns:movedColumns,column:movedColumns&&movedColumns.length===1?movedColumns[0]:null,toIndex,finished,source})}columnPinned(changedColumns,source){if(!changedColumns.length)return;const column=changedColumns.length===1?changedColumns[0]:null,pinned=this.getCommonValue(changedColumns,col=>col.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:pinned??null,columns:changedColumns,column,source})}columnVisible(changedColumns,source){if(!changedColumns.length)return;const column=changedColumns.length===1?changedColumns[0]:null,visible=this.getCommonValue(changedColumns,col=>col.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible,columns:changedColumns,column,source})}getCommonValue(cols,valueGetter){if(!cols||cols.length==0)return;const firstValue=valueGetter(cols[0]);for(let i=1;i<cols.length;i++)if(firstValue!==valueGetter(cols[i]))return;return firstValue}columnChanged(type,columns,source){this.eventService.dispatchEvent({type,columns,column:columns&&columns.length==1?columns[0]:null,source})}columnResized(columns,finished,source,flexColumns=null){columns&&columns.length&&this.eventService.dispatchEvent({type:"columnResized",columns,column:columns.length===1?columns[0]:null,flexColumns,finished,source})}},__name(_a186,"ColumnEventDispatcher"),_a186),_a187,ColumnGetStateService=(_a187=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(beans){this.columnModel=beans.columnModel,this.funcColsService=beans.funcColsService}getColumnState(){const primaryCols=this.columnModel.getColDefCols();if(_missing(primaryCols)||!this.columnModel.isAlive())return[];const res=this.columnModel.getAllCols().map(col=>this.createStateItemFromColumn(col));return this.orderColumnStateList(res),res}createStateItemFromColumn(column){const rowGorupColumns=this.funcColsService.getRowGroupColumns(),pivotColumns=this.funcColsService.getPivotColumns(),rowGroupIndex=column.isRowGroupActive()?rowGorupColumns.indexOf(column):null,pivotIndex=column.isPivotActive()?pivotColumns.indexOf(column):null,aggFunc=column.isValueActive()?column.getAggFunc():null,sort=column.getSort()!=null?column.getSort():null,sortIndex=column.getSortIndex()!=null?column.getSortIndex():null,flex=column.getFlex()!=null&&column.getFlex()>0?column.getFlex():null;return{colId:column.getColId(),width:column.getActualWidth(),hide:!column.isVisible(),pinned:column.getPinned(),sort,sortIndex,aggFunc,rowGroup:column.isRowGroupActive(),rowGroupIndex,pivot:column.isPivotActive(),pivotIndex,flex}}orderColumnStateList(columnStateList){const gridColumns=this.columnModel.getCols(),colIdToGridIndexMap=new Map(gridColumns.map((col,index)=>[col.getColId(),index]));columnStateList.sort((itemA,itemB)=>{const posA=colIdToGridIndexMap.has(itemA.colId)?colIdToGridIndexMap.get(itemA.colId):-1,posB=colIdToGridIndexMap.has(itemB.colId)?colIdToGridIndexMap.get(itemB.colId):-1;return posA-posB})}},__name(_a187,"ColumnGetStateService"),_a187),_a188,ColumnGroupStateService=(_a188=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(beans){this.columnModel=beans.columnModel,this.columnAnimationService=beans.columnAnimationService,this.eventDispatcher=beans.columnEventDispatcher,this.visibleColsService=beans.visibleColsService}getColumnGroupState(){const columnGroupState=[],gridBalancedTree=this.columnModel.getColTree();return depthFirstOriginalTreeSearch(null,gridBalancedTree,node=>{isProvidedColumnGroup(node)&&columnGroupState.push({groupId:node.getGroupId(),open:node.isExpanded()})}),columnGroupState}resetColumnGroupState(source){const primaryColumnTree=this.columnModel.getColDefColTree();if(!primaryColumnTree)return;const stateItems=[];depthFirstOriginalTreeSearch(null,primaryColumnTree,child=>{if(isProvidedColumnGroup(child)){const colGroupDef=child.getColGroupDef(),groupState={groupId:child.getGroupId(),open:colGroupDef?colGroupDef.openByDefault:void 0};stateItems.push(groupState)}}),this.setColumnGroupState(stateItems,source)}setColumnGroupState(stateItems,source){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const impactedGroups=[];stateItems.forEach(stateItem=>{const groupKey=stateItem.groupId,newValue=stateItem.open,providedColumnGroup=this.columnModel.getProvidedColGroup(groupKey);providedColumnGroup&&providedColumnGroup.isExpanded()!==newValue&&(providedColumnGroup.setExpanded(newValue),impactedGroups.push(providedColumnGroup))}),this.visibleColsService.refresh(source,!0),impactedGroups.length&&this.eventDispatcher.groupOpened(impactedGroups),this.columnAnimationService.finish()}},__name(_a188,"ColumnGroupStateService"),_a188),_a189,ColumnViewportService=(_a189=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(beans){this.visibleColsService=beans.visibleColsService,this.columnModel=beans.columnModel,this.eventDispatcher=beans.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(scrollWidth,scrollPosition,afterScroll=!1){const bodyWidthDirty=this.visibleColsService.isBodyWidthDirty();if(!(scrollWidth===this.scrollWidth&&scrollPosition===this.scrollPosition&&!bodyWidthDirty)){if(this.scrollWidth=scrollWidth,this.scrollPosition=scrollPosition,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const bodyWidth=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=bodyWidth-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(afterScroll)}}getHeadersToRender(type,dept){let result;switch(type){case"left":result=this.rowsOfHeadersToRenderLeft[dept];break;case"right":result=this.rowsOfHeadersToRenderRight[dept];break;default:result=this.rowsOfHeadersToRenderCenter[dept];break}return result||[]}extractViewportColumns(){const displayedColumnsCenter=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=displayedColumnsCenter,this.headerColsWithinViewport=displayedColumnsCenter):(this.colsWithinViewport=displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(col){return col.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(col)?!0:this.isColumnInRowViewport(col)}isAnyParentAutoHeaderHeight(col){for(;col;){if(col.isAutoHeaderHeight())return!0;col=col.getParent()}return!1}isColumnInRowViewport(col){if(col.isAutoHeight())return!0;const columnLeft=col.getLeft()||0,columnRight=columnLeft+col.getActualWidth(),leftBounds=this.viewportLeft-200,rightBounds=this.viewportRight+200,columnToMuchLeft=columnLeft<leftBounds&&columnRight<leftBounds,columnToMuchRight=columnLeft>rightBounds&&columnRight>rightBounds;return!columnToMuchLeft&&!columnToMuchRight}getViewportColumns(){const leftCols=this.visibleColsService.getLeftCols(),rightCols=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(leftCols).concat(rightCols)}getColsWithinViewport(rowNode){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const emptySpaceBeforeColumn=__name(col=>{const left=col.getLeft();return _exists(left)&&left>this.viewportLeft},"emptySpaceBeforeColumn"),inViewportCallback=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),displayedColumnsCenter=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(rowNode,displayedColumnsCenter,inViewportCallback,emptySpaceBeforeColumn)}checkViewportColumns(afterScroll=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(afterScroll)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const renderedColIds={},renderedColsLeft=this.visibleColsService.getLeftCols(),renderedColsRight=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(renderedColsLeft).concat(renderedColsRight).forEach(col=>renderedColIds[col.getId()]=!0);const testGroup=__name((children,result,dept)=>{let returnValue=!1;for(let i=0;i<children.length;i++){const child=children[i];let addThisItem=!1;if(isColumn(child))addThisItem=renderedColIds[child.getId()]===!0;else{const displayedChildren=child.getDisplayedChildren();displayedChildren&&(addThisItem=testGroup(displayedChildren,result,dept+1))}addThisItem&&(returnValue=!0,result[dept]||(result[dept]=[]),result[dept].push(child))}return returnValue},"testGroup");testGroup(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),testGroup(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),testGroup(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const hashColumn=__name(c=>`${c.getId()}-${c.getPinned()||"normal"}`,"hashColumn");this.extractViewportColumns();const newHash=this.getViewportColumns().map(hashColumn).join("#"),changed=this.colsWithinViewportHash!==newHash;return changed&&(this.colsWithinViewportHash=newHash,this.calculateHeaderRows()),changed}},__name(_a189,"ColumnViewportService"),_a189),_a190,AgComponentUtils=(_a190=class extends BeanStub{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(beans){this.componentMetadataProvider=beans.componentMetadataProvider}adaptFunction(propertyName,jsCompFunc){const metadata=this.componentMetadataProvider.retrieve(propertyName);return metadata&&metadata.functionAdapter?metadata.functionAdapter(jsCompFunc):null}adaptCellRendererFunction(callback){const _Adapter=class _Adapter{refresh(){return!1}getGui(){return this.eGui}init(params){const callbackResult=callback(params),type=typeof callbackResult;if(type==="string"||type==="number"||type==="boolean"){this.eGui=_loadTemplate("<span>"+callbackResult+"</span>");return}if(callbackResult==null){this.eGui=_loadTemplate("<span></span>");return}this.eGui=callbackResult}};__name(_Adapter,"Adapter");let Adapter=_Adapter;return Adapter}doesImplementIComponent(candidate){return candidate?candidate.prototype&&"getGui"in candidate.prototype:!1}},__name(_a190,"AgComponentUtils"),_a190),_a191,ComponentMetadataProvider=(_a191=class extends BeanStub{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(beans){this.agComponentUtils=beans.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(name){return this.componentMetaData[name]}},__name(_a191,"ComponentMetadataProvider"),_a191),orderedCoreBeans=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],beanNamePosition=Object.fromEntries(orderedCoreBeans.map((beanName,index)=>[beanName,index]));function gridBeanInitComparator(bean1,bean2){const index1=(bean1.beanName?beanNamePosition[bean1.beanName]:void 0)??Number.MAX_SAFE_INTEGER,index2=(bean2.beanName?beanNamePosition[bean2.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return index1-index2}__name(gridBeanInitComparator,"gridBeanInitComparator");function gridBeanDestroyComparator(bean1,bean2){return(bean1==null?void 0:bean1.beanName)==="gridDestroyService"?-1:0}__name(gridBeanDestroyComparator,"gridBeanDestroyComparator");var _a192,CtrlsFactory=(_a192=class extends BeanStub{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(meta){this.registry[meta.name]=meta.classImp}getInstance(name,...args){const ControllerClass=this.registry[name];if(ControllerClass!=null)return new ControllerClass(...args)}},__name(_a192,"CtrlsFactory"),_a192),_a193,CtrlsService=(_a193=class extends BeanStub{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(beans){var _a253,_b;this.runReadyCallbacksAsync=((_b=(_a253=beans.frameworkOverrides).runWhenReadyAsync)==null?void 0:_b.call(_a253))??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(c=>c(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(ctrl=>(ctrl==null?void 0:ctrl.isAlive())??!1)}whenReady(caller,callback){this.ready?callback(this.params):this.readyCallbacks.push(callback),caller.addDestroyFunc(()=>{const index=this.readyCallbacks.indexOf(callback);index>=0&&this.readyCallbacks.splice(index,1)})}register(ctrlType,ctrl){this.params[ctrlType]=ctrl,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),ctrl.addDestroyFunc(()=>{this.updateReady()})}get(ctrlType){return this.params[ctrlType]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader,centerHeader,rightHeader}=this.params;return[leftHeader,rightHeader,centerHeader]}getHeaderRowContainerCtrl(pinned){const params=this.params;switch(pinned){case"left":return params.leftHeader;case"right":return params.rightHeader;default:return params.centerHeader}}},__name(_a193,"CtrlsService"),_a193),_a194,CellPositionUtils=(_a194=class extends BeanStub{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(cellPosition){const{rowIndex,rowPinned,column}=cellPosition;return this.createIdFromValues({rowIndex,column,rowPinned})}createIdFromValues(cellPosition){const{rowIndex,rowPinned,column}=cellPosition;return`${rowIndex}.${rowPinned??"null"}.${column.getId()}`}equals(cellA,cellB){const colsMatch=cellA.column===cellB.column,floatingMatch=cellA.rowPinned===cellB.rowPinned,indexMatch=cellA.rowIndex===cellB.rowIndex;return colsMatch&&floatingMatch&&indexMatch}},__name(_a194,"CellPositionUtils"),_a194),_a195,RowNodeEventThrottle=(_a195=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(beans){this.animationFrameService=beans.animationFrameService,this.rowModel=beans.rowModel}postConstruct(){_isClientSideRowModel(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(event,forceSync){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(event);return}this.events.push(event);const func=__name(()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(e=>this.eventService.dispatchEvent(e)),this.events=[]},"func");forceSync?func():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(func)),this.dispatchExpandedDebounced())}},__name(_a195,"RowNodeEventThrottle"),_a195),_a196,RowPositionUtils=(_a196=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(beans){this.rowModel=beans.rowModel,this.pinnedRowModel=beans.pinnedRowModel,this.pageBoundsService=beans.pageBoundsService}getFirstRow(){let rowIndex=0,rowPinned;return this.pinnedRowModel.getPinnedTopRowCount()?rowPinned="top":this.rowModel.getRowCount()?(rowPinned=null,rowIndex=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(rowPinned="bottom"),rowPinned===void 0?null:{rowIndex,rowPinned}}getLastRow(){let rowIndex,rowPinned=null;const pinnedBottomCount=this.pinnedRowModel.getPinnedBottomRowCount(),pinnedTopCount=this.pinnedRowModel.getPinnedTopRowCount();return pinnedBottomCount?(rowPinned="bottom",rowIndex=pinnedBottomCount-1):this.rowModel.getRowCount()?(rowPinned=null,rowIndex=this.pageBoundsService.getLastRow()):pinnedTopCount&&(rowPinned="top",rowIndex=pinnedTopCount-1),rowIndex===void 0?null:{rowIndex,rowPinned}}getRowNode(gridRow){switch(gridRow.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(gridRow.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(gridRow.rowIndex);default:return this.rowModel.getRow(gridRow.rowIndex)}}sameRow(rowA,rowB){return!rowA&&!rowB?!0:rowA&&!rowB||!rowA&&rowB?!1:rowA.rowIndex===rowB.rowIndex&&rowA.rowPinned==rowB.rowPinned}before(rowA,rowB){switch(rowA.rowPinned){case"top":if(rowB.rowPinned!=="top")return!0;break;case"bottom":if(rowB.rowPinned!=="bottom")return!1;break;default:if(_exists(rowB.rowPinned))return rowB.rowPinned!=="top";break}return rowA.rowIndex<rowB.rowIndex}},__name(_a196,"RowPositionUtils"),_a196),ROW_HEIGHT={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},HEADER_HEIGHT={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},LIST_ITEM_HEIGHT={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},_a197,Environment=(_a197=class extends BeanStub{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(beans){this.resizeObserverService=beans.resizeObserverService,this.eGridDiv=beans.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(ROW_HEIGHT),this.getSizeEl(HEADER_HEIGHT),this.getSizeEl(LIST_ITEM_HEIGHT)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(ROW_HEIGHT)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(HEADER_HEIGHT)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(LIST_ITEM_HEIGHT)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){var _a253;return((_a253=this.gridTheme)==null?void 0:_a253.getCssClass())||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(el){const themeClasses=this.getThemeClasses();for(const className of Array.from(el.classList))className.startsWith("ag-theme-")&&!themeClasses.includes(className)&&el.classList.remove(className);el.classList.add(...themeClasses)}refreshRowHeightVariable(){const oldRowHeight=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),height=this.gos.get("rowHeight");if(height==null||isNaN(height)||!isFinite(height))return oldRowHeight!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const newRowHeight=`${height}px`;return oldRowHeight!=newRowHeight?(this.eGridDiv.style.setProperty("--ag-line-height",newRowHeight),height):oldRowHeight!=""?parseFloat(oldRowHeight):-1}getCSSVariablePixelValue(variable){const cached=this.lastKnownValues.get(variable);if(cached!=null)return cached;const measurement=this.measureSizeEl(variable);return measurement==="detached"||measurement==="no-styles"?variable.defaultValue:(this.lastKnownValues.set(variable,measurement),measurement)}measureSizeEl(variable){const sizeEl=this.getSizeEl(variable);if(sizeEl.offsetParent==null)return"detached";const newSize=sizeEl.offsetWidth;return newSize===NO_VALUE_SENTINEL?"no-styles":(this.sizesMeasured=!0,newSize)}getSizeEl(variable){let sizeEl=this.sizeEls.get(variable);if(sizeEl)return sizeEl;let container=this.eMeasurementContainer;container||(container=this.eMeasurementContainer=document.createElement("div"),container.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(container),this.eGridDiv.appendChild(container)),sizeEl=document.createElement("div"),sizeEl.style.width=`var(${variable.cssName}, ${NO_VALUE_SENTINEL}px)`,container.appendChild(sizeEl),this.sizeEls.set(variable,sizeEl);let lastMeasurement=this.measureSizeEl(variable);lastMeasurement==="no-styles"&&_warnOnce(`no value for ${variable.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${variable.defaultValue} will be used and updated when styles load.`);const unsubscribe=this.resizeObserverService.observeResize(sizeEl,()=>{const newMeasurement=this.measureSizeEl(variable);newMeasurement==="detached"||newMeasurement==="no-styles"||(this.lastKnownValues.set(variable,newMeasurement),newMeasurement!==lastMeasurement&&(lastMeasurement=newMeasurement,this.fireGridStylesChangedEvent(variable.changeKey)))});return this.addDestroyFunc(()=>unsubscribe()),sizeEl}fireGridStylesChangedEvent(change){this.eventService.dispatchEvent({type:"gridStylesChanged",[change]:!0})}setUpThemeClassObservers(){const observer=new MutationObserver(()=>{const newThemeClasses=this.readAncestorThemeClasses();arraysEqual(newThemeClasses,this.ancestorThemeClasses)||(this.ancestorThemeClasses=newThemeClasses,this.fireGridStylesChangedEvent("themeChanged"))});let node=this.eGridDiv;for(;node;)observer.observe(node||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),node=node.parentElement;this.addDestroyFunc(()=>observer.disconnect())}readAncestorThemeClasses(){let el=this.eGridDiv;const allThemeClasses=[];for(;el;){const themeClasses=Array.from(el.classList).filter(c=>c.startsWith("ag-theme-"));for(const themeClass of themeClasses)allThemeClasses.includes(themeClass)||allThemeClasses.unshift(themeClass);el=el.parentElement}return Object.freeze(allThemeClasses)}handleThemeGridOptionChange(){const{gos,eMeasurementContainer,gridTheme:oldGridTheme}=this,newGridTheme=gos.get("theme")||null;newGridTheme!==oldGridTheme&&(oldGridTheme==null||oldGridTheme.stopUse(),this.gridTheme=newGridTheme,newGridTheme==null||newGridTheme.startUse({loadThemeGoogleFonts:gos.get("loadThemeGoogleFonts"),container:this.eGridDiv}),eMeasurementContainer&&this.applyThemeClasses(eMeasurementContainer),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){var _a253;(_a253=this.gridTheme)==null||_a253.stopUse(),this.gridTheme=null}},__name(_a197,"Environment"),_a197),arraysEqual=__name((a,b)=>a.length===b.length&&a.findIndex((_,i)=>a[i]!==b[i])===-1,"arraysEqual"),NO_VALUE_SENTINEL=15538,_a198,EventService=(_a198=class extends BeanStub{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new LocalEventService}wireBeans(beans){this.globalEventListener=beans.globalEventListener,this.globalSyncEventListener=beans.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const async=_useAsyncEvents(this.gos);this.addGlobalListener(this.globalEventListener,async)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(eventType,listener,async){this.globalEventService.addEventListener(eventType,listener,async)}removeEventListener(eventType,listener,async){this.globalEventService.removeEventListener(eventType,listener,async)}addGlobalListener(listener,async=!1){this.globalEventService.addGlobalListener(listener,async)}removeGlobalListener(listener,async=!1){this.globalEventService.removeGlobalListener(listener,async)}dispatchLocalEvent(){}dispatchEvent(event){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(event))}dispatchEventOnce(event){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(event))}},__name(_a198,"EventService"),_a198),_a199,_FocusService=(_a199=class extends BeanStub{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(beans){this.eGridDiv=beans.eGridDiv,this.columnModel=beans.columnModel,this.visibleColsService=beans.visibleColsService,this.headerNavigationService=beans.headerNavigationService,this.headerPositionUtils=beans.headerPositionUtils,this.rowRenderer=beans.rowRenderer,this.rowPositionUtils=beans.rowPositionUtils,this.cellPositionUtils=beans.cellPositionUtils,this.navigationService=beans.navigationService,this.ctrlsService=beans.ctrlsService,this.filterManager=beans.filterManager,this.rangeService=beans.rangeService,this.advancedFilterService=beans.advancedFilterService,this.overlayService=beans.overlayService}static addKeyboardModeEvents(doc){this.instanceCount>0||(doc.addEventListener("keydown",_a199.toggleKeyboardMode),doc.addEventListener("mousedown",_a199.toggleKeyboardMode))}static removeKeyboardModeEvents(doc){this.instanceCount>0||(doc.removeEventListener("keydown",_a199.toggleKeyboardMode),doc.removeEventListener("mousedown",_a199.toggleKeyboardMode))}static toggleKeyboardMode(event){const isKeyboardActive=_a199.keyboardModeActive,isKeyboardEvent=event.type==="keydown";isKeyboardEvent&&(event.ctrlKey||event.metaKey||event.altKey)||isKeyboardActive!==isKeyboardEvent&&(_a199.keyboardModeActive=isKeyboardEvent)}postConstruct(){const clearFocusedCellListener=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:clearFocusedCellListener,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:clearFocusedCellListener,columnRowGroupChanged:clearFocusedCellListener}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,p=>{this.gridCtrl=p.gridCtrl})}registerKeyboardFocusEvents(){const eDocument=_getDocument(this.gos);_a199.addKeyboardModeEvents(eDocument),_a199.instanceCount++,this.addDestroyFunc(()=>{_a199.instanceCount--,_a199.removeKeyboardModeEvents(eDocument)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const col=this.focusedCellPosition.column,colFromColumnModel=this.columnModel.getCol(col.getId());col!==colFromColumnModel&&this.clearFocusedCell()}isKeyboardMode(){return _a199.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(_getActiveDomElement(this.gos),RowCtrl.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(_getActiveDomElement(this.gos),AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(eBrowserCell,key){let ePointer=eBrowserCell;for(;ePointer;){if(_getDomData(this.gos,ePointer,key))return!1;ePointer=ePointer.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(cell){return this.isCellRestoreFocused(cell)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(cellPosition,setFocusCallback){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(cellPosition),setFocusCallback())})}isCellRestoreFocused(cellPosition){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(cellPosition,this.restoredFocusedCellPosition)}setRestoreFocusedCell(cellPosition){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=cellPosition)}getFocusEventParams(focusedCellPosition){const{rowIndex,rowPinned,column}=focusedCellPosition,params={rowIndex,rowPinned,column,isFullWidthCell:!1},rowCtrl=this.rowRenderer.getRowByPosition({rowIndex,rowPinned});return rowCtrl&&(params.isFullWidthCell=rowCtrl.isFullWidth()),params}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const focusEventParams=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...focusEventParams})}setFocusedCell(params){const{column,rowIndex,rowPinned,forceBrowserFocus=!1,preventScrollOnBrowserFocus=!1}=params,gridColumn=this.columnModel.getCol(column);if(!gridColumn){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex,rowPinned:_makeNull(rowPinned),column:gridColumn},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus,preventScrollOnBrowserFocus})}isCellFocused(cellPosition){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(cellPosition,this.focusedCellPosition)}isRowNodeFocused(rowNode){return this.isRowFocused(rowNode.rowIndex,rowNode.rowPinned)}isHeaderWrapperFocused(headerCtrl){if(this.focusedHeaderPosition==null)return!1;const column=headerCtrl.getColumnGroupChild(),headerRowIndex=headerCtrl.getRowIndex(),pinned=headerCtrl.getPinned(),{column:focusedColumn,headerRowIndex:focusedHeaderRowIndex}=this.focusedHeaderPosition;return column===focusedColumn&&headerRowIndex===focusedHeaderRowIndex&&pinned==focusedColumn.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(headerRowIndex,column){this.focusedHeaderPosition={headerRowIndex,column}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(params){var _a253;if(this.isHeaderFocusSuppressed())return!1;const{direction,fromTab,allowUserOverride,event,fromCell,rowWithoutSpanValue}=params;let{headerPosition}=params;if(fromCell&&((_a253=this.filterManager)!=null&&_a253.isAdvancedFilterHeaderActive()))return this.focusAdvancedFilter(headerPosition);if(allowUserOverride){const currentPosition=this.getFocusedHeader(),headerRowCount=this.headerNavigationService.getHeaderRowCount();if(fromTab){const userFunc=this.gos.getCallback("tabToNextHeader");userFunc&&(headerPosition=this.getHeaderPositionFromUserFunc({userFunc,direction,currentPosition,headerPosition,headerRowCount}))}else{const userFunc=this.gos.getCallback("navigateToNextHeader");if(userFunc&&event){const params2={key:event.key,previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount,event};headerPosition=userFunc(params2)}}}return headerPosition?this.focusProvidedHeaderPosition({headerPosition,direction,event,fromCell,rowWithoutSpanValue}):!1}focusHeaderPositionFromUserFunc(params){if(this.isHeaderFocusSuppressed())return!1;const{userFunc,headerPosition,direction,event}=params,currentPosition=this.getFocusedHeader(),headerRowCount=this.headerNavigationService.getHeaderRowCount(),newHeaderPosition=this.getHeaderPositionFromUserFunc({userFunc,direction,currentPosition,headerPosition,headerRowCount});return!!newHeaderPosition&&this.focusProvidedHeaderPosition({headerPosition:newHeaderPosition,direction,event})}getHeaderPositionFromUserFunc(params){const{userFunc,direction,currentPosition,headerPosition,headerRowCount}=params,userResult=userFunc({backwards:direction==="Before",previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount});return userResult===!0||userResult===null?(userResult===null&&_warnOnce("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),currentPosition):userResult===!1?null:userResult}focusProvidedHeaderPosition(params){var _a253;const{headerPosition,direction,fromCell,rowWithoutSpanValue,event}=params,{column,headerRowIndex}=headerPosition;if(headerRowIndex===-1)return(_a253=this.filterManager)!=null&&_a253.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(headerPosition):this.focusGridView(column);this.headerNavigationService.scrollToColumn(column,direction);const headerRowContainerCtrl=this.ctrlsService.getHeaderRowContainerCtrl(column.getPinned()),focusSuccess=(headerRowContainerCtrl==null?void 0:headerRowContainerCtrl.focusHeader(headerPosition.headerRowIndex,column,event))||!1;return focusSuccess&&(rowWithoutSpanValue!=null||fromCell)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(rowWithoutSpanValue??-1),focusSuccess}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let firstColumn=this.visibleColsService.getAllCols()[0];if(!firstColumn)return!1;firstColumn.getParent()&&(firstColumn=this.visibleColsService.getColGroupAtLevel(firstColumn,0));const headerPosition=this.headerPositionUtils.getHeaderIndexToFocus(firstColumn,0);return this.focusHeaderPosition({headerPosition,rowWithoutSpanValue:0})}focusLastHeader(event){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const headerRowIndex=this.headerNavigationService.getHeaderRowCount()-1,column=_last(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex,column},rowWithoutSpanValue:-1,event})}focusPreviousFromFirstCell(event){var _a253;return(_a253=this.filterManager)!=null&&_a253.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(event)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(rowIndex,rowPinnedType){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===rowIndex&&this.focusedCellPosition.rowPinned===_makeNull(rowPinnedType)}findFocusableElements(rootNode,exclude,onlyUnmanaged=!1){const focusableString=FOCUSABLE_SELECTOR;let excludeString=FOCUSABLE_EXCLUDE;exclude&&(excludeString+=", "+exclude),onlyUnmanaged&&(excludeString+=', [tabindex="-1"]');const nodes=Array.prototype.slice.apply(rootNode.querySelectorAll(focusableString)).filter(node=>_isVisible(node)),excludeNodes=Array.prototype.slice.apply(rootNode.querySelectorAll(excludeString));return excludeNodes.length?__name((a,b)=>a.filter(element=>b.indexOf(element)===-1),"diff")(nodes,excludeNodes):nodes}focusInto(rootNode,up=!1,onlyUnmanaged=!1){const focusableElements=this.findFocusableElements(rootNode,null,onlyUnmanaged),toFocus=up?_last(focusableElements):focusableElements[0];return toFocus?(toFocus.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(rootNode,referenceElement){if(!referenceElement)return null;const focusableElements=this.findFocusableElements(rootNode),referenceIndex=focusableElements.indexOf(referenceElement);if(referenceIndex===-1)return null;let lastTabGuardIndex=-1;for(let i=referenceIndex-1;i>=0;i--)if(focusableElements[i].classList.contains("ag-tab-guard-top")){lastTabGuardIndex=i;break}return lastTabGuardIndex<=0?null:focusableElements[lastTabGuardIndex-1]}findNextFocusableElement(rootNode=this.eGridDiv,onlyManaged,backwards){const focusable=this.findFocusableElements(rootNode,onlyManaged?':not([tabindex="-1"])':null),activeEl=_getActiveDomElement(this.gos);let currentIndex;onlyManaged?currentIndex=focusable.findIndex(el=>el.contains(activeEl)):currentIndex=focusable.indexOf(activeEl);const nextIndex=currentIndex+(backwards?-1:1);return nextIndex<0||nextIndex>=focusable.length?null:focusable[nextIndex]}isTargetUnderManagedComponent(rootNode,target){if(!target)return!1;const managedContainers=rootNode.querySelectorAll(`.${ManagedFocusFeature.FOCUS_MANAGED_CLASS}`);if(!managedContainers.length)return!1;for(let i=0;i<managedContainers.length;i++)if(managedContainers[i].contains(target))return!0;return!1}findTabbableParent(node,limit=5){let counter=0;for(;node&&_getTabIndex(node)===null&&++counter<=limit;)node=node.parentElement;return _getTabIndex(node)===null?null:node}focusOverlay(backwards){var _a253;const overlayGui=this.overlayService.isVisible()&&((_a253=this.overlayService.getOverlayWrapper())==null?void 0:_a253.getGui());return!!overlayGui&&this.focusInto(overlayGui,backwards)}focusGridViewFailed(backwards,canFocusOverlay){return canFocusOverlay&&this.focusOverlay(backwards)||backwards&&this.focusLastHeader()}focusGridView(column,backwards=!1,canFocusOverlay=!0){var _a253,_b;if(this.overlayService.isExclusive())return canFocusOverlay&&this.focusOverlay(backwards);if(this.isCellFocusSuppressed())return backwards&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():canFocusOverlay&&this.focusOverlay(backwards)?!0:this.focusNextGridCoreContainer(!1);const nextRow=backwards?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(nextRow){const{rowIndex,rowPinned}=nextRow;if(column??(column=(_a253=this.getFocusedHeader())==null?void 0:_a253.column),column&&rowIndex!==void 0&&rowIndex!==null){if(this.navigationService.ensureCellVisible({rowIndex,column,rowPinned}),backwards){const rowCtrl=this.rowRenderer.getRowByPosition(nextRow);if(rowCtrl!=null&&rowCtrl.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(nextRow,backwards))return!0}return this.setFocusedCell({rowIndex,column,rowPinned:_makeNull(rowPinned),forceBrowserFocus:!0}),(_b=this.rangeService)==null||_b.setRangeToCell({rowIndex,rowPinned,column}),!0}}return!!(canFocusOverlay&&this.focusOverlay(backwards)||backwards&&this.focusLastHeader())}isGridFocused(){const activeEl=_getActiveDomElement(this.gos);return!!activeEl&&this.eGridDiv.contains(activeEl)}focusNextGridCoreContainer(backwards,forceOut=!1){return!forceOut&&this.gridCtrl.focusNextInnerContainer(backwards)?!0:((forceOut||!backwards&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(backwards),!1)}focusAdvancedFilter(position){var _a253;return this.advancedFilterFocusColumn=position==null?void 0:position.column,((_a253=this.advancedFilterService)==null?void 0:_a253.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(backwards,forceFirstColumn){var _a253;const column=(forceFirstColumn?void 0:this.advancedFilterFocusColumn)??((_a253=this.visibleColsService.getAllCols())==null?void 0:_a253[0]);return backwards?this.focusHeaderPosition({headerPosition:{column,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(column)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(container){this.gridCtrl.addFocusableContainer(container)}removeFocusableContainer(container){this.gridCtrl.removeFocusableContainer(container)}focusGridInnerElement(fromBottom){return this.gridCtrl.focusInnerElement(fromBottom)}allowFocusForNextGridCoreContainer(up){this.gridCtrl.allowFocusForNextCoreContainer(up)}},__name(_a199,"_FocusService"),_a199);_FocusService.keyboardModeActive=!1;_FocusService.instanceCount=0;var FocusService=_FocusService,_a200,PinnedWidthService=(_a200=class extends BeanStub{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(beans){this.visibleColsService=beans.visibleColsService}postConstruct(){const listener=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:listener,displayedColumnsWidthChanged:listener}),this.addManagedPropertyListener("domLayout",listener)}checkContainerWidths(){const printLayout=_isDomLayout(this.gos,"print"),newLeftWidth=printLayout?0:this.visibleColsService.getColsLeftWidth(),newRightWidth=printLayout?0:this.visibleColsService.getDisplayedColumnsRightWidth();newLeftWidth!=this.leftWidth&&(this.leftWidth=newLeftWidth,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),newRightWidth!=this.rightWidth&&(this.rightWidth=newRightWidth,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},__name(_a200,"PinnedWidthService"),_a200),_a201,GridCtrl=(_a201=class extends BeanStub{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(beans){this.beans=beans,this.focusService=beans.focusService,this.visibleColsService=beans.visibleColsService}setComp(view,eGridDiv,eGui){this.view=view,this.eGridHostDiv=eGridDiv,this.eGui=eGui,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService,mouseEventService,ctrlsService,resizeObserverService}=this.beans,dropTarget={getContainer:__name(()=>this.eGui,"getContainer"),isInterestedIn:__name(type=>type===1||type===0,"isInterestedIn"),getIconName:__name(()=>"notAllowed","getIconName")};dragAndDropService.addDropTarget(dropTarget),this.addDestroyFunc(()=>dragAndDropService.removeDropTarget(dropTarget)),mouseEventService.stampTopLevelGridCompWithGridInstance(eGridDiv),this.createManagedBean(new LayoutFeature(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const unsubscribeFromResize=resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>unsubscribeFromResize()),ctrlsService.register("gridCtrl",this)}isDetailGrid(){var _a253;const el=this.focusService.findTabbableParent(this.getGui());return((_a253=el==null?void 0:el.getAttribute("row-id"))==null?void 0:_a253.startsWith("detail"))||!1}getOptionalSelectors(){var _a253,_b,_c,_d,_e;const beans=this.beans;return{paginationSelector:(_a253=beans.paginationService)==null?void 0:_a253.getPaginationSelector(),gridHeaderDropZonesSelector:(_b=beans.columnDropZonesService)==null?void 0:_b.getDropZoneSelector(),sideBarSelector:(_c=beans.sideBarService)==null?void 0:_c.getSideBarSelector(),statusBarSelector:(_d=beans.statusBarService)==null?void 0:_d.getStatusPanelSelector(),watermarkSelector:(_e=beans.licenseManager)==null?void 0:_e.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(on){this.view.setCursor(on?"ew-resize":null)}disableUserSelect(on){this.view.setUserSelect(on?"none":null)}focusNextInnerContainer(backwards){const focusableContainers=this.getFocusableContainers(),{indexWithFocus,nextIndex}=this.getNextFocusableIndex(focusableContainers,backwards);if(nextIndex<0||nextIndex>=focusableContainers.length)return!1;if(nextIndex===0){if(indexWithFocus>0){const allColumns=this.visibleColsService.getAllCols(),lastColumn=_last(allColumns);if(this.focusService.focusGridView(lastColumn,!0))return!0}return!1}return this.focusContainer(focusableContainers[nextIndex],backwards)}focusInnerElement(fromBottom){const userCallbackFunction=this.gos.getCallback("focusGridInnerElement");if(userCallbackFunction&&userCallbackFunction({fromBottom:!!fromBottom}))return!0;const focusableContainers=this.getFocusableContainers(),allColumns=this.visibleColsService.getAllCols();if(fromBottom){if(focusableContainers.length>1)return this.focusContainer(_last(focusableContainers),!0);const lastColumn=_last(allColumns);if(this.focusService.focusGridView(lastColumn,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(allColumns[0]))return!0;for(let i=1;i<focusableContainers.length;i++)if(this.focusService.focusInto(focusableContainers[i].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(up=!1){this.view.forceFocusOutOfContainer(up)}addFocusableContainer(container){this.additionalFocusableContainers.add(container)}removeFocusableContainer(container){this.additionalFocusableContainers.delete(container)}allowFocusForNextCoreContainer(up){var _a253;const coreContainers=this.view.getFocusableContainers(),{nextIndex,indexWithFocus}=this.getNextFocusableIndex(coreContainers,up);if(indexWithFocus===-1||nextIndex<0||nextIndex>=coreContainers.length)return;const comp=coreContainers[nextIndex];(_a253=comp.setAllowFocus)==null||_a253.call(comp,!0),setTimeout(()=>{var _a254;(_a254=comp.setAllowFocus)==null||_a254.call(comp,!1)})}getNextFocusableIndex(focusableContainers,backwards){const activeEl=_getActiveDomElement(this.gos),indexWithFocus=focusableContainers.findIndex(container=>container.getGui().contains(activeEl)),nextIndex=indexWithFocus+(backwards?-1:1);return{indexWithFocus,nextIndex}}focusContainer(comp,up){var _a253,_b;(_a253=comp.setAllowFocus)==null||_a253.call(comp,!0);const result=this.focusService.focusInto(comp.getGui(),up);return(_b=comp.setAllowFocus)==null||_b.call(comp,!1),result}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const gridThemeClass=this.beans.environment.getGridThemeClass();gridThemeClass&&this.view.setGridThemeClass(gridThemeClass)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},__name(_a201,"GridCtrl"),_a201),_a202,AlignedGridsService=(_a202=class extends BeanStub{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(beans){this.columnModel=beans.columnModel,this.columnSizeService=beans.columnSizeService,this.ctrlsService=beans.ctrlsService,this.columnApplyStateService=beans.columnApplyStateService}getAlignedGridApis(){let alignedGrids=this.gos.get("alignedGrids")??[];const isCallbackConfig=typeof alignedGrids=="function";typeof alignedGrids=="function"&&(alignedGrids=alignedGrids());const seeUrl=__name(()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`,"seeUrl");return alignedGrids.map(alignedGrid=>{var _a253;if(!alignedGrid){_errorOnce("alignedGrids contains an undefined option."),isCallbackConfig||_errorOnce(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),_errorOnce(seeUrl());return}if(this.isGridApi(alignedGrid))return alignedGrid;const refOrComp=alignedGrid;return"current"in refOrComp?(_a253=refOrComp.current)==null?void 0:_a253.api:(refOrComp.api||_errorOnce(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${seeUrl()}`),refOrComp.api)}).filter(api=>!!api&&!api.isDestroyed())}isGridApi(ref){return!!ref&&!!ref.dispatchEvent}postConstruct(){const fireColumnEvent=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:fireColumnEvent,columnVisible:fireColumnEvent,columnPinned:fireColumnEvent,columnGroupOpened:fireColumnEvent,columnResized:fireColumnEvent,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:__name(({event})=>this.onColumnEvent(event),"alignedGridColumn"),alignedGridScroll:__name(({event})=>this.onScrollEvent(event),"alignedGridScroll")})}fireEvent(event){this.consuming||this.getAlignedGridApis().forEach(api=>{api.isDestroyed()||api.dispatchEvent(event)})}onEvent(callback){this.consuming=!0,callback(),this.consuming=!1}fireColumnEvent(columnEvent){this.fireEvent({type:"alignedGridColumn",event:columnEvent})}fireScrollEvent(scrollEvent){scrollEvent.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:scrollEvent})}onScrollEvent(event){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(event.left,!0)})}extractDataFromEvent(event,func){const result=[];return event.columns?event.columns.forEach(column=>{result.push(func(column))}):event.column&&result.push(func(event.column)),result}getMasterColumns(event){return this.extractDataFromEvent(event,col=>col)}getColumnIds(event){return this.extractDataFromEvent(event,col=>col.getColId())}onColumnEvent(event){this.onEvent(()=>{switch(event.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(event);break}case"columnGroupOpened":{this.processGroupOpenedEvent(event);break}case"columnPivotChanged":_warnOnce("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(groupOpenedEvent){const{columnModel}=this;groupOpenedEvent.columnGroups.forEach(masterGroup=>{let otherColumnGroup=null;masterGroup&&(otherColumnGroup=columnModel.getProvidedColGroup(masterGroup.getGroupId())),!(masterGroup&&!otherColumnGroup)&&columnModel.setColumnGroupOpened(otherColumnGroup,masterGroup.isExpanded(),"alignedGridChanged")})}processColumnEvent(colEvent){var _a253;const masterColumn=colEvent.column;let otherColumn=null;if(masterColumn&&(otherColumn=this.columnModel.getColDefCol(masterColumn.getColId())),masterColumn&&!otherColumn)return;const masterColumns=this.getMasterColumns(colEvent),{columnApplyStateService,columnSizeService,ctrlsService}=this;switch(colEvent.type){case"columnMoved":{const destColState=colEvent.api.getColumnState().map(s=>({colId:s.colId}));columnApplyStateService.applyColumnState({state:destColState,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const destColState=colEvent.api.getColumnState().map(s=>({colId:s.colId,hide:s.hide}));columnApplyStateService.applyColumnState({state:destColState},"alignedGridChanged")}break;case"columnPinned":{const destColState=colEvent.api.getColumnState().map(s=>({colId:s.colId,pinned:s.pinned}));columnApplyStateService.applyColumnState({state:destColState},"alignedGridChanged")}break;case"columnResized":{const resizedEvent=colEvent,columnWidths={};masterColumns.forEach(column=>{columnWidths[column.getId()]={key:column.getColId(),newWidth:column.getActualWidth()}}),(_a253=resizedEvent.flexColumns)==null||_a253.forEach(col=>{columnWidths[col.getId()]&&delete columnWidths[col.getId()]}),columnSizeService.setColumnWidths(Object.values(columnWidths),!1,resizedEvent.finished,"alignedGridChanged");break}}const isVerticalScrollShowing=ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(api=>{api.setGridOption("alwaysShowVerticalScroll",isVerticalScrollShowing)})}},__name(_a202,"AlignedGridsService"),_a202),AlignedGridsModule={version:VERSION,moduleName:"@ag-grid-community/aligned-grid",beans:[AlignedGridsService]};function getColumnDef(beans,key){const column=beans.columnModel.getColDefCol(key);return column?column.getColDef():null}__name(getColumnDef,"getColumnDef");function getColumnDefs(beans){return beans.columnModel.getColumnDefs()}__name(getColumnDefs,"getColumnDefs");function sizeColumnsToFit(beans,paramsOrGridWidth){typeof paramsOrGridWidth=="number"?beans.columnSizeService.sizeColumnsToFit(paramsOrGridWidth,"api"):beans.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(paramsOrGridWidth)}__name(sizeColumnsToFit,"sizeColumnsToFit");function setColumnGroupOpened(beans,group,newValue){beans.columnModel.setColumnGroupOpened(group,newValue,"api")}__name(setColumnGroupOpened,"setColumnGroupOpened");function getColumnGroup(beans,name,instanceId){return beans.visibleColsService.getColumnGroup(name,instanceId)}__name(getColumnGroup,"getColumnGroup");function getProvidedColumnGroup(beans,name){return beans.columnModel.getProvidedColGroup(name)}__name(getProvidedColumnGroup,"getProvidedColumnGroup");function getDisplayNameForColumn(beans,column,location){return beans.columnNameService.getDisplayNameForColumn(column,location)||""}__name(getDisplayNameForColumn,"getDisplayNameForColumn");function getDisplayNameForColumnGroup(beans,columnGroup,location){return beans.columnNameService.getDisplayNameForColumnGroup(columnGroup,location)||""}__name(getDisplayNameForColumnGroup,"getDisplayNameForColumnGroup");function getColumn(beans,key){return beans.columnModel.getColDefCol(key)}__name(getColumn,"getColumn");function getColumns(beans){return beans.columnModel.getColDefCols()}__name(getColumns,"getColumns");function applyColumnState(beans,params){return beans.columnApplyStateService.applyColumnState(params,"api")}__name(applyColumnState,"applyColumnState");function getColumnState(beans){return beans.columnGetStateService.getColumnState()}__name(getColumnState,"getColumnState");function resetColumnState(beans){beans.columnApplyStateService.resetColumnState("api")}__name(resetColumnState,"resetColumnState");function getColumnGroupState(beans){return beans.columnGroupStateService.getColumnGroupState()}__name(getColumnGroupState,"getColumnGroupState");function setColumnGroupState(beans,stateItems){beans.columnGroupStateService.setColumnGroupState(stateItems,"api")}__name(setColumnGroupState,"setColumnGroupState");function resetColumnGroupState(beans){beans.columnGroupStateService.resetColumnGroupState("api")}__name(resetColumnGroupState,"resetColumnGroupState");function isPinning(beans){return beans.visibleColsService.isPinningLeft()||beans.visibleColsService.isPinningRight()}__name(isPinning,"isPinning");function isPinningLeft(beans){return beans.visibleColsService.isPinningLeft()}__name(isPinningLeft,"isPinningLeft");function isPinningRight(beans){return beans.visibleColsService.isPinningRight()}__name(isPinningRight,"isPinningRight");function getDisplayedColAfter(beans,col){return beans.visibleColsService.getColAfter(col)}__name(getDisplayedColAfter,"getDisplayedColAfter");function getDisplayedColBefore(beans,col){return beans.visibleColsService.getColBefore(col)}__name(getDisplayedColBefore,"getDisplayedColBefore");function setColumnVisible(beans,key,visible){beans.columnModel.setColsVisible([key],visible,"api")}__name(setColumnVisible,"setColumnVisible");function setColumnsVisible(beans,keys,visible){beans.columnModel.setColsVisible(keys,visible,"api")}__name(setColumnsVisible,"setColumnsVisible");function setColumnPinned(beans,key,pinned){beans.columnModel.setColsPinned([key],pinned,"api")}__name(setColumnPinned,"setColumnPinned");function setColumnsPinned(beans,keys,pinned){beans.columnModel.setColsPinned(keys,pinned,"api")}__name(setColumnsPinned,"setColumnsPinned");function getAllGridColumns(beans){return beans.columnModel.getCols()}__name(getAllGridColumns,"getAllGridColumns");function getDisplayedLeftColumns(beans){return beans.visibleColsService.getLeftCols()}__name(getDisplayedLeftColumns,"getDisplayedLeftColumns");function getDisplayedCenterColumns(beans){return beans.visibleColsService.getCenterCols()}__name(getDisplayedCenterColumns,"getDisplayedCenterColumns");function getDisplayedRightColumns(beans){return beans.visibleColsService.getRightCols()}__name(getDisplayedRightColumns,"getDisplayedRightColumns");function getAllDisplayedColumns(beans){return beans.visibleColsService.getAllCols()}__name(getAllDisplayedColumns,"getAllDisplayedColumns");function getAllDisplayedVirtualColumns(beans){return beans.columnViewportService.getViewportColumns()}__name(getAllDisplayedVirtualColumns,"getAllDisplayedVirtualColumns");function moveColumn(beans,key,toIndex){beans.columnMoveService.moveColumns([key],toIndex,"api")}__name(moveColumn,"moveColumn");function moveColumnByIndex(beans,fromIndex,toIndex){beans.columnMoveService.moveColumnByIndex(fromIndex,toIndex,"api")}__name(moveColumnByIndex,"moveColumnByIndex");function moveColumns(beans,columnsToMoveKeys,toIndex){beans.columnMoveService.moveColumns(columnsToMoveKeys,toIndex,"api")}__name(moveColumns,"moveColumns");function setColumnWidth(beans,key,newWidth,finished=!0,source="api"){beans.columnSizeService.setColumnWidths([{key,newWidth}],!1,finished,source)}__name(setColumnWidth,"setColumnWidth");function setColumnWidths(beans,columnWidths,finished=!0,source="api"){beans.columnSizeService.setColumnWidths(columnWidths,!1,finished,source)}__name(setColumnWidths,"setColumnWidths");function getLeftDisplayedColumnGroups(beans){return beans.visibleColsService.getTreeLeft()}__name(getLeftDisplayedColumnGroups,"getLeftDisplayedColumnGroups");function getCenterDisplayedColumnGroups(beans){return beans.visibleColsService.getTreeCenter()}__name(getCenterDisplayedColumnGroups,"getCenterDisplayedColumnGroups");function getRightDisplayedColumnGroups(beans){return beans.visibleColsService.getTreeRight()}__name(getRightDisplayedColumnGroups,"getRightDisplayedColumnGroups");function getAllDisplayedColumnGroups(beans){return beans.visibleColsService.getAllTrees()}__name(getAllDisplayedColumnGroups,"getAllDisplayedColumnGroups");function autoSizeColumn(beans,key,skipHeader){return beans.columnAutosizeService.autoSizeCols({colKeys:[key],skipHeader,source:"api"})}__name(autoSizeColumn,"autoSizeColumn");function autoSizeColumns(beans,keys,skipHeader){beans.columnAutosizeService.autoSizeCols({colKeys:keys,skipHeader,source:"api"})}__name(autoSizeColumns,"autoSizeColumns");function autoSizeAllColumns(beans,skipHeader){beans.columnAutosizeService.autoSizeAllColumns("api",skipHeader)}__name(autoSizeAllColumns,"autoSizeAllColumns");var _a203,DataTypeService=(_a203=class extends BeanStub{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(beans){this.rowModel=beans.rowModel,this.columnModel=beans.columnModel,this.funcColsService=beans.funcColsService,this.valueService=beans.valueService,this.columnApplyStateService=beans.columnApplyStateService,this.filterManager=beans.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",event=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(convertSourceType(event.source))})}processDataTypeDefinitions(){const defaultDataTypes=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const generateFormatValueFunc=__name(dataTypeDefinition=>params=>{const{column,node,value}=params;let valueFormatter=column.getColDef().valueFormatter;return valueFormatter===dataTypeDefinition.groupSafeValueFormatter&&(valueFormatter=dataTypeDefinition.valueFormatter),this.valueService.formatValue(column,node,value,valueFormatter)},"generateFormatValueFunc");Object.entries(defaultDataTypes).forEach(([cellDataType,dataTypeDefinition])=>{const mergedDataTypeDefinition={...dataTypeDefinition,groupSafeValueFormatter:this.createGroupSafeValueFormatter(dataTypeDefinition)};this.dataTypeDefinitions[cellDataType]=mergedDataTypeDefinition,this.formatValueFuncs[cellDataType]=generateFormatValueFunc(mergedDataTypeDefinition)});const dataTypeDefinitions=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(dataTypeDefinitions).forEach(([cellDataType,dataTypeDefinition])=>{const mergedDataTypeDefinition=this.processDataTypeDefinition(dataTypeDefinition,dataTypeDefinitions,[cellDataType],defaultDataTypes);mergedDataTypeDefinition&&(this.dataTypeDefinitions[cellDataType]=mergedDataTypeDefinition,dataTypeDefinition.dataTypeMatcher&&(this.dataTypeMatchers[cellDataType]=dataTypeDefinition.dataTypeMatcher),this.formatValueFuncs[cellDataType]=generateFormatValueFunc(mergedDataTypeDefinition))}),this.checkObjectValueHandlers(defaultDataTypes),["dateString","text","number","boolean","date"].forEach(cellDataType=>{const overriddenDataTypeMatcher=this.dataTypeMatchers[cellDataType];overriddenDataTypeMatcher&&delete this.dataTypeMatchers[cellDataType],this.dataTypeMatchers[cellDataType]=overriddenDataTypeMatcher??defaultDataTypes[cellDataType].dataTypeMatcher})}mergeDataTypeDefinitions(parentDataTypeDefinition,childDataTypeDefinition){const mergedDataTypeDefinition={...parentDataTypeDefinition,...childDataTypeDefinition};return parentDataTypeDefinition.columnTypes&&childDataTypeDefinition.columnTypes&&childDataTypeDefinition.appendColumnTypes&&(mergedDataTypeDefinition.columnTypes=[...convertColumnTypes(parentDataTypeDefinition.columnTypes),...convertColumnTypes(childDataTypeDefinition.columnTypes)]),mergedDataTypeDefinition}processDataTypeDefinition(dataTypeDefinition,dataTypeDefinitions,alreadyProcessedDataTypes,defaultDataTypes){let mergedDataTypeDefinition;const extendsCellDataType=dataTypeDefinition.extendsDataType;if(dataTypeDefinition.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),dataTypeDefinition.extendsDataType===dataTypeDefinition.baseDataType){let baseDataTypeDefinition=defaultDataTypes[extendsCellDataType];const overriddenBaseDataTypeDefinition=dataTypeDefinitions[extendsCellDataType];if(baseDataTypeDefinition&&overriddenBaseDataTypeDefinition&&(baseDataTypeDefinition=overriddenBaseDataTypeDefinition),!this.validateDataTypeDefinition(dataTypeDefinition,baseDataTypeDefinition,extendsCellDataType))return;mergedDataTypeDefinition=this.mergeDataTypeDefinitions(baseDataTypeDefinition,dataTypeDefinition)}else{if(alreadyProcessedDataTypes.includes(extendsCellDataType)){_warnOnce('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const extendedDataTypeDefinition=dataTypeDefinitions[extendsCellDataType];if(!this.validateDataTypeDefinition(dataTypeDefinition,extendedDataTypeDefinition,extendsCellDataType))return;const mergedExtendedDataTypeDefinition=this.processDataTypeDefinition(extendedDataTypeDefinition,dataTypeDefinitions,[...alreadyProcessedDataTypes,extendsCellDataType],defaultDataTypes);if(!mergedExtendedDataTypeDefinition)return;mergedDataTypeDefinition=this.mergeDataTypeDefinitions(mergedExtendedDataTypeDefinition,dataTypeDefinition)}return{...mergedDataTypeDefinition,groupSafeValueFormatter:this.createGroupSafeValueFormatter(mergedDataTypeDefinition)}}validateDataTypeDefinition(dataTypeDefinition,parentDataTypeDefinition,parentCellDataType){return parentDataTypeDefinition?parentDataTypeDefinition.baseDataType!==dataTypeDefinition.baseDataType?(_warnOnce('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(_warnOnce(`The data type definition ${parentCellDataType} does not exist.`),!1)}createGroupSafeValueFormatter(dataTypeDefinition){if(dataTypeDefinition.valueFormatter)return params=>{var _a253,_b;if((_a253=params.node)!=null&&_a253.group){const aggFunc=(params.colDef.pivotValueColumn??params.column).getAggFunc();if(aggFunc){if(aggFunc==="first"||aggFunc==="last")return dataTypeDefinition.valueFormatter(params);if(dataTypeDefinition.baseDataType==="number"&&aggFunc!=="count"){if(typeof params.value=="number")return dataTypeDefinition.valueFormatter(params);if(typeof params.value=="object"){if(!params.value)return;if("toNumber"in params.value)return dataTypeDefinition.valueFormatter({...params,value:params.value.toNumber()});if("value"in params.value)return dataTypeDefinition.valueFormatter({...params,value:params.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&params.column.isRowGroupActive()&&typeof params.value=="string"&&!((_b=dataTypeDefinition.dataTypeMatcher)!=null&&_b.call(dataTypeDefinition,params.value)))return;return dataTypeDefinition.valueFormatter(params)}}updateColDefAndGetColumnType(colDef,userColDef,colId){let{cellDataType}=userColDef;const{field}=userColDef;if(cellDataType===void 0&&(cellDataType=colDef.cellDataType),(cellDataType==null||cellDataType===!0)&&(cellDataType=this.canInferCellDataType(colDef,userColDef)?this.inferCellDataType(field,colId):!1),!cellDataType){colDef.cellDataType=!1;return}const dataTypeDefinition=this.dataTypeDefinitions[cellDataType];if(!dataTypeDefinition){_warnOnce(`Missing data type definition - "${cellDataType}"`);return}return colDef.cellDataType=cellDataType,dataTypeDefinition.groupSafeValueFormatter&&(colDef.valueFormatter=dataTypeDefinition.groupSafeValueFormatter),dataTypeDefinition.valueParser&&(colDef.valueParser=dataTypeDefinition.valueParser),dataTypeDefinition.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(colDef,cellDataType,dataTypeDefinition,colId),dataTypeDefinition.columnTypes}addColumnListeners(column){if(!this.isWaitingForRowData)return;const columnStateUpdates=this.columnStateUpdatesPendingInference[column.getColId()];if(!columnStateUpdates)return;const columnListener=__name(event=>{columnStateUpdates.add(event.key)},"columnListener");column.addEventListener("columnStateUpdated",columnListener),this.columnStateUpdateListenerDestroyFuncs.push(()=>column.removeEventListener("columnStateUpdated",columnListener))}canInferCellDataType(colDef,userColDef){if(!_isClientSideRowModel(this.gos))return!1;const propsToCheckForInference={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(userColDef,propsToCheckForInference))return!1;const columnTypes=userColDef.type===null?colDef.type:userColDef.type;if(columnTypes){const columnTypeDefs=this.gos.get("columnTypes")??{};if(convertColumnTypes(columnTypes).some(columnType=>{const columnTypeDef=columnTypeDefs[columnType.trim()];return columnTypeDef&&this.doColDefPropsPreventInference(columnTypeDef,propsToCheckForInference)}))return!1}return!this.doColDefPropsPreventInference(colDef,propsToCheckForInference)}doColDefPropsPreventInference(colDef,propsToCheckForInference){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([prop,comparisonValue])=>this.doesColDefPropPreventInference(colDef,propsToCheckForInference,prop,comparisonValue))}doesColDefPropPreventInference(colDef,checkProps,prop,comparisonValue){if(!checkProps[prop])return!1;const value=colDef[prop];return value===null?(checkProps[prop]=!1,!1):comparisonValue===void 0?!!value:value===comparisonValue}inferCellDataType(field,colId){if(!field)return;let value;const initialData=this.getInitialData();if(initialData){const fieldContainsDots=field.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");value=_getValueUsingField(initialData,field,fieldContainsDots)}else this.initWaitForRowData(colId);if(value==null)return;const[cellDataType]=Object.entries(this.dataTypeMatchers).find(([_cellDataType,dataTypeMatcher])=>dataTypeMatcher(value))??["object"];return cellDataType}getInitialData(){const rowData=this.gos.get("rowData");if(rowData!=null&&rowData.length)return rowData[0];if(this.initialData)return this.initialData;{const rowNodes=this.rowModel.getRootNode().allLeafChildren;if(rowNodes!=null&&rowNodes.length)return rowNodes[0].data}return null}initWaitForRowData(colId){if(this.columnStateUpdatesPendingInference[colId]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const columnTypeOverridesExist=this.isColumnTypeOverrideInDataTypeDefinitions;columnTypeOverridesExist&&this.columnModel.queueResizeOperations();const[destroyFunc]=this.addManagedEventListeners({rowDataUpdateStarted:__name(event=>{const{firstRowData}=event;firstRowData&&(destroyFunc==null||destroyFunc(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(firstRowData,columnTypeOverridesExist),this.columnStateUpdatesPendingInference={},columnTypeOverridesExist&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))},"rowDataUpdateStarted")})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(firstRowData,columnTypeOverridesExist){this.initialData=firstRowData;const state=[];this.destroyColumnStateUpdateListeners();const newRowGroupColumnStateWithoutIndex={},newPivotColumnStateWithoutIndex={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([colId,columnStateUpdates])=>{const column=this.columnModel.getCol(colId);if(!column)return;const oldColDef=column.getColDef();if(!this.columnModel.resetColDefIntoCol(column,"cellDataTypeInferred"))return;const newColDef=column.getColDef();if(columnTypeOverridesExist&&newColDef.type&&newColDef.type!==oldColDef.type){const updatedColumnState=this.getUpdatedColumnState(column,columnStateUpdates);updatedColumnState.rowGroup&&updatedColumnState.rowGroupIndex==null&&(newRowGroupColumnStateWithoutIndex[colId]=updatedColumnState),updatedColumnState.pivot&&updatedColumnState.pivotIndex==null&&(newPivotColumnStateWithoutIndex[colId]=updatedColumnState),state.push(updatedColumnState)}}),columnTypeOverridesExist&&state.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(newRowGroupColumnStateWithoutIndex,newPivotColumnStateWithoutIndex)),state.length&&this.columnApplyStateService.applyColumnState({state},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(column,columnStateUpdates){const columnState=this.columnApplyStateService.getColumnStateFromColDef(column);return columnStateUpdates.forEach(key=>{delete columnState[key],key==="rowGroup"?delete columnState.rowGroupIndex:key==="pivot"&&delete columnState.pivotIndex}),columnState}checkObjectValueHandlers(defaultDataTypes){const resolvedObjectDataTypeDefinition=this.dataTypeDefinitions.object,defaultObjectDataTypeDefinition=defaultDataTypes.object;this.hasObjectValueParser=resolvedObjectDataTypeDefinition.valueParser!==defaultObjectDataTypeDefinition.valueParser,this.hasObjectValueFormatter=resolvedObjectDataTypeDefinition.valueFormatter!==defaultObjectDataTypeDefinition.valueFormatter}getDateStringTypeDefinition(column){return column?this.getDataTypeDefinition(column)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(column){return this.getDateStringTypeDefinition(column).dateParser}getDateFormatterFunction(column){return this.getDateStringTypeDefinition(column).dateFormatter}getDataTypeDefinition(column){const colDef=column.getColDef();if(colDef.cellDataType)return this.dataTypeDefinitions[colDef.cellDataType]}getBaseDataType(column){var _a253;return(_a253=this.getDataTypeDefinition(column))==null?void 0:_a253.baseDataType}checkType(column,value){var _a253;if(value==null)return!0;const dataTypeMatcher=(_a253=this.getDataTypeDefinition(column))==null?void 0:_a253.dataTypeMatcher;return dataTypeMatcher?dataTypeMatcher(value):!0}validateColDef(colDef){const warning=__name(property=>_warnOnce(`Cell data type is "object" but no Value ${property} has been provided. Please either provide an object data type definition with a Value ${property}, or set "colDef.value${property}"`),"warning");colDef.cellDataType==="object"&&(colDef.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&warning("Formatter"),colDef.editable&&colDef.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&warning("Parser"))}getFormatValue(cellDataType){return this.formatValueFuncs[cellDataType]}setColDefPropertiesForBaseDataType(colDef,cellDataType,dataTypeDefinition,colId){var _a253;const formatValue=this.formatValueFuncs[cellDataType];switch(dataTypeDefinition.baseDataType){case"number":{colDef.cellEditor="agNumberCellEditor";break}case"boolean":{colDef.cellEditor="agCheckboxCellEditor",colDef.cellRenderer="agCheckboxCellRenderer",colDef.suppressKeyboardEvent=params=>!!params.colDef.editable&&params.event.key===KeyCode.SPACE;break}case"date":{colDef.cellEditor="agDateCellEditor",colDef.keyCreator=formatValue;break}case"dateString":{colDef.cellEditor="agDateStringCellEditor",colDef.keyCreator=formatValue;break}case"object":{colDef.cellEditorParams={useFormatter:!0},colDef.comparator=(a,b)=>{const column=this.columnModel.getColDefCol(colId),colDef2=column==null?void 0:column.getColDef();if(!column||!colDef2)return 0;const valA=a==null?"":formatValue({column,node:null,value:a}),valB=b==null?"":formatValue({column,node:null,value:b});return valA===valB?0:valA>valB?1:-1},colDef.keyCreator=formatValue;break}}(_a253=this.filterManager)==null||_a253.setColDefPropertiesForDataType(colDef,dataTypeDefinition,formatValue)}getDefaultDataTypes(){const defaultDateFormatMatcher=__name(value=>!!value.match("^\\d{4}-\\d{2}-\\d{2}$"),"defaultDateFormatMatcher"),translate=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:__name(params=>{var _a253,_b;return((_b=(_a253=params.newValue)==null?void 0:_a253.trim)==null?void 0:_b.call(_a253))===""?null:Number(params.newValue)},"valueParser"),valueFormatter:__name(params=>params.value==null?"":typeof params.value!="number"||isNaN(params.value)?translate("invalidNumber","Invalid Number"):String(params.value),"valueFormatter"),dataTypeMatcher:__name(value=>typeof value=="number","dataTypeMatcher")},text:{baseDataType:"text",valueParser:__name(params=>params.newValue===""?null:_toStringOrNull(params.newValue),"valueParser"),dataTypeMatcher:__name(value=>typeof value=="string","dataTypeMatcher")},boolean:{baseDataType:"boolean",valueParser:__name(params=>{var _a253,_b;return params.newValue==null?params.newValue:((_b=(_a253=params.newValue)==null?void 0:_a253.trim)==null?void 0:_b.call(_a253))===""?null:String(params.newValue).toLowerCase()==="true"},"valueParser"),valueFormatter:__name(params=>params.value==null?"":String(params.value),"valueFormatter"),dataTypeMatcher:__name(value=>typeof value=="boolean","dataTypeMatcher")},date:{baseDataType:"date",valueParser:__name(params=>_parseDateTimeFromString(params.newValue==null?null:String(params.newValue)),"valueParser"),valueFormatter:__name(params=>params.value==null?"":!(params.value instanceof Date)||isNaN(params.value.getTime())?translate("invalidDate","Invalid Date"):_serialiseDate(params.value,!1)??"","valueFormatter"),dataTypeMatcher:__name(value=>value instanceof Date,"dataTypeMatcher")},dateString:{baseDataType:"dateString",dateParser:__name(value=>_parseDateTimeFromString(value)??void 0,"dateParser"),dateFormatter:__name(value=>_serialiseDate(value??null,!1)??void 0,"dateFormatter"),valueParser:__name(params=>defaultDateFormatMatcher(String(params.newValue))?params.newValue:null,"valueParser"),valueFormatter:__name(params=>defaultDateFormatMatcher(String(params.value))?params.value:"","valueFormatter"),dataTypeMatcher:__name(value=>typeof value=="string"&&defaultDateFormatMatcher(value),"dataTypeMatcher")},object:{baseDataType:"object",valueParser:__name(()=>null,"valueParser"),valueFormatter:__name(params=>_toStringOrNull(params.value)??"","valueFormatter")}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(destroyFunc=>destroyFunc()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},__name(_a203,"DataTypeService"),_a203),DataTypeModule={version:VERSION,moduleName:"@ag-grid-community/data-type",beans:[DataTypeService]},ColumnApiModule={version:VERSION,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef,getColumnDefs,sizeColumnsToFit,setColumnGroupOpened,getColumnGroup,getProvidedColumnGroup,getDisplayNameForColumn,getDisplayNameForColumnGroup,getColumn,getColumns,applyColumnState,getColumnState,resetColumnState,getColumnGroupState,setColumnGroupState,resetColumnGroupState,isPinning,isPinningLeft,isPinningRight,getDisplayedColAfter,getDisplayedColBefore,setColumnVisible,setColumnsVisible,setColumnPinned,setColumnsPinned,getAllGridColumns,getDisplayedLeftColumns,getDisplayedCenterColumns,getDisplayedRightColumns,getAllDisplayedColumns,getAllDisplayedVirtualColumns,moveColumn,moveColumnByIndex,moveColumns,setColumnWidth,setColumnWidths,getLeftDisplayedColumnGroups,getCenterDisplayedColumnGroups,getRightDisplayedColumnGroups,getAllDisplayedColumnGroups,autoSizeColumn,autoSizeColumns,autoSizeAllColumns}};function addRowDropZone(beans,params){beans.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(params)}__name(addRowDropZone,"addRowDropZone");function removeRowDropZone(beans,params){const activeDropTarget=beans.dragAndDropService.findExternalZone(params);activeDropTarget&&beans.dragAndDropService.removeDropTarget(activeDropTarget)}__name(removeRowDropZone,"removeRowDropZone");function getRowDropZoneParams(beans,events){return beans.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(events)}__name(getRowDropZoneParams,"getRowDropZoneParams");var DragApiModule={version:VERSION,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone,removeRowDropZone,getRowDropZoneParams}};function getPinnedTopRowCount(beans){return beans.pinnedRowModel.getPinnedTopRowCount()}__name(getPinnedTopRowCount,"getPinnedTopRowCount");function getPinnedBottomRowCount(beans){return beans.pinnedRowModel.getPinnedBottomRowCount()}__name(getPinnedBottomRowCount,"getPinnedBottomRowCount");function getPinnedTopRow(beans,index){return beans.pinnedRowModel.getPinnedTopRow(index)}__name(getPinnedTopRow,"getPinnedTopRow");function getPinnedBottomRow(beans,index){return beans.pinnedRowModel.getPinnedBottomRow(index)}__name(getPinnedBottomRow,"getPinnedBottomRow");var PinnedRowApiModule={version:VERSION,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount,getPinnedBottomRowCount,getPinnedTopRow,getPinnedBottomRow}};function showLoadingOverlay(beans){beans.overlayService.showLoadingOverlay()}__name(showLoadingOverlay,"showLoadingOverlay");function showNoRowsOverlay(beans){beans.overlayService.showNoRowsOverlay()}__name(showNoRowsOverlay,"showNoRowsOverlay");function hideOverlay(beans){beans.overlayService.hideOverlay()}__name(hideOverlay,"hideOverlay");var OverlayApiModule={version:VERSION,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay,showNoRowsOverlay,hideOverlay}};function setGridAriaProperty(beans,property,value){if(!property)return;const eGrid=beans.ctrlsService.getGridBodyCtrl().getGui(),ariaProperty=`aria-${property}`;value===null?eGrid.removeAttribute(ariaProperty):eGrid.setAttribute(ariaProperty,value)}__name(setGridAriaProperty,"setGridAriaProperty");function refreshCells(beans,params={}){beans.frameworkOverrides.wrapIncoming(()=>beans.rowRenderer.refreshCells(params))}__name(refreshCells,"refreshCells");function flashCells(beans,params={}){const warning=__name(prop=>_warnOnce(`Since v31.1 api.flashCells parameter '${prop}Delay' is deprecated. Please use '${prop}Duration' instead.`),"warning");_exists(params.fadeDelay)&&warning("fade"),_exists(params.flashDelay)&&warning("flash"),beans.frameworkOverrides.wrapIncoming(()=>beans.rowRenderer.flashCells(params))}__name(flashCells,"flashCells");function refreshHeader(beans){beans.frameworkOverrides.wrapIncoming(()=>beans.ctrlsService.getHeaderRowContainerCtrls().forEach(c=>c.refresh()))}__name(refreshHeader,"refreshHeader");function isAnimationFrameQueueEmpty(beans){return beans.animationFrameService.isQueueEmpty()}__name(isAnimationFrameQueueEmpty,"isAnimationFrameQueueEmpty");function flushAllAnimationFrames(beans){beans.animationFrameService.flushAllFrames()}__name(flushAllAnimationFrames,"flushAllAnimationFrames");function getSizesForCurrentTheme(beans){return{rowHeight:_getRowHeightAsNumber(beans.gos),headerHeight:beans.columnModel.getHeaderHeight()}}__name(getSizesForCurrentTheme,"getSizesForCurrentTheme");function getCellRendererInstances(beans,params={}){return beans.rowRenderer.getCellRendererInstances(params).map(_unwrapUserComp)}__name(getCellRendererInstances,"getCellRendererInstances");var RenderApiModule={version:VERSION,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty,refreshCells,flashCells,refreshHeader,isAnimationFrameQueueEmpty,flushAllAnimationFrames,getSizesForCurrentTheme,getCellRendererInstances}};function expireValueCache(beans){beans.valueCache.expire()}__name(expireValueCache,"expireValueCache");function getValue(beans,colKey,rowNode){return getCellValue(beans,{colKey,rowNode})}__name(getValue,"getValue");function getCellValue(beans,params){const{colKey,rowNode,useFormatter}=params,column=beans.columnModel.getColDefCol(colKey)??beans.columnModel.getCol(colKey);if(_missing(column))return null;const value=beans.valueService.getValueForDisplay(column,rowNode);return useFormatter?beans.valueService.formatValue(column,rowNode,value)??_escapeString(value,!0):value}__name(getCellValue,"getCellValue");function getGridId(beans){return beans.context.getGridId()}__name(getGridId,"getGridId");function destroy(beans){beans.gridDestroyService.destroy()}__name(destroy,"destroy");function isDestroyed(beans){return beans.gridDestroyService.isDestroyCalled()}__name(isDestroyed,"isDestroyed");function getGridOption(beans,key){return beans.gos.get(key)}__name(getGridOption,"getGridOption");function setGridOption(beans,key,value){updateGridOptions(beans,{[key]:value})}__name(setGridOption,"setGridOption");function updateGridOptions(beans,options){beans.gos.updateGridOptions({options})}__name(updateGridOptions,"updateGridOptions");function addEventListener(beans,eventType,listener){beans.apiEventService.addEventListener(eventType,listener)}__name(addEventListener,"addEventListener");function removeEventListener(beans,eventType,listener){beans.apiEventService.removeEventListener(eventType,listener)}__name(removeEventListener,"removeEventListener");function addGlobalListener(beans,listener){beans.apiEventService.addGlobalListener(listener)}__name(addGlobalListener,"addGlobalListener");function removeGlobalListener(beans,listener){beans.apiEventService.removeGlobalListener(listener)}__name(removeGlobalListener,"removeGlobalListener");function getFocusedCell(beans){return beans.focusService.getFocusedCell()}__name(getFocusedCell,"getFocusedCell");function clearFocusedCell(beans){return beans.focusService.clearFocusedCell()}__name(clearFocusedCell,"clearFocusedCell");function setFocusedCell(beans,rowIndex,colKey,rowPinned){beans.focusService.setFocusedCell({rowIndex,column:colKey,rowPinned,forceBrowserFocus:!0})}__name(setFocusedCell,"setFocusedCell");function tabToNextCell(beans,event){return beans.navigationService.tabToNextCell(!1,event)}__name(tabToNextCell,"tabToNextCell");function tabToPreviousCell(beans,event){return beans.navigationService.tabToNextCell(!0,event)}__name(tabToPreviousCell,"tabToPreviousCell");function setFocusedHeader(beans,colKey,floatingFilter=!1){const headerPosition=beans.headerNavigationService.getHeaderPositionForColumn(colKey,floatingFilter);headerPosition&&beans.focusService.focusHeaderPosition({headerPosition})}__name(setFocusedHeader,"setFocusedHeader");function showColumnMenuAfterButtonClick(beans,colKey,buttonElement){const column=beans.columnModel.getCol(colKey);beans.menuService.showColumnMenu({column,buttonElement,positionBy:"button"})}__name(showColumnMenuAfterButtonClick,"showColumnMenuAfterButtonClick");function showColumnMenuAfterMouseClick(beans,colKey,mouseEvent){let column=beans.columnModel.getCol(colKey);if(column||(column=beans.columnModel.getColDefCol(colKey)),!column){_errorOnce(`column '${colKey}' not found`);return}beans.menuService.showColumnMenu({column,mouseEvent,positionBy:"mouse"})}__name(showColumnMenuAfterMouseClick,"showColumnMenuAfterMouseClick");function showColumnMenu(beans,colKey){const column=beans.columnModel.getCol(colKey);if(!column){_errorOnce(`column '${colKey}' not found`);return}beans.menuService.showColumnMenu({column,positionBy:"auto"})}__name(showColumnMenu,"showColumnMenu");function hidePopupMenu(beans){beans.menuService.hidePopupMenu()}__name(hidePopupMenu,"hidePopupMenu");function redrawRows(beans,params={}){const rowNodes=params?params.rowNodes:void 0;beans.frameworkOverrides.wrapIncoming(()=>beans.rowRenderer.redrawRows(rowNodes))}__name(redrawRows,"redrawRows");function setRowNodeExpanded(beans,rowNode,expanded,expandParents,forceSync){beans.expansionService.setRowNodeExpanded(rowNode,expanded,expandParents,forceSync)}__name(setRowNodeExpanded,"setRowNodeExpanded");function getRowNode(beans,id){return beans.rowModel.getRowNode(id)}__name(getRowNode,"getRowNode");function addRenderedRowListener(beans,eventName,rowIndex,callback){beans.rowRenderer.addRenderedRowListener(eventName,rowIndex,callback)}__name(addRenderedRowListener,"addRenderedRowListener");function getRenderedNodes(beans){return beans.rowRenderer.getRenderedNodes()}__name(getRenderedNodes,"getRenderedNodes");function forEachNode(beans,callback,includeFooterNodes){beans.rowModel.forEachNode(callback,includeFooterNodes)}__name(forEachNode,"forEachNode");function getFirstDisplayedRow(beans){return getFirstDisplayedRowIndex(beans)}__name(getFirstDisplayedRow,"getFirstDisplayedRow");function getFirstDisplayedRowIndex(beans){return beans.rowRenderer.getFirstVirtualRenderedRow()}__name(getFirstDisplayedRowIndex,"getFirstDisplayedRowIndex");function getLastDisplayedRow(beans){return getLastDisplayedRowIndex(beans)}__name(getLastDisplayedRow,"getLastDisplayedRow");function getLastDisplayedRowIndex(beans){return beans.rowRenderer.getLastVirtualRenderedRow()}__name(getLastDisplayedRowIndex,"getLastDisplayedRowIndex");function getDisplayedRowAtIndex(beans,index){return beans.rowModel.getRow(index)}__name(getDisplayedRowAtIndex,"getDisplayedRowAtIndex");function getDisplayedRowCount(beans){return beans.rowModel.getRowCount()}__name(getDisplayedRowCount,"getDisplayedRowCount");function getModel(beans){return beans.rowModel}__name(getModel,"getModel");function setNodesSelected(beans,params){if(!params.nodes.every(node=>node.rowPinned?(_warnOnce("cannot select pinned rows"),!1):node.id===void 0?(_warnOnce("cannot select node until id for node is known"),!1):!0))return;const{nodes,source,newValue}=params,nodesAsRowNode=nodes;beans.selectionService.setNodesSelected({nodes:nodesAsRowNode,source:source??"api",newValue})}__name(setNodesSelected,"setNodesSelected");function selectAll(beans,source="apiSelectAll"){beans.selectionService.selectAllRowNodes({source})}__name(selectAll,"selectAll");function deselectAll(beans,source="apiSelectAll"){beans.selectionService.deselectAllRowNodes({source})}__name(deselectAll,"deselectAll");function selectAllFiltered(beans,source="apiSelectAllFiltered"){beans.selectionService.selectAllRowNodes({source,justFiltered:!0})}__name(selectAllFiltered,"selectAllFiltered");function deselectAllFiltered(beans,source="apiSelectAllFiltered"){beans.selectionService.deselectAllRowNodes({source,justFiltered:!0})}__name(deselectAllFiltered,"deselectAllFiltered");function selectAllOnCurrentPage(beans,source="apiSelectAllCurrentPage"){beans.selectionService.selectAllRowNodes({source,justCurrentPage:!0})}__name(selectAllOnCurrentPage,"selectAllOnCurrentPage");function deselectAllOnCurrentPage(beans,source="apiSelectAllCurrentPage"){beans.selectionService.deselectAllRowNodes({source,justCurrentPage:!0})}__name(deselectAllOnCurrentPage,"deselectAllOnCurrentPage");function getSelectedNodes(beans){return beans.selectionService.getSelectedNodes()}__name(getSelectedNodes,"getSelectedNodes");function getSelectedRows(beans){return beans.selectionService.getSelectedRows()}__name(getSelectedRows,"getSelectedRows");function onSortChanged(beans){beans.sortController.onSortChanged("api")}__name(onSortChanged,"onSortChanged");var CoreApiModule={version:VERSION,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId,destroy,isDestroyed,getGridOption,setGridOption,updateGridOptions}},RowSelectionApiModule={version:VERSION,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected,selectAll,deselectAll,selectAllFiltered,deselectAllFiltered,selectAllOnCurrentPage,deselectAllOnCurrentPage,getSelectedNodes,getSelectedRows}},RowApiModule={version:VERSION,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows,setRowNodeExpanded,getRowNode,addRenderedRowListener,getRenderedNodes,forEachNode,getFirstDisplayedRow,getFirstDisplayedRowIndex,getLastDisplayedRow,getLastDisplayedRowIndex,getDisplayedRowAtIndex,getDisplayedRowCount,getModel}},ScrollApiModule={version:VERSION,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange,getHorizontalPixelRange,ensureColumnVisible,ensureIndexVisible,ensureNodeVisible}},KeyboardNavigationApiModule={version:VERSION,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell,clearFocusedCell,setFocusedCell,setFocusedHeader,tabToNextCell,tabToPreviousCell}},EventApiModule={version:VERSION,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener,addGlobalListener,removeEventListener,removeGlobalListener}},CellApiModule={version:VERSION,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache,getValue,getCellValue}},CommunityMenuApiModule={version:VERSION,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick,showColumnMenuAfterMouseClick,showColumnMenu,hidePopupMenu}},SortApiModule={version:VERSION,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged}},CommunityApiModule={version:VERSION,moduleName:"@ag-grid-community/api",dependantModules:[CoreApiModule,PinnedRowApiModule,RowSelectionApiModule,ColumnApiModule,RowApiModule,DragApiModule,ScrollApiModule,OverlayApiModule,KeyboardNavigationApiModule,EventApiModule,RenderApiModule,CellApiModule,CommunityMenuApiModule,SortApiModule]};function getState(beans){var _a253;return((_a253=beans.stateService)==null?void 0:_a253.getState())??{}}__name(getState,"getState");function migrateGridStateModel(state){switch(state.version||(state.version="32.1.0"),state.version){case"32.1.0":state=migrateV32_1(state)}return state}__name(migrateGridStateModel,"migrateGridStateModel");function migrateV32_1(state){return state.cellSelection=jsonGet(state,"rangeSelection"),state}__name(migrateV32_1,"migrateV32_1");function jsonGet(json,key){if(json&&typeof json=="object")return json[key]}__name(jsonGet,"jsonGet");var _a204,StateService=(_a204=class extends BeanStub{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=_debounce(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=_debounce(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=_debounce(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(beans){this.filterManager=beans.filterManager,this.ctrlsService=beans.ctrlsService,this.pivotResultColsService=beans.pivotResultColsService,this.focusService=beans.focusService,this.columnModel=beans.columnModel,this.visibleColsService=beans.visibleColsService,this.columnGroupStateService=beans.columnGroupStateService,this.columnGetStateService=beans.columnGetStateService,this.paginationService=beans.paginationService,this.selectionService=beans.selectionService,this.expansionService=beans.expansionService,this.columnAnimationService=beans.columnAnimationService,this.columnApplyStateService=beans.columnApplyStateService,this.sideBarService=beans.sideBarService,this.rangeService=beans.rangeService}postConstruct(){this.isClientSideRowModel=_isClientSideRowModel(this.gos),this.cachedState=this.getInitialState(),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const[newColumnsLoadedDestroyFunc,rowCountReadyDestroyFunc,firstDataRenderedDestroyFunc]=this.addManagedEventListeners({newColumnsLoaded:__name(({source})=>{source==="gridInitializing"&&(newColumnsLoadedDestroyFunc(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},"newColumnsLoaded"),rowCountReady:__name(()=>{rowCountReadyDestroyFunc==null||rowCountReadyDestroyFunc(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},"rowCountReady"),firstDataRendered:__name(()=>{firstDataRenderedDestroyFunc==null||firstDataRenderedDestroyFunc(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())},"firstDataRendered")})}getInitialState(){return migrateGridStateModel(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const stateUpdater=__name(()=>this.updateCachedState("sideBar",this.getSideBarState()),"stateUpdater");this.addManagedEventListeners({toolPanelVisibleChanged:stateUpdater,sideBarUpdated:stateUpdater})}setupStateOnColumnsInitialised(){const initialState=this.getInitialState();this.setColumnState(initialState),this.setColumnGroupState(initialState),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const onUpdate=__name(state=>()=>this.updateColumnState([state]),"onUpdate");this.addManagedEventListeners({columnValueChanged:onUpdate("aggregation"),columnMoved:onUpdate("columnOrder"),columnPinned:onUpdate("columnPinning"),columnResized:onUpdate("columnSizing"),columnVisible:onUpdate("columnVisibility"),columnPivotChanged:onUpdate("pivot"),columnPivotModeChanged:onUpdate("pivot"),columnRowGroupChanged:onUpdate("rowGroup"),sortChanged:onUpdate("sort"),newColumnsLoaded:__name(()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),"newColumnsLoaded"),columnGroupOpened:__name(()=>this.updateCachedState("columnGroup",this.getColumnGroupState()),"columnGroupOpened")})}setupStateOnRowCountReady(){const{filter:filterState,rowGroupExpansion:rowGroupExpansionState,rowSelection:rowSelectionState,pagination:paginationState}=this.getInitialState(),advancedFilterModel=this.gos.get("advancedFilterModel");(filterState||advancedFilterModel)&&this.setFilterState(filterState,advancedFilterModel),rowGroupExpansionState&&this.setRowGroupExpansionState(rowGroupExpansionState),rowSelectionState&&this.setRowSelectionState(rowSelectionState),paginationState&&this.setPaginationState(paginationState),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const updateRowGroupExpansionState=__name(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),"updateRowGroupExpansionState");this.addManagedEventListeners({filterChanged:__name(()=>this.updateCachedState("filter",this.getFilterState()),"filterChanged"),rowGroupOpened:__name(()=>this.onRowGroupOpenedDebounced(),"rowGroupOpened"),expandOrCollapseAll:updateRowGroupExpansionState,columnRowGroupChanged:updateRowGroupExpansionState,rowDataUpdated:__name(()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{updateRowGroupExpansionState()})},"rowDataUpdated"),selectionChanged:__name(()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},"selectionChanged"),paginationChanged:__name(event=>{(event.newPage||event.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())},"paginationChanged")})}setupStateOnFirstDataRendered(){const{scroll:scrollState,cellSelection:cellSelectionState,focusedCell:focusedCellState,columnOrder:columnOrderState}=this.getInitialState();focusedCellState&&this.setFocusedCellState(focusedCellState),cellSelectionState&&this.setCellSelectionState(cellSelectionState),scrollState&&this.setScrollState(scrollState),this.setColumnPivotState(!!(columnOrderState!=null&&columnOrderState.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const cellSelection=this.getRangeSelectionState();this.updateCachedState("rangeSelection",cellSelection),this.updateCachedState("cellSelection",cellSelection),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:__name(()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),"cellFocused"),cellSelectionChanged:__name(event=>{if(event.finished){const cellSelection2=this.getRangeSelectionState();this.updateCachedState("rangeSelection",cellSelection2),this.updateCachedState("cellSelection",cellSelection2)}},"cellSelectionChanged"),bodyScrollEnd:__name(()=>this.updateCachedState("scroll",this.getScrollState()),"bodyScrollEnd")})}getColumnState(){const pivotMode=this.columnModel.isPivotMode(),sortColumns=[],groupColIds=[],aggregationColumns=[],pivotColIds=[],leftColIds=[],rightColIds=[],hiddenColIds=[],columnSizes=[],columns=[];let defaultSortIndex=0;const columnState=this.columnGetStateService.getColumnState();for(let i=0;i<columnState.length;i++){const{colId,sort,sortIndex,rowGroup,rowGroupIndex,aggFunc,pivot,pivotIndex,pinned,hide,width,flex}=columnState[i];columns.push(colId),sort&&(sortColumns[sortIndex??defaultSortIndex++]={colId,sort}),rowGroup&&(groupColIds[rowGroupIndex??0]=colId),typeof aggFunc=="string"&&aggregationColumns.push({colId,aggFunc}),pivot&&(pivotColIds[pivotIndex??0]=colId),pinned&&(pinned==="right"?rightColIds:leftColIds).push(colId),hide&&hiddenColIds.push(colId),(flex||width)&&columnSizes.push({colId,flex:flex??void 0,width})}return{sort:sortColumns.length?{sortModel:sortColumns}:void 0,rowGroup:groupColIds.length?{groupColIds}:void 0,aggregation:aggregationColumns.length?{aggregationModel:aggregationColumns}:void 0,pivot:pivotColIds.length||pivotMode?{pivotMode,pivotColIds}:void 0,columnPinning:leftColIds.length||rightColIds.length?{leftColIds,rightColIds}:void 0,columnVisibility:hiddenColIds.length?{hiddenColIds}:void 0,columnSizing:columnSizes.length?{columnSizingModel:columnSizes}:void 0,columnOrder:columns.length?{orderedColIds:columns}:void 0}}setColumnState(initialState){const{sort:sortState,rowGroup:groupState,aggregation:aggregationState,pivot:pivotState,columnPinning:columnPinningState,columnVisibility:columnVisibilityState,columnSizing:columnSizingState,columnOrder:columnOrderState,partialColumnState}=initialState,columnStateMap={},getColumnState2=__name(colId=>{let columnState=columnStateMap[colId];return columnState||(columnState={colId},columnStateMap[colId]=columnState,columnState)},"getColumnState2"),defaultState=partialColumnState?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};sortState&&(sortState.sortModel.forEach(({colId,sort},sortIndex)=>{const columnState=getColumnState2(colId);columnState.sort=sort,columnState.sortIndex=sortIndex}),defaultState.sort=null,defaultState.sortIndex=null),groupState&&(groupState.groupColIds.forEach((colId,rowGroupIndex)=>{const columnState=getColumnState2(colId);columnState.rowGroup=!0,columnState.rowGroupIndex=rowGroupIndex}),defaultState.rowGroup=null,defaultState.rowGroupIndex=null),aggregationState&&(aggregationState.aggregationModel.forEach(({colId,aggFunc})=>{getColumnState2(colId).aggFunc=aggFunc}),defaultState.aggFunc=null),pivotState&&(pivotState.pivotColIds.forEach((colId,pivotIndex)=>{const columnState=getColumnState2(colId);columnState.pivot=!0,columnState.pivotIndex=pivotIndex}),this.gos.updateGridOptions({options:{pivotMode:pivotState.pivotMode},source:"gridInitializing"}),defaultState.pivot=null,defaultState.pivotIndex=null),columnPinningState&&(columnPinningState.leftColIds.forEach(colId=>{getColumnState2(colId).pinned="left"}),columnPinningState.rightColIds.forEach(colId=>{getColumnState2(colId).pinned="right"}),defaultState.pinned=null),columnVisibilityState&&(columnVisibilityState.hiddenColIds.forEach(colId=>{getColumnState2(colId).hide=!0}),defaultState.hide=null),columnSizingState&&(columnSizingState.columnSizingModel.forEach(({colId,flex,width})=>{const columnState=getColumnState2(colId);columnState.flex=flex??null,columnState.width=width}),defaultState.flex=null);const columns=columnOrderState==null?void 0:columnOrderState.orderedColIds,applyOrder=!!(columns!=null&&columns.length),columnStates=applyOrder?columns.map(colId=>getColumnState2(colId)):Object.values(columnStateMap);columnStates.length&&(this.columnStates=columnStates,this.columnApplyStateService.applyColumnState({state:columnStates,applyOrder,defaultState},"gridInitializing"))}setColumnPivotState(applyOrder){const columnStates=this.columnStates;this.columnStates=void 0;const columnGroupStates=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(columnStates){const secondaryColumnStates=[];for(const columnState of columnStates)this.pivotResultColsService.getPivotResultCol(columnState.colId)&&secondaryColumnStates.push(columnState);this.columnApplyStateService.applyColumnState({state:secondaryColumnStates,applyOrder},"gridInitializing")}columnGroupStates&&this.columnGroupStateService.setColumnGroupState(columnGroupStates,"gridInitializing")}}getColumnGroupState(){const columnGroupState=this.columnGroupStateService.getColumnGroupState(),openColumnGroups=[];return columnGroupState.forEach(({groupId,open})=>{open&&openColumnGroups.push(groupId)}),openColumnGroups.length?{openColumnGroupIds:openColumnGroups}:void 0}setColumnGroupState(initialState){var _a253;if(!Object.prototype.hasOwnProperty.call(initialState,"columnGroup"))return;const openColumnGroups=new Set((_a253=initialState.columnGroup)==null?void 0:_a253.openColumnGroupIds),stateItems=this.columnGroupStateService.getColumnGroupState().map(({groupId})=>{const open=openColumnGroups.has(groupId);return open&&openColumnGroups.delete(groupId),{groupId,open}});openColumnGroups.forEach(groupId=>{stateItems.push({groupId,open:!0})}),stateItems.length&&(this.columnGroupStates=stateItems),this.columnGroupStateService.setColumnGroupState(stateItems,"gridInitializing")}getFilterState(){var _a253,_b;let filterModel=(_a253=this.filterManager)==null?void 0:_a253.getFilterModel();filterModel&&Object.keys(filterModel).length===0&&(filterModel=void 0);const advancedFilterModel=((_b=this.filterManager)==null?void 0:_b.getAdvancedFilterModel())??void 0;return filterModel||advancedFilterModel?{filterModel,advancedFilterModel}:void 0}setFilterState(filterState,gridOptionAdvancedFilterModel){var _a253,_b;const{filterModel,advancedFilterModel}=filterState??{advancedFilterModel:gridOptionAdvancedFilterModel};filterModel&&((_a253=this.filterManager)==null||_a253.setFilterModel(filterModel,"columnFilter")),advancedFilterModel&&((_b=this.filterManager)==null||_b.setAdvancedFilterModel(advancedFilterModel))}getRangeSelectionState(){var _a253;const cellRanges=(_a253=this.rangeService)==null?void 0:_a253.getCellRanges().map(cellRange=>{const{id,type,startRow,endRow,columns,startColumn}=cellRange;return{id,type,startRow,endRow,colIds:columns.map(column=>column.getColId()),startColId:startColumn.getColId()}});return cellRanges!=null&&cellRanges.length?{cellRanges}:void 0}setCellSelectionState(cellSelectionState){const{gos,rangeService,columnModel,visibleColsService}=this;if(!_isCellSelectionEnabled(gos)||!rangeService)return;const cellRanges=[];if(cellSelectionState.cellRanges.forEach(cellRange=>{const columns=[];if(cellRange.colIds.forEach(colId=>{const column=columnModel.getCol(colId);column&&columns.push(column)}),!columns.length)return;let startColumn=columnModel.getCol(cellRange.startColId);if(!startColumn){const allColumns=visibleColsService.getAllCols(),columnSet=new Set(columns);startColumn=allColumns.find(column=>columnSet.has(column))}cellRanges.push({...cellRange,columns,startColumn})}),_isUsingNewCellSelectionAPI(gos)&&_getSuppressMultiRanges(gos)&&cellRanges.length>1)return _warnOnce("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");rangeService.setCellRanges(cellRanges)}getScrollState(){var _a253;if(!this.isClientSideRowModel)return;const scrollFeature=(_a253=this.ctrlsService.getGridBodyCtrl())==null?void 0:_a253.getScrollFeature(),{left}=(scrollFeature==null?void 0:scrollFeature.getHScrollPosition())??{left:0},{top}=(scrollFeature==null?void 0:scrollFeature.getVScrollPosition())??{top:0};return top||left?{top,left}:void 0}setScrollState(scrollState){var _a253;if(!this.isClientSideRowModel)return;const{top,left}=scrollState;(_a253=this.ctrlsService.getGridBodyCtrl())==null||_a253.getScrollFeature().setScrollPosition(top,left)}getSideBarState(){var _a253,_b;return(_b=(_a253=this.sideBarService)==null?void 0:_a253.getSideBarComp())==null?void 0:_b.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const focusedCell=this.focusService.getFocusedCell();if(focusedCell){const{column,rowIndex,rowPinned}=focusedCell;return{colId:column.getColId(),rowIndex,rowPinned}}}setFocusedCellState(focusedCellState){if(!this.isClientSideRowModel)return;const{colId,rowIndex,rowPinned}=focusedCellState;this.focusService.setFocusedCell({column:this.columnModel.getCol(colId),rowIndex,rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const page=this.paginationService.getCurrentPage(),pageSize=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!page&&!pageSize))return{page,pageSize}}setPaginationState(paginationState){this.paginationService&&(paginationState.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(paginationState.pageSize,"initialState"),typeof paginationState.page=="number"&&this.paginationService.setPage(paginationState.page))}getRowSelectionState(){var _a253;const selectionState=this.selectionService.getSelectionState();return!selectionState||!Array.isArray(selectionState)&&(selectionState.selectAll===!1||selectionState.selectAllChildren===!1)&&!((_a253=selectionState==null?void 0:selectionState.toggledNodes)!=null&&_a253.length)?void 0:selectionState}setRowSelectionState(rowSelectionState){this.selectionService.setSelectionState(rowSelectionState,"gridInitializing")}getRowGroupExpansionState(){const expandedRowGroups=this.expansionService.getExpandedRows();return expandedRowGroups.length?{expandedRowGroupIds:expandedRowGroups}:void 0}setRowGroupExpansionState(rowGroupExpansionState){this.expansionService.expandRows(rowGroupExpansionState.expandedRowGroupIds)}updateColumnState(features){const newColumnState=this.getColumnState();let hasChanged=!1;Object.entries(newColumnState).forEach(([key,value])=>{_jsonEquals(value,this.cachedState[key])||(hasChanged=!0)}),this.cachedState={...this.cachedState,...newColumnState},hasChanged&&this.dispatchStateUpdateEvent(features)}updateCachedState(key,value){const existingValue=this.cachedState[key];this.setCachedStateValue(key,value),_jsonEquals(value,existingValue)||this.dispatchStateUpdateEvent([key])}setCachedStateValue(key,value){this.cachedState={...this.cachedState,[key]:value}}refreshStaleState(){this.staleStateKeys.forEach(key=>{switch(key){case"rowSelection":this.setCachedStateValue(key,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(sources){this.suppressEvents||(sources.forEach(source=>this.queuedUpdateSources.add(source)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const sources=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources,state:this.cachedState})}suppressEventsAndDispatchInitEvent(updateFunc){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),updateFunc(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},__name(_a204,"StateService"),_a204),StateCoreModule={version:VERSION,moduleName:"@ag-grid-community/state-core",beans:[StateService]},StateApiModule={version:VERSION,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState},dependantModules:[StateCoreModule]},StateModule={version:VERSION,moduleName:"@ag-grid-community/state",dependantModules:[StateCoreModule,StateApiModule]};function paginationIsLastPageFound(beans){return beans.rowModel.isLastRowIndexKnown()}__name(paginationIsLastPageFound,"paginationIsLastPageFound");function paginationGetPageSize(beans){var _a253;return((_a253=beans.paginationService)==null?void 0:_a253.getPageSize())??100}__name(paginationGetPageSize,"paginationGetPageSize");function paginationGetCurrentPage(beans){var _a253;return((_a253=beans.paginationService)==null?void 0:_a253.getCurrentPage())??0}__name(paginationGetCurrentPage,"paginationGetCurrentPage");function paginationGetTotalPages(beans){var _a253;return((_a253=beans.paginationService)==null?void 0:_a253.getTotalPages())??1}__name(paginationGetTotalPages,"paginationGetTotalPages");function paginationGetRowCount(beans){return beans.paginationService?beans.paginationService.getMasterRowCount():beans.rowModel.getRowCount()}__name(paginationGetRowCount,"paginationGetRowCount");function paginationGoToNextPage(beans){var _a253;(_a253=beans.paginationService)==null||_a253.goToNextPage()}__name(paginationGoToNextPage,"paginationGoToNextPage");function paginationGoToPreviousPage(beans){var _a253;(_a253=beans.paginationService)==null||_a253.goToPreviousPage()}__name(paginationGoToPreviousPage,"paginationGoToPreviousPage");function paginationGoToFirstPage(beans){var _a253;(_a253=beans.paginationService)==null||_a253.goToFirstPage()}__name(paginationGoToFirstPage,"paginationGoToFirstPage");function paginationGoToLastPage(beans){var _a253;(_a253=beans.paginationService)==null||_a253.goToLastPage()}__name(paginationGoToLastPage,"paginationGoToLastPage");function paginationGoToPage(beans,page){var _a253;(_a253=beans.paginationService)==null||_a253.goToPage(page)}__name(paginationGoToPage,"paginationGoToPage");var _a205,PaginationAutoPageSizeService=(_a205=class extends BeanStub{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(beans){this.ctrlsService=beans.ctrlsService,this.paginationService=beans.paginationService}postConstruct(){this.ctrlsService.whenReady(this,p=>{this.centerRowsCtrl=p.center;const listener=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:listener,scrollVisibilityChanged:listener}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const bodyHeight=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(bodyHeight>0){const update=__name(()=>{const rowHeight=Math.max(_getRowHeightAsNumber(this.gos),1),newPageSize=Math.floor(bodyHeight/rowHeight);this.paginationService.setPageSize(newPageSize,"autoCalculated")},"update");this.isBodyRendered?_debounce(()=>update(),50)():(update(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},__name(_a205,"PaginationAutoPageSizeService"),_a205);function _addFocusableContainerListener(comp,eGui,focusService){comp.addManagedElementListeners(eGui,{keydown:__name(e=>{if(!e.defaultPrevented&&e.key===KeyCode.TAB){const backwards=e.shiftKey;focusService.findNextFocusableElement(eGui,!1,backwards)||focusService.focusNextGridCoreContainer(backwards)&&e.preventDefault()}},"keydown")})}__name(_addFocusableContainerListener,"_addFocusableContainerListener");var paginationPageSizeSelector="paginationPageSizeSelector",_a206,PageSizeSelectorComp=(_a206=class extends Component{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const newValue=this.selectPageSizeComp.getValue();if(!newValue)return;const paginationPageSize=Number(newValue);isNaN(paginationPageSize)||paginationPageSize<1||paginationPageSize===this.paginationService.getPageSize()||(this.paginationService.setPageSize(paginationPageSize,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(beans){this.paginationService=beans.paginationService}postConstruct(){this.addManagedPropertyListener(paginationPageSizeSelector,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:__name(event=>this.handlePaginationChanged(event),"paginationChanged")})}handlePaginationChanged(paginationChangedEvent){if(!this.selectPageSizeComp||!(paginationChangedEvent!=null&&paginationChangedEvent.newPageSize))return;const paginationPageSize=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(paginationPageSize)?this.selectPageSizeComp.setValue(paginationPageSize.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(show){this.selectPageSizeComp&&!show&&this.reset(),show&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){_clearElement(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(paginationPageSizeSelector)!==!1}reloadPageSizesSelector(){const pageSizeOptions=this.getPageSizeSelectorValues(),paginationPageSizeOption=this.paginationService.getPageSize(),shouldAddAndSelectEmptyOption=!paginationPageSizeOption||!pageSizeOptions.includes(paginationPageSizeOption);if(shouldAddAndSelectEmptyOption){const pageSizeSet=this.gos.exists("paginationPageSize"),pageSizesSet=this.gos.get(paginationPageSizeSelector)!==!0;_warnOnce(`'paginationPageSize=${paginationPageSizeOption}'${pageSizeSet?"":" (default value)"}, but ${paginationPageSizeOption} is not included in${pageSizesSet?"":" the default"} paginationPageSizeSelector=[${pageSizeOptions.join(", ")}].`),pageSizesSet||_warnOnce(`Either set '${paginationPageSizeSelector}' to an array that includes ${paginationPageSizeOption} or to 'false' to disable the page size selector.`),pageSizeOptions.unshift("")}const value=String(shouldAddAndSelectEmptyOption?"":paginationPageSizeOption);this.selectPageSizeComp?(_areEqual(this.pageSizeOptions,pageSizeOptions)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(pageSizeOptions)),this.pageSizeOptions=pageSizeOptions),this.selectPageSizeComp.setValue(value,!0)):this.createPageSizeSelectorComp(pageSizeOptions,value),this.hasEmptyOption=shouldAddAndSelectEmptyOption}createPageSizeSelectOptions(pageSizeOptions){return pageSizeOptions.map(value=>({value:String(value)}))}createPageSizeSelectorComp(pageSizeOptions,value){const localeTextFunc=this.localeService.getLocaleTextFunc(),localisedLabel=localeTextFunc("pageSizeSelectorLabel","Page Size:"),localisedAriaLabel=localeTextFunc("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new AgSelect).addOptions(this.createPageSizeSelectOptions(pageSizeOptions)).setValue(value).setAriaLabel(localisedAriaLabel).setLabel(localisedLabel).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const defaultValues=[20,50,100],paginationPageSizeSelectorValues=this.gos.get(paginationPageSizeSelector);return!Array.isArray(paginationPageSizeSelectorValues)||_missingOrEmpty(paginationPageSizeSelectorValues)?defaultValues:[...paginationPageSizeSelectorValues].sort((a,b)=>a-b)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},__name(_a206,"PageSizeSelectorComp"),_a206),PageSizeSelectorSelector={selector:"AG-PAGE-SIZE-SELECTOR",component:PageSizeSelectorComp},_a207,PaginationComp=(_a207=class extends TabGuardComp{constructor(){super(),this.btFirst=RefPlaceholder,this.btPrevious=RefPlaceholder,this.btNext=RefPlaceholder,this.btLast=RefPlaceholder,this.lbRecordCount=RefPlaceholder,this.lbFirstRowOnPage=RefPlaceholder,this.lbLastRowOnPage=RefPlaceholder,this.lbCurrent=RefPlaceholder,this.lbTotal=RefPlaceholder,this.pageSizeComp=RefPlaceholder,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(beans){this.rowModel=beans.rowModel,this.paginationService=beans.paginationService,this.focusService=beans.focusService,this.ariaAnnouncementService=beans.ariaAnnouncementService}postConstruct(){const isRtl=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[PageSizeSelectorSelector]);const{btFirst,btPrevious,btNext,btLast}=this;this.activateTabIndex([btFirst,btPrevious,btNext,btLast]),btFirst.insertAdjacentElement("afterbegin",_createIconNoSpan(isRtl?"last":"first",this.gos)),btPrevious.insertAdjacentElement("afterbegin",_createIconNoSpan(isRtl?"next":"previous",this.gos)),btNext.insertAdjacentElement("afterbegin",_createIconNoSpan(isRtl?"previous":"next",this.gos)),btLast.insertAdjacentElement("afterbegin",_createIconNoSpan(isRtl?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:__name(()=>{},"onTabKeyDown"),focusInnerElement:__name(fromBottom=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(fromBottom):this.focusService.focusGridInnerElement(fromBottom)},"focusInnerElement"),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(allowFocus){this.allowFocusInnerElement=allowFocus}onPaginationChanged(){const paginationPanelEnabled=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(paginationPanelEnabled),paginationPanelEnabled&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(item=>{const{el,fn}=item;this.addManagedListeners(el,{click:fn,keydown:__name(e=>{(e.key===KeyCode.ENTER||e.key===KeyCode.SPACE)&&(e.preventDefault(),fn())},"keydown")})}),_addFocusableContainerListener(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(value){const userFunc=this.gos.getCallback("paginationNumberFormatter");if(userFunc)return userFunc({value});const localeTextFunc=this.localeService.getLocaleTextFunc(),thousandSeparator=localeTextFunc("thousandSeparator",","),decimalSeparator=localeTextFunc("decimalSeparator",".");return _formatNumberCommas(value,thousandSeparator,decimalSeparator)}getTemplate(){const localeTextFunc=this.localeService.getLocaleTextFunc(),strPage=localeTextFunc("page","Page"),strTo=localeTextFunc("to","to"),strOf=localeTextFunc("of","of"),strFirst=localeTextFunc("firstPage","First Page"),strPrevious=localeTextFunc("previousPage","Previous Page"),strNext=localeTextFunc("nextPage","Next Page"),strLast=localeTextFunc("lastPage","Last Page"),compId=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${compId}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${compId}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${compId}-to">${strTo}</span>
                    <span id="ag-${compId}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${compId}-of">${strOf}</span>
                    <span id="ag-${compId}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${strFirst}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${strPrevious}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${compId}-start-page">${strPage}</span>
                        <span id="ag-${compId}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${compId}-of-page">${strOf}</span>
                        <span id="ag-${compId}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${strNext}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${strLast}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const currentPage=this.paginationService.getCurrentPage(),maxRowFound=this.rowModel.isLastRowIndexKnown(),totalPages=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=currentPage===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const zeroPagesToDisplay=this.isZeroPagesToDisplay(),onLastPage=currentPage===totalPages-1;this.nextButtonDisabled=onLastPage||zeroPagesToDisplay,this.lastButtonDisabled=!maxRowFound||zeroPagesToDisplay||currentPage===totalPages-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(button,disabled){_setAriaDisabled(button,disabled),button.classList.toggle("ag-disabled",disabled)}isZeroPagesToDisplay(){const maxRowFound=this.rowModel.isLastRowIndexKnown(),totalPages=this.paginationService.getTotalPages();return maxRowFound&&totalPages===0}updateLabels(){const lastPageFound=this.rowModel.isLastRowIndexKnown(),totalPages=this.paginationService.getTotalPages(),masterRowCount=this.paginationService.getMasterRowCount(),rowCount=lastPageFound?masterRowCount:null;if(rowCount===1){const firstRow=this.rowModel.getRow(0);if(firstRow&&firstRow.group&&!(firstRow.groupData||firstRow.aggData)){this.setTotalLabelsToZero();return}}const currentPage=this.paginationService.getCurrentPage(),pageSize=this.paginationService.getPageSize();let startRow,endRow;this.isZeroPagesToDisplay()?startRow=endRow=0:(startRow=pageSize*currentPage+1,endRow=startRow+pageSize-1,lastPageFound&&endRow>rowCount&&(endRow=rowCount));const theoreticalEndRow=startRow+pageSize-1,isLoadingPageSize=!lastPageFound&&masterRowCount<theoreticalEndRow,lbFirstRowOnPage=this.formatNumber(startRow);this.lbFirstRowOnPage.textContent=lbFirstRowOnPage;let lbLastRowOnPage;const localeTextFunc=this.localeService.getLocaleTextFunc();isLoadingPageSize?lbLastRowOnPage=localeTextFunc("pageLastRowUnknown","?"):lbLastRowOnPage=this.formatNumber(endRow),this.lbLastRowOnPage.textContent=lbLastRowOnPage;const toDisplay=totalPages>0?currentPage+1:0,lbCurrent=this.formatNumber(toDisplay);this.lbCurrent.textContent=lbCurrent;let lbTotal,lbRecordCount;if(lastPageFound)lbTotal=this.formatNumber(totalPages),lbRecordCount=this.formatNumber(rowCount);else{const moreText=localeTextFunc("more","more");lbTotal=moreText,lbRecordCount=moreText}this.lbTotal.textContent=lbTotal,this.lbRecordCount.textContent=lbRecordCount,this.announceAriaStatus(lbFirstRowOnPage,lbLastRowOnPage,lbRecordCount,lbCurrent,lbTotal)}announceAriaStatus(lbFirstRowOnPage,lbLastRowOnPage,lbRecordCount,lbCurrent,lbTotal){const localeTextFunc=this.localeService.getLocaleTextFunc(),strPage=localeTextFunc("page","Page"),strTo=localeTextFunc("to","to"),strOf=localeTextFunc("of","of"),ariaRowStatus=`${lbFirstRowOnPage} ${strTo} ${lbLastRowOnPage} ${strOf} ${lbRecordCount}`,ariaPageStatus=`${strPage} ${lbCurrent} ${strOf} ${lbTotal}`;ariaRowStatus!==this.ariaRowStatus&&(this.ariaRowStatus=ariaRowStatus,this.ariaAnnouncementService.announceValue(ariaRowStatus,"paginationRow")),ariaPageStatus!==this.ariaPageStatus&&(this.ariaPageStatus=ariaPageStatus,this.ariaAnnouncementService.announceValue(ariaPageStatus,"paginationPage"))}setTotalLabelsToZero(){const strZero=this.formatNumber(0);this.lbFirstRowOnPage.textContent=strZero,this.lbCurrent.textContent=strZero,this.lbLastRowOnPage.textContent=strZero,this.lbTotal.textContent=strZero,this.lbRecordCount.textContent=strZero,this.announceAriaStatus(strZero,strZero,strZero,strZero,strZero)}},__name(_a207,"PaginationComp"),_a207),PaginationSelector={selector:"AG-PAGINATION",component:PaginationComp},_a208,PaginationService=(_a208=class extends BeanStub{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(beans){this.rowModel=beans.rowModel,this.pageBoundsService=beans.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return PaginationSelector}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(page){!this.active||this.currentPage===page||typeof this.currentPage!="number"||(this.currentPage=page,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(rowNode){return rowNode.rowIndex>=this.topDisplayedRowIndex&&rowNode.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(index){return Math.floor(index/this.pageSize)}goToPageWithIndex(index){if(!this.active)return;const pageNumber=this.getPageForIndex(index);this.goToPage(pageNumber)}isRowInPage(row){return this.active?this.getPageForIndex(row.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const rowCount=this.rowModel.getRowCount(),lastPage=Math.floor(rowCount/this.pageSize);this.goToPage(lastPage)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(page){this.currentPage=page}get pageSize(){return _exists(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:_exists(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:_exists(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:_exists(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const oldPageSize=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==oldPageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(size,source){const currentSize=this.pageSize;switch(source){case"autoCalculated":this.pageSizeAutoCalculated=size;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=size,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=size;break;case"gridOptions":this.pageSizeFromGridOptions=size,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}currentSize!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const masterLastRowIndex=this.masterRowCount-1;this.totalPages=Math.floor(masterLastRowIndex/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const masterPageStartIndex=this.pageSize*this.currentPage;let masterPageEndIndex=this.pageSize*(this.currentPage+1)-1;if(masterPageEndIndex>masterLastRowIndex&&(masterPageEndIndex=masterLastRowIndex),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(masterPageStartIndex),masterPageEndIndex===masterLastRowIndex)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const firstIndexNotToShow=this.rowModel.getTopLevelRowDisplayedIndex(masterPageEndIndex+1);this.bottomDisplayedRowIndex=firstIndexNotToShow-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const maxRowIndex=this.masterRowCount-1;this.totalPages=Math.floor(maxRowIndex/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>maxRowIndex&&(this.bottomDisplayedRowIndex=maxRowIndex)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(params){const{keepRenderedRows=!1,newPage=!1,newPageSize=!1}=params;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage,newPageSize,keepRenderedRows})}},__name(_a208,"PaginationService"),_a208),PaginationCoreModule={version:VERSION,moduleName:"@ag-grid-community/pagination-core",beans:[PaginationService,PaginationAutoPageSizeService]},PaginationApiModule={version:VERSION,moduleName:"@ag-grid-community/pagination-api",dependantModules:[PaginationCoreModule],apiFunctions:{paginationIsLastPageFound,paginationGetPageSize,paginationGetCurrentPage,paginationGetTotalPages,paginationGetRowCount,paginationGoToNextPage,paginationGoToPreviousPage,paginationGoToFirstPage,paginationGoToLastPage,paginationGoToPage}},PaginationModule={version:VERSION,moduleName:"@ag-grid-community/pagination",dependantModules:[PaginationCoreModule,PaginationApiModule]},clientSide="clientSide",serverSide="serverSide",infinite="infinite",functionRowModels={onGroupExpandedOrCollapsed:[clientSide],refreshClientSideRowModel:[clientSide],isRowDataEmpty:[clientSide],forEachLeafNode:[clientSide],forEachNodeAfterFilter:[clientSide],forEachNodeAfterFilterAndSort:[clientSide],resetRowHeights:[clientSide],applyTransaction:[clientSide],applyTransactionAsync:[clientSide],flushAsyncTransactions:[clientSide],getBestCostNodeSelection:[clientSide],getServerSideSelectionState:[serverSide],setServerSideSelectionState:[serverSide],applyServerSideTransaction:[serverSide],applyServerSideTransactionAsync:[serverSide],applyServerSideRowData:[serverSide],retryServerSideLoads:[serverSide],flushServerSideAsyncTransactions:[serverSide],refreshServerSide:[serverSide],getServerSideGroupLevelState:[serverSide],refreshInfiniteCache:[infinite],purgeInfiniteCache:[infinite],getInfiniteRowCount:[infinite],isLastRowIndexKnown:[infinite,serverSide],expandAll:[clientSide,serverSide],collapseAll:[clientSide,serverSide],onRowHeightChanged:[clientSide,serverSide],setRowCount:[infinite,serverSide],getCacheBlockState:[infinite,serverSide]},deprecatedFunctions={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function validateApiFunction(functionName,apiFunction,beans){const deprecation=deprecatedFunctions[functionName];if(deprecation){const{version,new:replacement,old,message}=deprecation,apiMethod=old??functionName;return(...args)=>{const replacementMessage=replacement?`Please use ${replacement} instead. `:"";return _warnOnce(`Since ${version} api.${apiMethod} is deprecated. ${replacementMessage}${message??""}`),apiFunction.apply(apiFunction,args)}}const rowModels=functionRowModels[functionName];return rowModels?(...args)=>{const rowModel=beans.rowModel.getType();if(!rowModels.includes(rowModel)){_errorOnce(`api.${functionName} can only be called when gridOptions.rowModelType is ${rowModels.join(" or ")}`);return}return apiFunction.apply(apiFunction,args)}:apiFunction}__name(validateApiFunction,"validateApiFunction");var COLUMN_DEFINITION_DEPRECATIONS={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},CSRM_REQUIRES_ROW_GROUP_MODULE=__name((_options,gridOptions)=>(gridOptions.rowModelType??"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null,"CSRM_REQUIRES_ROW_GROUP_MODULE"),COLUMN_DEFINITION_VALIDATIONS={enableRowGroup:CSRM_REQUIRES_ROW_GROUP_MODULE,rowGroup:CSRM_REQUIRES_ROW_GROUP_MODULE,rowGroupIndex:CSRM_REQUIRES_ROW_GROUP_MODULE,enablePivot:CSRM_REQUIRES_ROW_GROUP_MODULE,enableValue:CSRM_REQUIRES_ROW_GROUP_MODULE,pivot:CSRM_REQUIRES_ROW_GROUP_MODULE,pivotIndex:CSRM_REQUIRES_ROW_GROUP_MODULE,aggFunc:CSRM_REQUIRES_ROW_GROUP_MODULE,cellEditor:__name(options=>options.cellEditor==="agRichSelect"||options.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,"cellEditor"),menuTabs:__name(options=>{var _a253;const enterpriseMenuTabs=["columnsMenuTab","generalMenuTab"];return(_a253=options.menuTabs)!=null&&_a253.some(tab=>enterpriseMenuTabs.includes(tab))?{module:"@ag-grid-enterprise/menu"}:null},"menuTabs"),columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:__name((_options,{rowSelection})=>rowSelection==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple","validate")},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:__name((_options,{rowSelection})=>rowSelection==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple","validate")},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:__name((_options,{rowSelection})=>rowSelection==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple","validate")},children:__name(()=>COL_DEF_VALIDATORS,"children")},colDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},ALL_PROPERTIES=Object.keys(colDefPropertyMap),COL_DEF_VALIDATORS={objectName:"colDef",allProperties:ALL_PROPERTIES,docsUrl:"column-properties/",deprecations:COLUMN_DEFINITION_DEPRECATIONS,validations:COLUMN_DEFINITION_VALIDATIONS},GRID_OPTION_DEPRECATIONS=__name(()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),"GRID_OPTION_DEPRECATIONS"),GRID_OPTION_DEFAULTS={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},GRID_OPTION_VALIDATIONS=__name(()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:__name(options=>{const rowModel=options.rowModelType??"clientSide";switch(rowModel){case"clientSide":{const csrmWarning=`treeData requires 'getDataPath' in the ${rowModel} row model.`;return options.getDataPath?null:csrmWarning}case"serverSide":{const ssrmWarning=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${rowModel} row model.`;return options.isServerSideGroup&&options.getServerSideGroupKey?null:ssrmWarning}}return null},"validate")},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:__name(options=>{switch(options.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return options.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null},"validate")},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:__name(options=>{const values=options.paginationPageSizeSelector;return typeof values=="boolean"||values==null||values.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`},"validate")},rowSelection:{validate({rowSelection}){return rowSelection&&typeof rowSelection=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:__name(()=>COL_DEF_VALIDATORS,"columnDefs"),defaultColDef:__name(()=>COL_DEF_VALIDATORS,"defaultColDef"),defaultColGroupDef:__name(()=>COL_DEF_VALIDATORS,"defaultColGroupDef"),autoGroupColumnDef:__name(()=>COL_DEF_VALIDATORS,"autoGroupColumnDef"),selectionColumnDef:__name(()=>COL_DEF_VALIDATORS,"selectionColumnDef")}),"GRID_OPTION_VALIDATIONS"),GRID_OPTIONS_VALIDATORS=__name(()=>({objectName:"gridOptions",allProperties:[...PropertyKeys.ALL_PROPERTIES,...ComponentUtil.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:GRID_OPTION_DEPRECATIONS(),validations:GRID_OPTION_VALIDATIONS()}),"GRID_OPTIONS_VALIDATORS"),_a209,ValidationService=(_a209=class extends BeanStub{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(beans){this.beans=beans,this.gridOptions=beans.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(options){this.processOptions(options,GRID_OPTIONS_VALIDATORS())}validateApiFunction(functionName,apiFunction){return validateApiFunction(functionName,apiFunction,this.beans)}processOptions(options,validator){const{validations,deprecations,allProperties,propertyExceptions,objectName,docsUrl}=validator;allProperties&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(options,[...propertyExceptions??[],...Object.keys(deprecations)],allProperties,objectName,docsUrl);const warnings=new Set;Object.keys(options).forEach(key=>{const deprecation=deprecations[key];if(deprecation)if("renamed"in deprecation){const{renamed,version}=deprecation;warnings.add(`As of v${version}, ${String(key)} is deprecated. Please use ${String(renamed)} instead.`),options[renamed]=options[key]}else{const{message,version}=deprecation;warnings.add(`As of v${version}, ${String(key)} is deprecated. ${message??""}`)}const value=options[key];if(value==null||value===!1)return;const rulesOrGetter=validations[key];let rules;if(rulesOrGetter)if(typeof rulesOrGetter=="function"){const fromGetter=rulesOrGetter(options,this.gridOptions);if(!fromGetter)return;if("objectName"in fromGetter){const value2=options[key];if(Array.isArray(value2)){value2.forEach(item=>{this.processOptions(item,fromGetter)});return}this.processOptions(options[key],fromGetter);return}rules=fromGetter}else rules=rulesOrGetter;else return;const{module,dependencies,validate,supportedRowModels}=rules;if(supportedRowModels){const rowModel=this.gridOptions.rowModelType??"clientSide";if(!supportedRowModels.includes(rowModel)){warnings.add(`${String(key)} is not supported with the '${rowModel}' row model.`);return}}if(module){const modules=Array.isArray(module)?module:[module];let allRegistered=!0;if(modules.forEach(m=>{this.gos.assertModuleRegistered(m,String(key))||(allRegistered=!1,warnings.add(`${String(key)} is only available when ${m} is loaded.`))}),!allRegistered)return}if(dependencies){const warning=this.checkForRequiredDependencies(key,dependencies,options);if(warning){warnings.add(warning);return}}if(validate){const warning=validate(options,this.gridOptions);if(warning){warnings.add(warning);return}}}),warnings.size>0&&warnings.forEach(warning=>{_warnOnce(warning)})}checkForRequiredDependencies(key,validator,options){const failed=Object.entries(validator).find(([key2,value])=>{const gridOptionValue=options[key2];return!value.includes(gridOptionValue)});if(!failed)return null;const[failedKey,possibleOptions]=failed;return possibleOptions.length>1?`'${String(key)}' requires '${failedKey}' to be one of [${possibleOptions.join(", ")}].`:`'${String(key)}' requires '${failedKey}' to be ${possibleOptions[0]}.`}checkProperties(object,exceptions,validProperties,containerName,docsUrl){const VUE_FRAMEWORK_PROPS=["__ob__","__v_skip","__metadata__"],invalidProperties=_fuzzyCheckStrings(Object.getOwnPropertyNames(object),[...VUE_FRAMEWORK_PROPS,...exceptions,...validProperties],validProperties);if(_iterateObject(invalidProperties,(key,value)=>{let message=`invalid ${containerName} property '${key}' did you mean any of these: ${value.slice(0,8).join(", ")}.`;validProperties.includes("context")&&(message+=`
If you are trying to annotate ${containerName} with application data, use the '${containerName}.context' property instead.`),_warnOnce(message)}),Object.keys(invalidProperties).length>0&&docsUrl){const url=this.getFrameworkOverrides().getDocLink(docsUrl);_warnOnce(`to see all the valid ${containerName} properties please check: ${url}`)}}},__name(_a209,"ValidationService"),_a209),GridCoreModule={version:VERSION,moduleName:"@ag-grid-community/core"},ValidationsModule={version:VERSION,moduleName:"@ag-grid-community/core-validations",beans:[ValidationService]},CommunityFeaturesModule={version:VERSION,moduleName:"@ag-grid-community/core-community-features",dependantModules:[GridCoreModule,ValidationsModule,EditModule,FilterModule,StateModule,DataTypeModule,AlignedGridsModule,PaginationModule,CommunityApiModule]},_a210,GridDestroyService=(_a210=class extends BeanStub{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(beans){this.beans=beans}destroy(){var _a253,_b;this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:((_a253=this.beans.stateService)==null?void 0:_a253.getState())??{}}),this.destroyCalled=!0,(_b=this.beans.ctrlsService.get("gridCtrl"))==null||_b.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},__name(_a210,"GridDestroyService"),_a210),ALWAYS_SYNC_GLOBAL_EVENTS=new Set(["gridPreDestroyed","fillStart","pasteStart"]),isSelectionUIEvent=__name(source=>source==="checkboxSelected"||source==="rowClicked"||source==="spaceKey"||source==="uiSelectAll"||source==="uiSelectAllCurrentPage"||source==="uiSelectAllFiltered","isSelectionUIEvent"),PROPERTY_COERCIONS=new Map([...PropertyKeys.BOOLEAN_PROPERTIES.map(key=>[key,toBoolean]),...PropertyKeys.NUMBER_PROPERTIES.map(key=>[key,toNumber]),["groupAggFiltering",val=>typeof val=="function"?val:toBoolean(val)],["pageSize",toConstrainedNum(1)],["autoSizePadding",toConstrainedNum(0)],["keepDetailRowsCount",toConstrainedNum(1)],["rowBuffer",toConstrainedNum(0)],["infiniteInitialRowCount",toConstrainedNum(1)],["cacheOverflowSize",toConstrainedNum(1)],["cacheBlockSize",toConstrainedNum(1)],["serverSideInitialRowCount",toConstrainedNum(1)],["viewportRowModelPageSize",toConstrainedNum(1)],["viewportRowModelBufferSize",toConstrainedNum(0)]]);function getCoercedValue(key,value){const coerceFunc=PROPERTY_COERCIONS.get(key);return coerceFunc?coerceFunc(value):value}__name(getCoercedValue,"getCoercedValue");function getCoercedGridOptions(gridOptions){const newGo={};return Object.entries(gridOptions).forEach(([key,value])=>{const coercedValue=getCoercedValue(key,value);newGo[key]=coercedValue}),newGo}__name(getCoercedGridOptions,"getCoercedGridOptions");var _a211,_GridOptionsService=(_a211=class extends BeanStub{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new LocalEventService,this.globalEventHandlerFactory=restrictToSyncOnly=>(eventName,event)=>{if(!this.isAlive())return;const alwaysSync=ALWAYS_SYNC_GLOBAL_EVENTS.has(eventName);if(alwaysSync&&!restrictToSyncOnly||!alwaysSync&&restrictToSyncOnly)return;const eventHandlerName=ComponentUtil.getCallbackForEvent(eventName),eventHandler=this.gridOptions[eventHandlerName];typeof eventHandler=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{eventHandler(event)})}}wireBeans(beans){this.gridOptions=beans.gridOptions,this.eGridDiv=beans.eGridDiv,this.validationService=beans.validationService,this.environment=beans.environment,this.api=beans.gridApi,this.gridId=beans.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const async=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),async),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:__name(({options})=>{this.updateGridOptions({options,force:!0,source:"gridOptionsUpdated"})},"gridOptionsChanged")})}get(property){return this.gridOptions[property]??GRID_OPTION_DEFAULTS[property]}getCallback(property){return this.mergeGridCommonParams(this.gridOptions[property])}exists(property){return _exists(this.gridOptions[property])}mergeGridCommonParams(callback){return callback&&__name(callbackParams=>{const mergedParams=callbackParams;return mergedParams.api=this.api,mergedParams.context=this.gridOptionsContext,callback(mergedParams)},"wrapped")}updateGridOptions({options,force,source="api"}){var _a253;const changeSet={id:_a211.changeSetId++,properties:[]},events=[];Object.entries(options).forEach(([key,value])=>{source==="api"&&INITIAL_GRID_OPTION_KEYS[key]&&_warnOnce(`${key} is an initial property and cannot be updated.`);const coercedValue=getCoercedValue(key,value),shouldForce=force||typeof coercedValue=="object"&&source==="api",previousValue=this.gridOptions[key];if(shouldForce||previousValue!==coercedValue){this.gridOptions[key]=coercedValue;const event={type:key,currentValue:coercedValue,previousValue,changeSet,source};events.push(event)}}),(_a253=this.validationService)==null||_a253.processGridOptions(this.gridOptions),changeSet.properties=events.map(event=>event.type),events.forEach(event=>{this.gridOptions.debug&&_log(`Updated property ${event.type} from`,event.previousValue," to ",event.currentValue),this.propertyEventService.dispatchEvent(event)})}addPropertyEventListener(key,listener){this.propertyEventService.addEventListener(key,listener)}removePropertyEventListener(key,listener){this.propertyEventService.removeEventListener(key,listener)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(params){const updatedParams=params;return updatedParams.api=this.api,updatedParams.context=this.gridOptionsContext,updatedParams}assertModuleRegistered(moduleName,reason){return ModuleRegistry.__assertRegistered(moduleName,reason,this.gridId)}isModuleRegistered(moduleName){return ModuleRegistry.__isRegistered(moduleName,this.gridId)}},__name(_a211,"_GridOptionsService"),_a211);_GridOptionsService.changeSetId=0;var GridOptionsService=_GridOptionsService,_a212,HeaderPositionUtils=(_a212=class extends BeanStub{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(beans){this.visibleColsService=beans.visibleColsService,this.ctrlsService=beans.ctrlsService}findHeader(focusedHeader,direction){let nextColumn,getColMethod;if(isColumnGroup(focusedHeader.column)?nextColumn=this.visibleColsService.getGroupAtDirection(focusedHeader.column,direction):(getColMethod=`getCol${direction}`,nextColumn=this.visibleColsService[getColMethod](focusedHeader.column)),!nextColumn)return;const{headerRowIndex}=focusedHeader;if(this.getHeaderRowType(headerRowIndex)!=="filter"){const columnsInPath=[nextColumn];for(;nextColumn.getParent();)nextColumn=nextColumn.getParent(),columnsInPath.push(nextColumn);nextColumn=columnsInPath[columnsInPath.length-1-headerRowIndex]}const{column,headerRowIndex:indexToFocus}=this.getHeaderIndexToFocus(nextColumn,headerRowIndex);return{column,headerRowIndex:indexToFocus}}getHeaderIndexToFocus(column,currentIndex){let nextColumn;if(isColumnGroup(column)&&this.isAnyChildSpanningHeaderHeight(column)&&column.isPadding()){const targetColumn=column;nextColumn=targetColumn.getLeafColumns()[0];let col=nextColumn;for(;col!==targetColumn;)currentIndex++,col=col.getParent()}return{column:nextColumn||column,headerRowIndex:currentIndex}}isAnyChildSpanningHeaderHeight(columnGroup){return columnGroup?columnGroup.getLeafColumns().some(col=>col.isSpanHeaderHeight()):!1}getColumnVisibleParent(currentColumn,currentIndex){const currentRowType=this.getHeaderRowType(currentIndex),isFloatingFilter=currentRowType==="filter",isColumn2=currentRowType==="column";let nextFocusColumn=isFloatingFilter?currentColumn:currentColumn.getParent(),nextRow=currentIndex-1,headerRowIndexWithoutSpan=nextRow;if(isColumn2&&this.isAnyChildSpanningHeaderHeight(currentColumn.getParent())){for(;nextFocusColumn&&nextFocusColumn.isPadding();)nextFocusColumn=nextFocusColumn.getParent(),nextRow--;headerRowIndexWithoutSpan=nextRow,nextRow<0&&(nextFocusColumn=currentColumn,nextRow=currentIndex,headerRowIndexWithoutSpan=void 0)}return{column:nextFocusColumn,headerRowIndex:nextRow,headerRowIndexWithoutSpan}}getColumnVisibleChild(column,currentIndex,direction="After"){const currentRowType=this.getHeaderRowType(currentIndex);let nextFocusColumn=column,nextRow=currentIndex+1;const headerRowIndexWithoutSpan=nextRow;if(currentRowType==="group"){const leafColumns=column.getDisplayedLeafColumns(),leafColumn=direction==="After"?leafColumns[0]:_last(leafColumns),columnsInTheWay=[];let currentColumn=leafColumn;for(;currentColumn.getParent()!==column;)currentColumn=currentColumn.getParent(),columnsInTheWay.push(currentColumn);if(nextFocusColumn=leafColumn,leafColumn.isSpanHeaderHeight())for(let i=columnsInTheWay.length-1;i>=0;i--){const colToFocus=columnsInTheWay[i];if(!colToFocus.isPadding()){nextFocusColumn=colToFocus;break}nextRow++}else nextFocusColumn=_last(columnsInTheWay),nextFocusColumn||(nextFocusColumn=leafColumn)}return{column:nextFocusColumn,headerRowIndex:nextRow,headerRowIndexWithoutSpan}}getHeaderRowType(rowIndex){const centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl();if(centerHeaderContainer)return centerHeaderContainer.getRowType(rowIndex)}findColAtEdgeForHeaderRow(level,position){const displayedColumns=this.visibleColsService.getAllCols(),column=displayedColumns[position==="start"?0:displayedColumns.length-1];if(!column)return;const childContainer=this.ctrlsService.getHeaderRowContainerCtrl(column.getPinned()),type=childContainer==null?void 0:childContainer.getRowType(level);if(type=="group"){const columnGroup=this.visibleColsService.getColGroupAtLevel(column,level);return{headerRowIndex:level,column:columnGroup}}return{headerRowIndex:type==null?-1:level,column}}},__name(_a212,"HeaderPositionUtils"),_a212),_a213,LocaleService=(_a213=class extends BeanStub{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const getLocaleText=this.gos.getCallback("getLocaleText");if(getLocaleText)return(key,defaultValue,variableValues)=>getLocaleText({key,defaultValue,variableValues});const localeText=this.gos.get("localeText");return(key,defaultValue,variableValues)=>{let localisedText=localeText&&localeText[key];if(localisedText&&variableValues&&variableValues.length){let found=0;for(;!(found>=variableValues.length||localisedText.indexOf("${variable}")===-1);)localisedText=localisedText.replace("${variable}",variableValues[found++])}return localisedText??defaultValue}}},__name(_a213,"LocaleService"),_a213),_a214,ApiEventService=(_a214=class extends BeanStub{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new FrameworkEventListenerService(this.getFrameworkOverrides())}addEventListener(eventType,userListener){const listener=this.frameworkEventWrappingService.wrap(userListener),async=_useAsyncEvents(this.gos)&&!ALWAYS_SYNC_GLOBAL_EVENTS.has(eventType),listeners=async?this.asyncEventListeners:this.syncEventListeners;listeners.has(eventType)||listeners.set(eventType,new Set),listeners.get(eventType).add(listener),this.eventService.addEventListener(eventType,listener,async)}removeEventListener(eventType,userListener){var _a253;const listener=this.frameworkEventWrappingService.unwrap(userListener),asyncListeners=this.asyncEventListeners.get(eventType),hasAsync=!!(asyncListeners!=null&&asyncListeners.delete(listener));hasAsync||(_a253=this.syncEventListeners.get(eventType))==null||_a253.delete(listener),this.eventService.removeEventListener(eventType,listener,hasAsync)}addGlobalListener(userListener){const listener=this.frameworkEventWrappingService.wrapGlobal(userListener);if(_useAsyncEvents(this.gos)){const syncListener=__name((eventType,event)=>{ALWAYS_SYNC_GLOBAL_EVENTS.has(eventType)&&listener(eventType,event)},"syncListener"),asyncListener=__name((eventType,event)=>{ALWAYS_SYNC_GLOBAL_EVENTS.has(eventType)||listener(eventType,event)},"asyncListener");this.globalEventListenerPairs.set(userListener,{syncListener,asyncListener}),this.eventService.addGlobalListener(syncListener,!1),this.eventService.addGlobalListener(asyncListener,!0)}else this.syncGlobalEventListeners.add(listener),this.eventService.addGlobalListener(listener,!1)}removeGlobalListener(userListener){const listener=this.frameworkEventWrappingService.unwrapGlobal(userListener);if(this.globalEventListenerPairs.has(listener)){const{syncListener,asyncListener}=this.globalEventListenerPairs.get(listener);this.eventService.removeGlobalListener(syncListener,!1),this.eventService.removeGlobalListener(asyncListener,!0),this.globalEventListenerPairs.delete(userListener)}else this.syncGlobalEventListeners.delete(listener),this.eventService.removeGlobalListener(listener,!1)}destroyEventListeners(map,async){map.forEach((listeners,eventType)=>{listeners.forEach(listener=>this.eventService.removeEventListener(eventType,listener,async)),listeners.clear()}),map.clear()}destroyGlobalListeners(set,async){set.forEach(listener=>this.eventService.removeGlobalListener(listener,async)),set.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener,asyncListener})=>{this.eventService.removeGlobalListener(syncListener,!1),this.eventService.removeGlobalListener(asyncListener,!0)}),this.globalEventListenerPairs.clear()}},__name(_a214,"ApiEventService"),_a214),_a215,PageBoundsListener=(_a215=class extends BeanStub{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(beans){this.rowModel=beans.rowModel,this.paginationService=beans.paginationService,this.pageBoundsService=beans.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(modelUpdatedEvent){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:(modelUpdatedEvent==null?void 0:modelUpdatedEvent.animate)??!1,newData:(modelUpdatedEvent==null?void 0:modelUpdatedEvent.newData)??!1,newPage:(modelUpdatedEvent==null?void 0:modelUpdatedEvent.newPage)??!1,newPageSize:(modelUpdatedEvent==null?void 0:modelUpdatedEvent.newPageSize)??!1,keepRenderedRows:(modelUpdatedEvent==null?void 0:modelUpdatedEvent.keepRenderedRows)??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},__name(_a215,"PageBoundsListener"),_a215),_a216,PageBoundsService=(_a216=class extends BeanStub{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(beans){this.rowModel=beans.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return _missing(this.topRowBounds)||_missing(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const pageFirstPixel=this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel,pageLastPixel}}calculateBounds(topDisplayedRowIndex,bottomDisplayedRowIndex){this.topRowBounds=this.rowModel.getRowBounds(topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=bottomDisplayedRowIndex),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const value=_exists(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==value&&(this.pixelOffset=value,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},__name(_a216,"PageBoundsService"),_a216),_a217,AriaAnnouncementService=(_a217=class extends BeanStub{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=_debounce(this.updateAnnouncement.bind(this),200)}wireBeans(beans){this.eGridDiv=beans.eGridDiv}postConstruct(){const eDocument=_getDocument(this.gos),div=this.descriptionContainer=eDocument.createElement("div");div.classList.add("ag-aria-description-container"),_setAriaLive(div,"polite"),_setAriaRelevant(div,"additions text"),_setAriaAtomic(div,!0),this.eGridDiv.appendChild(div)}announceValue(value,key){this.pendingAnnouncements.set(key,value),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const value=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=value)},50)}destroy(){super.destroy();const{descriptionContainer}=this;descriptionContainer&&(_clearElement(descriptionContainer),descriptionContainer.parentElement&&descriptionContainer.parentElement.removeChild(descriptionContainer)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},__name(_a217,"AriaAnnouncementService"),_a217),_a218,ColumnAnimationService=(_a218=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(beans){this.ctrlsService=beans.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,p=>this.gridBodyCtrl=p.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(suppress){this.suppressAnimation=suppress}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(func){this.activeNext?this.executeNextFuncs.push(func):func()}executeLaterVMTurn(func){this.active?this.executeLaterFuncs.push(func):func()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const animationThreadCountCopy=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===animationThreadCountCopy&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(callbackNext,callbackLater){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){callbackNext(),callbackLater();return}const runFuncs=__name(queue=>{for(;queue.length;){const func=queue.pop();func&&func()}},"runFuncs");this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{callbackNext(),runFuncs(this.executeNextFuncs)},0),window.setTimeout(()=>{callbackLater(),runFuncs(this.executeLaterFuncs)},200)})}},__name(_a218,"ColumnAnimationService"),_a218),_a219,ColumnHoverService=(_a219=class extends BeanStub{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(columns){this.updateState(columns)}clearMouseOver(){this.updateState(null)}isHovered(column){return!!this.selectedColumns&&this.selectedColumns.indexOf(column)>=0}updateState(columns){this.selectedColumns=columns,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},__name(_a219,"ColumnHoverService"),_a219),_a220,OverlayService=(_a220=class extends BeanStub{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(beans){this.userComponentFactory=beans.userComponentFactory,this.rowModel=beans.rowModel,this.columnModel=beans.columnModel,this.ctrlsService=beans.ctrlsService}postConstruct(){this.isClientSide=_isClientSideRowModel(this.gos);const updateOverlayVisibility=__name(()=>this.updateOverlayVisibility(),"updateOverlayVisibility");this.addManagedEventListeners({newColumnsLoaded:updateOverlayVisibility,rowDataUpdated:updateOverlayVisibility,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:__name(()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()},"rowCountReady")}),this.addManagedPropertyListener("loading",updateOverlayVisibility)}setOverlayWrapperComp(overlayWrapperComp){this.overlayWrapperComp=overlayWrapperComp,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const loading=this.gos.get("loading");!loading&&(loading!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){_warnOnce("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let loading=this.gos.get("loading");this.showInitialOverlay&&loading===void 0&&!this.gos.get("suppressLoadingOverlay")&&(loading=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),loading?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(compDetails,wrapperCssClass,gridOption){var _a253;const promise=compDetails.newAgStackInstance();(_a253=this.overlayWrapperComp)==null||_a253.showOverlay(promise,wrapperCssClass,this.isExclusive(),gridOption),this.refreshWrapperPadding()}updateExclusive(){const wasExclusive=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==wasExclusive&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let newPadding=0;if(this.state===2){const headerCtrl=this.ctrlsService.get("gridHeaderCtrl");newPadding=(headerCtrl==null?void 0:headerCtrl.getHeaderHeight())||0}else this.wrapperPadding!==0&&(newPadding=0);this.wrapperPadding!==newPadding&&(this.wrapperPadding=newPadding,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(newPadding))}},__name(_a220,"OverlayService"),_a220),_a221,RowCssClassCalculator=(_a221=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(beans){this.stylingService=beans.stylingService}getInitialRowClasses(params){const classes=[];return _exists(params.extraCssClass)&&classes.push(params.extraCssClass),classes.push("ag-row"),classes.push(params.rowFocused?"ag-row-focus":"ag-row-no-focus"),params.fadeRowIn&&classes.push("ag-opacity-zero"),classes.push(params.rowIsEven?"ag-row-even":"ag-row-odd"),params.rowNode.isRowPinned()&&classes.push("ag-row-pinned"),params.rowNode.isSelected()&&classes.push("ag-row-selected"),params.rowNode.footer&&classes.push("ag-row-footer"),classes.push("ag-row-level-"+params.rowLevel),params.rowNode.stub&&classes.push("ag-row-loading"),params.fullWidthRow&&classes.push("ag-full-width-row"),params.expandable&&(classes.push("ag-row-group"),classes.push(params.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),params.rowNode.dragging&&classes.push("ag-row-dragging"),_pushAll(classes,this.processClassesFromGridOptions(params.rowNode)),_pushAll(classes,this.preProcessRowClassRules(params.rowNode)),classes.push(params.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),params.firstRowOnPage&&classes.push("ag-row-first"),params.lastRowOnPage&&classes.push("ag-row-last"),params.fullWidthRow&&(params.pinned==="left"&&classes.push("ag-cell-last-left-pinned"),params.pinned==="right"&&classes.push("ag-cell-first-right-pinned")),classes}processClassesFromGridOptions(rowNode){const res=[],process=__name(rowCls=>{typeof rowCls=="string"?res.push(rowCls):Array.isArray(rowCls)&&rowCls.forEach(e=>res.push(e))},"process"),rowClass=this.gos.get("rowClass");if(rowClass){if(typeof rowClass=="function")return _warnOnce("rowClass should not be a function, please use getRowClass instead"),[];process(rowClass)}const rowClassFunc=this.gos.getCallback("getRowClass");if(rowClassFunc){const params={data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex},rowClassFuncResult=rowClassFunc(params);process(rowClassFuncResult)}return res}preProcessRowClassRules(rowNode){const res=[];return this.processRowClassRules(rowNode,className=>{res.push(className)},()=>{}),res}processRowClassRules(rowNode,onApplicableClass,onNotApplicableClass){const rowClassParams=this.gos.addGridCommonParams({data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),rowClassParams,onApplicableClass,onNotApplicableClass)}calculateRowLevel(rowNode){return rowNode.group?rowNode.level:rowNode.parent?rowNode.parent.level+1:0}},__name(_a221,"RowCssClassCalculator"),_a221),_a222,RowContainerHeightService=(_a222=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(beans){this.ctrlsService=beans.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=_getMaxDivHeight(),this.gos.get("debug")&&_log("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const newScrollY=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,newBodyHeight=this.getUiBodyHeight();(newScrollY!==this.scrollY||newBodyHeight!==this.uiBodyHeight)&&(this.scrollY=newScrollY,this.uiBodyHeight=newBodyHeight,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const scrollPercent=this.scrollY/this.maxScrollY,divStretchOffset=scrollPercent*this.pixelsToShave;this.gos.get("debug")&&_log(`RowContainerHeightService - Div Stretch Offset = ${divStretchOffset} (${this.pixelsToShave} * ${scrollPercent})`),this.setDivStretchOffset(divStretchOffset)}setUiContainerHeight(height){height!==this.uiContainerHeight&&(this.uiContainerHeight=height,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(newOffset){const newOffsetFloor=typeof newOffset=="number"?Math.floor(newOffset):null;this.divStretchOffset!==newOffsetFloor&&(this.divStretchOffset=newOffsetFloor,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(modelHeight){this.modelHeight=modelHeight,this.stretching=modelHeight!=null&&this.maxDivHeight>0&&modelHeight>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(modelPixel){return modelPixel-this.divStretchOffset}getUiBodyHeight(){const pos=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return pos.bottom-pos.top}getScrollPositionForPixel(rowTop){if(this.pixelsToShave<=0)return rowTop;const modelMaxScroll=this.modelHeight-this.getUiBodyHeight(),scrollPercent=rowTop/modelMaxScroll;return this.maxScrollY*scrollPercent}},__name(_a222,"RowContainerHeightService"),_a222),_a223,RowNodeSorter=(_a223=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(beans){this.valueService=beans.valueService,this.columnModel=beans.columnModel,this.showRowGroupColsService=beans.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=_isColumnsSortingCoupledToGroup(this.gos),this.addManagedPropertyListener("accentedSort",propChange=>this.isAccentedSort=propChange.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=_isColumnsSortingCoupledToGroup(this.gos))}doFullSort(rowNodes,sortOptions){const mapper=__name((rowNode,pos)=>({currentPos:pos,rowNode}),"mapper"),sortedRowNodes=rowNodes.map(mapper);return sortedRowNodes.sort(this.compareRowNodes.bind(this,sortOptions)),sortedRowNodes.map(item=>item.rowNode)}compareRowNodes(sortOptions,sortedNodeA,sortedNodeB){const nodeA=sortedNodeA.rowNode,nodeB=sortedNodeB.rowNode;for(let i=0,len=sortOptions.length;i<len;i++){const sortOption=sortOptions[i],isDescending=sortOption.sort==="desc",valueA=this.getValue(nodeA,sortOption.column),valueB=this.getValue(nodeB,sortOption.column);let comparatorResult;const providedComparator=this.getComparator(sortOption,nodeA);if(providedComparator?comparatorResult=providedComparator(valueA,valueB,nodeA,nodeB,isDescending):comparatorResult=_defaultComparator(valueA,valueB,this.isAccentedSort),!isNaN(comparatorResult)&&comparatorResult!==0)return sortOption.sort==="asc"?comparatorResult:comparatorResult*-1}return sortedNodeA.currentPos-sortedNodeB.currentPos}getComparator(sortOption,rowNode){const column=sortOption.column,comparatorOnCol=column.getColDef().comparator;if(comparatorOnCol!=null)return comparatorOnCol;if(!column.getColDef().showRowGroup)return;const groupLeafField=!rowNode.group&&column.getColDef().field;if(!groupLeafField)return;const primaryColumn=this.columnModel.getColDefCol(groupLeafField);if(primaryColumn)return primaryColumn.getColDef().comparator}getValue(node,column){var _a253,_b,_c;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(column,node,!1,!1);if(node.rowGroupColumn===column){if(_isGroupUseEntireRow(this.gos,this.columnModel.isPivotActive())){const leafChild=(_a253=node.allLeafChildren)==null?void 0:_a253[0];return leafChild?this.valueService.getValue(column,leafChild,!1,!1):void 0}const displayCol=(_b=this.showRowGroupColsService)==null?void 0:_b.getShowRowGroupCol(column.getId());return displayCol?(_c=node.groupData)==null?void 0:_c[displayCol.getId()]:void 0}if(!(node.group&&column.getColDef().showRowGroup))return this.valueService.getValue(column,node,!1,!1)}},__name(_a223,"RowNodeSorter"),_a223),_a224,ChangedPath=(_a224=class{constructor(keepingColumns,rootNode){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=keepingColumns,this.pathRoot={rowNode:rootNode,children:null},this.mapToItems[rootNode.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(pathItem,callback){if(pathItem.children)for(let i=0;i<pathItem.children.length;i++)this.depthFirstSearchChangedPath(pathItem.children[i],callback);callback(pathItem.rowNode)}depthFirstSearchEverything(rowNode,callback,traverseEverything){if(rowNode.childrenAfterGroup)for(let i=0;i<rowNode.childrenAfterGroup.length;i++){const childNode=rowNode.childrenAfterGroup[i];childNode.childrenAfterGroup?this.depthFirstSearchEverything(rowNode.childrenAfterGroup[i],callback,traverseEverything):traverseEverything&&callback(childNode)}callback(rowNode)}forEachChangedNodeDepthFirst(callback,traverseLeafNodes=!1,includeUnchangedNodes=!1){this.active&&!includeUnchangedNodes?this.depthFirstSearchChangedPath(this.pathRoot,callback):this.depthFirstSearchEverything(this.pathRoot.rowNode,callback,traverseLeafNodes)}executeFromRootNode(callback){callback(this.pathRoot.rowNode)}createPathItems(rowNode){let pointer=rowNode,newEntryCount=0;for(;!this.mapToItems[pointer.id];){const newEntry={rowNode:pointer,children:null};this.mapToItems[pointer.id]=newEntry,newEntryCount++,pointer=pointer.parent}return newEntryCount}populateColumnsMap(rowNode,columns){if(!this.keepingColumns||!columns)return;let pointer=rowNode;for(;pointer;)this.nodeIdsToColumns[pointer.id]||(this.nodeIdsToColumns[pointer.id]={}),columns.forEach(col=>this.nodeIdsToColumns[pointer.id][col.getId()]=!0),pointer=pointer.parent}linkPathItems(rowNode,newEntryCount){let pointer=rowNode;for(let i=0;i<newEntryCount;i++){const thisItem=this.mapToItems[pointer.id],parentItem=this.mapToItems[pointer.parent.id];parentItem.children||(parentItem.children=[]),parentItem.children.push(thisItem),pointer=pointer.parent}}addParentNode(rowNode,columns){if(!rowNode||rowNode.isRowPinned())return;const newEntryCount=this.createPathItems(rowNode);this.linkPathItems(rowNode,newEntryCount),this.populateColumnsMap(rowNode,columns)}canSkip(rowNode){return this.active&&!this.mapToItems[rowNode.id]}getValueColumnsForNode(rowNode,valueColumns){if(!this.keepingColumns)return valueColumns;const colsForThisNode=this.nodeIdsToColumns[rowNode.id];return valueColumns.filter(col=>colsForThisNode[col.getId()])}getNotValueColumnsForNode(rowNode,valueColumns){if(!this.keepingColumns)return null;const colsForThisNode=this.nodeIdsToColumns[rowNode.id];return valueColumns.filter(col=>!colsForThisNode[col.getId()])}},__name(_a224,"ChangedPath"),_a224),_a225,SelectionService=(_a225=class extends BeanStub{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new RowRangeSelectionContext,this.rowSelectionMode=void 0}wireBeans(beans){this.rowModel=beans.rowModel,this.pageBoundsService=beans.pageBoundsService}postConstruct(){const{gos,rowModel,onRowSelected}=this;this.selectionCtx.init(rowModel),this.rowSelectionMode=_getRowSelectionMode(gos),this.groupSelectsChildren=_getGroupSelectsDescendants(gos),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{const groupSelectsChildren=_getGroupSelectsDescendants(gos),selectionMode=_getRowSelectionMode(gos);(groupSelectsChildren!==this.groupSelectsChildren||selectionMode!==this.rowSelectionMode)&&(this.groupSelectsChildren=groupSelectsChildren,this.rowSelectionMode=selectionMode,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(newValue,source){if(!isSelectionUIEvent(source))return newValue;const root=this.selectionCtx.getRoot();return root?root.isSelected()??!1:!0}setNodesSelected(params){var _a253;const{newValue,clearSelection,suppressFinishActions,rangeSelect,nodes,event,source}=params;if(nodes.length===0)return 0;if(nodes.length>1&&!this.isMultiSelect())return _warnOnce("cannot multi select unless selection mode is 'multiRow'"),0;const groupSelectsFiltered=this.groupSelectsChildren&&params.groupSelectsFiltered===!0,filteredNodes=nodes.map(node=>node.footer?node.sibling:node);if(rangeSelect){if(filteredNodes.length>1)return _warnOnce("cannot range select while selecting multiple rows"),0;const node=filteredNodes[0],newSelectionValue=this.overrideSelectionValue(newValue,source);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(node)){const partition=this.selectionCtx.truncate(node);return newSelectionValue&&this.selectRange(partition.discard,!1,source),this.selectRange(partition.keep,newSelectionValue,source)}else if(this.selectionCtx.getRoot()!==node){const partition=this.selectionCtx.extend(node,this.groupSelectsChildren);return newSelectionValue&&this.selectRange(partition.discard,!1,source),this.selectRange(partition.keep,newSelectionValue,source)}}}suppressFinishActions||this.selectionCtx.setRoot(filteredNodes[0]);let updatedCount=0;for(let i=0;i<filteredNodes.length;i++){const node=filteredNodes[i];groupSelectsFiltered&&node.group||node.selectThisNode(newValue,event,source)&&updatedCount++,this.groupSelectsChildren&&((_a253=node.childrenAfterGroup)!=null&&_a253.length)&&(updatedCount+=this.selectChildren(node,newValue,groupSelectsFiltered,source))}return suppressFinishActions||(newValue&&(clearSelection||!this.isMultiSelect())&&(updatedCount+=this.clearOtherNodes(filteredNodes[0],source)),updatedCount>0&&(this.updateGroupsFromChildrenSelections(source),this.dispatchSelectionChanged(source))),updatedCount}selectRange(nodesToSelect,value,source){let updatedCount=0;return nodesToSelect.forEach(rowNode=>{if(rowNode.group&&this.groupSelectsChildren)return;rowNode.selectThisNode(value,void 0,source)&&updatedCount++}),updatedCount>0&&(this.updateGroupsFromChildrenSelections(source),this.dispatchSelectionChanged(source)),updatedCount}selectChildren(node,newValue,groupSelectsFiltered,source){const children=groupSelectsFiltered?node.childrenAfterAggFilter:node.childrenAfterGroup;return _missing(children)?0:this.setNodesSelected({newValue,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered,source,nodes:children})}getSelectedNodes(){const selectedNodes=[];return this.selectedNodes.forEach(rowNode=>{rowNode&&selectedNodes.push(rowNode)}),selectedNodes}getSelectedRows(){const selectedRows=[];return this.selectedNodes.forEach(rowNode=>{rowNode&&rowNode.data&&selectedRows.push(rowNode.data)}),selectedRows}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(predicate){const newSelectedNodes=new Map;this.selectedNodes.forEach((rowNode,key)=>{rowNode&&predicate(rowNode)&&newSelectedNodes.set(key,rowNode)}),this.selectedNodes=newSelectedNodes}updateGroupsFromChildrenSelections(source,changedPath){if(!this.groupSelectsChildren||!_isClientSideRowModel(this.gos))return!1;const rootNode=this.rowModel.getRootNode();changedPath||(changedPath=new ChangedPath(!0,rootNode),changedPath.setInactive());let selectionChanged=!1;return changedPath.forEachChangedNodeDepthFirst(rowNode=>{if(rowNode!==rootNode){const selected=rowNode.calculateSelectedFromChildren();selectionChanged=rowNode.selectThisNode(selected===null?!1:selected,void 0,source)||selectionChanged}}),selectionChanged}clearOtherNodes(rowNodeToKeepSelected,source){const groupsToRefresh=new Map;let updatedCount=0;return this.selectedNodes.forEach(otherRowNode=>{if(otherRowNode&&otherRowNode.id!==rowNodeToKeepSelected.id){const rowNode=this.selectedNodes.get(otherRowNode.id);updatedCount+=rowNode.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source}),this.groupSelectsChildren&&otherRowNode.parent&&groupsToRefresh.set(otherRowNode.parent.id,otherRowNode.parent)}}),groupsToRefresh.forEach(group=>{const selected=group.calculateSelectedFromChildren();group.selectThisNode(selected===null?!1:selected,void 0,source)}),updatedCount}onRowSelected(event){const rowNode=event.node;this.groupSelectsChildren&&rowNode.group||(rowNode.isSelected()?this.selectedNodes.set(rowNode.id,rowNode):this.selectedNodes.delete(rowNode.id))}syncInRowNode(rowNode,oldNode){this.syncInOldRowNode(rowNode,oldNode),this.syncInNewRowNode(rowNode)}syncInOldRowNode(rowNode,oldNode){if(_exists(oldNode)&&rowNode.id!==oldNode.id&&oldNode){const id=oldNode.id;this.selectedNodes.get(id)==rowNode&&this.selectedNodes.set(oldNode.id,oldNode)}}syncInNewRowNode(rowNode){this.selectedNodes.has(rowNode.id)?(rowNode.setSelectedInitialValue(!0),this.selectedNodes.set(rowNode.id,rowNode)):rowNode.setSelectedInitialValue(!1)}reset(source){const selectionCount=this.getSelectionCount();this.resetNodes(),selectionCount&&this.dispatchSelectionChanged(source)}resetNodes(){var _a253;(_a253=this.selectedNodes)==null||_a253.clear()}getBestCostNodeSelection(){if(!_isClientSideRowModel(this.gos))return;const topLevelNodes=this.rowModel.getTopLevelNodes();if(topLevelNodes===null)return;const result=[];function traverse(nodes){for(let i=0,l=nodes.length;i<l;i++){const node=nodes[i];if(node.isSelected())result.push(node);else{const maybeGroup=node;maybeGroup.group&&maybeGroup.children&&traverse(maybeGroup.children)}}}return __name(traverse,"traverse"),traverse(topLevelNodes),result}isEmpty(){let count=0;return this.selectedNodes.forEach(rowNode=>{rowNode&&count++}),count===0}deselectAllRowNodes(params){const callback=__name(rowNode=>rowNode.selectThisNode(!1,void 0,source),"callback"),rowModelClientSide=_isClientSideRowModel(this.gos),{source,justFiltered,justCurrentPage}=params;if(justCurrentPage||justFiltered){if(!rowModelClientSide){_errorOnce("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(justFiltered,justCurrentPage).forEach(callback)}else this.selectedNodes.forEach(rowNode=>{rowNode&&callback(rowNode)}),this.reset(source);this.selectionCtx.reset(),rowModelClientSide&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(source),this.dispatchSelectionChanged(source)}getSelectedCounts(justFiltered,justCurrentPage){let selectedCount=0,notSelectedCount=0;const callback=__name(node=>{this.groupSelectsChildren&&node.group||(node.isSelected()?selectedCount++:node.selectable&&notSelectedCount++)},"callback");return this.getNodesToSelect(justFiltered,justCurrentPage).forEach(callback),{selectedCount,notSelectedCount}}getSelectAllState(justFiltered,justCurrentPage){const{selectedCount,notSelectedCount}=this.getSelectedCounts(justFiltered,justCurrentPage);return selectedCount===0&&notSelectedCount===0?!1:selectedCount>0&&notSelectedCount>0?null:selectedCount>0}hasNodesToSelect(justFiltered=!1,justCurrentPage=!1){return this.getNodesToSelect(justFiltered,justCurrentPage).filter(node=>node.selectable).length>0}getNodesToSelect(justFiltered=!1,justCurrentPage=!1){this.validateSelectAllType();const nodes=[];if(justCurrentPage)return this.forEachNodeOnPage(node=>{if(!node.group){nodes.push(node);return}if(!node.expanded){const recursivelyAddChildren=__name(child=>{var _a253;nodes.push(child),(_a253=child.childrenAfterFilter)!=null&&_a253.length&&child.childrenAfterFilter.forEach(recursivelyAddChildren)},"recursivelyAddChildren");recursivelyAddChildren(node);return}this.groupSelectsChildren||nodes.push(node)}),nodes;const clientSideRowModel=this.rowModel;return justFiltered?(clientSideRowModel.forEachNodeAfterFilter(node=>{nodes.push(node)}),nodes):(clientSideRowModel.forEachNode(node=>{nodes.push(node)}),nodes)}forEachNodeOnPage(callback){const firstRow=this.pageBoundsService.getFirstRow(),lastRow=this.pageBoundsService.getLastRow();for(let i=firstRow;i<=lastRow;i++){const node=this.rowModel.getRow(i);node&&callback(node)}}selectAllRowNodes(params){if(_isUsingNewRowSelectionAPI(this.gos)&&!_isMultiRowSelection(this.gos))return _warnOnce("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source,justFiltered,justCurrentPage}=params,nodes=this.getNodesToSelect(justFiltered,justCurrentPage);nodes.forEach(rowNode=>rowNode.selectThisNode(!0,void 0,source)),this.selectionCtx.setRoot(nodes[0]??null),this.selectionCtx.setEndRange(_last(nodes)??null),_isClientSideRowModel(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(source),this.dispatchSelectionChanged(source)}getSelectionState(){const selectedIds=[];return this.selectedNodes.forEach(node=>{node!=null&&node.id&&selectedIds.push(node.id)}),selectedIds.length?selectedIds:null}setSelectionState(state,source){if(!Array.isArray(state))return _errorOnce("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const rowIds=new Set(state),nodes=[];this.rowModel.forEachNode(node=>{rowIds.has(node.id)&&nodes.push(node)}),this.setNodesSelected({newValue:!0,nodes,source})}dispatchSelectionChanged(source){this.eventService.dispatchEvent({type:"selectionChanged",source})}validateSelectAllType(){if(!_isClientSideRowModel(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},__name(_a225,"SelectionService"),_a225),_a226,SelectableService=(_a226=class extends BeanStub{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(beans){this.rowModel=beans.rowModel,this.selectionService=beans.selectionService}postConstruct(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(skipLeafNodes=!1){const{gos}=this,isRowSelecting=_isRowSelection(gos),isRowSelectable=_getIsRowSelectable(gos);if(!isRowSelecting||!isRowSelectable)return;const isGroupSelectsChildren=_getGroupSelectsDescendants(gos),isCsrmGroupSelectsChildren=_isClientSideRowModel(gos)&&isGroupSelectsChildren,nodesToDeselect=[],nodeCallback=__name(node=>{if(skipLeafNodes&&!node.group)return;if(isCsrmGroupSelectsChildren&&node.group){const hasSelectableChild=node.childrenAfterGroup.some(rowNode=>rowNode.selectable===!0);node.setRowSelectable(hasSelectableChild,!0);return}const rowSelectable=(isRowSelectable==null?void 0:isRowSelectable(node))??!0;node.setRowSelectable(rowSelectable,!0),!rowSelectable&&node.isSelected()&&nodesToDeselect.push(node)},"nodeCallback");if(isCsrmGroupSelectsChildren){const csrm=this.rowModel;new ChangedPath(!1,csrm.getRootNode()).forEachChangedNodeDepthFirst(nodeCallback,!0,!0)}else this.rowModel.forEachNode(nodeCallback);nodesToDeselect.length&&this.selectionService.setNodesSelected({nodes:nodesToDeselect,newValue:!1,source:"selectableChanged"}),isCsrmGroupSelectsChildren&&this.selectionService instanceof SelectionService&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},__name(_a226,"SelectableService"),_a226),DEFAULT_SORTING_ORDER=["asc","desc",null],_a227,SortController=(_a227=class extends BeanStub{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(beans){this.columnModel=beans.columnModel,this.funcColsService=beans.funcColsService,this.showRowGroupColsService=beans.showRowGroupColsService}progressSort(column,multiSort,source){const nextDirection=this.getNextSortDirection(column);this.setSortForColumn(column,nextDirection,multiSort,source)}setSortForColumn(column,sort,multiSort,source){sort!=="asc"&&sort!=="desc"&&(sort=null);const isColumnsSortingCoupledToGroup=_isColumnsSortingCoupledToGroup(this.gos);let columnsToUpdate=[column];if(isColumnsSortingCoupledToGroup&&column.getColDef().showRowGroup){const rowGroupColumns=this.funcColsService.getSourceColumnsForGroupColumn(column),sortableRowGroupColumns=rowGroupColumns==null?void 0:rowGroupColumns.filter(col=>col.isSortable());sortableRowGroupColumns&&(columnsToUpdate=[column,...sortableRowGroupColumns])}columnsToUpdate.forEach(col=>col.setSort(sort,source));const doingMultiSort=(multiSort||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),updatedColumns=[];if(!doingMultiSort){const clearedColumns=this.clearSortBarTheseColumns(columnsToUpdate,source);updatedColumns.push(...clearedColumns)}this.updateSortIndex(column),updatedColumns.push(...columnsToUpdate),this.dispatchSortChangedEvents(source,updatedColumns)}updateSortIndex(lastColToChange){var _a253;const isCoupled=_isColumnsSortingCoupledToGroup(this.gos),groupParent=(_a253=this.showRowGroupColsService)==null?void 0:_a253.getShowRowGroupCol(lastColToChange.getId()),lastSortIndexCol=isCoupled&&groupParent||lastColToChange,allSortedCols=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(col=>col.setSortIndex(null));const allSortedColsWithoutChangesOrGroups=allSortedCols.filter(col=>isCoupled&&col.getColDef().showRowGroup?!1:col!==lastSortIndexCol);(lastSortIndexCol.getSort()?[...allSortedColsWithoutChangesOrGroups,lastSortIndexCol]:allSortedColsWithoutChangesOrGroups).forEach((col,idx)=>{col.setSortIndex(idx)})}onSortChanged(source,columns){this.dispatchSortChangedEvents(source,columns)}isSortActive(){const sortedCols=this.columnModel.getAllCols().filter(column=>!!column.getSort());return sortedCols&&sortedCols.length>0}dispatchSortChangedEvents(source,columns){const event={type:"sortChanged",source};columns&&(event.columns=columns),this.eventService.dispatchEvent(event)}clearSortBarTheseColumns(columnsToSkip,source){const clearedColumns=[];return this.columnModel.getAllCols().forEach(columnToClear=>{columnsToSkip.includes(columnToClear)||(columnToClear.getSort()&&clearedColumns.push(columnToClear),columnToClear.setSort(void 0,source))}),clearedColumns}getNextSortDirection(column){let sortingOrder;if(column.getColDef().sortingOrder?sortingOrder=column.getColDef().sortingOrder:this.gos.get("sortingOrder")?sortingOrder=this.gos.get("sortingOrder"):sortingOrder=DEFAULT_SORTING_ORDER,!Array.isArray(sortingOrder)||sortingOrder.length<=0)return _warnOnce(`sortingOrder must be an array with at least one element, currently it's ${sortingOrder}`),null;const currentIndex=sortingOrder.indexOf(column.getSort()),notInArray=currentIndex<0,lastItemInArray=currentIndex==sortingOrder.length-1;let result;return notInArray||lastItemInArray?result=sortingOrder[0]:result=sortingOrder[currentIndex+1],DEFAULT_SORTING_ORDER.indexOf(result)<0?(_warnOnce("invalid sort type ",result),null):result}getIndexedSortMap(){let allSortedCols=this.columnModel.getAllCols().filter(col=>!!col.getSort());if(this.columnModel.isPivotMode()){const isSortingLinked=_isColumnsSortingCoupledToGroup(this.gos);allSortedCols=allSortedCols.filter(col=>{var _a253;const isAggregated=!!col.getAggFunc(),isSecondary=!col.isPrimary(),isGroup=isSortingLinked?(_a253=this.showRowGroupColsService)==null?void 0:_a253.getShowRowGroupCol(col.getId()):col.getColDef().showRowGroup;return isAggregated||isSecondary||isGroup})}const sortedRowGroupCols=this.funcColsService.getRowGroupColumns().filter(col=>!!col.getSort()),allColsIndexes={};allSortedCols.forEach((col,index)=>allColsIndexes[col.getId()]=index),allSortedCols.sort((a,b)=>{const iA=a.getSortIndex(),iB=b.getSortIndex();if(iA!=null&&iB!=null)return iA-iB;if(iA==null&&iB==null){const posA=allColsIndexes[a.getId()],posB=allColsIndexes[b.getId()];return posA>posB?1:-1}else return iB==null?-1:1});const isSortLinked=_isColumnsSortingCoupledToGroup(this.gos)&&!!sortedRowGroupCols.length;isSortLinked&&(allSortedCols=[...new Set(allSortedCols.map(col=>{var _a253;return((_a253=this.showRowGroupColsService)==null?void 0:_a253.getShowRowGroupCol(col.getId()))??col}))]);const indexMap=new Map;return allSortedCols.forEach((col,idx)=>indexMap.set(col,idx)),isSortLinked&&sortedRowGroupCols.forEach(col=>{const groupDisplayCol=this.showRowGroupColsService.getShowRowGroupCol(col.getId());indexMap.set(col,indexMap.get(groupDisplayCol))}),indexMap}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([col1,idx1],[col2,idx2])=>idx1-idx2).map(([col])=>col)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(column=>column.getSort()).map(column=>({sort:column.getSort(),colId:column.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(column=>column.getSort()).map(column=>({sort:column.getSort(),column}))}canColumnDisplayMixedSort(column){const isColumnSortCouplingActive=_isColumnsSortingCoupledToGroup(this.gos),isGroupDisplayColumn=!!column.getColDef().showRowGroup;return isColumnSortCouplingActive&&isGroupDisplayColumn}getDisplaySortForColumn(column){const linkedColumns=this.funcColsService.getSourceColumnsForGroupColumn(column);if(!this.canColumnDisplayMixedSort(column)||!(linkedColumns!=null&&linkedColumns.length))return column.getSort();const sortableColumns=column.getColDef().field!=null||!!column.getColDef().valueGetter?[column,...linkedColumns]:linkedColumns,firstSort=sortableColumns[0].getSort();return sortableColumns.every(col=>col.getSort()==firstSort)?firstSort:"mixed"}getDisplaySortIndexForColumn(column){return this.getIndexedSortMap().get(column)}},__name(_a227,"SortController"),_a227),_a228,SyncService=(_a228=class extends BeanStub{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(beans){this.ctrlsService=beans.ctrlsService,this.columnModel=beans.columnModel,this.rowModel=beans.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",event=>this.setColumnDefs(event))}start(){this.ctrlsService.whenReady(this,()=>{const columnDefs=this.gos.get("columnDefs");columnDefs?this.setColumnsAndData(columnDefs):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(columnDefs){this.columnModel.setColumnDefs(columnDefs??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const isEnterprise=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&_log(`initialised successfully, enterprise = ${isEnterprise}`)}setColumnDefs(event){const columnDefs=this.gos.get("columnDefs");if(columnDefs){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(columnDefs);return}this.columnModel.setColumnDefs(columnDefs,convertSourceType(event.source))}}},__name(_a228,"SyncService"),_a228),SOURCE_PASTE="paste",_a229,ChangeDetectionService=(_a229=class extends BeanStub{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(beans){this.rowModel=beans.rowModel,this.rowRenderer=beans.rowRenderer}postConstruct(){_isClientSideRowModel(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(event){event.source!==SOURCE_PASTE&&this.doChangeDetection(event.node,event.column)}doChangeDetection(rowNode,column){if(this.gos.get("suppressChangeDetection"))return;const nodesToRefresh=[rowNode];if(this.clientSideRowModel&&!rowNode.isRowPinned()){const onlyChangedColumns=this.gos.get("aggregateOnlyChangedColumns"),changedPath=new ChangedPath(onlyChangedColumns,this.clientSideRowModel.getRootNode());changedPath.addParentNode(rowNode.parent,[column]),this.clientSideRowModel.doAggregate(changedPath),changedPath.forEachChangedNodeDepthFirst(rowNode2=>{nodesToRefresh.push(rowNode2)})}this.rowRenderer.refreshCells({rowNodes:nodesToRefresh})}},__name(_a229,"ChangeDetectionService"),_a229),_a230,ExpressionService=(_a230=class extends BeanStub{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(expression,params){if(typeof expression=="string")return this.evaluateExpression(expression,params);_errorOnce("value should be either a string or a function",expression)}evaluateExpression(expression,params){try{return this.createExpressionFunction(expression)(params.value,params.context,params.oldValue,params.newValue,params.value,params.node,params.data,params.colDef,params.rowIndex,params.api,params.getValue,params.column,params.columnGroup)}catch(e){return _log("Processing of the expression failed"),_log("Expression = ",expression),_log("Params = ",params),_log("Exception = ",e),null}}createExpressionFunction(expression){if(this.expressionToFunctionCache[expression])return this.expressionToFunctionCache[expression];const functionBody=this.createFunctionBody(expression),theFunction=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",functionBody);return this.expressionToFunctionCache[expression]=theFunction,theFunction}createFunctionBody(expression){return expression.indexOf("return")>=0?expression:"return "+expression+";"}},__name(_a230,"ExpressionService"),_a230),_a231,ValueCache=(_a231=class extends BeanStub{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(rowNode,colId,value){this.active&&(rowNode.__cacheVersion!==this.cacheVersion&&(rowNode.__cacheVersion=this.cacheVersion,rowNode.__cacheData={}),rowNode.__cacheData[colId]=value)}getValue(rowNode,colId){if(!(!this.active||rowNode.__cacheVersion!==this.cacheVersion))return rowNode.__cacheData[colId]}},__name(_a231,"ValueCache"),_a231),_a232,ValueService=(_a232=class extends BeanStub{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(beans){this.expressionService=beans.expressionService,this.columnModel=beans.columnModel,this.valueCache=beans.valueCache,this.dataTypeService=beans.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=_isServerSideRowModel(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const listener=__name(event=>this.callColumnCellValueChangedHandler(event),"listener"),async=_useAsyncEvents(this.gos);this.eventService.addEventListener("cellValueChanged",listener,async),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",listener,async)),this.addManagedPropertyListener("treeData",propChange=>this.isTreeData=propChange.currentValue)}getValueForDisplay(column,node){const lockedClosedGroup=node.leafGroup&&this.columnModel.isPivotMode(),isOpenGroup=node.group&&node.expanded&&!node.footer&&!lockedClosedGroup,groupAlwaysShowAggData=this.gos.get("groupSuppressBlankHeader");if(!isOpenGroup||groupAlwaysShowAggData)return this.getValue(column,node);let includeFooter=!1;const groupIncludeFooterOpt=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof groupIncludeFooterOpt!="function"?includeFooter=!!groupIncludeFooterOpt:includeFooter=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});const ignoreAggData=isOpenGroup&&includeFooter;return this.getValue(column,node,!1,ignoreAggData)}getValue(column,rowNode,forFilter=!1,ignoreAggData=!1){if(this.initialised||this.init(),!rowNode)return;const colDef=column.getColDef(),field=colDef.field,colId=column.getColId(),data=rowNode.data;let result;const groupDataExists=rowNode.groupData&&rowNode.groupData[colId]!==void 0,aggDataExists=!ignoreAggData&&rowNode.aggData&&rowNode.aggData[colId]!==void 0,ignoreSsrmAggData=this.isSsrm&&ignoreAggData&&!!column.getColDef().aggFunc,ssrmFooterGroupCol=this.isSsrm&&rowNode.footer&&rowNode.field&&(column.getColDef().showRowGroup===!0||column.getColDef().showRowGroup===rowNode.field);if(forFilter&&colDef.filterValueGetter?result=this.executeFilterValueGetter(colDef.filterValueGetter,data,column,rowNode):this.isTreeData&&aggDataExists?result=rowNode.aggData[colId]:this.isTreeData&&colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):this.isTreeData&&field&&data?result=_getValueUsingField(data,field,column.isFieldContainsDots()):groupDataExists?result=rowNode.groupData[colId]:aggDataExists?result=rowNode.aggData[colId]:colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):ssrmFooterGroupCol?result=_getValueUsingField(data,rowNode.field,column.isFieldContainsDots()):field&&data&&!ignoreSsrmAggData&&(result=_getValueUsingField(data,field,column.isFieldContainsDots())),this.cellExpressions&&typeof result=="string"&&result.indexOf("=")===0){const cellValueGetter=result.substring(1);result=this.executeValueGetter(cellValueGetter,data,column,rowNode)}if(result==null){const openedGroup=this.getOpenedGroup(rowNode,column);if(openedGroup!=null)return openedGroup}return result}parseValue(column,rowNode,newValue,oldValue){const colDef=column.getColDef(),valueParser=colDef.valueParser;if(_exists(valueParser)){const params=this.gos.addGridCommonParams({node:rowNode,data:rowNode==null?void 0:rowNode.data,oldValue,newValue,colDef,column});return typeof valueParser=="function"?valueParser(params):this.expressionService.evaluate(valueParser,params)}return newValue}getDeleteValue(column,rowNode){return _exists(column.getColDef().valueParser)?this.parseValue(column,rowNode,"",this.getValueForDisplay(column,rowNode))??null:null}formatValue(column,node,value,suppliedFormatter,useFormatterFromColumn=!0){let result=null,formatter;const colDef=column.getColDef();if(suppliedFormatter?formatter=suppliedFormatter:useFormatterFromColumn&&(formatter=colDef.valueFormatter),formatter){const params=this.gos.addGridCommonParams({value,node,data:node?node.data:null,colDef,column});typeof formatter=="function"?result=formatter(params):result=this.expressionService.evaluate(formatter,params)}else if(colDef.refData)return colDef.refData[value]||"";return result==null&&Array.isArray(value)&&(result=value.join(", ")),result}getOpenedGroup(rowNode,column){if(!this.gos.get("showOpenedGroup")||!column.getColDef().showRowGroup)return;const showRowGroup=column.getColDef().showRowGroup;let pointer=rowNode.parent;for(;pointer!=null;){if(pointer.rowGroupColumn&&(showRowGroup===!0||showRowGroup===pointer.rowGroupColumn.getColId()))return pointer.key;pointer=pointer.parent}}setValue(rowNode,colKey,newValue,eventSource){const column=this.columnModel.getColDefCol(colKey);if(!rowNode||!column)return!1;_missing(rowNode.data)&&(rowNode.data={});const{field,valueSetter}=column.getColDef();if(_missing(field)&&_missing(valueSetter))return _warnOnce("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(column,newValue))return _warnOnce("Data type of the new value does not match the cell data type of the column"),!1;const params=this.gos.addGridCommonParams({node:rowNode,data:rowNode.data,oldValue:this.getValue(column,rowNode),newValue,colDef:column.getColDef(),column});params.newValue=newValue;let valueWasDifferent;if(_exists(valueSetter)?typeof valueSetter=="function"?valueWasDifferent=valueSetter(params):valueWasDifferent=this.expressionService.evaluate(valueSetter,params):valueWasDifferent=this.setValueUsingField(rowNode.data,field,newValue,column.isFieldContainsDots()),valueWasDifferent===void 0&&(valueWasDifferent=!0),!valueWasDifferent)return!1;rowNode.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const savedValue=this.getValue(column,rowNode);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:rowNode.rowIndex,rowPinned:rowNode.rowPinned,column:params.column,colDef:params.colDef,data:rowNode.data,node:rowNode,oldValue:params.oldValue,newValue:savedValue,value:savedValue,source:eventSource}),!0}callColumnCellValueChangedHandler(event){const onCellValueChanged=event.colDef.onCellValueChanged;typeof onCellValueChanged=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{onCellValueChanged({node:event.node,data:event.data,oldValue:event.oldValue,newValue:event.newValue,colDef:event.colDef,column:event.column,api:event.api,context:event.context})})}setValueUsingField(data,field,newValue,isFieldContainsDots){if(!field)return!1;let valuesAreSame=!1;if(!isFieldContainsDots)valuesAreSame=data[field]===newValue,valuesAreSame||(data[field]=newValue);else{const fieldPieces=field.split(".");let currentObject=data;for(;fieldPieces.length>0&&currentObject;){const fieldPiece=fieldPieces.shift();fieldPieces.length===0?(valuesAreSame=currentObject[fieldPiece]===newValue,valuesAreSame||(currentObject[fieldPiece]=newValue)):currentObject=currentObject[fieldPiece]}}return!valuesAreSame}executeFilterValueGetter(valueGetter,data,column,rowNode){const params=this.gos.addGridCommonParams({data,node:rowNode,column,colDef:column.getColDef(),getValue:this.getValueCallback.bind(this,rowNode)});return typeof valueGetter=="function"?valueGetter(params):this.expressionService.evaluate(valueGetter,params)}executeValueGetter(valueGetter,data,column,rowNode){const colId=column.getColId(),valueFromCache=this.valueCache.getValue(rowNode,colId);if(valueFromCache!==void 0)return valueFromCache;const params=this.gos.addGridCommonParams({data,node:rowNode,column,colDef:column.getColDef(),getValue:this.getValueCallback.bind(this,rowNode)});let result;return typeof valueGetter=="function"?result=valueGetter(params):result=this.expressionService.evaluate(valueGetter,params),this.valueCache.setValue(rowNode,colId,result),result}getValueCallback(node,field){const otherColumn=this.columnModel.getColDefCol(field);return otherColumn?this.getValue(otherColumn,node):null}getKeyForNode(col,rowNode){const value=this.getValue(col,rowNode),keyCreator=col.getColDef().keyCreator;let result=value;if(keyCreator){const keyParams=this.gos.addGridCommonParams({value,colDef:col.getColDef(),column:col,node:rowNode,data:rowNode.data});result=keyCreator(keyParams)}return typeof result=="string"||result==null||(result=String(result),result==="[object Object]"&&_warnOnce("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),result}},__name(_a232,"ValueService"),_a232),_a233,_GlobalGridOptions=(_a233=class{static applyGlobalGridOptions(providedOptions){if(!_a233.gridOptions)return providedOptions;let mergedGridOps={};return _mergeDeep(mergedGridOps,_a233.gridOptions,!0,!0),_a233.mergeStrategy==="deep"?_mergeDeep(mergedGridOps,providedOptions,!0,!0):mergedGridOps={...mergedGridOps,...providedOptions},_a233.gridOptions.context&&(mergedGridOps.context=_a233.gridOptions.context),providedOptions.context&&(_a233.mergeStrategy==="deep"&&mergedGridOps.context&&_mergeDeep(providedOptions.context,mergedGridOps.context,!0,!0),mergedGridOps.context=providedOptions.context),mergedGridOps}},__name(_a233,"_GlobalGridOptions"),_a233);_GlobalGridOptions.gridOptions=void 0;_GlobalGridOptions.mergeStrategy="shallow";var GlobalGridOptions=_GlobalGridOptions;function _getGlobalGridOption(gridOption){var _a253;return(_a253=GlobalGridOptions.gridOptions)==null?void 0:_a253[gridOption]}__name(_getGlobalGridOption,"_getGlobalGridOption");var nextGridId=1,_a234,GridCoreCreator=(_a234=class{create(eGridDiv,providedOptions,createUi,acceptChanges,params){const mergedGridOps=GlobalGridOptions.applyGlobalGridOptions(providedOptions),gridOptions=getCoercedGridOptions(mergedGridOps),gridId=gridOptions.gridId??String(nextGridId++),registeredModules=this.getRegisteredModules(params,gridId),beanClasses=this.createBeansList(gridOptions.rowModelType,registeredModules,gridId),providedBeanInstances=this.createProvidedBeans(eGridDiv,gridOptions,params);if(!beanClasses){_errorOnce("Failed to create grid.");return}const contextParams={providedBeanInstances,beanClasses,gridId,beanInitComparator:gridBeanInitComparator,beanDestroyComparator:gridBeanDestroyComparator,derivedBeans:[createGridApi]},context=new Context(contextParams);return this.registerModuleUserComponents(context,registeredModules),this.registerControllers(context,registeredModules),this.registerModuleApiFunctions(context,registeredModules),createUi(context),context.getBean("syncService").start(),acceptChanges&&acceptChanges(context),context.getBean("gridApi")}registerControllers(context,registeredModules){const factory=context.getBean("ctrlsFactory");registeredModules.forEach(module=>{module.controllers&&module.controllers.forEach(meta=>factory.register(meta))})}getRegisteredModules(params,gridId){const passedViaConstructor=params?params.modules:null,registered=ModuleRegistry.__getRegisteredModules(gridId),allModules=[],mapNames={},addModule=__name((moduleBased,mod2,gridId2)=>{__name(currentModule=>{mapNames[currentModule.moduleName]||(mapNames[currentModule.moduleName]=!0,allModules.push(currentModule),ModuleRegistry.__register(currentModule,moduleBased,gridId2))},"addIndividualModule")(mod2),mod2.dependantModules&&mod2.dependantModules.forEach(m=>addModule(moduleBased,m,gridId2))},"addModule");return addModule(!!(passedViaConstructor!=null&&passedViaConstructor.length)||!ModuleRegistry.__isPackageBased(),CommunityFeaturesModule,void 0),passedViaConstructor&&passedViaConstructor.forEach(m=>addModule(!0,m,gridId)),registered&&registered.forEach(m=>addModule(!ModuleRegistry.__isPackageBased(),m,void 0)),allModules}registerModuleUserComponents(context,registeredModules){const moduleUserComps=this.extractModuleEntity(registeredModules,module=>module.userComponents?module.userComponents:[]),registry=context.getBean("userComponentRegistry");moduleUserComps.forEach(({name,classImp,params})=>{registry.registerDefaultComponent(name,classImp,params)})}registerModuleApiFunctions(context,registeredModules){const apiFunctionService=context.getBean("apiFunctionService");registeredModules.forEach(module=>{const apiFunctions=module.apiFunctions;apiFunctions&&Object.keys(apiFunctions).forEach(name=>{apiFunctionService==null||apiFunctionService.addFunction(name,apiFunctions[name])})})}createProvidedBeans(eGridDiv,gridOptions,params){let frameworkOverrides=params?params.frameworkOverrides:null;_missing(frameworkOverrides)&&(frameworkOverrides=new VanillaFrameworkOverrides);const seed={gridOptions,eGridDiv,globalEventListener:params?params.globalEventListener:null,globalSyncEventListener:params?params.globalSyncEventListener:null,frameworkOverrides};return params&&params.providedBeanInstances&&Object.assign(seed,params.providedBeanInstances),seed}createBeansList(rowModelType="clientSide",registeredModules,gridId){const rowModelModules=registeredModules.filter(module=>!module.rowModel||module.rowModel===rowModelType),rowModelModuleNames={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!rowModelModuleNames[rowModelType]){_errorOnce("Could not find row model for rowModelType = ",rowModelType);return}if(!ModuleRegistry.__assertRegistered(rowModelModuleNames[rowModelType],`rowModelType = '${rowModelType}'`,gridId))return;const beans=[RowPositionUtils,CellPositionUtils,HeaderPositionUtils,GridDestroyService,ApiFunctionService,UserComponentRegistry,AgComponentUtils,ComponentMetadataProvider,ResizeObserverService,UserComponentFactory,RowContainerHeightService,HorizontalResizeService,LocaleService,PinnedRowModel,DragService,VisibleColsService,EventService,GridOptionsService,PopupService,SelectionService,ColumnModel,HeaderNavigationService,PageBoundsService,PageBoundsListener,RowRenderer,ExpressionService,ColumnFactory,NavigationService,ValueCache,ValueService,AutoWidthCalculator,StandardMenuFactory,DragAndDropService,FocusService,MouseEventService,Environment,CellNavigationService,StylingService,ScrollVisibleService,SortController,ColumnHoverService,ColumnAnimationService,SelectableService,ChangeDetectionService,AnimationFrameService,ColumnDefFactory,RowCssClassCalculator,RowNodeSorter,CtrlsService,PinnedWidthService,RowNodeEventThrottle,CtrlsFactory,SyncService,OverlayService,ExpansionService,ApiEventService,AriaAnnouncementService,MenuService,ColumnApplyStateService,ColumnEventDispatcher,ColumnMoveService,ColumnAutosizeService,ColumnGetStateService,ColumnGroupStateService,ColumnSizeService,FuncColsService,ColumnNameService,ColumnViewportService,PivotResultColsService,ControlsColService],moduleBeans=this.extractModuleEntity(rowModelModules,module=>module.beans?module.beans:[]);beans.push(...moduleBeans);const beansNoDuplicates=[];return beans.forEach(bean=>{beansNoDuplicates.indexOf(bean)<0&&beansNoDuplicates.push(bean)}),beansNoDuplicates}extractModuleEntity(moduleEntities,extractor){return[].concat(...moduleEntities.map(extractor))}},__name(_a234,"GridCoreCreator"),_a234),_a235,RowModelHelperService=(_a235=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(beans){this.rowModel=beans.rowModel}postConstruct(){const rowModel=this.rowModel;switch(rowModel.getType()){case"clientSide":this.clientSideRowModel=rowModel;break;case"infinite":this.infiniteRowModel=rowModel;break;case"serverSide":this.serverSideRowModel=rowModel;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}},__name(_a235,"RowModelHelperService"),_a235);function expandAll(beans){beans.expansionService.expandAll(!0)}__name(expandAll,"expandAll");function collapseAll(beans){beans.expansionService.expandAll(!1)}__name(collapseAll,"collapseAll");function onRowHeightChanged(beans){var _a253,_b;const clientSideRowModel=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getClientSideRowModel(),serverSideRowModel=(_b=beans.rowModelHelperService)==null?void 0:_b.getServerSideRowModel();clientSideRowModel?clientSideRowModel.onRowHeightChanged():serverSideRowModel&&serverSideRowModel.onRowHeightChanged()}__name(onRowHeightChanged,"onRowHeightChanged");function setRowCount(beans,rowCount,maxRowFound){var _a253,_b;const serverSideRowModel=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getServerSideRowModel();if(serverSideRowModel){if(beans.funcColsService.isRowGroupEmpty()){serverSideRowModel.setRowCount(rowCount,maxRowFound);return}_errorOnce("setRowCount cannot be used while using row grouping.");return}const infiniteRowModel=(_b=beans.rowModelHelperService)==null?void 0:_b.getInfiniteRowModel();if(infiniteRowModel){infiniteRowModel.setRowCount(rowCount,maxRowFound);return}}__name(setRowCount,"setRowCount");function getCacheBlockState(beans){var _a253;return((_a253=beans.rowNodeBlockLoader)==null?void 0:_a253.getBlockState())??{}}__name(getCacheBlockState,"getCacheBlockState");function isLastRowIndexKnown(beans){return beans.rowModel.isLastRowIndexKnown()}__name(isLastRowIndexKnown,"isLastRowIndexKnown");var CsrmSsrmSharedApiModule={version:VERSION,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll,collapseAll,onRowHeightChanged}},SsrmInfiniteSharedApiModule={version:VERSION,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount,getCacheBlockState,isLastRowIndexKnown}},_a236,BaseComponentWrapper=(_a236=class{wrap(OriginalConstructor,mandatoryMethodList,optionalMethodList=[],componentType){const wrapper=this.createWrapper(OriginalConstructor,componentType);return mandatoryMethodList.forEach(methodName=>{this.createMethod(wrapper,methodName,!0)}),optionalMethodList.forEach(methodName=>{this.createMethod(wrapper,methodName,!1)}),wrapper}createMethod(wrapper,methodName,mandatory){wrapper.addMethod(methodName,this.createMethodProxy(wrapper,methodName,mandatory))}createMethodProxy(wrapper,methodName,mandatory){return function(){return wrapper.hasMethod(methodName)?wrapper.callMethod(methodName,arguments):(mandatory&&_warnOnce("Framework component is missing the method "+methodName+"()"),null)}}},__name(_a236,"BaseComponentWrapper"),_a236),globalObj=typeof global>"u"?{}:global;globalObj.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;globalObj.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;globalObj.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;globalObj.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;globalObj.Node=typeof Node>"u"?{}:Node;globalObj.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var ROOT_NODE_ID="ROOT_NODE_ID",TOP_LEVEL=0,_a237,ClientSideNodeManager=(_a237=class{constructor(rootNode,gos,eventService,funcColsService,selectionService,beans){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=rootNode,this.gos=gos,this.eventService=eventService,this.funcColsService=funcColsService,this.beans=beans,this.selectionService=selectionService,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return _cloneObject(this.allNodesMap)}getRowNode(id){return this.allNodesMap[id]}setRowData(rowData){if(typeof rowData=="string"){_warnOnce("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(rowData);const rootNode=this.rootNode,sibling=this.rootNode.sibling;rootNode.childrenAfterFilter=null,rootNode.childrenAfterGroup=null,rootNode.childrenAfterAggFilter=null,rootNode.childrenAfterSort=null,rootNode.childrenMapped=null,rootNode.updateHasChildren(),this.nextId=0,this.allNodesMap={},rowData?rootNode.allLeafChildren=rowData.map((dataItem,index)=>this.createNode(dataItem,this.rootNode,TOP_LEVEL,index)):(rootNode.allLeafChildren=[],rootNode.childrenAfterGroup=[]),sibling&&(sibling.childrenAfterFilter=rootNode.childrenAfterFilter,sibling.childrenAfterGroup=rootNode.childrenAfterGroup,sibling.childrenAfterAggFilter=rootNode.childrenAfterAggFilter,sibling.childrenAfterSort=rootNode.childrenAfterSort,sibling.childrenMapped=rootNode.childrenMapped,sibling.allLeafChildren=rootNode.allLeafChildren)}updateRowData(rowDataTran){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(rowDataTran.add);const updateRowDataResult={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},nodesToUnselect=[];return this.executeRemove(rowDataTran,updateRowDataResult,nodesToUnselect),this.executeUpdate(rowDataTran,updateRowDataResult,nodesToUnselect),this.executeAdd(rowDataTran,updateRowDataResult),this.updateSelection(nodesToUnselect,"rowDataChanged"),updateRowDataResult}updateRowOrderFromRowData(rowData){const rows=this.rootNode.allLeafChildren,rowsLength=(rows==null?void 0:rows.length)??0,rowsOutOfOrder=new Map;let firstIndexOutOfOrder=-1,lastIndexOutOfOrder=-1;for(let i=0;i<rowsLength;++i){const row=rows[i],data=row.data;data!==rowData[i]&&(lastIndexOutOfOrder<0&&(firstIndexOutOfOrder=i),lastIndexOutOfOrder=i,rowsOutOfOrder.set(data,row))}if(firstIndexOutOfOrder<0)return!1;for(let i=firstIndexOutOfOrder;i<=lastIndexOutOfOrder;++i){const row=rowsOutOfOrder.get(rowData[i]);row!==void 0&&(rows[i]=row,row.sourceRowIndex=i)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(rowData){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:rowData!=null&&rowData.length?rowData[0]:null})}updateSelection(nodesToUnselect,source){const selectionChanged=nodesToUnselect.length>0;selectionChanged&&this.selectionService.setNodesSelected({newValue:!1,nodes:nodesToUnselect,suppressFinishActions:!0,source}),this.selectionService.updateGroupsFromChildrenSelections(source),selectionChanged&&this.eventService.dispatchEvent({type:"selectionChanged",source})}executeAdd(rowDataTran,result){const add=rowDataTran.add;if(_missingOrEmpty(add))return;const allLeafChildren=this.rootNode.allLeafChildren;let addIndex=allLeafChildren.length;if(typeof rowDataTran.addIndex=="number"&&(addIndex=this.sanitizeAddIndex(rowDataTran.addIndex),addIndex>0&&this.gos.get("treeData")))for(let i=0;i<allLeafChildren.length;i++){const node=allLeafChildren[i];if((node==null?void 0:node.rowIndex)==addIndex-1){addIndex=i+1;break}}const newNodes=add.map((item,index)=>this.createNode(item,this.rootNode,TOP_LEVEL,addIndex+index));if(addIndex<allLeafChildren.length){const nodesBeforeIndex=allLeafChildren.slice(0,addIndex),nodesAfterIndex=allLeafChildren.slice(addIndex,allLeafChildren.length),nodesAfterIndexFirstIndex=nodesBeforeIndex.length+newNodes.length;for(let index=0,length=nodesAfterIndex.length;index<length;++index)nodesAfterIndex[index].sourceRowIndex=nodesAfterIndexFirstIndex+index;this.rootNode.allLeafChildren=[...nodesBeforeIndex,...newNodes,...nodesAfterIndex],result.rowsInserted=!0}else this.rootNode.allLeafChildren=allLeafChildren.concat(newNodes);const sibling=this.rootNode.sibling;sibling&&(sibling.allLeafChildren=allLeafChildren),result.rowNodeTransaction.add=newNodes}sanitizeAddIndex(addIndex){var _a253;const allChildrenCount=((_a253=this.rootNode.allLeafChildren)==null?void 0:_a253.length)??0;return addIndex<0||addIndex>=allChildrenCount||Number.isNaN(addIndex)?allChildrenCount:Math.ceil(addIndex)}executeRemove(rowDataTran,{rowNodeTransaction},nodesToUnselect){var _a253,_b;const{remove}=rowDataTran;if(_missingOrEmpty(remove))return;const rowIdsRemoved={};remove.forEach(item=>{const rowNode=this.lookupRowNode(item);rowNode&&(rowNode.isSelected()&&nodesToUnselect.push(rowNode),rowNode.clearRowTopAndRowIndex(),rowIdsRemoved[rowNode.id]=!0,delete this.allNodesMap[rowNode.id],rowNodeTransaction.remove.push(rowNode))}),this.rootNode.allLeafChildren=((_a253=this.rootNode.allLeafChildren)==null?void 0:_a253.filter(rowNode=>!rowIdsRemoved[rowNode.id]))??null,(_b=this.rootNode.allLeafChildren)==null||_b.forEach((node,idx)=>{node.sourceRowIndex=idx});const sibling=this.rootNode.sibling;sibling&&(sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(rowDataTran,{rowNodeTransaction},nodesToUnselect){const{update}=rowDataTran;_missingOrEmpty(update)||update.forEach(item=>{const rowNode=this.lookupRowNode(item);rowNode&&(rowNode.updateData(item),!rowNode.selectable&&rowNode.isSelected()&&nodesToUnselect.push(rowNode),this.setMasterForRow(rowNode,item,TOP_LEVEL,!1),rowNodeTransaction.update.push(rowNode))})}lookupRowNode(data){var _a253;const getRowIdFunc=_getRowIdCallback(this.gos);let rowNode;if(getRowIdFunc){const id=getRowIdFunc({data,level:0});if(rowNode=this.allNodesMap[id],!rowNode)return _errorOnce(`could not find row id=${id}, data item was not found for this id`),null}else if(rowNode=(_a253=this.rootNode.allLeafChildren)==null?void 0:_a253.find(node=>node.data===data),!rowNode)return _errorOnce("could not find data item as object was not found",data),_errorOnce("Consider using getRowId to help the Grid find matching row data"),null;return rowNode||null}createNode(dataItem,parent,level,sourceRowIndex){const node=new RowNode(this.beans);return node.sourceRowIndex=sourceRowIndex,node.group=!1,this.setMasterForRow(node,dataItem,level,!0),parent&&(node.parent=parent),node.level=level,node.setDataAndId(dataItem,this.nextId.toString()),this.allNodesMap[node.id]&&_warnOnce(`duplicate node id '${node.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[node.id]=node,this.nextId++,node}setMasterForRow(rowNode,data,level,setExpanded){if(this.gos.get("treeData"))rowNode.setMaster(!1),setExpanded&&(rowNode.expanded=!1);else{if(this.gos.get("masterDetail")){const isRowMasterFunc=this.gos.get("isRowMaster");isRowMasterFunc?rowNode.setMaster(isRowMasterFunc(data)):rowNode.setMaster(!0)}else rowNode.setMaster(!1);if(setExpanded){const rowGroupColumns=this.funcColsService.getRowGroupColumns(),numRowGroupColumns=rowGroupColumns?rowGroupColumns.length:0,masterRowLevel=level+numRowGroupColumns;rowNode.expanded=rowNode.master?this.isExpanded(masterRowLevel):!1}}}isExpanded(level){const expandByDefault=this.gos.get("groupDefaultExpanded");return expandByDefault===-1?!0:level<expandByDefault}},__name(_a237,"ClientSideNodeManager"),_a237),_a238,ClientSideRowModel=(_a238=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=_debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(beans){this.beans=beans,this.columnModel=beans.columnModel,this.funcColsService=beans.funcColsService,this.selectionService=beans.selectionService,this.valueCache=beans.valueCache,this.environment=beans.environment,this.filterStage=beans.filterStage,this.sortStage=beans.sortStage,this.flattenStage=beans.flattenStage,this.groupStage=beans.groupStage,this.aggregationStage=beans.aggregationStage,this.pivotStage=beans.pivotStage,this.filterAggregatesStage=beans.filterAggregatesStage}postConstruct(){const refreshEverythingFunc=this.refreshModel.bind(this,{step:"group"}),animate=!this.gos.get("suppressAnimationFrame"),refreshEverythingAfterColsChangedFunc=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate});this.addManagedEventListeners({newColumnsLoaded:refreshEverythingAfterColsChangedFunc,columnRowGroupChanged:refreshEverythingFunc,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:refreshEverythingFunc,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new RowNode(this.beans),this.nodeManager=new ClientSideNodeManager(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const resetProps=new Set(["treeData","masterDetail"]),groupStageRefreshProps=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),filterStageRefreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),pivotStageRefreshProps=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),aggregateStageRefreshProps=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),sortStageRefreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),filterAggStageRefreshProps=new Set([]),flattenStageRefreshProps=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),allProps=[...resetProps,...groupStageRefreshProps,...filterStageRefreshProps,...pivotStageRefreshProps,...pivotStageRefreshProps,...aggregateStageRefreshProps,...sortStageRefreshProps,...filterAggStageRefreshProps,...flattenStageRefreshProps];this.addManagedPropertyListeners(allProps,params=>{var _a253;const properties=(_a253=params.changeSet)==null?void 0:_a253.properties;if(!properties)return;const arePropertiesImpacted=__name(propSet=>properties.some(prop=>propSet.has(prop)),"arePropertiesImpacted");if(arePropertiesImpacted(resetProps)){this.setRowData(this.rootNode.allLeafChildren.map(child=>child.data));return}if(arePropertiesImpacted(groupStageRefreshProps)){this.refreshModel({step:"group"});return}if(arePropertiesImpacted(filterStageRefreshProps)){this.refreshModel({step:"filter"});return}if(arePropertiesImpacted(pivotStageRefreshProps)){this.refreshModel({step:"pivot"});return}if(arePropertiesImpacted(aggregateStageRefreshProps)){this.refreshModel({step:"aggregate"});return}if(arePropertiesImpacted(sortStageRefreshProps)){this.refreshModel({step:"sort"});return}if(arePropertiesImpacted(filterAggStageRefreshProps)){this.refreshModel({step:"filter_aggregates"});return}arePropertiesImpacted(flattenStageRefreshProps)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const rowData=this.gos.get("rowData");rowData&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(rowData))}ensureRowHeightsValid(startPixel,endPixel,startLimitIndex,endLimitIndex){let atLeastOneChange,res=!1;do{atLeastOneChange=!1;const rowAtStartPixel=this.getRowIndexAtPixel(startPixel),rowAtEndPixel=this.getRowIndexAtPixel(endPixel),firstRow=Math.max(rowAtStartPixel,startLimitIndex),lastRow=Math.min(rowAtEndPixel,endLimitIndex);for(let rowIndex=firstRow;rowIndex<=lastRow;rowIndex++){const rowNode=this.getRow(rowIndex);if(rowNode.rowHeightEstimated){const rowHeight=_getRowHeightForNode(this.gos,rowNode);rowNode.setRowHeight(rowHeight.height),atLeastOneChange=!0,res=!0}}atLeastOneChange&&this.setRowTopAndRowIndex()}while(atLeastOneChange);return res}setRowTopAndRowIndex(){const defaultRowHeight=this.environment.getDefaultRowHeight();let nextRowTop=0;const displayedRowsMapped=new Set,allowEstimate=_isDomLayout(this.gos,"normal");for(let i=0;i<this.rowsToDisplay.length;i++){const rowNode=this.rowsToDisplay[i];if(rowNode.id!=null&&displayedRowsMapped.add(rowNode.id),rowNode.rowHeight==null){const rowHeight=_getRowHeightForNode(this.gos,rowNode,allowEstimate,defaultRowHeight);rowNode.setRowHeight(rowHeight.height,rowHeight.estimated)}rowNode.setRowTop(nextRowTop),rowNode.setRowIndex(i),nextRowTop+=rowNode.rowHeight}return displayedRowsMapped}clearRowTopAndRowIndex(changedPath,displayedRowsMapped){const changedPathActive=changedPath.isActive(),clearIfNotDisplayed=__name(rowNode=>{rowNode&&rowNode.id!=null&&!displayedRowsMapped.has(rowNode.id)&&rowNode.clearRowTopAndRowIndex()},"clearIfNotDisplayed"),recurse=__name(rowNode=>{if(clearIfNotDisplayed(rowNode),clearIfNotDisplayed(rowNode.detailNode),clearIfNotDisplayed(rowNode.sibling),rowNode.hasChildren()&&rowNode.childrenAfterGroup){const isRootNode=rowNode.level==-1;changedPathActive&&!isRootNode&&!rowNode.expanded||rowNode.childrenAfterGroup.forEach(recurse)}},"recurse");recurse(this.rootNode)}ensureRowsAtPixel(rowNodes,pixel,increment=0){const indexAtPixelNow=this.getRowIndexAtPixel(pixel),rowNodeAtPixelNow=this.getRow(indexAtPixelNow),animate=!this.gos.get("suppressAnimationFrame");if(rowNodeAtPixelNow===rowNodes[0])return!1;const allLeafChildren=this.rootNode.allLeafChildren;return rowNodes.forEach(rowNode=>{_removeFromArray(allLeafChildren,rowNode)}),rowNodes.forEach((rowNode,idx)=>{_insertIntoArray(allLeafChildren,rowNode,Math.max(indexAtPixelNow+increment,0)+idx)}),rowNodes.forEach((rowNode,index)=>{rowNode.sourceRowIndex=index}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(rowNode,pixel){const indexAtPixelNow=pixel!=null?this.getRowIndexAtPixel(pixel):null,rowNodeAtPixelNow=indexAtPixelNow!=null?this.getRow(indexAtPixelNow):null;if(!rowNodeAtPixelNow||!rowNode||rowNodeAtPixelNow===rowNode||pixel==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const highlight=this.getHighlightPosition(pixel,rowNodeAtPixelNow);this.lastHighlightedRow&&this.lastHighlightedRow!==rowNodeAtPixelNow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),rowNodeAtPixelNow.setHighlighted(highlight),this.lastHighlightedRow=rowNodeAtPixelNow}getHighlightPosition(pixel,rowNode){if(!rowNode){const index=this.getRowIndexAtPixel(pixel);if(rowNode=this.getRow(index||0),!rowNode)return 1}const{rowTop,rowHeight}=rowNode;return pixel-rowTop<rowHeight/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const filteredChildren=this.rootNode.childrenAfterAggFilter,totalFooterInc=this.rootNode.sibling?1:0;return(filteredChildren?filteredChildren.length:0)+totalFooterInc}getTopLevelRowDisplayedIndex(topLevelIndex){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return topLevelIndex;let adjustedIndex=topLevelIndex;if(this.rowsToDisplay[0].footer){if(topLevelIndex===0)return 0;adjustedIndex-=1}const lastRow=this.rowsToDisplay[this.rowsToDisplay.length-1],indexOutsideGroupBounds=adjustedIndex>=this.rootNode.childrenAfterSort.length;if(lastRow.footer&&indexOutsideGroupBounds)return lastRow.rowIndex;let rowNode=this.rootNode.childrenAfterSort[adjustedIndex];if(this.gos.get("groupHideOpenParents"))for(;rowNode.expanded&&rowNode.childrenAfterSort&&rowNode.childrenAfterSort.length>0;)rowNode=rowNode.childrenAfterSort[0];return rowNode.rowIndex}getRowBounds(index){if(_missing(this.rowsToDisplay))return null;const rowNode=this.rowsToDisplay[index];return rowNode?{rowTop:rowNode.rowTop,rowHeight:rowNode.rowHeight}:null}onRowGroupOpened(){const animate=_isAnimateRows(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate})}onFilterChanged(event){if(event.afterDataChange)return;const animate=_isAnimateRows(this.gos),step=event.columns.length===0||event.columns.some(col=>col.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step,keepRenderedRows:!0,animate})}onSortChanged(){const animate=_isAnimateRows(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(rowNodeTransactions){const noTransactions=_missingOrEmpty(rowNodeTransactions),changedPath=new ChangedPath(!1,this.rootNode);return noTransactions&&changedPath.setInactive(),changedPath}isSuppressModelUpdateAfterUpdateTransaction(params){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||params.rowNodeTransactions==null)return!1;const transWithAddsOrDeletes=params.rowNodeTransactions.filter(tx=>tx.add!=null&&tx.add.length>0||tx.remove!=null&&tx.remove.length>0);return transWithAddsOrDeletes==null||transWithAddsOrDeletes.length==0}buildRefreshModelParams(step){let paramsStep="group";const stepsMapped={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(_exists(step)&&(paramsStep=stepsMapped[step]),_missing(paramsStep)){_errorOnce(`invalid step ${step}, available steps are ${Object.keys(stepsMapped).join(", ")}`);return}const animate=!this.gos.get("suppressAnimationFrame");return{step:paramsStep,keepRenderedRows:!0,keepEditingRows:!0,animate}}refreshModel(paramsOrStep){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const params=typeof paramsOrStep=="object"&&"step"in paramsOrStep?paramsOrStep:this.buildRefreshModelParams(paramsOrStep);if(!params||this.isSuppressModelUpdateAfterUpdateTransaction(params))return;const changedPath=this.createChangePath(params.rowNodeTransactions);switch(this.isRefreshingModel=!0,params.step){case"group":this.doRowGrouping(params.rowNodeTransactions,changedPath,!!params.rowNodesOrderChanged,!!params.afterColumnsChanged);case"filter":this.doFilter(changedPath);case"pivot":this.doPivot(changedPath);case"aggregate":this.doAggregate(changedPath);case"filter_aggregates":this.doFilterAggregates(changedPath);case"sort":this.doSort(params.rowNodeTransactions,changedPath);case"map":this.doRowsToDisplay()}const displayedNodesMapped=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(changedPath,displayedNodesMapped),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:params.animate,keepRenderedRows:params.keepRenderedRows,newData:params.newData,newPage:!1,keepUndoRedoStack:params.keepUndoRedoStack})}isEmpty(){const rowsMissing=_missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return _missing(this.rootNode)||rowsMissing||!this.columnModel.isReady()}isRowsToRender(){return _exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(firstInRange,lastInRange){let started=!1,finished=!1;const result=[],groupsSelectChildren=_getGroupSelectsDescendants(this.gos);return this.forEachNodeAfterFilterAndSort(rowNode=>{if(finished)return;if(started&&(rowNode===lastInRange||rowNode===firstInRange)&&(finished=!0,rowNode.group&&groupsSelectChildren)){result.push(...rowNode.allLeafChildren);return}if(!started){if(rowNode!==lastInRange&&rowNode!==firstInRange)return;started=!0}if(!rowNode.group||!groupsSelectChildren){result.push(rowNode);return}}),result}setDatasource(datasource){_errorOnce("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(index){return this.rowsToDisplay[index]}isRowPresent(rowNode){return this.rowsToDisplay.indexOf(rowNode)>=0}getRowIndexAtPixel(pixelToMatch){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let bottomPointer=0,topPointer=this.rowsToDisplay.length-1;if(pixelToMatch<=0)return 0;if(_last(this.rowsToDisplay).rowTop<=pixelToMatch)return this.rowsToDisplay.length-1;let oldBottomPointer=-1,oldTopPointer=-1;for(;;){const midPointer=Math.floor((bottomPointer+topPointer)/2),currentRowNode=this.rowsToDisplay[midPointer];if(this.isRowInPixel(currentRowNode,pixelToMatch)||(currentRowNode.rowTop<pixelToMatch?bottomPointer=midPointer+1:currentRowNode.rowTop>pixelToMatch&&(topPointer=midPointer-1),oldBottomPointer===bottomPointer&&oldTopPointer===topPointer))return midPointer;oldBottomPointer=bottomPointer,oldTopPointer=topPointer}}isRowInPixel(rowNode,pixelToMatch){const topPixel=rowNode.rowTop,bottomPixel=rowNode.rowTop+rowNode.rowHeight;return topPixel<=pixelToMatch&&bottomPixel>pixelToMatch}forEachLeafNode(callback){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((rowNode,index)=>callback(rowNode,index))}forEachNode(callback,includeFooterNodes=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback,recursionType:0,index:0,includeFooterNodes})}forEachNodeAfterFilter(callback,includeFooterNodes=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback,recursionType:1,index:0,includeFooterNodes})}forEachNodeAfterFilterAndSort(callback,includeFooterNodes=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback,recursionType:2,index:0,includeFooterNodes})}forEachPivotNode(callback,includeFooterNodes=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback,recursionType:3,index:0,includeFooterNodes})}recursivelyWalkNodesAndCallback(params){const{nodes,callback,recursionType,includeFooterNodes}=params;let{index}=params;const addFooters=__name(position=>{var _a253;const parentNode=(_a253=nodes[0])==null?void 0:_a253.parent;if(!parentNode)return;const grandTotal=includeFooterNodes&&_getGrandTotalRow(this.gos),isGroupIncludeFooter=_getGroupTotalRowCallback(this.gos),groupTotal=includeFooterNodes&&isGroupIncludeFooter({node:parentNode});if(parentNode===this.rootNode){grandTotal===position&&(parentNode.createFooter(),callback(parentNode.sibling,index++));return}groupTotal===position&&(parentNode.createFooter(),callback(parentNode.sibling,index++))},"addFooters");addFooters("top");for(let i=0;i<nodes.length;i++){const node=nodes[i];if(callback(node,index++),node.hasChildren()&&!node.footer){let nodeChildren=null;switch(recursionType){case 0:nodeChildren=node.childrenAfterGroup;break;case 1:nodeChildren=node.childrenAfterAggFilter;break;case 2:nodeChildren=node.childrenAfterSort;break;case 3:nodeChildren=node.leafGroup?null:node.childrenAfterSort;break}nodeChildren&&(index=this.recursivelyWalkNodesAndCallback({nodes:[...nodeChildren],callback,recursionType,index,includeFooterNodes}))}}return addFooters("bottom"),index}doAggregate(changedPath){var _a253;(_a253=this.aggregationStage)==null||_a253.execute({rowNode:this.rootNode,changedPath})}doFilterAggregates(changedPath){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(expand){const usingTreeData=this.gos.get("treeData"),usingPivotMode=this.columnModel.isPivotActive(),recursiveExpandOrCollapse=__name(rowNodes=>{rowNodes&&rowNodes.forEach(rowNode=>{const actionRow=__name(()=>{rowNode.expanded=expand,recursiveExpandOrCollapse(rowNode.childrenAfterGroup)},"actionRow");if(usingTreeData){_exists(rowNode.childrenAfterGroup)&&actionRow();return}if(usingPivotMode){!rowNode.leafGroup&&actionRow();return}rowNode.group&&actionRow()})},"recursiveExpandOrCollapse");this.rootNode&&recursiveExpandOrCollapse(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:expand?"expandAll":"collapseAll"})}doSort(rowNodeTransactions,changedPath){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions,changedPath})}doRowGrouping(rowNodeTransactions,changedPath,rowNodesOrderChanged,afterColumnsChanged){if(this.groupStage)rowNodeTransactions?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions,rowNodesOrderChanged,changedPath}):this.groupStage.execute({rowNode:this.rootNode,changedPath,afterColumnsChanged}),_getGroupSelectsDescendants(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",changedPath)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{const rootNode=this.rootNode,sibling=rootNode.sibling;rootNode.childrenAfterGroup=rootNode.allLeafChildren,sibling&&(sibling.childrenAfterGroup=rootNode.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(changedPath){this.filterStage.execute({rowNode:this.rootNode,changedPath})}doPivot(changedPath){var _a253;(_a253=this.pivotStage)==null||_a253.execute({rowNode:this.rootNode,changedPath})}getNodeManager(){return this.nodeManager}getRowNode(id){if(typeof id=="string"&&id.indexOf(RowNode.ID_PREFIX_ROW_GROUP)==0){let res;return this.forEachNode(node=>{node.id===id&&(res=node)}),res}return this.nodeManager.getRowNode(id)}setRowData(rowData){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(rowData),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(rowDataTransaction,callback){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const waitMillis=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},waitMillis)}this.rowDataTransactionBatch.push({rowDataTransaction,callback})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var _a253;this.valueCache.onDataChanged();const callbackFuncsBound=[],rowNodeTrans=[];let orderChanged=!1;(_a253=this.rowDataTransactionBatch)==null||_a253.forEach(tranItem=>{const{rowNodeTransaction,rowsInserted}=this.nodeManager.updateRowData(tranItem.rowDataTransaction);rowsInserted&&(orderChanged=!0),rowNodeTrans.push(rowNodeTransaction),tranItem.callback&&callbackFuncsBound.push(tranItem.callback.bind(null,rowNodeTransaction))}),this.commonUpdateRowData(rowNodeTrans,orderChanged),callbackFuncsBound.length>0&&window.setTimeout(()=>{callbackFuncsBound.forEach(func=>func())},0),rowNodeTrans.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:rowNodeTrans}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(rowDataTran){this.valueCache.onDataChanged();const{rowNodeTransaction,rowsInserted}=this.nodeManager.updateRowData(rowDataTran);return this.commonUpdateRowData([rowNodeTransaction],rowsInserted),rowNodeTransaction}afterImmutableDataChange(rowNodeTransaction,rowNodesOrderChanged){this.commonUpdateRowData([rowNodeTransaction],rowNodesOrderChanged)}commonUpdateRowData(rowNodeTransactions,rowNodesOrderChanged){if(!this.hasStarted)return;const animate=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions,rowNodesOrderChanged,keepRenderedRows:!0,keepEditingRows:!0,animate})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const atLeastOne=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),atLeastOne&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let atLeastOne=!1;return this.forEachNode(rowNode=>{rowNode.setRowHeight(rowNode.rowHeight,!0);const detailNode=rowNode.detailNode;detailNode&&detailNode.setRowHeight(detailNode.rowHeight,!0),rowNode.sibling&&rowNode.sibling.setRowHeight(rowNode.sibling.rowHeight,!0),atLeastOne=!0}),atLeastOne}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}},__name(_a238,"ClientSideRowModel"),_a238);function onGroupExpandedOrCollapsed(beans){beans.expansionService.onGroupExpandedOrCollapsed()}__name(onGroupExpandedOrCollapsed,"onGroupExpandedOrCollapsed");function refreshClientSideRowModel(beans,step){var _a253,_b;(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getClientSideRowModel())==null||_b.refreshModel(step)}__name(refreshClientSideRowModel,"refreshClientSideRowModel");function isRowDataEmpty(beans){var _a253,_b;return((_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getClientSideRowModel())==null?void 0:_b.isEmpty())??!0}__name(isRowDataEmpty,"isRowDataEmpty");function forEachLeafNode(beans,callback){var _a253,_b;(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getClientSideRowModel())==null||_b.forEachLeafNode(callback)}__name(forEachLeafNode,"forEachLeafNode");function forEachNodeAfterFilter(beans,callback){var _a253,_b;(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getClientSideRowModel())==null||_b.forEachNodeAfterFilter(callback)}__name(forEachNodeAfterFilter,"forEachNodeAfterFilter");function forEachNodeAfterFilterAndSort(beans,callback){var _a253,_b;(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getClientSideRowModel())==null||_b.forEachNodeAfterFilterAndSort(callback)}__name(forEachNodeAfterFilterAndSort,"forEachNodeAfterFilterAndSort");function resetRowHeights(beans){var _a253,_b;if(beans.columnModel.isAutoRowHeightActive()){_warnOnce("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getClientSideRowModel())==null||_b.resetRowHeights()}__name(resetRowHeights,"resetRowHeights");function applyTransaction(beans,rowDataTransaction){return beans.frameworkOverrides.wrapIncoming(()=>{var _a253,_b;return(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getClientSideRowModel())==null?void 0:_b.updateRowData(rowDataTransaction)})}__name(applyTransaction,"applyTransaction");function applyTransactionAsync(beans,rowDataTransaction,callback){beans.frameworkOverrides.wrapIncoming(()=>{var _a253,_b;return(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getClientSideRowModel())==null?void 0:_b.batchUpdateRowData(rowDataTransaction,callback)})}__name(applyTransactionAsync,"applyTransactionAsync");function flushAsyncTransactions(beans){beans.frameworkOverrides.wrapIncoming(()=>{var _a253,_b;return(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getClientSideRowModel())==null?void 0:_b.flushAsyncTransactions()})}__name(flushAsyncTransactions,"flushAsyncTransactions");function getBestCostNodeSelection(beans){return beans.selectionService.getBestCostNodeSelection()}__name(getBestCostNodeSelection,"getBestCostNodeSelection");var _a239,FilterStage=(_a239=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(beans){this.filterManager=beans.filterManager}execute(params){const{changedPath}=params;this.filter(changedPath)}filter(changedPath){var _a253;const filterActive=!!((_a253=this.filterManager)!=null&&_a253.isChildFilterPresent());this.filterNodes(filterActive,changedPath)}filterNodes(filterActive,changedPath){const filterCallback=__name((rowNode,includeChildNodes)=>{rowNode.hasChildren()&&filterActive&&!includeChildNodes?rowNode.childrenAfterFilter=rowNode.childrenAfterGroup.filter(childNode=>{const passBecauseChildren=childNode.childrenAfterFilter&&childNode.childrenAfterFilter.length>0,passBecauseDataPasses=childNode.data&&this.filterManager.doesRowPassFilter({rowNode:childNode});return passBecauseChildren||passBecauseDataPasses}):rowNode.childrenAfterFilter=rowNode.childrenAfterGroup,rowNode.sibling&&(rowNode.sibling.childrenAfterFilter=rowNode.childrenAfterFilter)},"filterCallback");if(this.doingTreeDataFiltering()){const treeDataDepthFirstFilter=__name((rowNode,alreadyFoundInParent)=>{if(rowNode.childrenAfterGroup)for(let i=0;i<rowNode.childrenAfterGroup.length;i++){const childNode=rowNode.childrenAfterGroup[i],foundInParent=alreadyFoundInParent||this.filterManager.doesRowPassFilter({rowNode:childNode});childNode.childrenAfterGroup?treeDataDepthFirstFilter(rowNode.childrenAfterGroup[i],foundInParent):filterCallback(childNode,foundInParent)}filterCallback(rowNode,alreadyFoundInParent)},"treeDataDepthFirstFilter"),treeDataFilterCallback=__name(rowNode=>treeDataDepthFirstFilter(rowNode,!1),"treeDataFilterCallback");changedPath.executeFromRootNode(treeDataFilterCallback)}else{const defaultFilterCallback=__name(rowNode=>filterCallback(rowNode,!1),"defaultFilterCallback");changedPath.forEachChangedNodeDepthFirst(defaultFilterCallback,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},__name(_a239,"FilterStage"),_a239),_a240,FlattenStage=(_a240=class extends BeanStub{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(beans){this.beans=beans,this.columnModel=beans.columnModel}execute(params){const rootNode=params.rowNode,result=[],skipLeafNodes=this.columnModel.isPivotMode(),showRootNode=skipLeafNodes&&rootNode.leafGroup,topList=showRootNode?[rootNode]:rootNode.childrenAfterSort,details=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(details,topList,result,skipLeafNodes,0);const atLeastOneRowPresent=result.length>0;if(!showRootNode&&atLeastOneRowPresent&&details.grandTotalRow){rootNode.createFooter();const addToTop=details.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(details,rootNode.sibling,result,0,addToTop)}return result}getFlattenDetails(){const groupRemoveSingleChildren=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!groupRemoveSingleChildren&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren,isGroupMultiAutoColumn:_isGroupMultiAutoColumn(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:_getGrandTotalRow(this.gos),groupTotalRow:_getGroupTotalRowCallback(this.gos)}}recursivelyAddToRowsToDisplay(details,rowsToFlatten,result,skipLeafNodes,uiLevel){if(!_missingOrEmpty(rowsToFlatten))for(let i=0;i<rowsToFlatten.length;i++){const rowNode=rowsToFlatten[i],isParent=rowNode.hasChildren(),isSkippedLeafNode=skipLeafNodes&&!isParent,isRemovedSingleChildrenGroup=details.groupRemoveSingleChildren&&isParent&&rowNode.childrenAfterGroup.length===1,isRemovedLowestSingleChildrenGroup=details.groupRemoveLowestSingleChildren&&isParent&&rowNode.leafGroup&&rowNode.childrenAfterGroup.length===1,neverAllowToExpand=skipLeafNodes&&rowNode.leafGroup,isHiddenOpenParent=details.hideOpenParents&&rowNode.expanded&&!rowNode.master&&!neverAllowToExpand;if(!isSkippedLeafNode&&!isHiddenOpenParent&&!isRemovedSingleChildrenGroup&&!isRemovedLowestSingleChildrenGroup&&this.addRowNodeToRowsToDisplay(details,rowNode,result,uiLevel),!(skipLeafNodes&&rowNode.leafGroup)){if(isParent){const excludedParent=isRemovedSingleChildrenGroup||isRemovedLowestSingleChildrenGroup;if(rowNode.expanded||excludedParent){const doesRowShowFooter=details.groupTotalRow({node:rowNode});doesRowShowFooter||rowNode.destroyFooter();const uiLevelForChildren=excludedParent?uiLevel:uiLevel+1;doesRowShowFooter==="top"&&(rowNode.createFooter(),this.addRowNodeToRowsToDisplay(details,rowNode.sibling,result,uiLevelForChildren)),this.recursivelyAddToRowsToDisplay(details,rowNode.childrenAfterSort,result,skipLeafNodes,uiLevelForChildren),doesRowShowFooter==="bottom"&&(rowNode.createFooter(),this.addRowNodeToRowsToDisplay(details,rowNode.sibling,result,uiLevelForChildren))}}else if(rowNode.master&&rowNode.expanded){const detailNode=this.createDetailNode(rowNode);this.addRowNodeToRowsToDisplay(details,detailNode,result,uiLevel)}}}}addRowNodeToRowsToDisplay(details,rowNode,result,uiLevel,addToTop){addToTop?result.unshift(rowNode):result.push(rowNode),rowNode.setUiLevel(details.isGroupMultiAutoColumn?0:uiLevel)}createDetailNode(masterNode){if(_exists(masterNode.detailNode))return masterNode.detailNode;const detailNode=new RowNode(this.beans);return detailNode.detail=!0,detailNode.selectable=!1,detailNode.parent=masterNode,_exists(masterNode.id)&&(detailNode.id="detail_"+masterNode.id),detailNode.data=masterNode.data,detailNode.level=masterNode.level+1,masterNode.detailNode=detailNode,detailNode}},__name(_a240,"FlattenStage"),_a240),_a241,ImmutableService=(_a241=class extends BeanStub{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(beans){this.rowModel=beans.rowModel,this.selectionService=beans.selectionService}postConstruct(){_isClientSideRowModel(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const getRowIdProvided=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:getRowIdProvided}setRowData(rowData){const rowDataTransaction=this.createTransactionForRowData(rowData);if(!rowDataTransaction)return;const nodeManager=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction,rowsInserted}=nodeManager.updateRowData(rowDataTransaction);let orderChanged=!1;this.gos.get("suppressMaintainUnsortedOrder")||(orderChanged=nodeManager.updateRowOrderFromRowData(rowData)),this.clientSideRowModel.afterImmutableDataChange(rowNodeTransaction,orderChanged||rowsInserted)}createTransactionForRowData(rowData){if(!_isClientSideRowModel(this.gos))return _errorOnce("ImmutableService only works with ClientSideRowModel"),null;const getRowIdFunc=_getRowIdCallback(this.gos);if(getRowIdFunc==null)return _errorOnce("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const existingNodesMap=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),remove=[],update=[],add=[];return _exists(rowData)&&rowData.forEach(data=>{const id=getRowIdFunc({data,level:0}),existingNode=existingNodesMap[id];existingNode?(existingNode.data!==data&&update.push(data),existingNodesMap[id]=void 0):add.push(data)}),_iterateObject(existingNodesMap,(id,rowNode)=>{rowNode&&remove.push(rowNode.data)}),{remove,update,add}}onRowDataUpdated(){const rowData=this.gos.get("rowData");rowData&&(this.isActive()?this.setRowData(rowData):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(rowData)))}},__name(_a241,"ImmutableService"),_a241),_a242,SortService=(_a242=class extends BeanStub{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(beans){this.columnModel=beans.columnModel,this.funcColsService=beans.funcColsService,this.rowNodeSorter=beans.rowNodeSorter,this.showRowGroupColsService=beans.showRowGroupColsService}sort(sortOptions,sortActive,useDeltaSort,rowNodeTransactions,changedPath,sortContainsGroupColumns){const groupMaintainOrder=this.gos.get("groupMaintainOrder"),groupColumnsPresent=this.columnModel.getCols().some(c=>c.isRowGroupActive());let allDirtyNodes={};useDeltaSort&&rowNodeTransactions&&(allDirtyNodes=this.calculateDirtyNodes(rowNodeTransactions));const isPivotMode=this.columnModel.isPivotMode(),postSortFunc=this.gos.getCallback("postSortRows"),callback=__name(rowNode=>{var _a253;this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterAggFilter,!0);const skipSortingPivotLeafs=isPivotMode&&rowNode.leafGroup;if(groupMaintainOrder&&groupColumnsPresent&&!rowNode.leafGroup&&!sortContainsGroupColumns){const nextGroup=(_a253=this.funcColsService.getRowGroupColumns())==null?void 0:_a253[rowNode.level+1],wasSortExplicitlyRemoved=(nextGroup==null?void 0:nextGroup.getSort())===null,childrenToBeSorted=rowNode.childrenAfterAggFilter.slice(0);if(rowNode.childrenAfterSort&&!wasSortExplicitlyRemoved){const indexedOrders={};rowNode.childrenAfterSort.forEach((node,idx)=>{indexedOrders[node.id]=idx}),childrenToBeSorted.sort((row1,row2)=>(indexedOrders[row1.id]??0)-(indexedOrders[row2.id]??0))}rowNode.childrenAfterSort=childrenToBeSorted}else!sortActive||skipSortingPivotLeafs?rowNode.childrenAfterSort=rowNode.childrenAfterAggFilter.slice(0):useDeltaSort?rowNode.childrenAfterSort=this.doDeltaSort(rowNode,allDirtyNodes,changedPath,sortOptions):rowNode.childrenAfterSort=this.rowNodeSorter.doFullSort(rowNode.childrenAfterAggFilter,sortOptions);if(rowNode.sibling&&(rowNode.sibling.childrenAfterSort=rowNode.childrenAfterSort),this.updateChildIndexes(rowNode),postSortFunc){const params={nodes:rowNode.childrenAfterSort};postSortFunc(params)}},"callback");changedPath&&changedPath.forEachChangedNodeDepthFirst(callback),this.updateGroupDataForHideOpenParents(changedPath)}calculateDirtyNodes(rowNodeTransactions){const dirtyNodes={},addNodesFunc=__name(rowNodes=>{rowNodes&&rowNodes.forEach(rowNode=>dirtyNodes[rowNode.id]=!0)},"addNodesFunc");return rowNodeTransactions&&rowNodeTransactions.forEach(tran=>{addNodesFunc(tran.add),addNodesFunc(tran.update),addNodesFunc(tran.remove)}),dirtyNodes}doDeltaSort(rowNode,allTouchedNodes,changedPath,sortOptions){const unsortedRows=rowNode.childrenAfterAggFilter,oldSortedRows=rowNode.childrenAfterSort;if(!oldSortedRows)return this.rowNodeSorter.doFullSort(unsortedRows,sortOptions);const untouchedRowsMap={},touchedRows=[];unsortedRows.forEach(row=>{allTouchedNodes[row.id]||!changedPath.canSkip(row)?touchedRows.push(row):untouchedRowsMap[row.id]=!0});const sortedUntouchedRows=oldSortedRows.filter(child=>untouchedRowsMap[child.id]),mapNodeToSortedNode=__name((rowNode2,pos)=>({currentPos:pos,rowNode:rowNode2}),"mapNodeToSortedNode"),sortedChangedRows=touchedRows.map(mapNodeToSortedNode).sort((a,b)=>this.rowNodeSorter.compareRowNodes(sortOptions,a,b));return this.mergeSortedArrays(sortOptions,sortedChangedRows,sortedUntouchedRows.map(mapNodeToSortedNode)).map(({rowNode:rowNode2})=>rowNode2)}mergeSortedArrays(sortOptions,arr1,arr2){const res=[];let i=0,j=0;for(;i<arr1.length&&j<arr2.length;)this.rowNodeSorter.compareRowNodes(sortOptions,arr1[i],arr2[j])<0?res.push(arr1[i++]):res.push(arr2[j++]);for(;i<arr1.length;)res.push(arr1[i++]);for(;j<arr2.length;)res.push(arr2[j++]);return res}updateChildIndexes(rowNode){if(_missing(rowNode.childrenAfterSort))return;const listToSort=rowNode.childrenAfterSort;for(let i=0;i<listToSort.length;i++){const child=listToSort[i],firstChild=i===0,lastChild=i===rowNode.childrenAfterSort.length-1;child.setFirstChild(firstChild),child.setLastChild(lastChild),child.setChildIndex(i)}}updateGroupDataForHideOpenParents(changedPath){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return _warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const callback=__name(rowNode=>{this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterSort,!1),rowNode.childrenAfterSort.forEach(child=>{child.hasChildren()&&callback(child)})},"callback");changedPath&&changedPath.executeFromRootNode(rowNode=>callback(rowNode))}pullDownGroupDataForHideOpenParents(rowNodes,clearOperation){!this.gos.get("groupHideOpenParents")||_missing(rowNodes)||rowNodes.forEach(childRowNode=>{var _a253;(((_a253=this.showRowGroupColsService)==null?void 0:_a253.getShowRowGroupCols())??[]).forEach(groupDisplayCol=>{const showRowGroup=groupDisplayCol.getColDef().showRowGroup;if(typeof showRowGroup!="string"){_errorOnce("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const displayingGroupKey=showRowGroup,rowGroupColumn=this.columnModel.getColDefCol(displayingGroupKey);if(rowGroupColumn!==childRowNode.rowGroupColumn)if(clearOperation)childRowNode.setGroupValue(groupDisplayCol.getId(),void 0);else{const parentToStealFrom=this.getFirstChildOfFirstChild(childRowNode,rowGroupColumn);parentToStealFrom&&childRowNode.setGroupValue(groupDisplayCol.getId(),parentToStealFrom.key)}})})}getFirstChildOfFirstChild(node,rowGroupColumn){let currentRowNode=node;for(;currentRowNode;){const parentRowNode=currentRowNode.parent;if(parentRowNode&&currentRowNode.firstChild){if(parentRowNode.rowGroupColumn===rowGroupColumn)return parentRowNode}else return null;currentRowNode=parentRowNode}return null}},__name(_a242,"SortService"),_a242),_a243,SortStage=(_a243=class extends BeanStub{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(beans){this.sortService=beans.sortService,this.sortController=beans.sortController}execute(params){const sortOptions=this.sortController.getSortOptions(),sortActive=_exists(sortOptions)&&sortOptions.length>0,deltaSort=sortActive&&_exists(params.rowNodeTransactions)&&this.gos.get("deltaSort"),sortContainsGroupColumns=sortOptions.some(opt=>_isColumnsSortingCoupledToGroup(this.gos)?opt.column.isPrimary()&&opt.column.isRowGroupActive():!!opt.column.getColDef().showRowGroup);this.sortService.sort(sortOptions,sortActive,deltaSort,params.rowNodeTransactions,params.changedPath,sortContainsGroupColumns)}},__name(_a243,"SortStage"),_a243),VERSION2="32.2.1",ClientSideRowModelCoreModule={version:VERSION2,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[ClientSideRowModel,FilterStage,SortStage,FlattenStage,SortService,ImmutableService]},ClientSideRowModelApiModule={version:VERSION2,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[RowModelHelperService],apiFunctions:{onGroupExpandedOrCollapsed,refreshClientSideRowModel,isRowDataEmpty,forEachLeafNode,forEachNodeAfterFilter,forEachNodeAfterFilterAndSort,resetRowHeights,applyTransaction,applyTransactionAsync,flushAsyncTransactions,getBestCostNodeSelection},dependantModules:[ClientSideRowModelCoreModule,CsrmSsrmSharedApiModule]},ClientSideRowModelModule={version:VERSION2,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[ClientSideRowModelCoreModule,ClientSideRowModelApiModule]},_a244,BaseCreator=(_a244=class extends BeanStub{setBeans(beans){this.beans=beans}getFileName(fileName){const extension=this.getDefaultFileExtension();return(fileName==null||!fileName.length)&&(fileName=this.getDefaultFileName()),fileName.indexOf(".")===-1?`${fileName}.${extension}`:fileName}getData(params){const serializingSession=this.createSerializingSession(params);return this.beans.gridSerializer.serialize(serializingSession,params)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},__name(_a244,"BaseCreator"),_a244),_a245,BaseGridSerializingSession=(_a245=class{constructor(config){this.groupColumns=[];const{columnModel,funcColsService,columnNameService,valueService,gos,processCellCallback,processHeaderCallback,processGroupHeaderCallback,processRowGroupCallback}=config;this.columnModel=columnModel,this.funcColsService=funcColsService,this.columnNameService=columnNameService,this.valueService=valueService,this.gos=gos,this.processCellCallback=processCellCallback,this.processHeaderCallback=processHeaderCallback,this.processGroupHeaderCallback=processGroupHeaderCallback,this.processRowGroupCallback=processRowGroupCallback}prepare(columnsToExport){this.groupColumns=columnsToExport.filter(col=>!!col.getColDef().showRowGroup)}extractHeaderValue(column){return this.getHeaderName(this.processHeaderCallback,column)??""}extractRowCellValue(column,index,accumulatedRowIndex,type,node){const value=(!this.gos.get("groupHideOpenParents")||node.footer)&&this.shouldRenderGroupSummaryCell(node,column,index)?this.createValueForGroupNode(column,node):this.valueService.getValue(column,node);return this.processCell({accumulatedRowIndex,rowNode:node,column,value,processCellCallback:this.processCellCallback,type})}shouldRenderGroupSummaryCell(node,column,currentColumnIndex){var _a253;if(!(node&&node.group))return!1;if(this.groupColumns.indexOf(column)!==-1){if(((_a253=node.groupData)==null?void 0:_a253[column.getId()])!=null||_isServerSideRowModel(this.gos)&&node.group)return!0;if(node.footer&&node.level===-1){const colDef=column.getColDef();return colDef==null||colDef.showRowGroup===!0||colDef.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const isGroupUseEntireRow=_isGroupUseEntireRow(this.gos,this.columnModel.isPivotMode());return currentColumnIndex===0&&isGroupUseEntireRow}getHeaderName(callback,column){return callback?callback(this.gos.addGridCommonParams({column})):this.columnNameService.getDisplayNameForColumn(column,"csv",!0)}createValueForGroupNode(column,node){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column,node}));const isTreeData=this.gos.get("treeData"),isSuppressGroupMaintainValueType=this.gos.get("suppressGroupMaintainValueType"),getValueFromNode=__name(node2=>{var _a253;if(isTreeData||isSuppressGroupMaintainValueType)return node2.key;const value=(_a253=node2.groupData)==null?void 0:_a253[column.getId()];return!value||!node2.rowGroupColumn||node2.rowGroupColumn.getColDef().useValueFormatterForExport===!1?value:this.valueService.formatValue(node2.rowGroupColumn,node2,value)??value},"getValueFromNode"),isFooter=node.footer,keys=[getValueFromNode(node)];if(!_isGroupMultiAutoColumn(this.gos))for(;node.parent;)node=node.parent,keys.push(getValueFromNode(node));const groupValue=keys.reverse().join(" -> ");return isFooter?`Total ${groupValue}`:groupValue}processCell(params){const{accumulatedRowIndex,rowNode,column,value,processCellCallback,type}=params;return processCellCallback?{value:processCellCallback(this.gos.addGridCommonParams({accumulatedRowIndex,column,node:rowNode,value,type,parseValue:__name(valueToParse=>this.valueService.parseValue(column,rowNode,valueToParse,this.valueService.getValue(column,rowNode)),"parseValue"),formatValue:__name(valueToFormat=>this.valueService.formatValue(column,rowNode,valueToFormat)??valueToFormat,"formatValue")}))??""}:column.getColDef().useValueFormatterForExport!==!1?{value:value??"",valueFormatted:this.valueService.formatValue(column,rowNode,value)}:{value:value??""}}},__name(_a245,"BaseGridSerializingSession"),_a245),_a246,Downloader=(_a246=class{static download(fileName,content){const win=document.defaultView||window;if(!win){_warnOnce("There is no `window` associated with the current `document`");return}const element=document.createElement("a"),url=win.URL.createObjectURL(content);element.setAttribute("href",url),element.setAttribute("download",fileName),element.style.display="none",document.body.appendChild(element),element.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:win})),document.body.removeChild(element),win.setTimeout(()=>{win.URL.revokeObjectURL(url)},0)}},__name(_a246,"Downloader"),_a246),LINE_SEPARATOR=`\r
`,_a247,CsvSerializingSession=(_a247=class extends BaseGridSerializingSession{constructor(config){super(config),this.isFirstLine=!0,this.result="";const{suppressQuotes,columnSeparator}=config;this.suppressQuotes=suppressQuotes,this.columnSeparator=columnSeparator}addCustomContent(content){content&&(typeof content=="string"?(/^\s*\n/.test(content)||this.beginNewLine(),content=content.replace(/\r?\n/g,LINE_SEPARATOR),this.result+=content):content.forEach(row=>{this.beginNewLine(),row.forEach((cell,index)=>{index!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(cell.data.value||""),cell.mergeAcross&&this.appendEmptyCells(cell.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(columnGroup,header,index,span){index!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(header),this.appendEmptyCells(span)}appendEmptyCells(count){for(let i=1;i<=count;i++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(column,index){index!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(column))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(column,index,node){index!=0&&(this.result+=this.columnSeparator);const rowCellValue=this.extractRowCellValue(column,index,index,"csv",node);this.result+=this.putInQuotes(rowCellValue.valueFormatted??rowCellValue.value)}putInQuotes(value){if(this.suppressQuotes)return value;if(value==null)return'""';let stringValue;return typeof value=="string"?stringValue=value:typeof value.toString=="function"?stringValue=value.toString():(_warnOnce("unknown value type during csv conversion"),stringValue=""),'"'+stringValue.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=LINE_SEPARATOR),this.isFirstLine=!1}},__name(_a247,"CsvSerializingSession"),_a247),_a248,CsvCreator=(_a248=class extends BaseCreator{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(beans){this.columnModel=beans.columnModel,this.columnNameService=beans.columnNameService,this.funcColsService=beans.funcColsService,this.valueService=beans.valueService,this.gridSerializer=beans.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(params){const baseParams=this.gos.get("defaultCsvExportParams");return Object.assign({},baseParams,params)}export(userParams){if(this.isExportSuppressed()){_warnOnce("Export cancelled. Export is not allowed as per your configuration.");return}const mergedParams=this.getMergedParams(userParams),data=this.getData(mergedParams),packagedFile=new Blob(["\uFEFF",data],{type:"text/plain"}),fileName=typeof mergedParams.fileName=="function"?mergedParams.fileName(this.gos.getGridCommonParams()):mergedParams.fileName;Downloader.download(this.getFileName(fileName),packagedFile)}exportDataAsCsv(params){this.export(params)}getDataAsCsv(params,skipDefaultParams=!1){const mergedParams=skipDefaultParams?Object.assign({},params):this.getMergedParams(params);return this.getData(mergedParams)}getDefaultFileExtension(){return"csv"}createSerializingSession(params){const{columnModel,columnNameService,funcColsService,valueService,gos}=this,{processCellCallback,processHeaderCallback,processGroupHeaderCallback,processRowGroupCallback,suppressQuotes,columnSeparator}=params;return new CsvSerializingSession({columnModel,columnNameService,funcColsService,valueService,gos,processCellCallback:processCellCallback||void 0,processHeaderCallback:processHeaderCallback||void 0,processGroupHeaderCallback:processGroupHeaderCallback||void 0,processRowGroupCallback:processRowGroupCallback||void 0,suppressQuotes:suppressQuotes||!1,columnSeparator:columnSeparator||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}},__name(_a248,"CsvCreator"),_a248);function getDataAsCsv(beans,params){var _a253;return(_a253=beans.csvCreator)==null?void 0:_a253.getDataAsCsv(params)}__name(getDataAsCsv,"getDataAsCsv");function exportDataAsCsv(beans,params){var _a253;(_a253=beans.csvCreator)==null||_a253.exportDataAsCsv(params)}__name(exportDataAsCsv,"exportDataAsCsv");var _a249,GridSerializer=(_a249=class extends BeanStub{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(beans){this.visibleColsService=beans.visibleColsService,this.columnModel=beans.columnModel,this.columnNameService=beans.columnNameService,this.rowModel=beans.rowModel,this.pinnedRowModel=beans.pinnedRowModel,this.selectionService=beans.selectionService,this.rowNodeSorter=beans.rowNodeSorter,this.sortController=beans.sortController}serialize(gridSerializingSession,params={}){const{allColumns,columnKeys,skipRowGroups}=params,columnsToExport=this.getColumnsToExport(allColumns,skipRowGroups,columnKeys);return _compose(this.prepareSession(columnsToExport),this.prependContent(params),this.exportColumnGroups(params,columnsToExport),this.exportHeaders(params,columnsToExport),this.processPinnedTopRows(params,columnsToExport),this.processRows(params,columnsToExport),this.processPinnedBottomRows(params,columnsToExport),this.appendContent(params))(gridSerializingSession).parse()}processRow(gridSerializingSession,params,columnsToExport,node){var _a253;const rowSkipper=params.shouldRowBeSkipped||(()=>!1),skipSingleChildrenGroup=this.gos.get("groupRemoveSingleChildren"),skipLowestSingleChildrenGroup=this.gos.get("groupRemoveLowestSingleChildren"),isExplicitExportSelection=params.rowPositions!=null||!!params.onlySelected,hideOpenParents=this.gos.get("groupHideOpenParents")&&!isExplicitExportSelection,isLeafNode=this.columnModel.isPivotMode()?node.leafGroup:!node.group,isFooter=!!node.footer,shouldSkipLowestGroup=skipLowestSingleChildrenGroup&&node.leafGroup,shouldSkipCurrentGroup=node.allChildrenCount===1&&((_a253=node.childrenAfterGroup)==null?void 0:_a253.length)===1&&(skipSingleChildrenGroup||shouldSkipLowestGroup);if(!isLeafNode&&!isFooter&&(params.skipRowGroups||shouldSkipCurrentGroup||hideOpenParents)||params.onlySelected&&!node.isSelected()||params.skipPinnedTop&&node.rowPinned==="top"||params.skipPinnedBottom&&node.rowPinned==="bottom"||node.level===-1&&!isLeafNode&&!isFooter||rowSkipper(this.gos.addGridCommonParams({node})))return;const rowAccumulator=gridSerializingSession.onNewBodyRow(node);if(columnsToExport.forEach((column,index)=>{rowAccumulator.onColumn(column,index,node)}),params.getCustomContentBelowRow){const content=params.getCustomContentBelowRow(this.gos.addGridCommonParams({node}));content&&gridSerializingSession.addCustomContent(content)}}appendContent(params){return gridSerializingSession=>{const appendContent=params.appendContent;return appendContent&&gridSerializingSession.addCustomContent(appendContent),gridSerializingSession}}prependContent(params){return gridSerializingSession=>{const prependContent=params.prependContent;return prependContent&&gridSerializingSession.addCustomContent(prependContent),gridSerializingSession}}prepareSession(columnsToExport){return gridSerializingSession=>(gridSerializingSession.prepare(columnsToExport),gridSerializingSession)}exportColumnGroups(params,columnsToExport){return gridSerializingSession=>{if(!params.skipColumnGroupHeaders){const idCreator=new GroupInstanceIdCreator,displayedGroups=this.visibleColsService.createGroups({columns:columnsToExport,idCreator,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(displayedGroups,gridSerializingSession,params.processGroupHeaderCallback)}return gridSerializingSession}}exportHeaders(params,columnsToExport){return gridSerializingSession=>{if(!params.skipColumnHeaders){const gridRowIterator=gridSerializingSession.onNewHeaderRow();columnsToExport.forEach((column,index)=>{gridRowIterator.onColumn(column,index,void 0)})}return gridSerializingSession}}processPinnedTopRows(params,columnsToExport){return gridSerializingSession=>{const processRow=this.processRow.bind(this,gridSerializingSession,params,columnsToExport);return params.rowPositions?params.rowPositions.filter(position=>position.rowPinned==="top").sort((a,b)=>a.rowIndex-b.rowIndex).map(position=>this.pinnedRowModel.getPinnedTopRow(position.rowIndex)).forEach(processRow):this.pinnedRowModel.forEachPinnedRow("top",processRow),gridSerializingSession}}processRows(params,columnsToExport){return gridSerializingSession=>{const rowModel=this.rowModel,usingCsrm=_isClientSideRowModel(this.gos),usingSsrm=_isServerSideRowModel(this.gos),onlySelectedNonStandardModel=!usingCsrm&&params.onlySelected,processRow=this.processRow.bind(this,gridSerializingSession,params,columnsToExport),{exportedRows="filteredAndSorted"}=params;if(params.rowPositions)params.rowPositions.filter(position=>position.rowPinned==null).sort((a,b)=>a.rowIndex-b.rowIndex).map(position=>rowModel.getRow(position.rowIndex)).forEach(processRow);else if(this.columnModel.isPivotMode())usingCsrm?rowModel.forEachPivotNode(processRow,!0):usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow,!0):rowModel.forEachNode(processRow);else if(params.onlySelectedAllPages||onlySelectedNonStandardModel){const selectedNodes=this.selectionService.getSelectedNodes();this.replicateSortedOrder(selectedNodes),selectedNodes.forEach(processRow)}else exportedRows==="all"?rowModel.forEachNode(processRow):usingCsrm||usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow,!0):rowModel.forEachNode(processRow);return gridSerializingSession}}replicateSortedOrder(rows){const sortOptions=this.sortController.getSortOptions(),compareNodes=__name((rowA,rowB)=>{var _a253,_b;return rowA.rowIndex!=null&&rowB.rowIndex!=null?rowA.rowIndex-rowB.rowIndex:rowA.level===rowB.level?((_a253=rowA.parent)==null?void 0:_a253.id)===((_b=rowB.parent)==null?void 0:_b.id)?this.rowNodeSorter.compareRowNodes(sortOptions,{rowNode:rowA,currentPos:rowA.rowIndex??-1},{rowNode:rowB,currentPos:rowB.rowIndex??-1}):compareNodes(rowA.parent,rowB.parent):rowA.level>rowB.level?compareNodes(rowA.parent,rowB):compareNodes(rowA,rowB.parent)},"compareNodes");rows.sort(compareNodes)}processPinnedBottomRows(params,columnsToExport){return gridSerializingSession=>{const processRow=this.processRow.bind(this,gridSerializingSession,params,columnsToExport);return params.rowPositions?params.rowPositions.filter(position=>position.rowPinned==="bottom").sort((a,b)=>a.rowIndex-b.rowIndex).map(position=>this.pinnedRowModel.getPinnedBottomRow(position.rowIndex)).forEach(processRow):this.pinnedRowModel.forEachPinnedRow("bottom",processRow),gridSerializingSession}}getColumnsToExport(allColumns=!1,skipRowGroups=!1,columnKeys){const isPivotMode=this.columnModel.isPivotMode();if(columnKeys&&columnKeys.length)return this.columnModel.getColsForKeys(columnKeys);const isTreeData=this.gos.get("treeData");let columnsToExport=[];return allColumns&&!isPivotMode?columnsToExport=this.columnModel.getCols():columnsToExport=this.visibleColsService.getAllCols(),skipRowGroups&&!isTreeData&&(columnsToExport=columnsToExport.filter(column=>isColumnGroupAutoCol(column)||isColumnControlsCol(column))),columnsToExport}recursivelyAddHeaderGroups(displayedGroups,gridSerializingSession,processGroupHeaderCallback){const directChildrenHeaderGroups=[];displayedGroups.forEach(columnGroupChild=>{const columnGroup=columnGroupChild;columnGroup.getChildren&&columnGroup.getChildren().forEach(it=>directChildrenHeaderGroups.push(it))}),displayedGroups.length>0&&isColumnGroup(displayedGroups[0])&&this.doAddHeaderHeader(gridSerializingSession,displayedGroups,processGroupHeaderCallback),directChildrenHeaderGroups&&directChildrenHeaderGroups.length>0&&this.recursivelyAddHeaderGroups(directChildrenHeaderGroups,gridSerializingSession,processGroupHeaderCallback)}doAddHeaderHeader(gridSerializingSession,displayedGroups,processGroupHeaderCallback){const gridRowIterator=gridSerializingSession.onNewHeaderGroupingRow();let columnIndex=0;displayedGroups.forEach(columnGroupChild=>{const columnGroup=columnGroupChild;let name;processGroupHeaderCallback?name=processGroupHeaderCallback(this.gos.addGridCommonParams({columnGroup})):name=this.columnNameService.getDisplayNameForColumnGroup(columnGroup,"header");const collapsibleGroupRanges=columnGroup.getLeafColumns().reduce((collapsibleGroups,currentColumn,currentIdx,arr)=>{let lastGroup=_last(collapsibleGroups);return currentColumn.getColumnGroupShow()==="open"?(!lastGroup||lastGroup[1]!=null)&&(lastGroup=[currentIdx],collapsibleGroups.push(lastGroup)):lastGroup&&lastGroup[1]==null&&(lastGroup[1]=currentIdx-1),currentIdx===arr.length-1&&lastGroup&&lastGroup[1]==null&&(lastGroup[1]=currentIdx),collapsibleGroups},[]);gridRowIterator.onColumn(columnGroup,name||"",columnIndex++,columnGroup.getLeafColumns().length-1,collapsibleGroupRanges)})}},__name(_a249,"GridSerializer"),_a249),VERSION3="32.2.1",CsvExportCoreModule={version:VERSION3,moduleName:"@ag-grid-community/csv-export-core",beans:[CsvCreator,GridSerializer]},CsvExportApiModule={version:VERSION3,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv,exportDataAsCsv},dependantModules:[CsvExportCoreModule]},CsvExportModule={version:VERSION3,moduleName:"@ag-grid-community/csv-export",dependantModules:[CsvExportCoreModule,CsvExportApiModule]},_a250,InfiniteBlock=(_a250=class extends RowNodeBlock{wireBeans(beans){this.beans=beans}constructor(id,parentCache,params){super(id),this.parentCache=parentCache,this.params=params,this.startRow=id*params.blockSize,this.endRow=this.startRow+params.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(rowNode,data,index){_exists(data)?rowNode.setDataAndId(data,index.toString()):rowNode.setDataAndId(void 0,void 0)}loadFromDatasource(){const params=this.createLoadParams();if(_missing(this.params.datasource.getRows)){_warnOnce("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(params)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(callback,sequence,rowCount){this.rowNodes.forEach((rowNode,index)=>{this.startRow+index<rowCount&&callback(rowNode,sequence.next())})}getLastAccessed(){return this.lastAccessed}getRow(rowIndex,dontTouchLastAccessed=!1){dontTouchLastAccessed||(this.lastAccessed=this.params.lastAccessedSequence.next());const localIndex=rowIndex-this.startRow;return this.rowNodes[localIndex]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let i=0;i<this.params.blockSize;i++){const rowIndex=this.startRow+i,rowNode=new RowNode(this.beans);rowNode.setRowHeight(this.params.rowHeight),rowNode.uiLevel=0,rowNode.setRowIndex(rowIndex),rowNode.setRowTop(this.params.rowHeight*rowIndex),this.rowNodes.push(rowNode)}}processServerResult(params){this.rowNodes.forEach((rowNode,index)=>{const data=params.rowData?params.rowData[index]:void 0;!rowNode.id&&rowNode.alreadyRendered&&data&&(this.rowNodes[index]=new RowNode(this.beans),this.rowNodes[index].setRowIndex(rowNode.rowIndex),this.rowNodes[index].setRowTop(rowNode.rowTop),this.rowNodes[index].setRowHeight(rowNode.rowHeight),rowNode.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[index],data,this.startRow+index)});const finalRowCount=params.rowCount!=null&&params.rowCount>=0?params.rowCount:void 0;this.parentCache.pageLoaded(this,finalRowCount)}destroy(){this.rowNodes.forEach(rowNode=>{rowNode.clearRowTopAndRowIndex()}),super.destroy()}},__name(_a250,"InfiniteBlock"),_a250),MAX_EMPTY_BLOCKS_TO_KEEP=2,_a251,InfiniteCache=(_a251=class extends BeanStub{constructor(params){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=params.initialRowCount,this.params=params}wireBeans(beans){this.rowRenderer=beans.rowRenderer,this.focusService=beans.focusService}getRow(rowIndex,dontCreatePage=!1){const blockId=Math.floor(rowIndex/this.params.blockSize);let block=this.blocks[blockId];if(!block){if(dontCreatePage)return;block=this.createBlock(blockId)}return block.getRow(rowIndex)}createBlock(blockNumber){const newBlock=this.createBean(new InfiniteBlock(blockNumber,this,this.params));return this.blocks[newBlock.getId()]=newBlock,this.blockCount++,this.purgeBlocksIfNeeded(newBlock),this.params.rowNodeBlockLoader.addBlock(newBlock),newBlock}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(block=>block.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(block=>this.destroyBlock(block)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(block,lastRow){this.isAlive()&&(this.gos.get("debug")&&_log(`InfiniteCache - onPageLoaded: page = ${block.getId()}, lastRow = ${lastRow}`),this.checkRowCount(block,lastRow),this.onCacheUpdated())}purgeBlocksIfNeeded(blockToExclude){const blocksForPurging=this.getBlocksInOrder().filter(b=>b!=blockToExclude),lastAccessedComparator=__name((a,b)=>b.getLastAccessed()-a.getLastAccessed(),"lastAccessedComparator");blocksForPurging.sort(lastAccessedComparator);const maxBlocksProvided=this.params.maxBlocksInCache>0,blocksToKeep=maxBlocksProvided?this.params.maxBlocksInCache-1:null,emptyBlocksToKeep=MAX_EMPTY_BLOCKS_TO_KEEP-1;blocksForPurging.forEach((block,index)=>{const purgeBecauseBlockEmpty=block.getState()==="needsLoading"&&index>=emptyBlocksToKeep,purgeBecauseCacheFull=maxBlocksProvided?index>=blocksToKeep:!1;if(purgeBecauseBlockEmpty||purgeBecauseCacheFull){if(this.isBlockCurrentlyDisplayed(block)||this.isBlockFocused(block))return;this.removeBlockFromCache(block)}})}isBlockFocused(block){const focusedCell=this.focusService.getFocusCellToUseAfterRefresh();if(!focusedCell||focusedCell.rowPinned!=null)return!1;const blockIndexStart=block.getStartRow(),blockIndexEnd=block.getEndRow();return focusedCell.rowIndex>=blockIndexStart&&focusedCell.rowIndex<blockIndexEnd}isBlockCurrentlyDisplayed(block){const startIndex=block.getStartRow(),endIndex=block.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(startIndex,endIndex)}removeBlockFromCache(blockToRemove){blockToRemove&&this.destroyBlock(blockToRemove)}checkRowCount(block,lastRow){if(typeof lastRow=="number"&&lastRow>=0)this.rowCount=lastRow,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const lastRowIndexPlusOverflow=(block.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<lastRowIndexPlusOverflow&&(this.rowCount=lastRowIndexPlusOverflow)}}setRowCount(rowCount,lastRowIndexKnown){this.rowCount=rowCount,_exists(lastRowIndexKnown)&&(this.lastRowIndexKnown=lastRowIndexKnown),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(callback){const sequence=new NumberSequence;this.getBlocksInOrder().forEach(block=>block.forEachNode(callback,sequence,this.rowCount))}getBlocksInOrder(){const blockComparator=__name((a,b)=>a.getId()-b.getId(),"blockComparator");return _getAllValuesInObject(this.blocks).sort(blockComparator)}destroyBlock(block){delete this.blocks[block.getId()],this.destroyBean(block),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(block)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const blocksToDestroy=[];this.getBlocksInOrder().forEach(block=>{block.getId()*this.params.blockSize>=this.rowCount&&blocksToDestroy.push(block)}),blocksToDestroy.length>0&&blocksToDestroy.forEach(block=>this.destroyBlock(block))}purgeCache(){this.getBlocksInOrder().forEach(block=>this.removeBlockFromCache(block)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(firstInRange,lastInRange){const result=[];let lastBlockId=-1,inActiveRange=!1;const numberSequence=new NumberSequence;let foundGapInSelection=!1;return this.getBlocksInOrder().forEach(block=>{if(!foundGapInSelection){if(inActiveRange&&lastBlockId+1!==block.getId()){foundGapInSelection=!0;return}lastBlockId=block.getId(),block.forEachNode(rowNode=>{const hitFirstOrLast=rowNode===firstInRange||rowNode===lastInRange;(inActiveRange||hitFirstOrLast)&&result.push(rowNode),hitFirstOrLast&&(inActiveRange=!inActiveRange)},numberSequence,this.rowCount)}}),foundGapInSelection||inActiveRange?[]:result}},__name(_a251,"InfiniteCache"),_a251),_a252,InfiniteRowModel=(_a252=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(beans){this.filterManager=beans.filterManager,this.sortController=beans.sortController,this.selectionService=beans.selectionService,this.rowRenderer=beans.rowRenderer,this.rowNodeBlockLoader=beans.rowNodeBlockLoader}getRowBounds(index){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*index}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=_getRowHeightAsNumber(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&_warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=_getRowHeightAsNumber(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let resetRequired;this.cacheParams?resetRequired=this.isSortModelDifferent():resetRequired=!0,resetRequired&&this.reset()}isSortModelDifferent(){return!_jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(datasource){this.destroyDatasource(),this.datasource=datasource,datasource&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(firstInRange,lastInRange){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(firstInRange,lastInRange):[]}reset(){if(!this.datasource)return;_getRowIdCallback(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){var _a253;this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:((_a253=this.filterManager)==null?void 0:_a253.getFilterModel())??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:_getRowHeightAsNumber(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new NumberSequence},this.infiniteCache=this.createBean(new InfiniteCache(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(node=>{node.setRowHeight(this.rowHeight),node.setRowTop(this.rowHeight*node.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(rowIndex){if(this.infiniteCache&&!(rowIndex>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(rowIndex)}getRowNode(id){let result;return this.forEachNode(rowNode=>{rowNode.id===id&&(result=rowNode)}),result}forEachNode(callback){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(callback)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(topLevelIndex){return topLevelIndex}getRowIndexAtPixel(pixel){if(this.rowHeight!==0){const rowIndexForPixel=Math.floor(pixel/this.rowHeight),lastRowIndex=this.getRowCount()-1;return rowIndexForPixel>lastRowIndex?lastRowIndex:rowIndexForPixel}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(rowNode){return!!this.getRowNode(rowNode.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(rowCount,lastRowIndexKnown){this.infiniteCache&&this.infiniteCache.setRowCount(rowCount,lastRowIndexKnown)}},__name(_a252,"InfiniteRowModel"),_a252);function refreshInfiniteCache(beans){var _a253,_b;(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getInfiniteRowModel())==null||_b.refreshCache()}__name(refreshInfiniteCache,"refreshInfiniteCache");function purgeInfiniteCache(beans){var _a253,_b;(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getInfiniteRowModel())==null||_b.purgeCache()}__name(purgeInfiniteCache,"purgeInfiniteCache");function getInfiniteRowCount(beans){var _a253,_b;return(_b=(_a253=beans.rowModelHelperService)==null?void 0:_a253.getInfiniteRowModel())==null?void 0:_b.getRowCount()}__name(getInfiniteRowCount,"getInfiniteRowCount");var VERSION4="32.2.1",InfiniteRowModelCoreModule={version:VERSION4,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[InfiniteRowModel],dependantModules:[RowNodeBlockModule]},InfiniteRowModelApiModule={version:VERSION4,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[RowModelHelperService],apiFunctions:{refreshInfiniteCache,purgeInfiniteCache,getInfiniteRowCount},dependantModules:[InfiniteRowModelCoreModule,SsrmInfiniteSharedApiModule]},InfiniteRowModelModule={version:VERSION4,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[InfiniteRowModelCoreModule,InfiniteRowModelApiModule]};ModuleRegistry.__registerModules([CommunityFeaturesModule,ClientSideRowModelModule,InfiniteRowModelModule,CsvExportModule],!1,void 0);export{AgPromise as A,BaseComponentWrapper as B,CssClassManager as C,EmptyBean as E,FakeHScrollComp as F,GridHeaderCtrl as G,HeaderRowType as H,ModuleRegistry as M,OverlayWrapperComponent as O,RowContainerCtrl as R,TabGuardCtrl as T,VanillaFrameworkOverrides as V,_escapeString as _,_warnOnce as a,HeaderRowContainerCtrl as b,_getRowContainerOptions as c,GridBodyCtrl as d,GridCtrl as e,_combineAttributesAndGridOptions as f,_getGlobalGridOption as g,_processOnChange as h,_setAriaSort as i,_removeAriaSort as j,_removeFromParent as k,FakeVScrollComp as l,_setAriaColCount as m,_setAriaRowCount as n,TabGuardClassNames as o,GridCoreCreator as p,_isClientSideRowModel as q,_isServerSideRowModel as r,BeanStub as s};
//# sourceMappingURL=ag-grid-community-CdBDfTPG.js.map
