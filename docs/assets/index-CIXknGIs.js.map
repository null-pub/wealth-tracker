{"version":3,"file":"index-CIXknGIs.js","sources":["../../src/shared/utility/sort-by-date.ts","../../src/shared/models/account-data.ts","../../src/shared/models/account.ts","../../src/shared/models/loan.ts","../../src/shared/models/mortgage.ts","../../src/shared/models/net-wealth.ts","../../src/shared/models/projected-income.ts","../../src/shared/models/projected-wealth.ts","../../src/shared/models/store.ts","../../src/shared/store/store.ts","../../src/shared/store/add-account-entry.ts","../../src/shared/store/add-projected-income.ts","../../src/shared/store/remove-account.ts","../../src/shared/store/remove-account-entry.ts","../../src/shared/store/remove-projected-income.ts","../../src/shared/store/reset-store.ts","../../src/shared/store/set-loan.ts","../../src/shared/store/update-account-date.ts","../../src/shared/store/update-account-name.ts","../../src/shared/store/update-account-value.ts","../../src/shared/store/update-projected-income.ts","../../src/capabilities/net-wealth/components/new-account/new-account.tsx","../../src/shared/components/ag-grid/ag-grid.tsx","../../src/shared/utility/current-date.ts","../../src/shared/utility/format-date.ts","../../src/capabilities/net-wealth/components/tab-types/components/delete-account.tsx","../../src/capabilities/net-wealth/components/tab-types/components/update-account.tsx","../../src/shared/utility/format-cash.ts","../../src/capabilities/net-wealth/components/tab-types/account/column-config.tsx","../../src/capabilities/net-wealth/components/tab-types/account/hooks/useMissingYears.ts","../../src/capabilities/net-wealth/components/tab-types/account/account.tsx","../../src/shared/utility/find-nearest-on-or-before.ts","../../src/shared/utility/get-graph-dates.ts","../../src/shared/utility/mortgage-calc.ts","../../src/capabilities/net-wealth/components/tab-types/mortgage/add-entry.tsx","../../src/shared/utility/group-by.ts","../../src/capabilities/net-wealth/components/tab-types/mortgage/add-loan.tsx","../../src/capabilities/net-wealth/components/tab-types/mortgage/column-config.tsx","../../src/capabilities/net-wealth/components/tab-types/mortgage/mortgage.tsx","../../src/capabilities/net-wealth/components/account-tabs/account-tabs.tsx","../../src/shared/utility/get-graph-value.ts","../../src/capabilities/net-wealth/components/wealth-chart/use-graph-data.ts","../../src/capabilities/net-wealth/components/wealth-chart/wealth-chart.tsx","../../src/capabilities/net-wealth/net-wealth.tsx","../../src/shared/hooks/use-dates.ts","../../src/shared/utility/find-same-year.ts","../../src/shared/utility/min-max-avg.ts","../../src/shared/utility/a-payday.ts","../../src/shared/utility/date-ranges-overlap.ts","../../src/shared/utility/get-pay-periods.ts","../../src/shared/hooks/use-most-frequent-value.ts","../../src/shared/hooks/use-projected-pay.ts","../../src/shared/hooks/use-base-income.ts","../../src/shared/hooks/use-company-bonus.ts","../../src/shared/hooks/use-merit-bonus.ts","../../src/shared/hooks/use-retirement-bonus.ts","../../src/shared/hooks/use-total-income.ts","../../src/shared/components/formatters/cash.tsx","../../src/shared/components/formatters/duration.tsx","../../src/shared/utility/format-percent.ts","../../src/shared/components/formatters/percent.tsx","../../src/capabilities/projected-income/components/value.tsx","../../src/capabilities/projected-income/components/bonus-outcome.tsx","../../src/shared/store/update-projected-income-date.ts","../../src/capabilities/projected-income/components/data-entry/column-config.tsx","../../src/capabilities/projected-income/components/data-entry/data-entry.tsx","../../src/shared/components/formatters/until.tsx","../../src/capabilities/projected-income/hooks/use-pay-check.ts","../../src/capabilities/projected-income/components/income-per-period.tsx","../../src/capabilities/projected-income/components/merit-increase.tsx","../../src/capabilities/projected-income/components/outcome.tsx","../../src/capabilities/projected-income/projected-income.tsx","../../src/shared/store/set-projected-wealth.ts","../../src/capabilities/projected-wealth/components/config/config-entry.tsx","../../src/capabilities/projected-wealth/components/config/config.tsx","../../src/capabilities/projected-wealth/hooks/use-future-bonuses.ts","../../src/capabilities/projected-wealth/hooks/use-payments.ts","../../src/capabilities/projected-wealth/hooks/use-future-medicare-tax.ts","../../src/capabilities/projected-wealth/hooks/use-future-retirement-contributions.ts","../../src/capabilities/projected-wealth/hooks/use-future-savings.ts","../../src/capabilities/projected-wealth/hooks/use-future-social-security.ts","../../src/shared/components/formatters/before-after.tsx","../../src/capabilities/projected-wealth/components/future-events/future-events.tsx","../../src/capabilities/projected-wealth/hooks/use-earliest-account-entry.ts","../../src/capabilities/projected-wealth/hooks/use-times-series-wealth.ts","../../src/capabilities/projected-wealth/components/wealth-chart.tsx","../../src/capabilities/projected-wealth/components/wealth-table/colum-config.tsx","../../src/capabilities/projected-wealth/components/wealth-table/wealth-table.tsx","../../src/capabilities/projected-wealth/projected-wealth.tsx","../../src/shared/components/safety-button/count-down.tsx","../../src/shared/components/safety-button/safety-button.tsx","../../src/shared/hooks/use-export.tsx","../../src/shared/hooks/use-import.tsx","../../src/shared/hooks/use-store-data-error.ts","../../src/app/invalid-data-dialog.tsx","../../src/app/app.tsx","../../src/main.tsx"],"sourcesContent":["import { DateTime } from \"luxon\";\n\nexport const sortByDate =\n  <T>(select: (data: T) => DateTime, direction: \"asc\" | \"desc\") =>\n  (a: T, b: T) =>\n    direction === \"asc\" ? select(a).toMillis() - select(b).toMillis() : select(b).toMillis() - select(a).toMillis();\n","import { z } from \"zod\";\n\nexport const accountDataValidator = z.object({\n  date: z.string(),\n  value: z.number(),\n  id: z.string(),\n});\n\nexport type AccountData = z.infer<typeof accountDataValidator>;\n","import { z } from \"zod\";\nimport { accountDataValidator } from \"./account-data\";\n\nexport const accountValidator = z.object({\n  type: z.literal(\"account\"),\n  data: z.array(accountDataValidator),\n});\n\nexport type Account = z.infer<typeof accountValidator>;\n","import { z } from \"zod\";\n\nexport const loanValidator = z.object({\n  principal: z.number(),\n  ratePct: z.number(),\n  paymentsPerYear: z.number(),\n  payment: z.number(),\n  firstPaymentDate: z.string(),\n  ownershipPct: z.number(),\n});\n\nexport type Loan = z.infer<typeof loanValidator>;\n","import { z } from \"zod\";\nimport { accountDataValidator } from \"./account-data\";\nimport { loanValidator } from \"./loan\";\n\nexport const mortgageValidator = z.object({\n  type: z.literal(\"mortgage\"),\n  loan: loanValidator.optional(),\n  data: z.array(accountDataValidator),\n});\n\nexport type Mortgage = z.infer<typeof mortgageValidator>;\n","import { z } from \"zod\";\nimport { accountValidator } from \"./account\";\nimport { mortgageValidator } from \"./mortgage\";\n\nexport const wealth = z.record(z.union([accountValidator, mortgageValidator]));\n\nexport type Wealth = z.infer<typeof wealth>;\n","import { z } from \"zod\";\nimport { accountDataValidator } from \"./account-data\";\n\nexport const projectedIncome = z.object({\n  timeSeries: z.object({\n    paycheck: z.array(accountDataValidator),\n    meritIncreasePct: z.array(accountDataValidator),\n    equityPct: z.array(accountDataValidator),\n    meritBonusPct: z.array(accountDataValidator),\n    meritBonus: z.array(accountDataValidator),\n    companyBonusPct: z.array(accountDataValidator),\n    companyBonus: z.array(accountDataValidator),\n    retirementBonus: z.array(accountDataValidator),\n  }),\n});\n\nexport type ProjectedIncome = z.infer<typeof projectedIncome>;\nexport type TimeSeries = keyof ProjectedIncome[\"timeSeries\"];\n","import { z } from \"zod\";\n\nexport const projectedWealth = z.object({\n  socialSecurityLimit: z.number(),\n  socialSecurityTaxRate: z.number(),\n  medicareSupplementalTaxThreshold: z.number(),\n  medicareSupplementalTaxRate: z.number(),\n  savingsPerMonth: z.number(),\n  retirementContributionPaycheck: z.number(),\n});\n\nexport type ProjectedWealth = z.infer<typeof projectedWealth>;\nexport type ProjectedWealthConfig = keyof ProjectedWealth;\n","import { z } from \"zod\";\nimport { wealth } from \"./net-wealth\";\nimport { projectedIncome } from \"./projected-income\";\nimport { projectedWealth } from \"./projected-wealth\";\n\nexport const getDefaultStore = (): Store => ({\n  projectedIncome: {\n    timeSeries: {\n      paycheck: [],\n      meritBonusPct: [],\n      companyBonusPct: [],\n      meritBonus: [],\n      companyBonus: [],\n      retirementBonus: [],\n      equityPct: [],\n      meritIncreasePct: [],\n    },\n  },\n  wealth: {},\n  projectedWealth: {\n    medicareSupplementalTaxThreshold: 200_000,\n    socialSecurityLimit: 168_600,\n    socialSecurityTaxRate: 0.062,\n    medicareSupplementalTaxRate: 0.009,\n    savingsPerMonth: 0,\n    retirementContributionPaycheck: 0,\n  },\n});\n\nexport const storeValidator = z.object({\n  wealth: wealth,\n  projectedIncome: projectedIncome,\n  projectedWealth: projectedWealth,\n});\n\nexport type Store = z.infer<typeof storeValidator>;\n","import { Store as CreateStore } from \"@tanstack/store\";\nimport { ZodSchema } from \"zod\";\nimport { Store, getDefaultStore, storeValidator } from \"../models/store\";\n\nconst createStore = <T extends object>(validator: ZodSchema, defaultValue: T) => {\n  const key = \"store\";\n  const invalidData = \"store-invalid\";\n  const localData = localStorage.getItem(key);\n  const data = localData ? JSON.parse(localData) : defaultValue;\n  const parse = validator.safeParse(data);\n\n  //todo create migration process\n  if (!parse.success) {\n    console.log(\"zod error\", parse.error);\n    console.log(\"original\", data);\n    localStorage.setItem(invalidData, JSON.stringify(data));\n    localStorage.setItem(key, JSON.stringify(defaultValue));\n  }\n\n  const store = new CreateStore<T>(data);\n  store.subscribe(() => {\n    const current = localStorage.getItem(key);\n    current && localStorage.setItem(`${key}-previous`, current);\n    localStorage.setItem(key, JSON.stringify(store.state));\n  });\n\n  return store;\n};\n\nexport const store = createStore<Store>(storeValidator, getDefaultStore());\n","import { DateTime } from \"luxon\";\nimport { create } from \"mutative\";\nimport { v4 as uuid } from \"uuid\";\nimport { Account } from \"../models/account\";\nimport { sortByDate } from \"../utility/sort-by-date\";\nimport { store } from \"./store\";\n\nexport const AddAccountEntry = (accountName: string, date: DateTime<true>, amount: number) => {\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      (next.wealth[accountName] as Account).data.push({\n        date: date.startOf(\"day\").toString(),\n        value: amount,\n        id: uuid(),\n      });\n      next.wealth[accountName].data.sort(sortByDate((x) => DateTime.fromISO(x.date), \"asc\"));\n    });\n  });\n};\n","import { DateTime } from \"luxon\";\nimport { create } from \"mutative\";\nimport { TimeSeries } from \"shared/models/projected-income\";\nimport { sortByDate } from \"shared/utility/sort-by-date\";\nimport { v4 as uuid } from \"uuid\";\nimport { store } from \"./store\";\n\nexport const addProjectedIncome = (date: DateTime, timeSeries: TimeSeries, value: number) => {\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      next.projectedIncome.timeSeries[timeSeries] = next.projectedIncome.timeSeries[timeSeries]\n        .concat({\n          date: date.startOf(\"day\").toString(),\n          value,\n          id: uuid(),\n        })\n        .sort(sortByDate((x) => DateTime.fromISO(x.date), \"asc\"));\n    });\n  });\n};\n","import { create } from \"mutative\";\nimport { store } from \"./store\";\n\nexport const removeAccount = (accountName: string) =>\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      delete next.wealth[accountName];\n    });\n  });\n","import { create } from \"mutative\";\nimport { store } from \"./store\";\n\nexport const removeAccountEntry = (accountName: string, id: string) =>\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      const idxToRemove = next.wealth[accountName].data.findIndex((x) => x.id === id);\n      next.wealth[accountName].data.splice(idxToRemove, 1);\n      return next;\n    });\n  });\n","import { create } from \"mutative\";\nimport { TimeSeries } from \"shared/models/projected-income\";\nimport { store } from \".\";\n\nexport const removeProjectedIncome = (accountName: TimeSeries, id: string) => {\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      const idxToRemove = next.projectedIncome.timeSeries[accountName].findIndex((x) => x.id === id);\n      next.projectedIncome.timeSeries[accountName].splice(idxToRemove, 1);\n    });\n  });\n};\n","import { getDefaultStore } from \"shared/models/store\";\nimport { store } from \"./store\";\n\nexport const resetStore = () => store.setState(() => getDefaultStore());\n","import { create } from \"mutative\";\nimport { Loan } from \"shared/models/loan\";\nimport { Mortgage } from \"shared/models/mortgage\";\nimport { store } from \"./store\";\n\nexport const setLoan = (accountName: string, loan: Loan) =>\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      if (next.wealth[accountName].type === \"mortgage\") {\n        (next.wealth[accountName] as Mortgage).loan = loan;\n      }\n    });\n  });\n","import { DateTime } from \"luxon\";\nimport { create } from \"mutative\";\nimport { store } from \".\";\n\nexport const updateAccountDate = (accountName: string, id: string, date: DateTime) => {\n  store.setState((prev) => {\n    const next = create(prev, (next) => {\n      const account = next.wealth[accountName];\n      const idx = account?.data.findIndex((x) => x.id === id);\n      if (idx >= 0) {\n        account.data[idx].date = date.toISO()!;\n      }\n    });\n    return next;\n  });\n};\n","import { create } from \"mutative\";\nimport { store } from \"./store\";\n\nexport const updateAccountName = (currentAccountName: string, newAccountName: string) =>\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      next.wealth[newAccountName] = next.wealth[currentAccountName];\n      delete next.wealth[currentAccountName];\n    });\n  });\n","import { create } from \"mutative\";\nimport { store } from \".\";\n\nexport const updateAccountValue = (accountName: string, id: string, value: number) => {\n  store.setState((prev) => {\n    const next = create(prev, (next) => {\n      const account = next.wealth[accountName];\n      const idx = account?.data.findIndex((x) => x.id === id);\n      if (idx >= 0) {\n        account.data[idx].value = value;\n      }\n    });\n    return next;\n  });\n};\n","import { create } from \"mutative\";\nimport { TimeSeries } from \"shared/models/projected-income\";\nimport { store } from \".\";\n\nexport const updateProjectedIncome = (timeSeries: TimeSeries, id: string, value: number) => {\n  store.setState((prev) => {\n    const next = create(prev, (next) => {\n      const account = next.projectedIncome.timeSeries[timeSeries];\n      const idx = account.findIndex((x) => x.id === id);\n      account[idx].value = value;\n    });\n    return next;\n  });\n};\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, MenuItem, Stack, TextField } from \"@mui/material\";\nimport { create } from \"mutative\";\nimport { ReactNode, forwardRef, useRef, useState } from \"react\";\nimport { AssetType } from \"shared/models/asset-types\";\nimport { store } from \"shared/store\";\n\nexport const NewAccount = forwardRef<HTMLButtonElement, { children?: ReactNode }>((props, ref) => {\n  const [open, setOpen] = useState(false);\n  const nameRef = useRef<HTMLInputElement>(null);\n  const [error, setError] = useState(false);\n  const [accountType, setAccountType] = useState<AssetType>();\n\n  return (\n    <>\n      <Button\n        ref={ref}\n        variant=\"outlined\"\n        onClick={() => {\n          setOpen(true);\n          setError(false);\n          setAccountType(undefined);\n        }}\n        sx={{ marginLeft: \"auto\" }}\n      >\n        add account\n      </Button>\n\n      <Dialog open={open} onClose={() => setOpen(false)}>\n        <DialogTitle>Add New Account</DialogTitle>\n        <DialogContent>\n          <Stack spacing={2} margin={2}>\n            <TextField\n              select\n              color={error ? \"error\" : \"primary\"}\n              onChange={(value) => {\n                setError(false);\n                setAccountType(value.target.value as AssetType);\n              }}\n              label=\"Type\"\n            >\n              <MenuItem value=\"mortgage\">Mortgage</MenuItem>\n              <MenuItem value=\"account\">Generic Account</MenuItem>\n            </TextField>\n\n            <TextField\n              placeholder=\"Name\"\n              onChange={() => {\n                setError(false);\n              }}\n              error={error}\n              inputRef={nameRef}\n            />\n          </Stack>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            disabled={error}\n            onClick={() => {\n              store.setState((prev) => {\n                return create(prev, (next) => {\n                  if (!nameRef.current?.value || !accountType || prev.wealth[nameRef.current.value]) {\n                    setError(true);\n                    return;\n                  }\n\n                  next.wealth[nameRef.current.value] = {\n                    type: accountType,\n                    data: [],\n                  };\n\n                  setOpen(false);\n                });\n              });\n            }}\n          >\n            Add\n          </Button>\n        </DialogActions>\n      </Dialog>\n      {props?.children}\n    </>\n  );\n});\n","import { AgGridReact, AgGridReactProps } from \"ag-grid-react\";\n\nexport const AgGrid = (props: AgGridReactProps & { id: string }) => {\n  const { id, ...rest } = props;\n  return (\n    <div id={id} className=\"ag-theme-quartz-dark\" style={{ height: \"100%\" }}>\n      <AgGridReact {...rest} />\n    </div>\n  );\n};\n","import { DateTime } from \"luxon\";\n\nexport const getLocalDateTime = () => DateTime.local();\n","export const shortDate = \"yyyy-MM-dd\";\n\nexport const monthDay = \"MMM dd\";\n","import { Button, Paper } from \"@mui/material\";\nimport { removeAccount } from \"shared/store\";\n\nexport const DeleteAccount = (props: { accountName: string }) => {\n  const { accountName } = props;\n\n  return (\n    <Paper elevation={3} sx={{ padding: 2, width: \"100%\" }}>\n      <Button\n        onClick={() => {\n          removeAccount(accountName);\n        }}\n        color=\"error\"\n      >\n        Delete Account\n      </Button>\n    </Paper>\n  );\n};\n","import { Button, Paper, Stack, TextField } from \"@mui/material\";\nimport { useState } from \"react\";\nimport { updateAccountName } from \"shared/store/update-account-name\";\n\nexport const RenameAccount = (props: { accountName: string }) => {\n  const { accountName } = props;\n  const [nextAccountName, setNextAccountName] = useState<string>(accountName);\n\n  return (\n    <Paper elevation={3} sx={{ padding: 2 }}>\n      <Stack spacing={1}>\n        <TextField\n          label=\"Account Name\"\n          value={nextAccountName}\n          onChange={(event) => setNextAccountName(event.target.value)}\n          placeholder=\"\"\n        />\n        <Button\n          disabled={!nextAccountName}\n          onClick={() => {\n            updateAccountName(accountName, nextAccountName);\n          }}\n        >\n          Update Name\n        </Button>\n      </Stack>\n    </Paper>\n  );\n};\n","export const formatCashShort = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  notation: \"compact\",\n  maximumFractionDigits: 0,\n}).format;\n\nexport const formatCash = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  maximumFractionDigits: 0,\n}).format;\n","import DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\nimport { Button } from \"@mui/material\";\nimport { ColDef } from \"ag-grid-community\";\nimport { CustomCellRendererProps } from \"ag-grid-react\";\nimport { DateTime } from \"luxon\";\nimport { AccountData } from \"shared/models/account-data\";\nimport { updateAccountDate, updateAccountValue } from \"shared/store\";\nimport { removeAccountEntry } from \"shared/store/remove-account-entry\";\nimport { formatCashShort } from \"shared/utility/format-cash\";\nimport { shortDate } from \"shared/utility/format-date\";\n\nexport const createAccountColumnConfig = (accountName: string): ColDef<AccountData>[] => [\n  {\n    headerName: \"Date\",\n    sort: \"desc\",\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\n    valueGetter: (x) => x.data && DateTime.fromISO(x.data.date),\n    cellEditor: \"agDateCellEditor\",\n    editable: true,\n    valueSetter: (x) => {\n      const date = DateTime.fromJSDate(x.newValue);\n      if (date.isValid) {\n        updateAccountDate(accountName, x.data.id, date);\n      }\n      return date.isValid;\n    },\n  },\n  {\n    headerName: \"Value\",\n    valueGetter: (x) => x.data?.value,\n    valueFormatter: (x) => formatCashShort(x.value),\n    valueSetter: (x) => {\n      updateAccountValue(accountName, x.data.id, +x.newValue);\n      return true;\n    },\n    editable: true,\n    cellEditor: \"agNumberCellEditor\",\n    type: \"numericColumn\",\n  },\n  {\n    headerName: \"Actions\",\n    cellRenderer: (props: CustomCellRendererProps<AccountData>) => {\n      return (\n        <Button\n          onClick={() => {\n            props.data && removeAccountEntry(accountName, props.data.id);\n          }}\n          color=\"error\"\n        >\n          <DeleteForeverIcon />\n        </Button>\n      );\n    },\n  },\n];\n","import { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { Account } from \"shared/models/account\";\n\nexport const useMissingYears = (account: Account) => {\n  return useMemo(() => {\n    const years = Object.entries(Object.groupBy(account.data, (x) => DateTime.fromISO(x.date).year))\n      .map(\n        ([year, entries]) =>\n          [\n            +year,\n            !!entries?.find((x) => {\n              const date = DateTime.fromISO(x.date);\n              const janFirst = DateTime.fromObject({\n                day: 1,\n                month: 1,\n                year: +year,\n              });\n              return date.diff(janFirst, [\"days\", \"hours\"]).days == 0;\n            }),\n          ] as [number, boolean],\n      )\n      .sort(([a], [b]) => {\n        return a - b;\n      });\n\n    const lookup = Object.fromEntries(years);\n    const missing = [];\n    for (let i = years[0]?.[0] ?? 0; i <= years[years.length - 1]?.[0]; i++) {\n      if (!lookup[i]) {\n        missing.push(i);\n      }\n    }\n    return missing;\n  }, [account.data]);\n};\n","import { Alert, Button, InputAdornment, Paper, Stack, TextField } from \"@mui/material\";\nimport Grid from \"@mui/system/Unstable_Grid\";\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo, useRef, useState } from \"react\";\nimport { AgGrid } from \"shared/components/ag-grid\";\nimport { Account } from \"shared/models/account\";\nimport { AddAccountEntry, store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { shortDate } from \"shared/utility/format-date\";\nimport { DeleteAccount } from \"../components/delete-account\";\nimport { RenameAccount } from \"../components/update-account\";\nimport { createAccountColumnConfig } from \"./column-config\";\nimport { useMissingYears } from \"./hooks/useMissingYears\";\n\nexport const AccountTab = (props: { accountName: string }) => {\n  const { accountName } = props;\n  const account = useStore(store, (state) => state.wealth[accountName]) as Account;\n  const [date, setDate] = useState(getLocalDateTime());\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const missingYears = useMissingYears(account);\n  const hasSameDate = useMemo(() => {\n    return !!account?.data?.find((x) => date.hasSame(DateTime.fromISO(x.date), \"day\"));\n  }, [account?.data, date]);\n\n  const onAddEntry = () => {\n    inputRef.current && AddAccountEntry(accountName, date, +inputRef.current?.value);\n  };\n\n  const accountColumnConfig = useMemo(() => {\n    return createAccountColumnConfig(accountName);\n  }, [accountName]);\n\n  return (\n    <Grid container height=\"100%\" width={\"100%\"} padding={1} spacing={2}>\n      <Grid xl={3} lg={4}>\n        <AgGrid\n          reactiveCustomComponents\n          rowData={account?.data ?? []}\n          columnDefs={accountColumnConfig}\n          id={account + \"-history\"}\n          autoSizeStrategy={{ type: \"fitGridWidth\" }}\n          stopEditingWhenCellsLoseFocus\n        />\n      </Grid>\n      <Grid xl={9} lg={8}>\n        <div>\n          <Grid container spacing={2}>\n            {missingYears.length > 0 && (\n              <Grid xs={12}>\n                <Paper elevation={3}>\n                  <Alert severity=\"warning\">Ensure an entry for Jan 1st for each year {missingYears.join(\", \")}</Alert>\n                </Paper>\n              </Grid>\n            )}\n            <Grid xl={2} lg={3}>\n              <Paper elevation={3} sx={{ padding: 2 }}>\n                <Stack spacing={1}>\n                  <DatePicker\n                    format={shortDate}\n                    sx={{ color: \"white\" }}\n                    label=\"Date\"\n                    defaultValue={date}\n                    onChange={(value) => value && setDate(value)}\n                  />\n                  <TextField\n                    label=\"amount\"\n                    type=\"number\"\n                    defaultValue={0}\n                    inputRef={inputRef}\n                    InputProps={{\n                      startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n                    }}\n                    placeholder=\"0\"\n                  />\n                  <Button disabled={!date || hasSameDate} onClick={onAddEntry}>\n                    Add Entry\n                  </Button>\n                </Stack>\n              </Paper>\n            </Grid>\n            <Grid xl={8} lg={0}></Grid>\n            <Grid xl={2} lg={4}>\n              <Stack spacing={2}>\n                <DeleteAccount accountName={accountName} />\n                <RenameAccount key={accountName} accountName={accountName} />\n              </Stack>\n            </Grid>\n          </Grid>\n        </div>\n      </Grid>\n    </Grid>\n  );\n};\n","import { DateTime } from \"luxon\";\nimport { AccountData } from \"shared/models/account-data\";\n\nexport const findNearestOnOrBefore = (date: DateTime, data: AccountData[]) => {\n  return data.find((x, idx, array) => {\n    if (idx == 0 && DateTime.fromISO(x.date).startOf(\"day\") >= date) {\n      return true;\n    }\n\n    if (\n      idx < array.length - 1 &&\n      DateTime.fromISO(x.date).startOf(\"day\") <= date &&\n      DateTime.fromISO(data[idx + 1].date).startOf(\"day\") > date\n    ) {\n      return true;\n    }\n\n    if (idx === array.length - 1) {\n      return true;\n    }\n  });\n};\n\nexport const findNearestIdxOnOrBefore = <T>(date: DateTime, data: T[], selector: (data: T) => DateTime) => {\n  return data.findIndex((x, idx, array) => {\n    if (idx == 0 && selector(x) >= date) {\n      return true;\n    }\n\n    if (idx < array.length - 1 && selector(x) <= date && selector(data[idx + 1]) > date) {\n      return true;\n    }\n\n    if (idx === array.length - 1) {\n      return true;\n    }\n  });\n};\n","import { DateTime } from \"luxon\";\nimport { Account } from \"shared/models/account\";\nimport { Mortgage } from \"shared/models/mortgage\";\n\nexport const getGraphDates = (accounts: (Account | Mortgage)[]) => {\n  return [\n    ...new Set(\n      accounts.flatMap((x) => {\n        return x.data.map((x) => DateTime.fromISO(x.date).startOf(\"day\").toISO());\n      }),\n    ),\n  ]\n    .map((x) => DateTime.fromISO(x!))\n    .sort((a, b) => a.toMillis() - b.toMillis()) as DateTime<true>[];\n};\n","import { DateTime } from \"luxon\";\nimport { Loan } from \"shared/models/loan\";\n\nexport const calcLoanBalance = (date: DateTime, loan: Loan) => {\n  const { firstPaymentDate, paymentsPerYear, principal: principal, ratePct: rate, payment: monthlyPayment } = loan;\n  const annualizedRate = rate / paymentsPerYear;\n  const periods = date.diff(DateTime.fromISO(firstPaymentDate), \"months\").months;\n  const totalRate = (1 + annualizedRate) ** periods;\n  const balance = principal * totalRate - (monthlyPayment / annualizedRate) * (totalRate - 1);\n\n  return balance;\n};\n\nexport const calcEquity = (\n  ownershipPct: number,\n  houseValue: number | undefined,\n  loanBalance: number,\n  principal: number\n) => {\n  return houseValue ? houseValue * ownershipPct - loanBalance : principal - loanBalance;\n};\n","import { Button, Paper, TextField } from \"@mui/material\";\nimport { Stack } from \"@mui/system\";\nimport { DatePicker } from \"@mui/x-date-pickers\";\nimport { DateTime } from \"luxon\";\nimport { useRef } from \"react\";\nimport { AddAccountEntry } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\n\nexport const AddEntry = (props: { accountName: string }) => {\n  const { accountName } = props;\n  const ref = useRef<{ date?: DateTime; value?: number }>({\n    date: getLocalDateTime(),\n    value: 0,\n  });\n  const onAddEntry = () => {\n    const { date, value } = ref.current;\n    if (!date || !value) {\n      return;\n    }\n    AddAccountEntry(accountName, date, value);\n  };\n  return (\n    <Paper elevation={3} sx={{ padding: 2 }}>\n      <Stack spacing={1}>\n        <DatePicker\n          defaultValue={getLocalDateTime()}\n          onChange={(date: DateTime | null) => {\n            if (date) {\n              ref.current.date = date;\n            }\n          }}\n        />\n        <TextField\n          label=\"Home value\"\n          type=\"numeric\"\n          onChange={(event) => {\n            ref.current.value = +event.target.value;\n          }}\n        />\n        <Button onClick={onAddEntry}>Add Home Value</Button>\n      </Stack>\n    </Paper>\n  );\n};\n","export function groupBy<T, T2 extends string | number | symbol>(array: T[], selector: (x: T) => T2): Record<T2, T[]> {\n  return array.reduce(\n    (acc: Record<T2, T[]>, curr: T) => {\n      const key = selector(curr);\n      acc[key] ??= [];\n      acc[key].push(curr);\n      return acc;\n    },\n    {} as Record<T2, T[]>,\n  );\n}\n","import { Button, Paper, Stack, TextField } from \"@mui/material\";\nimport { DatePicker } from \"@mui/x-date-pickers\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useRef, useState } from \"react\";\nimport { Loan } from \"shared/models/loan\";\nimport { store } from \"shared/store\";\nimport { setLoan } from \"shared/store/set-loan\";\nimport { groupBy } from \"shared/utility/group-by\";\nimport { ZodIssue, z } from \"zod\";\n\nconst convertPct = (value: number) => {\n  return value > 1 ? value / 100 : value;\n};\n\nconst validator: z.ZodType<Loan> = z.object({\n  principal: z.number().min(0),\n  ratePct: z.number().min(0),\n  paymentsPerYear: z.number().min(0),\n  payment: z.number().min(0),\n  firstPaymentDate: z.string().datetime({ offset: true }),\n  ownershipPct: z.number().min(0),\n});\n\nexport const AddLoan = (props: { accountName: string }) => {\n  const { accountName } = props;\n\n  const loan = useStore(store, (x) => {\n    const account = x.wealth[accountName];\n    if (\"loan\" in account) {\n      return account.loan;\n    }\n  });\n\n  const ref = useRef<Partial<Loan>>(loan ?? {});\n  const [error, setError] = useState<Partial<Record<keyof Loan, ZodIssue>>>({});\n\n  return (\n    <Paper elevation={3} sx={{ padding: 2 }}>\n      <Stack spacing={1}>\n        <DatePicker\n          defaultValue={ref.current?.firstPaymentDate ? DateTime.fromISO(ref.current.firstPaymentDate) : null}\n          label=\"First Payment\"\n          slotProps={{\n            textField: {\n              error: !!error.firstPaymentDate,\n            },\n          }}\n          onChange={(value: DateTime | null) => {\n            if (value) {\n              ref.current.firstPaymentDate = value.startOf(\"day\").toISO()!;\n            }\n          }}\n        />\n        <TextField\n          error={!!error.principal}\n          defaultValue={loan?.principal}\n          onChange={(event) => {\n            ref.current.principal = +event.target.value;\n          }}\n          variant=\"outlined\"\n          label=\"Principal\"\n          type=\"number\"\n        />\n        <TextField\n          error={!!error.ratePct}\n          defaultValue={loan?.ratePct}\n          onChange={(event) => {\n            ref.current.ratePct = convertPct(+event.target.value);\n          }}\n          variant=\"outlined\"\n          label=\"Rate\"\n          type=\"number\"\n        />\n        <TextField\n          error={!!error.paymentsPerYear}\n          defaultValue={loan?.paymentsPerYear}\n          onChange={(event) => {\n            ref.current.paymentsPerYear = +event.target.value;\n          }}\n          variant=\"outlined\"\n          label=\"Payments Per Year\"\n          type=\"number\"\n        />\n        <TextField\n          defaultValue={loan?.payment}\n          error={!!error.payment}\n          onChange={(event) => {\n            ref.current.payment = +event.target.value;\n          }}\n          variant=\"outlined\"\n          label=\"Payment\"\n          type=\"number\"\n        />\n        <TextField\n          defaultValue={loan?.ownershipPct}\n          error={!!error.ownershipPct}\n          onChange={(event) => {\n            ref.current.ownershipPct = convertPct(+event.target.value);\n          }}\n          variant=\"outlined\"\n          label=\"Ownership (%)\"\n          type=\"number\"\n        />\n        <Button\n          onClick={() => {\n            const parsed = validator.safeParse(ref.current);\n            if (parsed.success) {\n              setError({});\n              setLoan(accountName, parsed.data);\n            } else {\n              const issues = groupBy(parsed.error.issues, (x) => x.path.join(\"\"));\n              setError(issues);\n            }\n          }}\n        >\n          Set Loan\n        </Button>\n      </Stack>\n    </Paper>\n  );\n};\n","import DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\nimport { Button } from \"@mui/material\";\nimport { ColDef } from \"ag-grid-community\";\nimport { CustomCellRendererProps } from \"ag-grid-react\";\nimport { DateTime } from \"luxon\";\nimport { AccountData } from \"shared/models/account-data\";\nimport { removeAccountEntry } from \"shared/store\";\nimport { formatCashShort } from \"shared/utility/format-cash\";\nimport { shortDate } from \"shared/utility/format-date\";\n\nexport const createAccountColumnConfig = (accountName: string): ColDef<AccountData>[] => [\n  {\n    headerName: \"Date\",\n    sort: \"desc\",\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\n    valueGetter: (x) => x.data && DateTime.fromISO(x.data.date),\n  },\n  {\n    headerName: \"Home Value\",\n    valueGetter: (x) => x.data?.value,\n    valueFormatter: (x) => formatCashShort(x.value),\n    type: \"numericColumn\",\n  },\n  {\n    headerName: \"Actions\",\n    cellRenderer: (props: CustomCellRendererProps<AccountData>) => {\n      return (\n        <Button\n          onClick={() => {\n            props.data && removeAccountEntry(accountName, props.data?.id);\n          }}\n          color=\"error\"\n        >\n          <DeleteForeverIcon />\n        </Button>\n      );\n    },\n  },\n];\n\nexport const mortgageColumnConfig: ColDef<{\n  date: DateTime;\n  balance: number;\n  equity: number;\n}>[] = [\n  {\n    headerName: \"Date\",\n    sort: \"desc\",\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\n    valueGetter: (x) => x.data?.date,\n  },\n  {\n    headerName: \"Loan Balance\",\n    valueGetter: (x) => x.data?.balance.toFixed(2),\n    valueFormatter: (x) => formatCashShort(x.value),\n    type: \"numericColumn\",\n  },\n  {\n    headerName: \"Equity\",\n    valueGetter: (x) => x.data?.equity.toFixed(2),\n    valueFormatter: (x) => formatCashShort(x.value),\n    type: \"numericColumn\",\n  },\n];\n","import { Stack } from \"@mui/system\";\nimport Grid from \"@mui/system/Unstable_Grid\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { AgGrid } from \"shared/components/ag-grid\";\nimport { Mortgage } from \"shared/models/mortgage\";\nimport { store } from \"shared/store\";\n\nimport { findNearestOnOrBefore } from \"shared/utility/find-nearest-on-or-before\";\nimport { getGraphDates } from \"shared/utility/get-graph-dates\";\nimport { calcEquity, calcLoanBalance } from \"shared/utility/mortgage-calc\";\nimport { DeleteAccount } from \"../components/delete-account\";\nimport { RenameAccount } from \"../components/update-account\";\nimport { AddEntry } from \"./add-entry\";\nimport { AddLoan } from \"./add-loan\";\nimport { createAccountColumnConfig, mortgageColumnConfig } from \"./column-config\";\n\nexport const MortgageTab = (props: { accountName: string }) => {\n  const { accountName } = props;\n\n  const account = useStore(store, (state) => state.wealth[accountName]) as Mortgage;\n\n  const allAccounts = useStore(store, (x) => x.wealth);\n\n  const accountColumnConfig = useMemo(() => {\n    return createAccountColumnConfig(accountName);\n  }, [accountName]);\n\n  const mortgageData = useMemo(() => {\n    if (!account?.loan) {\n      return [];\n    }\n\n    return getGraphDates(Object.values(allAccounts)).map((date) => {\n      const loanBalance = calcLoanBalance(date, account.loan!);\n      return {\n        date,\n        balance: loanBalance,\n        equity: calcEquity(\n          account.loan!.ownershipPct,\n          findNearestOnOrBefore(date, account.data)?.value,\n          loanBalance,\n          account.loan!.principal\n        ),\n      };\n    });\n  }, [account, allAccounts]);\n\n  return (\n    <Grid container height=\"100%\" width={\"100%\"} padding={1} spacing={2}>\n      <Grid lg={3}>\n        <AgGrid\n          reactiveCustomComponents\n          rowData={account?.data ?? []}\n          columnDefs={accountColumnConfig}\n          id={account + \"-history\"}\n        />\n      </Grid>\n      <Grid lg={3}>\n        <AgGrid\n          rowData={mortgageData}\n          columnDefs={mortgageColumnConfig}\n          id={account + \"-history\"}\n          autoSizeStrategy={{ type: \"fitGridWidth\" }}\n        />\n      </Grid>\n      <Grid lg={6}>\n        <div>\n          <Grid container spacing={2}>\n            <Grid xl={3}>\n              <AddLoan accountName={accountName} />\n            </Grid>\n            <Grid xl={3}>\n              <AddEntry accountName={accountName} />\n            </Grid>\n            <Grid xl={0}></Grid>\n            <Grid xl={3}>\n              <Stack spacing={2}>\n                <DeleteAccount accountName={accountName} />\n                <RenameAccount key={accountName} accountName={accountName} />\n              </Stack>\n            </Grid>\n          </Grid>\n        </div>\n      </Grid>\n    </Grid>\n  );\n};\n","import { Box, Tab, Tabs } from \"@mui/material\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { useEffect, useState } from \"react\";\nimport { store } from \"shared/store\";\nimport { NewAccount } from \"../new-account\";\nimport { AccountTab } from \"../tab-types/account/account\";\nimport { MortgageTab } from \"../tab-types/mortgage\";\n\nexport const AccountTabs = () => {\n  const accounts = useStore(store, (x) => x.wealth);\n  const firstAccount = Object.keys(accounts)?.[0];\n  const [account, setAccount] = useState<string>(firstAccount);\n\n  useEffect(() => {\n    if (!accounts[account]) {\n      setAccount(Object.keys(accounts)?.[0] ?? \"\");\n    }\n  }, [account, accounts]);\n\n  return (\n    <Box display=\"flex\" flexDirection={\"column\"} width=\"100%\" height=\"100%\">\n      <Box display={\"flex\"} flex={\"0 1 auto\"}>\n        {Object.keys(accounts).length > 0 && (\n          <Tabs\n            value={account}\n            onChange={(_, value) => {\n              setAccount(value as string);\n            }}\n          >\n            {Object.keys(accounts).map((account) => {\n              return <Tab key={account} value={account} label={account} />;\n            })}\n          </Tabs>\n        )}\n        <Tab component={NewAccount} />\n      </Box>\n      <Box flex={\"1 1 auto\"}>\n        {accounts[account]?.type === \"account\" && <AccountTab accountName={account} />}\n        {accounts[account]?.type === \"mortgage\" && <MortgageTab accountName={account} />}\n      </Box>\n    </Box>\n  );\n};\n","import { DateTime } from \"luxon\";\nimport { Account } from \"shared/models/account\";\nimport { Mortgage } from \"shared/models/mortgage\";\nimport { findNearestOnOrBefore } from \"./find-nearest-on-or-before\";\nimport { calcEquity, calcLoanBalance } from \"./mortgage-calc\";\n\nconst getMortgageValue = (date: DateTime, mortgage: Mortgage) => {\n  if (!mortgage.loan) {\n    return 0;\n  }\n  const entry = findNearestOnOrBefore(date, mortgage.data);\n  if (entry?.date && mortgage.data[0] === entry && DateTime.fromISO(entry.date).startOf(\"day\") > date) {\n    return 0;\n  }\n  const { ownershipPct, principal } = mortgage.loan;\n  const balance = calcLoanBalance(date, mortgage.loan);\n  return calcEquity(ownershipPct, entry?.value, balance, principal);\n};\n\nconst getAccountValue = (date: DateTime, account: Account) => {\n  const entry = findNearestOnOrBefore(date, account.data);\n  if (entry?.date && account.data[0] === entry && DateTime.fromISO(entry.date).startOf(\"day\") > date) {\n    return 0;\n  }\n  return entry?.value;\n};\n\nexport const getGraphValue = (date: DateTime, account: Account | Mortgage) => {\n  switch (account.type) {\n    case \"account\":\n      return getAccountValue(date, account);\n    case \"mortgage\":\n      return getMortgageValue(date, account);\n  }\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { getGraphDates } from \"shared/utility/get-graph-dates\";\nimport { getGraphValue } from \"shared/utility/get-graph-value\";\n\nexport const useGraphData = () => {\n  const wealth = useStore(store, (x) => x.wealth);\n\n  return useMemo(() => {\n    const dates = getGraphDates(Object.values(wealth));\n    const accounts = Object.entries(wealth);\n    const graphData = dates.map((date) => {\n      return accounts.reduce(\n        (acc, [accountName, account]) => {\n          const value = getGraphValue(date, account);\n\n          if (value) {\n            acc[accountName] = value;\n            acc[\"total\"] = (acc[\"total\"] as number) + value;\n          } else {\n            acc[accountName] = null;\n          }\n\n          acc[\"date\"] = date.toJSDate();\n          return acc;\n        },\n        { total: 0 } as Record<string, number | Date | null>,\n      );\n    });\n\n    graphData.forEach((x, idx, arr) => {\n      if (idx < arr.length - 1) {\n        Object.keys(x).forEach((key) => {\n          if (x[key] === null && arr[idx + 1][key] !== null) {\n            x[key] = 0;\n          }\n        });\n      }\n    });\n\n    const firstNonZero = graphData.findIndex((x) => (x[\"total\"] as number) > 0);\n    return graphData.slice(firstNonZero);\n  }, [wealth]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { AgAreaSeriesOptions, AgCartesianChartOptions, AgLineSeriesOptions } from \"ag-charts-community\";\nimport { AgChartsReact } from \"ag-charts-react\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { formatCashShort } from \"shared/utility/format-cash\";\nimport { useGraphData } from \"./use-graph-data\";\n\nexport const WealthChart = () => {\n  const wealth = useStore(store, (x) => x.wealth);\n  const data = useGraphData();\n\n  const series = useMemo(() => {\n    return [\n      ...Object.keys(wealth).map((x) => {\n        return {\n          stacked: true,\n          type: \"area\",\n          xKey: \"date\",\n          yKey: x,\n          yName: x,\n          tooltip: {\n            renderer: ({ datum, yKey, xKey }) => ({\n              content: `${DateTime.fromJSDate(datum[xKey]).toISODate()} ${formatCashShort(datum[yKey])}`,\n            }),\n          },\n        } as AgAreaSeriesOptions;\n      }),\n      {\n        type: \"line\",\n        xKey: \"date\",\n        yKey: \"total\",\n        yName: \"Total\",\n        tooltip: {\n          renderer: ({ datum, yKey, xKey }) => ({\n            content: `${DateTime.fromJSDate(datum[xKey]).toISODate()} ${formatCashShort(datum[yKey])}`,\n          }),\n        },\n      } as AgLineSeriesOptions,\n    ];\n  }, [wealth]);\n\n  const options: AgCartesianChartOptions = useMemo(\n    () => ({\n      theme: \"ag-default-dark\",\n      title: {\n        text: `Total Wealth ${formatCashShort((data[data.length - 1]?.total ?? 0) as number)}`,\n      },\n      data,\n      axes: [\n        {\n          type: \"time\",\n          position: \"bottom\",\n          label: {\n            format: \"%Y\",\n          },\n        },\n        {\n          type: \"number\",\n          position: \"left\",\n        },\n      ],\n      series,\n    }),\n    [data, series],\n  );\n  return <AgChartsReact options={options} />;\n};\n","import Grid from \"@mui/system/Unstable_Grid\";\nimport { AccountTabs } from \"./components/account-tabs\";\nimport { WealthChart } from \"./components/wealth-chart\";\n\nexport const NetWealth = () => {\n  return (\n    <Grid container height={\"100%\"} width=\"100%\" spacing={1}>\n      <Grid xs={12} height=\"50%\">\n        <WealthChart />\n      </Grid>\n      <Grid xs={12} height=\"50%\">\n        <AccountTabs />\n      </Grid>\n    </Grid>\n  );\n};\n","import { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\n\nexport const useDates = (year?: number) =>\n  useMemo(() => {\n    return {\n      meritIncrease: DateTime.fromObject({ month: 4, day: 1, year }),\n      meritBonus: DateTime.fromObject({ month: 4, day: 15, year }),\n      companyBonus: DateTime.fromObject({ month: 6, day: 15, year }),\n      retirementBonus: DateTime.fromObject({ month: 7, day: 15, year }),\n    };\n  }, [year]);\n\nexport const useDateRanges = (year: number) => {\n  return useMemo(\n    () => ({\n      base: {\n        start: DateTime.fromObject({ month: 1, day: 1, year }),\n        end: DateTime.fromObject({ month: 12, day: 31, year }).endOf(\"day\"),\n      },\n      meritBonus: {\n        start: DateTime.fromObject({ month: 1, day: 1, year: year - 1 }),\n        end: DateTime.fromObject({ month: 12, day: 31, year: year - 1 }).endOf(\"day\"),\n      },\n      companyBonus: {\n        start: DateTime.fromObject({ day: 1, month: 4, year: year - 1 }),\n        end: DateTime.fromObject({ day: 31, month: 3, year }).endOf(\"day\"),\n      },\n      retirementBonus: {\n        start: DateTime.fromObject({ day: 1, month: 7, year: year - 1 }),\n        end: DateTime.fromObject({ day: 30, month: 6, year }).endOf(\"day\"),\n      },\n    }),\n    [year]\n  );\n};\n","import { DateTime } from \"luxon\";\nimport { AccountData } from \"shared/models/account-data\";\n\nexport function findSameYear(year: number, data: AccountData[]): AccountData | undefined;\nexport function findSameYear(date: DateTime, data: AccountData[]): AccountData | undefined;\nexport function findSameYear(date: DateTime | number, data: AccountData[]): AccountData | undefined {\n  const year = typeof date === \"number\" ? date : date.year;\n  return data.find((x) => {\n    return DateTime.fromISO(x.date).year === year;\n  });\n}\n","export interface Outcome {\n  min: number;\n  max: number;\n  avg: number;\n  actual?: number;\n}\n\nexport interface BonusOutcomes {\n  percent: Outcome;\n  cash: Outcome;\n}\n\nexport const minMaxAvg = (values: number[]): Outcome => {\n  if (values.length === 0) {\n    return { min: 0, max: 0, avg: 0 };\n  }\n  return values.reduce(\n    (acc, curr, index, arr) => {\n      const { min, max, avg } = acc;\n      return {\n        min: Math.min(curr, min),\n        max: Math.max(curr, max),\n        avg: index === arr.length - 1 ? (avg + curr) / arr.length : avg + curr,\n      };\n    },\n    { min: Infinity, max: 0, avg: 0 },\n  );\n};\n\nexport const outcomeFromSingle = (value: number): Outcome => {\n  return { min: value, max: value, avg: value, actual: value };\n};\n\nexport const actualizedOutcome = (outcome: Outcome): Outcome =>\n  outcome.actual ? outcomeFromSingle(outcome.actual) : outcome;\n\nexport const scaleOutcome = (outcome: Outcome, value: number): Outcome => {\n  return {\n    min: outcome.min * value,\n    max: outcome.max * value,\n    avg: outcome.avg * value,\n    actual: outcome.actual ? outcome.actual * value : undefined,\n  };\n};\nexport const AddConstantOutcome = (outcome: Outcome, value: number): Outcome => {\n  return {\n    min: outcome.min + value,\n    max: outcome.max + value,\n    avg: outcome.avg + value,\n    actual: outcome.actual ? outcome.actual + value : undefined,\n  };\n};\n\nexport const MultiplyOutcome = (outcomeA: Outcome, outcomeB: Outcome): Outcome => {\n  return {\n    min: outcomeA.min * outcomeB.min,\n    max: outcomeA.max * outcomeB.max,\n    avg: outcomeA.avg * outcomeB.avg,\n    actual: outcomeA.actual != undefined && outcomeB.actual != undefined ? outcomeA.actual * outcomeB.avg : undefined,\n  };\n};\n\nexport const AddOutcome = (...outcomes: Outcome[]): Outcome => {\n  const everyActualDefined = outcomes.every((x) => x.actual != undefined);\n  return outcomes.reduce(\n    (acc, curr) => {\n      return {\n        min: acc.min + curr.min,\n        avg: acc.avg + curr.avg,\n        max: acc.max + curr.max,\n        actual: everyActualDefined ? (acc.actual ?? 0) + (curr.actual ?? 0) : undefined,\n      };\n    },\n    { min: 0, max: 0, avg: 0, actual: undefined },\n  );\n};\n","import { DateTime } from \"luxon\";\n\nexport const aPayday = DateTime.fromObject({ month: 12, day: 1, year: 2023 });\n","import { DateTime } from \"luxon\";\n\nexport function DateRangesOverlap(a: { start: DateTime; end: DateTime }, b: { start: DateTime; end: DateTime }) {\n  return a.start <= b.end && b.start <= a.end;\n}\n","import { DateTime } from \"luxon\";\n\nexport interface PayPeriod {\n  start: DateTime;\n  end: DateTime;\n  payedOn: DateTime;\n}\n\nexport const getPayPeriods = (anyPayday: DateTime, start: DateTime, end: DateTime): PayPeriod[] => {\n  const diff = -1 * Math.abs(start.diff(anyPayday, [\"weeks\", \"days\"]).days);\n  const daysOffset = +(anyPayday > start);\n  const startPayDay = start.plus({\n    day: diff + daysOffset,\n  });\n\n  const numPayDays = end.diff(start, [\"weeks\", \"days\"]).weeks / 2;\n  const periods = [];\n  for (let i = 1; i <= numPayDays; i++) {\n    periods.push({\n      start: startPayDay.plus({ weeks: i * 2 - 3, day: 3 }),\n      end: startPayDay.plus({ weeks: i * 2 - 1 }).endOf(\"day\"),\n      payedOn: startPayDay.plus({ weeks: i * 2 }),\n    });\n  }\n  return periods;\n};\n","import { useMemo } from \"react\";\nimport { AccountData } from \"shared/models/account-data\";\n\nexport const useMostFrequentValue = (data: AccountData[]): number | undefined => {\n  return useMemo(() => {\n    return Object.entries(\n      Object.groupBy(\n        data.map((x) => x.value),\n        (x) => x\n      )\n    )\n      .map(([key, values]) => [+key, values?.length ?? 0])\n      .sort(([, a], [, b]) => {\n        return b - a;\n      })[0]?.[0];\n  }, [data]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { AccountData } from \"shared/models/account-data\";\nimport { store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { findSameYear } from \"shared/utility/find-same-year\";\nimport { sortByDate } from \"shared/utility/sort-by-date\";\nimport { useMostFrequentValue } from \"./use-most-frequent-value\";\n\nconst valueByDateRange = (account: AccountData[]) => {\n  return account.toSorted(sortByDate((x) => DateTime.fromISO(x.date), \"asc\")).map((x, index, array) => {\n    const next = array[index + 1];\n    return {\n      start: DateTime.fromISO(x.date),\n      end: (next?.date ? DateTime.fromISO(next?.date).startOf(\"day\") : DateTime.fromISO(x.date).plus({ years: 1 }))\n        .minus({ days: 1 })\n        .endOf(\"day\"),\n      value: x.value,\n    };\n  });\n};\n\nconst systemYear = getLocalDateTime().year;\nconst defaultValue = {\n  start: DateTime.fromObject({\n    month: 1,\n    day: 1,\n    year: systemYear,\n  }),\n  end: DateTime.fromObject({\n    month: 12,\n    day: 31,\n    year: systemYear,\n  }).endOf(\"day\"),\n  value: 0,\n};\n\nexport const useProjectedPay = () => {\n  const timeSeries = useStore(store, (x) => x.projectedIncome.timeSeries);\n  const baseIncome = timeSeries.paycheck;\n  const meritPct = useMostFrequentValue(timeSeries.meritIncreasePct);\n\n  return useMemo(() => {\n    const payPerPeriod = valueByDateRange(baseIncome);\n    const mostRecentPay = payPerPeriod[payPerPeriod.length - 1] ?? defaultValue;\n\n    for (let i = 0; i < 2; i++) {\n      const { start, end, value } = payPerPeriod[0] ?? mostRecentPay;\n      const startDate = start.plus({ years: -1 }).startOf(\"day\");\n      const equity = findSameYear(start, timeSeries.equityPct)?.value ?? 0;\n      const merit = findSameYear(start, timeSeries.meritIncreasePct)?.value ?? meritPct ?? 0;\n      const multiplier = 1 / (1 + merit + equity);\n\n      payPerPeriod.unshift({\n        start: startDate,\n        end: end.plus({ years: -1 }).endOf(\"day\"),\n        value: Math.round(value * multiplier),\n      });\n    }\n\n    const startIdx = payPerPeriod.length;\n    for (let i = 0; i < 11; i++) {\n      const { start, end, value } = payPerPeriod[startIdx + i - 1] ?? mostRecentPay;\n      const startDate = start.plus({ years: 1 });\n      const equity = findSameYear(startDate, timeSeries.equityPct)?.value ?? 0;\n      const merit = findSameYear(startDate, timeSeries.meritIncreasePct)?.value ?? meritPct ?? 0;\n      const multiplier = 1 + merit + equity;\n\n      payPerPeriod.push({\n        start: startDate,\n        end: end.plus({ years: 1 }).endOf(\"day\"),\n        value: Math.round(value * multiplier),\n      });\n    }\n\n    return payPerPeriod;\n  }, [baseIncome, meritPct, timeSeries.equityPct, timeSeries.meritIncreasePct]);\n};\n","import { differenceInBusinessDays } from \"date-fns/differenceInBusinessDays\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { aPayday } from \"shared/utility/a-payday\";\nimport { DateRangesOverlap } from \"shared/utility/date-ranges-overlap\";\nimport { PayPeriod, getPayPeriods } from \"shared/utility/get-pay-periods\";\nimport { useProjectedPay } from \"./use-projected-pay\";\n\nexport type IncomePerPeriod = {\n  perPayday: number;\n  count: number;\n  start: DateTime;\n  end: DateTime;\n  value: number;\n};\n\nexport interface BaseIncome {\n  totalIncome: number;\n  payPeriods: (PayPeriod & { value: number })[];\n  incomePerPeriod: IncomePerPeriod[];\n}\n\nexport const useBaseIncome = (startDate: DateTime, endDate: DateTime): BaseIncome => {\n  const pay = useProjectedPay();\n\n  return useMemo(() => {\n    const payPeriods = getPayPeriods(aPayday, startDate, endDate).map((payPeriod) => {\n      const dateRanges = pay.filter((x) => DateRangesOverlap(x, payPeriod));\n      const payDuringPeriod = dateRanges.map((x) => {\n        const start = DateTime.max(x.start, payPeriod.start);\n        const end = DateTime.min(x.end, payPeriod.end);\n        const businessDays = differenceInBusinessDays(end.plus({ millisecond: 1 }).toJSDate(), start.toJSDate());\n        const value = (x.value / 10) * Math.round(businessDays);\n        return {\n          start,\n          end,\n          value,\n        };\n      });\n      const sum = payDuringPeriod.reduce((acc, curr) => acc + curr.value, 0);\n\n      return {\n        ...payPeriod,\n        value: sum,\n      };\n    });\n\n    const totalIncome = payPeriods.reduce((acc, curr) => acc + curr.value, 0);\n\n    const incomePerPeriod = payPeriods\n      .reduceRight((acc, curr) => {\n        if (acc[0]?.[0]?.value === curr.value) {\n          acc[0].unshift(curr);\n        } else {\n          acc.unshift([curr]);\n        }\n\n        return acc;\n      }, [] as (typeof payPeriods)[])\n      .reduce((acc, curr) => {\n        acc.push({\n          start: curr[0].payedOn,\n          end: curr[curr.length - 1].payedOn,\n          value: curr.reduce((acc, curr) => acc + curr.value, 0),\n          perPayday: curr[0].value,\n          count: curr.length,\n        });\n        return acc;\n      }, [] as IncomePerPeriod[]);\n\n    return { totalIncome, payPeriods, incomePerPeriod };\n  }, [startDate, endDate, pay]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { useDateRanges } from \"shared/hooks/use-dates\";\nimport { store } from \"shared/store\";\nimport { findSameYear } from \"shared/utility/find-same-year\";\nimport { BonusOutcomes, actualizedOutcome, minMaxAvg, scaleOutcome } from \"shared/utility/min-max-avg\";\nimport { useBaseIncome } from \"./use-base-income\";\n\nexport const useCompanyBonus = (year: number): BonusOutcomes => {\n  const timeSeries = useStore(store, (x) => x.projectedIncome.timeSeries);\n  const dateRanges = useDateRanges(year);\n  const { totalIncome } = useBaseIncome(dateRanges.companyBonus.start, dateRanges.companyBonus.end);\n\n  return useMemo(() => {\n    const mostRecentBonus = findSameYear(year, timeSeries.companyBonus);\n    const mostRecentPercent = findSameYear(year, timeSeries.companyBonusPct);\n\n    const meritFactor = timeSeries.meritBonusPct\n      .filter((x) => DateTime.fromISO(x.date).year <= year)\n      .slice(-3)\n      .reduce((acc, curr) => acc + curr.value, 0);\n\n    const outcomes = minMaxAvg(timeSeries.companyBonusPct.map((x) => x.value));\n    const cash = scaleOutcome(outcomes, meritFactor * totalIncome);\n    const projectedActual = mostRecentPercent?.value ? mostRecentPercent?.value * meritFactor * totalIncome : undefined;\n\n    return {\n      percent: actualizedOutcome({\n        ...outcomes,\n        actual: mostRecentPercent?.value,\n      }),\n      cash: actualizedOutcome({\n        ...cash,\n        actual: mostRecentBonus?.value ?? projectedActual,\n      }),\n    };\n  }, [totalIncome, timeSeries.companyBonus, timeSeries.companyBonusPct, timeSeries.meritBonusPct, year]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { useDateRanges } from \"shared/hooks/use-dates\";\nimport { store } from \"shared/store\";\nimport { findSameYear } from \"shared/utility/find-same-year\";\nimport { BonusOutcomes, actualizedOutcome, minMaxAvg, scaleOutcome } from \"shared/utility/min-max-avg\";\nimport { useBaseIncome } from \"./use-base-income\";\nimport { useMostFrequentValue } from \"./use-most-frequent-value\";\n\nexport const useMeritBonus = (year: number): BonusOutcomes => {\n  const timeSeries = useStore(store, (x) => x.projectedIncome.timeSeries);\n  const ranges = useDateRanges(year);\n  const { totalIncome } = useBaseIncome(ranges.meritBonus.start, ranges.meritBonus.end);\n\n  const bonusAmount = useMemo(() => {\n    return findSameYear(year, timeSeries.meritBonus)?.value;\n  }, [timeSeries.meritBonus, year]);\n\n  const bonusPercent = useMemo(() => {\n    return findSameYear(year, timeSeries.meritBonusPct)?.value;\n  }, [timeSeries.meritBonusPct, year]);\n\n  const frequentMeritBonusPercent = useMostFrequentValue(timeSeries.meritBonusPct);\n\n  return useMemo(() => {\n    const meritOutcome = minMaxAvg(\n      timeSeries.meritBonusPct.filter((x) => DateTime.fromISO(x.date).year <= year).map((x) => x.value)\n    );\n    meritOutcome.avg = frequentMeritBonusPercent ?? 0;\n\n    return {\n      percent: actualizedOutcome({ ...meritOutcome, actual: bonusPercent }),\n      cash: actualizedOutcome({\n        ...scaleOutcome(meritOutcome, totalIncome),\n        actual: bonusAmount ?? (bonusPercent ? totalIncome * bonusPercent : undefined),\n      }),\n    };\n  }, [bonusAmount, bonusPercent, frequentMeritBonusPercent, timeSeries.meritBonusPct, totalIncome, year]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { useDateRanges } from \"shared/hooks/use-dates\";\nimport { store } from \"shared/store\";\nimport { findSameYear } from \"shared/utility/find-same-year\";\nimport {\n  AddOutcome,\n  BonusOutcomes,\n  actualizedOutcome,\n  outcomeFromSingle,\n  scaleOutcome,\n} from \"shared/utility/min-max-avg\";\nimport { useBaseIncome } from \"./use-base-income\";\nimport { useCompanyBonus } from \"./use-company-bonus\";\nimport { useMeritBonus } from \"./use-merit-bonus\";\n\nconst bonusPercent = 0.15;\nexport const useRetirementBonus = (year: number): BonusOutcomes => {\n  const actual = useStore(store, (x) => findSameYear(year, x.projectedIncome.timeSeries.retirementBonus)?.value);\n\n  const dateRanges = useDateRanges(year);\n  const { totalIncome } = useBaseIncome(dateRanges.retirementBonus.start, dateRanges.retirementBonus.end);\n\n  const meritBonus = useMeritBonus(year);\n  const juneBonus = useCompanyBonus(year);\n\n  return useMemo(() => {\n    const eligibleIncome = outcomeFromSingle(totalIncome);\n    const outcome = scaleOutcome(\n      AddOutcome(eligibleIncome, actualizedOutcome(meritBonus.cash), actualizedOutcome(juneBonus.cash)),\n      bonusPercent\n    );\n    return {\n      cash: actualizedOutcome({ ...outcome, actual: actual ?? outcome.actual }),\n      percent: {\n        min: 0.15,\n        max: 0.15,\n        avg: 0.15,\n        actual: 0.15,\n      },\n    };\n  }, [actual, juneBonus.cash, meritBonus.cash, totalIncome]);\n};\n","import { useMemo } from \"react\";\nimport { useDateRanges } from \"shared/hooks/use-dates\";\nimport { AddOutcome, actualizedOutcome, outcomeFromSingle } from \"shared/utility/min-max-avg\";\nimport { useBaseIncome } from \"./use-base-income\";\nimport { useCompanyBonus } from \"./use-company-bonus\";\nimport { useMeritBonus } from \"./use-merit-bonus\";\nimport { useRetirementBonus } from \"./use-retirement-bonus\";\n\nexport const useTotalIncome = (year: number) => {\n  const { base } = useDateRanges(year);\n  const baseIncome = useBaseIncome(base.start, base.end);\n\n  const meritBonus = useMeritBonus(year);\n  const juneBonus = useCompanyBonus(year);\n  const julyBonus = useRetirementBonus(year);\n\n  return useMemo(() => {\n    const taxableIncome = AddOutcome(\n      outcomeFromSingle(baseIncome.totalIncome),\n      actualizedOutcome(meritBonus.cash),\n      actualizedOutcome(juneBonus.cash)\n    );\n    const totalIncome = AddOutcome(taxableIncome, actualizedOutcome(julyBonus.cash));\n    return { taxableIncome, totalIncome };\n  }, [baseIncome.totalIncome, julyBonus.cash, juneBonus.cash, meritBonus.cash]);\n};\n","import { Tooltip } from \"@mui/material\";\nimport { useMemo } from \"react\";\nimport { formatCash, formatCashShort } from \"shared/utility/format-cash\";\n\ninterface CashProps {\n  value?: number;\n  fallback?: number;\n  disableTooltip?: boolean;\n  compact?: boolean;\n  tooltip?: string;\n}\nexport const Cash = ({ value, fallback, disableTooltip, compact = true, tooltip }: CashProps) => {\n  const formatted = useMemo(() => {\n    if (value === undefined) {\n      return fallback;\n    }\n    return compact ? formatCashShort(value) : formatCash(value);\n  }, [compact, fallback, value]);\n\n  return (\n    <Tooltip\n      disableHoverListener={disableTooltip || !compact || !value}\n      title={[tooltip, formatCash(value!)].join(\" \")}\n    >\n      <span>{formatted}</span>\n    </Tooltip>\n  );\n};\n","import { Box, Tooltip } from \"@mui/material\";\nimport { DateTime } from \"luxon\";\nimport { ReactNode, useMemo } from \"react\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { shortDate } from \"shared/utility/format-date\";\n\ninterface DurationProps {\n  dateTime?: DateTime;\n  children?: ReactNode;\n  variant?: \"countdown\" | \"date\";\n  dateFormat?: string;\n}\nexport const Duration = (props: DurationProps) => {\n  const { dateTime, children, variant = \"countdown\", dateFormat = shortDate } = props;\n\n  const countDownStr = useMemo(() => {\n    if (!dateTime) {\n      return \"??\";\n    }\n    if (variant === \"countdown\") {\n      const diff = dateTime?.diffNow([\"months\", \"days\", \"hours\"]);\n      const format = diff && diff.days === 0 ? \"h'hr'\" : \"d'd'\";\n      return diff?.toFormat(format);\n    }\n\n    return dateTime?.toFormat(dateFormat);\n  }, [dateFormat, dateTime, variant]);\n\n  const tooltipStr = useMemo(() => {\n    if (variant === \"countdown\") {\n      return dateTime?.toFormat(dateFormat);\n    }\n\n    return dateTime?.diffNow([\"months\", \"days\", \"hours\"]).toFormat(\"d 'days'\");\n  }, [dateFormat, dateTime, variant]);\n\n  const countDownColor = useMemo(() => {\n    if (!dateTime) {\n      return \"white\";\n    }\n\n    const days = dateTime.diffNow(\"days\").days;\n    if (days < 30) {\n      return \"green\";\n    } else if (days < 60) {\n      return \"yellow\";\n    }\n\n    return \"red\";\n  }, [dateTime]);\n\n  return dateTime && dateTime > getLocalDateTime() ? (\n    <Tooltip title={tooltipStr}>\n      <Box color={countDownColor}>{countDownStr}</Box>\n    </Tooltip>\n  ) : (\n    children\n  );\n};\n","export const formatPercent = new Intl.NumberFormat(\"en-us\", {\n  style: \"percent\",\n  maximumFractionDigits: 1,\n}).format;\n","import { formatPercent } from \"shared/utility/format-percent\";\n\ninterface PercentProps {\n  value: number;\n}\nexport const Percent = ({ value }: PercentProps) => {\n  return formatPercent(value);\n};\n","import { Box } from \"@mui/material\";\nimport { ReactNode } from \"react\";\n\ninterface CellProps {\n  children?: ReactNode;\n  secondaryValue?: ReactNode;\n  tertiaryValue?: ReactNode;\n  title: string;\n  className?: string;\n}\n\nexport const Value = (props: CellProps) => {\n  const { children, secondaryValue, tertiaryValue, title, className } = props;\n  return (\n    <Box\n      sx={{\n        display: \"flex\",\n        minWidth: 106,\n        height: 64,\n        padding: \"0px 8px\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"flex-start\",\n        gap: 0.5,\n        flexShrink: 0,\n      }}\n      className={className}\n    >\n      <Box display={\"flex\"} alignItems={\"center\"} gap={0.5}>\n        <Box fontSize={18} fontWeight={700} lineHeight={\"20px\"}>\n          {children ? children : \"?\"}\n        </Box>\n        {!!(secondaryValue ?? tertiaryValue) && (\n          <Box\n            alignSelf={\"flex-end\"}\n            fontSize={12}\n            fontWeight={500}\n            lineHeight={\"16px\"}\n            textTransform={\"uppercase\"}\n            color={\"#888\"}\n          >\n            {secondaryValue ?? tertiaryValue}\n          </Box>\n        )}\n      </Box>\n      <Box fontSize={12} fontWeight={500} lineHeight={\"16px\"} textTransform={\"uppercase\"}>\n        {title}\n      </Box>\n    </Box>\n  );\n};\n","import { Box, Divider, Stack, Typography } from \"@mui/material\";\nimport { DateTime } from \"luxon\";\nimport { Cash } from \"shared/components/formatters/cash\";\nimport { Duration } from \"shared/components/formatters/duration\";\nimport { Percent } from \"shared/components/formatters/percent\";\nimport { BonusOutcomes } from \"shared/utility/min-max-avg\";\nimport { Value } from \"./value\";\n\nexport const BonusOutcome = (props: { title: string; outcome: BonusOutcomes; payDate: DateTime }) => {\n  const { outcome, title, payDate } = props;\n\n  return (\n    <Box sx={{ border: \"1px solid rgba(255,255,255,0.1)\", borderRadius: 2 }}>\n      <Typography\n        sx={{\n          paddingBottom: 1,\n          paddingLeft: 2,\n          paddingTop: 1,\n          paddingRight: 2,\n          width: \"max-content\",\n        }}\n        variant=\"h5\"\n      >\n        {title}\n      </Typography>\n      <Divider />\n      <Stack padding={1} direction={\"row\"} spacing={0.5} justifyContent={\"center\"}>\n        {!outcome.cash.actual && (\n          <>\n            <Value secondaryValue={<Percent value={outcome.percent.min} />} title={\"min\"}>\n              <Cash value={outcome.cash.min} fallback={0} />\n            </Value>\n            <Value secondaryValue={<Percent value={outcome.percent.avg} />} title={\"avg\"}>\n              <Cash value={outcome.cash.avg} fallback={0} />\n            </Value>\n            <Value secondaryValue={<Percent value={outcome.percent.max} />} title={\"max\"}>\n              <Cash value={outcome.cash.max} fallback={0} />\n            </Value>\n          </>\n        )}\n        <Value\n          title={\"Actual\"}\n          tertiaryValue={outcome.percent.actual && <Percent value={outcome.percent.actual} />}\n          secondaryValue={outcome.cash.actual && <Cash value={outcome.cash.actual} />}\n        >\n          <Duration dateTime={payDate}>\n            <Cash value={outcome.cash.actual} />\n          </Duration>\n        </Value>\n      </Stack>\n    </Box>\n  );\n};\n","import { DateTime } from \"luxon\";\nimport { create } from \"mutative\";\nimport { TimeSeries } from \"shared/models/projected-income\";\nimport { store } from \".\";\n\nexport const updateProjectedIncomeDate = (timeSeries: TimeSeries, id: string, date: DateTime) => {\n  store.setState((prev) => {\n    const next = create(prev, (next) => {\n      const account = next.projectedIncome.timeSeries[timeSeries];\n      const idx = account.findIndex((x) => x.id === id);\n      account[idx].date = date.toISO()!;\n    });\n    return next;\n  });\n};\n","import DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\nimport UpdateIcon from \"@mui/icons-material/Update\";\nimport { Button, Tooltip } from \"@mui/material\";\nimport { Stack } from \"@mui/system\";\nimport { ColDef, ICellRendererParams } from \"ag-grid-community\";\nimport { CustomCellRendererProps } from \"ag-grid-react\";\nimport { DateTime } from \"luxon\";\nimport { AccountData } from \"shared/models/account-data\";\nimport { TimeSeries } from \"shared/models/projected-income\";\nimport { updateProjectedIncome } from \"shared/store\";\nimport { removeProjectedIncome } from \"shared/store/remove-projected-income\";\nimport { updateProjectedIncomeDate } from \"shared/store/update-projected-income-date\";\nimport { formatCash } from \"shared/utility/format-cash\";\nimport { shortDate } from \"shared/utility/format-date\";\n\nexport const createAccountColumnConfig = (\n  accountName: TimeSeries,\n  variant: \"number\" | \"cash\" | \"percent\"\n): ColDef<AccountData>[] => [\n  {\n    headerName: \"Date\",\n    sort: \"desc\",\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\n    valueGetter: (x) => x.data && DateTime.fromISO(x.data.date),\n    cellRenderer: (x: ICellRendererParams<unknown, DateTime>) => {\n      return (\n        <Stack direction={\"row\"} alignItems={\"center\"}>\n          {x.valueFormatted}&nbsp;\n          {x.value && x.value > DateTime.local() && (\n            <Tooltip title=\"Future Event\">\n              <UpdateIcon htmlColor=\"yellow\" />\n            </Tooltip>\n          )}\n        </Stack>\n      );\n    },\n    cellEditor: \"agDateCellEditor\",\n    editable: true,\n    valueSetter: (x) => {\n      const date = DateTime.fromJSDate(x.newValue);\n      if (date.isValid) {\n        updateProjectedIncomeDate(accountName, x.data.id, DateTime.fromJSDate(x.newValue));\n      }\n      return date.isValid;\n    },\n  },\n  {\n    headerName: \"Value\",\n    valueGetter: (x) => x.data?.value,\n    valueFormatter: (x) =>\n      variant === \"number\" ? x.value : variant === \"cash\" ? formatCash(x.value) : (x.value * 100).toFixed(2) + \"%\",\n    type: \"numericColumn\",\n    editable: true,\n    cellEditor: \"agNumberCellEditor\",\n    valueSetter: (x) => {\n      updateProjectedIncome(accountName, x.data.id, +x.newValue);\n      return true;\n    },\n  },\n  {\n    headerName: \"Actions\",\n    cellRenderer: (props: CustomCellRendererProps<AccountData>) => {\n      return (\n        <Button\n          onClick={() => {\n            props.data && removeProjectedIncome(accountName, props.data?.id);\n          }}\n          color=\"error\"\n        >\n          <DeleteForeverIcon />\n        </Button>\n      );\n    },\n  },\n];\n","import { Box, Button, InputAdornment, Paper, Stack, TextField, Tooltip, Typography } from \"@mui/material\";\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo, useState } from \"react\";\nimport { AgGrid } from \"shared/components/ag-grid\";\nimport { TimeSeries } from \"shared/models/projected-income\";\nimport { addProjectedIncome, store } from \"shared/store\";\nimport { shortDate } from \"shared/utility/format-date\";\nimport { createAccountColumnConfig } from \"./column-config\";\n\nexport const DataEntry = (props: {\n  timeSeries: TimeSeries;\n  defaultDate: DateTime;\n  variant?: \"number\" | \"cash\" | \"percent\";\n}) => {\n  const { timeSeries, defaultDate, variant = \"number\" } = props;\n  const account = useStore(store, (state) => state.projectedIncome.timeSeries[timeSeries]);\n\n  const [date, setDate] = useState(defaultDate);\n  const [amount, setAmount] = useState<number | null>(null);\n\n  const hasSameDate = useMemo(() => {\n    return !!account?.find((x) => date.hasSame(DateTime.fromISO(x.date), \"day\"));\n  }, [account, date]);\n\n  const onAddEntry = () => {\n    if (amount != null) {\n      addProjectedIncome(date, timeSeries, variant === \"percent\" ? amount / 100 : amount);\n      setAmount(null);\n    }\n  };\n\n  const accountColumnConfig = useMemo(() => {\n    return createAccountColumnConfig(timeSeries, variant);\n  }, [timeSeries, variant]);\n\n  return (\n    <Box display={\"flex\"} flexDirection={\"column\"} height=\"100%\">\n      <Stack spacing={2} flex=\"0 1 auto\">\n        <DatePicker\n          format={shortDate}\n          sx={{ color: \"white\" }}\n          label=\"Date\"\n          value={date}\n          onChange={(value) => {\n            console.log(value);\n            value && setDate(value);\n          }}\n        />\n        <TextField\n          label=\"amount\"\n          value={amount ?? \"\"}\n          type=\"number\"\n          onChange={(event) => (event.target.value === \"\" ? setAmount(null) : setAmount(+event.target.value))}\n          InputProps={{\n            startAdornment: variant !== \"number\" && (\n              <InputAdornment position=\"start\">{variant === \"cash\" ? \"$\" : \"%\"}</InputAdornment>\n            ),\n          }}\n        />\n        <Button disabled={amount === null || !date || hasSameDate} onClick={onAddEntry}>\n          Add Entry\n        </Button>\n      </Stack>\n      <Box sx={{ paddingTop: 2, flex: \"1 1 auto\" }}>\n        <AgGrid\n          reactiveCustomComponents\n          rowData={account ?? []}\n          columnDefs={accountColumnConfig}\n          id={account + \"-history\"}\n          autoSizeStrategy={{\n            type: \"fitGridWidth\",\n          }}\n          stopEditingWhenCellsLoseFocus\n        />\n      </Box>\n    </Box>\n  );\n};\n\nexport interface LayoutProps {\n  title: string;\n  accountName: TimeSeries;\n  defaultDate: DateTime;\n  variant: \"percent\" | \"number\" | \"cash\";\n}\n\nexport const Layout = (props: LayoutProps) => {\n  const { title, accountName, defaultDate, variant } = props;\n  return (\n    <Paper sx={{ padding: 2, height: \"100%\", width: 450, flexShrink: 0 }}>\n      <Box display=\"flex\" flexDirection=\"column\" height=\"100%\">\n        <Box flex=\"0 1 auto\" marginBottom={2}>\n          <Typography sx={{ marginBottom: 2 }} variant=\"h5\">\n            {title}{\" \"}\n            {variant === \"cash\" && (\n              <Tooltip\n                title={\n                  <>\n                    <span>Cash values are used in lieu of Percent values.</span>\n                    <br />\n                    <span>Cash values are considered actual payment values.</span>\n                  </>\n                }\n              >\n                <span>($)</span>\n              </Tooltip>\n            )}\n            {variant === \"percent\" && (\n              <Tooltip title=\"Percentage values are used for predictions.\">\n                <span>(%)</span>\n              </Tooltip>\n            )}\n          </Typography>\n        </Box>\n        <Box flex=\"1 1 auto\">\n          <DataEntry variant={variant} timeSeries={accountName} defaultDate={defaultDate} />\n        </Box>\n      </Box>\n    </Paper>\n  );\n};\n","import { DateTime } from \"luxon\";\nimport { ReactNode } from \"react\";\n\ninterface UntilProps {\n  dateTime?: DateTime;\n  children: ReactNode;\n}\n\nexport const Until = (props: UntilProps) => {\n  const { dateTime, children } = props;\n  return dateTime && DateTime.local() < dateTime && children;\n};\n","import { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { useProjectedPay } from \"shared/hooks/use-projected-pay\";\n\nexport const usePaycheck = (date: DateTime) => {\n  const paychecks = useProjectedPay();\n\n  const paycheck = useMemo(() => {\n    return paychecks.find(({ start }) => start.year === date.year)?.value ?? 0;\n  }, [date.year, paychecks]);\n\n  return paycheck;\n};\n","import ArrowForwardIcon from \"@mui/icons-material/ArrowForward\";\nimport { Table, TableBody, TableCell, TableRow } from \"@mui/material\";\nimport { Cash } from \"shared/components/formatters/cash\";\nimport { shortDate } from \"shared/utility/format-date\";\nimport { IncomePerPeriod } from \"../../../shared/hooks/use-base-income\";\n\ninterface IncomePerPeriodTooltipProps {\n  incomePerPeriod: IncomePerPeriod[];\n  totalIncome: number;\n}\n\nexport const IncomePerPeriodTooltip = (props: IncomePerPeriodTooltipProps) => {\n  const { incomePerPeriod, totalIncome } = props;\n  return (\n    <Table sx={{ width: \"max-content\" }}>\n      <TableBody>\n        {incomePerPeriod.map(({ start, end, value, perPayday, count }, index) => {\n          return (\n            <TableRow key={index}>\n              <TableCell>\n                <Cash value={value} compact={false} />\n              </TableCell>\n              <TableCell>{start.toFormat(shortDate)}</TableCell>\n              <TableCell>\n                <ArrowForwardIcon />\n              </TableCell>\n              <TableCell>{end.toFormat(shortDate)}</TableCell>\n              <TableCell>\n                <Cash value={perPayday} compact={false} /> x {count}\n              </TableCell>\n            </TableRow>\n          );\n        })}\n        <TableRow>\n          <TableCell colSpan={4}>Total:</TableCell>\n          <TableCell>\n            <Cash value={totalIncome} compact={false} />\n          </TableCell>\n        </TableRow>\n      </TableBody>\n    </Table>\n  );\n};\n","import { Box, Divider, Stack, Tooltip, Typography } from \"@mui/material\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { Cash } from \"shared/components/formatters/cash\";\nimport { Duration } from \"shared/components/formatters/duration\";\nimport { Percent } from \"shared/components/formatters/percent\";\nimport { Until } from \"shared/components/formatters/until\";\nimport { useBaseIncome } from \"shared/hooks/use-base-income\";\nimport { useDateRanges } from \"shared/hooks/use-dates\";\nimport { useMostFrequentValue } from \"shared/hooks/use-most-frequent-value\";\nimport { useProjectedPay } from \"shared/hooks/use-projected-pay\";\nimport { store } from \"shared/store\";\nimport { findSameYear } from \"shared/utility/find-same-year\";\nimport { usePaycheck } from \"../hooks/use-pay-check\";\nimport { IncomePerPeriodTooltip } from \"./income-per-period\";\nimport { Value } from \"./value\";\n\nexport const MeritOutcome = (props: { title: string; payDate: DateTime }) => {\n  const { title, payDate } = props;\n\n  const dateRanges = useDateRanges(payDate.year);\n  const income = useBaseIncome(dateRanges.base.start, dateRanges.base.end);\n\n  const projectedPay = useProjectedPay();\n  const baseAprToApr = useMemo(() => {\n    const pay = projectedPay.find((x) => {\n      return x.start <= payDate && payDate <= x.end;\n    });\n\n    return (pay?.value ?? 0) * 26;\n  }, [payDate, projectedPay]);\n\n  const meritIncreases = useStore(store, (x) => x.projectedIncome.timeSeries.meritIncreasePct);\n\n  const commonMerit = useMostFrequentValue(meritIncreases);\n  const meritPct = useStore(\n    store,\n    (x) => findSameYear(payDate, x.projectedIncome.timeSeries.meritIncreasePct)?.value ?? commonMerit\n  );\n\n  const equityPct = useStore(store, (x) => payDate && findSameYear(payDate, x.projectedIncome.timeSeries.equityPct));\n  const totalAdjust = (meritPct ?? 0) + (equityPct?.value ?? 0);\n  const paycheck = usePaycheck(payDate);\n\n  return (\n    <Box\n      sx={{\n        border: \"1px solid rgba(255,255,255,0.1)\",\n        borderRadius: 2,\n      }}\n    >\n      <Typography sx={{ paddingBottom: 1, paddingLeft: 2, paddingTop: 1 }} variant=\"h5\">\n        {title}\n      </Typography>\n      <Divider />\n\n      <Stack padding={1} direction={\"row\"} spacing={0.5}>\n        {\n          <Value title={\"Paycheck\"}>\n            <Cash value={paycheck} compact={false} />\n          </Value>\n        }\n        <Tooltip\n          componentsProps={{\n            tooltip: {\n              sx: {\n                maxWidth: \"none\",\n              },\n            },\n          }}\n          title={<IncomePerPeriodTooltip incomePerPeriod={income.incomePerPeriod} totalIncome={income.totalIncome} />}\n        >\n          <div>\n            <Value title={\"Base Pay\"}>\n              <Cash disableTooltip value={income.totalIncome ?? 0} />\n            </Value>\n          </div>\n        </Tooltip>\n\n        <Value title={\"APR to APR\"}>\n          <Cash value={baseAprToApr} />\n        </Value>\n\n        <Value\n          title={\"Actual\"}\n          secondaryValue={\n            <Until dateTime={payDate}>\n              <Percent value={totalAdjust} />\n            </Until>\n          }\n        >\n          <Duration dateTime={payDate}>\n            <Percent value={totalAdjust} />\n          </Duration>\n        </Value>\n      </Stack>\n    </Box>\n  );\n};\n","import { Box, Divider, Stack, Typography } from \"@mui/material\";\nimport { Outcome as TOutcome } from \"shared/utility/min-max-avg\";\nimport { Value } from \"./value\";\nimport { DateTime } from \"luxon\";\nimport { Cash } from \"shared/components/formatters/cash\";\nimport { Duration } from \"shared/components/formatters/duration\";\nimport { Until } from \"shared/components/formatters/until\";\nimport { ReactNode } from \"react\";\n\nexport const Outcome = (props: { title: ReactNode; outcome: TOutcome; payDate?: DateTime }) => {\n  const { outcome, title, payDate } = props;\n\n  return (\n    <Box\n      sx={{\n        border: \"1px solid rgba(255,255,255,0.1)\",\n        borderRadius: 2,\n      }}\n    >\n      <Typography sx={{ paddingBottom: 1, paddingLeft: 2, paddingTop: 1 }} variant=\"h5\">\n        {title}\n      </Typography>\n      <Divider />\n\n      <Stack padding={1} direction={\"row\"} spacing={0.5}>\n        {!outcome.actual && (\n          <>\n            <Value title={\"min\"}>\n              <Cash value={outcome.min} fallback={0} />\n            </Value>\n            <Value title={\"avg\"}>\n              <Cash value={outcome.avg} fallback={0} />\n            </Value>\n            <Value title={\"max\"}>\n              <Cash value={outcome.max} fallback={0} />\n            </Value>\n          </>\n        )}\n        {payDate && (\n          <Value\n            title={\"Actual\"}\n            secondaryValue={\n              <Until dateTime={payDate}>\n                <Cash value={outcome.actual} />\n              </Until>\n            }\n          >\n            <Duration dateTime={payDate}>\n              <Cash value={outcome.actual} />\n            </Duration>\n          </Value>\n        )}\n      </Stack>\n    </Box>\n  );\n};\n","import { Box, Stack } from \"@mui/system\";\nimport { DatePicker } from \"@mui/x-date-pickers\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useState } from \"react\";\nimport { useDates } from \"shared/hooks/use-dates\";\nimport { store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { useCompanyBonus } from \"../../shared/hooks/use-company-bonus\";\nimport { useMeritBonus } from \"../../shared/hooks/use-merit-bonus\";\nimport { useRetirementBonus } from \"../../shared/hooks/use-retirement-bonus\";\nimport { useTotalIncome } from \"../../shared/hooks/use-total-income\";\nimport { BonusOutcome } from \"./components/bonus-outcome\";\nimport { Layout } from \"./components/data-entry/data-entry\";\nimport { MeritOutcome } from \"./components/merit-increase\";\nimport { Outcome } from \"./components/outcome\";\n\nexport const ProjectedIncome = () => {\n  const [selectedYear, setSelectedYear] = useState(getLocalDateTime().year);\n\n  const oldestYear = useStore(store, (x) => {\n    const first = x.projectedIncome.timeSeries.paycheck[1]?.date;\n    const date = first ? DateTime.fromISO(first) : getLocalDateTime();\n    return date.year;\n  });\n\n  const dates = useDates(selectedYear);\n  const { totalIncome } = useTotalIncome(selectedYear);\n  const meritBonus = useMeritBonus(selectedYear);\n  const juneBonus = useCompanyBonus(selectedYear);\n  const julyBonus = useRetirementBonus(selectedYear);\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" gap={2}>\n      <Box flex=\"0 1 auto\">\n        <Stack gap={2} direction={\"row\"} overflow={\"auto\"}>\n          <Outcome\n            title={\n              <Box display=\"flex\" alignItems={\"center\"} gap={2} width={\"100%\"}>\n                <span>Income</span>\n                <DatePicker\n                  sx={{ width: 90, marginLeft: \"auto\", marginRight: 2 }}\n                  label={\"year\"}\n                  views={[\"year\"]}\n                  minDate={getLocalDateTime().set({ year: oldestYear })}\n                  maxDate={getLocalDateTime().plus({ years: 10 })}\n                  defaultValue={getLocalDateTime()}\n                  slotProps={{\n                    textField: {\n                      variant: \"standard\",\n                      label: \"\",\n                    },\n                  }}\n                  onYearChange={(year) => {\n                    setSelectedYear(year.year);\n                  }}\n                />\n              </Box>\n            }\n            outcome={totalIncome}\n            payDate={dates.companyBonus}\n          />\n          <MeritOutcome title=\"Merit Increase\" payDate={dates.meritIncrease} />\n          <BonusOutcome title=\"Merit Bonus\" outcome={meritBonus} payDate={dates.meritBonus} />\n          <BonusOutcome title=\"Company Bonus\" outcome={juneBonus} payDate={dates.companyBonus} />\n          <BonusOutcome title=\"Retirement Bonus\" outcome={julyBonus} payDate={dates.retirementBonus} />\n        </Stack>\n      </Box>\n      <Box flex=\"1 1 auto\">\n        <Box overflow={\"auto\"} width={\"100%\"} height={\"100%\"}>\n          <Box height={\"100%\"} display={\"flex\"} gap={2} flexWrap={\"nowrap\"} flexShrink={0}>\n            <Layout\n              accountName=\"paycheck\"\n              variant=\"cash\"\n              defaultDate={DateTime.fromObject({\n                day: 1,\n                month: 4,\n                year: selectedYear,\n              })}\n              title=\"Income Per Paycheck\"\n            />\n            <Layout\n              title=\"Merit Increase\"\n              accountName=\"meritIncreasePct\"\n              variant=\"percent\"\n              defaultDate={dates.meritIncrease}\n            />\n            <Layout\n              title=\"Equity Increase\"\n              accountName=\"equityPct\"\n              variant=\"percent\"\n              defaultDate={dates.meritIncrease}\n            />\n            <Layout title=\"Merit Bonus\" accountName=\"meritBonusPct\" variant=\"percent\" defaultDate={dates.meritBonus} />\n            <Layout title=\"Merit Bonus\" accountName=\"meritBonus\" variant=\"cash\" defaultDate={dates.meritBonus} />\n            <Layout\n              title=\"Company Bonus Factor\"\n              accountName=\"companyBonusPct\"\n              defaultDate={dates.companyBonus}\n              variant=\"percent\"\n            />\n            <Layout title=\"Company Bonus\" accountName=\"companyBonus\" defaultDate={dates.companyBonus} variant=\"cash\" />\n            <Layout\n              title=\"Retirement Bonus\"\n              accountName=\"retirementBonus\"\n              defaultDate={dates.retirementBonus}\n              variant=\"cash\"\n            />\n          </Box>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n","import { create } from \"mutative\";\nimport { ProjectedWealthConfig } from \"shared/models/projected-wealth\";\nimport { store } from \".\";\n\nexport const setProjectedWealth = (configName: ProjectedWealthConfig, value: number) => {\n  store.setState((prev) => {\n    return create(prev, (next) => {\n      next.projectedWealth[configName] = value;\n    });\n  });\n};\n","import { InputAdornment, TextField } from \"@mui/material\";\nimport { useStore } from \"@tanstack/react-store\";\nimport { useCallback, useState } from \"react\";\nimport { ProjectedWealth } from \"shared/models/projected-wealth\";\nimport { store } from \"shared/store\";\nimport { setProjectedWealth } from \"shared/store/set-projected-wealth\";\n\ninterface ConfigEntryProps {\n  configName: keyof ProjectedWealth;\n  label: string;\n  variant?: \"cash\" | \"percent\";\n}\n\nexport const ConfigEntry = (props: ConfigEntryProps) => {\n  const { configName, label, variant = \"cash\" } = props;\n  const [error, setError] = useState(false);\n  const isPercent = variant === \"percent\";\n\n  const onchange = useCallback(\n    (input: string) => {\n      let value = +input;\n      const isNan = Number.isNaN(value);\n      setError(isNan);\n      if (isNan) {\n        return;\n      }\n\n      if (isPercent) {\n        value /= 100;\n      }\n\n      setProjectedWealth(configName, value);\n    },\n    [configName, isPercent]\n  );\n\n  const value = useStore(store, (x) => x.projectedWealth[configName]);\n  const defaultValue = isPercent ? value * 100 : value;\n\n  return (\n    <TextField\n      error={error}\n      variant=\"outlined\"\n      InputProps={{\n        startAdornment: <InputAdornment position=\"start\">{isPercent ? \"%\" : \"$\"}</InputAdornment>,\n      }}\n      defaultValue={defaultValue.toFixed(isPercent ? 2 : 0)}\n      type=\"numeric\"\n      label={label}\n      onChange={(event) => {\n        onchange(event.target.value);\n      }}\n    />\n  );\n};\n","import { Typography } from \"@mui/material\";\nimport { Stack } from \"@mui/system\";\nimport { ConfigEntry } from \"./config-entry\";\n\nexport const Config = () => {\n  return (\n    <Stack spacing={2}>\n      <Typography variant=\"h5\">Configuration</Typography>\n      <ConfigEntry configName=\"savingsPerMonth\" label=\"Monthly Saving Rate\" />\n      <ConfigEntry configName=\"retirementContributionPaycheck\" label=\"Retirement Contribution Per Paycheck\" />\n      <Stack direction={\"row\"} spacing={2} width={\"100%\"} sx={{ \"& > *\": { flex: 1 } }}>\n        <ConfigEntry configName=\"socialSecurityLimit\" label=\"Social Security Tax Limit\" />\n        <ConfigEntry configName=\"socialSecurityTaxRate\" label=\"Social Security Tax\" variant=\"percent\" />\n      </Stack>\n      <Stack direction={\"row\"} spacing={2} width={\"100%\"} sx={{ \"& > *\": { flex: 1 } }}>\n        <ConfigEntry configName=\"medicareSupplementalTaxThreshold\" label=\"Medicare Supplemental Threshold\" />\n        <ConfigEntry configName=\"medicareSupplementalTaxRate\" label=\"Medicare Supplemental Tax\" variant=\"percent\" />\n      </Stack>\n    </Stack>\n  );\n};\n","import { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { useCompanyBonus } from \"shared/hooks/use-company-bonus\";\nimport { useDates } from \"shared/hooks/use-dates\";\nimport { useMeritBonus } from \"shared/hooks/use-merit-bonus\";\nimport { useRetirementBonus } from \"shared/hooks/use-retirement-bonus\";\n\nexport const useFutureBonuses = () => {\n  const local = DateTime.local();\n  const year = local.year;\n  const dates = useDates(year);\n  const meritBonus = useMeritBonus(year);\n  const companyBonus = useCompanyBonus(year);\n  const retirementBonus = useRetirementBonus(year);\n\n  const bonuses = useMemo(() => {\n    return (\n      [\n        [dates.meritBonus, meritBonus.cash.actual ?? meritBonus.cash.avg],\n        [dates.companyBonus, companyBonus.cash.actual ?? companyBonus.cash.avg],\n        [dates.retirementBonus, retirementBonus.cash.actual ?? retirementBonus.cash.avg],\n      ] as [DateTime, number][]\n    )\n      .map(([payedOn, amount]) => (local < payedOn ? amount : 0))\n      .reduce((acc, curr) => acc + curr, 0);\n  }, [\n    dates.meritBonus,\n    dates.companyBonus,\n    dates.retirementBonus,\n    meritBonus.cash.actual,\n    meritBonus.cash.avg,\n    companyBonus.cash.actual,\n    companyBonus.cash.avg,\n    retirementBonus.cash.actual,\n    retirementBonus.cash.avg,\n    local,\n  ]);\n\n  return bonuses;\n};\n","import { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { useBaseIncome } from \"shared/hooks/use-base-income\";\nimport { useCompanyBonus } from \"shared/hooks/use-company-bonus\";\nimport { useDateRanges, useDates } from \"shared/hooks/use-dates\";\nimport { useMeritBonus } from \"shared/hooks/use-merit-bonus\";\nimport { findNearestIdxOnOrBefore } from \"shared/utility/find-nearest-on-or-before\";\n\nexport const usePayments = () => {\n  const year = DateTime.local().year;\n  const dateRanges = useDateRanges(year);\n  const dates = useDates(year);\n  const { payPeriods } = useBaseIncome(dateRanges.base.start, dateRanges.base.end);\n\n  const merit = useMeritBonus(year);\n  const companyBonus = useCompanyBonus(year);\n\n  return useMemo(() => {\n    const cumulativePay = payPeriods.map((x) => {\n      return { ...x, cumulative: 0 };\n    });\n\n    const payBeforeMerit = findNearestIdxOnOrBefore(dates.meritBonus, cumulativePay, (x) => x.payedOn);\n\n    cumulativePay.splice(payBeforeMerit + 1, 0, {\n      cumulative: 0,\n      value: merit.cash.actual ?? merit.cash.avg,\n      start: dates.meritBonus,\n      end: dates.meritBonus,\n      payedOn: dates.meritBonus,\n    });\n\n    const payBeforeCompanyBonus = findNearestIdxOnOrBefore(dates.companyBonus, cumulativePay, (x) => x.payedOn);\n\n    cumulativePay.splice(payBeforeCompanyBonus + 1, 0, {\n      cumulative: 0,\n      value: companyBonus.cash.actual ?? companyBonus.cash.avg,\n      start: dates.companyBonus,\n      end: dates.companyBonus,\n      payedOn: dates.companyBonus,\n    });\n\n    cumulativePay.forEach((x, i, arr) => {\n      x.cumulative = i > 0 ? arr[i - 1].cumulative + x.value : x.value;\n    });\n\n    const previousPay = findNearestIdxOnOrBefore(DateTime.local(), payPeriods, (x) => x.payedOn);\n\n    const remainingPayments = payPeriods.length - previousPay;\n\n    return {\n      payments: cumulativePay,\n      nextPaymentIdx: previousPay + 1,\n      numRemaining: remainingPayments,\n      totalBasePayments: payPeriods.length,\n      totalPayments: cumulativePay.length,\n    };\n  }, [\n    companyBonus.cash.actual,\n    companyBonus.cash.avg,\n    dates.companyBonus,\n    dates.meritBonus,\n    merit.cash.actual,\n    merit.cash.avg,\n    payPeriods,\n  ]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { usePayments } from \"./use-payments\";\n\nexport const useFutureMedicareTax = () => {\n  const { payments, nextPaymentIdx } = usePayments();\n  const config = useStore(store, (x) => x.projectedWealth);\n\n  return useMemo(() => {\n    const total =\n      config.medicareSupplementalTaxRate *\n      Math.min(0, config.medicareSupplementalTaxThreshold - (payments.at(-1)?.cumulative ?? 0));\n\n    const firstOccurrence = payments.find((x) => x.cumulative >= config.medicareSupplementalTaxThreshold)?.payedOn;\n\n    const remaining = payments\n      .slice(nextPaymentIdx)\n      .filter((x) => x.cumulative >= config.medicareSupplementalTaxThreshold)\n      .reduce((acc, curr) => {\n        return (\n          acc -\n          Math.min(curr.value, curr.cumulative - config.medicareSupplementalTaxThreshold) *\n            config.medicareSupplementalTaxRate\n        );\n      }, 0);\n\n    const perPaycheck = total && (payments.at(-1)?.value ?? 0) * config.medicareSupplementalTaxRate;\n\n    return {\n      total,\n      remaining,\n      perPaycheck,\n      firstOccurrence,\n    };\n  }, [config.medicareSupplementalTaxRate, config.medicareSupplementalTaxThreshold, nextPaymentIdx, payments]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { usePayments } from \"./use-payments\";\n\nexport const useFutureRetirementContributions = () => {\n  const { numRemaining } = usePayments();\n  const retirementContribution = useStore(store, (x) => x.projectedWealth.retirementContributionPaycheck);\n\n  return useMemo(() => {\n    return {\n      remaining: numRemaining * retirementContribution,\n      perPaycheck: retirementContribution,\n    };\n  }, [numRemaining, retirementContribution]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\n\nexport const useFutureSavings = () => {\n  const config = useStore(store, (x) => x.projectedWealth);\n  return useMemo(() => {\n    const systemYear = getLocalDateTime().year;\n    return {\n      remaining:\n        config.savingsPerMonth *\n        DateTime.fromObject({\n          day: 31,\n          month: 12,\n          year: systemYear,\n        })\n          .endOf(\"day\")\n          .diffNow(\"months\").months,\n      perMonth: config.savingsPerMonth,\n    };\n  }, [config.savingsPerMonth]);\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { usePayments } from \"./use-payments\";\n\nexport const useFutureSocialSecurity = () => {\n  const { payments, nextPaymentIdx } = usePayments();\n  const config = useStore(store, (x) => x.projectedWealth);\n\n  return useMemo(() => {\n    const total =\n      config.socialSecurityTaxRate * Math.max(0, (payments.at(-1)?.cumulative ?? 0) - config.socialSecurityLimit);\n    const firstOccurrence = payments.find((x) => x.cumulative >= config.socialSecurityLimit)?.payedOn;\n\n    const remaining = payments\n      .slice(nextPaymentIdx)\n      .filter((x) => x.cumulative >= config.socialSecurityLimit)\n      .reduce((acc, curr) => {\n        return acc + Math.min(curr.value, curr.cumulative - config.socialSecurityLimit) * config.socialSecurityTaxRate;\n      }, 0);\n\n    const perPaycheck = total && config.socialSecurityTaxRate * (payments.at(-1)?.value ?? 0);\n\n    return {\n      total,\n      remaining,\n      perPaycheck,\n      firstOccurrence,\n    };\n  }, [config.socialSecurityLimit, config.socialSecurityTaxRate, nextPaymentIdx, payments]);\n};\n","import { DateTime } from \"luxon\";\nimport { ReactNode } from \"react\";\n\ninterface BeforeAfterProps {\n  dateTime?: DateTime;\n  before?: ReactNode;\n  after?: ReactNode;\n}\n\nexport const BeforeAfter = (props: BeforeAfterProps) => {\n  const { dateTime, before, after } = props;\n\n  if (!dateTime) {\n    return null;\n  }\n\n  return DateTime.local() < dateTime ? before : after;\n};\n","import { Typography } from \"@mui/material\";\nimport { Stack } from \"@mui/system\";\nimport { Value } from \"capabilities/projected-income/components/value\";\nimport { useFutureBonuses } from \"capabilities/projected-wealth/hooks/use-future-bonuses\";\nimport { useFutureMedicareTax } from \"capabilities/projected-wealth/hooks/use-future-medicare-tax\";\nimport { useFutureRetirementContributions } from \"capabilities/projected-wealth/hooks/use-future-retirement-contributions\";\nimport { useFutureSavings } from \"capabilities/projected-wealth/hooks/use-future-savings\";\nimport { useFutureSocialSecurity } from \"capabilities/projected-wealth/hooks/use-future-social-security\";\nimport { DateTime } from \"luxon\";\nimport { BeforeAfter } from \"shared/components/formatters/before-after\";\nimport { Cash } from \"shared/components/formatters/cash\";\nimport { Duration } from \"shared/components/formatters/duration\";\nimport { useCompanyBonus } from \"shared/hooks/use-company-bonus\";\nimport { useDates } from \"shared/hooks/use-dates\";\nimport { useMeritBonus } from \"shared/hooks/use-merit-bonus\";\nimport { useRetirementBonus } from \"shared/hooks/use-retirement-bonus\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { monthDay } from \"shared/utility/format-date\";\n\nconst isFuture = (date: DateTime) => date.diffNow(\"milliseconds\").milliseconds > 0;\n\nexport const FutureEvents = () => {\n  const dates = useDates();\n  const systemYear = getLocalDateTime().year;\n  const savings = useFutureSavings();\n  const retirement = useFutureRetirementContributions();\n  const medicare = useFutureMedicareTax();\n  const socialSecurity = useFutureSocialSecurity();\n  const meritBonus = useMeritBonus(systemYear);\n  const companyBonus = useCompanyBonus(systemYear);\n  const retirementBonus = useRetirementBonus(systemYear);\n  const totalFutureBonuses = useFutureBonuses();\n\n  const total =\n    totalFutureBonuses + savings.remaining + retirement.remaining + socialSecurity.remaining + medicare.remaining;\n\n  return (\n    <>\n      <Typography variant=\"h5\">\n        {systemYear} Remaining Projected Wealth <Cash value={total} />\n      </Typography>\n      <Stack direction={\"row\"} sx={{ \"&& > *\": { minWidth: 210 } }}>\n        {isFuture(dates.meritBonus) && (\n          <Value title={\"merit bonus\"} secondaryValue={<Cash value={meritBonus.cash.actual ?? meritBonus.cash.avg} />}>\n            <Duration dateFormat={monthDay} variant=\"date\" dateTime={dates.meritBonus} />\n          </Value>\n        )}\n        {isFuture(dates.companyBonus) && (\n          <Value\n            title={\"company bonus\"}\n            secondaryValue={<Cash value={companyBonus.cash.actual ?? companyBonus.cash.avg} />}\n          >\n            <Duration variant=\"date\" dateFormat={monthDay} dateTime={dates.companyBonus} />\n          </Value>\n        )}\n        {isFuture(dates.retirementBonus) && (\n          <Value\n            title={\"retirement bonus\"}\n            secondaryValue={<Cash value={retirementBonus.cash.actual ?? retirementBonus.cash.avg} />}\n          >\n            <Duration dateFormat={monthDay} variant=\"date\" dateTime={dates.retirementBonus} />\n          </Value>\n        )}\n      </Stack>\n      <Stack direction={\"row\"} sx={{ \"&& > *\": { minWidth: 210 } }}>\n        {!!socialSecurity.total && (\n          <Value\n            title={\"social security cap\"}\n            secondaryValue={\n              <BeforeAfter\n                dateTime={socialSecurity.firstOccurrence}\n                before={<Cash tooltip=\"Remaining\" value={socialSecurity.remaining} />}\n                after={<Cash tooltip=\"Per Paycheck\" value={socialSecurity.perPaycheck} />}\n              />\n            }\n          >\n            <Duration dateFormat={monthDay} variant=\"date\" dateTime={socialSecurity.firstOccurrence}>\n              <Cash tooltip=\"Remaining\" value={socialSecurity.remaining} />\n            </Duration>\n          </Value>\n        )}\n        {!!medicare.total && (\n          <Value\n            title={\"medicare supplemental tax\"}\n            secondaryValue={\n              <BeforeAfter\n                dateTime={medicare.firstOccurrence}\n                before={<Cash tooltip=\"Total\" value={medicare.remaining} />}\n                after={<Cash tooltip=\"Per Paycheck\" value={medicare.perPaycheck} />}\n              />\n            }\n          >\n            <Duration dateFormat={monthDay} variant=\"date\" dateTime={medicare.firstOccurrence}>\n              <Cash tooltip=\"Remaining\" value={medicare.remaining} />\n            </Duration>\n          </Value>\n        )}\n      </Stack>\n      <Stack direction={\"row\"} sx={{ \"&& > *\": { minWidth: 210 } }}>\n        {!!savings.perMonth && (\n          <Value title={\"Expected savings\"} secondaryValue={<Cash tooltip=\"Per Month\" value={savings.perMonth} />}>\n            <Cash tooltip=\"Total Remaining\" value={savings.remaining} />\n          </Value>\n        )}\n        {!!retirement.perPaycheck && (\n          <Value\n            title={\"retirement contribution\"}\n            secondaryValue={<Cash tooltip=\"Per Paycheck\" value={retirement.perPaycheck} />}\n          >\n            <Cash tooltip=\"Total Remaining\" value={retirement.remaining} />\n          </Value>\n        )}\n      </Stack>\n    </>\n  );\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\n\nexport const useEarliestAccountEntry = () => {\n  const accounts = useStore(store, (x) => x.wealth);\n  return DateTime.fromMillis(\n    Object.values(accounts)\n      .map((x) => {\n        if (x.type === \"account\") {\n          return x.data[0]?.date ? DateTime.fromISO(x.data[0].date) : getLocalDateTime();\n        }\n        return getLocalDateTime();\n      })\n      .reduce((acc, curr) => Math.min(acc, curr?.toMillis() ?? Infinity), getLocalDateTime().toMillis()),\n  );\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { findNearestOnOrBefore } from \"shared/utility/find-nearest-on-or-before\";\nimport { calcEquity, calcLoanBalance } from \"shared/utility/mortgage-calc\";\nimport { useEarliestAccountEntry } from \"./use-earliest-account-entry\";\nimport { useFutureBonuses } from \"./use-future-bonuses\";\nimport { useFutureMedicareTax } from \"./use-future-medicare-tax\";\nimport { useFutureRetirementContributions } from \"./use-future-retirement-contributions\";\nimport { useFutureSavings } from \"./use-future-savings\";\nimport { useFutureSocialSecurity } from \"./use-future-social-security\";\n\nexport interface TimeSeriesWealth {\n  graphDate: Date;\n  date: DateTime;\n  wealth: number;\n  yoyCash?: number;\n  yoyPct?: number;\n}\n\nexport const useTimeSeriesWealth = () => {\n  const localDateTime = getLocalDateTime();\n  const earliest = useEarliestAccountEntry();\n  const accounts = useStore(store, (x) => x.wealth);\n  const bonuses = useFutureBonuses();\n  const savings = useFutureSavings();\n  const ssiTaxValue = useFutureSocialSecurity();\n  const medicareTaxValue = useFutureMedicareTax();\n  const retirementContribution = useFutureRetirementContributions();\n\n  const data = useMemo(() => {\n    if (!earliest.isValid) {\n      return [];\n    }\n\n    const futureWealth =\n      bonuses +\n      savings.remaining +\n      retirementContribution.remaining +\n      ssiTaxValue.remaining +\n      medicareTaxValue.remaining;\n\n    const dates = new Array(localDateTime.year + 2 - earliest.year)\n      .fill(earliest.year)\n      .map((x, i) => DateTime.fromObject({ day: 1, month: 1, year: x + i }).startOf(\"day\"));\n\n    if (!localDateTime.equals(dates[dates.length - 2])) {\n      dates.splice(-1, 0, localDateTime);\n    }\n\n    return dates\n      .map((date, idx, arr) => {\n        const isLast = idx === arr.length - 1;\n        const accountWealth = Object.values(accounts)\n          .map((x) => {\n            if (x.type === \"mortgage\" && x.loan) {\n              const houseValue = findNearestOnOrBefore(date, x.data);\n              const balance = calcLoanBalance(date, x.loan);\n              return calcEquity(x.loan.ownershipPct, houseValue?.value, balance, x.loan.principal);\n            } else if (x.type === \"account\") {\n              const entry = findNearestOnOrBefore(date, x.data);\n              return entry?.value ?? 0;\n            }\n            return 0;\n          })\n          .reduce((acc, curr) => acc + curr, 0);\n\n        return {\n          date,\n          graphDate: date.toJSDate(),\n          wealth: accountWealth + (isLast ? futureWealth : 0),\n        };\n      })\n      .map((x, idx, arr) => {\n        if (idx !== arr.length - 1) {\n          const benchmarkWealth = arr[idx - 1]?.wealth;\n          if (!benchmarkWealth) {\n            return x;\n          }\n          return {\n            ...x,\n            yoyCash: x.wealth - benchmarkWealth,\n            yoyPct: x.wealth / benchmarkWealth - 1,\n          };\n        }\n\n        const benchmarkWealth = arr[idx - 2]?.wealth;\n        if (!benchmarkWealth) {\n          return x;\n        }\n        return {\n          ...x,\n          yoyCash: x.wealth - benchmarkWealth,\n          yoyPct: x.wealth / benchmarkWealth - 1,\n        };\n      });\n  }, [\n    earliest.isValid,\n    earliest.year,\n    bonuses,\n    savings.remaining,\n    retirementContribution.remaining,\n    ssiTaxValue.remaining,\n    medicareTaxValue.remaining,\n    localDateTime,\n    accounts,\n  ]);\n  return data as TimeSeriesWealth[];\n};\n","import { AgCartesianChartOptions, AgLineSeriesOptions } from \"ag-charts-community\";\nimport { AgChartsReact } from \"ag-charts-react\";\nimport { DateTime } from \"luxon\";\nimport { useMemo } from \"react\";\nimport { formatCash, formatCashShort } from \"shared/utility/format-cash\";\nimport { shortDate } from \"shared/utility/format-date\";\nimport { useTimeSeriesWealth } from \"../hooks/use-times-series-wealth\";\n\nexport const WealthChart = () => {\n  const data = useTimeSeriesWealth();\n\n  const series = useMemo(() => {\n    return [\n      {\n        type: \"line\",\n        xKey: \"graphDate\",\n        yKey: \"wealth\",\n        yName: \"Wealth\",\n        tooltip: {\n          renderer: ({ datum, yKey, xKey }) => ({\n            content: `${DateTime.fromJSDate(datum[xKey]).toISODate()} ${formatCash(datum[yKey])}`,\n          }),\n        },\n      },\n      {\n        type: \"line\",\n        xKey: \"graphDate\",\n        yKey: \"yoyCash\",\n        yName: \"YoY ($)\",\n        tooltip: {\n          renderer: ({ datum, yKey, xKey }) => ({\n            content: `${DateTime.fromJSDate(datum[xKey]).toISODate()} ${formatCash(datum[yKey])}`,\n          }),\n        },\n      },\n    ] as AgLineSeriesOptions[];\n  }, []);\n\n  const options: AgCartesianChartOptions = useMemo(\n    () => ({\n      theme: \"ag-default-dark\",\n      title: {\n        text: `${data[data.length - 1].date.toFormat(shortDate)} Projected wealth ${formatCashShort(\n          (data[data.length - 1]?.wealth ?? 0) as number,\n        )}`,\n      },\n      data,\n      axes: [\n        {\n          type: \"time\",\n          position: \"bottom\",\n          label: {\n            format: \"%Y\",\n          },\n        },\n        {\n          type: \"number\",\n          position: \"left\",\n          nice: false,\n        },\n      ],\n      series,\n    }),\n    [data, series],\n  );\n  return <AgChartsReact options={options} />;\n};\n","import QueryStatsIcon from \"@mui/icons-material/QueryStats\";\nimport UpdateIcon from \"@mui/icons-material/Update\";\nimport { Tooltip } from \"@mui/material\";\nimport { Stack } from \"@mui/system\";\nimport { ColDef, ICellRendererParams } from \"ag-grid-community\";\nimport { DateTime } from \"luxon\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { formatCash } from \"shared/utility/format-cash\";\nimport { shortDate } from \"shared/utility/format-date\";\nimport { formatPercent } from \"shared/utility/format-percent\";\nimport { TimeSeriesWealth } from \"../../hooks/use-times-series-wealth\";\n\nexport const columnConfig: ColDef<TimeSeriesWealth>[] = [\n  {\n    headerName: \"Date\",\n    sort: \"desc\",\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\n    valueGetter: (x) => x.data?.date,\n    cellRenderer: (x: ICellRendererParams<unknown, DateTime>) => {\n      const systemYear = getLocalDateTime().year;\n      return (\n        <Stack direction={\"row\"} alignItems={\"center\"}>\n          {x.valueFormatted}&nbsp;\n          {x.value && x.value > getLocalDateTime() && (\n            <Tooltip title=\"Future Event\">\n              <UpdateIcon htmlColor=\"yellow\" />\n            </Tooltip>\n          )}\n          {x.value &&\n            x.value.equals(\n              DateTime.fromObject({\n                day: 1,\n                month: 1,\n                year: systemYear,\n              })\n            ) && (\n              <Tooltip title=\"Benchmark for current and future entries\">\n                <QueryStatsIcon htmlColor=\"yellow\" />\n              </Tooltip>\n            )}\n        </Stack>\n      );\n    },\n  },\n  {\n    headerName: \"Wealth\",\n    valueGetter: (x) => x.data?.wealth,\n    valueFormatter: (x) => formatCash(x.data?.wealth ?? 0),\n  },\n  {\n    headerName: \"YoY ($)\",\n    valueGetter: (x) => x.data?.yoyCash,\n    valueFormatter: (x) => (x.value != undefined ? formatCash(x.value) : \"\"),\n  },\n  {\n    headerName: \"YoY (%)\",\n    valueGetter: (x) => x.data?.yoyPct,\n    valueFormatter: (x) => (x.value !== undefined ? formatPercent(x.value) : \"\"),\n  },\n];\n","import { useTimeSeriesWealth } from \"capabilities/projected-wealth/hooks/use-times-series-wealth\";\nimport { AgGrid } from \"shared/components/ag-grid\";\nimport { columnConfig } from \"./colum-config\";\n\nexport const WealthTable = () => {\n  const data = useTimeSeriesWealth();\n\n  return (\n    <AgGrid\n      id=\"time-series-wealth\"\n      rowData={data}\n      columnDefs={columnConfig}\n      autoSizeStrategy={{ type: \"fitGridWidth\" }}\n    />\n  );\n};\n","import { Grid, Paper } from \"@mui/material\";\nimport { Config } from \"./components/config\";\nimport { FutureEvents } from \"./components/future-events\";\nimport { WealthChart } from \"./components/wealth-chart\";\nimport { WealthTable } from \"./components/wealth-table\";\n\nexport const ProjectedWealth = () => {\n  return (\n    <Grid container height={\"100%\"} spacing={2}>\n      <Grid item xs={6} height={\"50%\"}>\n        <WealthChart />\n      </Grid>\n      <Grid item xs={6} height={\"50%\"}>\n        <Paper sx={{ padding: 2, height: \"100%\" }}>\n          <Config />\n        </Paper>\n      </Grid>\n      <Grid item xs={6} height={\"50%\"}>\n        <WealthTable />\n      </Grid>\n      <Grid item xs={6} height={\"50%\"}>\n        <Paper sx={{ padding: 2, height: \"100%\" }}>\n          <FutureEvents />\n        </Paper>\n      </Grid>\n    </Grid>\n  );\n};\n","import { LinearProgress } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\n\nexport const CountDown = (props: { timeMs: number }) => {\n  const { timeMs } = props;\n  const [time, setTime] = useState(timeMs);\n\n  useEffect(() => {\n    const intervalMs = 100;\n    const interval = setInterval(() => {\n      setTime((prev) => {\n        const remaining = prev - intervalMs;\n        if (remaining < 0) {\n          clearInterval(interval);\n          return 0;\n        }\n        return remaining;\n      });\n    }, 100);\n    return () => clearInterval(interval);\n  }, [props.timeMs]);\n\n  return <LinearProgress value={(time / timeMs) * 100} variant=\"determinate\" color=\"inherit\" />;\n};\n","import { Box, Button, ButtonProps, Stack } from \"@mui/material\";\nimport { ReactNode, useEffect, useState } from \"react\";\nimport { CountDown } from \"./count-down\";\n\ntype SafetyState = \"inactive\" | \"activating\" | \"active\" | \"confirmed\";\n\ninterface SafetyButtonProps {\n  inactiveLabel: string;\n  activatingLabel: string;\n  activeLabel: string;\n  confirmedLabel: string;\n  icon?: ReactNode;\n  onConfirm: () => void;\n}\n\nexport const SafetyButton = (props: Omit<ButtonProps, \"children\"> & SafetyButtonProps) => {\n  const { inactiveLabel, activatingLabel, activeLabel, confirmedLabel, onConfirm, icon, disabled, ...rest } = props;\n  const [safetyState, setSafetyState] = useState<SafetyState>(\"inactive\");\n\n  useEffect(() => {\n    if (safetyState === \"active\") {\n      setTimeout(() => {\n        setSafetyState((prev) => {\n          return prev === \"active\" ? \"inactive\" : prev;\n        });\n      }, 3200);\n    } else if (safetyState === \"activating\") {\n      setTimeout(() => {\n        setSafetyState(\"active\");\n      }, 1000);\n    } else if (safetyState === \"confirmed\") {\n      setTimeout(() => {\n        setSafetyState(\"inactive\");\n      }, 3200);\n    }\n  }, [safetyState]);\n\n  return (\n    <Box\n      sx={{\n        minWidth: 130,\n      }}\n    >\n      <Button\n        {...rest}\n        sx={{ height: \"100%\", width: \"100%\" }}\n        disabled={disabled || safetyState === \"activating\" || safetyState === \"confirmed\"}\n        size=\"small\"\n        onClick={() => {\n          safetyState === \"inactive\" && setSafetyState(\"activating\");\n          if (safetyState === \"active\") {\n            onConfirm?.();\n            setSafetyState(\"confirmed\");\n          }\n        }}\n      >\n        <Stack>\n          <Stack direction={\"row\"}>\n            {icon}\n            {safetyState === \"inactive\" && inactiveLabel}\n            {safetyState === \"activating\" && activatingLabel}\n            {safetyState === \"active\" && activeLabel}\n            {safetyState === \"confirmed\" && confirmedLabel}\n          </Stack>\n          {safetyState === \"active\" && <CountDown timeMs={2800} />}\n          {safetyState === \"activating\" && <CountDown timeMs={500} />}\n        </Stack>\n      </Button>\n    </Box>\n  );\n};\n","import { useStore } from \"@tanstack/react-store\";\nimport { useCallback } from \"react\";\nimport { store } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { shortDate } from \"shared/utility/format-date\";\n\nexport const downloadJson = <T,>(filename: string, storeData: T) => {\n  const data = JSON.stringify(storeData, null, 2);\n  const link = document.createElement(\"a\");\n  link.download = filename;\n  const blob = new Blob([data], { type: \"application/json\" });\n  link.href = window.URL.createObjectURL(blob);\n  link.click();\n};\n\nexport const useExport = () => {\n  const storeData = useStore(store);\n  const onExport = useCallback(() => {\n    downloadJson(`wealth-tracker-${getLocalDateTime().toFormat(shortDate)}.json`, storeData);\n  }, [storeData]);\n\n  return onExport;\n};\n","import { useCallback } from \"react\";\nimport { storeValidator } from \"shared/models/store\";\nimport { store } from \"shared/store\";\n\nfunction selectFile(contentType: string) {\n  return new Promise<File>((resolve) => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.multiple = false;\n    input.accept = contentType;\n\n    input.onchange = () => {\n      const files = Array.from(input.files ?? []);\n      resolve(files[0]);\n    };\n\n    input.click();\n  });\n}\n\nexport const useImport = () => {\n  return useCallback(() => {\n    return new Promise<void>((resolve, reject) => {\n      selectFile(\"application/json\").then((file) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = (readerEvent) => {\n          const content = readerEvent.target?.result?.toString();\n          if (content) {\n            const data = JSON.parse(window.atob(content.split(\",\")[1]));\n            const validation = storeValidator.safeParse(data);\n            validation.success && store.setState(() => data);\n            validation.success ? resolve() : reject(validation.error);\n          }\n        };\n      });\n    });\n  }, []);\n};\n","import { useMemo } from \"react\";\nimport { storeValidator } from \"shared/models/store\";\n\nexport const useStoreDataError = () => {\n  const invalidData = localStorage.getItem(\"store-invalid\");\n  return useMemo(() => {\n    if (!invalidData) {\n      return { hadError: false };\n    }\n    const validated = storeValidator.safeParse(JSON.parse(invalidData));\n    return {\n      hadError: !!invalidData,\n      invalidData: JSON.stringify(invalidData, null, 2),\n      parseError: invalidData && !validated.success ? validated.error : undefined,\n      resetError: () => {\n        localStorage.removeItem(\"store-invalid\");\n      },\n    };\n  }, [invalidData]);\n};\n","import { Box, Table, TableBody, TableCell, TableHead, TableRow } from \"@mui/material\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogContentText from \"@mui/material/DialogContentText\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport { ReactNode } from \"react\";\nimport { ZodError } from \"zod\";\n\ninterface InvalidDataDialogProps {\n  open?: boolean;\n  error?: ZodError;\n  children?: ReactNode;\n}\n\nexport default function InvalidDataDialog(props: InvalidDataDialogProps) {\n  const { open, error, children } = props;\n\n  return (\n    <>\n      <Dialog open={!!open}>\n        <DialogTitle id=\"alert-dialog-title\">{\"Error Loading Data\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            <Box maxHeight={500} overflow={\"auto\"}>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Error Message</TableCell>\n                    <TableCell>Path</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {error?.issues.map((x, idx) => {\n                    return (\n                      <TableRow key={idx}>\n                        <TableCell>{x.message}</TableCell>\n                        <TableCell>{x.path.join(\".\")}</TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </Table>\n            </Box>\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>{children}</DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import DeleteForever from \"@mui/icons-material/DeleteForever\";\nimport { Box, Button, Stack, Tab, Tabs } from \"@mui/material\";\nimport { NetWealth } from \"capabilities/net-wealth\";\nimport { ProjectedIncome } from \"capabilities/projected-income\";\nimport { ProjectedWealth } from \"capabilities/projected-wealth\";\nimport { useState } from \"react\";\nimport { SafetyButton } from \"shared/components/safety-button\";\nimport { downloadJson, useExport } from \"shared/hooks/use-export\";\nimport { useImport } from \"shared/hooks/use-import\";\nimport { useStoreDataError } from \"shared/hooks/use-store-data-error\";\nimport { resetStore } from \"shared/store\";\nimport { getLocalDateTime } from \"shared/utility/current-date\";\nimport { shortDate } from \"shared/utility/format-date\";\nimport InvalidDataDialog from \"./invalid-data-dialog\";\n\nexport const App = () => {\n  const [tab, setTab] = useState<string>(\"wealth\");\n  const onExport = useExport();\n  const onImport = useImport();\n  const { hadError, parseError, resetError, invalidData } = useStoreDataError();\n  const [error, setError] = useState(parseError);\n  const [isOpen, setIsOpen] = useState(hadError);\n\n  return (\n    <>\n      <InvalidDataDialog open={isOpen} error={error}>\n        {hadError && (\n          <Button\n            onClick={() => {\n              downloadJson(`invalid-data-wealth-tracker-${getLocalDateTime().toFormat(shortDate)}.json`, invalidData);\n              setIsOpen(false);\n            }}\n          >\n            Download Data\n          </Button>\n        )}\n        {hadError && (\n          <Button\n            color=\"error\"\n            onClick={() => {\n              setIsOpen(false);\n              resetError?.();\n              resetStore();\n            }}\n            autoFocus\n          >\n            Reset\n          </Button>\n        )}\n        {!hadError && (\n          <Button\n            onClick={() => {\n              setIsOpen(false);\n            }}\n            autoFocus\n          >\n            Cancel\n          </Button>\n        )}\n      </InvalidDataDialog>\n      <Stack direction=\"row\">\n        <Tabs value={tab} onChange={(_, value) => setTab(value)}>\n          <Tab value=\"wealth\" label=\"Total Wealth\" />\n          <Tab value=\"projected-income\" label=\"Projected Income\" />\n          <Tab value=\"projected-wealth\" label=\"Projected Wealth\" />\n        </Tabs>\n        <Box marginLeft={\"auto\"} gap={2} display={\"flex\"}>\n          <Button\n            onClick={() =>\n              onImport().catch((err) => {\n                setIsOpen(true);\n                setError(err);\n              })\n            }\n          >\n            Import\n          </Button>\n          <Button onClick={onExport}>Export</Button>\n          <SafetyButton\n            onConfirm={resetStore}\n            inactiveLabel=\"Reset\"\n            activatingLabel=\"Activating\"\n            activeLabel=\"Confirm\"\n            confirmedLabel=\"confirmed\"\n            color=\"error\"\n            icon={<DeleteForever />}\n          />\n        </Box>\n      </Stack>\n      <Box padding={2} height={\"95%\"} width={\"100%\"}>\n        {tab === \"wealth\" && <NetWealth />}\n        {tab === \"projected-income\" && <ProjectedIncome />}\n        {tab === \"projected-wealth\" && <ProjectedWealth />}\n      </Box>\n    </>\n  );\n};\n","import { CssBaseline, ThemeProvider, createTheme } from \"@mui/material\";\nimport { LocalizationProvider } from \"@mui/x-date-pickers\";\nimport { AdapterLuxon } from \"@mui/x-date-pickers/AdapterLuxon\";\nimport \"ag-grid-community/styles/ag-grid.css\";\nimport \"ag-grid-community/styles/ag-theme-quartz.css\";\nimport { App } from \"app/app.tsx\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport \"./index.css\";\n\nconst darkTheme = createTheme({\n  palette: {\n    mode: \"dark\",\n  },\n});\n\nReactDOM.createRoot(document.getElementById(\"root\")!).render(\n  <React.StrictMode>\n    <ErrorBoundary\n      fallbackRender={(props) => {\n        return (\n          <>\n            <div style={{ backgroundColor: \"#FFF\" }}>{props.error.message}</div>\n            <div style={{ backgroundColor: \"#FFF\" }}>{props.error.stackTrace}</div>\n          </>\n        );\n      }}\n    >\n      <LocalizationProvider dateAdapter={AdapterLuxon}>\n        <ThemeProvider theme={darkTheme}>\n          <CssBaseline />\n          <App />\n        </ThemeProvider>\n      </LocalizationProvider>\n    </ErrorBoundary>\n  </React.StrictMode>,\n);\n"],"names":["sortByDate","select","direction","a","b","toMillis","accountDataValidator","z","object","date","string","value","number","id","accountValidator","type","literal","data","array","loanValidator","principal","ratePct","paymentsPerYear","payment","firstPaymentDate","ownershipPct","mortgageValidator","loan","optional","wealth","record","union","projectedIncome","timeSeries","paycheck","meritIncreasePct","equityPct","meritBonusPct","meritBonus","companyBonusPct","companyBonus","retirementBonus","projectedWealth","socialSecurityLimit","socialSecurityTaxRate","medicareSupplementalTaxThreshold","medicareSupplementalTaxRate","savingsPerMonth","retirementContributionPaycheck","getDefaultStore","storeValidator","createStore","validator","defaultValue","key","invalidData","localData","localStorage","getItem","JSON","parse","safeParse","success","log","error","setItem","stringify","store","CreateStore","subscribe","current","state","AddAccountEntry","accountName","amount","setState","create","prev","next","push","startOf","toString","uuid","sort","DateTime","fromISO","x","addProjectedIncome","concat","removeAccount","removeAccountEntry","idxToRemove","findIndex","splice","removeProjectedIncome","resetStore","setLoan","updateAccountDate","account","idx","toISO","updateAccountName","currentAccountName","newAccountName","updateAccountValue","updateProjectedIncome","NewAccount","forwardRef","props","ref","open","setOpen","useState","nameRef","useRef","setError","accountType","setAccountType","undefined","marginLeft","target","children","AgGrid","rest","height","getLocalDateTime","local","shortDate","monthDay","DeleteAccount","padding","width","RenameAccount","nextAccountName","setNextAccountName","event","formatCashShort","Intl","NumberFormat","style","currency","notation","maximumFractionDigits","format","formatCash","createAccountColumnConfig","headerName","valueFormatter","toFormat","valueGetter","cellEditor","editable","valueSetter","fromJSDate","newValue","isValid","cellRenderer","DeleteForeverIcon","useMissingYears","useMemo","years","Object","entries","groupBy","year","map","find","janFirst","fromObject","day","month","diff","days","lookup","fromEntries","missing","i","length","AccountTab","useStore","setDate","inputRef","missingYears","hasSameDate","hasSame","onAddEntry","accountColumnConfig","join","color","startAdornment","findNearestOnOrBefore","findNearestIdxOnOrBefore","selector","getGraphDates","accounts","Set","flatMap","calcLoanBalance","rate","monthlyPayment","annualizedRate","periods","months","totalRate","balance","calcEquity","houseValue","loanBalance","AddEntry","Stack","reduce","acc","curr","convertPct","min","datetime","offset","AddLoan","textField","parsed","issues","path","mortgageColumnConfig","toFixed","equity","MortgageTab","allAccounts","mortgageData","values","AccountTabs","firstAccount","keys","setAccount","useEffect","_","getMortgageValue","mortgage","entry","getAccountValue","getGraphValue","useGraphData","dates","graphData","toJSDate","total","forEach","arr","firstNonZero","slice","WealthChart","series","stacked","xKey","yKey","yName","tooltip","renderer","datum","content","toISODate","options","theme","title","text","axes","position","label","NetWealth","useDates","meritIncrease","useDateRanges","base","start","end","endOf","findSameYear","minMaxAvg","max","avg","index","Math","Infinity","outcomeFromSingle","actual","actualizedOutcome","outcome","scaleOutcome","AddOutcome","outcomes","everyActualDefined","every","aPayday","DateRangesOverlap","getPayPeriods","anyPayday","abs","daysOffset","startPayDay","plus","numPayDays","weeks","payedOn","useMostFrequentValue","valueByDateRange","toSorted","minus","systemYear","useProjectedPay","baseIncome","meritPct","payPerPeriod","mostRecentPay","startDate","multiplier","unshift","round","startIdx","useBaseIncome","endDate","pay","payPeriods","sum","filter","payPeriod","businessDays","differenceInBusinessDays","millisecond","totalIncome","incomePerPeriod","reduceRight","perPayday","count","useCompanyBonus","dateRanges","mostRecentBonus","mostRecentPercent","meritFactor","cash","projectedActual","percent","useMeritBonus","ranges","bonusAmount","bonusPercent","frequentMeritBonusPercent","meritOutcome","useRetirementBonus","juneBonus","eligibleIncome","useTotalIncome","julyBonus","taxableIncome","Cash","fallback","disableTooltip","compact","formatted","Duration","dateTime","variant","dateFormat","countDownStr","diffNow","tooltipStr","countDownColor","formatPercent","Percent","Value","secondaryValue","tertiaryValue","className","display","minWidth","flexDirection","justifyContent","alignItems","gap","flexShrink","BonusOutcome","payDate","border","borderRadius","paddingBottom","paddingLeft","paddingTop","paddingRight","updateProjectedIncomeDate","valueFormatted","UpdateIcon","DataEntry","defaultDate","setAmount","console","flex","Layout","marginBottom","Until","usePaycheck","paychecks","IncomePerPeriodTooltip","ArrowForwardIcon","MeritOutcome","income","projectedPay","baseAprToApr","meritIncreases","commonMerit","totalAdjust","sx","maxWidth","Outcome","ProjectedIncome","selectedYear","setSelectedYear","oldestYear","first","Box","marginRight","set","setProjectedWealth","configName","ConfigEntry","isPercent","onchange","useCallback","input","isNan","Number","isNaN","Config","useFutureBonuses","bonuses","usePayments","merit","cumulativePay","cumulative","payBeforeMerit","payBeforeCompanyBonus","previousPay","remainingPayments","payments","nextPaymentIdx","numRemaining","totalBasePayments","totalPayments","useFutureMedicareTax","config","at","firstOccurrence","remaining","perPaycheck","useFutureRetirementContributions","retirementContribution","useFutureSavings","perMonth","useFutureSocialSecurity","BeforeAfter","before","after","isFuture","milliseconds","FutureEvents","savings","retirement","medicare","socialSecurity","useEarliestAccountEntry","fromMillis","useTimeSeriesWealth","localDateTime","earliest","ssiTaxValue","medicareTaxValue","futureWealth","Array","fill","equals","isLast","accountWealth","graphDate","benchmarkWealth","yoyCash","yoyPct","nice","columnConfig","QueryStatsIcon","WealthTable","ProjectedWealth","Grid","CountDown","timeMs","time","setTime","interval","setInterval","intervalMs","clearInterval","SafetyButton","inactiveLabel","activatingLabel","activeLabel","confirmedLabel","onConfirm","icon","disabled","safetyState","setSafetyState","setTimeout","downloadJson","filename","storeData","link","document","createElement","download","blob","Blob","href","window","URL","createObjectURL","click","useExport","onExport","selectFile","contentType","Promise","multiple","accept","files","from","useImport","resolve","reject","then","reader","FileReader","readAsDataURL","file","onload","readerEvent","result","atob","split","validation","useStoreDataError","hadError","validated","parseError","resetError","removeItem","InvalidDataDialog","message","App","tab","setTab","onImport","isOpen","setIsOpen","catch","err","DeleteForever","darkTheme","createTheme","palette","mode","ReactDOM","createRoot","getElementById","render","backgroundColor","stackTrace","AdapterLuxon"],"mappings":"40FAEaA,MAAAA,WACX,QAAIC,OAA+BC,YACnC,CAACC,EAAMC,IACLF,YAAc,MAAQD,OAAOE,CAAC,EAAEE,SAAAA,EAAaJ,OAAOG,CAAC,EAAEC,SAAS,EAAIJ,OAAOG,CAAC,EAAEC,WAAaJ,OAAOE,CAAC,EAAEE,SAAS,EAFhH,cCDWC,qBAAuBC,EAAEC,OAAO,CAC3CC,KAAMF,EAAEG,OAAO,EACfC,MAAOJ,EAAEK,OAAO,EAChBC,GAAIN,EAAEG,OAAO,CACf,CAAC,ECHYI,iBAAmBP,EAAEC,OAAO,CACvCO,KAAMR,EAAES,QAAQ,SAAS,EACzBC,KAAMV,EAAEW,MAAMZ,oBAAoB,CACpC,CAAC,ECJYa,cAAgBZ,EAAEC,OAAO,CACpCY,UAAWb,EAAEK,OAAO,EACpBS,QAASd,EAAEK,OAAO,EAClBU,gBAAiBf,EAAEK,OAAO,EAC1BW,QAAShB,EAAEK,OAAO,EAClBY,iBAAkBjB,EAAEG,OAAO,EAC3Be,aAAclB,EAAEK,OAAO,CACzB,CAAC,ECLYc,kBAAoBnB,EAAEC,OAAO,CACxCO,KAAMR,EAAES,QAAQ,UAAU,EAC1BW,KAAMR,cAAcS,SAAS,EAC7BX,KAAMV,EAAEW,MAAMZ,oBAAoB,CACpC,CAAC,ECJYuB,OAAStB,EAAEuB,OAAOvB,EAAEwB,MAAM,CAACjB,iBAAkBY,iBAAiB,CAAC,CAAC,ECDhEM,gBAAkBzB,EAAEC,OAAO,CACtCyB,WAAY1B,EAAEC,OAAO,CACnB0B,SAAU3B,EAAEW,MAAMZ,oBAAoB,EACtC6B,iBAAkB5B,EAAEW,MAAMZ,oBAAoB,EAC9C8B,UAAW7B,EAAEW,MAAMZ,oBAAoB,EACvC+B,cAAe9B,EAAEW,MAAMZ,oBAAoB,EAC3CgC,WAAY/B,EAAEW,MAAMZ,oBAAoB,EACxCiC,gBAAiBhC,EAAEW,MAAMZ,oBAAoB,EAC7CkC,aAAcjC,EAAEW,MAAMZ,oBAAoB,EAC1CmC,gBAAiBlC,EAAEW,MAAMZ,oBAAoB,CAAA,CAC9C,CACH,CAAC,ECZYoC,gBAAkBnC,EAAEC,OAAO,CACtCmC,oBAAqBpC,EAAEK,OAAO,EAC9BgC,sBAAuBrC,EAAEK,OAAO,EAChCiC,iCAAkCtC,EAAEK,OAAO,EAC3CkC,4BAA6BvC,EAAEK,OAAO,EACtCmC,gBAAiBxC,EAAEK,OAAO,EAC1BoC,+BAAgCzC,EAAEK,OAAO,CAC3C,CAAC,ECJYqC,gBAAkBA,YAAc,CAC3CjB,gBAAiB,CACfC,WAAY,CACVC,SAAU,CAAE,EACZG,cAAe,CAAE,EACjBE,gBAAiB,CAAE,EACnBD,WAAY,CAAE,EACdE,aAAc,CAAE,EAChBC,gBAAiB,CAAE,EACnBL,UAAW,CAAE,EACbD,iBAAkB,CAAA,CACpB,CACF,EACAN,OAAQ,CAAC,EACTa,gBAAiB,CACfG,iCAAkC,IAClCF,oBAAqB,OACrBC,sBAAuB,KACvBE,4BAA6B,KAC7BC,gBAAiB,EACjBC,+BAAgC,CAClC,CACF,GAtB+BC,mBAwBlBC,eAAiB3C,EAAEC,OAAO,CACrCqB,OACAG,gBACAU,eACF,CAAC,EC7BKS,YAAc,QAAmBC,WAAsBC,gBAAoB,CAC/E,MAAMC,IAAM,QACNC,YAAc,gBACdC,UAAYC,aAAaC,QAAQJ,GAAG,EACpCrC,KAAOuC,UAAYG,KAAKC,MAAMJ,SAAS,EAAIH,cAC3CO,MAAQR,WAAUS,UAAU5C,IAAI,EAGjC2C,MAAME,UACDC,QAAAA,IAAI,YAAaH,MAAMI,KAAK,EAC5BD,QAAAA,IAAI,WAAY9C,IAAI,EAC5BwC,aAAaQ,QAAQV,YAAaI,KAAKO,UAAUjD,IAAI,CAAC,EACtDwC,aAAaQ,QAAQX,IAAKK,KAAKO,UAAUb,aAAY,CAAC,GAGlDc,MAAAA,OAAQ,IAAIC,MAAenD,IAAI,EACrCkD,cAAME,UAAU,IAAM,CACdC,MAAAA,QAAUb,aAAaC,QAAQJ,GAAG,EACxCgB,SAAWb,aAAaQ,QAAS,GAAEX,GAAI,YAAYgB,OAAO,EAC1Db,aAAaQ,QAAQX,IAAKK,KAAKO,UAAUC,OAAMI,KAAK,CAAC,CAAA,CACtD,EAEMJ,MACT,EAvBoB,eAyBPA,MAAQhB,YAAmBD,eAAgBD,iBAAiB,ECtB5DuB,gBAAkBA,QAACC,YAAqBhE,KAAsBiE,SAAmB,CAC5FP,MAAMQ,SAAmB,MAChBC,OAAOC,KAAgB,MAAA,CAC3BC,KAAKjD,OAAO4C,WAAW,EAAcxD,KAAK8D,KAAK,CAC9CtE,KAAMA,KAAKuE,QAAQ,KAAK,EAAEC,SAAS,EACnCtE,MAAO+D,OACP7D,GAAIqE,GAAK,CAAA,CACV,EACDJ,KAAKjD,OAAO4C,WAAW,EAAExD,KAAKkE,KAAKnF,WAAkBoF,GAAAA,SAASC,QAAQC,EAAE7E,IAAI,EAAG,KAAK,CAAC,CAAA,CACtF,CACF,CACH,EAX+B+D,mBCAlBe,mBAAqBA,QAAC9E,KAAgBwB,WAAwBtB,QAAkB,CAC3FwD,MAAMQ,SAAmB,MAChBC,OAAOC,KAAgB,MAAA,CACvB7C,KAAAA,gBAAgBC,WAAWA,UAAU,EAAI6C,KAAK9C,gBAAgBC,WAAWA,UAAU,EACrFuD,OAAO,CACN/E,KAAMA,KAAKuE,QAAQ,KAAK,EAAEC,SAAS,EACnCtE,MACAE,GAAIqE,GAAK,CACV,CAAA,EACAC,KAAKnF,WAAYsF,GAAMF,SAASC,QAAQC,EAAE7E,IAAI,EAAG,KAAK,CAAC,CAAA,CAC3D,CACF,CACH,EAZkC8E,sBCJrBE,cAAgBA,OAAChB,aAC5BN,MAAMQ,SAAmB,MAChBC,OAAOC,KAAgB,MAAA,CACrBC,OAAAA,KAAKjD,OAAO4C,WAAW,CAAA,CAC/B,CACF,EAL0BgB,iBCAhBC,mBAAqBA,QAACjB,YAAqB5D,KACtDsD,MAAMQ,SAAmB,MAChBC,OAAOC,KAAgB,MAAA,CACtBc,MAAAA,YAAcb,KAAKjD,OAAO4C,WAAW,EAAExD,KAAK2E,UAAWN,GAAMA,EAAEzE,KAAOA,EAAE,EAC9EiE,YAAKjD,OAAO4C,WAAW,EAAExD,KAAK4E,OAAOF,YAAa,CAAC,EAC5Cb,IAAAA,CACR,CACF,EAP+BY,sBCCrBI,sBAAwBA,QAACrB,YAAyB5D,KAAe,CAC5EsD,MAAMQ,SAAmB,MAChBC,OAAOC,KAAgB,MAAA,CACtBc,MAAAA,YAAcb,KAAK9C,gBAAgBC,WAAWwC,WAAW,EAAEmB,UAAWN,GAAMA,EAAEzE,KAAOA,EAAE,EAC7FiE,KAAK9C,gBAAgBC,WAAWwC,WAAW,EAAEoB,OAAOF,YAAa,CAAC,CAAA,CACnE,CACF,CACH,EAPqCG,yBCDxBC,WAAaA,WAAM5B,MAAMQ,SAAS,IAAM1B,iBAAiB,EAA5C8C,cCEbC,QAAUA,QAACvB,YAAqB9C,OAC3CwC,MAAMQ,SAAmB,MAChBC,OAAOC,KAAgB,MAAA,CACxBC,KAAKjD,OAAO4C,WAAW,EAAE1D,OAAS,aACnC+D,KAAKjD,OAAO4C,WAAW,EAAe9C,KAAOA,KAChD,CACD,CACF,EAPoBqE,WCDVC,kBAAoBA,QAACxB,YAAqB5D,GAAYJ,OAAmB,CACpF0D,MAAMQ,SAAmB,MACVC,OAAOC,KAAOC,OAAS,CAC5BoB,MAAAA,QAAUpB,MAAKjD,OAAO4C,WAAW,EACjC0B,IAAMD,6BAASjF,KAAK2E,UAAiBN,GAAAA,EAAEzE,KAAOA,IAChDsF,KAAO,IACTD,QAAQjF,KAAKkF,GAAG,EAAE1F,KAAOA,KAAK2F,QAChC,CACD,CAEF,CACH,EAXiCH,qBCDpBI,kBAAoBA,QAACC,mBAA4BC,iBAC5DpC,MAAMQ,SAAmB,MAChBC,OAAOC,KAAgB,MAAA,CAC5BC,KAAKjD,OAAO0E,cAAc,EAAIzB,KAAKjD,OAAOyE,kBAAkB,EACrDxB,OAAAA,KAAKjD,OAAOyE,kBAAkB,CAAA,CACtC,CACF,EAN8BD,qBCApBG,mBAAqBA,QAAC/B,YAAqB5D,GAAYF,QAAkB,CACpFwD,MAAMQ,SAAmB,MACVC,OAAOC,KAAOC,OAAS,CAC5BoB,MAAAA,QAAUpB,MAAKjD,OAAO4C,WAAW,EACjC0B,IAAMD,6BAASjF,KAAK2E,UAAiBN,GAAAA,EAAEzE,KAAOA,IAChDsF,KAAO,IACDlF,QAAAA,KAAKkF,GAAG,EAAExF,MAAQA,MAC5B,CACD,CAEF,CACH,EAXkC6F,sBCCrBC,sBAAwBA,QAACxE,WAAwBpB,GAAYF,QAAkB,CAC1FwD,MAAMQ,SAAmB,MACVC,OAAOC,KAAOC,OAAS,CAClC,MAAMoB,QAAUpB,MAAK9C,gBAAgBC,WAAWA,UAAU,EACpDkE,IAAMD,QAAQN,UAAiBN,GAAAA,EAAEzE,KAAOA,EAAE,EACxCsF,QAAAA,GAAG,EAAExF,MAAQA,KAAAA,CACtB,CAEF,CACH,EATqC8F,yBCExBC,WAAaC,aAAAA,WAAwD,CAACC,MAAOC,MAAQ,CAChG,KAAM,CAACC,KAAMC,OAAO,EAAIC,sBAAS,EAAK,EAChCC,QAAUC,oBAAyB,IAAI,EACvC,CAAClD,MAAOmD,QAAQ,EAAIH,sBAAS,EAAK,EAClC,CAACI,YAAaC,cAAc,EAAIL,aAAoB,SAAA,EAE1D,OAEI,KAAA,SAAA,CAAA,SAAA,CAAA,IAAC,OACC,CAAA,IACA,QAAQ,WACR,QAAS,IAAM,CACbD,QAAQ,EAAI,EACZI,SAAS,EAAK,EACdE,eAAeC,MAAS,GAE1B,GAAI,CAAEC,WAAY,MAAA,EAAS,SAG7B,cAAA,OAEC,OAAO,CAAA,KAAY,QAAS,IAAMR,QAAQ,EAAK,EAC9C,SAAA,CAAA,IAAC,aAAY,SAAe,iBAAA,CAAA,MAC3B,cACC,CAAA,SAAA,KAAC,OAAM,QAAS,EAAG,OAAQ,EACzB,SAAA,CAAC,KAAA,UAAA,CACC,OAAM,GACN,MAAO/C,MAAQ,QAAU,UACzB,SAAqB,OAAA,CACnBmD,SAAS,EAAK,EACCxG,eAAAA,MAAM6G,OAAO7G,KAAmB,CAAA,EAEjD,MAAM,OAEN,SAAA,CAAC,IAAA,SAAA,CAAS,MAAM,WAAW,SAAQ,WAAA,EAClC,IAAA,SAAA,CAAS,MAAM,UAAU,SAAe,kBAAA,CAAA,EAC3C,EAEC,IAAA,UAAA,CACC,YAAY,OACZ,SAAU,IAAM,CACdwG,SAAS,EAAK,CAAA,EAEhB,MACA,SAAUF,QAAQ,CAAA,CAAA,CAEtB,CACF,CAAA,MACC,cACC,CAAA,SAAA,IAAC,QACC,SAAUjD,MACV,QAAS,IAAM,CACbG,MAAMQ,SAAmB,MAChBC,OAAOC,KAAgB,MAAA,QACxB,GAAA,GAACoC,WAAQ3C,UAAR2C,SAAiBtG,QAAS,CAACyG,aAAevC,KAAKhD,OAAOoF,QAAQ3C,QAAQ3D,KAAK,EAAG,CACjFwG,SAAS,EAAI,EACb,MACF,CAEArC,KAAKjD,OAAOoF,QAAQ3C,QAAQ3D,KAAK,EAAI,CACnCI,KAAMqG,YACNnG,KAAM,CAAA,CAAA,EAGR8F,QAAQ,EAAK,CAAA,CACd,CACF,CAAA,EACD,cAGJ,CAAA,EACF,CAAA,EACF,EACCH,yBAAOa,QACV,CAAA,CAAA,CAEJ,CAAC,EChFYC,OAASA,OAACd,OAA6C,CAC5D,KAAA,CAAE/F,GAAI,GAAG8G,IAASf,EAAAA,MACxB,OACG,IAAA,MAAA,CAAI,GAAQ,UAAU,uBAAuB,MAAO,CAAEgB,OAAQ,MAAA,EAC7D,SAAA,IAAC,YAAY,CAAA,GAAID,KAAK,CACxB,CAAA,CAEJ,EAPsBD,UCATG,iBAAmBA,WAAMzC,SAAS0C,MAAM,EAArBD,oBCFnBE,UAAY,aAEZC,SAAW,SCCXC,cAAgBA,OAACrB,OAAmC,CACzD,KAAA,CAAEnC,WAAgBmC,EAAAA,MAExB,OACG,IAAA,MAAA,CAAM,UAAW,EAAG,GAAI,CAAEsB,QAAS,EAAGC,MAAO,MAC5C,EAAA,SAAA,IAAC,OACC,CAAA,QAAS,IAAM,CACb1C,cAAchB,WAAW,CAAA,EAE3B,MAAM,QAAO,SAAA,gBAGf,CAAA,CACF,CAAA,CAEJ,EAf6BwD,iBCChBG,cAAgBA,OAACxB,OAAmC,CACzD,KAAA,CAAEnC,WAAgBmC,EAAAA,MAClB,CAACyB,gBAAiBC,kBAAkB,EAAItB,sBAAiBvC,WAAW,EAE1E,OACG,IAAA,MAAA,CAAM,UAAW,EAAG,GAAI,CAAEyD,QAAS,CAAA,EAClC,SAAA,KAAC,MAAM,CAAA,QAAS,EACd,SAAA,CAAA,IAAC,UACC,CAAA,MAAM,eACN,MAAOG,gBACP,SAAqBC,OAAAA,mBAAmBC,MAAMf,OAAO7G,KAAK,EAC1D,YAAY,GAAE,MAEf,OACC,CAAA,SAAU,CAAC0H,gBACX,QAAS,IAAM,CACbhC,kBAAkB5B,YAAa4D,eAAe,CAAA,EAC9C,SAGJ,cAAA,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EAxB6BD,iBCJhBI,gBAAkB,IAAIC,KAAKC,aAAa,QAAS,CAC5DC,MAAO,WACPC,SAAU,MACVC,SAAU,UACVC,sBAAuB,CACzB,CAAC,EAAEC,OAEUC,WAAa,IAAIP,KAAKC,aAAa,QAAS,CACvDC,MAAO,WACPC,SAAU,MACVE,sBAAuB,CACzB,CAAC,EAAEC,OCAUE,4BAA4BA,OAACxE,aAA+C,CACvF,CACEyE,WAAY,OACZ/D,KAAM,OACNgE,eAAiB7D,GAAMA,QAAAA,YAAE3E,QAAF2E,eAAS8D,SAASrB,YACzCsB,eAAoB/D,EAAErE,MAAQmE,SAASC,QAAQC,EAAErE,KAAKR,IAAI,EAC1D6I,WAAY,mBACZC,SAAU,GACVC,YAAoB,GAAA,CAClB,MAAM/I,KAAO2E,SAASqE,WAAWnE,EAAEoE,QAAQ,EAC3C,OAAIjJ,KAAKkJ,SACP1D,kBAAkBxB,YAAaa,EAAErE,KAAKJ,GAAIJ,IAAI,EAEzCA,KAAKkJ,OACd,CACF,EACA,CACET,WAAY,QACZG,YAAoB/D,WAAAA,YAAErE,OAAFqE,eAAQ3E,OAC5BwI,eAAiB7D,GAAMkD,gBAAgBlD,EAAE3E,KAAK,EAC9C6I,YAAoB,IAClBhD,mBAAmB/B,YAAaa,EAAErE,KAAKJ,GAAI,CAACyE,EAAEoE,QAAQ,EAC/C,IAETH,SAAU,GACVD,WAAY,qBACZvI,KAAM,eACR,EACA,CACEmI,WAAY,UACZU,aAAehD,OAEX,IAAC,OACC,CAAA,QAAS,IAAM,CACbA,MAAM3F,MAAQyE,mBAAmBjB,YAAamC,MAAM3F,KAAKJ,EAAE,CAAA,EAE7D,MAAM,QAEN,SAAA,IAACgJ,YAAiB,CACpB,CAAA,CAGN,CAAC,EA1CsCZ,+BCP5Ba,gBAAkBA,OAAC5D,SACvB6D,qBAAQ,IAAM,WACnB,MAAMC,MAAQC,OAAOC,QAAQD,OAAOE,QAAQjE,QAAQjF,KAAOqE,GAAMF,SAASC,QAAQC,EAAE7E,IAAI,EAAE2J,IAAI,CAAC,EAC5FC,IACC,CAAC,CAACD,KAAMF,OAAO,IACb,CACE,CAACE,KACD,CAAC,EAACF,uBAASI,KAAY,GAAA,CACrB,MAAM7J,KAAO2E,SAASC,QAAQC,EAAE7E,IAAI,EAC9B8J,SAAWnF,SAASoF,WAAW,CACnCC,IAAK,EACLC,MAAO,EACPN,KAAM,CAACA,IAAAA,CACR,EACM3J,OAAAA,KAAKkK,KAAKJ,SAAU,CAAC,OAAQ,OAAO,CAAC,EAAEK,MAAQ,CAAA,GACtD,CAER,EACCzF,KAAK,CAAC,CAAChF,CAAC,EAAG,CAACC,CAAC,IACLD,EAAIC,CACZ,EAEGyK,OAASZ,OAAOa,YAAYd,KAAK,EACjCe,QAAU,CAAA,EAChB,QAASC,IAAIhB,SAAM,CAAC,IAAPA,eAAW,KAAM,EAAGgB,KAAKhB,SAAMA,MAAMiB,OAAS,CAAC,IAAtBjB,eAA0B,IAAIgB,IAC7DH,OAAOG,CAAC,GACXD,QAAQhG,KAAKiG,CAAC,EAGXD,OAAAA,OAAAA,EACN,CAAC7E,QAAQjF,IAAI,CAAC,EA9BY6I,mBCYlBoB,WAAaA,OAACtE,OAAmC,CACtD,KAAA,CAAEnC,WAAgBmC,EAAAA,MAClBV,QAAUiF,SAAShH,aAAkBI,MAAM1C,OAAO4C,WAAW,CAAC,EAC9D,CAAChE,KAAM2K,OAAO,EAAIpE,aAAAA,SAASa,iBAAkB,CAAA,EAC7CwD,SAAWnE,oBAAyB,IAAI,EAExCoE,aAAexB,gBAAgB5D,OAAO,EACtCqF,YAAcxB,aAAAA,QAAQ,IAAM,QAChC,MAAO,CAAC,GAAC7D,gCAASjF,OAATiF,SAAeoE,KAAY7J,GAAAA,KAAK+K,QAAQpG,SAASC,QAAQC,EAAE7E,IAAI,EAAG,KAAK,GAC/E,EAAA,CAACyF,6BAASjF,KAAMR,IAAI,CAAC,EAElBgL,WAAaA,WAAM,QACvBJ,SAAS/G,SAAWE,gBAAgBC,YAAahE,KAAM,GAAC4K,YAAS/G,UAAT+G,eAAkB1K,MAAK,CAAA,EAD9D8K,cAIbC,oBAAsB3B,aAAAA,QAAQ,IAC3Bd,4BAA0BxE,WAAW,EAC3C,CAACA,WAAW,CAAC,EAGd,OAAA,KAAC,KAAK,CAAA,UAAS,GAAC,OAAO,OAAO,MAAO,OAAQ,QAAS,EAAG,QAAS,EAChE,SAAA,CAAA,IAAC,MAAK,GAAI,EAAG,GAAI,EACf,SAAA,IAAC,QACC,yBAAwB,GACxB,SAASyB,6BAASjF,OAAQ,GAC1B,WAAYyK,oBACZ,GAAIxF,QAAU,WACd,iBAAkB,CAAEnF,KAAM,cAAA,EAC1B,8BAA6B,EAAA,CAAA,EAEjC,EACC,IAAA,KAAA,CAAK,GAAI,EAAG,GAAI,EACf,SAAC,IAAA,MAAA,CACC,SAAC,KAAA,KAAA,CAAK,UAAS,GAAC,QAAS,EACtBuK,SAAAA,CAAAA,aAAaL,OAAS,GACpB,IAAA,KAAA,CAAK,GAAI,GACR,SAAC,IAAA,MAAA,CAAM,UAAW,EAChB,SAAC,KAAA,MAAA,CAAM,SAAS,UAAU,SAAA,CAAA,6CAA2CK,aAAaK,KAAK,IAAI,CAAA,CAAE,CAAA,CAC/F,CAAA,EACF,EAEF,IAAC,KAAK,CAAA,GAAI,EAAG,GAAI,EACf,SAAC,IAAA,MAAA,CAAM,UAAW,EAAG,GAAI,CAAEzD,QAAS,CAAA,EAClC,SAAA,KAAC,MAAM,CAAA,QAAS,EACd,SAAA,CAAC,IAAA,WAAA,CACC,OAAQH,UACR,GAAI,CAAE6D,MAAO,OAAQ,EACrB,MAAM,OACN,aAAcnL,KACd,SAAqBE,OAAAA,OAASyK,QAAQzK,KAAK,CAAE,CAAA,EAE/C,IAAC,WACC,MAAM,SACN,KAAK,SACL,aAAc,EACd,SACA,WAAY,CACVkL,eAAgB,IAAC,eAAe,CAAA,SAAS,QAAQ,SAAC,IAAA,CAAA,EAEpD,YAAY,IAAG,EAEjB,IAAC,QAAO,SAAU,CAACpL,MAAQ8K,YAAa,QAASE,WAAW,SAE5D,YAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EACC,IAAA,KAAA,CAAK,GAAI,EAAG,GAAI,EAAG,EACpB,IAAC,MAAK,GAAI,EAAG,GAAI,EACf,SAAA,KAAC,MAAM,CAAA,QAAS,EACd,SAAA,CAAA,IAAC,eAAc,YAAyB,EACxC,IAAC,cAAgC,CAAA,WAAA,EAAbhH,WAAsC,CAAA,CAAA,CAC5D,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CACF,CAAA,CAAA,CAEJ,EA/E0ByG,cCbbY,sBAAwBA,QAACrL,KAAgBQ,OAC7CA,KAAKqJ,KAAK,CAAChF,EAAGa,IAAKjF,QAAU,CAa9BiF,GAZAA,KAAO,GAAKf,SAASC,QAAQC,EAAE7E,IAAI,EAAEuE,QAAQ,KAAK,GAAKvE,MAKzD0F,IAAMjF,MAAM+J,OAAS,GACrB7F,SAASC,QAAQC,EAAE7E,IAAI,EAAEuE,QAAQ,KAAK,GAAKvE,MAC3C2E,SAASC,QAAQpE,KAAKkF,IAAM,CAAC,EAAE1F,IAAI,EAAEuE,QAAQ,KAAK,EAAIvE,MAKpD0F,MAAQjF,MAAM+J,OAAS,EAClB,MAAA,EACT,CACD,EAjBkCa,yBAoBxBC,yBAA2B,QAAItL,KAAgBQ,KAAW+K,WAC9D/K,KAAK2E,UAAU,CAACN,EAAGa,IAAKjF,QAAU,CASnCiF,GARAA,KAAO,GAAK6F,SAAS1G,CAAC,GAAK7E,MAI3B0F,IAAMjF,MAAM+J,OAAS,GAAKe,SAAS1G,CAAC,GAAK7E,MAAQuL,SAAS/K,KAAKkF,IAAM,CAAC,CAAC,EAAI1F,MAI3E0F,MAAQjF,MAAM+J,OAAS,EAClB,MAAA,EACT,CACD,EAbqC,4BCnB3BgB,cAAgBA,OAACC,UACrB,CACL,GAAG,IAAIC,IACLD,SAASE,QAAe,GACf9G,EAAErE,KAAKoJ,IAAK/E,IAAMF,SAASC,QAAQC,GAAE7E,IAAI,EAAEuE,QAAQ,KAAK,EAAEoB,MAAO,CAAA,CACzE,CACH,CAAC,EAEAiE,IAAWjF,GAAAA,SAASC,QAAQC,CAAE,CAAC,EAC/BH,KAAK,CAAChF,EAAGC,IAAMD,EAAEE,WAAaD,EAAEC,UAAU,EATlB4L,iBCDhBI,gBAAkBA,QAAC5L,KAAgBkB,OAAe,CACvD,KAAA,CAAEH,iBAAkBF,gBAAiBF,UAAsBC,QAASiL,KAAM/K,QAASgL,cAAmB5K,EAAAA,KACtG6K,eAAiBF,KAAOhL,gBACxBmL,QAAUhM,KAAKkK,KAAKvF,SAASC,QAAQ7D,gBAAgB,EAAG,QAAQ,EAAEkL,OAClEC,WAAa,EAAIH,iBAAmBC,QAGnCG,OAFSxL,UAAYuL,UAAaJ,eAAiBC,gBAAmBG,UAAY,EAG3F,EAR+BN,mBAUlBQ,WAAaA,QACxBpL,aACAqL,WACAC,YACA3L,YAEO0L,WAAaA,WAAarL,aAAesL,YAAc3L,UAAY2L,YANlDF,cCLbG,SAAWA,OAACpG,OAAmC,CACpD,KAAA,CAAEnC,WAAgBmC,EAAAA,MAClBC,IAAMK,aAAAA,OAA4C,CACtDzG,KAAMoH,iBAAiB,EACvBlH,MAAO,CAAA,CACR,EACK8K,WAAaA,WAAM,CACjB,KAAA,CAAEhL,KAAME,KAAAA,EAAUkG,IAAIvC,QACxB,CAAC7D,MAAQ,CAACE,OAGE8D,gBAAAA,YAAahE,KAAME,KAAK,CAAA,EALvB8K,cAOnB,OACG,IAAA,MAAA,CAAM,UAAW,EAAG,GAAI,CAAEvD,QAAS,CAAA,EAClC,SAAA,KAAC+E,QAAM,CAAA,QAAS,EACd,SAAA,CAAA,IAAC,YACC,aAAcpF,iBAAAA,EACd,SAAWpH,MAA0B,CAC/BA,OACFoG,IAAIvC,QAAQ7D,KAAOA,KACrB,EACA,MAEH,UACC,CAAA,MAAM,aACN,KAAK,UACL,SAAqB,OAAA,CACnBoG,IAAIvC,QAAQ3D,MAAQ,CAAC4H,MAAMf,OAAO7G,KAAAA,EAClC,EAEH,IAAA,OAAA,CAAO,QAAS8K,WAAY,SAAc,iBAAA,CAAA,CAC7C,CAAA,CACF,CAAA,CAEJ,EAnCwBuB,YCRR7C,SAAAA,QAAgDjJ,MAAY8K,SAAyC,CACnH,OAAO9K,MAAMgM,OACX,CAACC,IAAsBC,OAAY,CAC3B9J,MAAAA,IAAM0I,SAASoB,IAAI,EACrB9J,2BAAS,IACTA,IAAAA,GAAG,EAAEyB,KAAKqI,IAAI,EACXD,GACT,EACA,CACF,CAAA,CACF,CAVgBhD,0BCWhB,MAAMkD,WAAaA,OAAC1M,OACXA,MAAQ,EAAIA,MAAQ,IAAMA,MADhB0M,cAIbjK,UAA6B7C,EAAEC,OAAO,CAC1CY,UAAWb,EAAEK,SAAS0M,IAAI,CAAC,EAC3BjM,QAASd,EAAEK,SAAS0M,IAAI,CAAC,EACzBhM,gBAAiBf,EAAEK,SAAS0M,IAAI,CAAC,EACjC/L,QAAShB,EAAEK,SAAS0M,IAAI,CAAC,EACzB9L,iBAAkBjB,EAAEG,OAAO,EAAE6M,SAAS,CAAEC,OAAQ,EAAA,CAAM,EACtD/L,aAAclB,EAAEK,SAAS0M,IAAI,CAAC,CAChC,CAAC,EAEYG,QAAUA,OAAC7G,OAAmC,QACnD,KAAA,CAAEnC,WAAgBmC,EAAAA,MAElBjF,KAAOwJ,SAAShH,MAAc,GAAA,CAC5B+B,MAAAA,QAAUZ,EAAEzD,OAAO4C,WAAW,EACpC,GAAI,SAAUyB,QACZ,OAAOA,QAAQvE,IACjB,CACD,EAEKkF,IAAMK,aAAAA,OAAsBvF,MAAQ,CAAE,CAAA,EACtC,CAACqC,MAAOmD,QAAQ,EAAIH,aAAAA,SAAgD,CAAE,CAAA,EAE5E,OACG,IAAA,MAAA,CAAM,UAAW,EAAG,GAAI,CAAEkB,QAAS,CAAA,EAClC,SAAA,KAAC,MAAM,CAAA,QAAS,EACd,SAAA,CAAA,IAAC,WACC,CAAA,cAAcrB,OAAIvC,UAAJuC,SAAarF,iBAAmB4D,SAASC,QAAQwB,IAAIvC,QAAQ9C,gBAAgB,EAAI,KAC/F,MAAM,gBACN,UAAW,CACTkM,UAAW,CACT1J,MAAO,CAAC,CAACA,MAAMxC,gBACjB,CAAA,EAEF,SAAWb,OAA2B,CAChCA,QACFkG,IAAIvC,QAAQ9C,iBAAmBb,MAAMqE,QAAQ,KAAK,EAAEoB,QACtD,EACA,EAEJ,IAAC,UACC,CAAA,MAAO,CAAC,CAACpC,MAAM5C,UACf,aAAcO,uBAAMP,UACpB,SAAqB,OAAA,CACnByF,IAAIvC,QAAQlD,UAAY,CAACmH,MAAMf,OAAO7G,KAAAA,EAExC,QAAQ,WACR,MAAM,YACN,KAAK,SAAQ,EAEf,IAAC,UACC,CAAA,MAAO,CAAC,CAACqD,MAAM3C,QACf,aAAcM,uBAAMN,QACpB,SAAqB,OAAA,CACnBwF,IAAIvC,QAAQjD,QAAUgM,WAAW,CAAC9E,MAAMf,OAAO7G,KAAK,CAAA,EAEtD,QAAQ,WACR,MAAM,OACN,KAAK,SAAQ,EAEf,IAAC,UACC,CAAA,MAAO,CAAC,CAACqD,MAAM1C,gBACf,aAAcK,uBAAML,gBACpB,SAAqB,OAAA,CACnBuF,IAAIvC,QAAQhD,gBAAkB,CAACiH,MAAMf,OAAO7G,KAAAA,EAE9C,QAAQ,WACR,MAAM,oBACN,KAAK,SAAQ,EAEf,IAAC,UACC,CAAA,aAAcgB,uBAAMJ,QACpB,MAAO,CAAC,CAACyC,MAAMzC,QACf,SAAqB,OAAA,CACnBsF,IAAIvC,QAAQ/C,QAAU,CAACgH,MAAMf,OAAO7G,KAAAA,EAEtC,QAAQ,WACR,MAAM,UACN,KAAK,SAAQ,EAEf,IAAC,UACC,CAAA,aAAcgB,uBAAMF,aACpB,MAAO,CAAC,CAACuC,MAAMvC,aACf,SAAqB,OAAA,CACnBoF,IAAIvC,QAAQ7C,aAAe4L,WAAW,CAAC9E,MAAMf,OAAO7G,KAAK,CAAA,EAE3D,QAAQ,WACR,MAAM,gBACN,KAAK,SAAQ,EAEf,IAAC,OACC,CAAA,QAAS,IAAM,CACb,MAAMgN,OAASvK,UAAUS,UAAUgD,IAAIvC,OAAO,EAC9C,GAAIqJ,OAAO7J,QACTqD,SAAS,CAAE,CAAA,EACH1C,QAAAA,YAAakJ,OAAO1M,IAAI,MAC3B,CACC2M,MAAAA,OAASzD,QAAQwD,OAAO3J,MAAM4J,UAAetI,EAAEuI,KAAKlC,KAAK,EAAE,CAAC,EAClExE,SAASyG,MAAM,CACjB,CAAA,EACA,SAGJ,WAAA,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EAjGuBH,WCdVxE,4BAA4BA,OAACxE,aAA+C,CACvF,CACEyE,WAAY,OACZ/D,KAAM,OACNgE,eAAiB7D,GAAMA,QAAAA,YAAE3E,QAAF2E,eAAS8D,SAASrB,YACzCsB,eAAoB/D,EAAErE,MAAQmE,SAASC,QAAQC,EAAErE,KAAKR,IAAI,CAC5D,EACA,CACEyI,WAAY,aACZG,YAAoB/D,WAAAA,YAAErE,OAAFqE,eAAQ3E,OAC5BwI,eAAiB7D,GAAMkD,gBAAgBlD,EAAE3E,KAAK,EAC9CI,KAAM,eACR,EACA,CACEmI,WAAY,UACZU,aAAehD,OAEX,IAAC,OACC,CAAA,QAAS,IAAM,QACbA,MAAM3F,MAAQyE,mBAAmBjB,aAAamC,SAAM3F,OAAN2F,eAAY/F,EAAE,CAAA,EAE9D,MAAM,QAEN,SAAA,IAACgJ,YAAiB,CACpB,CAAA,CAGN,CAAC,EA3BsCZ,+BA8B5B6E,qBAIN,CACL,CACE5E,WAAY,OACZ/D,KAAM,OACNgE,eAAiB7D,GAAMA,QAAAA,YAAE3E,QAAF2E,eAAS8D,SAASrB,YACzCsB,YAAoB/D,WAAAA,YAAErE,OAAFqE,eAAQ7E,KAC9B,EACA,CACEyI,WAAY,eACZG,YAAoB/D,WAAAA,YAAErE,OAAFqE,eAAQsH,QAAQmB,QAAQ,IAC5C5E,eAAiB7D,GAAMkD,gBAAgBlD,EAAE3E,KAAK,EAC9CI,KAAM,eACR,EACA,CACEmI,WAAY,SACZG,YAAoB/D,WAAAA,YAAErE,OAAFqE,eAAQ0I,OAAOD,QAAQ,IAC3C5E,eAAiB7D,GAAMkD,gBAAgBlD,EAAE3E,KAAK,EAC9CI,KAAM,eACR,CAAC,EC7CUkN,YAAcA,OAACrH,OAAmC,CACvD,KAAA,CAAEnC,WAAgBmC,EAAAA,MAElBV,QAAUiF,SAAShH,aAAkBI,MAAM1C,OAAO4C,WAAW,CAAC,EAE9DyJ,YAAc/C,SAAShH,MAAQmB,GAAMA,EAAEzD,MAAM,EAE7C6J,oBAAsB3B,aAAAA,QAAQ,IAC3Bd,4BAA0BxE,WAAW,EAC3C,CAACA,WAAW,CAAC,EAEV0J,aAAepE,aAAAA,QAAQ,IACtB7D,uBAASvE,KAIPsK,cAAchC,OAAOmE,OAAOF,WAAW,CAAC,EAAE7D,IAAc,MAAA,QAC7D,MAAM0C,YAAcV,gBAAgB5L,KAAMyF,QAAQvE,IAAK,EAChD,MAAA,CACLlB,KACAmM,QAASG,YACTiB,OAAQnB,WACN3G,QAAQvE,KAAMF,cACdqK,yBAAsBrL,KAAMyF,QAAQjF,IAAI,IAAxC6K,eAA2CnL,MAC3CoM,YACA7G,QAAQvE,KAAMP,SAChB,CAAA,CACF,CACD,EAfQ,GAgBR,CAAC8E,QAASgI,WAAW,CAAC,EAGvB,OAAA,KAAC,KAAK,CAAA,UAAS,GAAC,OAAO,OAAO,MAAO,OAAQ,QAAS,EAAG,QAAS,EAChE,SAAA,CAAA,IAAC,MAAK,GAAI,EACR,SAAC,IAAA,OAAA,CACC,yBAAwB,GACxB,SAAShI,6BAASjF,OAAQ,CAC1B,EAAA,WAAYyK,oBACZ,GAAIxF,QAAU,UAAW,CAAA,EAE7B,EACC,IAAA,KAAA,CAAK,GAAI,EACR,SAAC,IAAA,OAAA,CACC,QAASiI,aACT,WAAYL,qBACZ,GAAI5H,QAAU,WACd,iBAAkB,CAAEnF,KAAM,gBAAiB,CAE/C,CAAA,EACA,IAAC,KAAK,CAAA,GAAI,EACR,SAAA,IAAC,MACC,CAAA,SAAA,KAAC,KAAK,CAAA,UAAS,GAAC,QAAS,EACvB,SAAA,CAAA,IAAC,MAAK,GAAI,EACR,SAAC,IAAA,QAAA,CAAQ,WAAyB,CAAA,EACpC,MACC,KAAK,CAAA,GAAI,EACR,SAAC,IAAA,SAAA,CAAS,WAAyB,CAAA,EACrC,EACA,IAAC,KAAK,CAAA,GAAI,CAAG,CAAA,MACZ,KAAK,CAAA,GAAI,EACR,SAAC,KAAAkM,QAAA,CAAM,QAAS,EACd,SAAA,CAAA,IAAC,eAAc,YAAyB,EACxC,IAAC,cAAgC,CAAA,WAAA,EAAbxI,WAAsC,CAAA,CAAA,CAC5D,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CACF,CAAA,CAAA,CAEJ,EAtE2BwJ,eCTdI,YAAcA,WAAM,cAC/B,MAAMnC,SAAWf,SAAShH,MAAQmB,GAAMA,EAAEzD,MAAM,EAC1CyM,cAAerE,UAAOsE,KAAKrC,QAAQ,IAApBjC,eAAwB,GACvC,CAAC/D,QAASsI,UAAU,EAAIxH,sBAAiBsH,YAAY,EAE3DG,oBAAAA,UAAU,IAAM,SACTvC,SAAShG,OAAO,GACnBsI,aAAWvE,IAAAA,OAAOsE,KAAKrC,QAAQ,IAApBjC,YAAAA,IAAwB,KAAM,EAAE,CAC7C,EACC,CAAC/D,QAASgG,QAAQ,CAAC,EAGpB,KAAC,KAAI,QAAQ,OAAO,cAAe,SAAU,MAAM,OAAO,OAAO,OAC/D,SAAA,CAAA,KAAC,IAAI,CAAA,QAAS,OAAQ,KAAM,WACzBjC,SAAAA,CAAAA,OAAOsE,KAAKrC,QAAQ,EAAEjB,OAAS,GAC9B,IAAC,KACC,CAAA,MAAO/E,QACP,SAAU,CAACwI,EAAG/N,QAAU,CACtB6N,WAAW7N,KAAgB,CAAA,EAG5BsJ,SAAOsE,OAAAA,KAAKrC,QAAQ,EAAE7B,IAAKnE,cAClB,IAAkB,CAAA,MAAOA,SAAS,MAAOA,UAAhCA,QAA2C,CAC7D,EACH,EAEF,IAAC,IAAI,CAAA,UAAWQ,UAAW,CAAA,CAAA,EAC7B,EACA,KAAC,IAAI,CAAA,KAAM,WACRwF,SAAAA,GAAAA,YAAShG,OAAO,IAAhBgG,eAAmBnL,QAAS,WAAc,IAAA,WAAA,CAAW,YAAamF,QAAW,IAC7EgG,YAAShG,OAAO,IAAhBgG,eAAmBnL,QAAS,YAAe,IAAA,YAAA,CAAY,YAAamF,QAAW,CAAA,EAClF,CACF,CAAA,CAAA,CAEJ,EAlC2BmI,eCFrBM,iBAAmBA,QAAClO,KAAgBmO,WAAuB,CAC3D,GAAA,CAACA,SAASjN,KACL,MAAA,GAET,MAAMkN,MAAQ/C,sBAAsBrL,KAAMmO,SAAS3N,IAAI,EACvD,GAAI4N,mBAAOpO,MAAQmO,SAAS3N,KAAK,CAAC,IAAM4N,OAASzJ,SAASC,QAAQwJ,MAAMpO,IAAI,EAAEuE,QAAQ,KAAK,EAAIvE,KACtF,MAAA,GAEH,KAAA,CAAEgB,aAAcL,SAAAA,EAAcwN,SAASjN,KACvCiL,QAAUP,gBAAgB5L,KAAMmO,SAASjN,IAAI,EACnD,OAAOkL,WAAWpL,aAAcoN,yBAAOlO,MAAOiM,QAASxL,SAAS,CAClE,EAXyBuN,oBAanBG,gBAAkBA,QAACrO,KAAgByF,UAAqB,CAC5D,MAAM2I,MAAQ/C,sBAAsBrL,KAAMyF,QAAQjF,IAAI,EACtD,OAAI4N,mBAAOpO,MAAQyF,QAAQjF,KAAK,CAAC,IAAM4N,OAASzJ,SAASC,QAAQwJ,MAAMpO,IAAI,EAAEuE,QAAQ,KAAK,EAAIvE,KACrF,EAEFoO,yBAAOlO,KAChB,EANwBmO,mBAQXC,cAAgBA,QAACtO,KAAgByF,UAAgC,CAC5E,OAAQA,QAAQnF,KAAI,CAClB,IAAK,UACI+N,OAAAA,gBAAgBrO,KAAMyF,OAAO,EACtC,IAAK,WACIyI,OAAAA,iBAAiBlO,KAAMyF,OAAO,CACzC,CACF,EAP6B6I,iBCrBhBC,aAAeA,WAAM,CAChC,MAAMnN,QAASsJ,SAAShH,MAAQmB,GAAMA,EAAEzD,MAAM,EAE9C,OAAOkI,qBAAQ,IAAM,CACnB,MAAMkF,MAAQhD,cAAchC,OAAOmE,OAAOvM,OAAM,CAAC,EAC3CqK,SAAWjC,OAAOC,QAAQrI,OAAM,EAChCqN,UAAYD,MAAM5E,IAAc,MAC7B6B,SAASgB,OACd,CAACC,IAAK,CAAC1I,YAAayB,OAAO,IAAM,CACzBvF,MAAAA,MAAQoO,cAActO,KAAMyF,OAAO,EAEzC,OAAIvF,OACFwM,IAAI1I,WAAW,EAAI9D,MACnBwM,IAAI,MAAYA,IAAI,MAAsBxM,OAE1CwM,IAAI1I,WAAW,EAAI,KAGjB,IAAA,KAAUhE,KAAK0O,SAAS,EACrBhC,GAAAA,EAET,CAAEiC,MAAO,CAAA,CACX,CACD,EAEDF,UAAUG,QAAQ,CAAC/J,EAAGa,IAAKmJ,MAAQ,CAC7BnJ,IAAMmJ,IAAIrE,OAAS,GACrBhB,OAAOsE,KAAKjJ,CAAC,EAAE+J,QAAiB,KAAA,CAC1B/J,EAAEhC,GAAG,IAAM,MAAQgM,IAAInJ,IAAM,CAAC,EAAE7C,GAAG,IAAM,OAC3CgC,EAAEhC,GAAG,EAAI,EACX,CACD,CACH,CACD,EAED,MAAMiM,aAAeL,UAAUtJ,aAAkBN,EAAE,MAAsB,CAAC,EACnE4J,OAAAA,UAAUM,MAAMD,YAAY,CAAA,EAClC,CAAC1N,OAAM,CAAC,CACb,EAtC4BmN,gBCGfS,cAAcA,WAAM,CAC/B,MAAM5N,QAASsJ,SAAShH,MAAQmB,GAAMA,EAAEzD,MAAM,EACxCZ,KAAO+N,eAEPU,OAAS3F,aAAAA,QAAQ,IACd,CACL,GAAGE,OAAOsE,KAAK1M,OAAM,EAAEwI,IAAW,IACzB,CACLsF,QAAS,GACT5O,KAAM,OACN6O,KAAM,OACNC,KAAMvK,EACNwK,MAAOxK,EACPyK,QAAS,CACPC,SAAUA,CAAC,CAAEC,MAAOJ,KAAMD,IAAAA,KAAY,CACpCM,QAAU,GAAE9K,SAASqE,WAAWwG,MAAML,IAAI,CAAC,EAAEO,UAAY,CAAA,IAAG3H,gBAAgByH,MAAMJ,IAAI,CAAC,CAAE,EAAA,EAE7F,CAAA,EAEH,EACD,CACE9O,KAAM,OACN6O,KAAM,OACNC,KAAM,QACNC,MAAO,QACPC,QAAS,CACPC,SAAUA,CAAC,CAAEC,MAAOJ,KAAMD,IAAAA,KAAY,CACpCM,QAAU,GAAE9K,SAASqE,WAAWwG,MAAML,IAAI,CAAC,EAAEO,UAAY,CAAA,IAAG3H,gBAAgByH,MAAMJ,IAAI,CAAC,CAAE,EAAA,EAE7F,CAAA,CAEH,EACA,CAAChO,OAAM,CAAC,EAELuO,QAAmCrG,aAAAA,QACvC,IAAO,QAAA,OACLsG,MAAO,kBACPC,MAAO,CACLC,KAAO,gBAAe/H,kBAAiBvH,QAAKA,KAAKgK,OAAS,CAAC,IAApBhK,eAAuBmO,QAAS,CAAc,CAAA,EACvF,EACAnO,KACAuP,KAAM,CACJ,CACEzP,KAAM,OACN0P,SAAU,SACVC,MAAO,CACL3H,OAAQ,IACV,CAAA,EAEF,CACEhI,KAAM,SACN0P,SAAU,MAAA,CACX,EAEHf,MAEF,GAAA,CAACzO,KAAMyO,MAAM,CACf,EACO,OAAA,IAAC,eAAc,OAAoB,CAAA,CAC5C,EA3D2BD,iBCLdkB,UAAYA,WAErB,KAAC,MAAK,UAAS,GAAC,OAAQ,OAAQ,MAAM,OAAO,QAAS,EACpD,SAAA,CAAA,IAAC,MAAK,GAAI,GAAI,OAAO,MACnB,SAAA,IAAClB,gBAAW,CACd,CAAA,EACA,IAAC,MAAK,GAAI,GAAI,OAAO,MACnB,SAAA,IAAC,cAAW,CACd,CAAA,CACF,CAAA,CAAA,EATqBkB,aCDZC,SAAWA,OAACxG,MACvBL,aAAAA,QAAQ,KACC,CACL8G,cAAezL,SAASoF,WAAW,CAAEE,MAAO,EAAGD,IAAK,EAAGL,IAAAA,CAAM,EAC7D9H,WAAY8C,SAASoF,WAAW,CAAEE,MAAO,EAAGD,IAAK,GAAIL,IAAAA,CAAM,EAC3D5H,aAAc4C,SAASoF,WAAW,CAAEE,MAAO,EAAGD,IAAK,GAAIL,IAAAA,CAAM,EAC7D3H,gBAAiB2C,SAASoF,WAAW,CAAEE,MAAO,EAAGD,IAAK,GAAIL,IAAAA,CAAM,CAAA,GAEjE,CAACA,IAAI,CAAC,EARawG,YAUXE,cAAgBA,OAAC1G,MACrBL,qBACL,KAAO,CACLgH,KAAM,CACJC,MAAO5L,SAASoF,WAAW,CAAEE,MAAO,EAAGD,IAAK,EAAGL,IAAAA,CAAM,EACrD6G,IAAK7L,SAASoF,WAAW,CAAEE,MAAO,GAAID,IAAK,GAAIL,IAAAA,CAAM,EAAE8G,MAAM,KAAK,CACpE,EACA5O,WAAY,CACV0O,MAAO5L,SAASoF,WAAW,CAAEE,MAAO,EAAGD,IAAK,EAAGL,KAAMA,KAAO,CAAA,CAAG,EAC/D6G,IAAK7L,SAASoF,WAAW,CAAEE,MAAO,GAAID,IAAK,GAAIL,KAAMA,KAAO,CAAA,CAAG,EAAE8G,MAAM,KAAK,CAC9E,EACA1O,aAAc,CACZwO,MAAO5L,SAASoF,WAAW,CAAEC,IAAK,EAAGC,MAAO,EAAGN,KAAMA,KAAO,CAAA,CAAG,EAC/D6G,IAAK7L,SAASoF,WAAW,CAAEC,IAAK,GAAIC,MAAO,EAAGN,IAAAA,CAAM,EAAE8G,MAAM,KAAK,CACnE,EACAzO,gBAAiB,CACfuO,MAAO5L,SAASoF,WAAW,CAAEC,IAAK,EAAGC,MAAO,EAAGN,KAAMA,KAAO,CAAA,CAAG,EAC/D6G,IAAK7L,SAASoF,WAAW,CAAEC,IAAK,GAAIC,MAAO,EAAGN,IAAAA,CAAM,EAAE8G,MAAM,KAAK,CACnE,CAAA,GAEF,CAAC9G,IAAI,CACP,EArB2B0G,iBCRbK,SAAAA,aAAa1Q,KAAyBQ,KAA8C,CAClG,MAAMmJ,KAAO,OAAO3J,MAAS,SAAWA,KAAOA,KAAK2J,KAC7CnJ,OAAAA,KAAKqJ,KAAY,GACflF,SAASC,QAAQC,EAAE7E,IAAI,EAAE2J,OAASA,IAC1C,CACH,CALgB+G,oCCOHC,MAAAA,UAAYA,OAAChD,QACpBA,OAAOnD,SAAW,EACb,CAAEqC,IAAK,EAAG+D,IAAK,EAAGC,IAAK,CAAA,EAEzBlD,OAAOlB,OACZ,CAACC,IAAKC,KAAMmE,MAAOjC,MAAQ,CACnB,KAAA,CAAEhC,IAAK+D,IAAKC,GAAQnE,EAAAA,IACnB,MAAA,CACLG,IAAKkE,KAAKlE,IAAIF,KAAME,GAAG,EACvB+D,IAAKG,KAAKH,IAAIjE,KAAMiE,GAAG,EACvBC,IAAKC,QAAUjC,IAAIrE,OAAS,GAAKqG,IAAMlE,MAAQkC,IAAIrE,OAASqG,IAAMlE,IAAAA,CACpE,EAEF,CAAEE,IAAKmE,IAAUJ,IAAK,EAAGC,IAAK,CAAA,CAChC,EAduBF,aAiBZM,kBAAoBA,OAAC/Q,QACzB,CAAE2M,IAAK3M,MAAO0Q,IAAK1Q,MAAO2Q,IAAK3Q,MAAOgR,OAAQhR,KAAAA,GADtB+Q,qBAIpBE,kBAAoBA,OAACC,SAChCA,QAAQF,OAASD,kBAAkBG,QAAQF,MAAM,EAAIE,QADtBD,qBAGpBE,aAAeA,QAACD,QAAkBlR,SACtC,CACL2M,IAAKuE,QAAQvE,IAAM3M,MACnB0Q,IAAKQ,QAAQR,IAAM1Q,MACnB2Q,IAAKO,QAAQP,IAAM3Q,MACnBgR,OAAQE,QAAQF,OAASE,QAAQF,OAAShR,MAAQ2G,MAAAA,GAL1BwK,gBA0BfC,WAAaA,WAAIC,WAAiC,CAC7D,MAAMC,mBAAqBD,SAASE,MAAa5M,GAAAA,EAAEqM,QAAUrK,IAAS,EACtE,OAAO0K,SAAS9E,OACd,CAACC,IAAKC,QACG,CACLE,IAAKH,IAAIG,IAAMF,KAAKE,IACpBgE,IAAKnE,IAAImE,IAAMlE,KAAKkE,IACpBD,IAAKlE,IAAIkE,IAAMjE,KAAKiE,IACpBM,OAAQM,oBAAsB9E,IAAIwE,QAAU,IAAMvE,KAAKuE,QAAU,GAAKrK,MAAAA,GAG1E,CAAEgG,IAAK,EAAG+D,IAAK,EAAGC,IAAK,EAAGK,OAAQrK,MAAAA,CACpC,CACF,EAb0ByK,cC5DbI,QAAU/M,SAASoF,WAAW,CAAEE,MAAO,GAAID,IAAK,EAAGL,KAAM,IAAK,CAAC,ECA5DgI,SAAAA,kBAAkBjS,EAAuCC,EAAuC,CAC9G,OAAOD,EAAE6Q,OAAS5Q,EAAE6Q,KAAO7Q,EAAE4Q,OAAS7Q,EAAE8Q,GAC1C,CAFgBmB,8CCMT,MAAMC,cAAgBA,QAACC,UAAqBtB,MAAiBC,MAA+B,CACjG,MAAMtG,KAAO,GAAK6G,KAAKe,IAAIvB,MAAMrG,KAAK2H,UAAW,CAAC,QAAS,MAAM,CAAC,EAAE1H,IAAI,EAClE4H,WAAa,EAAEF,UAAYtB,OAC3ByB,YAAczB,MAAM0B,KAAK,CAC7BjI,IAAKE,KAAO6H,UAAAA,CACb,EAEKG,WAAa1B,IAAItG,KAAKqG,MAAO,CAAC,QAAS,MAAM,CAAC,EAAE4B,MAAQ,EACxDnG,QAAU,CAAA,EAChB,QAASzB,EAAI,EAAGA,GAAK2H,WAAY3H,IAC/ByB,QAAQ1H,KAAK,CACXiM,MAAOyB,YAAYC,KAAK,CAAEE,MAAO5H,EAAI,EAAI,EAAGP,IAAK,CAAA,CAAG,EACpDwG,IAAKwB,YAAYC,KAAK,CAAEE,MAAO5H,EAAI,EAAI,CAAA,CAAG,EAAEkG,MAAM,KAAK,EACvD2B,QAASJ,YAAYC,KAAK,CAAEE,MAAO5H,EAAI,CAAA,CAAG,CAAA,CAC3C,EAEIyB,OAAAA,OACT,EAjB6B4F,iBCLhBS,qBAAuBA,OAAC7R,MAC5B8I,qBAAQ,IAAM,QACnB,OAAOE,UAAOC,QACZD,OAAOE,QACLlJ,KAAKoJ,IAAW/E,GAAAA,EAAE3E,KAAK,KAChB2E,CACT,CACF,EACG+E,IAAI,CAAC,CAAC/G,IAAK8K,MAAM,IAAM,CAAC,CAAC9K,KAAK8K,2BAAQnD,SAAU,CAAC,CAAC,EAClD9F,KAAK,CAAC,CAAA,CAAGhF,CAAC,EAAG,CAAA,CAAGC,CAAC,IACTA,EAAID,CACZ,EAAE,CAAC,IATC8J,eASG,EAAC,EACV,CAAChJ,IAAI,CAAC,EAZyB6R,wBCO9BC,iBAAmBA,OAAC7M,SACjBA,QAAQ8M,SAAShT,WAAkBoF,GAAAA,SAASC,QAAQC,EAAE7E,IAAI,EAAG,KAAK,CAAC,EAAE4J,IAAI,CAAC/E,EAAGiM,MAAOrQ,QAAU,CAC7F4D,MAAAA,KAAO5D,MAAMqQ,MAAQ,CAAC,EACrB,MAAA,CACLP,MAAO5L,SAASC,QAAQC,EAAE7E,IAAI,EAC9BwQ,KAAMnM,iBAAMrE,KAAO2E,SAASC,QAAQP,uBAAMrE,IAAI,EAAEuE,QAAQ,KAAK,EAAII,SAASC,QAAQC,EAAE7E,IAAI,EAAEiS,KAAK,CAAE1I,MAAO,CAAG,CAAA,GACxGiJ,MAAM,CAAErI,KAAM,CAAA,CAAG,EACjBsG,MAAM,KAAK,EACdvQ,MAAO2E,EAAE3E,KAAAA,CACX,CACD,EAVsBoS,oBAanBG,WAAarL,iBAAmBuC,EAAAA,KAChC/G,aAAe,CACnB2N,MAAO5L,SAASoF,WAAW,CACzBE,MAAO,EACPD,IAAK,EACLL,KAAM8I,UAAAA,CACP,EACDjC,IAAK7L,SAASoF,WAAW,CACvBE,MAAO,GACPD,IAAK,GACLL,KAAM8I,UAAAA,CACP,EAAEhC,MAAM,KAAK,EACdvQ,MAAO,CACT,EAEawS,gBAAkBA,WAAM,CACnC,MAAMlR,WAAakJ,SAAShH,MAAcmB,GAAAA,EAAEtD,gBAAgBC,UAAU,EAChEmR,WAAanR,WAAWC,SACxBmR,SAAWP,qBAAqB7Q,WAAWE,gBAAgB,EAEjE,OAAO4H,qBAAQ,IAAM,iBACbuJ,MAAAA,aAAeP,iBAAiBK,UAAU,EAC1CG,cAAgBD,aAAaA,aAAarI,OAAS,CAAC,GAAK5H,aAE/D,QAAS2H,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACpB,KAAA,CAAEgG,MAAOC,IAAKtQ,KAAAA,EAAU2S,aAAa,CAAC,GAAKC,cAC3CC,UAAYxC,MAAM0B,KAAK,CAAE1I,MAAO,EAAA,CAAI,EAAEhF,QAAQ,KAAK,EACnDgJ,SAASmD,gBAAaH,MAAO/O,WAAWG,SAAS,IAAxC+O,eAA2CxQ,QAAS,EAE7D8S,WAAa,GAAK,KADVtC,gBAAaH,MAAO/O,WAAWE,gBAAgB,IAA/CgP,eAAkDxQ,QAAS0S,UAAY,GACjDrF,QAEpCsF,aAAaI,QAAQ,CACnB1C,MAAOwC,UACPvC,IAAKA,IAAIyB,KAAK,CAAE1I,MAAO,EAAA,CAAI,EAAEkH,MAAM,KAAK,EACxCvQ,MAAO6Q,KAAKmC,MAAMhT,MAAQ8S,UAAU,CAAA,CACrC,CACH,CAEA,MAAMG,SAAWN,aAAarI,OAC9B,QAASD,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACrB,KAAA,CAAEgG,MAAOC,IAAKtQ,KAAU2S,EAAAA,aAAaM,SAAW5I,EAAI,CAAC,GAAKuI,cAC1DC,UAAYxC,MAAM0B,KAAK,CAAE1I,MAAO,CAAA,CAAG,EACnCgE,SAASmD,gBAAaqC,UAAWvR,WAAWG,SAAS,IAA5C+O,eAA+CxQ,QAAS,EAEjE8S,WAAa,KADLtC,gBAAaqC,UAAWvR,WAAWE,gBAAgB,IAAnDgP,eAAsDxQ,QAAS0S,UAAY,GAC1DrF,OAE/BsF,aAAavO,KAAK,CAChBiM,MAAOwC,UACPvC,IAAKA,IAAIyB,KAAK,CAAE1I,MAAO,CAAA,CAAG,EAAEkH,MAAM,KAAK,EACvCvQ,MAAO6Q,KAAKmC,MAAMhT,MAAQ8S,UAAU,CAAA,CACrC,CACH,CAEOH,OAAAA,YAAAA,EACN,CAACF,WAAYC,SAAUpR,WAAWG,UAAWH,WAAWE,gBAAgB,CAAC,CAC9E,EAxC+BgR,mBChBlBU,cAAgBA,QAACL,UAAqBM,UAAkC,CACnF,MAAMC,IAAMZ,kBAEZ,OAAOpJ,qBAAQ,IAAM,CACnB,MAAMiK,WAAa3B,cAAcF,QAASqB,UAAWM,OAAO,EAAEzJ,IAAmB,WAAA,CAazE4J,MAAAA,IAZaF,IAAIG,UAAc9B,kBAAkB9M,EAAG6O,SAAS,CAAC,EACjC9J,IAAW,GAAA,CAC5C,MAAM2G,MAAQ5L,SAASiM,IAAI/L,EAAE0L,MAAOmD,UAAUnD,KAAK,EAC7CC,IAAM7L,SAASkI,IAAIhI,EAAE2L,IAAKkD,UAAUlD,GAAG,EACvCmD,aAAeC,yBAAyBpD,IAAIyB,KAAK,CAAE4B,YAAa,CAAG,CAAA,EAAEnF,SAAY6B,EAAAA,MAAM7B,SAAU,CAAA,EACjGxO,MAAS2E,EAAE3E,MAAQ,GAAM6Q,KAAKmC,MAAMS,YAAY,EAC/C,MAAA,CACLpD,MACAC,IACAtQ,KAAAA,CACF,CACD,EAC2BuM,OAAO,CAACC,IAAKC,OAASD,IAAMC,KAAKzM,MAAO,CAAC,EAE9D,MAAA,CACL,GAAGwT,UACHxT,MAAOsT,GAAAA,CACT,CACD,EAEKM,YAAcP,WAAW9G,OAAO,CAACC,IAAKC,OAASD,IAAMC,KAAKzM,MAAO,CAAC,EAElE6T,gBAAkBR,WACrBS,YAAY,CAACtH,IAAKC,OAAS,WAC1B,QAAID,WAAI,CAAC,IAALA,eAAS,KAATA,eAAaxM,SAAUyM,KAAKzM,MAC1B,IAAA,CAAC,EAAE+S,QAAQtG,IAAI,EAEfsG,IAAAA,QAAQ,CAACtG,IAAI,CAAC,EAGbD,KACN,CAA4B,CAAA,EAC9BD,OAAO,CAACC,IAAKC,QACZD,IAAIpI,KAAK,CACPiM,MAAO5D,KAAK,CAAC,EAAEyF,QACf5B,IAAK7D,KAAKA,KAAKnC,OAAS,CAAC,EAAE4H,QAC3BlS,MAAOyM,KAAKF,OAAO,CAACC,KAAKC,QAASD,KAAMC,MAAKzM,MAAO,CAAC,EACrD+T,UAAWtH,KAAK,CAAC,EAAEzM,MACnBgU,MAAOvH,KAAKnC,MAAAA,CACb,EACMkC,KACN,CAAwB,CAAA,EAEtB,MAAA,CAAEoH,YAAaP,WAAYQ,eAAAA,CACjC,EAAA,CAAChB,UAAWM,QAASC,GAAG,CAAC,CAC9B,EAlD6BF,iBCbhBe,gBAAkBA,OAACxK,MAAgC,CAC9D,MAAMnI,WAAakJ,SAAShH,MAAcmB,GAAAA,EAAEtD,gBAAgBC,UAAU,EAChE4S,WAAa/D,cAAc1G,IAAI,EAC/B,CAAEmK,WAAAA,EAAgBV,cAAcgB,WAAWrS,aAAawO,MAAO6D,WAAWrS,aAAayO,GAAG,EAEhG,OAAOlH,qBAAQ,IAAM,CACnB,MAAM+K,gBAAkB3D,aAAa/G,KAAMnI,WAAWO,YAAY,EAC5DuS,kBAAoB5D,aAAa/G,KAAMnI,WAAWM,eAAe,EAEjEyS,YAAc/S,WAAWI,cAC5B6R,UAAc9O,SAASC,QAAQC,EAAE7E,IAAI,EAAE2J,MAAQA,IAAI,EACnDoF,MAAM,EAAE,EACRtC,OAAO,CAACC,IAAKC,OAASD,IAAMC,KAAKzM,MAAO,CAAC,EAEtCqR,SAAWZ,UAAUnP,WAAWM,gBAAgB8H,IAAW/E,GAAAA,EAAE3E,KAAK,CAAC,EACnEsU,KAAOnD,aAAaE,SAAUgD,YAAcT,WAAW,EACvDW,gBAAkBH,2CAAmBpU,OAAQoU,iDAAmBpU,OAAQqU,YAAcT,YAAcjN,OAEnG,MAAA,CACL6N,QAASvD,kBAAkB,CACzB,GAAGI,SACHL,OAAQoD,iDAAmBpU,KAAAA,CAC5B,EACDsU,KAAMrD,kBAAkB,CACtB,GAAGqD,KACHtD,QAAQmD,6CAAiBnU,QAASuU,eAAAA,CACnC,CAAA,CACH,EACC,CAACX,YAAatS,WAAWO,aAAcP,WAAWM,gBAAiBN,WAAWI,cAAe+H,IAAI,CAAC,CACvG,EA7B+BwK,mBCClBQ,cAAgBA,OAAChL,MAAgC,CAC5D,MAAMnI,WAAakJ,SAAShH,MAAcmB,GAAAA,EAAEtD,gBAAgBC,UAAU,EAChEoT,OAASvE,cAAc1G,IAAI,EAC3B,CAAEmK,WAAAA,EAAgBV,cAAcwB,OAAO/S,WAAW0O,MAAOqE,OAAO/S,WAAW2O,GAAG,EAE9EqE,YAAcvL,aAAAA,QAAQ,IAAM,QAChC,OAAOoH,gBAAa/G,KAAMnI,WAAWK,UAAU,IAAxC6O,eAA2CxQ,KACjD,EAAA,CAACsB,WAAWK,WAAY8H,IAAI,CAAC,EAE1BmL,cAAexL,aAAAA,QAAQ,IAAM,QACjC,OAAOoH,gBAAa/G,KAAMnI,WAAWI,aAAa,IAA3C8O,eAA8CxQ,KACpD,EAAA,CAACsB,WAAWI,cAAe+H,IAAI,CAAC,EAE7BoL,0BAA4B1C,qBAAqB7Q,WAAWI,aAAa,EAE/E,OAAO0H,qBAAQ,IAAM,CACnB,MAAM0L,aAAerE,UACnBnP,WAAWI,cAAc6R,OAAQ5O,GAAMF,SAASC,QAAQC,EAAE7E,IAAI,EAAE2J,MAAQA,IAAI,EAAEC,IAAW/E,GAAAA,EAAE3E,KAAK,CAClG,EACA8U,oBAAanE,IAAMkE,2BAA6B,EAEzC,CACLL,QAASvD,kBAAkB,CAAE,GAAG6D,aAAc9D,OAAQ4D,aAAAA,CAAc,EACpEN,KAAMrD,kBAAkB,CACtB,GAAGE,aAAa2D,aAAclB,WAAW,EACzC5C,OAAQ2D,cAAgBC,cAAehB,YAAcgB,cAAejO,OAAAA,CACrE,CAAA,CACH,EACC,CAACgO,YAAaC,cAAcC,0BAA2BvT,WAAWI,cAAekS,YAAanK,IAAI,CAAC,CACxG,EA7B6BgL,iBCMvBG,aAAe,IACRG,mBAAqBA,OAACtL,MAAgC,CAC3DuH,MAAAA,OAASxG,SAAShH,MAAcgN,GAAAA,QAAAA,uBAAa/G,KAAM9E,EAAEtD,gBAAgBC,WAAWQ,eAAe,IAA/D0O,eAAkExQ,MAAK,EAEvGkU,WAAa/D,cAAc1G,IAAI,EAC/B,CAAEmK,WAAAA,EAAgBV,cAAcgB,WAAWpS,gBAAgBuO,MAAO6D,WAAWpS,gBAAgBwO,GAAG,EAEhG3O,WAAa8S,cAAchL,IAAI,EAC/BuL,UAAYf,gBAAgBxK,IAAI,EAEtC,OAAOL,qBAAQ,IAAM,CACb6L,MAAAA,eAAiBlE,kBAAkB6C,WAAW,EAC9C1C,QAAUC,aACdC,WAAW6D,eAAgBhE,kBAAkBtP,WAAW2S,IAAI,EAAGrD,kBAAkB+D,UAAUV,IAAI,CAAC,EAChGM,YACF,EACO,MAAA,CACLN,KAAMrD,kBAAkB,CAAE,GAAGC,QAASF,OAAQA,QAAUE,QAAQF,MAAAA,CAAQ,EACxEwD,QAAS,CACP7H,IAAK,IACL+D,IAAK,IACLC,IAAK,IACLK,OAAQ,GACV,CAAA,CACF,EACC,CAACA,OAAQgE,UAAUV,KAAM3S,WAAW2S,KAAMV,WAAW,CAAC,CAC3D,EAzBkCmB,sBCTrBG,eAAiBA,OAACzL,MAAiB,CACxC,KAAA,CAAE2G,IAAAA,EAASD,cAAc1G,IAAI,EAC7BgJ,WAAaS,cAAc9C,KAAKC,MAAOD,KAAKE,GAAG,EAE/C3O,WAAa8S,cAAchL,IAAI,EAC/BuL,UAAYf,gBAAgBxK,IAAI,EAChC0L,UAAYJ,mBAAmBtL,IAAI,EAEzC,OAAOL,qBAAQ,IAAM,CACnB,MAAMgM,cAAgBhE,WACpBL,kBAAkB0B,WAAWmB,WAAW,EACxC3C,kBAAkBtP,WAAW2S,IAAI,EACjCrD,kBAAkB+D,UAAUV,IAAI,CAClC,EACMV,YAAcxC,WAAWgE,cAAenE,kBAAkBkE,UAAUb,IAAI,CAAC,EACxE,MAAA,CAAEc,cAAexB,WAAAA,CAAY,EACnC,CAACnB,WAAWmB,YAAauB,UAAUb,KAAMU,UAAUV,KAAM3S,WAAW2S,IAAI,CAAC,CAC9E,EAjB8BY,kBCGjBG,KAAOA,QAAC,CAAErV,MAAOsV,SAAUC,eAAgBC,QAAU,GAAMpG,OAAmB,IAAM,CACzFqG,MAAAA,UAAYrM,aAAAA,QAAQ,IACpBpJ,QAAU2G,OACL2O,SAEFE,QAAU3N,gBAAgB7H,KAAK,EAAIqI,WAAWrI,KAAK,EACzD,CAACwV,QAASF,SAAUtV,KAAK,CAAC,EAG3B,OAAA,IAAC,SACC,qBAAsBuV,gBAAkB,CAACC,SAAW,CAACxV,MACrD,MAAO,CAACoP,QAAS/G,WAAWrI,KAAM,CAAC,EAAEgL,KAAK,GAAG,EAE7C,SAAA,IAAC,OAAMyK,CAAAA,SAAAA,SAAU,CAAA,CACnB,CAAA,CAEJ,EAhBoBJ,QCCPK,SAAWA,OAACzP,OAAyB,CAC1C,KAAA,CAAE0P,SAAU7O,SAAU8O,QAAU,YAAaC,WAAazO,SAAcnB,EAAAA,MAExE6P,aAAe1M,aAAAA,QAAQ,IAAM,CACjC,GAAI,CAACuM,SACI,MAAA,KAET,GAAIC,UAAY,YAAa,CAC3B,MAAM5L,KAAO2L,+BAAUI,QAAQ,CAAC,SAAU,OAAQ,OAAO,GACnD3N,OAAS4B,MAAQA,KAAKC,OAAS,EAAI,QAAU,OAC5CD,OAAAA,uBAAMvB,SAASL,OACxB,CAEOuN,OAAAA,+BAAUlN,SAASoN,WACzB,EAAA,CAACA,WAAYF,SAAUC,OAAO,CAAC,EAE5BI,WAAa5M,aAAAA,QAAQ,IACrBwM,UAAY,YACPD,+BAAUlN,SAASoN,YAGrBF,+BAAUI,QAAQ,CAAC,SAAU,OAAQ,OAAO,GAAGtN,SAAS,YAC9D,CAACoN,WAAYF,SAAUC,OAAO,CAAC,EAE5BK,eAAiB7M,aAAAA,QAAQ,IAAM,CACnC,GAAI,CAACuM,SACI,MAAA,QAGT,MAAM1L,KAAO0L,SAASI,QAAQ,MAAM,EAAE9L,KACtC,OAAIA,KAAO,GACF,QACEA,KAAO,GACT,SAGF,KAAA,EACN,CAAC0L,QAAQ,CAAC,EAEb,OAAOA,UAAYA,SAAWzO,iBAAiB,MAC5C,QAAQ,CAAA,MAAO8O,WACd,SAAA,IAAC,IAAI,CAAA,MAAOC,eAAiBH,SAAAA,YAAa,CAAA,EAC5C,EAEAhP,QAEJ,EA9CwB4O,YCZXQ,cAAgB,IAAIpO,KAAKC,aAAa,QAAS,CAC1DC,MAAO,UACPG,sBAAuB,CACzB,CAAC,EAAEC,OCEU+N,QAAUA,QAAC,CAAEnW,KAAoB,IACrCkW,cAAclW,KAAK,EADLmW,WCMVC,MAAQA,OAACnQ,OAAqB,CACnC,KAAA,CAAEa,SAAUuP,eAAgBC,cAAe3G,MAAO4G,SAActQ,EAAAA,MAEpE,OAAA,KAAC,KACC,GAAI,CACFuQ,QAAS,OACTC,SAAU,IACVxP,OAAQ,GACRM,QAAS,UACTmP,cAAe,SACfC,eAAgB,SAChBC,WAAY,aACZC,IAAK,GACLC,WAAY,CAAA,EAEd,UAEA,SAAA,CAAA,KAAC,KAAI,QAAS,OAAQ,WAAY,SAAU,IAAK,GAC/C,SAAA,CAAC,IAAA,IAAA,CAAI,SAAU,GAAI,WAAY,IAAK,WAAY,OAC7ChQ,SAAWA,UAAW,GACzB,CAAA,EACC,CAAC,EAAEuP,gBAAkBC,gBACnB,IAAA,IAAA,CACC,UAAW,WACX,SAAU,GACV,WAAY,IACZ,WAAY,OACZ,cAAe,YACf,MAAO,OAEND,yBAAkBC,cACrB,CAAA,EAEJ,EACA,IAAC,IAAI,CAAA,SAAU,GAAI,WAAY,IAAK,WAAY,OAAQ,cAAe,YACpE3G,SACH,KAAA,CAAA,CACF,CAAA,CAAA,CAEJ,EAvCqByG,SCHRW,aAAeA,OAAC9Q,OAAwE,CAC7F,KAAA,CAAEiL,QAASvB,MAAOqH,OAAY/Q,EAAAA,MAGlC,OAAA,KAAC,KAAI,GAAI,CAAEgR,OAAQ,kCAAmCC,aAAc,CAClE,EAAA,SAAA,CAAA,IAAC,YACC,GAAI,CACFC,cAAe,EACfC,YAAa,EACbC,WAAY,EACZC,aAAc,EACd9P,MAAO,aACT,EACA,QAAQ,KAEPmI,SACH,KAAA,CAAA,MACC,QAAO,EAAA,EACR,KAAC,OAAM,QAAS,EAAG,UAAW,MAAO,QAAS,GAAK,eAAgB,SAChE,SAAA,CAACuB,CAAAA,QAAQoD,KAAKtD,QAEX,KAAA,SAAA,CAAA,SAAA,CAAA,IAAC,OAAM,eAAgB,IAAC,SAAQ,MAAOE,QAAQsD,QAAQ7H,GAAI,CAAA,EAAK,MAAO,MACrE,SAAA,IAAC,MAAK,MAAOuE,QAAQoD,KAAK3H,IAAK,SAAU,EAAE,CAC7C,CAAA,EACA,IAAC,OAAM,eAAgB,IAAC,SAAQ,MAAOuE,QAAQsD,QAAQ7D,GAAI,CAAA,EAAK,MAAO,MACrE,SAAA,IAAC,MAAK,MAAOO,QAAQoD,KAAK3D,IAAK,SAAU,EAAE,CAC7C,CAAA,EACA,IAAC,OAAM,eAAgB,IAAC,SAAQ,MAAOO,QAAQsD,QAAQ9D,GAAI,CAAA,EAAK,MAAO,MACrE,SAAA,IAAC,MAAK,MAAOQ,QAAQoD,KAAK5D,IAAK,SAAU,EAAE,CAC7C,CAAA,CAAA,EACF,MAED,MACC,CAAA,MAAO,SACP,cAAeQ,QAAQsD,QAAQxD,QAAW,IAAA,QAAA,CAAQ,MAAOE,QAAQsD,QAAQxD,MAAU,CAAA,EACnF,eAAgBE,QAAQoD,KAAKtD,QAAU,IAAC,MAAK,MAAOE,QAAQoD,KAAKtD,MAAAA,CAAO,EAExE,SAAC,IAAA,SAAA,CAAS,SAAUgG,QAClB,aAAC,KAAK,CAAA,MAAO9F,QAAQoD,KAAKtD,MAAAA,CAAO,CACnC,CAAA,EACF,CAAA,EACF,CACF,CAAA,CAAA,CAEJ,EA5C4B+F,gBCHfQ,0BAA4BA,QAACjW,WAAwBpB,GAAYJ,OAAmB,CAC/F0D,MAAMQ,SAAmB,MACVC,OAAOC,KAAOC,OAAS,CAClC,MAAMoB,QAAUpB,MAAK9C,gBAAgBC,WAAWA,UAAU,EACpDkE,IAAMD,QAAQN,UAAiBN,GAAAA,EAAEzE,KAAOA,EAAE,EAChDqF,QAAQC,GAAG,EAAE1F,KAAOA,KAAK2F,MAAM,CAAA,CAChC,CAEF,CACH,EATyC8R,6BCU5BjP,0BAA4BA,QACvCxE,YACA8R,UAC0B,CAC1B,CACErN,WAAY,OACZ/D,KAAM,OACNgE,eAAiB7D,GAAMA,QAAAA,YAAE3E,QAAF2E,eAAS8D,SAASrB,YACzCsB,eAAoB/D,EAAErE,MAAQmE,SAASC,QAAQC,EAAErE,KAAKR,IAAI,EAC1DmJ,aAAetE,GAEV,KAAA2H,QAAA,CAAM,UAAW,MAAO,WAAY,SAClC3H,SAAAA,CAAE6S,EAAAA,eAAe,IACjB7S,EAAE3E,OAAS2E,EAAE3E,MAAQyE,SAAS0C,MAAM,GAClC,IAAA,QAAA,CAAQ,MAAM,eACb,SAAA,IAACsQ,YAAW,CAAA,UAAU,QAAQ,CAAA,EAChC,CAEJ,CAAA,CAAA,EAGJ9O,WAAY,mBACZC,SAAU,GACVC,YAAoB,GAAA,CAClB,MAAM/I,KAAO2E,SAASqE,WAAWnE,EAAEoE,QAAQ,EAC3C,OAAIjJ,KAAKkJ,SACmBlF,0BAAAA,YAAaa,EAAErE,KAAKJ,GAAIuE,SAASqE,WAAWnE,EAAEoE,QAAQ,CAAC,EAE5EjJ,KAAKkJ,OACd,CACF,EACA,CACET,WAAY,QACZG,YAAoB/D,WAAAA,YAAErE,OAAFqE,eAAQ3E,OAC5BwI,eACEoN,GAAAA,UAAY,SAAWjR,EAAE3E,MAAQ4V,UAAY,OAASvN,WAAW1D,EAAE3E,KAAK,GAAK2E,EAAE3E,MAAQ,KAAKoN,QAAQ,CAAC,EAAI,IAC3GhN,KAAM,gBACNwI,SAAU,GACVD,WAAY,qBACZE,YAAoB,IAClB/C,sBAAsBhC,YAAaa,EAAErE,KAAKJ,GAAI,CAACyE,EAAEoE,QAAQ,EAClD,GAEX,EACA,CACER,WAAY,UACZU,aAAehD,OAEX,IAAC,OACC,CAAA,QAAS,IAAM,QACbA,MAAM3F,MAAQ6E,sBAAsBrB,aAAamC,SAAM3F,OAAN2F,eAAY/F,EAAE,CAAA,EAEjE,MAAM,QAEN,SAAA,IAACgJ,YAAiB,CACpB,CAAA,CAGN,CAAC,EA1DsCZ,6BCJ5BoP,UAAYA,OAACzR,OAIpB,CACE,KAAA,CAAE3E,WAAYqW,YAAa/B,QAAU,QAAa3P,EAAAA,MAClDV,QAAUiF,SAAShH,MAAQI,OAAUA,MAAMvC,gBAAgBC,WAAWA,UAAU,CAAC,EAEjF,CAACxB,KAAM2K,OAAO,EAAIpE,sBAASsR,WAAW,EACtC,CAAC5T,OAAQ6T,SAAS,EAAIvR,sBAAwB,IAAI,EAElDuE,YAAcxB,aAAAA,QAAQ,IACnB,CAAC,EAAC7D,uBAASoE,KAAY7J,GAAAA,KAAK+K,QAAQpG,SAASC,QAAQC,EAAE7E,IAAI,EAAG,KAAK,IACzE,CAACyF,QAASzF,IAAI,CAAC,EAEZgL,WAAaA,WAAM,CACnB/G,QAAU,OACZa,mBAAmB9E,KAAMwB,WAAYsU,UAAY,UAAY7R,OAAS,IAAMA,MAAM,EAClF6T,UAAU,IAAI,EAChB,EAJiB9M,cAObC,oBAAsB3B,aAAAA,QAAQ,IAC3Bd,0BAA0BhH,WAAYsU,OAAO,EACnD,CAACtU,WAAYsU,OAAO,CAAC,EAExB,YACG,IAAI,CAAA,QAAS,OAAQ,cAAe,SAAU,OAAO,OACpD,SAAA,CAAA,KAAC,MAAM,CAAA,QAAS,EAAG,KAAK,WACtB,SAAA,CAAC,IAAA,WAAA,CACC,OAAQxO,UACR,GAAI,CAAE6D,MAAO,OAAA,EACb,MAAM,OACN,MAAOnL,KACP,SAAqB,OAAA,CACnB+X,QAAQzU,IAAIpD,KAAK,EACjBA,OAASyK,QAAQzK,KAAK,CAAA,EACtB,EAEJ,IAAC,UACC,CAAA,MAAM,SACN,MAAO+D,QAAU,GACjB,KAAK,SACL,SAAsB6D,OAAAA,MAAMf,OAAO7G,QAAU,GAAK4X,UAAU,IAAI,EAAIA,UAAU,CAAChQ,MAAMf,OAAO7G,KAAK,EACjG,WAAY,CACVkL,eAAgB0K,UAAY,UACzB,IAAA,eAAA,CAAe,SAAS,QAASA,SAAAA,UAAY,OAAS,IAAM,GAAI,CAAA,CAAA,EAEnE,EAEJ,IAAC,OAAO,CAAA,SAAU7R,SAAW,MAAQ,CAACjE,MAAQ8K,YAAa,QAASE,WAAW,SAE/E,WAAA,CAAA,CAAA,EACF,EACA,IAAC,KAAI,GAAI,CAAEuM,WAAY,EAAGS,KAAM,UAAA,EAC9B,SAAA,IAAC,OACC,CAAA,yBAAwB,GACxB,QAASvS,SAAW,CAAE,EACtB,WAAYwF,oBACZ,GAAIxF,QAAU,WACd,iBAAkB,CAChBnF,KAAM,cAAA,EAER,8BAA6B,EAAA,CAAA,EAEjC,CACF,CAAA,CAAA,CAEJ,EApEyBsX,aA6EZK,OAASA,OAAC9R,OAAuB,CACtC,KAAA,CAAE0J,MAAO7L,YAAa6T,YAAa/B,OAAY3P,EAAAA,MAEnD,OAAA,IAAC,OAAM,GAAI,CAAEsB,QAAS,EAAGN,OAAQ,OAAQO,MAAO,IAAKsP,WAAY,CAAE,EACjE,cAAC,IAAI,CAAA,QAAQ,OAAO,cAAc,SAAS,OAAO,OAChD,SAAA,CAAA,IAAC,KAAI,KAAK,WAAW,aAAc,EACjC,SAAA,KAAC,YAAW,GAAI,CAAEkB,aAAc,CAAA,EAAK,QAAQ,KAC1CrI,SAAAA,CAAAA,MAAO,IACPiG,UAAY,QACV,IAAA,QAAA,CACC,MAEI,KAAA,SAAA,CAAA,SAAA,CAAA,IAAC,QAAK,SAA+C,iDAAA,CAAA,MACpD,KAAE,EAAA,EACH,IAAC,QAAK,SAAiD,mDAAA,CAAA,CAAA,EACzD,EAGF,SAAA,IAAC,OAAK,CAAA,SAAA,KAAG,CAAA,EACX,EAEDA,UAAY,WACV,IAAA,QAAA,CAAQ,MAAM,8CACb,SAAA,IAAC,OAAK,CAAA,SAAA,KAAA,CAAG,CACX,CAAA,CAAA,CAAA,CAEJ,CACF,CAAA,EACA,IAAC,IAAI,CAAA,KAAK,WACR,SAAA,IAAC,WAAU,QAAkB,WAAY9R,YAAa,WAAA,CAAyB,CACjF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EAlCsBiU,UChFTE,MAAQA,OAAChS,OAAsB,CACpC,KAAA,CAAE0P,SAAU7O,QAAab,EAAAA,MAC/B,OAAO0P,UAAYlR,SAAS0C,MAAM,EAAIwO,UAAY7O,QACpD,EAHqBmR,SCJRC,YAAcA,OAACpY,MAAmB,CAC7C,MAAMqY,UAAY3F,kBAMXjR,OAJU6H,aAAAA,QAAQ,IAAM,QACtB+O,QAAAA,aAAUxO,KAAK,CAAC,CAAE0G,KAAAA,IAAYA,MAAM5G,OAAS3J,KAAK2J,IAAI,IAAtD0O,eAAyDnY,QAAS,CACxE,EAAA,CAACF,KAAK2J,KAAM0O,SAAS,CAAC,CAG3B,EAR2BD,eCOdE,uBAAyBA,OAACnS,OAAuC,CACtE,KAAA,CAAE4N,gBAAiBD,WAAgB3N,EAAAA,MAEvC,OAAA,IAAC,OAAM,GAAI,CAAEuB,MAAO,aAAc,EAChC,cAAC,UACEqM,CAAAA,SAAAA,CAAAA,gBAAgBnK,IAAI,CAAC,CAAE2G,MAAOC,IAAKtQ,MAAO+T,UAAWC,OAASpD,aAE1D,SACC,CAAA,SAAA,CAAA,IAAC,WACC,SAAC,IAAA,KAAA,CAAK,MAAc,QAAS,EAAM,CAAA,EACrC,EACC,IAAA,UAAA,CAAWP,SAAM5H,MAAAA,SAASrB,SAAS,EAAE,EACrC,IAAA,UAAA,CACC,SAAC,IAAAiR,YAAA,CAAgB,CAAA,EACnB,EACC,IAAA,UAAA,CAAW/H,SAAI7H,IAAAA,SAASrB,SAAS,EAAE,OACnC,UACC,CAAA,SAAA,CAAA,IAAC,KAAK,CAAA,MAAO2M,UAAW,QAAS,GAAS,EAAA,MAAIC,KAAAA,EAChD,CAAA,CAAA,EAXapD,KAYf,CAEH,OACA,SACC,CAAA,SAAA,CAAC,IAAA,UAAA,CAAU,QAAS,EAAG,SAAM,SAAA,EAC7B,IAAC,WACC,SAAC,IAAA,KAAA,CAAK,MAAOgD,YAAa,QAAS,GAAM,CAC3C,CAAA,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EA/BsCwE,0BCOzBE,aAAeA,OAACrS,OAAgD,CACrE,KAAA,CAAE0J,MAAOqH,OAAY/Q,EAAAA,MAErBiO,WAAa/D,cAAc6G,QAAQvN,IAAI,EACvC8O,OAASrF,cAAcgB,WAAW9D,KAAKC,MAAO6D,WAAW9D,KAAKE,GAAG,EAEjEkI,aAAehG,kBACfiG,aAAerP,aAAAA,QAAQ,IAAM,CAC3BgK,MAAAA,IAAMoF,aAAa7O,KAAY,GAC5BhF,EAAE0L,OAAS2G,SAAWA,SAAWrS,EAAE2L,GAC3C,EAEO8C,QAAAA,qBAAKpT,QAAS,GAAK,EAAA,EAC1B,CAACgX,QAASwB,YAAY,CAAC,EAEpBE,eAAiBlO,SAAShH,SAAcmB,EAAEtD,gBAAgBC,WAAWE,gBAAgB,EAErFmX,YAAcxG,qBAAqBuG,cAAc,EACjDhG,SAAWlI,SACfhH,MACCmB,GAAM6L,QAAAA,wBAAawG,QAASrS,EAAEtD,gBAAgBC,WAAWE,gBAAgB,IAAnEgP,eAAsExQ,QAAS2Y,YACxF,EAEMlX,UAAY+I,SAAShH,MAAcwT,GAAAA,SAAWxG,aAAawG,QAASrS,EAAEtD,gBAAgBC,WAAWG,SAAS,CAAC,EAC3GmX,aAAelG,UAAY,KAAMjR,iCAAWzB,QAAS,GACrDuB,SAAW2W,YAAYlB,OAAO,EAGlC,OAAA,KAAC,KACC,GAAI,CACFC,OAAQ,kCACRC,aAAc,CAGhB,EAAA,SAAA,CAAA,IAAC,YAAW,GAAI,CAAEC,cAAe,EAAGC,YAAa,EAAGC,WAAY,CAAE,EAAG,QAAQ,KAC1E1H,SACH,KAAA,CAAA,MACC,QAAO,EAAA,OAEP,MAAM,CAAA,QAAS,EAAG,UAAW,MAAO,QAAS,GAE1C,SAAA,CAAC,IAAA,MAAA,CAAM,MAAO,WACZ,SAAA,IAAC,MAAK,MAAOpO,SAAU,QAAS,EAAA,CAAM,CACxC,CAAA,EAEF,IAAC,SACC,gBAAiB,CACf6N,QAAS,CACPyJ,GAAI,CACFC,SAAU,MACZ,CACF,CAAA,EAEF,MAAO,IAAC,uBAAuB,CAAA,gBAAiBP,OAAO1E,gBAAiB,YAAa0E,OAAO3E,WAAY,CAAA,EAExG,SAAC,IAAA,MAAA,CACC,SAAC,IAAA,MAAA,CAAM,MAAO,WACZ,SAAC,IAAA,KAAA,CAAK,eAAc,GAAC,MAAO2E,OAAO3E,aAAe,CAAE,CAAA,CACtD,CAAA,CACF,CAAA,EACF,EAEA,IAAC,OAAM,MAAO,aACZ,aAAC,KAAK,CAAA,MAAO6E,aAAa,CAC5B,CAAA,EAEA,IAAC,MACC,CAAA,MAAO,SACP,mBACG,MAAM,CAAA,SAAUzB,QACf,SAAA,IAAC,QAAQ,CAAA,MAAO4B,WAAY,CAAA,CAC9B,CAAA,EAGF,SAAC,IAAA,SAAA,CAAS,SAAU5B,QAClB,aAAC,QAAQ,CAAA,MAAO4B,WAAY,CAAA,CAC9B,CAAA,EACF,CAAA,EACF,CACF,CAAA,CAAA,CAEJ,EAjF4BN,gBCTfS,QAAUA,OAAC9S,OAAuE,CACvF,KAAA,CAAEiL,QAASvB,MAAOqH,OAAY/Q,EAAAA,MAGlC,OAAA,KAAC,KACC,GAAI,CACFgR,OAAQ,kCACRC,aAAc,CAGhB,EAAA,SAAA,CAAA,IAAC,YAAW,GAAI,CAAEC,cAAe,EAAGC,YAAa,EAAGC,WAAY,CAAE,EAAG,QAAQ,KAC1E1H,SACH,KAAA,CAAA,MACC,QAAO,EAAA,OAEP,MAAM,CAAA,QAAS,EAAG,UAAW,MAAO,QAAS,GAC3C,SAAA,CAACuB,CAAAA,QAAQF,QAEN,KAAA,SAAA,CAAA,SAAA,CAAC,IAAA,MAAA,CAAM,MAAO,MACZ,SAAC,IAAA,KAAA,CAAK,MAAOE,QAAQvE,IAAK,SAAU,CAAA,CAAE,CACxC,CAAA,EACA,IAAC,MAAM,CAAA,MAAO,MACZ,SAAA,IAAC,KAAK,CAAA,MAAOuE,QAAQP,IAAK,SAAU,CAAA,CAAE,CACxC,CAAA,EACA,IAAC,MAAM,CAAA,MAAO,MACZ,SAAA,IAAC,KAAK,CAAA,MAAOO,QAAQR,IAAK,SAAU,CAAA,CAAE,CACxC,CAAA,CAAA,EACF,EAEDsG,SACE,IAAA,MAAA,CACC,MAAO,SACP,eACE,IAAC,MAAM,CAAA,SAAUA,QACf,SAAA,IAAC,KAAK,CAAA,MAAO9F,QAAQF,MAAAA,CAAO,CAC9B,CAAA,EAGF,SAAC,IAAA,SAAA,CAAS,SAAUgG,QAClB,SAAC,IAAA,KAAA,CAAK,MAAO9F,QAAQF,MAAO,CAAA,CAC9B,CAAA,EACF,CAAA,EAEJ,CACF,CAAA,CAAA,CAEJ,EA9CuB+H,WCQVC,gBAAkBA,WAAM,CACnC,KAAM,CAACC,aAAcC,eAAe,EAAI7S,aAASa,SAAAA,iBAAAA,EAAmBuC,IAAI,EAElE0P,WAAa3O,SAAShH,MAAc,GAAA,QACxC,MAAM4V,OAAQzU,KAAEtD,gBAAgBC,WAAWC,SAAS,CAAC,IAAvCoD,eAA0C7E,KAExD,OADasZ,MAAQ3U,SAASC,QAAQ0U,KAAK,EAAIlS,oBACnCuC,IAAAA,CACb,EAEK6E,MAAQ2B,SAASgJ,YAAY,EAC7B,CAAErF,WAAAA,EAAgBsB,eAAe+D,YAAY,EAC7CtX,WAAa8S,cAAcwE,YAAY,EACvCjE,UAAYf,gBAAgBgF,YAAY,EACxC9D,UAAYJ,mBAAmBkE,YAAY,EAG/C,OAAA,KAACI,OAAI,QAAQ,OAAO,cAAc,SAAS,OAAO,OAAO,IAAK,EAC5D,SAAA,CAAC,IAAAA,MAAA,CAAI,KAAK,WACR,SAAC,KAAA/M,QAAA,CAAM,IAAK,EAAG,UAAW,MAAO,SAAU,OACzC,SAAA,CAAC,IAAA,QAAA,CACC,MACE,KAAC+M,MAAI,CAAA,QAAQ,OAAO,WAAY,SAAU,IAAK,EAAG,MAAO,OACvD,SAAA,CAAA,IAAC,QAAK,SAAM,QAAA,CAAA,EACZ,IAAC,YACC,GAAI,CAAE7R,MAAO,GAAIZ,WAAY,OAAQ0S,YAAa,CAAA,EAClD,MAAO,OACP,MAAO,CAAC,MAAM,EACd,QAASpS,iBAAiB,EAAEqS,IAAI,CAAE9P,KAAM0P,UAAY,CAAA,EACpD,QAASjS,mBAAmB6K,KAAK,CAAE1I,MAAO,EAAI,CAAA,EAC9C,aAAcnC,mBACd,UAAW,CACT6F,UAAW,CACT6I,QAAS,WACT7F,MAAO,EACT,CAAA,EAEF,aAAwB,MAAA,CACtBmJ,gBAAgBzP,KAAKA,IAAI,CAAA,EACzB,CAAA,CAEN,CAAA,EAEF,QAASmK,YACT,QAAStF,MAAMzM,aAAa,MAE7B,aAAa,CAAA,MAAM,iBAAiB,QAASyM,MAAM4B,cAAc,EAClE,IAAC,cAAa,MAAM,cAAc,QAASvO,WAAY,QAAS2M,MAAM3M,WAAW,EACjF,IAAC,cAAa,MAAM,gBAAgB,QAASqT,UAAW,QAAS1G,MAAMzM,aAAa,EACpF,IAAC,cAAa,MAAM,mBAAmB,QAASsT,UAAW,QAAS7G,MAAMxM,gBAAgB,CAAA,CAAA,CAC5F,CACF,CAAA,EACA,IAACuX,OAAI,KAAK,WACR,aAACA,MAAI,CAAA,SAAU,OAAQ,MAAO,OAAQ,OAAQ,OAC5C,SAAC,KAAAA,MAAA,CAAI,OAAQ,OAAQ,QAAS,OAAQ,IAAK,EAAG,SAAU,SAAU,WAAY,EAC5E,SAAA,CAAA,IAAC,QACC,YAAY,WACZ,QAAQ,OACR,YAAa5U,SAASoF,WAAW,CAC/BC,IAAK,EACLC,MAAO,EACPN,KAAMwP,YAAAA,CACP,EACD,MAAM,sBAAqB,EAE7B,IAAC,OACC,CAAA,MAAM,iBACN,YAAY,mBACZ,QAAQ,UACR,YAAa3K,MAAM4B,aAAc,CAAA,EAEnC,IAAC,OACC,CAAA,MAAM,kBACN,YAAY,YACZ,QAAQ,UACR,YAAa5B,MAAM4B,aAAc,CAAA,EAEnC,IAAC,OAAO,CAAA,MAAM,cAAc,YAAY,gBAAgB,QAAQ,UAAU,YAAa5B,MAAM3M,UAAW,CAAA,EACxG,IAAC,OAAO,CAAA,MAAM,cAAc,YAAY,aAAa,QAAQ,OAAO,YAAa2M,MAAM3M,UAAW,CAAA,EAClG,IAAC,OACC,CAAA,MAAM,uBACN,YAAY,kBACZ,YAAa2M,MAAMzM,aACnB,QAAQ,SAAS,CAAA,EAEnB,IAAC,OAAO,CAAA,MAAM,gBAAgB,YAAY,eAAe,YAAayM,MAAMzM,aAAc,QAAQ,MAAM,CAAA,EACxG,IAAC,OACC,CAAA,MAAM,mBACN,YAAY,kBACZ,YAAayM,MAAMxM,gBACnB,QAAQ,MAAM,CAAA,CAAA,CAElB,CAAA,CACF,CAAA,EACF,CACF,CAAA,CAAA,CAEJ,EAhG+BkX,mBCblBQ,mBAAqBA,QAACC,WAAmCzZ,QAAkB,CACtFwD,MAAMQ,SAAmB,MAChBC,OAAOC,KAAgB,MAAA,CACvBnC,KAAAA,gBAAgB0X,UAAU,EAAIzZ,KAAAA,CACpC,CACF,CACH,EANkCwZ,sBCSrBE,YAAcA,OAACzT,OAA4B,CAChD,KAAA,CAAEwT,WAAY1J,MAAO6F,QAAU,MAAW3P,EAAAA,MAC1C,CAAC5C,MAAOmD,QAAQ,EAAIH,sBAAS,EAAK,EAClCsT,UAAY/D,UAAY,UAExBgE,SAAWC,yBACdC,OAAkB,CACjB,IAAI9Z,OAAQ,CAAC8Z,MACPC,MAAAA,MAAQC,OAAOC,MAAMja,MAAK,EAChCwG,SAASuT,KAAK,EACVA,SAIAJ,YACF3Z,QAAS,KAGXwZ,mBAAmBC,WAAYzZ,MAAK,EAAA,EAEtC,CAACyZ,WAAYE,SAAS,CACxB,EAEM3Z,MAAQwK,SAAShH,SAAcmB,EAAE5C,gBAAgB0X,UAAU,CAAC,EAC5D/W,cAAeiX,UAAY3Z,MAAQ,IAAMA,MAE/C,OACG,IAAA,UAAA,CACC,MACA,QAAQ,WACR,WAAY,CACVkL,eAAiB,IAAA,eAAA,CAAe,SAAS,QAASyO,SAAAA,UAAY,IAAM,IAAI,CAE1E,EAAA,aAAcjX,cAAa0K,QAAQuM,UAAY,EAAI,CAAC,EACpD,KAAK,UACL,MACA,SAAqB,OAAA,CACV/R,SAAAA,MAAMf,OAAO7G,KAAK,CAE7B,CAAA,CAAA,CAEN,EAzC2B0Z,eCTdQ,OAASA,WAElB,KAAC5N,QAAM,CAAA,QAAS,EACd,SAAA,CAAC,IAAA,WAAA,CAAW,QAAQ,KAAK,SAAa,gBAAA,EACrC,IAAA,YAAA,CAAY,WAAW,kBAAkB,MAAM,sBAAqB,EACpE,IAAA,YAAA,CAAY,WAAW,iCAAiC,MAAM,uCAAsC,EACrG,KAACA,SAAM,UAAW,MAAO,QAAS,EAAG,MAAO,OAAQ,GAAI,CAAE,QAAS,CAAEwL,KAAM,CAAE,CAC3E,EAAA,SAAA,CAAA,IAAC,YAAY,CAAA,WAAW,sBAAsB,MAAM,4BAA2B,MAC9E,YAAY,CAAA,WAAW,wBAAwB,MAAM,sBAAsB,QAAQ,UAAS,CAAA,EAC/F,EACA,KAACxL,SAAM,UAAW,MAAO,QAAS,EAAG,MAAO,OAAQ,GAAI,CAAE,QAAS,CAAEwL,KAAM,CAAE,CAC3E,EAAA,SAAA,CAAA,IAAC,YAAY,CAAA,WAAW,mCAAmC,MAAM,kCAAiC,MACjG,YAAY,CAAA,WAAW,8BAA8B,MAAM,4BAA4B,QAAQ,UAAS,CAAA,EAC3G,CACF,CAAA,CAAA,EAdkBoC,UCGTC,iBAAmBA,WAAM,CAC9BhT,MAAAA,MAAQ1C,SAAS0C,QACjBsC,KAAOtC,MAAMsC,KACb6E,MAAQ2B,SAASxG,IAAI,EACrB9H,WAAa8S,cAAchL,IAAI,EAC/B5H,aAAeoS,gBAAgBxK,IAAI,EACnC3H,gBAAkBiT,mBAAmBtL,IAAI,EAyBxC2Q,OAvBShR,aAAAA,QAAQ,IAEpB,CACE,CAACkF,MAAM3M,WAAYA,WAAW2S,KAAKtD,QAAUrP,WAAW2S,KAAK3D,GAAG,EAChE,CAACrC,MAAMzM,aAAcA,aAAayS,KAAKtD,QAAUnP,aAAayS,KAAK3D,GAAG,EACtE,CAACrC,MAAMxM,gBAAiBA,gBAAgBwS,KAAKtD,QAAUlP,gBAAgBwS,KAAK3D,GAAG,CAAC,EAGjFjH,IAAI,CAAC,CAACwI,QAASnO,MAAM,IAAOoD,MAAQ+K,QAAUnO,OAAS,CAAE,EACzDwI,OAAO,CAACC,IAAKC,OAASD,IAAMC,KAAM,CAAC,EACrC,CACD6B,MAAM3M,WACN2M,MAAMzM,aACNyM,MAAMxM,gBACNH,WAAW2S,KAAKtD,OAChBrP,WAAW2S,KAAK3D,IAChB9O,aAAayS,KAAKtD,OAClBnP,aAAayS,KAAK3D,IAClB7O,gBAAgBwS,KAAKtD,OACrBlP,gBAAgBwS,KAAK3D,IACrBxJ,KAAK,CACN,CAGH,EAhCgCgT,oBCCnBE,YAAcA,WAAM,CACzB5Q,MAAAA,KAAOhF,SAAS0C,MAAAA,EAAQsC,KACxByK,WAAa/D,cAAc1G,IAAI,EAC/B6E,MAAQ2B,SAASxG,IAAI,EACrB,CAAE4J,UAAAA,EAAeH,cAAcgB,WAAW9D,KAAKC,MAAO6D,WAAW9D,KAAKE,GAAG,EAEzEgK,MAAQ7F,cAAchL,IAAI,EAC1B5H,aAAeoS,gBAAgBxK,IAAI,EAEzC,OAAOL,qBAAQ,IAAM,CACbmR,MAAAA,cAAgBlH,WAAW3J,IAAW,IACnC,CAAE,GAAG/E,EAAG6V,WAAY,CAAA,EAC5B,EAEKC,eAAiBrP,yBAAyBkD,MAAM3M,WAAY4Y,cAAgB5V,GAAMA,EAAEuN,OAAO,EAEnFhN,cAAAA,OAAOuV,eAAiB,EAAG,EAAG,CAC1CD,WAAY,EACZxa,MAAOsa,MAAMhG,KAAKtD,QAAUsJ,MAAMhG,KAAK3D,IACvCN,MAAO/B,MAAM3M,WACb2O,IAAKhC,MAAM3M,WACXuQ,QAAS5D,MAAM3M,UAAAA,CAChB,EAED,MAAM+Y,sBAAwBtP,yBAAyBkD,MAAMzM,aAAc0Y,cAAgB5V,GAAMA,EAAEuN,OAAO,EAE5FhN,cAAAA,OAAOwV,sBAAwB,EAAG,EAAG,CACjDF,WAAY,EACZxa,MAAO6B,aAAayS,KAAKtD,QAAUnP,aAAayS,KAAK3D,IACrDN,MAAO/B,MAAMzM,aACbyO,IAAKhC,MAAMzM,aACXqQ,QAAS5D,MAAMzM,YAAAA,CAChB,EAED0Y,cAAc7L,QAAQ,CAAC/J,EAAG0F,EAAGsE,MAAQ,CACjC6L,EAAAA,WAAanQ,EAAI,EAAIsE,IAAItE,EAAI,CAAC,EAAEmQ,WAAa7V,EAAE3E,MAAQ2E,EAAE3E,KAAAA,CAC5D,EAEK2a,MAAAA,YAAcvP,yBAAyB3G,SAAS0C,MAAAA,EAASkM,WAAa1O,GAAMA,EAAEuN,OAAO,EAErF0I,kBAAoBvH,WAAW/I,OAASqQ,YAEvC,MAAA,CACLE,SAAUN,cACVO,eAAgBH,YAAc,EAC9BI,aAAcH,kBACdI,kBAAmB3H,WAAW/I,OAC9B2Q,cAAeV,cAAcjQ,MAAAA,CAC/B,EACC,CACDzI,aAAayS,KAAKtD,OAClBnP,aAAayS,KAAK3D,IAClBrC,MAAMzM,aACNyM,MAAM3M,WACN2Y,MAAMhG,KAAKtD,OACXsJ,MAAMhG,KAAK3D,IACX0C,UAAU,CACX,CACH,EA1D2BgH,eCHda,qBAAuBA,WAAM,CAClC,KAAA,CAAEL,SAAUC,gBAAmBT,YAAY,EAC3Cc,OAAS3Q,SAAShH,MAAQmB,GAAMA,EAAE5C,eAAe,EAEvD,OAAOqH,qBAAQ,IAAM,cACnB,MAAMqF,MACJ0M,OAAOhZ,4BACP0O,KAAKlE,IAAI,EAAGwO,OAAOjZ,oCAAoC2Y,YAASO,GAAG,EAAE,IAAdP,eAAiBL,aAAc,EAAE,EAEpFa,iBAAkBR,YAASlR,KAAMhF,GAAMA,EAAE6V,YAAcW,OAAOjZ,gCAAgC,IAA5E2Y,eAA+E3I,QAEjGoJ,UAAYT,SACfhM,MAAMiM,cAAc,EACpBvH,OAAQ5O,GAAMA,EAAE6V,YAAcW,OAAOjZ,gCAAgC,EACrEqK,OAAO,CAACC,IAAKC,OAEVD,IACAqE,KAAKlE,IAAIF,KAAKzM,MAAOyM,KAAK+N,WAAaW,OAAOjZ,gCAAgC,EAC5EiZ,OAAOhZ,4BAEV,CAAC,EAEAoZ,YAAc9M,UAAUoM,YAASO,GAAG,EAAE,IAAdP,eAAiB7a,QAAS,GAAKmb,OAAOhZ,4BAE7D,MAAA,CACLsM,MACA6M,UACAC,YACAF,eAAAA,CACF,EACC,CAACF,OAAOhZ,4BAA6BgZ,OAAOjZ,iCAAkC4Y,eAAgBD,QAAQ,CAAC,CAC5G,EA/BoCK,wBCAvBM,iCAAmCA,WAAM,CAC9C,KAAA,CAAET,cAAiBV,YAAY,EAC/BoB,uBAAyBjR,SAAShH,MAAcmB,GAAAA,EAAE5C,gBAAgBM,8BAA8B,EAEtG,OAAO+G,qBAAQ,KACN,CACLkS,UAAWP,aAAeU,uBAC1BF,YAAaE,sBAAAA,GAEd,CAACV,aAAcU,sBAAsB,CAAC,CAC3C,EAVgDD,oCCCnCE,iBAAmBA,WAAM,CACpC,MAAMP,OAAS3Q,SAAShH,MAAQmB,GAAMA,EAAE5C,eAAe,EACvD,OAAOqH,qBAAQ,IAAM,CACbmJ,MAAAA,YAAarL,iBAAmBuC,EAAAA,KAC/B,MAAA,CACL6R,UACEH,OAAO/Y,gBACPqC,SAASoF,WAAW,CAClBC,IAAK,GACLC,MAAO,GACPN,KAAM8I,WAAAA,CACP,EACEhC,MAAM,KAAK,EACXwF,QAAQ,QAAQ,EAAEhK,OACvB4P,SAAUR,OAAO/Y,eAAAA,CACnB,EACC,CAAC+Y,OAAO/Y,eAAe,CAAC,CAC7B,EAjBgCsZ,oBCDnBE,wBAA0BA,WAAM,CACrC,KAAA,CAAEf,SAAUC,gBAAmBT,YAAY,EAC3Cc,OAAS3Q,SAAShH,MAAQmB,GAAMA,EAAE5C,eAAe,EAEvD,OAAOqH,qBAAQ,IAAM,cACnB,MAAMqF,MACJ0M,OAAOlZ,sBAAwB4O,KAAKH,IAAI,KAAImK,YAASO,GAAG,EAAE,IAAdP,eAAiBL,aAAc,GAAKW,OAAOnZ,mBAAmB,EACtGqZ,iBAAkBR,YAASlR,KAAMhF,GAAMA,EAAE6V,YAAcW,OAAOnZ,mBAAmB,IAA/D6Y,eAAkE3I,QAEpFoJ,UAAYT,SACfhM,MAAMiM,cAAc,EACpBvH,OAAQ5O,GAAMA,EAAE6V,YAAcW,OAAOnZ,mBAAmB,EACxDuK,OAAO,CAACC,IAAKC,OACLD,IAAMqE,KAAKlE,IAAIF,KAAKzM,MAAOyM,KAAK+N,WAAaW,OAAOnZ,mBAAmB,EAAImZ,OAAOlZ,sBACxF,CAAC,EAEAsZ,YAAc9M,OAAS0M,OAAOlZ,yBAAyB4Y,YAASO,GAAG,EAAE,IAAdP,eAAiB7a,QAAS,GAEhF,MAAA,CACLyO,MACA6M,UACAC,YACAF,eAAAA,CACF,EACC,CAACF,OAAOnZ,oBAAqBmZ,OAAOlZ,sBAAuB6Y,eAAgBD,QAAQ,CAAC,CACzF,EAzBuCe,2BCI1BC,YAAcA,OAAC5V,OAA4B,CAChD,KAAA,CAAE0P,SAAUmG,OAAQC,KAAU9V,EAAAA,MAEpC,OAAK0P,SAIElR,SAAS0C,MAAAA,EAAUwO,SAAWmG,OAASC,MAHrC,IAIX,EAR2BF,eCUrBG,SAAWA,OAAClc,MAAmBA,KAAKiW,QAAQ,cAAc,EAAEkG,aAAe,EAAhED,YAEJE,aAAeA,WAAM,CAChC,MAAM5N,MAAQ2B,WACRsC,YAAarL,iBAAmBuC,EAAAA,KAChC0S,QAAUT,mBACVU,WAAaZ,mCACba,SAAWnB,uBACXoB,eAAiBV,0BACjBja,WAAa8S,cAAclC,WAAU,EACrC1Q,aAAeoS,gBAAgB1B,WAAU,EACzCzQ,gBAAkBiT,mBAAmBxC,WAAU,EAG/C9D,MAFqB0L,mBAGJgC,QAAQb,UAAYc,WAAWd,UAAYgB,eAAehB,UAAYe,SAASf,UAEtG,OAEI,KAAA,SAAA,CAAA,SAAA,CAAC,KAAA,WAAA,CAAW,QAAQ,KACjB/I,SAAAA,CAAAA,YAAW,+BAA4B,IAAC,KAAK,CAAA,MAAO9D,KAAM,CAAA,CAAA,EAC7D,EACC,KAAAnC,QAAA,CAAM,UAAW,MAAO,GAAI,CAAE,SAAU,CAAEmK,SAAU,GAAI,CACtDuF,EAAAA,SAAAA,CAAS1N,SAAAA,MAAM3M,UAAU,GACvB,IAAA,MAAA,CAAM,MAAO,cAAe,eAAgB,IAAC,KAAK,CAAA,MAAOA,WAAW2S,KAAKtD,QAAUrP,WAAW2S,KAAK3D,GAAAA,GAClG,SAAA,IAAC,SAAS,CAAA,WAAYtJ,SAAU,QAAQ,OAAO,SAAUiH,MAAM3M,UAAW,CAAA,EAC5E,EAEDqa,SAAS1N,MAAMzM,YAAY,GACzB,IAAA,MAAA,CACC,MAAO,gBACP,eAAgB,IAAC,KAAK,CAAA,MAAOA,aAAayS,KAAKtD,QAAUnP,aAAayS,KAAK3D,GAAAA,GAE3E,SAAA,IAAC,SAAS,CAAA,QAAQ,OAAO,WAAYtJ,SAAU,SAAUiH,MAAMzM,YAAa,CAAA,EAC9E,EAEDma,SAAS1N,MAAMxM,eAAe,GAC5B,IAAA,MAAA,CACC,MAAO,mBACP,eAAgB,IAAC,KAAK,CAAA,MAAOA,gBAAgBwS,KAAKtD,QAAUlP,gBAAgBwS,KAAK3D,GAAAA,GAEjF,SAAA,IAAC,SAAS,CAAA,WAAYtJ,SAAU,QAAQ,OAAO,SAAUiH,MAAMxM,eAAgB,CAAA,EACjF,CAAA,EAEJ,EACC,KAAAwK,QAAA,CAAM,UAAW,MAAO,GAAI,CAAE,SAAU,CAAEmK,SAAU,GAAI,CACtD,EAAA,SAAA,CAAC,CAAA,CAAC6F,eAAe7N,OAChB,IAAC,OACC,MAAO,sBACP,eACE,IAAC,YACC,CAAA,SAAU6N,eAAejB,gBACzB,WAAS,KAAK,CAAA,QAAQ,YAAY,MAAOiB,eAAehB,SAAU,CAAA,EAClE,MAAO,IAAC,MAAK,QAAQ,eAAe,MAAOgB,eAAef,WAAe,CAAA,IAI7E,SAAA,IAAC,SAAS,CAAA,WAAYlU,SAAU,QAAQ,OAAO,SAAUiV,eAAejB,gBACtE,SAAA,IAAC,KAAK,CAAA,QAAQ,YAAY,MAAOiB,eAAehB,SAAU,CAAA,CAAA,CAC5D,CACF,CAAA,EAED,CAAC,CAACe,SAAS5N,WACT,MACC,CAAA,MAAO,4BACP,eACG,IAAA,YAAA,CACC,SAAU4N,SAAShB,gBACnB,OAAQ,IAAC,KAAK,CAAA,QAAQ,QAAQ,MAAOgB,SAASf,SAAU,CAAA,EACxD,MAAO,IAAC,MAAK,QAAQ,eAAe,MAAOe,SAASd,WAAe,CAAA,IAIvE,SAAA,IAAC,SAAS,CAAA,WAAYlU,SAAU,QAAQ,OAAO,SAAUgV,SAAShB,gBAChE,SAAA,IAAC,KAAK,CAAA,QAAQ,YAAY,MAAOgB,SAASf,SAAU,CAAA,CAAA,CACtD,CACF,CAAA,CAAA,EAEJ,EACC,KAAAhP,QAAA,CAAM,UAAW,MAAO,GAAI,CAAE,SAAU,CAAEmK,SAAU,GAAI,CACtD,EAAA,SAAA,CAAC,CAAA,CAAC0F,QAAQR,UACT,IAAC,OAAM,MAAO,mBAAoB,eAAgB,IAAC,KAAK,CAAA,QAAQ,YAAY,MAAOQ,QAAQR,WACzF,SAAC,IAAA,KAAA,CAAK,QAAQ,kBAAkB,MAAOQ,QAAQb,SAAAA,CAAU,CAC3D,CAAA,EAED,CAAC,CAACc,WAAWb,aACZ,IAAC,OACC,MAAO,0BACP,eAAgB,IAAC,KAAK,CAAA,QAAQ,eAAe,MAAOa,WAAWb,cAE/D,SAAC,IAAA,KAAA,CAAK,QAAQ,kBAAkB,MAAOa,WAAWd,SAAAA,CAAU,CAC9D,CAAA,CAAA,EAEJ,CACF,CAAA,CAAA,CAEJ,EA9F4BY,gBChBfK,wBAA0BA,WAAM,CAC3C,MAAMhR,SAAWf,SAAShH,MAAQmB,GAAMA,EAAEzD,MAAM,EAChD,OAAOuD,SAAS+X,WACdlT,OAAOmE,OAAOlC,QAAQ,EACnB7B,IAAW,GAAA,QACN/E,OAAAA,EAAEvE,OAAS,YACNuE,KAAErE,KAAK,CAAC,IAARqE,SAAW7E,KAAO2E,SAASC,QAAQC,EAAErE,KAAK,CAAC,EAAER,IAAI,EAEnDoH,iBAAiB,CAAA,CACzB,EACAqF,OAAO,CAACC,IAAKC,OAASoE,KAAKlE,IAAIH,KAAKC,uBAAM/M,aAAcoR,GAAQ,EAAG5J,mBAAmBxH,SAAU,CAAA,CACrG,CACF,EAZuC6c,2BCiB1BE,oBAAsBA,WAAM,CACvC,MAAMC,cAAgBxV,mBAChByV,SAAWJ,0BACXhR,SAAWf,SAAShH,MAAQmB,GAAMA,EAAEzD,MAAM,EAC1CkZ,QAAUD,mBACVgC,QAAUT,mBACVkB,YAAchB,0BACdiB,iBAAmB3B,uBACnBO,uBAAyBD,mCA+ExBlb,OA7EM8I,aAAAA,QAAQ,IAAM,CACrB,GAAA,CAACuT,SAAS3T,QACZ,MAAO,GAGH8T,MAAAA,aACJ1C,QACA+B,QAAQb,UACRG,uBAAuBH,UACvBsB,YAAYtB,UACZuB,iBAAiBvB,UAEbhN,MAAQ,IAAIyO,MAAML,cAAcjT,KAAO,EAAIkT,SAASlT,IAAI,EAC3DuT,KAAKL,SAASlT,IAAI,EAClBC,IAAI,CAAC/E,EAAG0F,IAAM5F,SAASoF,WAAW,CAAEC,IAAK,EAAGC,MAAO,EAAGN,KAAM9E,EAAI0F,CAAAA,CAAG,EAAEhG,QAAQ,KAAK,CAAC,EAElF,OAACqY,cAAcO,OAAO3O,MAAMA,MAAMhE,OAAS,CAAC,CAAC,GACzCpF,MAAAA,OAAO,GAAI,EAAGwX,aAAa,EAG5BpO,MACJ5E,IAAI,CAAC5J,KAAM0F,IAAKmJ,MAAQ,CACjBuO,MAAAA,OAAS1X,MAAQmJ,IAAIrE,OAAS,EAC9B6S,cAAgB7T,OAAOmE,OAAOlC,QAAQ,EACzC7B,IAAW,GAAA,CACV,GAAI/E,EAAEvE,OAAS,YAAcuE,EAAE3D,KAAM,CACnC,MAAMmL,WAAahB,sBAAsBrL,KAAM6E,EAAErE,IAAI,EAC/C2L,QAAUP,gBAAgB5L,KAAM6E,EAAE3D,IAAI,EACrCkL,OAAAA,WAAWvH,EAAE3D,KAAKF,aAAcqL,mCAAYnM,MAAOiM,QAAStH,EAAE3D,KAAKP,SAAS,CAAA,SAC1EkE,EAAEvE,OAAS,UAAW,CAC/B,MAAM8N,MAAQ/C,sBAAsBrL,KAAM6E,EAAErE,IAAI,EAChD,OAAO4N,yBAAOlO,QAAS,CACzB,CACO,MAAA,EAAA,CACR,EACAuM,OAAO,CAACC,IAAKC,OAASD,IAAMC,KAAM,CAAC,EAE/B,MAAA,CACL3M,KACAsd,UAAWtd,KAAK0O,SAAS,EACzBtN,OAAQic,eAAiBD,OAASJ,aAAe,EAAA,CAEpD,CAAA,EACApT,IAAI,CAAC/E,EAAGa,IAAKmJ,MAAQ,WAChBnJ,GAAAA,MAAQmJ,IAAIrE,OAAS,EAAG,CAC1B,MAAM+S,kBAAkB1O,OAAInJ,IAAM,CAAC,IAAXmJ,eAAczN,OACtC,OAAKmc,iBAGE,CACL,GAAG1Y,EACH2Y,QAAS3Y,EAAEzD,OAASmc,iBACpBE,OAAQ5Y,EAAEzD,OAASmc,iBAAkB,CAAA,EAL9B1Y,CAOX,CAEA,MAAM0Y,iBAAkB1O,OAAInJ,IAAM,CAAC,IAAXmJ,eAAczN,OACtC,OAAKmc,gBAGE,CACL,GAAG1Y,EACH2Y,QAAS3Y,EAAEzD,OAASmc,gBACpBE,OAAQ5Y,EAAEzD,OAASmc,gBAAkB,CAAA,EAL9B1Y,CAMT,CACD,CAAA,EACF,CACDgY,SAAS3T,QACT2T,SAASlT,KACT2Q,QACA+B,QAAQb,UACRG,uBAAuBH,UACvBsB,YAAYtB,UACZuB,iBAAiBvB,UACjBoB,cACAnR,QAAQ,CACT,CAEH,EAxFmCkR,uBCdtB3N,YAAcA,WAAM,CAC/B,MAAMxO,KAAOmc,sBAEP1N,OAAS3F,aAAAA,QAAQ,IACd,CACL,CACEhJ,KAAM,OACN6O,KAAM,YACNC,KAAM,SACNC,MAAO,SACPC,QAAS,CACPC,SAAUA,CAAC,CAAEC,MAAOJ,KAAMD,IAAAA,KAAY,CACpCM,QAAU,GAAE9K,SAASqE,WAAWwG,MAAML,IAAI,CAAC,EAAEO,UAAY,CAAA,IAAGnH,WAAWiH,MAAMJ,IAAI,CAAC,CAAE,EAAA,EAExF,CAAA,EAEF,CACE9O,KAAM,OACN6O,KAAM,YACNC,KAAM,UACNC,MAAO,UACPC,QAAS,CACPC,SAAUA,CAAC,CAAEC,MAAOJ,KAAMD,IAAAA,KAAY,CACpCM,QAAU,GAAE9K,SAASqE,WAAWwG,MAAML,IAAI,CAAC,EAAEO,UAAY,CAAA,IAAGnH,WAAWiH,MAAMJ,IAAI,CAAC,CAAE,EAAA,EAExF,CAAA,CACD,EAEF,CAAE,CAAA,EAECO,QAAmCrG,aAAAA,QACvC,IAAO,QAAA,OACLsG,MAAO,kBACPC,MAAO,CACLC,KAAO,GAAEtP,KAAKA,KAAKgK,OAAS,CAAC,EAAExK,KAAK2I,SAASrB,SAAS,CAAE,qBAAoBS,kBACzEvH,QAAKA,KAAKgK,OAAS,CAAC,IAApBhK,eAAuBY,SAAU,CACpC,CAAE,EACJ,EACAZ,KACAuP,KAAM,CACJ,CACEzP,KAAM,OACN0P,SAAU,SACVC,MAAO,CACL3H,OAAQ,IACV,CAAA,EAEF,CACEhI,KAAM,SACN0P,SAAU,OACV0N,KAAM,EAAA,CACP,EAEHzO,MAEF,GAAA,CAACzO,KAAMyO,MAAM,CACf,EACO,OAAA,IAAC,eAAc,OAAoB,CAAA,CAC5C,EA1D2BD,eCId2O,aAA2C,CACtD,CACElV,WAAY,OACZ/D,KAAM,OACNgE,eAAiB7D,GAAMA,QAAAA,YAAE3E,QAAF2E,eAAS8D,SAASrB,YACzCsB,YAAoB/D,WAAAA,YAAErE,OAAFqE,eAAQ7E,MAC5BmJ,aAAetE,GAA8C,CACrD4N,MAAAA,YAAarL,iBAAmBuC,EAAAA,KACtC,OACG,KAAA6C,QAAA,CAAM,UAAW,MAAO,WAAY,SAClC3H,SAAAA,CAAE6S,EAAAA,eAAe,IACjB7S,EAAE3E,OAAS2E,EAAE3E,MAAQkH,iBACpB,GAAA,IAAC,QAAQ,CAAA,MAAM,eACb,SAAA,IAACuQ,YAAW,CAAA,UAAU,QAAQ,CAAA,EAChC,EAED9S,EAAE3E,OACD2E,EAAE3E,MAAMid,OACNxY,SAASoF,WAAW,CAClBC,IAAK,EACLC,MAAO,EACPN,KAAM8I,WACP,CAAA,CACH,GACG,IAAA,QAAA,CAAQ,MAAM,2CACb,SAAC,IAAAmL,YAAA,CAAe,UAAU,QAAA,CAAQ,CACpC,CAAA,CAEN,CAAA,CAAA,CAEJ,CACF,EACA,CACEnV,WAAY,SACZG,YAAoB/D,WAAAA,YAAErE,OAAFqE,eAAQzD,QAC5BsH,eAAuBH,WAAAA,oBAAW1D,KAAErE,OAAFqE,eAAQzD,SAAU,CAAC,EACvD,EACA,CACEqH,WAAY,UACZG,YAAoB/D,WAAAA,YAAErE,OAAFqE,eAAQ2Y,SAC5B9U,kBAAwB7D,EAAE3E,OAAS2G,KAAY0B,WAAW1D,EAAE3E,KAAK,EAAI,EACvE,EACA,CACEuI,WAAY,UACZG,YAAoB/D,WAAAA,YAAErE,OAAFqE,eAAQ4Y,QAC5B/U,kBAAwB7D,EAAE3E,QAAU2G,OAAYuP,cAAcvR,EAAE3E,KAAK,EAAI,EAC3E,CAAC,ECtDU2d,YAAcA,WAAM,CAC/B,MAAMrd,KAAOmc,sBAGX,OAAA,IAAC,QACC,GAAG,qBACH,QAASnc,KACT,WAAYmd,aACZ,iBAAkB,CAAErd,KAAM,cAC1B,CAAA,CAAA,CAEN,EAX2Bud,eCEdC,gBAAkBA,gBAE1BC,OAAK,CAAA,UAAS,GAAC,OAAQ,OAAQ,QAAS,EACvC,SAAA,CAAC,IAAAA,OAAA,CAAK,KAAI,GAAC,GAAI,EAAG,OAAQ,MACxB,SAAC,IAAA,YAAA,CAAA,CAAW,CACd,CAAA,EACA,IAACA,OAAK,CAAA,KAAI,GAAC,GAAI,EAAG,OAAQ,MACxB,SAAC,IAAA,MAAA,CAAM,GAAI,CAAEtW,QAAS,EAAGN,OAAQ,MAAA,EAC/B,SAAA,IAAC,OAAM,CAAA,CAAA,CAAA,CACT,CACF,CAAA,EACA,IAAC4W,OAAK,CAAA,KAAI,GAAC,GAAI,EAAG,OAAQ,MACxB,SAAC,IAAA,YAAA,CAAA,CAAW,CACd,CAAA,EACA,IAACA,OAAK,CAAA,KAAI,GAAC,GAAI,EAAG,OAAQ,MACxB,SAAC,IAAA,MAAA,CAAM,GAAI,CAAEtW,QAAS,EAAGN,OAAQ,MAAA,EAC/B,SAAA,IAAC,aAAY,CAAA,CAAA,CAAA,CACf,CACF,CAAA,CACF,CAAA,CAAA,EAnB2B2W,mBCHlBE,UAAYA,OAAC7X,OAA8B,CAChD,KAAA,CAAE8X,MAAW9X,EAAAA,MACb,CAAC+X,KAAMC,OAAO,EAAI5X,sBAAS0X,MAAM,EAEvCjQ,oBAAAA,UAAU,IAAM,CAERoQ,MAAAA,SAAWC,YAAY,IAAM,CACjCF,QAAkB,MAAA,CAChB,MAAM3C,UAAYpX,KAAOka,IACzB,OAAI9C,UAAY,GACd+C,cAAcH,QAAQ,EACf,GAEF5C,SAAAA,CACR,GACA,GAAG,EACC,MAAA,IAAM+C,cAAcH,QAAQ,CAAA,EAClC,CAACjY,MAAM8X,MAAM,CAAC,EAEV,IAAC,gBAAe,MAAQC,KAAOD,OAAU,IAAK,QAAQ,cAAc,MAAM,SAAY,CAAA,CAC/F,EApByBD,aCYZQ,aAAeA,OAACrY,OAA6D,CAClF,KAAA,CAAEsY,cAAeC,gBAAiBC,YAAaC,eAAgBC,UAAWC,KAAMC,SAAU,GAAG7X,IAASf,EAAAA,MACtG,CAAC6Y,YAAaC,cAAc,EAAI1Y,sBAAsB,UAAU,EAEtEyH,oBAAAA,UAAU,IAAM,CACVgR,cAAgB,SAClBE,WAAW,IAAM,CACfD,eAAyB,MAChB7a,OAAS,SAAW,WAAaA,IACzC,GACA,IAAI,EACE4a,cAAgB,aACzBE,WAAW,IAAM,CACfD,eAAe,QAAQ,GACtB,GAAI,EACED,cAAgB,aACzBE,WAAW,IAAM,CACfD,eAAe,UAAU,GACxB,IAAI,CACT,EACC,CAACD,WAAW,CAAC,EAGd,IAAC,KACC,GAAI,CACFrI,SAAU,GAAA,EAGZ,SAAA,IAAC,OACC,CAAA,GAAIzP,KACJ,GAAI,CAAEC,OAAQ,OAAQO,MAAO,MAAA,EAC7B,SAAUqX,UAAYC,cAAgB,cAAgBA,cAAgB,YACtE,KAAK,QACL,QAAS,IAAM,CACG,cAAA,YAAcC,eAAe,YAAY,EACrDD,cAAgB,WACN,6BACZC,eAAe,WAAW,EAE9B,EAEA,cAAC,MACC,CAAA,SAAA,CAAC,KAAA,MAAA,CAAM,UAAW,MACfH,SAAAA,CAAAA,KACAE,cAAgB,YAAcP,cAC9BO,cAAgB,cAAgBN,gBAChCM,cAAgB,UAAYL,YAC5BK,cAAgB,aAAeJ,cAAAA,EAClC,EACCI,cAAgB,UAAa,IAAA,UAAA,CAAU,OAAQ,KAAQ,EACvDA,cAAgB,cAAiB,IAAA,UAAA,CAAU,OAAQ,IAAO,CAAA,EAC7D,EACF,CACF,CAAA,CAEJ,EAvD4BR,gBCTfW,aAAe,QAAKC,SAAkBC,YAAiB,CAClE,MAAM7e,KAAO0C,KAAKO,UAAU4b,UAAW,KAAM,CAAC,EACxCC,KAAOC,SAASC,cAAc,GAAG,EACvCF,KAAKG,SAAWL,SAChB,MAAMM,KAAO,IAAIC,KAAK,CAACnf,IAAI,EAAG,CAAEF,KAAM,kBAAA,CAAoB,EAC1Dgf,KAAKM,KAAOC,OAAOC,IAAIC,gBAAgBL,IAAI,EAC3CJ,KAAKU,MAAM,CACb,EAP4B,gBASfC,UAAYA,WAAM,CACvBZ,MAAAA,UAAY3U,SAAShH,KAAK,EAKzBwc,OAJUnG,aAAAA,YAAY,IAAM,CACjCoF,aAAc,kBAAiB/X,mBAAmBuB,SAASrB,SAAS,CAAE,QAAQ+X,SAAS,CAAA,EACtF,CAACA,SAAS,CAAC,CAGhB,EAPyBY,aCXzB,SAASE,WAAWC,YAAqB,CAChC,OAAA,IAAIC,QAA2B,SAAA,CAC9BrG,MAAAA,MAAQuF,SAASC,cAAc,OAAO,EAC5CxF,MAAM1Z,KAAO,OACb0Z,MAAMsG,SAAW,GACjBtG,MAAMuG,OAASH,YAEfpG,MAAMF,SAAW,IAAM,CACrB,MAAM0G,MAAQvD,MAAMwD,KAAKzG,MAAMwG,OAAS,CAAA,CAAE,EAClCA,QAAAA,MAAM,CAAC,CAAC,CAAA,EAGlBxG,MAAMgG,MAAM,CAAA,CACb,CACH,CAdSG,gCAgBF,MAAMO,UAAYA,WAChB3G,yBAAY,IACV,IAAIsG,QAAc,CAACM,QAASC,SAAW,CACjC,WAAA,kBAAkB,EAAEC,KAAe,MAAA,CACtCC,MAAAA,OAAS,IAAIC,WACnBD,OAAOE,cAAcC,IAAI,EACzBH,OAAOI,OAA0B,aAAA,WAC/B,MAAMzR,SAAU0R,mBAAYpa,SAAZoa,eAAoBC,SAApBD,eAA4B3c,WAC5C,GAAIiL,QAAS,CACLjP,MAAAA,KAAO0C,KAAKC,MAAM0c,OAAOwB,KAAK5R,QAAQ6R,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,EACpDC,WAAa9e,eAAeW,UAAU5C,IAAI,EAChD+gB,WAAWle,SAAWK,MAAMQ,SAAS,IAAM1D,IAAI,EAC/C+gB,WAAWle,QAAUsd,QAAAA,EAAYC,OAAOW,WAAWhe,KAAK,CAC1D,CAAA,CACF,CACD,CAAA,CACF,EACA,CAAE,CAAA,EAjBkBmd,aCjBZc,kBAAoBA,WAAM,CAC/B1e,MAAAA,YAAcE,aAAaC,QAAQ,eAAe,EACxD,OAAOqG,qBAAQ,IAAM,CACnB,GAAI,CAACxG,YACI,MAAA,CAAE2e,SAAU,EAAA,EAErB,MAAMC,UAAYjf,eAAeW,UAAUF,KAAKC,MAAML,WAAW,CAAC,EAC3D,MAAA,CACL2e,SAAU,CAAC,CAAC3e,YACZA,YAAaI,KAAKO,UAAUX,YAAa,KAAM,CAAC,EAChD6e,WAAY7e,aAAe,CAAC4e,UAAUre,QAAUqe,UAAUne,MAAQsD,OAClE+a,WAAYA,IAAM,CAChB5e,aAAa6e,WAAW,eAAe,CACzC,CAAA,CACF,EACC,CAAC/e,WAAW,CAAC,CAClB,EAhBiC0e,qBCYjC,SAAwBM,kBAAkB3b,MAA+B,CACjE,KAAA,CAAEE,KAAM9C,MAAOyD,QAAab,EAAAA,MAElC,qBAEI,SAAC,KAAA,OAAA,CAAO,KAAM,CAAC,CAACE,KACd,SAAA,CAAC,IAAA,YAAA,CAAY,GAAG,qBAAsB,SAAqB,qBAAA,EAC1D,IAAA,cAAA,CACC,SAAC,IAAA,kBAAA,CAAkB,GAAG,2BACpB,SAAC,IAAA,IAAA,CAAI,UAAW,IAAK,SAAU,OAC7B,cAAC,MACC,CAAA,SAAA,CAAC,IAAA,UAAA,CACC,cAAC,SACC,CAAA,SAAA,CAAA,IAAC,WAAU,SAAa,eAAA,CAAA,EACxB,IAAC,WAAU,SAAI,MAAA,CAAA,CAAA,CAAA,CACjB,CACF,CAAA,MACC,UACE9C,CAAAA,SAAAA,yBAAO4J,OAAOvD,IAAI,CAAC/E,EAAGa,WAElB,SACC,CAAA,SAAA,CAAC,IAAA,UAAA,CAAWb,WAAEkd,OAAQ,CAAA,MACrB,UAAWld,CAAAA,SAAAA,EAAEuI,KAAKlC,KAAK,GAAG,EAAE,CAAA,CAAA,EAFhBxF,GAGf,GAGN,CAAA,EACF,CAAA,CACF,CACF,CAAA,EACF,EACA,IAAC,eAAesB,SAAS,CAAA,CAC3B,CAAA,CACF,CAAA,CAEJ,CAnCwB8a,8CCAjB,MAAME,IAAMA,WAAM,CACvB,KAAM,CAACC,IAAKC,MAAM,EAAI3b,sBAAiB,QAAQ,EACzC2Z,SAAWD,YACXkC,SAAWzB,YACX,CAAEe,SAAUE,WAAYC,WAAY9e,aAAgB0e,kBAAkB,EACtE,CAACje,MAAOmD,QAAQ,EAAIH,sBAASob,UAAU,EACvC,CAACS,OAAQC,SAAS,EAAI9b,sBAASkb,QAAQ,EAE7C,OAEI,KAAA,SAAA,CAAA,SAAA,CAAC,KAAA,kBAAA,CAAkB,KAAMW,OAAQ,MAC9BX,SAAAA,CACC,UAAA,IAAC,OACC,CAAA,QAAS,IAAM,CACbtC,aAAc,+BAA8B/X,mBAAmBuB,SAASrB,SAAS,CAAE,QAAQxE,WAAW,EACtGuf,UAAU,EAAK,CAAA,EACf,SAGJ,gBAAA,EAEDZ,UACE,IAAA,OAAA,CACC,MAAM,QACN,QAAS,IAAM,CACbY,UAAU,EAAK,EACF,+BACF,YACb,EACA,UAAS,GAAA,SAGX,OAAA,CAAA,EAED,CAACZ,UACC,IAAA,OAAA,CACC,QAAS,IAAM,CACbY,UAAU,EAAK,CACjB,EACA,UAAS,GAAA,SAGX,QAAA,CAAA,CAAA,EAEJ,EACA,KAAC,MAAM,CAAA,UAAU,MACf,SAAA,CAAC,KAAA,KAAA,CAAK,MAAOJ,IAAK,SAAU,CAAChU,EAAG/N,QAAUgiB,OAAOhiB,KAAK,EACpD,SAAA,CAAA,IAAC,IAAI,CAAA,MAAM,SAAS,MAAM,eAAc,EACvC,IAAA,IAAA,CAAI,MAAM,mBAAmB,MAAM,mBAAkB,EACrD,IAAA,IAAA,CAAI,MAAM,mBAAmB,MAAM,mBAAkB,CAAA,EACxD,OACC,IAAI,CAAA,WAAY,OAAQ,IAAK,EAAG,QAAS,OACxC,SAAA,CAAA,IAAC,QACC,QAAS,IACPiiB,WAAWG,MAAe,KAAA,CACxBD,UAAU,EAAI,EACd3b,SAAS6b,GAAG,CAAA,CACb,EACF,SAGH,SAAA,EACC,IAAA,OAAA,CAAO,QAASrC,SAAU,SAAM,SAAA,MAChC,aACC,CAAA,UAAW5a,WACX,cAAc,QACd,gBAAgB,aAChB,YAAY,UACZ,eAAe,YACf,MAAM,QACN,KAAM,IAACkd,cAAiB,CAAA,EAE5B,CAAA,EACF,OACC,IAAI,CAAA,QAAS,EAAG,OAAQ,MAAO,MAAO,OACpCP,SAAAA,CAAQ,MAAA,cAAa,UAAY,CAAA,CAAA,EACjCA,MAAQ,oBAAsB,IAAC,gBAAkB,CAAA,CAAA,EACjDA,MAAQ,oBAAsB,IAAC,gBAAkB,CAAA,CAAA,CAAA,EACpD,CACF,CAAA,CAAA,CAEJ,EAjFmBD,OCJbS,UAAYC,YAAY,CAC5BC,QAAS,CACPC,KAAM,MACR,CACF,CAAC,EAEDC,OAASC,WAAWvD,SAASwD,eAAe,MAAM,CAAE,EAAEC,OACnD,IAAA,MAAM,WAAN,CACC,SAAC,IAAA,cAAA,CACC,eAA2B,OAGrB,KAAA,SAAA,CAAA,SAAA,CAAA,IAAC,OAAI,MAAO,CAAEC,gBAAiB,MAAO,EAAI9c,SAAM5C,MAAAA,MAAMwe,OAAQ,CAAA,EAC9D,IAAC,OAAI,MAAO,CAAEkB,gBAAiB,MAAO,EAAI9c,SAAM5C,MAAAA,MAAM2f,UAAW,CAAA,CACnE,CAAA,CAAA,EAIJ,aAAC,qBAAqB,CAAA,YAAaC,aACjC,SAAC,KAAA,cAAA,CAAc,MAAOV,UACpB,SAAA,CAAA,IAAC,YAAW,EAAA,MACX,IAAG,EAAA,CAAA,CACN,CAAA,CACF,CAAA,EACF,CAAA,CACF,CACF"}