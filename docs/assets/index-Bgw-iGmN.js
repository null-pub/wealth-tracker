var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{j as jsx,a as jsxs,F as Fragment,b as jsx$1}from"./@emotion-BvSa5nUK.js";import{S as Store,u as useStore,a as useForm,b as useNavigate,c as useLocation,L as Link,O as Outlet,d as createRootRoute,e as createRoute,f as createRouter,r as redirect,R as RouterProvider}from"./@tanstack-CzG0gKxE.js";import{r as reactExports,c as compilerRuntimeExports,a as React}from"./react-BOr9OwWu.js";import{c as create}from"./mutative-BeQjv3_S.js";import{z}from"./zod-Be1kkTT8.js";import{D as DateTime,a as Duration}from"./luxon-CCY3qnSC.js";import{B as Button,D as DialogTitle,M as MenuItem,T as TextField,S as Stack,a as DialogContent,b as DialogActions,c as Dialog,d as Tooltip,e as DeleteForever,f as SettingsIcon,I as IconButton,g as Typography,C as CloseIcon,A as Alert,P as Paper,h as Box,i as DatePicker,j as InputAdornment,k as Stack$1,l as Box$1,m as Tab,n as Tabs,o as Divider,p as InsertChartIcon,U as UpdateIcon,q as TableCell,r as ArrowForwardIcon,s as TableRow,t as TableBody,u as Table,v as Checkbox,G as Grid,w as InputLabel,x as Select,F as FormControl,y as CircularProgress,z as TodayIcon,Q as QueryStatsIcon,E as CardHeader,H as CardContent,J as Card$1,K as TreeItem,L as SimpleTreeView,N as Modal,O as TableHead,R as DialogContentText,V as CardActions,W as createTheme,X as LocalizationProvider,Y as AdapterLuxon,Z as CssBaseline,_ as ThemeProvider}from"./@mui-3kPXaiU0.js";import{A as AgGridReact}from"./ag-grid-react-dsJCHPhl.js";import{z as themeQuartz,M as ModuleRegistry,D as AllCommunityModule}from"./ag-grid-community-DMn73PjZ.js";import{t as time_exports}from"./ag-charts-community-CvQJrZXY.js";import{A as AgCharts}from"./ag-charts-react-CDWxKF7J.js";import{s as sumSimple,m as median,a as max,b as min,c as ckmeans$1}from"./simple-statistics-COyjyKRP.js";import{a as ReactDOM}from"./react-dom-sAGGPUyF.js";import{E as ErrorBoundary}from"./react-error-boundary-DaDu2M_c.js";import"./hoist-non-react-statics-DudM75W6.js";import"./react-is-Bg9ZyjEw.js";import"./@babel-DaULb-9E.js";import"./stylis-Cu7eE6HQ.js";import"./tiny-invariant-DcbpN2Uk.js";import"./tiny-warning-o95Rl_Zn.js";import"./jsesc-COZeGqng.js";import"./use-sync-external-store-C1Zvhj8o.js";import"./clsx-DvC3wpxN.js";import"./prop-types-CH_qmm61.js";import"./react-transition-group-CfjsAj44.js";import"./dom-helpers-Hfa3ly4k.js";import"./@popperjs-CefdcEob.js";import"./reselect-CDQ-Ks90.js";import"./ag-charts-core-DYGJlQQ5.js";import"./scheduler-nbeF28HN.js";__name(function(){const relList=document.createElement("link").relList;if(relList&&relList.supports&&relList.supports("modulepreload"))return;for(const link of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(link);new MutationObserver(mutations=>{for(const mutation of mutations)if(mutation.type==="childList")for(const node of mutation.addedNodes)node.tagName==="LINK"&&node.rel==="modulepreload"&&processPreload(node)}).observe(document,{childList:!0,subtree:!0});function getFetchOpts(link){const fetchOpts={};return link.integrity&&(fetchOpts.integrity=link.integrity),link.referrerPolicy&&(fetchOpts.referrerPolicy=link.referrerPolicy),link.crossOrigin==="use-credentials"?fetchOpts.credentials="include":link.crossOrigin==="anonymous"?fetchOpts.credentials="omit":fetchOpts.credentials="same-origin",fetchOpts}__name(getFetchOpts,"getFetchOpts");function processPreload(link){if(link.ep)return;link.ep=!0;const fetchOpts=getFetchOpts(link);fetch(link.href,fetchOpts)}__name(processPreload,"processPreload")},"polyfill")();const sortByDate=__name((select,direction)=>(a,b)=>direction==="asc"?select(a).toMillis()-select(b).toMillis():select(b).toMillis()-select(a).toMillis(),"sortByDate"),loanValidator=z.object({principal:z.number(),ratePct:z.number(),paymentsPerYear:z.number(),payment:z.number(),firstPaymentDate:z.string(),ownershipPct:z.number()}),accountDataValidator$2=z.object({date:z.string(),value:z.number(),id:z.string()}),accountValidator$2=z.object({type:z.literal("account"),data:z.array(accountDataValidator$2)}),mortgageValidator$2=z.object({type:z.literal("mortgage"),loan:loanValidator.optional(),data:z.array(accountDataValidator$2)}),wealth$2=z.record(z.union([accountValidator$2,mortgageValidator$2])),projectedIncome$2=z.object({timeSeries:z.object({paycheck:z.array(accountDataValidator$2),meritIncreasePct:z.array(accountDataValidator$2),equityPct:z.array(accountDataValidator$2),meritBonusPct:z.array(accountDataValidator$2),meritBonus:z.array(accountDataValidator$2),companyBonusPct:z.array(accountDataValidator$2),companyBonus:z.array(accountDataValidator$2),retirementBonus:z.array(accountDataValidator$2)})}),projectedWealth$4=z.object({socialSecurityLimit:z.number(),socialSecurityTaxRate:z.number(),medicareSupplementalTaxThreshold:z.number(),medicareSupplementalTaxRate:z.number(),savingsPerMonth:z.number(),retirementContributionPaycheck:z.number(),bonusWitholdingsRate:z.number()}),projectedWealth$3=z.object({socialSecurityLimit:z.number(),socialSecurityTaxRate:z.number(),medicareSupplementalTaxThreshold:z.number(),medicareSupplementalTaxRate:z.number(),savingsPerMonth:z.number(),retirementContributionPaycheck:z.number()}),storeValidator$7=z.object({version:z.literal(1),wealth:wealth$2,projectedIncome:projectedIncome$2,projectedWealth:projectedWealth$3}),storeValidator$6=z.object({version:z.literal(2),wealth:wealth$2,projectedIncome:projectedIncome$2,projectedWealth:projectedWealth$4}),accountDataValidator$1=z.object({date:z.string(),value:z.number()}),mortgageValidator$1=z.object({type:z.literal("mortgage"),loan:loanValidator.optional(),data:z.array(accountDataValidator$1)}),accountValidator$1=z.object({type:z.literal("account"),data:z.array(accountDataValidator$1),hidden:z.boolean().default(!1)}),mortgageValidator=z.object({type:z.literal("mortgage"),loan:loanValidator.optional(),data:z.array(accountDataValidator$1),hidden:z.boolean().default(!1)}),wealth$1=z.record(z.union([accountValidator$1,mortgageValidator])),projectedWealth$2=z.object({socialSecurityLimit:z.number(),socialSecurityTaxRate:z.number(),medicareSupplementalTaxThreshold:z.number(),medicareSupplementalTaxRate:z.number(),savingsPerPaycheck:z.number(),retirementContributionPaycheck:z.number(),bonusWithholdingsRate:z.number()}),ratings={outstanding:"OUTSTANDING",exceedsExpectations:"EXCEEDS_EXPECTATIONS",meetsExpectations:"MEETS_EXPECTATIONS",doesNotMeetExpectations:"DOES_NOT_MEET_EXPECTATIONS"},ratingsLabels={[ratings.outstanding]:"Outstanding",[ratings.exceedsExpectations]:"Exceeds Expectations",[ratings.meetsExpectations]:"Meets Expectations",[ratings.doesNotMeetExpectations]:"Does Not Meet Expectations"};ratings.exceedsExpectations+"",ratings.meetsExpectations+"",ratings.doesNotMeetExpectations+"",ratings.outstanding+"";const accountDataValidator=z.object({date:z.string(),value:z.number()}),meritData$1=z.object({date:z.string(),meritIncreasePct:z.number(),meritBonusPct:z.number(),equityPct:z.number(),rating:z.nativeEnum(ratings).optional(),enabled:z.boolean()}),getDefaultStore=__name(()=>({version:7,projectedIncome:{timeSeries:{paycheck:[],meritPct:[],companyBonusPct:[],companyBonus:[],retirementBonus:[],meritBonus:[]}},wealth:{},projectedWealth:{medicareSupplementalTaxThreshold:2e5,socialSecurityLimit:168600,socialSecurityTaxRate:.062,medicareSupplementalTaxRate:.009,savingsPerPaycheck:0,retirementContributionPaycheck:0,bonusWithholdingsRate:0}}),"getDefaultStore"),projectedIncome$1=z.object({timeSeries:z.object({paycheck:z.array(accountDataValidator),meritPct:z.array(meritData$1),companyBonusPct:z.array(accountDataValidator),companyBonus:z.array(accountDataValidator),retirementBonus:z.array(accountDataValidator),meritBonus:z.array(accountDataValidator)})}),storeValidator$5=z.object({version:z.literal(7),wealth:wealth$1,projectedIncome:projectedIncome$1,projectedWealth:projectedWealth$2}),MAX_NUM_ENTRIES=10,PAYMENTS_PER_YEAR=26,MONTHS_PER_YEAR=12,storeValidator$4=z.object({wealth:wealth$2,projectedIncome:projectedIncome$2,projectedWealth:projectedWealth$3}),accountValidator=z.object({type:z.literal("account"),data:z.array(accountDataValidator$1)}),wealth=z.record(z.union([accountValidator,mortgageValidator$1])),projectedIncome=z.object({timeSeries:z.object({paycheck:z.array(accountDataValidator$1),meritIncreasePct:z.array(accountDataValidator$1),equityPct:z.array(accountDataValidator$1),meritBonusPct:z.array(accountDataValidator$1),meritBonus:z.array(accountDataValidator$1),companyBonusPct:z.array(accountDataValidator$1),companyBonus:z.array(accountDataValidator$1),retirementBonus:z.array(accountDataValidator$1)})}),projectedWealth$1=z.object({socialSecurityLimit:z.number(),socialSecurityTaxRate:z.number(),medicareSupplementalTaxThreshold:z.number(),medicareSupplementalTaxRate:z.number(),savingsPerMonth:z.number(),retirementContributionPaycheck:z.number(),bonusWitholdingsRate:z.number()}),storeValidator$3=z.object({version:z.literal(3),wealth,projectedIncome,projectedWealth:projectedWealth$1}),projectedWealth=z.object({socialSecurityLimit:z.number(),socialSecurityTaxRate:z.number(),medicareSupplementalTaxThreshold:z.number(),medicareSupplementalTaxRate:z.number(),savingsPerMonth:z.number(),retirementContributionPaycheck:z.number(),bonusWithholdingsRate:z.number()}),storeValidator$2=z.object({version:z.literal(4),wealth,projectedIncome,projectedWealth}),storeValidator$1=z.object({version:z.literal(5),wealth:wealth$1,projectedIncome,projectedWealth}),storeValidator=z.object({version:z.literal(6),wealth:wealth$1,projectedIncome,projectedWealth:projectedWealth$2}),groupBySingle=__name((array,selector)=>{var _a;const result={};for(let i=0;i<array.length;i++)result[_a=selector(array[i])]??(result[_a]=array[i]);return result},"groupBySingle"),migration=__name(data=>{if(data==null)throw new Error("parsed data is null or undefined");if(typeof data!="object")throw new Error("Parsed data is not an object");if("version"in data||(storeValidator$4.parse(data),data.version=1),"version"in data){if(data.version===1&&(storeValidator$7.parse(data),data.version=2,data.projectedWealth.bonusWitholdingsRate=0),data.version===2&&(storeValidator$6.parse(data),data.version=3),data.version===3&&(storeValidator$3.parse(data),data.version=4,data.projectedWealth.bonusWithholdingsRate=data.projectedWealth.bonusWitholdingsRate,delete data.projectedWealth.bonusWitholdingsRate),data.version===4){storeValidator$2.parse(data),data.version=5;const keys=Object.keys(data.wealth);for(let i=0;i<keys.length;i++)data.wealth[keys[i]].hidden=!1}if(data.version===5){storeValidator$1.parse(data);const storeV5=data,storeV6=data;storeV6.version=6,storeV6.projectedWealth.savingsPerPaycheck=storeV5.projectedWealth.savingsPerMonth*(MONTHS_PER_YEAR/PAYMENTS_PER_YEAR),delete data.projectedWealth.savingsPerMonth}if(data.version===6){storeValidator.parse(data);const storeV7=data,storeV6=data;storeV7.version=7,storeV7.projectedIncome.timeSeries.meritPct=[];const{equityPct,meritBonusPct,meritIncreasePct}=storeV6.projectedIncome.timeSeries,meritBonusPctByYear=groupBySingle(meritBonusPct,x=>DateTime.fromISO(x.date).year),equityPctByYear=groupBySingle(equityPct,x=>DateTime.fromISO(x.date).year);storeV7.projectedIncome.timeSeries.meritPct=meritIncreasePct.map(x=>{var _a,_b;const year2=DateTime.fromISO(x.date).year;return{date:x.date,meritIncreasePct:x.value,equityPct:((_a=equityPctByYear[year2])==null?void 0:_a.value)??0,meritBonusPct:((_b=meritBonusPctByYear[year2])==null?void 0:_b.value)??0,enabled:!0}})}}const next=storeValidator$5.parse(data);return console.log(next),next},"migration"),jsonTryParse=__name(data=>{if(!data)return{result:data,isSuccess:!1};try{return{result:JSON.parse(data),isSuccess:!0}}catch{return{result:data,isSuccess:!1}}},"jsonTryParse"),createStore=__name((validator2,defaultValue)=>{const key="store",invalidData="store-invalid",localData=localStorage.getItem(key),{result:parsedData,isSuccess}=jsonTryParse(localData),data=isSuccess?parsedData:defaultValue;if(!validator2.safeParse(data).success)try{migration(data),localStorage.setItem(key,JSON.stringify(data))}catch(err){console.log("error",err),console.log("invalid data",data),localData!==null&&localStorage.setItem(invalidData,localData),localStorage.setItem(key,JSON.stringify(defaultValue))}const store2=new Store(data);return store2.subscribe(()=>{const current=localStorage.getItem(key);current&&localStorage.setItem(`${key}-previous`,current),localStorage.setItem(key,JSON.stringify(store2.state))}),store2},"createStore"),store=createStore(storeValidator$5,getDefaultStore()),addAccountEntry=__name((accountName,date,amount)=>{store.setState(prev=>create(prev,next=>{next.wealth[accountName].data.push({date:date.startOf("day").toString(),value:amount}),next.wealth[accountName].data.sort(sortByDate(x=>DateTime.fromISO(x.date),"asc"))}))},"addAccountEntry"),addProjectedIncome=__name((date,timeSeries,value)=>{store.setState(prev=>create(prev,next=>{next.projectedIncome.timeSeries[timeSeries]=next.projectedIncome.timeSeries[timeSeries].concat({date:date.startOf("day").toString(),value}).sort(sortByDate(x=>DateTime.fromISO(x.date),"asc"))}))},"addProjectedIncome"),addProjectedIncomeMeritPct=__name(meritDetails=>{store.setState(prev=>create(prev,next=>{next.projectedIncome.timeSeries.meritPct=next.projectedIncome.timeSeries.meritPct.concat(meritDetails).sort(sortByDate(x=>DateTime.fromISO(x.date),"asc"))}))},"addProjectedIncomeMeritPct"),hideAccount=__name(accountName=>store.setState(prev=>create(prev,next=>{next.wealth[accountName]&&(next.wealth[accountName].hidden=!0)})),"hideAccount"),removeAccount=__name(accountName=>store.setState(prev=>create(prev,next=>{delete next.wealth[accountName]})),"removeAccount"),removeAccountEntry=__name((accountName,data)=>store.setState(prev=>create(prev,next=>{var _a;const idx=(_a=prev.wealth[accountName])==null?void 0:_a.data.findIndex(x=>x===data);if(idx===void 0||idx<0)throw new Error("failed to find data");return next.wealth[accountName].data.splice(idx,1),next})),"removeAccountEntry"),removeProjectedIncome=__name((accountName,data)=>{store.setState(prev=>create(prev,next=>{var _a;const idx=(_a=prev.projectedIncome.timeSeries[accountName])==null?void 0:_a.findIndex(x=>x===data);if(idx===void 0||idx<0)throw new Error("failed to find data");next.projectedIncome.timeSeries[accountName].splice(idx,1)}))},"removeProjectedIncome"),removeProjectedIncomeMerit=__name(data=>{store.setState(prev=>create(prev,next=>{var _a;const idx=(_a=prev.projectedIncome.timeSeries.meritPct)==null?void 0:_a.findIndex(x=>x===data);if(idx===void 0||idx<0)throw new Error("failed to find data");next.projectedIncome.timeSeries.meritPct.splice(idx,1)}))},"removeProjectedIncomeMerit"),resetStore=__name(()=>store.setState(()=>getDefaultStore()),"resetStore"),setLoan=__name((accountName,loan)=>store.setState(prev=>create(prev,next=>{next.wealth[accountName].type==="mortgage"&&(next.wealth[accountName].loan=loan)})),"setLoan"),updateAccountDate=__name((accountName,data,date)=>{store.setState(prev=>create(prev,next2=>{var _a;const idx=(_a=prev.wealth[accountName])==null?void 0:_a.data.findIndex(x=>x===data);if(idx<0)throw new Error("failed to find data");next2.wealth[accountName].data[idx].date=date.toISO()}))},"updateAccountDate"),updateAccountName=__name((currentAccountName,newAccountName)=>store.setState(prev=>create(prev,next=>{next.wealth[newAccountName]=next.wealth[currentAccountName],delete next.wealth[currentAccountName]})),"updateAccountName"),updateAccountValue=__name((accountName,data,value)=>{store.setState(prev=>create(prev,next2=>{var _a;const idx=(_a=prev.wealth[accountName])==null?void 0:_a.data.findIndex(x=>x===data);if(idx<0)throw new Error("failed to find data");next2.wealth[accountName].data[idx].value=value}))},"updateAccountValue"),updateProjectedIncome=__name((timeSeries,data,value)=>{store.setState(prev=>create(prev,next2=>{const idx=prev.projectedIncome.timeSeries[timeSeries].findIndex(x=>x===data);if(idx<0)throw new Error("failed to find data");next2.projectedIncome.timeSeries[timeSeries][idx].value=value}))},"updateProjectedIncome"),updateProjectedIncomeMerit=__name((current,replacement)=>{store.setState(prev=>create(prev,next2=>{const idx=prev.projectedIncome.timeSeries.meritPct.findIndex(x=>x===current);if(idx<0)throw new Error("failed to find data");next2.projectedIncome.timeSeries.meritPct[idx]=replacement}))},"updateProjectedIncomeMerit"),NewAccount=reactExports.forwardRef(__name(function(props,ref){const $=compilerRuntimeExports.c(30),[open,setOpen]=reactExports.useState(!1),nameRef=reactExports.useRef(null),[error,setError]=reactExports.useState(!1),[accountType,setAccountType]=reactExports.useState();let t0,t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=__name(()=>{setOpen(!0),setError(!1),setAccountType(void 0)},"t0"),t1={marginTop:3},$[0]=t0,$[1]=t1):(t0=$[0],t1=$[1]);let t2;$[2]!==ref?(t2=jsx(Button,{ref,variant:"outlined",onClick:t0,sx:t1,children:"add account"}),$[2]=ref,$[3]=t2):t2=$[3];let t3,t4;$[4]===Symbol.for("react.memo_cache_sentinel")?(t3=__name(()=>setOpen(!1),"t3"),t4=jsx(DialogTitle,{children:"Add New Account"}),$[4]=t3,$[5]=t4):(t3=$[4],t4=$[5]);const t5=error?"error":"primary";let t6;$[6]===Symbol.for("react.memo_cache_sentinel")?(t6=__name(value=>{setError(!1),setAccountType(value.target.value)},"t6"),$[6]=t6):t6=$[6];let t7,t8;$[7]===Symbol.for("react.memo_cache_sentinel")?(t7=jsx(MenuItem,{value:"mortgage",children:"Mortgage"}),t8=jsx(MenuItem,{value:"account",children:"Generic Account"}),$[7]=t7,$[8]=t8):(t7=$[7],t8=$[8]);let t9;$[9]!==t5?(t9=jsxs(TextField,{select:!0,color:t5,onChange:t6,label:"Type",children:[t7,t8]}),$[9]=t5,$[10]=t9):t9=$[10];let t10;$[11]===Symbol.for("react.memo_cache_sentinel")?(t10=__name(()=>{setError(!1)},"t10"),$[11]=t10):t10=$[11];let t11;$[12]!==error?(t11=jsx(TextField,{placeholder:"Name",onChange:t10,error,inputRef:nameRef}),$[12]=error,$[13]=t11):t11=$[13];let t12;$[14]!==t11||$[15]!==t9?(t12=jsx(DialogContent,{children:jsxs(Stack,{spacing:2,margin:2,children:[t9,t11]})}),$[14]=t11,$[15]=t9,$[16]=t12):t12=$[16];let t13;$[17]!==accountType?(t13=__name(()=>{store.setState(prev=>create(prev,next=>{var _a;if(!((_a=nameRef.current)!=null&&_a.value)||!accountType||prev.wealth[nameRef.current.value]){setError(!0);return}next.wealth[nameRef.current.value]={type:accountType,data:[],hidden:!1},setOpen(!1)}))},"t13"),$[17]=accountType,$[18]=t13):t13=$[18];let t14;$[19]!==error||$[20]!==t13?(t14=jsx(DialogActions,{children:jsx(Button,{disabled:error,onClick:t13,children:"Add"})}),$[19]=error,$[20]=t13,$[21]=t14):t14=$[21];let t15;$[22]!==open||$[23]!==t12||$[24]!==t14?(t15=jsxs(Dialog,{open,onClose:t3,children:[t4,t12,t14]}),$[22]=open,$[23]=t12,$[24]=t14,$[25]=t15):t15=$[25];const t16=props==null?void 0:props.children;let t17;return $[26]!==t15||$[27]!==t16||$[28]!==t2?(t17=jsxs(Fragment,{children:[t2,t15,t16]}),$[26]=t15,$[27]=t16,$[28]=t2,$[29]=t17):t17=$[29],t17},"NewAccount2")),myTheme=themeQuartz.withParams({backgroundColor:"#1f2836",browserColorScheme:"dark",chromeBackgroundColor:{ref:"foregroundColor",mix:.07,onto:"backgroundColor"},foregroundColor:"#FFF",headerFontSize:14}),AgGrid=__name(props=>{const $=compilerRuntimeExports.c(9);let id,rest;$[0]!==props?({id,...rest}=props,$[0]=props,$[1]=id,$[2]=rest):(id=$[1],rest=$[2]);let t0;$[3]===Symbol.for("react.memo_cache_sentinel")?(t0={height:"100%"},$[3]=t0):t0=$[3];let t1;$[4]!==rest?(t1=jsx(AgGridReact,{...rest,theme:myTheme,suppressMovableColumns:!0}),$[4]=rest,$[5]=t1):t1=$[5];let t2;return $[6]!==id||$[7]!==t1?(t2=jsx("div",{id,style:t0,children:t1}),$[6]=id,$[7]=t1,$[8]=t2):t2=$[8],t2},"AgGrid"),getLocalDateTime=__name(()=>DateTime.local(),"getLocalDateTime"),useLocalDateTime=__name(()=>DateTime.local(),"useLocalDateTime"),shortDate="yyyy-MM-dd",monthDay="MMM dd",formatCashShort=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:0,minimumSignificantDigits:3,maximumSignificantDigits:3}).format,formatCash=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format,format=__name((value,compact,fallback)=>value===void 0?fallback:compact?formatCashShort(value):formatCash(value),"format"),Cash=__name(t0=>{const $=compilerRuntimeExports.c(16),{value,fallback,disableTooltip,compact:t1,tooltip,placement}=t0,compact=t1===void 0?!0:t1;let t2;$[0]!==compact||$[1]!==fallback||$[2]!==value?(t2=format(value,compact,fallback),$[0]=compact,$[1]=fallback,$[2]=value,$[3]=t2):t2=$[3];const formatted=t2,t3=disableTooltip||!compact||!value;let t4;$[4]!==value?(t4=formatCash(value),$[4]=value,$[5]=t4):t4=$[5];let t5;$[6]!==t4||$[7]!==tooltip?(t5=[tooltip,t4],$[6]=t4,$[7]=tooltip,$[8]=t5):t5=$[8];const t6=t5.join(" ");let t7;$[9]!==formatted?(t7=jsx("span",{children:formatted}),$[9]=formatted,$[10]=t7):t7=$[10];let t8;return $[11]!==placement||$[12]!==t3||$[13]!==t6||$[14]!==t7?(t8=jsx(Tooltip,{placement,disableHoverListener:t3,title:t6,children:t7}),$[11]=placement,$[12]=t3,$[13]=t6,$[14]=t7,$[15]=t8):t8=$[15],t8},"Cash"),createAccountColumnConfig$2=__name(accountName=>[{headerName:"Date",sort:"desc",valueFormatter:__name(x=>{var _a;return(_a=x.value)==null?void 0:_a.toFormat(shortDate)},"valueFormatter"),valueGetter:__name(x=>x.data&&DateTime.fromISO(x.data.date),"valueGetter"),cellEditor:"agDateCellEditor",editable:!0,valueSetter:__name(x=>{const date=DateTime.fromJSDate(x.newValue);return date.isValid&&updateAccountDate(accountName,x.data,date),date.isValid},"valueSetter")},{headerName:"Value",valueGetter:__name(x=>{var _a;return(_a=x.data)==null?void 0:_a.value},"valueGetter"),valueSetter:__name(x=>(updateAccountValue(accountName,x.data,+x.newValue),!0),"valueSetter"),cellRenderer:__name(x=>jsx(Cash,{value:x.value,placement:"left"}),"cellRenderer"),editable:!0,cellEditor:"agNumberCellEditor",type:"numericColumn"},{cellStyle:__name(()=>({display:"inline-flex",padding:"0px"}),"cellStyle"),sortable:!1,headerName:"",width:80,colId:"actions",cellRenderer:__name(props=>jsx(Button,{onClick:__name(()=>{props.data&&removeAccountEntry(accountName,props.data)},"onClick"),color:"error",fullWidth:!0,children:jsx(DeleteForever,{})}),"cellRenderer")}],"createAccountColumnConfig$2"),hasJanFistEntry=__name((x,year2)=>{const date=DateTime.fromISO(x.date),janFirst=DateTime.fromObject({day:1,month:1,year:+year2});return date.diff(janFirst,["days","hours"]).days==0},"hasJanFistEntry"),useMissingYears=__name(account=>{const accountItemsByYear=Object.groupBy(account.data,x=>DateTime.fromISO(x.date).year);if(account.data.length===0)return[];const years=Object.entries(accountItemsByYear).filter(([year2,entries])=>!!(entries!=null&&entries.find(entry=>hasJanFistEntry(entry,+year2)))).map(([year2])=>+year2).sort(),lookup=new Set(years),missing=[];for(let i=years[0];i<=years[years.length-1];i++)!lookup.has(i)&&missing.push(i);return missing},"useMissingYears"),ConfirmDialog=__name(props=>{const $=compilerRuntimeExports.c(17),{onConfirm,title,children}=props,[isOpen,setIsOpen]=reactExports.useState(!1);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=__name(()=>setIsOpen(!0),"t0"),$[0]=t0):t0=$[0];let t1;$[1]!==children?(t1=jsx("div",{onClick:t0,children}),$[1]=children,$[2]=t1):t1=$[2];let t2;$[3]===Symbol.for("react.memo_cache_sentinel")?(t2=__name(()=>setIsOpen(!1),"t2"),$[3]=t2):t2=$[3];let t3;$[4]===Symbol.for("react.memo_cache_sentinel")?(t3={minWidth:300,display:"flex",justifyContent:"center"},$[4]=t3):t3=$[4];let t4;$[5]!==title?(t4=jsx(DialogTitle,{sx:t3,children:title}),$[5]=title,$[6]=t4):t4=$[6];let t5;$[7]===Symbol.for("react.memo_cache_sentinel")?(t5=jsx(Button,{sx:{marginRight:"auto"},onClick:__name(()=>setIsOpen(!1),"onClick"),children:"Cancel"}),$[7]=t5):t5=$[7];let t6;$[8]!==onConfirm?(t6=jsxs(DialogActions,{children:[t5,jsx(Button,{variant:"contained",color:"error",onClick:__name(()=>{onConfirm==null||onConfirm(),setIsOpen(!1)},"onClick"),children:"Confirm"})]}),$[8]=onConfirm,$[9]=t6):t6=$[9];let t7;$[10]!==isOpen||$[11]!==t4||$[12]!==t6?(t7=jsxs(Dialog,{open:isOpen,onClose:t2,children:[t4,t6]}),$[10]=isOpen,$[11]=t4,$[12]=t6,$[13]=t7):t7=$[13];let t8;return $[14]!==t1||$[15]!==t7?(t8=jsxs(Fragment,{children:[t1,t7]}),$[14]=t1,$[15]=t7,$[16]=t8):t8=$[16],t8},"ConfirmDialog"),AccountSettings$1=__name(props=>{const $=compilerRuntimeExports.c(41),{accountName}=props,[nextAccountName,setNextAccountName]=reactExports.useState(accountName),[isOpen,setIsOpen]=reactExports.useState(!1);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=jsx(IconButton,{onClick:__name(()=>setIsOpen(!0),"onClick"),children:jsx(SettingsIcon,{})}),$[0]=t0):t0=$[0];let t1;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1=__name(()=>setIsOpen(!1),"t1"),$[1]=t1):t1=$[1];let t2;$[2]!==accountName?(t2=jsxs(Typography,{variant:"h6",children:[accountName," Settings"]}),$[2]=accountName,$[3]=t2):t2=$[3];let t3;$[4]===Symbol.for("react.memo_cache_sentinel")?(t3=jsx(IconButton,{onClick:__name(()=>setIsOpen(!1),"onClick"),children:jsx(CloseIcon,{})}),$[4]=t3):t3=$[4];let t4;$[5]!==t2?(t4=jsx(DialogTitle,{children:jsxs(Stack,{direction:"row",width:"100%",alignItems:"center","justify-content":"space-between",children:[t2,t3]})}),$[5]=t2,$[6]=t4):t4=$[6];let t5;$[7]===Symbol.for("react.memo_cache_sentinel")?(t5=__name(event=>setNextAccountName(event.target.value),"t5"),$[7]=t5):t5=$[7];let t6;$[8]!==nextAccountName?(t6=jsx(DialogContent,{children:jsx(Stack,{spacing:1,marginTop:1,children:jsx(TextField,{label:"Account Name",value:nextAccountName,onChange:t5,placeholder:""})})}),$[8]=nextAccountName,$[9]=t6):t6=$[9];let t7;$[10]!==accountName?(t7=__name(()=>{removeAccount(accountName),setIsOpen(!1)},"t7"),$[10]=accountName,$[11]=t7):t7=$[11];const t8=`Confirm Deleting ${accountName} Account`;let t9;$[12]===Symbol.for("react.memo_cache_sentinel")?(t9=jsx(Button,{color:"error",children:"Delete Account"}),$[12]=t9):t9=$[12];let t10;$[13]!==t7||$[14]!==t8?(t10=jsx(ConfirmDialog,{onConfirm:t7,title:t8,children:t9}),$[13]=t7,$[14]=t8,$[15]=t10):t10=$[15];let t11;$[16]!==accountName?(t11=__name(()=>{hideAccount(accountName),setIsOpen(!1)},"t11"),$[16]=accountName,$[17]=t11):t11=$[17];const t12=`Confirm Hiding ${accountName} Account`;let t13;$[18]===Symbol.for("react.memo_cache_sentinel")?(t13=jsx(Button,{sx:{marginRight:10},color:"error",children:"Hide Account"}),$[18]=t13):t13=$[18];let t14;$[19]!==t11||$[20]!==t12?(t14=jsx(ConfirmDialog,{onConfirm:t11,title:t12,children:t13}),$[19]=t11,$[20]=t12,$[21]=t14):t14=$[21];const t15=!nextAccountName;let t16;$[22]===Symbol.for("react.memo_cache_sentinel")?(t16=__name(()=>{setIsOpen(!1)},"t16"),$[22]=t16):t16=$[22];let t17;$[23]!==t15?(t17=jsx(Button,{disabled:t15,onClick:t16,children:"Cancel"}),$[23]=t15,$[24]=t17):t17=$[24];const t18=!nextAccountName;let t19;$[25]!==accountName||$[26]!==nextAccountName?(t19=__name(()=>{accountName!=nextAccountName&&updateAccountName(accountName,nextAccountName),setIsOpen(!1)},"t19"),$[25]=accountName,$[26]=nextAccountName,$[27]=t19):t19=$[27];let t20;$[28]!==t18||$[29]!==t19?(t20=jsx(Button,{disabled:t18,onClick:t19,children:"Save"}),$[28]=t18,$[29]=t19,$[30]=t20):t20=$[30];let t21;$[31]!==t10||$[32]!==t14||$[33]!==t17||$[34]!==t20?(t21=jsxs(DialogActions,{children:[t10,t14,t17,t20]}),$[31]=t10,$[32]=t14,$[33]=t17,$[34]=t20,$[35]=t21):t21=$[35];let t22;return $[36]!==isOpen||$[37]!==t21||$[38]!==t4||$[39]!==t6?(t22=jsxs(Fragment,{children:[t0,jsxs(Dialog,{open:isOpen,onClose:t1,children:[t4,t6,t21]})]}),$[36]=isOpen,$[37]=t21,$[38]=t4,$[39]=t6,$[40]=t22):t22=$[40],t22},"AccountSettings$1"),AccountTab=__name(props=>{var _a;const $=compilerRuntimeExports.c(42),{accountName}=props;let t0;$[0]!==accountName?(t0=__name(state=>state.wealth[accountName],"t0"),$[0]=accountName,$[1]=t0):t0=$[1];const account=useStore(store,t0);let t1;$[2]===Symbol.for("react.memo_cache_sentinel")?(t1=getLocalDateTime(),$[2]=t1):t1=$[2];const[date,setDate]=reactExports.useState(t1),[amount,setAmount]=reactExports.useState(null),missingYears=useMissingYears(account),hasSameDate=!!((_a=account==null?void 0:account.data)!=null&&_a.find(x=>date.hasSame(DateTime.fromISO(x.date),"day")));let t2;$[3]!==accountName?(t2=createAccountColumnConfig$2(accountName),$[3]=accountName,$[4]=t2):t2=$[4];const accountColumnConfig=t2;let t3;$[5]!==accountName||$[6]!==amount||$[7]!==date?(t3=__name(()=>{amount!=null&&(addAccountEntry(accountName,date,amount),setAmount(null))},"t3"),$[5]=accountName,$[6]=amount,$[7]=date,$[8]=t3):t3=$[8];const onAddEntry=t3;let t4;$[9]!==accountName?(t4=jsx(Typography,{variant:"h5",children:accountName}),$[9]=accountName,$[10]=t4):t4=$[10];let t5;$[11]===Symbol.for("react.memo_cache_sentinel")?(t5={marginLeft:"auto"},$[11]=t5):t5=$[11];let t6;$[12]!==accountName?(t6=jsx(Box,{sx:t5,children:jsx(AccountSettings$1,{accountName},accountName)}),$[12]=accountName,$[13]=t6):t6=$[13];let t7;$[14]!==t4||$[15]!==t6?(t7=jsxs(Stack,{direction:"row",children:[t4,t6]}),$[14]=t4,$[15]=t6,$[16]=t7):t7=$[16];let t8;$[17]!==missingYears?(t8=missingYears.length>0&&jsx(Paper,{elevation:3,children:jsxs(Alert,{severity:"warning",children:["Ensure an entry for Jan 1st for ",missingYears.join(", ")]})}),$[17]=missingYears,$[18]=t8):t8=$[18];let t9;$[19]===Symbol.for("react.memo_cache_sentinel")?(t9={color:"white"},$[19]=t9):t9=$[19];let t10;$[20]===Symbol.for("react.memo_cache_sentinel")?(t10=__name(value=>value&&setDate(value),"t10"),$[20]=t10):t10=$[20];let t11;$[21]!==date?(t11=jsx(DatePicker,{format:shortDate,sx:t9,label:"Date",defaultValue:date,onChange:t10,disableFuture:!0}),$[21]=date,$[22]=t11):t11=$[22];const t12=amount??"";let t13,t14;$[23]===Symbol.for("react.memo_cache_sentinel")?(t13=__name(event=>event.target.value===""?setAmount(null):setAmount(+event.target.value),"t13"),t14={input:{startAdornment:jsx(InputAdornment,{position:"start",children:"$"})}},$[23]=t13,$[24]=t14):(t13=$[23],t14=$[24]);let t15;$[25]!==t12?(t15=jsx(TextField,{label:"amount",value:t12,type:"number",onChange:t13,slotProps:t14,placeholder:"0"}),$[25]=t12,$[26]=t15):t15=$[26];const t16=amount===null||!date||hasSameDate;let t17;$[27]!==onAddEntry||$[28]!==t16?(t17=jsx(Button,{disabled:t16,onClick:onAddEntry,children:"Add Entry"}),$[27]=onAddEntry,$[28]=t16,$[29]=t17):t17=$[29];const t18=account+"-history";let t19;$[30]===Symbol.for("react.memo_cache_sentinel")?(t19={type:"fitGridWidth"},$[30]=t19):t19=$[30];let t20;$[31]!==account.data||$[32]!==accountColumnConfig||$[33]!==t18?(t20=jsx(AgGrid,{rowData:account.data,columnDefs:accountColumnConfig,id:t18,autoSizeStrategy:t19,onRowDataUpdated:_temp$p,stopEditingWhenCellsLoseFocus:!0}),$[31]=account.data,$[32]=accountColumnConfig,$[33]=t18,$[34]=t20):t20=$[34];let t21;return $[35]!==t11||$[36]!==t15||$[37]!==t17||$[38]!==t20||$[39]!==t7||$[40]!==t8?(t21=jsxs(Stack,{height:"100%",spacing:2,children:[t7,t8,t11,t15,t17,t20]}),$[35]=t11,$[36]=t15,$[37]=t17,$[38]=t20,$[39]=t7,$[40]=t8,$[41]=t21):t21=$[41],t21},"AccountTab");function _temp$p(x_0){return x_0.api.sizeColumnsToFit()}__name(_temp$p,"_temp$p");const findNearestOnOrBefore=__name((date,data)=>data.find((x,idx,array)=>{if(idx==0&&DateTime.fromISO(x.date).startOf("day")>=date||idx<array.length-1&&DateTime.fromISO(x.date).startOf("day")<=date&&DateTime.fromISO(data[idx+1].date).startOf("day")>date||idx===array.length-1)return!0}),"findNearestOnOrBefore"),findNearestIdxOnOrBefore=__name((date,data,selector)=>data.findIndex((x,idx,array)=>{if(idx==0&&selector(x)>=date||idx<array.length-1&&selector(x)<=date&&selector(data[idx+1])>date||idx===array.length-1)return!0}),"findNearestIdxOnOrBefore"),calcLoanBalance=__name((date,loan)=>{const{firstPaymentDate,paymentsPerYear,principal,ratePct:rate,payment:monthlyPayment}=loan,annualizedRate=rate/paymentsPerYear,periods=date.diff(DateTime.fromISO(firstPaymentDate),"months").months,totalRate=(1+annualizedRate)**periods;return principal*totalRate-monthlyPayment/annualizedRate*(totalRate-1)},"calcLoanBalance"),calcEquity=__name((ownershipPct,houseValue,loanBalance,principal)=>houseValue?houseValue*ownershipPct-loanBalance:principal-loanBalance,"calcEquity"),useGraphDates=__name(accounts=>[...new Set(accounts.flatMap(x=>x.data.map(x2=>DateTime.fromISO(x2.date).startOf("day").toISO())))].map(x=>DateTime.fromISO(x)).sort((a,b)=>a.toMillis()-b.toMillis()),"useGraphDates"),AddEntry=__name(props=>{var _a;const $=compilerRuntimeExports.c(21),{accountName}=props;let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=getLocalDateTime(),$[0]=t0):t0=$[0];const[date,setDate]=reactExports.useState(t0),[amount,setAmount]=reactExports.useState(null);let t1;$[1]!==accountName?(t1=__name(state=>state.wealth[accountName],"t1"),$[1]=accountName,$[2]=t1):t1=$[2];const account=useStore(store,t1),hasSameDate=!!((_a=account==null?void 0:account.data)!=null&&_a.find(x=>date==null?void 0:date.hasSame(DateTime.fromISO(x.date),"day")));let t2;$[3]!==accountName||$[4]!==amount||$[5]!==date?(t2=__name(()=>{date!=null&&amount!=null&&(addAccountEntry(accountName,date,amount),setAmount(null))},"t2"),$[3]=accountName,$[4]=amount,$[5]=date,$[6]=t2):t2=$[6];const onAddEntry=t2;let t3;$[7]===Symbol.for("react.memo_cache_sentinel")?(t3=__name(date_0=>{date_0&&setDate(date_0)},"t3"),$[7]=t3):t3=$[7];let t4;$[8]!==date?(t4=jsx(DatePicker,{value:date,onChange:t3,disableFuture:!0}),$[8]=date,$[9]=t4):t4=$[9];const t5=amount??"";let t6,t7;$[10]===Symbol.for("react.memo_cache_sentinel")?(t6=__name(event=>event.target.value===""?setAmount(null):setAmount(+event.target.value),"t6"),t7={input:{startAdornment:jsx(InputAdornment,{position:"start",children:"$"})}},$[10]=t6,$[11]=t7):(t6=$[10],t7=$[11]);let t8;$[12]!==t5?(t8=jsx(TextField,{label:"amount",value:t5,type:"number",onChange:t6,slotProps:t7,placeholder:"0"}),$[12]=t5,$[13]=t8):t8=$[13];const t9=amount===null||!date||hasSameDate;let t10;$[14]!==onAddEntry||$[15]!==t9?(t10=jsx(Button,{disabled:t9,onClick:onAddEntry,children:"Add Home Value"}),$[14]=onAddEntry,$[15]=t9,$[16]=t10):t10=$[16];let t11;return $[17]!==t10||$[18]!==t4||$[19]!==t8?(t11=jsxs(Stack$1,{spacing:2,children:[t4,t8,t10]}),$[17]=t10,$[18]=t4,$[19]=t8,$[20]=t11):t11=$[20],t11},"AddEntry"),createAccountColumnConfig$1=__name(accountName=>[{cellEditor:"agDateCellEditor",editable:!0,headerName:"Date",sort:"desc",valueFormatter:__name(x=>{var _a;return(_a=x.value)==null?void 0:_a.toFormat(shortDate)},"valueFormatter"),valueGetter:__name(x=>x.data&&DateTime.fromISO(x.data.date),"valueGetter"),valueSetter:__name(x=>{const date=DateTime.fromJSDate(x.newValue);return date.isValid&&updateAccountDate(accountName,x.data,date),date.isValid},"valueSetter")},{editable:!0,cellEditor:"agNumberCellEditor",headerName:"Home Value",cellRenderer:__name(x=>jsx(Cash,{value:x.value,placement:"left"}),"cellRenderer"),valueGetter:__name(x=>{var _a;return(_a=x.data)==null?void 0:_a.value},"valueGetter"),type:"numericColumn",valueSetter:__name(x=>(updateAccountValue(accountName,x.data,+x.newValue),!0),"valueSetter")},{cellStyle:__name(()=>({display:"inline-flex",padding:"0px"}),"cellStyle"),headerName:"",width:80,sortable:!1,colId:"actions",cellRenderer:__name(props=>jsx(Button,{onClick:__name(()=>{props.data&&removeAccountEntry(accountName,props.data)},"onClick"),color:"error",fullWidth:!0,children:jsx(DeleteForever,{})}),"cellRenderer")}],"createAccountColumnConfig$1"),mortgageColumnConfig=[{headerName:"Date",sort:"desc",valueFormatter:__name(x=>{var _a;return(_a=x.value)==null?void 0:_a.toFormat(shortDate)},"valueFormatter"),valueGetter:__name(x=>{var _a;return(_a=x.data)==null?void 0:_a.date},"valueGetter")},{headerName:"Loan Balance",valueGetter:__name(x=>{var _a;return(_a=x.data)==null?void 0:_a.balance.toFixed(2)},"valueGetter"),cellRenderer:__name(x=>jsx(Cash,{value:x.value,placement:"left"}),"cellRenderer"),type:"numericColumn"},{headerName:"Equity",valueGetter:__name(x=>{var _a;return(_a=x.data)==null?void 0:_a.equity.toFixed(2)},"valueGetter"),cellRenderer:__name(x=>jsx(Cash,{value:x.value,placement:"left"}),"cellRenderer"),type:"numericColumn"}],convertPct=__name(value=>value>1?value/100:value,"convertPct"),validator=z.object({principal:z.number().min(0),ratePct:z.number().min(0),paymentsPerYear:z.number().min(0),payment:z.number().min(0),firstPaymentDate:z.string().datetime({offset:!0}),ownershipPct:z.number().min(0)}),AccountSettings=__name(props=>{var _a;const{accountName}=props,[nextAccountName,setNextAccountName]=reactExports.useState(accountName),loan=useStore(store,x=>{const account=x.wealth[accountName];if("loan"in account)return account.loan}),ref=reactExports.useRef(loan??{}),[error,setError]=reactExports.useState({}),[isOpen,setIsOpen]=reactExports.useState(!1),handleClose=__name(()=>{setError({}),ref.current=loan??{},setIsOpen(!1)},"handleClose");return jsxs(Fragment,{children:[jsx(IconButton,{onClick:__name(()=>setIsOpen(!0),"onClick"),children:jsx(SettingsIcon,{})}),jsxs(Dialog,{open:isOpen,onClose:handleClose,children:[jsx(DialogTitle,{sx:{width:"100%"},children:jsxs(Box,{display:"flex",width:"100%",alignItems:"center",sx:{justifyContent:"space-between"},children:[jsxs(Typography,{variant:"h6",children:[accountName," Settings"]}),jsx(IconButton,{sx:{marginLeft:"auto"},onClick:handleClose,children:jsx(CloseIcon,{})})]})}),jsx(DialogContent,{children:jsxs(Stack,{spacing:2,marginTop:1,children:[jsx(TextField,{label:"Account Name",value:nextAccountName,onChange:__name(event=>setNextAccountName(event.target.value),"onChange"),placeholder:""}),jsx(DatePicker,{defaultValue:(_a=ref.current)!=null&&_a.firstPaymentDate?DateTime.fromISO(ref.current.firstPaymentDate):null,label:"First Payment",slotProps:{textField:{error:!!error.firstPaymentDate}},onChange:__name(value=>{value&&(ref.current.firstPaymentDate=value.startOf("day").toISO())},"onChange")}),jsx(TextField,{error:!!error.principal,defaultValue:loan==null?void 0:loan.principal,onChange:__name(event_0=>{ref.current.principal=+event_0.target.value},"onChange"),variant:"outlined",label:"Principal",type:"number"}),jsx(TextField,{error:!!error.ratePct,defaultValue:((loan==null?void 0:loan.ratePct)??0)*100,onChange:__name(event_1=>{ref.current.ratePct=convertPct(+event_1.target.value)},"onChange"),variant:"outlined",label:"Rate (%)",type:"number"}),jsx(TextField,{error:!!error.paymentsPerYear,defaultValue:loan==null?void 0:loan.paymentsPerYear,onChange:__name(event_2=>{ref.current.paymentsPerYear=+event_2.target.value},"onChange"),variant:"outlined",label:"Payments Per Year",type:"number"}),jsx(TextField,{defaultValue:loan==null?void 0:loan.payment,error:!!error.payment,onChange:__name(event_3=>{ref.current.payment=+event_3.target.value},"onChange"),variant:"outlined",label:"Payment",type:"number"}),jsx(TextField,{defaultValue:loan==null?void 0:loan.ownershipPct,error:!!error.ownershipPct,onChange:__name(event_4=>{ref.current.ownershipPct=convertPct(+event_4.target.value)},"onChange"),variant:"outlined",label:"Ownership (%)",type:"number"})]})}),jsxs(DialogActions,{children:[jsx(ConfirmDialog,{onConfirm:__name(()=>{removeAccount(accountName),setIsOpen(!1)},"onConfirm"),title:`Confirm Deleting ${accountName} Mortgage`,children:jsx(Button,{color:"error",children:"Delete Account"})}),jsx(ConfirmDialog,{onConfirm:__name(()=>{hideAccount(accountName),setIsOpen(!1)},"onConfirm"),title:`Confirm Hiding ${accountName} Account`,children:jsx(Button,{sx:{marginRight:10},color:"error",children:"Hide Account"})}),jsx(Button,{disabled:!nextAccountName,onClick:handleClose,children:"Cancel"}),jsx(Button,{disabled:!nextAccountName,onClick:__name(()=>{const parsed=validator.safeParse(ref.current);if(parsed.success)accountName!=nextAccountName&&updateAccountName(accountName,nextAccountName),setLoan(accountName,parsed.data),handleClose();else{const issues=Object.groupBy(parsed.error.issues,x_0=>x_0.path.join(""));setError(issues)}},"onClick"),children:"Save"})]})]})]})},"AccountSettings");function createLoanValueGetter(account){return date=>{var _a;const loanBalance=calcLoanBalance(date,account.loan);return{date,balance:loanBalance,equity:calcEquity(account.loan.ownershipPct,(_a=findNearestOnOrBefore(date,account.data))==null?void 0:_a.value,loanBalance,account.loan.principal)}}}__name(createLoanValueGetter,"createLoanValueGetter");const MortgageTab=__name(props=>{const $=compilerRuntimeExports.c(35),{accountName}=props;let t0;$[0]!==accountName?(t0=__name(state=>state.wealth[accountName],"t0"),$[0]=accountName,$[1]=t0):t0=$[1];const account=useStore(store,t0),allAccounts=useStore(store,_temp$o);let t1;$[2]!==accountName?(t1=createAccountColumnConfig$1(accountName),$[2]=accountName,$[3]=t1):t1=$[3];const accountColumnConfig=t1;let t2;$[4]!==allAccounts?(t2=Object.values(allAccounts),$[4]=allAccounts,$[5]=t2):t2=$[5];const dates=useGraphDates(t2);let t3;$[6]!==account||$[7]!==dates?(t3=account.loan?dates.map(createLoanValueGetter(account)):[],$[6]=account,$[7]=dates,$[8]=t3):t3=$[8];const mortgageData=t3;let t4;$[9]!==accountName?(t4=jsx(Typography,{variant:"h5",children:accountName}),$[9]=accountName,$[10]=t4):t4=$[10];let t5;$[11]===Symbol.for("react.memo_cache_sentinel")?(t5={marginLeft:"auto"},$[11]=t5):t5=$[11];let t6;$[12]!==accountName?(t6=jsx(Box$1,{sx:t5,children:jsx(AccountSettings,{accountName},accountName)}),$[12]=accountName,$[13]=t6):t6=$[13];let t7;$[14]!==t4||$[15]!==t6?(t7=jsxs(Stack$1,{direction:"row",children:[t4,t6]}),$[14]=t4,$[15]=t6,$[16]=t7):t7=$[16];let t8;$[17]!==accountName?(t8=jsx(AddEntry,{accountName}),$[17]=accountName,$[18]=t8):t8=$[18];let t9;$[19]!==account.data?(t9=(account==null?void 0:account.data)??[],$[19]=account.data,$[20]=t9):t9=$[20];const t10=account+"-history";let t11;$[21]===Symbol.for("react.memo_cache_sentinel")?(t11={type:"fitGridWidth"},$[21]=t11):t11=$[21];let t12;$[22]!==accountColumnConfig||$[23]!==t10||$[24]!==t9?(t12=jsx(AgGrid,{rowData:t9,columnDefs:accountColumnConfig,id:t10,autoSizeStrategy:t11}),$[22]=accountColumnConfig,$[23]=t10,$[24]=t9,$[25]=t12):t12=$[25];const t13=account+"-history";let t14;$[26]===Symbol.for("react.memo_cache_sentinel")?(t14={type:"fitGridWidth"},$[26]=t14):t14=$[26];let t15;$[27]!==mortgageData||$[28]!==t13?(t15=jsx(AgGrid,{rowData:mortgageData,columnDefs:mortgageColumnConfig,id:t13,autoSizeStrategy:t14}),$[27]=mortgageData,$[28]=t13,$[29]=t15):t15=$[29];let t16;return $[30]!==t12||$[31]!==t15||$[32]!==t7||$[33]!==t8?(t16=jsxs(Stack$1,{height:"100%",spacing:2,children:[t7,t8,t12,t15]}),$[30]=t12,$[31]=t15,$[32]=t7,$[33]=t8,$[34]=t16):t16=$[34],t16},"MortgageTab");function _temp$o(x){return x.wealth}__name(_temp$o,"_temp$o");const AccountTabs=__name(()=>{var _a,_b,_c;const $=compilerRuntimeExports.c(21),accounts=useStore(store,_temp$n);let t0;$[0]!==accounts?(t0=((_a=Object.keys(accounts))==null?void 0:_a[0])??0,$[0]=accounts,$[1]=t0):t0=$[1];const firstAccount=t0,[account,setAccount]=reactExports.useState(firstAccount);let t1,t2;$[2]!==account||$[3]!==accounts?(t1=__name(()=>{accounts[account]||setAccount(0)},"t1"),t2=[account,accounts],$[2]=account,$[3]=accounts,$[4]=t1,$[5]=t2):(t1=$[4],t2=$[5]),reactExports.useEffect(t1,t2);let t3;$[6]===Symbol.for("react.memo_cache_sentinel")?(t3=__name((_,value)=>{setAccount(value)},"t3"),$[6]=t3):t3=$[6];let t4;$[7]!==accounts?(t4=Object.entries(accounts).filter(_temp2$g).map(_temp3$d),$[7]=accounts,$[8]=t4):t4=$[8];let t5;$[9]===Symbol.for("react.memo_cache_sentinel")?(t5=jsx(Tab,{component:NewAccount}),$[9]=t5):t5=$[9];let t6;$[10]!==account||$[11]!==t4?(t6=jsx(Box,{display:"flex",flexDirection:"column",flex:"0 1 auto",children:jsxs(Tabs,{orientation:"vertical",value:account,onChange:t3,children:[t4,t5]})}),$[10]=account,$[11]=t4,$[12]=t6):t6=$[12];let t7;$[13]!==account||$[14]!==accounts?(t7=typeof account=="string"&&jsxs(Fragment,{children:[((_b=accounts[account])==null?void 0:_b.type)==="account"&&jsx(AccountTab,{accountName:account}),((_c=accounts[account])==null?void 0:_c.type)==="mortgage"&&jsx(MortgageTab,{accountName:account})]}),$[13]=account,$[14]=accounts,$[15]=t7):t7=$[15];let t8;$[16]!==t7?(t8=jsx(Box,{flex:"1 1 auto",overflow:"auto",children:t7}),$[16]=t7,$[17]=t8):t8=$[17];let t9;return $[18]!==t6||$[19]!==t8?(t9=jsxs(Box,{display:"flex",width:"100%",height:"100%",gap:2,children:[t6,t8]}),$[18]=t6,$[19]=t8,$[20]=t9):t9=$[20],t9},"AccountTabs");function _temp$n(x){return x.wealth}__name(_temp$n,"_temp$n");function _temp2$g(t0){const[,data]=t0;return!data.hidden}__name(_temp2$g,"_temp2$g");function _temp3$d(t0){const[account_0]=t0;return jsx(Tab,{value:account_0,label:account_0},account_0)}__name(_temp3$d,"_temp3$d");const useEarliestAccountEntry=__name(()=>{const $=compilerRuntimeExports.c(2),accounts=useStore(store,_temp$m);let t0;return $[0]!==accounts?(t0=DateTime.fromMillis(Object.values(accounts).map(_temp2$f).reduce(_temp3$c,getLocalDateTime().toMillis())),$[0]=accounts,$[1]=t0):t0=$[1],t0},"useEarliestAccountEntry");function _temp$m(x){return x.wealth}__name(_temp$m,"_temp$m");function _temp2$f(x_0){var _a;return x_0.type==="account"&&(_a=x_0.data[0])!=null&&_a.date?DateTime.fromISO(x_0.data[0].date):getLocalDateTime()}__name(_temp2$f,"_temp2$f");function _temp3$c(acc,curr){return Math.min(acc,(curr==null?void 0:curr.toMillis())??1/0)}__name(_temp3$c,"_temp3$c");const getMortgageValue=__name((date,mortgage)=>{if(!mortgage.loan)return 0;const entry=findNearestOnOrBefore(date,mortgage.data);if(entry!=null&&entry.date&&mortgage.data[0]===entry&&DateTime.fromISO(entry.date).startOf("day")>date)return 0;const{ownershipPct,principal}=mortgage.loan,balance=calcLoanBalance(date,mortgage.loan);return calcEquity(ownershipPct,entry==null?void 0:entry.value,balance,principal)},"getMortgageValue"),getAccountValue=__name((date,account)=>{const entry=findNearestOnOrBefore(date,account.data);return entry!=null&&entry.date&&account.data[0]===entry&&DateTime.fromISO(entry.date).startOf("day")>date?0:entry==null?void 0:entry.value},"getAccountValue"),getGraphValue=__name((date,account)=>{switch(account.type){case"account":return getAccountValue(date,account);case"mortgage":return getMortgageValue(date,account)}},"getGraphValue"),useGraphData=__name(()=>{const $=compilerRuntimeExports.c(5),wealth2=useStore(store,_temp$l);let t0;$[0]!==wealth2?(t0=Object.values(wealth2),$[0]=wealth2,$[1]=t0):t0=$[1];const dates=useGraphDates(t0);let t1;if($[2]!==dates||$[3]!==wealth2){const accounts=Object.entries(wealth2),graphData=dates.map(date=>accounts.reduce((acc,t2)=>{const[accountName,account]=t2,value=getGraphValue(date,account);return value?(acc[accountName]=value,acc.total=acc.total+value):acc[accountName]=null,acc.date=date.toJSDate(),acc},{total:0}));graphData.forEach(_temp2$e);const firstNonZero=graphData.findIndex(_temp3$b);t1=graphData.slice(firstNonZero),$[2]=dates,$[3]=wealth2,$[4]=t1}else t1=$[4];return t1},"useGraphData");function _temp$l(x){return x.wealth}__name(_temp$l,"_temp$l");function _temp2$e(graphEntry,index,arr){index<arr.length-1&&Object.keys(graphEntry).forEach(key=>{graphEntry[key]===null&&arr[index+1][key]!==null&&(graphEntry[key]=0)})}__name(_temp2$e,"_temp2$e");function _temp3$b(x_0){return x_0.total>0}__name(_temp3$b,"_temp3$b");const WealthChart$1=__name(()=>{var _a;const $=compilerRuntimeExports.c(47),wealth2=useStore(store,_temp$k),data=useGraphData(),t0=useEarliestAccountEntry();let t1;$[0]!==t0?(t1=t0.startOf("year"),$[0]=t0,$[1]=t1):t1=$[1];const initialFromDate=t1,localTime=useLocalDateTime();let t2;$[2]!==localTime?(t2=localTime.endOf("year"),$[2]=localTime,$[3]=t2):t2=$[3];const intialToDate=t2;let t3;$[4]!==localTime?(t3=localTime.plus({year:-1}),$[4]=localTime,$[5]=t3):t3=$[5];const[fromDate,setFromDate]=reactExports.useState(t3),[toDate,setToDate]=reactExports.useState(intialToDate);let t4;if($[6]!==data||$[7]!==fromDate||$[8]!==toDate){let t52;$[10]!==fromDate||$[11]!==toDate?(t52=__name(x_0=>{const year2=x_0.date.getFullYear();return year2>=fromDate.year&&year2<=toDate.year},"t52"),$[10]=fromDate,$[11]=toDate,$[12]=t52):t52=$[12],t4=data.filter(t52),$[6]=data,$[7]=fromDate,$[8]=toDate,$[9]=t4}else t4=$[9];const filteredData=t4;let t5;if($[13]!==wealth2){let t62;$[15]===Symbol.for("react.memo_cache_sentinel")?(t62={type:"line",xKey:"date",yKey:"total",yName:"Total",tooltip:{renderer:_temp4$8}},$[15]=t62):t62=$[15],t5=[...Object.entries(wealth2).map(_temp3$a),t62],$[13]=wealth2,$[14]=t5}else t5=$[14];const series=t5,t6=`Total Wealth ${formatCashShort(((_a=data[data.length-1])==null?void 0:_a.total)??0)}`;let t7;$[16]!==t6?(t7={text:t6},$[16]=t6,$[17]=t7):t7=$[17];let t8;$[18]===Symbol.for("react.memo_cache_sentinel")?(t8={format:"%Y"},$[18]=t8):t8=$[18];let t9;$[19]===Symbol.for("react.memo_cache_sentinel")?(t9=[{type:"time",position:"bottom",label:t8,nice:!1,interval:{step:time_exports.year.every(1,{snapTo:"start"})}},{type:"number",position:"left"}],$[19]=t9):t9=$[19];let t10;$[20]!==filteredData||$[21]!==series||$[22]!==t7?(t10={theme:"ag-default-dark",title:t7,data:filteredData,axes:t9,series},$[20]=filteredData,$[21]=series,$[22]=t7,$[23]=t10):t10=$[23];const options=t10;let t11;$[24]===Symbol.for("react.memo_cache_sentinel")?(t11={height:"100%",width:"100%"},$[24]=t11):t11=$[24];let t12;$[25]!==options?(t12=jsx(AgCharts,{options,css:t11}),$[25]=options,$[26]=t12):t12=$[26];let t13,t14;$[27]===Symbol.for("react.memo_cache_sentinel")?(t13={backgroundColor:"#121212"},t14=["year"],$[27]=t13,$[28]=t14):(t13=$[27],t14=$[28]);let t15;$[29]===Symbol.for("react.memo_cache_sentinel")?(t15=__name(value=>{value&&setFromDate(value)},"t15"),$[29]=t15):t15=$[29];let t16;$[30]!==fromDate||$[31]!==initialFromDate||$[32]!==intialToDate?(t16=jsx(DatePicker,{sx:t13,views:t14,label:"From",minDate:initialFromDate,maxDate:intialToDate,value:fromDate,onChange:t15}),$[30]=fromDate,$[31]=initialFromDate,$[32]=intialToDate,$[33]=t16):t16=$[33];let t17,t18;$[34]===Symbol.for("react.memo_cache_sentinel")?(t17={backgroundColor:"#121212"},t18=["year"],$[34]=t17,$[35]=t18):(t17=$[34],t18=$[35]);let t19;$[36]===Symbol.for("react.memo_cache_sentinel")?(t19=__name(value_0=>{value_0&&setToDate(value_0)},"t19"),$[36]=t19):t19=$[36];let t20;$[37]!==initialFromDate||$[38]!==intialToDate||$[39]!==toDate?(t20=jsx(DatePicker,{label:"To",sx:t17,views:t18,value:toDate,minDate:initialFromDate,maxDate:intialToDate,onChange:t19}),$[37]=initialFromDate,$[38]=intialToDate,$[39]=toDate,$[40]=t20):t20=$[40];let t21;$[41]!==t16||$[42]!==t20?(t21=jsxs(Box$1,{position:"absolute",top:16,right:16,zIndex:100,width:250,display:"flex",gap:2,children:[t16,t20]}),$[41]=t16,$[42]=t20,$[43]=t21):t21=$[43];let t22;return $[44]!==t12||$[45]!==t21?(t22=jsxs(Box$1,{position:"relative",height:"100%",width:"100%",children:[t12,t21]}),$[44]=t12,$[45]=t21,$[46]=t22):t22=$[46],t22},"WealthChart$1");function _temp$k(x){return x.wealth}__name(_temp$k,"_temp$k");function _temp2$d(t0){const{datum,yKey,xKey}=t0;return{content:`${DateTime.fromJSDate(datum[xKey]).toISODate()} ${formatCashShort(datum[yKey])}`}}__name(_temp2$d,"_temp2$d");function _temp3$a(t0){const[x_1,data_0]=t0;return{stacked:!0,type:"area",xKey:"date",yKey:x_1,yName:`${x_1}${data_0.hidden?" (hidden)":""}`,tooltip:{renderer:_temp2$d}}}__name(_temp3$a,"_temp3$a");function _temp4$8(t0){const{datum:datum_0,yKey:yKey_0,xKey:xKey_0}=t0;return{content:`${DateTime.fromJSDate(datum_0[xKey_0]).toISODate()} ${formatCashShort(datum_0[yKey_0])}`}}__name(_temp4$8,"_temp4$8");const NetWealth=__name(()=>{const $=compilerRuntimeExports.c(2);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=jsx(Box,{flex:"0 1 auto",children:jsx(Box,{width:650,height:"100%",sx:{padding:2,border:"1px solid rgba(255,255,255,0.1)",borderRadius:2,minWidth:480,backgroundColor:"#121212",boxShadow:"2px 3px 9px 1px #12121252"},children:jsx(AccountTabs,{})})}),$[0]=t0):t0=$[0];let t1;return $[1]===Symbol.for("react.memo_cache_sentinel")?(t1=jsxs(Box,{display:"flex",height:"100%",width:"100%",overflow:"hidden",gap:2,children:[t0,jsx(Box,{flex:"1 1 auto",overflow:"hidden",width:"100%",height:"100%",children:jsx(WealthChart$1,{})})]}),$[1]=t1):t1=$[1],t1},"NetWealth"),Card=__name(props=>{const $=compilerRuntimeExports.c(9),{title,children}=props;let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0={border:"1px solid rgba(255,255,255,0.1)",borderRadius:2,minWidth:0,backgroundColor:"#121212",boxShadow:"2px 3px 9px 1px #12121252",minHeight:"max-content"},$[0]=t0):t0=$[0];let t1;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1={paddingBottom:1,paddingLeft:2,paddingTop:1,display:"flex"},$[1]=t1):t1=$[1];let t2;$[2]!==title?(t2=jsx(Typography,{sx:t1,variant:"h5",children:title}),$[2]=title,$[3]=t2):t2=$[3];let t3;$[4]!==children?(t3=children&&jsxs(Fragment,{children:[jsx(Divider,{}),jsx(Stack,{padding:1,direction:"row",spacing:.5,width:"100%",minHeight:80,justifyContent:"space-between",children})]}),$[4]=children,$[5]=t3):t3=$[5];let t4;return $[6]!==t2||$[7]!==t3?(t4=jsxs(Box,{sx:t0,children:[t2,t3]}),$[6]=t2,$[7]=t3,$[8]=t4):t4=$[8],t4},"Card"),CashRange=__name(t0=>{const $=compilerRuntimeExports.c(17),{min:min2,max:max2,fallback,disableTooltip,compact:t1}=t0,compact=t1===void 0?!0:t1,minFormatted=compact?formatCashShort(min2??0):formatCash(min2??0),maxFormatted=compact?formatCashShort(max2??0):formatCash(max2??0),showRange=minFormatted!==maxFormatted;let t2;$[0]!==compact||$[1]!==disableTooltip||$[2]!==fallback||$[3]!==max2||$[4]!==min2||$[5]!==showRange?(t2=!showRange&&jsx(Cash,{fallback,value:max2,tooltip:min2!=max2?`${formatCash(min2??0)} - `:void 0,disableTooltip,compact}),$[0]=compact,$[1]=disableTooltip,$[2]=fallback,$[3]=max2,$[4]=min2,$[5]=showRange,$[6]=t2):t2=$[6];let t3;$[7]!==compact||$[8]!==disableTooltip||$[9]!==fallback||$[10]!==max2||$[11]!==min2||$[12]!==showRange?(t3=showRange&&jsxs(Fragment,{children:[jsx(Cash,{value:min2,fallback,disableTooltip,compact}),jsx("span",{children:" - "}),jsx(Cash,{value:max2,fallback,disableTooltip,compact})]}),$[7]=compact,$[8]=disableTooltip,$[9]=fallback,$[10]=max2,$[11]=min2,$[12]=showRange,$[13]=t3):t3=$[13];let t4;return $[14]!==t2||$[15]!==t3?(t4=jsxs(Box$1,{children:[t2,t3]}),$[14]=t2,$[15]=t3,$[16]=t4):t4=$[16],t4},"CashRange"),formatPercent=new Intl.NumberFormat("en-us",{style:"percent",maximumFractionDigits:1}).format,getProbablityColor=__name(probability=>probability?probability>=.5?"green":probability>=.25?"orange":"rgb(244, 67, 54)":"inherit","getProbablityColor"),Percent=__name(t0=>{const $=compilerRuntimeExports.c(8),{value,probability,fallback}=t0;let t1;$[0]!==probability?(t1=getProbablityColor(probability),$[0]=probability,$[1]=t1):t1=$[1];let t2;$[2]!==fallback||$[3]!==value?(t2=value!=null?formatPercent(value):fallback,$[2]=fallback,$[3]=value,$[4]=t2):t2=$[4];let t3;return $[5]!==t1||$[6]!==t2?(t3=jsx(Box$1,{color:t1,children:t2}),$[5]=t1,$[6]=t2,$[7]=t3):t3=$[7],t3},"Percent"),PercentRange=__name(({min:min2,max:max2,fallback})=>jsxs(Box$1,{children:[(max2??0)/(min2??1)<=1.005&&jsx(Percent,{fallback,value:max2}),(max2??0)/(min2??1)>1.005&&jsxs(Fragment,{children:[jsx(Percent,{value:min2,fallback}),jsx("span",{children:" - "}),jsx(Percent,{value:max2,fallback})]})]}),"PercentRange"),Value=__name(props=>{const $=compilerRuntimeExports.c(15),{children,secondaryValue,tertiaryValue,title,className}=props;let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0={display:"flex",minWidth:145,height:64,padding:"0px 8px",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:.5,flexShrink:0},$[0]=t0):t0=$[0];const t1=children||"?";let t2;$[1]!==t1?(t2=jsx(Box,{fontSize:18,fontWeight:700,lineHeight:"20px",children:t1}),$[1]=t1,$[2]=t2):t2=$[2];let t3;$[3]!==secondaryValue||$[4]!==tertiaryValue?(t3=!!(secondaryValue??tertiaryValue)&&jsx(Box,{alignSelf:"flex-end",fontSize:12,fontWeight:500,lineHeight:"16px",textTransform:"uppercase",color:"#888",children:secondaryValue??tertiaryValue}),$[3]=secondaryValue,$[4]=tertiaryValue,$[5]=t3):t3=$[5];let t4;$[6]!==t2||$[7]!==t3?(t4=jsxs(Box,{display:"flex",alignItems:"center",gap:.5,children:[t2,t3]}),$[6]=t2,$[7]=t3,$[8]=t4):t4=$[8];let t5;$[9]!==title?(t5=jsx(Box,{fontSize:12,fontWeight:500,lineHeight:"16px",textTransform:"uppercase",children:title}),$[9]=title,$[10]=t5):t5=$[10];let t6;return $[11]!==className||$[12]!==t4||$[13]!==t5?(t6=jsxs(Box,{sx:t0,className,children:[t4,t5]}),$[11]=className,$[12]=t4,$[13]=t5,$[14]=t6):t6=$[14],t6},"Value"),ClusterValue=__name(props=>{const $=compilerRuntimeExports.c(20),{min:min2,max:max2,probability,title,compact,className}=props;let t0;$[0]!==title?(t0=jsx("span",{children:title}),$[0]=title,$[1]=t0):t0=$[1];let t1;$[2]!==probability?(t1=probability<1&&probability>=0&&jsx(Percent,{probability,value:probability}),$[2]=probability,$[3]=t1):t1=$[3];let t2;$[4]!==t0||$[5]!==t1?(t2=jsxs(Box,{display:"flex",gap:1,children:[t0,t1]}),$[4]=t0,$[5]=t1,$[6]=t2):t2=$[6];let t3;$[7]!==max2||$[8]!==min2?(t3=min2<1&&min2>0&&jsx(PercentRange,{min:min2,max:max2}),$[7]=max2,$[8]=min2,$[9]=t3):t3=$[9];let t4;$[10]!==compact||$[11]!==max2||$[12]!==min2?(t4=min2>1&&jsx(CashRange,{compact,min:min2,max:max2}),$[10]=compact,$[11]=max2,$[12]=min2,$[13]=t4):t4=$[13];const t5=min2===0&&0;let t6;return $[14]!==className||$[15]!==t2||$[16]!==t3||$[17]!==t4||$[18]!==t5?(t6=jsxs(Value,{className,title:t2,children:[t3,t4,t5]}),$[14]=className,$[15]=t2,$[16]=t3,$[17]=t4,$[18]=t5,$[19]=t6):t6=$[19],t6},"ClusterValue"),ClusterValues=__name(props=>{const{clusters:clusters2,eventDate,compact=!0}=props;return clusters2==null?void 0:clusters2.map((x,i,arr)=>{const title=arr.length===1&&((eventDate==null?void 0:eventDate.diffNow().toMillis())??-1)>0?"Expected":x.title;return jsx$1(ClusterValue,{...x,title,compact,key:i})})},"ClusterValues");function toHuman(dur,smallestUnit="seconds"){const units=["years","months","days","hours","minutes","seconds","milliseconds"],smallestIdx=units.indexOf(smallestUnit),entries=Object.entries(dur.shiftTo(...units).normalize().toObject()).filter(([,amount],idx)=>amount>0&&idx<=smallestIdx);return Duration.fromObject(entries.length===0?{[smallestUnit]:0}:Object.fromEntries(entries)).toHuman().replaceAll(",","")}__name(toHuman,"toHuman");const CountDown=__name(props=>{const $=compilerRuntimeExports.c(6),{dateTime,children,variant:t0,dateFormat:t1}=props,variant=t0===void 0?"countdown":t0,dateFormat=t1===void 0?shortDate:t1,countDownStr=useCountdownText(variant,dateTime,dateFormat),tooltipStr=useTooltipText(variant,dateTime,dateFormat),countDownColor=useCountDownColor(dateTime);let t2;return $[0]!==children||$[1]!==countDownColor||$[2]!==countDownStr||$[3]!==dateTime||$[4]!==tooltipStr?(t2=dateTime&&dateTime>getLocalDateTime()?jsx(Tooltip,{title:tooltipStr,children:jsx(Box,{color:countDownColor,children:countDownStr})}):children,$[0]=children,$[1]=countDownColor,$[2]=countDownStr,$[3]=dateTime,$[4]=tooltipStr,$[5]=t2):t2=$[5],t2},"CountDown"),useTooltipText=__name((variant,dateTime,dateFormat)=>{if(!dateTime)return"??";if(variant==="countdown")return dateTime==null?void 0:dateTime.toFormat(dateFormat);const diff=dateTime==null?void 0:dateTime.diff(getLocalDateTime(),["years","months","days","hours"]);return toHuman(diff,"days")},"useTooltipText"),useCountdownText=__name((variant,dateTime,dateFormat)=>{if(!dateTime)return"??";if(variant==="countdown"){const diff=dateTime==null?void 0:dateTime.diff(getLocalDateTime(),["years","months","days","hours"]);return toHuman(diff,"days")}return dateTime==null?void 0:dateTime.toFormat(dateFormat)},"useCountdownText"),useCountDownColor=__name(dateTime=>{if(!dateTime)return"white";const days=dateTime.diffNow("days").days;return days<30?"green":days<=60?"orange":"rgb(244, 67, 54)"},"useCountDownColor"),year=getLocalDateTime().year,scenarioStore=new Store({loading:!0,maxYear:year,minYear:year,scenarios:{}});function makeMatrix(columns,rows){const matrix=[];for(let i=0;i<columns;i++){const column=[];for(let j=0;j<rows;j++)column.push(0);matrix.push(column)}return matrix}__name(makeMatrix,"makeMatrix");function numericSort(x,selector){return x.toSorted(function(a,b){return selector(a)-selector(b)})}__name(numericSort,"numericSort");function uniqueCountSorted(x,selector){let uniqueValueCount=0,lastSeenValue;for(let i=0;i<x.length;i++){const value=selector(x[i]);(i===0||value!==lastSeenValue)&&(lastSeenValue=value,uniqueValueCount++)}return uniqueValueCount}__name(uniqueCountSorted,"uniqueCountSorted");function ssq(j,i,sums,sumsOfSquares){let sji;if(j>0){const muji=(sums[i]-sums[j-1])/(i-j+1);sji=sumsOfSquares[i]-sumsOfSquares[j-1]-(i-j+1)*muji*muji}else sji=sumsOfSquares[i]-sums[i]*sums[i]/(i+1);return sji<0?0:sji}__name(ssq,"ssq");function fillMatrixColumn(iMin,iMax,cluster,matrix,backtrackMatrix,sums,sumsOfSquares){if(iMin>iMax)return;const i=Math.floor((iMin+iMax)/2);matrix[cluster][i]=matrix[cluster-1][i-1],backtrackMatrix[cluster][i]=i;let jlow=cluster;iMin>cluster&&(jlow=Math.max(jlow,backtrackMatrix[cluster][iMin-1]||0)),jlow=Math.max(jlow,backtrackMatrix[cluster-1][i]||0);let jhigh=i-1;iMax<matrix[0].length-1&&(jhigh=Math.min(jhigh,backtrackMatrix[cluster][iMax+1]||0));let sji,sjlowi,ssqjlow,ssqj;for(let j=jhigh;j>=jlow&&(sji=ssq(j,i,sums,sumsOfSquares),!(sji+matrix[cluster-1][jlow-1]>=matrix[cluster][i]));--j)sjlowi=ssq(jlow,i,sums,sumsOfSquares),ssqjlow=sjlowi+matrix[cluster-1][jlow-1],ssqjlow<matrix[cluster][i]&&(matrix[cluster][i]=ssqjlow,backtrackMatrix[cluster][i]=jlow),jlow++,ssqj=sji+matrix[cluster-1][j-1],ssqj<matrix[cluster][i]&&(matrix[cluster][i]=ssqj,backtrackMatrix[cluster][i]=j);fillMatrixColumn(iMin,i-1,cluster,matrix,backtrackMatrix,sums,sumsOfSquares),fillMatrixColumn(i+1,iMax,cluster,matrix,backtrackMatrix,sums,sumsOfSquares)}__name(fillMatrixColumn,"fillMatrixColumn");function fillMatrices(data,matrix,backtrackMatrix,selector){const nValues=matrix[0].length,shift=selector(data[Math.floor(nValues/2)]),sums=[],sumsOfSquares=[];for(let i=0,shiftedValue;i<nValues;++i)shiftedValue=selector(data[i])-shift,i===0?(sums.push(shiftedValue),sumsOfSquares.push(shiftedValue*shiftedValue)):(sums.push(sums[i-1]+shiftedValue),sumsOfSquares.push(sumsOfSquares[i-1]+shiftedValue*shiftedValue)),matrix[0][i]=ssq(0,i,sums,sumsOfSquares),backtrackMatrix[0][i]=0;let iMin;for(let cluster=1;cluster<matrix.length;++cluster)cluster<matrix.length-1?iMin=cluster:iMin=nValues-1,fillMatrixColumn(iMin,nValues-1,cluster,matrix,backtrackMatrix,sums,sumsOfSquares)}__name(fillMatrices,"fillMatrices");function ckmeans(data,nClusters,selector){if(nClusters===0)return[];if(nClusters>data.length)throw new Error("cannot generate more classes than there are data values");const sorted=numericSort(data,selector);if(uniqueCountSorted(sorted,selector)===1)return[sorted];const matrix=makeMatrix(nClusters,sorted.length),backtrackMatrix=makeMatrix(nClusters,sorted.length);fillMatrices(sorted,matrix,backtrackMatrix,selector);const clusters2=[];let clusterRight=backtrackMatrix[0].length-1;for(let cluster=backtrackMatrix.length-1;cluster>=0;cluster--){const clusterLeft=backtrackMatrix[cluster][clusterRight];clusters2[cluster]=sorted.slice(clusterLeft,clusterRight+1),cluster>0&&(clusterRight=clusterLeft-1)}return clusters2}__name(ckmeans,"ckmeans");const areSetsEqual=__name((a,b)=>[...a].every(value=>b.has(value))&&[...b].every(value=>a.has(value)),"areSetsEqual"),collapseClusters=__name((data,selector)=>{const sets=data.map(x=>new Set(x.map(y=>selector(y)))),result=[];for(let i=0;i<sets.length;i++){const curr=data[i].slice();for(let j=i+1;j<sets.length;j++)areSetsEqual(sets[i],sets[j])&&(curr.push(...data[j]),sets.splice(j,1),data.splice(j,1));result.push(curr)}return result},"collapseClusters"),scaleCluster=__name((cluster,factor)=>{if(cluster)return{...cluster,min:cluster.min*factor,max:cluster.max*factor,median:cluster.median*factor}},"scaleCluster"),scaleClusters=__name((clusters2,factor)=>clusters2==null?void 0:clusters2.filter(x=>x).map(x=>scaleCluster(x,factor)),"scaleClusters"),findMostMostLikely=__name(cluster=>cluster.length===0?void 0:cluster.reduce((acc,curr)=>curr.probability>acc.probability?curr:acc),"findMostMostLikely"),clusterTitle=__name((index,length)=>length===1?"Actual":length==2?["Low","High"][index]:["Low","Med","High"][index],"clusterTitle"),getClusterCount=__name((values,selector)=>{const uniqeValues=new Set(values.map(x=>selector(x))).size;return uniqeValues<3?uniqeValues:uniqeValues===4?2:3},"getClusterCount"),clusters=__name((values,selector)=>{if(!values||values.length===0)return[];const totalWeight=sumSimple(values.map(x=>x.weight)),clusterCount=getClusterCount(values,selector);return ckmeans(values,clusterCount,selector).map((x,i,arr)=>({min:min(x.map(x2=>selector(x2))),max:max(x.map(x2=>selector(x2))),median:median(x.map(x2=>selector(x2))),probability:sumSimple(x.map(x2=>x2.weight))/totalWeight,title:clusterTitle(i,arr.length)}))},"clusters"),useClusters=__name(year2=>{const $=compilerRuntimeExports.c(34);let t0;$[0]!==year2?(t0=__name(x=>x.scenarios[year2],"t0"),$[0]=year2,$[1]=t0):t0=$[1];const scenarios=useStore(scenarioStore,t0);if((scenarios==null?void 0:scenarios.length)===0){let t12,t22,t32,t42,t52,t62;$[2]===Symbol.for("react.memo_cache_sentinel")?(t12=[],t22=[],t32=[],t42=[],t52=[],t62=[],$[2]=t12,$[3]=t22,$[4]=t32,$[5]=t42,$[6]=t52,$[7]=t62):(t12=$[2],t22=$[3],t32=$[4],t42=$[5],t52=$[6],t62=$[7]);let t72;$[8]===Symbol.for("react.memo_cache_sentinel")?(t72=[],$[8]=t72):t72=$[8];let t82;return $[9]!==scenarios?(t82={totalPay:t12,meritBonus:t22,retirementBonus:t32,companyBonus:t42,pay:t52,meritIncrease:t62,scenarios,taxablePay:t72},$[9]=scenarios,$[10]=t82):t82=$[10],t82}let t1;$[11]!==scenarios?(t1=clusters(scenarios,_temp$j),$[11]=scenarios,$[12]=t1):t1=$[12];let t2;$[13]!==scenarios?(t2=clusters(scenarios,_temp2$c),$[13]=scenarios,$[14]=t2):t2=$[14];let t3;$[15]!==scenarios?(t3=clusters(scenarios,_temp3$9),$[15]=scenarios,$[16]=t3):t3=$[16];let t4;$[17]!==scenarios?(t4=clusters(scenarios,_temp4$7),$[17]=scenarios,$[18]=t4):t4=$[18];let t5;$[19]!==scenarios?(t5=clusters(scenarios,_temp5$2),$[19]=scenarios,$[20]=t5):t5=$[20];let t6;$[21]!==scenarios?(t6=clusters(scenarios,_temp6$2),$[21]=scenarios,$[22]=t6):t6=$[22];let t7;$[23]!==scenarios?(t7=clusters(scenarios,_temp7$2),$[23]=scenarios,$[24]=t7):t7=$[24];let t8;return $[25]!==scenarios||$[26]!==t1||$[27]!==t2||$[28]!==t3||$[29]!==t4||$[30]!==t5||$[31]!==t6||$[32]!==t7?(t8={totalPay:t1,meritBonus:t2,retirementBonus:t3,companyBonus:t4,pay:t5,meritIncrease:t6,taxablePay:t7,scenarios},$[25]=scenarios,$[26]=t1,$[27]=t2,$[28]=t3,$[29]=t4,$[30]=t5,$[31]=t6,$[32]=t7,$[33]=t8):t8=$[33],t8},"useClusters"),useTotalPayClusters=__name(()=>{const $=compilerRuntimeExports.c(4),scenarios=useStore(scenarioStore,_temp8$2);let t0,t1;if($[0]!==scenarios){t1=Symbol.for("react.early_return_sentinel");bb0:{const allScenarios=Object.entries(scenarios);if(allScenarios.length===0){let t2;$[3]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[3]=t2):t2=$[3],t1=t2;break bb0}t0=allScenarios.map(_temp10$2)}$[0]=scenarios,$[1]=t0,$[2]=t1}else t0=$[1],t1=$[2];return t1!==Symbol.for("react.early_return_sentinel")?t1:t0},"useTotalPayClusters");function _temp$j(x_0){return x_0.totalPay}__name(_temp$j,"_temp$j");function _temp2$c(x_1){return x_1.meritBonus}__name(_temp2$c,"_temp2$c");function _temp3$9(x_2){return x_2.retirementBonus}__name(_temp3$9,"_temp3$9");function _temp4$7(x_3){return x_3.companyBonus}__name(_temp4$7,"_temp4$7");function _temp5$2(x_4){var _a;return((_a=x_4.pay.at(-1))==null?void 0:_a.value)??0}__name(_temp5$2,"_temp5$2");function _temp6$2(x_5){return x_5.meritIncreasePct+x_5.equityIncreasePct}__name(_temp6$2,"_temp6$2");function _temp7$2(x_6){return x_6.taxablePay}__name(_temp7$2,"_temp7$2");function _temp8$2(x){return x.scenarios}__name(_temp8$2,"_temp8$2");function _temp9$2(x_0){return x_0.totalPay}__name(_temp9$2,"_temp9$2");function _temp10$2(t0){const[year2,scenarios_0]=t0;return[year2,clusters(scenarios_0,_temp9$2)]}__name(_temp10$2,"_temp10$2");function findSameYear(date,data){const year2=typeof date=="number"?date:date.year;return data.find(x=>DateTime.fromISO(x.date).year===year2)}__name(findSameYear,"findSameYear");const getActualDate=__name((year2,data)=>{if(!year2)return;const entry=findSameYear(year2,data);if(entry)return DateTime.fromISO(entry.date)},"getActualDate"),getDefaultPayDates=__name(year2=>({meritIncrease:DateTime.fromObject({month:4,day:1,year:year2}),meritBonus:DateTime.fromObject({month:4,day:15,year:year2}),companyBonus:DateTime.fromObject({month:6,day:15,year:year2}),retirementBonus:DateTime.fromObject({month:7,day:15,year:year2})}),"getDefaultPayDates"),getEligibleIncomeDateRanges=__name(year2=>({base:{start:DateTime.fromObject({month:1,day:1,year:year2}),end:DateTime.fromObject({month:12,day:31,year:year2}).endOf("day")},meritBonus:{start:DateTime.fromObject({month:1,day:1,year:year2-1}),end:DateTime.fromObject({month:12,day:31,year:year2-1}).endOf("day")},companyBonus:{start:DateTime.fromObject({day:1,month:4,year:year2-1}),end:DateTime.fromObject({day:31,month:3,year:year2}).endOf("day")},retirementBonus:{start:DateTime.fromObject({day:1,month:7,year:year2-1}),end:DateTime.fromObject({day:30,month:6,year:year2}).endOf("day")}}),"getEligibleIncomeDateRanges"),useDates=__name(year2=>{const $=compilerRuntimeExports.c(16),timeSeries=useStore(store,_temp$i);let t0;$[0]!==timeSeries.meritBonus||$[1]!==year2?(t0=getActualDate(year2,timeSeries.meritBonus),$[0]=timeSeries.meritBonus,$[1]=year2,$[2]=t0):t0=$[2];const meritBonusDate=t0;let t1;$[3]!==timeSeries.companyBonus||$[4]!==year2?(t1=getActualDate(year2,timeSeries.companyBonus),$[3]=timeSeries.companyBonus,$[4]=year2,$[5]=t1):t1=$[5];const companyBonusDate=t1;let t2;$[6]!==timeSeries.retirementBonus||$[7]!==year2?(t2=getActualDate(year2,timeSeries.retirementBonus),$[6]=timeSeries.retirementBonus,$[7]=year2,$[8]=t2):t2=$[8];const retirementBonusDate=t2;let t3;$[9]!==year2?(t3=getDefaultPayDates(year2),$[9]=year2,$[10]=t3):t3=$[10];const defaultDates=t3,t4=meritBonusDate??defaultDates.meritBonus,t5=companyBonusDate??defaultDates.companyBonus,t6=retirementBonusDate??defaultDates.retirementBonus;let t7;return $[11]!==defaultDates.meritIncrease||$[12]!==t4||$[13]!==t5||$[14]!==t6?(t7={meritIncrease:defaultDates.meritIncrease,meritBonus:t4,companyBonus:t5,retirementBonus:t6},$[11]=defaultDates.meritIncrease,$[12]=t4,$[13]=t5,$[14]=t6,$[15]=t7):t7=$[15],t7},"useDates"),useDateRanges=__name(year2=>getEligibleIncomeDateRanges(year2),"useDateRanges");function _temp$i(x){return x.projectedIncome.timeSeries}__name(_temp$i,"_temp$i");const PaymentTypes={regular:"regular"},ChunkByEquality=__name((arr,select)=>arr.reduceRight((acc,curr)=>{var _a;return acc.length>0&&select((_a=acc[0])==null?void 0:_a[0])===select(curr)?acc[0].unshift(curr):acc.unshift([curr]),acc},[]),"ChunkByEquality"),SparkChart=__name(props=>{const $=compilerRuntimeExports.c(26),{accountName,variant}=props;let t0;$[0]!==accountName?(t0=__name(x=>x.projectedIncome.timeSeries[accountName],"t0"),$[0]=accountName,$[1]=t0):t0=$[1];const account=useStore(store,t0);let t1;if($[2]!==account){const data=account.map(_temp$h),selector=_temp2$b,maxClusters=Math.min(data.length,3);t1=collapseClusters(ckmeans(data,maxClusters,selector),selector).map(x_2=>x_2.map((y,i,subArr)=>({...y,cluster:subArr.length/data.length,color:getProbablityColor(subArr.length/data.length)}))).flat().sort(sortByDate(_temp3$8,"asc")),$[2]=account,$[3]=t1}else t1=$[3];const ckData=t1;let t2;$[4]!==variant?(t2=[{type:"line",yKey:"value",xKey:"date",stroke:"white",marker:{itemStyler:__name(params=>({fill:variant==="percent"?"#FFF":params.datum.color,size:10}),"itemStyler")}}],$[4]=variant,$[5]=t2):t2=$[5];let t3;$[6]===Symbol.for("react.memo_cache_sentinel")?(t3={maxSpacing:45},$[6]=t3):t3=$[6];let t4;$[7]!==variant?(t4={type:"number",position:"left",nice:!0,interval:t3,label:{formatter:__name(params_0=>variant==="percent"?formatPercent(params_0.value):formatCash(params_0.value),"formatter")}},$[7]=variant,$[8]=t4):t4=$[8];let t5;$[9]===Symbol.for("react.memo_cache_sentinel")?(t5={nice:!1,type:"time",position:"bottom",label:{format:"%Y"}},$[9]=t5):t5=$[9];let t6;$[10]!==t4?(t6=[t4,t5],$[10]=t4,$[11]=t6):t6=$[11];let t7;$[12]!==ckData||$[13]!==t2||$[14]!==t6?(t7={data:ckData,theme:"ag-default-dark",series:t2,axes:t6},$[12]=ckData,$[13]=t2,$[14]=t6,$[15]=t7):t7=$[15];const options=t7,isDisabled=account.length===0;let t8;$[16]===Symbol.for("react.memo_cache_sentinel")?(t8={tooltip:{sx:{maxWidth:"unset"}}},$[16]=t8):t8=$[16];let t9;$[17]===Symbol.for("react.memo_cache_sentinel")?(t9={width:750,height:375},$[17]=t9):t9=$[17];let t10;$[18]!==options?(t10=jsx(AgCharts,{options,css:t9}),$[18]=options,$[19]=t10):t10=$[19];const t11=isDisabled?"disabled":void 0;let t12;$[20]!==t11?(t12=jsx(InsertChartIcon,{color:t11}),$[20]=t11,$[21]=t12):t12=$[21];let t13;return $[22]!==isDisabled||$[23]!==t10||$[24]!==t12?(t13=jsx(Tooltip,{disableHoverListener:isDisabled,disableFocusListener:isDisabled,disableTouchListener:isDisabled,slotProps:t8,title:t10,children:t12}),$[22]=isDisabled,$[23]=t10,$[24]=t12,$[25]=t13):t13=$[25],t13},"SparkChart");function _temp$h(x_0){return{...x_0,date:DateTime.fromISO(x_0.date).toJSDate()}}__name(_temp$h,"_temp$h");function _temp2$b(x_1){return x_1.value}__name(_temp2$b,"_temp2$b");function _temp3$8(x_3){return DateTime.fromJSDate(x_3.date)}__name(_temp3$8,"_temp3$8");const updateProjectedIncomeDate=__name((timeSeries,data,date)=>{store.setState(prev=>create(prev,next2=>{const idx=prev.projectedIncome.timeSeries[timeSeries].findIndex(x=>x===data);if(idx<0)throw new Error("failed to find data");next2.projectedIncome.timeSeries[timeSeries][idx].date=date.toISO()}))},"updateProjectedIncomeDate"),createAccountColumnConfig=__name((accountName,variant,dateVariant)=>[{headerName:dateVariant==="date"?"Date":"Year",colId:"date",sort:"desc",valueFormatter:__name(x=>{var _a;return(_a=x.value)==null?void 0:_a.toFormat(dateVariant==="date"?shortDate:"yyyy")},"valueFormatter"),valueGetter:__name(x=>x.data&&DateTime.fromISO(x.data.date),"valueGetter"),tooltipValueGetter:__name(x=>{var _a;return dateVariant==="year"?(_a=x.value)==null?void 0:_a.toFormat(shortDate):void 0},"tooltipValueGetter"),cellRenderer:__name(x=>jsxs(Stack$1,{direction:"row",alignItems:"center",children:[x.valueFormatted," ",x.value&&x.value>DateTime.local()&&jsx(Tooltip,{title:"Future Event",children:jsx(UpdateIcon,{htmlColor:"orange"})})]}),"cellRenderer"),cellEditor:dateVariant==="date"?"agDateCellEditor":"agNumberCellEditor",editable:!0,valueSetter:__name(x=>{const date=dateVariant==="date"?DateTime.fromJSDate(x.newValue):DateTime.fromISO(x.data.date).set({year:x.newValue});return date.isValid&&updateProjectedIncomeDate(accountName,x.data,date),date.isValid},"valueSetter")},{headerName:"Value",valueGetter:__name(x=>{var _a;return(_a=x.data)==null?void 0:_a.value},"valueGetter"),cellRenderer:__name(x=>variant==="cash"?jsx(Cash,{compact:!1,value:x.value}):jsx(Percent,{value:x.value}),"cellRenderer"),type:"numericColumn",editable:!0,cellEditor:"agNumberCellEditor",valueSetter:__name(x=>(updateProjectedIncome(accountName,x.data,+x.newValue),!0),"valueSetter")},{cellStyle:__name(()=>({display:"inline-flex",padding:"0px"}),"cellStyle"),sortable:!1,headerName:"",width:80,colId:"actions",cellRenderer:__name(props=>jsx(Button,{onClick:__name(()=>{props.data&&removeProjectedIncome(accountName,props.data)},"onClick"),color:"error",fullWidth:!0,children:jsx(DeleteForever,{})}),"cellRenderer")}],"createAccountColumnConfig"),disabledStyle$1={color:"grey"},DataEntry=__name(props=>{const $=compilerRuntimeExports.c(46),{timeSeries,defaultDate,variant:t0,dateVariant:t1}=props,variant=t0===void 0?"number":t0,dateVariant=t1===void 0?"date":t1;let t2;$[0]!==timeSeries?(t2=__name(state=>state.projectedIncome.timeSeries[timeSeries],"t2"),$[0]=timeSeries,$[1]=t2):t2=$[1];const account=useStore(store,t2),[date,setDate]=reactExports.useState(defaultDate),[amount,setAmount]=reactExports.useState(null),hasSameDate=!!(account!=null&&account.find(x=>date.hasSame(DateTime.fromISO(x.date),"day")));let t3;$[2]!==amount||$[3]!==date||$[4]!==timeSeries||$[5]!==variant?(t3=__name(()=>{amount!=null&&(addProjectedIncome(date,timeSeries,variant==="percent"?amount/100:amount),setAmount(null))},"t3"),$[2]=amount,$[3]=date,$[4]=timeSeries,$[5]=variant,$[6]=t3):t3=$[6];const onAddEntry=t3;let t4;$[7]!==dateVariant||$[8]!==timeSeries||$[9]!==variant?(t4=createAccountColumnConfig(timeSeries,variant,dateVariant),$[7]=dateVariant,$[8]=timeSeries,$[9]=variant,$[10]=t4):t4=$[10];const accountColumnConfig=t4,t5=dateVariant==="year"?"yyyy":shortDate;let t6;$[11]!==dateVariant?(t6=dateVariant==="year"?["year"]:void 0,$[11]=dateVariant,$[12]=t6):t6=$[12];let t7;$[13]===Symbol.for("react.memo_cache_sentinel")?(t7={color:"white"},$[13]=t7):t7=$[13];const t8=dateVariant==="date"?"Date":"Year";let t9;$[14]===Symbol.for("react.memo_cache_sentinel")?(t9=__name(value=>{console.log(value),value&&setDate(value)},"t9"),$[14]=t9):t9=$[14];let t10;$[15]!==date||$[16]!==t5||$[17]!==t6||$[18]!==t8?(t10=jsx(DatePicker,{format:t5,views:t6,sx:t7,label:t8,value:date,onChange:t9}),$[15]=date,$[16]=t5,$[17]=t6,$[18]=t8,$[19]=t10):t10=$[19];const t11=amount??"";let t12;$[20]===Symbol.for("react.memo_cache_sentinel")?(t12=__name(event=>event.target.value===""?setAmount(null):setAmount(+event.target.value),"t12"),$[20]=t12):t12=$[20];let t13;$[21]!==variant?(t13=variant!=="number"&&jsx(InputAdornment,{position:"start",children:variant==="cash"?"$":"%"}),$[21]=variant,$[22]=t13):t13=$[22];let t14;$[23]!==t13?(t14={input:{startAdornment:t13}},$[23]=t13,$[24]=t14):t14=$[24];let t15;$[25]!==t11||$[26]!==t14?(t15=jsx(TextField,{label:"Amount",value:t11,placeholder:"0",type:"number",onChange:t12,slotProps:t14}),$[25]=t11,$[26]=t14,$[27]=t15):t15=$[27];const t16=amount===null||!date||hasSameDate;let t17;$[28]!==onAddEntry||$[29]!==t16?(t17=jsx(Button,{disabled:t16,onClick:onAddEntry,children:"Add Entry"}),$[28]=onAddEntry,$[29]=t16,$[30]=t17):t17=$[30];let t18;$[31]!==t10||$[32]!==t15||$[33]!==t17?(t18=jsxs(Stack,{spacing:2,flex:"0 1 auto",children:[t10,t15,t17]}),$[31]=t10,$[32]=t15,$[33]=t17,$[34]=t18):t18=$[34];let t19;$[35]===Symbol.for("react.memo_cache_sentinel")?(t19={paddingTop:2,flex:"1 1 auto"},$[35]=t19):t19=$[35];let t20;$[36]!==account?(t20=account??[],$[36]=account,$[37]=t20):t20=$[37];const t21=account+"-history";let t22;$[38]===Symbol.for("react.memo_cache_sentinel")?(t22={type:"fitGridWidth"},$[38]=t22):t22=$[38];let t23;$[39]!==accountColumnConfig||$[40]!==t20||$[41]!==t21?(t23=jsx(Box,{sx:t19,children:jsx(AgGrid,{rowData:t20,columnDefs:accountColumnConfig,id:t21,autoSizeStrategy:t22,stopEditingWhenCellsLoseFocus:!0,getRowStyle:_temp$g})}),$[39]=accountColumnConfig,$[40]=t20,$[41]=t21,$[42]=t23):t23=$[42];let t24;return $[43]!==t18||$[44]!==t23?(t24=jsxs(Box,{display:"flex",flexDirection:"column",height:"100%",children:[t18,t23]}),$[43]=t18,$[44]=t23,$[45]=t24):t24=$[45],t24},"DataEntry"),DataEntryLayout=__name(props=>{const $=compilerRuntimeExports.c(23),{title,accountName,defaultDate,variant,dateVariant:t0}=props,dateVariant=t0===void 0?"date":t0;let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1={padding:2,height:"100%",width:450,flexShrink:0},$[0]=t1):t1=$[0];let t2;$[1]!==variant?(t2=variant==="cash"&&jsx(Tooltip,{title:jsxs(Fragment,{children:[jsx("span",{children:"Cash values are used in lieu of Percent values."}),jsx("br",{}),jsx("span",{children:"Cash values are considered actual payment values."})]}),children:jsx("span",{children:"($)"})}),$[1]=variant,$[2]=t2):t2=$[2];let t3;$[3]!==variant?(t3=variant==="percent"&&jsx(Tooltip,{title:"Percentage values are used for predictions.",children:jsx("span",{children:"(%)"})}),$[3]=variant,$[4]=t3):t3=$[4];let t4;$[5]!==t2||$[6]!==t3||$[7]!==title?(t4=jsxs(Typography,{variant:"h5",children:[title," ",t2,t3]}),$[5]=t2,$[6]=t3,$[7]=title,$[8]=t4):t4=$[8];let t5;$[9]!==accountName||$[10]!==variant?(t5=jsx(SparkChart,{accountName,variant}),$[9]=accountName,$[10]=variant,$[11]=t5):t5=$[11];let t6;$[12]!==t4||$[13]!==t5?(t6=jsxs(Box,{flex:"0 1 auto",marginBottom:4,display:"flex",alignItems:"center",justifyContent:"space-between",children:[t4,t5]}),$[12]=t4,$[13]=t5,$[14]=t6):t6=$[14];let t7;$[15]!==accountName||$[16]!==dateVariant||$[17]!==defaultDate||$[18]!==variant?(t7=jsx(Box,{flex:"1 1 auto",children:jsx(DataEntry,{variant,timeSeries:accountName,defaultDate,dateVariant})}),$[15]=accountName,$[16]=dateVariant,$[17]=defaultDate,$[18]=variant,$[19]=t7):t7=$[19];let t8;return $[20]!==t6||$[21]!==t7?(t8=jsx(Paper,{sx:t1,children:jsxs(Box,{display:"flex",flexDirection:"column",height:"100%",children:[t6,t7]})}),$[20]=t6,$[21]=t7,$[22]=t8):t8=$[22],t8},"DataEntryLayout");function _temp$g(x_0){return x_0.rowIndex>=MAX_NUM_ENTRIES?disabledStyle$1:void 0}__name(_temp$g,"_temp$g");const IncomeChart=__name(()=>{const $=compilerRuntimeExports.c(39),clusters2=useTotalPayClusters();let t0;$[0]!==clusters2?(t0=clusters2.filter(_temp$f).map(_temp2$a),$[0]=clusters2,$[1]=t0):t0=$[1];const history=t0;let t1;$[2]!==clusters2?(t1=clusters2.filter(_temp3$7).map(_temp5$1),$[2]=clusters2,$[3]=t1):t1=$[3];const future=t1,isDisabled=future.length+history.length===0;let t2;$[4]===Symbol.for("react.memo_cache_sentinel")?(t2={renderer:_temp6$1},$[4]=t2):t2=$[4];let t3;$[5]!==history?(t3={type:"line",xKey:"date",yKey:"totalPay",data:history,yName:"Income",tooltip:t2},$[5]=history,$[6]=t3):t3=$[6];let t4,t5;$[7]===Symbol.for("react.memo_cache_sentinel")?(t4={itemStyler:_temp7$1},t5={renderer:_temp8$1},$[7]=t4,$[8]=t5):(t4=$[7],t5=$[8]);let t6;$[9]!==future?(t6={type:"line",xKey:"date",yKey:"low",data:future,yName:"Low",stroke:"grey",marker:t4,tooltip:t5},$[9]=future,$[10]=t6):t6=$[10];let t7;$[11]===Symbol.for("react.memo_cache_sentinel")?(t7={itemStyler:_temp9$1},$[11]=t7):t7=$[11];let t8;$[12]===Symbol.for("react.memo_cache_sentinel")?(t8={renderer:_temp10$1},$[12]=t8):t8=$[12];let t9;$[13]!==future?(t9={marker:t7,type:"line",stroke:"grey",xKey:"date",yKey:"med",data:future,yName:"Medium",tooltip:t8},$[13]=future,$[14]=t9):t9=$[14];let t10;$[15]===Symbol.for("react.memo_cache_sentinel")?(t10={itemStyler:_temp11$1},$[15]=t10):t10=$[15];let t11;$[16]===Symbol.for("react.memo_cache_sentinel")?(t11={renderer:_temp12$1},$[16]=t11):t11=$[16];let t12;$[17]!==future?(t12={stroke:"grey",marker:t10,type:"line",xKey:"date",yKey:"high",data:future,yName:"High",tooltip:t11},$[17]=future,$[18]=t12):t12=$[18];let t13;$[19]!==t12||$[20]!==t3||$[21]!==t6||$[22]!==t9?(t13=[t3,t6,t9,t12],$[19]=t12,$[20]=t3,$[21]=t6,$[22]=t9,$[23]=t13):t13=$[23];const series=t13;let t14;$[24]===Symbol.for("react.memo_cache_sentinel")?(t14={text:"Income"},$[24]=t14):t14=$[24];let t15;$[25]===Symbol.for("react.memo_cache_sentinel")?(t15={type:"time",position:"bottom",label:{format:"%Y"},nice:!1},$[25]=t15):t15=$[25];let t16;$[26]===Symbol.for("react.memo_cache_sentinel")?(t16=[t15,{type:"number",position:"left",nice:!0,interval:{maxSpacing:45},label:{formatter:_temp13}}],$[26]=t16):t16=$[26];let t17;$[27]!==series?(t17={theme:"ag-default-dark",title:t14,axes:t16,series},$[27]=series,$[28]=t17):t17=$[28];const options=t17;let t18;$[29]===Symbol.for("react.memo_cache_sentinel")?(t18={tooltip:{sx:{maxWidth:"unset"}}},$[29]=t18):t18=$[29];let t19;$[30]===Symbol.for("react.memo_cache_sentinel")?(t19={height:375,width:750},$[30]=t19):t19=$[30];let t20;$[31]!==options?(t20=jsx(AgCharts,{options,css:t19}),$[31]=options,$[32]=t20):t20=$[32];const t21=isDisabled?"disabled":void 0;let t22;$[33]!==t21?(t22=jsx(InsertChartIcon,{color:t21}),$[33]=t21,$[34]=t22):t22=$[34];let t23;return $[35]!==isDisabled||$[36]!==t20||$[37]!==t22?(t23=jsx(Tooltip,{disableHoverListener:isDisabled,disableFocusListener:isDisabled,disableTouchListener:isDisabled,slotProps:t18,title:t20,children:t22}),$[35]=isDisabled,$[36]=t20,$[37]=t22,$[38]=t23):t23=$[38],t23},"IncomeChart");function _temp$f(t0){const[year2]=t0;return+year2<=getLocalDateTime().year}__name(_temp$f,"_temp$f");function _temp2$a(t0){var _a;const[year_0,x]=t0;return{totalPay:((_a=x[0])==null?void 0:_a.median)??0,date:DateTime.fromObject({year:+year_0,month:1,day:1}).toJSDate()}}__name(_temp2$a,"_temp2$a");function _temp3$7(t0){const[year_1]=t0;return+year_1>=getLocalDateTime().year}__name(_temp3$7,"_temp3$7");function _temp4$6(x_1){const title=x_1.title.toLocaleLowerCase();return[[title,x_1.median],[title+"Probability",x_1.probability]]}__name(_temp4$6,"_temp4$6");function _temp5$1(t0){const[year_2,x_0]=t0;return{...Object.fromEntries(x_0==null?void 0:x_0.flatMap(_temp4$6)),date:DateTime.fromObject({year:+year_2,month:1,day:1}).toJSDate()}}__name(_temp5$1,"_temp5$1");function _temp6$1(t0){const{datum,yKey,xKey}=t0;return{content:`${DateTime.fromJSDate(datum[xKey]).year} ${formatCashShort(datum[yKey])}`}}__name(_temp6$1,"_temp6$1");function _temp7$1(params){const color=getProbablityColor(params.datum.lowProbability);return{fill:color,stroke:color}}__name(_temp7$1,"_temp7$1");function _temp8$1(t0){const{datum:datum_0,yKey:yKey_0,xKey:xKey_0}=t0;return{content:`${DateTime.fromJSDate(datum_0[xKey_0]).year} ${formatCashShort(datum_0[yKey_0])} ${formatPercent(datum_0.lowProbability)}`}}__name(_temp8$1,"_temp8$1");function _temp9$1(params_0){return{fill:getProbablityColor(params_0.datum.medProbability)}}__name(_temp9$1,"_temp9$1");function _temp10$1(t0){const{datum:datum_1,yKey:yKey_1,xKey:xKey_1}=t0;return{content:`${DateTime.fromJSDate(datum_1[xKey_1]).year} ${formatCashShort(datum_1[yKey_1])} ${formatPercent(datum_1.medProbability)}`}}__name(_temp10$1,"_temp10$1");function _temp11$1(params_1){const color_1=getProbablityColor(params_1.datum.highProbability);return{fill:color_1,stroke:color_1}}__name(_temp11$1,"_temp11$1");function _temp12$1(t0){const{datum:datum_2,yKey:yKey_2,xKey:xKey_2}=t0;return{content:`${DateTime.fromJSDate(datum_2[xKey_2]).year} ${formatCashShort(datum_2[yKey_2])} ${formatPercent(datum_2.highProbability)}`}}__name(_temp12$1,"_temp12$1");function _temp13(params_2){return formatCash(params_2.value)}__name(_temp13,"_temp13");const IncomePerPeriodTooltip=__name(props=>{const $=compilerRuntimeExports.c(11),{incomePerPeriod}=props;let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0={width:"max-content"},$[0]=t0):t0=$[0];let t1;$[1]!==incomePerPeriod?(t1=incomePerPeriod.map(_temp$e),$[1]=incomePerPeriod,$[2]=t1):t1=$[2];let t2;$[3]===Symbol.for("react.memo_cache_sentinel")?(t2=jsx(TableCell,{colSpan:4,children:"Total:"}),$[3]=t2):t2=$[3];let t3;$[4]!==incomePerPeriod?(t3=incomePerPeriod.reduce(_temp2$9,0),$[4]=incomePerPeriod,$[5]=t3):t3=$[5];let t4;$[6]!==t3?(t4=jsxs(TableRow,{children:[t2,jsx(TableCell,{children:jsx(Cash,{value:t3,compact:!1})})]}),$[6]=t3,$[7]=t4):t4=$[7];let t5;return $[8]!==t1||$[9]!==t4?(t5=jsx(Table,{sx:t0,children:jsxs(TableBody,{children:[t1,t4]})}),$[8]=t1,$[9]=t4,$[10]=t5):t5=$[10],t5},"IncomePerPeriodTooltip");function _temp$e(t0,index){const{start,end,value,perPayday,count}=t0;return jsxs(TableRow,{children:[jsx(TableCell,{children:jsx(Cash,{value,compact:!1})}),jsx(TableCell,{children:start.toFormat(shortDate)}),jsx(TableCell,{children:jsx(ArrowForwardIcon,{})}),jsx(TableCell,{children:end.toFormat(shortDate)}),jsxs(TableCell,{children:[jsx(Cash,{value:perPayday,compact:!1})," x ",count]})]},index)}__name(_temp$e,"_temp$e");function _temp2$9(acc,curr){return curr.value+acc}__name(_temp2$9,"_temp2$9");const createMeritColumnConfig=__name(()=>[{colId:"enabled",cellStyle:{display:"inline-flex",padding:"0px"},sortable:!1,filter:!1,width:50,cellRenderer:__name(params=>{var _a;return jsx(Stack,{direction:"row",spacing:1,alignItems:"center",children:jsx(Checkbox,{checked:(_a=params.data)==null?void 0:_a.enabled,disableRipple:!0,onClick:__name(()=>{params.data&&updateProjectedIncomeMerit(params.data,{...params.data,enabled:!params.data.enabled})},"onClick")})})},"cellRenderer")},{headerName:"Year",colId:"date",sort:"desc",width:85,valueFormatter:__name(params=>{var _a,_b;return(_a=params.data)!=null&&_a.date?DateTime.fromISO((_b=params.data)==null?void 0:_b.date).toFormat("yyyy"):""},"valueFormatter"),valueGetter:__name(params=>{var _a;return(_a=params.data)==null?void 0:_a.date},"valueGetter"),cellEditor:"agNumberCellEditor",editable:!0,valueSetter:__name(params=>{const date=DateTime.fromISO(params.data.date).set({year:params.newValue});return date.isValid?(updateProjectedIncomeMerit(params.data,{...params.data,date:date.toISO()}),!0):!1},"valueSetter")},{width:150,headerName:"Merit Increase",valueGetter:__name(params=>{var _a;return(((_a=params.data)==null?void 0:_a.meritIncreasePct)??0)*100},"valueGetter"),cellRenderer:__name(params=>jsx(Percent,{value:params.value/100}),"cellRenderer"),type:"numericColumn",editable:!0,cellEditor:"agNumberCellEditor",valueSetter:__name(params=>(updateProjectedIncomeMerit(params.data,{...params.data,meritIncreasePct:params.newValue/100}),!0),"valueSetter")},{width:135,headerName:"Merit Bonus",valueGetter:__name(params=>{var _a;return(((_a=params.data)==null?void 0:_a.meritBonusPct)??0)*100},"valueGetter"),cellRenderer:__name(params=>jsx(Percent,{value:params.value/100}),"cellRenderer"),type:"numericColumn",editable:!0,cellEditor:"agNumberCellEditor",valueSetter:__name(params=>(updateProjectedIncomeMerit(params.data,{...params.data,meritBonusPct:params.newValue/100}),!0),"valueSetter")},{width:100,headerName:"Equity",valueGetter:__name(params=>{var _a;return(((_a=params.data)==null?void 0:_a.equityPct)??0)*100},"valueGetter"),cellRenderer:__name(params=>jsx(Percent,{value:params.value/100}),"cellRenderer"),type:"numericColumn",editable:!0,cellEditor:"agNumberCellEditor",valueSetter:__name(params=>(updateProjectedIncomeMerit(params.data,{...params.data,equityPct:params.newValue/100}),!0),"valueSetter")},{width:225,headerName:"Rating",valueGetter:__name(params=>{var _a,_b;return(_a=params.data)!=null&&_a.rating?ratingsLabels[(_b=params.data)==null?void 0:_b.rating]:"None"},"valueGetter"),cellEditor:"agSelectCellEditor",cellEditorParams:{values:["None",...Object.values(ratings).map(x=>ratingsLabels[x])]},editable:!0,valueSetter:__name(params=>{var _a;const rating=(_a=Object.entries(ratingsLabels).find(([,label])=>params.newValue===label))==null?void 0:_a[0];return rating?(updateProjectedIncomeMerit(params.data,{...params.data,rating}),!0):!1},"valueSetter")},{colId:"actions",flex:1,cellStyle:{display:"inline-flex",padding:"0px"},sortable:!1,filter:!1,cellRenderer:__name(params=>jsx(Stack,{direction:"row",spacing:1,alignItems:"center",children:jsx(Tooltip,{title:"Delete",children:jsx(Button,{onClick:__name(()=>{params.data&&removeProjectedIncomeMerit(params.data)},"onClick"),size:"small",color:"error",children:jsx(DeleteForever,{})})})}),"cellRenderer")}],"createMeritColumnConfig"),disabledStyle={color:"grey"},meritData=z.object({date:z.string(),meritIncreasePct:z.string().refine(x=>!Number.isNaN(Number(x))),meritBonusPct:z.string().refine(x=>!Number.isNaN(Number(x))),equityPct:z.string().refine(x=>!Number.isNaN(Number(x))),rating:z.nativeEnum(ratings),enabled:z.boolean()}),MeritEntry=__name(()=>{const $=compilerRuntimeExports.c(38),merit=useStore(store,_temp$d);let t0;$[0]!==merit?(t0=merit.map(_temp2$8).reduce(_temp3$6,DateTime.fromObject({year:0})).plus({year:1}).toISO(),$[0]=merit,$[1]=t0):t0=$[1];const defaultDate=t0;let t1;$[2]!==defaultDate?(t1={date:defaultDate,meritIncreasePct:"0",meritBonusPct:"0",equityPct:"0",enabled:!0},$[2]=defaultDate,$[3]=t1):t1=$[3];const t2=t1;let t3;$[4]!==merit?(t3={onSubmit:__name(t42=>{var _a;const{value}=t42,year2=DateTime.fromISO(value.date).year,errors={};return findSameYear(year2,merit)&&(errors.date="Duplicate year"),(_a=meritData.safeParse(value).error)==null||_a.errors.forEach(x_0=>{errors[x_0.path.toString()]=x_0.message}),{fields:errors}},"onSubmit")},$[4]=merit,$[5]=t3):t3=$[5];let t4;$[6]!==t2||$[7]!==t3?(t4={defaultValues:t2,validators:t3,onSubmit:_temp4$5},$[6]=t2,$[7]=t3,$[8]=t4):t4=$[8];const form=useForm(t4);let t5;$[9]!==form.Field?(t5=jsx(Grid,{size:6,children:jsx(form.Field,{name:"date",children:_temp5})}),$[9]=form.Field,$[10]=t5):t5=$[10];let t6;$[11]!==form.Field?(t6=jsx(Grid,{size:6,children:jsx(form.Field,{name:"rating",children:_temp7})}),$[11]=form.Field,$[12]=t6):t6=$[12];let t7;$[13]!==form.Field?(t7=jsx(Grid,{size:4,children:jsx(form.Field,{name:"meritIncreasePct",children:_temp8})}),$[13]=form.Field,$[14]=t7):t7=$[14];let t8;$[15]!==form.Field?(t8=jsx(Grid,{size:4,children:jsx(form.Field,{name:"meritBonusPct",children:_temp9})}),$[15]=form.Field,$[16]=t8):t8=$[16];let t9;$[17]!==form.Field?(t9=jsx(Grid,{size:4,children:jsx(form.Field,{name:"equityPct",children:_temp10})}),$[17]=form.Field,$[18]=t9):t9=$[18];let t10;$[19]!==form?(t10=__name(t112=>{const[canSubmit,isSubmitting]=t112;return jsx(Fragment,{children:jsx(Button,{fullWidth:!0,type:"submit",disabled:!canSubmit,onClick:__name(e_3=>{e_3.preventDefault(),e_3.stopPropagation(),form.handleSubmit()},"onClick"),children:isSubmitting?"...":"Submit"})})},"t10"),$[19]=form,$[20]=t10):t10=$[20];let t11;$[21]!==form.Subscribe||$[22]!==t10?(t11=jsx(form.Subscribe,{selector:_temp11,children:t10}),$[21]=form.Subscribe,$[22]=t10,$[23]=t11):t11=$[23];let t12;$[24]!==t11||$[25]!==t5||$[26]!==t6||$[27]!==t7||$[28]!==t8||$[29]!==t9?(t12=jsx("form",{children:jsxs(Grid,{container:!0,spacing:2,flex:"0 1 auto",children:[t5,t6,t7,t8,t9,t11]})}),$[24]=t11,$[25]=t5,$[26]=t6,$[27]=t7,$[28]=t8,$[29]=t9,$[30]=t12):t12=$[30];let t13;$[31]===Symbol.for("react.memo_cache_sentinel")?(t13={paddingTop:2,flex:"1 1 auto"},$[31]=t13):t13=$[31];let t14;$[32]===Symbol.for("react.memo_cache_sentinel")?(t14=createMeritColumnConfig(),$[32]=t14):t14=$[32];let t15;$[33]!==merit?(t15=jsx(Box,{sx:t13,children:jsx(AgGrid,{getRowStyle:_temp12,rowData:merit,columnDefs:t14,id:"merit-history",stopEditingWhenCellsLoseFocus:!0})}),$[33]=merit,$[34]=t15):t15=$[34];let t16;return $[35]!==t12||$[36]!==t15?(t16=jsxs(Box,{display:"flex",flexDirection:"column",height:"100%",children:[t12,t15]}),$[35]=t12,$[36]=t15,$[37]=t16):t16=$[37],t16},"MeritEntry"),MeritEntryLayout=__name(props=>{const $=compilerRuntimeExports.c(6),{title}=props;let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0={padding:2,height:"100%",width:850,flexShrink:0},$[0]=t0):t0=$[0];let t1;$[1]!==title?(t1=jsx(Box,{flex:"0 1 auto",marginBottom:4,display:"flex",alignItems:"center",justifyContent:"space-between",children:jsxs(Typography,{variant:"h5",children:[title," (%)"]})}),$[1]=title,$[2]=t1):t1=$[2];let t2;$[3]===Symbol.for("react.memo_cache_sentinel")?(t2=jsx(Box,{flex:"1 1 auto",children:jsx(MeritEntry,{})}),$[3]=t2):t2=$[3];let t3;return $[4]!==t1?(t3=jsx(Paper,{sx:t0,children:jsxs(Box,{display:"flex",flexDirection:"column",height:"100%",children:[t1,t2]})}),$[4]=t1,$[5]=t3):t3=$[5],t3},"MeritEntryLayout");function _temp$d(state){return state.projectedIncome.timeSeries.meritPct}__name(_temp$d,"_temp$d");function _temp2$8(x){return DateTime.fromISO(x.date)}__name(_temp2$8,"_temp2$8");function _temp3$6(acc,curr){return curr>acc?curr:acc}__name(_temp3$6,"_temp3$6");async function _temp4$5(t0){const{value:value_0}=t0,{date,meritIncreasePct,meritBonusPct,equityPct,rating,enabled}=value_0;addProjectedIncomeMeritPct({date,meritIncreasePct:+meritIncreasePct/100,meritBonusPct:+meritBonusPct/100,equityPct:+equityPct/100,rating,enabled})}__name(_temp4$5,"_temp4$5");function _temp5(field){return jsx(DatePicker,{sx:{width:"100%"},format:"yyyy",views:["year"],label:"Year",value:DateTime.fromISO(field.state.value),onChange:__name(value_1=>{value_1&&field.handleChange(value_1.toISO())},"onChange"),slotProps:{textField:{helperText:field.state.meta.errors.join(", "),error:field.state.meta.errors.length>0}}})}__name(_temp5,"_temp5");function _temp6(value_2){return jsx(MenuItem,{value:value_2,children:ratingsLabels[value_2]},value_2)}__name(_temp6,"_temp6");function _temp7(field_0){return jsxs(FormControl,{fullWidth:!0,children:[jsx(InputLabel,{id:"rating-select-label",children:"Rating"}),jsxs(Select,{labelId:"rating-select-label",fullWidth:!0,value:field_0.state.value||"",onChange:__name(e=>field_0.handleChange(e.target.value),"onChange"),error:field_0.state.meta.errors.length>0,label:"Rating",children:[jsx(MenuItem,{value:"",children:jsx("em",{children:"None"})}),Object.values(ratings).map(_temp6)]})]})}__name(_temp7,"_temp7");function _temp8(field_1){return jsx(TextField,{label:"Merit Increase",value:field_1.state.value,placeholder:"0",onChange:__name(e_0=>field_1.handleChange(e_0.target.value),"onChange"),error:field_1.state.meta.errors.length>0,helperText:field_1.state.meta.errors.join(", "),slotProps:{input:{startAdornment:jsx(InputAdornment,{position:"start",children:"%"})}}})}__name(_temp8,"_temp8");function _temp9(field_2){return jsx(TextField,{label:"Merit Bonus",value:field_2.state.value,placeholder:"0",onChange:__name(e_1=>field_2.handleChange(e_1.target.value),"onChange"),error:field_2.state.meta.errors.length>0,helperText:field_2.state.meta.errors.join(", "),slotProps:{input:{startAdornment:jsx(InputAdornment,{position:"start",children:"%"})}}})}__name(_temp9,"_temp9");function _temp10(field_3){return jsx(TextField,{label:"Equity",value:field_3.state.value,placeholder:"0",onChange:__name(e_2=>field_3.handleChange(e_2.target.value),"onChange"),error:field_3.state.meta.errors.length>0,helperText:field_3.state.meta.errors.join(", "),slotProps:{input:{startAdornment:jsx(InputAdornment,{position:"start",children:"%"})}}})}__name(_temp10,"_temp10");function _temp11(state_0){return[state_0.canSubmit,state_0.isSubmitting]}__name(_temp11,"_temp11");function _temp12(x_1){return x_1.data.enabled?void 0:disabledStyle}__name(_temp12,"_temp12");const usePayments=__name(year2=>{var _a;const $=compilerRuntimeExports.c(9),dateRanges=useDateRanges(year2),clusters2=useClusters(year2);if(clusters2.pay.length!==1){let t02;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t02={},$[0]=t02):t02=$[0],t02}let firstScenario,t0;if($[1]!==clusters2.scenarios||$[2]!==dateRanges){firstScenario=(_a=clusters2.scenarios)==null?void 0:_a.at(0);const payPeriods=(firstScenario==null?void 0:firstScenario.payments.filter(_temp$c).filter(x_0=>{const payedOn=DateTime.fromISO(x_0.payedOn);return payedOn>=dateRanges.base.start&&payedOn<=dateRanges.base.end}))??[];t0=ChunkByEquality(payPeriods,_temp2$7).map(_temp4$4),$[1]=clusters2.scenarios,$[2]=dateRanges,$[3]=firstScenario,$[4]=t0}else firstScenario=$[3],t0=$[4];const paychecks=t0,t1=firstScenario==null?void 0:firstScenario.aprToApr,t2=firstScenario==null?void 0:firstScenario.basePay;let t3;return $[5]!==paychecks||$[6]!==t1||$[7]!==t2?(t3={aprToApr:t1,basePay:t2,paychecks},$[5]=paychecks,$[6]=t1,$[7]=t2,$[8]=t3):t3=$[8],t3},"usePayments"),ProjectedIncome=__name(()=>{const $=compilerRuntimeExports.c(113);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=getLocalDateTime(),$[0]=t0):t0=$[0];const[selectedYear,setSelectedYear]=reactExports.useState(t0.year),{aprToApr,basePay,paychecks}=usePayments(selectedYear),clusters2=useClusters(selectedYear),dates=useDates(selectedYear),scenarios=useStore(scenarioStore);let t1;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1=jsx("span",{children:"Income"}),$[1]=t1):t1=$[1];let t2;$[2]!==dates.companyBonus?(t2=jsx(CountDown,{dateTime:dates.companyBonus,variant:"date",dateFormat:monthDay}),$[2]=dates.companyBonus,$[3]=t2):t2=$[3];let t3;$[4]===Symbol.for("react.memo_cache_sentinel")?(t3=jsx(IncomeChart,{}),$[4]=t3):t3=$[4];let t4;$[5]===Symbol.for("react.memo_cache_sentinel")?(t4={display:"flex",marginLeft:"auto",alignItems:"center",flexWrap:"wrap"},$[5]=t4):t4=$[5];let t5;$[6]!==scenarios.loading?(t5=scenarios.loading&&jsx(CircularProgress,{style:{width:20,height:20}}),$[6]=scenarios.loading,$[7]=t5):t5=$[7];let t6;$[8]!==t5?(t6=jsx(Box$1,{sx:t4,children:t5}),$[8]=t5,$[9]=t6):t6=$[9];let t7;$[10]===Symbol.for("react.memo_cache_sentinel")?(t7={width:90,marginRight:2},$[10]=t7):t7=$[10];let t8;$[11]===Symbol.for("react.memo_cache_sentinel")?(t8=["year"],$[11]=t8):t8=$[11];let t9;$[12]!==scenarios.minYear?(t9=getLocalDateTime().set({year:scenarios.minYear}),$[12]=scenarios.minYear,$[13]=t9):t9=$[13];let t10;$[14]!==scenarios.maxYear?(t10=getLocalDateTime().set({year:scenarios.maxYear}),$[14]=scenarios.maxYear,$[15]=t10):t10=$[15];let t11,t12,t13;$[16]===Symbol.for("react.memo_cache_sentinel")?(t11=getLocalDateTime(),t12={textField:{variant:"standard",label:""}},t13=__name(value=>{setSelectedYear((value==null?void 0:value.year)??getLocalDateTime().year)},"t13"),$[16]=t11,$[17]=t12,$[18]=t13):(t11=$[16],t12=$[17],t13=$[18]);let t14;$[19]!==t10||$[20]!==t9?(t14=jsx(DatePicker,{sx:t7,label:"year",views:t8,minDate:t9,maxDate:t10,defaultValue:t11,slotProps:t12,onChange:t13}),$[19]=t10,$[20]=t9,$[21]=t14):t14=$[21];let t15;$[22]!==t14||$[23]!==t2||$[24]!==t6?(t15=jsxs(Box$1,{display:"flex",alignItems:"center",gap:2,width:"100%",children:[t1,t2,t3,t6,t14]}),$[22]=t14,$[23]=t2,$[24]=t6,$[25]=t15):t15=$[25];let t16;$[26]!==clusters2.totalPay||$[27]!==dates.companyBonus?(t16=jsx(ClusterValues,{clusters:clusters2.totalPay,eventDate:dates.companyBonus}),$[26]=clusters2.totalPay,$[27]=dates.companyBonus,$[28]=t16):t16=$[28];let t17;$[29]!==t15||$[30]!==t16?(t17=jsx(Card,{title:t15,children:t16}),$[29]=t15,$[30]=t16,$[31]=t17):t17=$[31];let t18;$[32]===Symbol.for("react.memo_cache_sentinel")?(t18=jsx("span",{children:"Paycheck"}),$[32]=t18):t18=$[32];let t19;$[33]!==dates.meritIncrease?(t19=jsxs(Box$1,{display:"flex",width:"max-content",gap:2,marginRight:2,children:[t18,jsx(CountDown,{dateTime:dates.meritIncrease,variant:"date",dateFormat:monthDay})]}),$[33]=dates.meritIncrease,$[34]=t19):t19=$[34];let t20;$[35]!==basePay||$[36]!==clusters2.pay||$[37]!==dates.meritIncrease?(t20=!basePay&&jsx(ClusterValues,{clusters:clusters2.pay,eventDate:dates.meritIncrease,compact:!1}),$[35]=basePay,$[36]=clusters2.pay,$[37]=dates.meritIncrease,$[38]=t20):t20=$[38];let t21;$[39]!==aprToApr||$[40]!==basePay||$[41]!==clusters2.pay||$[42]!==paychecks?(t21=basePay&&jsxs(Fragment,{children:[jsx(ClusterValue,{...clusters2.pay[0],title:"Paycheck",compact:!1}),jsx(Tooltip,{placement:"bottom",slotProps:{tooltip:{sx:{maxWidth:"none"}}},title:paychecks&&jsx(IncomePerPeriodTooltip,{incomePerPeriod:paychecks}),children:jsx("div",{children:jsx(Value,{title:"Base Pay",children:jsx(Cash,{disableTooltip:!0,value:basePay})})})}),jsx(Value,{title:"APR to APR",children:jsx(Cash,{value:aprToApr})})]}),$[39]=aprToApr,$[40]=basePay,$[41]=clusters2.pay,$[42]=paychecks,$[43]=t21):t21=$[43];let t22;$[44]!==t19||$[45]!==t20||$[46]!==t21?(t22=jsxs(Card,{title:t19,children:[t20,t21]}),$[44]=t19,$[45]=t20,$[46]=t21,$[47]=t22):t22=$[47];let t23;$[48]===Symbol.for("react.memo_cache_sentinel")?(t23=jsx("span",{children:"Merit Increase"}),$[48]=t23):t23=$[48];let t24;$[49]!==dates.meritIncrease?(t24=jsxs(Box$1,{display:"flex",width:"max-content",gap:2,marginRight:2,children:[t23,jsx(CountDown,{dateTime:dates.meritIncrease,variant:"date",dateFormat:monthDay})]}),$[49]=dates.meritIncrease,$[50]=t24):t24=$[50];let t25;$[51]!==clusters2.meritIncrease||$[52]!==dates.meritIncrease?(t25=jsx(ClusterValues,{clusters:clusters2.meritIncrease,eventDate:dates.meritIncrease}),$[51]=clusters2.meritIncrease,$[52]=dates.meritIncrease,$[53]=t25):t25=$[53];let t26;$[54]!==t24||$[55]!==t25?(t26=jsx(Card,{title:t24,children:t25}),$[54]=t24,$[55]=t25,$[56]=t26):t26=$[56];let t27;$[57]===Symbol.for("react.memo_cache_sentinel")?(t27=jsx("span",{children:"Merit Bonus"}),$[57]=t27):t27=$[57];let t28;$[58]!==dates.meritBonus?(t28=jsxs(Box$1,{display:"flex",width:"max-content",gap:2,marginRight:2,children:[t27,jsx(CountDown,{dateTime:dates.meritBonus,variant:"date",dateFormat:monthDay})]}),$[58]=dates.meritBonus,$[59]=t28):t28=$[59];let t29;$[60]!==clusters2.meritBonus||$[61]!==dates.meritBonus?(t29=jsx(ClusterValues,{clusters:clusters2.meritBonus,eventDate:dates.meritBonus}),$[60]=clusters2.meritBonus,$[61]=dates.meritBonus,$[62]=t29):t29=$[62];let t30;$[63]!==t28||$[64]!==t29?(t30=jsx(Card,{title:t28,children:t29}),$[63]=t28,$[64]=t29,$[65]=t30):t30=$[65];let t31;$[66]===Symbol.for("react.memo_cache_sentinel")?(t31=jsx("span",{children:"Company Bonus"}),$[66]=t31):t31=$[66];let t32;$[67]!==dates.companyBonus?(t32=jsxs(Box$1,{display:"flex",width:"max-content",gap:2,marginRight:2,children:[t31,jsx(CountDown,{dateTime:dates.companyBonus,variant:"date",dateFormat:monthDay})]}),$[67]=dates.companyBonus,$[68]=t32):t32=$[68];let t33;$[69]!==clusters2.companyBonus||$[70]!==dates.companyBonus?(t33=jsx(ClusterValues,{clusters:clusters2.companyBonus,eventDate:dates.companyBonus}),$[69]=clusters2.companyBonus,$[70]=dates.companyBonus,$[71]=t33):t33=$[71];let t34;$[72]!==t32||$[73]!==t33?(t34=jsx(Card,{title:t32,children:t33}),$[72]=t32,$[73]=t33,$[74]=t34):t34=$[74];let t35;$[75]===Symbol.for("react.memo_cache_sentinel")?(t35=jsx("span",{children:"Retirement Bonus"}),$[75]=t35):t35=$[75];let t36;$[76]!==dates.retirementBonus?(t36=jsxs(Box$1,{display:"flex",width:"max-content",gap:2,marginRight:2,children:[t35,jsx(CountDown,{dateTime:dates.retirementBonus,variant:"date",dateFormat:monthDay})]}),$[76]=dates.retirementBonus,$[77]=t36):t36=$[77];let t37;$[78]!==clusters2.retirementBonus||$[79]!==dates.retirementBonus?(t37=jsx(ClusterValues,{clusters:clusters2.retirementBonus,eventDate:dates.retirementBonus}),$[78]=clusters2.retirementBonus,$[79]=dates.retirementBonus,$[80]=t37):t37=$[80];let t38;$[81]!==t36||$[82]!==t37?(t38=jsx(Card,{title:t36,children:t37}),$[81]=t36,$[82]=t37,$[83]=t38):t38=$[83];let t39;$[84]!==t17||$[85]!==t22||$[86]!==t26||$[87]!==t30||$[88]!==t34||$[89]!==t38?(t39=jsx(Box$1,{flex:"0 1 auto",maxWidth:500,height:"100%",children:jsxs(Stack$1,{gap:2,direction:"column",overflow:"auto",height:"100%",paddingRight:1,minWidth:500,children:[t17,t22,t26,t30,t34,t38]})}),$[84]=t17,$[85]=t22,$[86]=t26,$[87]=t30,$[88]=t34,$[89]=t38,$[90]=t39):t39=$[90];let t40;$[91]!==selectedYear?(t40=DateTime.fromObject({day:1,month:4,year:selectedYear}),$[91]=selectedYear,$[92]=t40):t40=$[92];let t41;$[93]!==t40?(t41=jsx(DataEntryLayout,{dateVariant:"year",accountName:"paycheck",variant:"cash",defaultDate:t40,title:"Income Per Paycheck"}),$[93]=t40,$[94]=t41):t41=$[94];let t42,t43;$[95]!==dates.meritBonus?(t42=jsx(MeritEntryLayout,{title:"Merit Factors",defaultDate:dates.meritBonus}),t43=jsx(DataEntryLayout,{title:"Merit Bonus",accountName:"meritBonus",variant:"cash",defaultDate:dates.meritBonus}),$[95]=dates.meritBonus,$[96]=t42,$[97]=t43):(t42=$[96],t43=$[97]);let t44,t45;$[98]!==dates.companyBonus?(t44=jsx(DataEntryLayout,{title:"Company Bonus Factor",accountName:"companyBonusPct",defaultDate:dates.companyBonus,variant:"percent",dateVariant:"year"}),t45=jsx(DataEntryLayout,{title:"Company Bonus",accountName:"companyBonus",defaultDate:dates.companyBonus,variant:"cash"}),$[98]=dates.companyBonus,$[99]=t44,$[100]=t45):(t44=$[99],t45=$[100]);let t46;$[101]!==dates.retirementBonus?(t46=jsx(DataEntryLayout,{title:"Retirement Bonus",accountName:"retirementBonus",defaultDate:dates.retirementBonus,variant:"cash"}),$[101]=dates.retirementBonus,$[102]=t46):t46=$[102];let t47;$[103]!==t41||$[104]!==t42||$[105]!==t43||$[106]!==t44||$[107]!==t45||$[108]!==t46?(t47=jsx(Box$1,{flex:"1 1 auto",overflow:"auto",paddingBottom:2,paddingLeft:1,children:jsxs(Box$1,{display:"flex",height:"100%",width:"100%",gap:2,children:[t41,t42,t43,t44,t45,t46]})}),$[103]=t41,$[104]=t42,$[105]=t43,$[106]=t44,$[107]=t45,$[108]=t46,$[109]=t47):t47=$[109];let t48;return $[110]!==t39||$[111]!==t47?(t48=jsxs(Box$1,{display:"flex",flexDirection:"row",height:"100%",width:"100%",children:[t39,t47]}),$[110]=t39,$[111]=t47,$[112]=t48):t48=$[112],t48},"ProjectedIncome");function _temp$c(x){return x.type===PaymentTypes.regular}__name(_temp$c,"_temp$c");function _temp2$7(x_1){return x_1.value}__name(_temp2$7,"_temp2$7");function _temp3$5(acc,curr_0){return acc+curr_0.value}__name(_temp3$5,"_temp3$5");function _temp4$4(curr){return{start:DateTime.fromISO(curr[0].payedOn),end:DateTime.fromISO(curr[curr.length-1].payedOn),value:curr.reduce(_temp3$5,0),perPayday:curr[0].value,count:curr.length,type:curr[0].type}}__name(_temp4$4,"_temp4$4");const isFuture=__name(date=>date.diffNow("milliseconds").milliseconds>0,"isFuture"),useFutureMortgageEquity=__name(year2=>{const $=compilerRuntimeExports.c(5),accounts=useStore(store,_temp$b),mortgages=Object.values(accounts).filter(_temp2$6),localDate=useLocalDateTime();let t0;$[0]!==year2?(t0=DateTime.fromObject({month:1,day:1,year:year2}),$[0]=year2,$[1]=t0):t0=$[1];const januaryFirstSelectedYear=t0;if(year2<localDate.year)return 0;let t1;return $[2]!==januaryFirstSelectedYear||$[3]!==localDate?(t1=__name(x_1=>{if(!x_1.loan)return 0;const startDate=localDate<januaryFirstSelectedYear?januaryFirstSelectedYear:localDate.endOf("month"),endDate=startDate.endOf("year");return calcLoanBalance(startDate,x_1.loan)-calcLoanBalance(endDate,x_1.loan)},"t1"),$[2]=januaryFirstSelectedYear,$[3]=localDate,$[4]=t1):t1=$[4],mortgages.map(t1).reduce(_temp3$4,0)},"useFutureMortgageEquity");function _temp$b(x){return x.wealth}__name(_temp$b,"_temp$b");function _temp2$6(x_0){return x_0.type==="mortgage"}__name(_temp2$6,"_temp2$6");function _temp3$4(acc,curr){return acc+curr}__name(_temp3$4,"_temp3$4");const useFutureRetirementContributions=__name(year2=>{var _a;const $=compilerRuntimeExports.c(5);let t0;$[0]!==year2?(t0=__name(x=>x.scenarios[year2],"t0"),$[0]=year2,$[1]=t0):t0=$[1];const scenarios=useStore(scenarioStore,t0),retirementContribution=useStore(store,_temp$a),remainingRegularPayments=((_a=scenarios==null?void 0:scenarios.at(0))==null?void 0:_a.remainingRegularPayments)??0,t1=Math.min(remainingRegularPayments,PAYMENTS_PER_YEAR)*retirementContribution;let t2;return $[2]!==retirementContribution||$[3]!==t1?(t2={remaining:t1,perPaycheck:retirementContribution},$[2]=retirementContribution,$[3]=t1,$[4]=t2):t2=$[4],t2},"useFutureRetirementContributions");function _temp$a(x_0){return x_0.projectedWealth.retirementContributionPaycheck}__name(_temp$a,"_temp$a");const useFutureSavings=__name(year2=>{var _a;const $=compilerRuntimeExports.c(5),savingsPerPaycheck=useStore(store,_temp$9);let t0;$[0]!==year2?(t0=__name(x_0=>x_0.scenarios[year2],"t0"),$[0]=year2,$[1]=t0):t0=$[1];const scenarios=useStore(scenarioStore,t0),remainingRegularPayments=((_a=scenarios==null?void 0:scenarios.at(0))==null?void 0:_a.remainingRegularPayments)??0,t1=savingsPerPaycheck*Math.min(remainingRegularPayments,PAYMENTS_PER_YEAR);let t2;return $[2]!==savingsPerPaycheck||$[3]!==t1?(t2={remaining:t1,perPaycheck:savingsPerPaycheck},$[2]=savingsPerPaycheck,$[3]=t1,$[4]=t2):t2=$[4],t2},"useFutureSavings");function _temp$9(x){return x.projectedWealth.savingsPerPaycheck}__name(_temp$9,"_temp$9");const getThresholdTaxRemaining=__name((taxRate,threshold,scenario)=>scenario.payments.slice(scenario.currentPaymentIdx).filter(x=>x.cumulative>=threshold&&isFuture(DateTime.fromISO(x.payedOn))).reduce((acc,curr)=>acc+Math.min(curr.value,curr.cumulative-threshold)*taxRate,0),"getThresholdTaxRemaining"),useFutureSocialSecurity=__name(year2=>{const config=useStore(store,_temp$8);return useThresholdTax(year2,config.socialSecurityLimit,config.socialSecurityTaxRate)},"useFutureSocialSecurity"),useFutureMedicareTax=__name(year2=>{const $=compilerRuntimeExports.c(3),config=useStore(store,_temp2$5),taxes=useThresholdTax(year2,config.medicareSupplementalTaxThreshold,-1*config.medicareSupplementalTaxRate);let t0;return $[0]!==taxes.max||$[1]!==taxes.min?(t0={min:taxes.max,max:taxes.min},$[0]=taxes.max,$[1]=taxes.min,$[2]=t0):t0=$[2],t0},"useFutureMedicareTax"),useThresholdTax=__name((year2,threshold,taxRate)=>{const $=compilerRuntimeExports.c(11);let t0;$[0]!==year2?(t0=__name(x=>x.scenarios[year2],"t0"),$[0]=year2,$[1]=t0):t0=$[1];const scenarios=useStore(scenarioStore,t0);let t1;$[2]!==scenarios?(t1=scenarios??[],$[2]=scenarios,$[3]=t1):t1=$[3];let t2;if($[4]!==t1||$[5]!==taxRate||$[6]!==threshold){let t3;$[8]!==taxRate||$[9]!==threshold?(t3=__name(x_0=>{var _a,_b,_c;const totalTaxable=((_a=x_0.payments.at(-1))==null?void 0:_a.cumulative)??0,taxableAmountOverThreshold=Math.max(0,totalTaxable-threshold),total=taxRate*taxableAmountOverThreshold,firstOccurrence=(_b=x_0.payments.find(x_1=>x_1.cumulative>threshold))==null?void 0:_b.payedOn,remaining=getThresholdTaxRemaining(taxRate,threshold,x_0),lastPaycheck=((_c=x_0.payments.at(-1))==null?void 0:_c.value)??0,perPaycheck=total&&taxRate*lastPaycheck;return{total,firstOccurrence:firstOccurrence?DateTime.fromISO(firstOccurrence):void 0,remaining,perPaycheck}},"t3"),$[8]=taxRate,$[9]=threshold,$[10]=t3):t3=$[10],t2=t1.map(t3).filter(_temp3$3).reduce(_temp4$3,{}),$[4]=t1,$[5]=taxRate,$[6]=threshold,$[7]=t2}else t2=$[7];return t2},"useThresholdTax");function _temp$8(x){return x.projectedWealth}__name(_temp$8,"_temp$8");function _temp2$5(x){return x.projectedWealth}__name(_temp2$5,"_temp2$5");function _temp3$3(x_2){return x_2.firstOccurrence}__name(_temp3$3,"_temp3$3");function _temp4$3(acc,curr,i){return i==0?{min:curr,max:curr}:(curr.total<acc.min.total&&(acc.min=curr),curr.total>acc.max.total&&(acc.max=curr),acc)}__name(_temp4$3,"_temp4$3");const useFutureTotals=__name((year2,t0)=>{const $=compilerRuntimeExports.c(15);let t1;$[0]!==t0?(t1=t0===void 0?{excludeHomeEquity:!1}:t0,$[0]=t0,$[1]=t1):t1=$[1];const options=t1,{excludeHomeEquity}=options;let t2;$[2]!==year2?(t2=__name(x=>x.scenarios[year2],"t2"),$[2]=year2,$[3]=t2):t2=$[3];const scenarios=useStore(scenarioStore,t2),bonusTakeHomeFactor=useStore(store,_temp$7),savings=useFutureSavings(year2),homeEquity=useFutureMortgageEquity(year2),retirement=useFutureRetirementContributions(year2),config=useStore(store,_temp2$4),dates=useDates(year2);let t3;if($[4]!==bonusTakeHomeFactor||$[5]!==config||$[6]!==dates||$[7]!==excludeHomeEquity||$[8]!==homeEquity||$[9]!==retirement||$[10]!==savings||$[11]!==scenarios){let t4;bb0:{const totals=scenarios==null?void 0:scenarios.map(x_2=>{const futureEvents=[isFuture(dates.meritBonus)&&x_2.meritBonus*bonusTakeHomeFactor,isFuture(dates.companyBonus)&&x_2.companyBonus*bonusTakeHomeFactor,isFuture(dates.retirementBonus)&&x_2.retirementBonus,getThresholdTaxRemaining(config.socialSecurityTaxRate,config.socialSecurityLimit,x_2),getThresholdTaxRemaining(-1*config.medicareSupplementalTaxRate,config.medicareSupplementalTaxThreshold,x_2),savings.remaining,retirement.remaining,excludeHomeEquity?0:homeEquity].filter(_temp3$2);return sumSimple(futureEvents)});if(!totals||totals.length===0){t4=[[savings.remaining+retirement.remaining]];break bb0}t4=ckmeans$1(totals,getClusterCount(totals,_temp4$2))}const rawClusters=t4,numValues=rawClusters.flat().length;let t5;$[13]!==numValues?(t5=__name((x_5,i,arr)=>({min:Math.min(...x_5),max:Math.max(...x_5),median:median(x_5),probability:x_5.length/numValues,title:clusterTitle(i,arr.length)}),"t5"),$[13]=numValues,$[14]=t5):t5=$[14],t3=rawClusters.map(t5),$[4]=bonusTakeHomeFactor,$[5]=config,$[6]=dates,$[7]=excludeHomeEquity,$[8]=homeEquity,$[9]=retirement,$[10]=savings,$[11]=scenarios,$[12]=t3}else t3=$[12];return t3},"useFutureTotals");function _temp$7(x_0){return 1-x_0.projectedWealth.bonusWithholdingsRate}__name(_temp$7,"_temp$7");function _temp2$4(x_1){return x_1.projectedWealth}__name(_temp2$4,"_temp2$4");function _temp3$2(x_3){return x_3}__name(_temp3$2,"_temp3$2");function _temp4$2(x_4){return x_4}__name(_temp4$2,"_temp4$2");const FutureEvents=__name(props=>{const $=compilerRuntimeExports.c(47),{year:year2,onChange}=props,dates=useDates(year2),savings=useFutureSavings(year2),retirement=useFutureRetirementContributions(year2),medicare=useFutureMedicareTax(year2),socialSecurity=useFutureSocialSecurity(year2),clusters2=useClusters(year2),bonusTakeHomeFactor=useStore(store,_temp$6),total=useFutureTotals(year2),equity=useFutureMortgageEquity(year2);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=jsx("span",{children:"Remaining Projected Wealth"}),$[0]=t0):t0=$[0];let t1;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1={width:90,marginRight:2,marginLeft:"auto"},$[1]=t1):t1=$[1];let t2,t3,t4;$[2]===Symbol.for("react.memo_cache_sentinel")?(t2=["year"],t3=getLocalDateTime(),t4=getLocalDateTime().plus({years:1}),$[2]=t2,$[3]=t3,$[4]=t4):(t2=$[2],t3=$[3],t4=$[4]);let t5;$[5]!==year2?(t5=getLocalDateTime().set({year:year2}),$[5]=year2,$[6]=t5):t5=$[6];let t6;$[7]===Symbol.for("react.memo_cache_sentinel")?(t6={textField:{variant:"standard",label:""}},$[7]=t6):t6=$[7];let t7;$[8]!==onChange?(t7=__name(data=>{data!=null&&data.year&&onChange(data==null?void 0:data.year)},"t7"),$[8]=onChange,$[9]=t7):t7=$[9];let t8;$[10]!==t5||$[11]!==t7?(t8=jsxs(Fragment,{children:[t0,jsx(DatePicker,{sx:t1,label:"year",views:t2,minDate:t3,maxDate:t4,value:t5,slotProps:t6,onChange:t7})]}),$[10]=t5,$[11]=t7,$[12]=t8):t8=$[12];let t9;$[13]!==dates.companyBonus||$[14]!==total?(t9=jsx(ClusterValues,{clusters:total,eventDate:dates.companyBonus}),$[13]=dates.companyBonus,$[14]=total,$[15]=t9):t9=$[15];let t10;$[16]!==t8||$[17]!==t9?(t10=jsx(Card,{title:t8,children:t9}),$[16]=t8,$[17]=t9,$[18]=t10):t10=$[18];let t11;$[19]!==bonusTakeHomeFactor||$[20]!==clusters2||$[21]!==dates.meritBonus?(t11=isFuture(dates.meritBonus)&&clusters2.meritBonus.length>0&&jsx(ClusterCard,{title:"Merit Bonus",date:dates.meritBonus,cluster:scaleClusters(clusters2.meritBonus,bonusTakeHomeFactor)}),$[19]=bonusTakeHomeFactor,$[20]=clusters2,$[21]=dates.meritBonus,$[22]=t11):t11=$[22];let t12;$[23]!==bonusTakeHomeFactor||$[24]!==clusters2||$[25]!==dates.companyBonus?(t12=isFuture(dates.companyBonus)&&clusters2.companyBonus.length>0&&jsx(ClusterCard,{title:"Company Bonus",date:dates.companyBonus,cluster:scaleClusters(clusters2.companyBonus,bonusTakeHomeFactor)}),$[23]=bonusTakeHomeFactor,$[24]=clusters2,$[25]=dates.companyBonus,$[26]=t12):t12=$[26];let t13;$[27]!==clusters2||$[28]!==dates.retirementBonus?(t13=isFuture(dates.retirementBonus)&&clusters2.retirementBonus.length>0&&jsx(ClusterCard,{title:"Retirement Bonus",date:dates.retirementBonus,cluster:clusters2.retirementBonus}),$[27]=clusters2,$[28]=dates.retirementBonus,$[29]=t13):t13=$[29];let t14;$[30]!==socialSecurity?(t14=!!socialSecurity.min&&jsx(ThresholdTaxCard,{thresholdTax:socialSecurity,title:"Social Security Limit"}),$[30]=socialSecurity,$[31]=t14):t14=$[31];let t15;$[32]!==medicare?(t15=!!medicare.min&&jsx(ThresholdTaxCard,{thresholdTax:medicare,title:"Medicare Supplemental Tax"}),$[32]=medicare,$[33]=t15):t15=$[33];let t16;$[34]!==equity||$[35]!==retirement||$[36]!==savings.perPaycheck||$[37]!==savings.remaining?(t16=(!!savings.perPaycheck||!!retirement.perPaycheck||!!equity)&&jsxs(Card,{title:"Savings & Retirement",children:[!!savings.perPaycheck&&jsx(Value,{title:"savings",secondaryValue:jsx(Cash,{tooltip:"Per Month",value:savings.perPaycheck}),children:jsx(Cash,{tooltip:"Total Remaining",value:savings.remaining})}),!!retirement.perPaycheck&&jsx(Value,{title:"retirement",secondaryValue:jsx(Cash,{tooltip:"Per Paycheck",value:retirement.perPaycheck}),children:jsx(Cash,{tooltip:"Total Remaining",value:retirement.remaining})}),!!equity&&jsx(Value,{title:"Home Equity",children:jsx(Cash,{tooltip:"Total Remaining",value:equity})})]}),$[34]=equity,$[35]=retirement,$[36]=savings.perPaycheck,$[37]=savings.remaining,$[38]=t16):t16=$[38];let t17;return $[39]!==t10||$[40]!==t11||$[41]!==t12||$[42]!==t13||$[43]!==t14||$[44]!==t15||$[45]!==t16?(t17=jsx(Fragment,{children:jsxs(Stack$1,{spacing:2,width:550,paddingRight:1,children:[t10,t11,t12,t13,t14,t15,t16]})}),$[39]=t10,$[40]=t11,$[41]=t12,$[42]=t13,$[43]=t14,$[44]=t15,$[45]=t16,$[46]=t17):t17=$[46],t17},"FutureEvents"),ThresholdTaxCard=__name(props=>{var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k;const $=compilerRuntimeExports.c(24),{thresholdTax,title}=props;let t0;$[0]!==title?(t0=jsx("span",{children:title}),$[0]=title,$[1]=t0):t0=$[1];const t1=(_a=thresholdTax.max)==null?void 0:_a.firstOccurrence;let t2;$[2]!==t1?(t2=jsx(CountDown,{dateFormat:monthDay,variant:"date",dateTime:t1}),$[2]=t1,$[3]=t2):t2=$[3];let t3;$[4]!==thresholdTax.max||$[5]!==thresholdTax.min?(t3=thresholdTax.min&&thresholdTax.max&&!thresholdTax.min.firstOccurrence.equals(thresholdTax.max.firstOccurrence)&&jsxs(Fragment,{children:[jsx("span",{children:"or"}),jsx(CountDown,{dateFormat:monthDay,variant:"date",dateTime:thresholdTax.min.firstOccurrence})]}),$[4]=thresholdTax.max,$[5]=thresholdTax.min,$[6]=t3):t3=$[6];let t4;$[7]!==t0||$[8]!==t2||$[9]!==t3?(t4=jsxs(Box$1,{display:"flex",width:"max-content",gap:1,marginRight:2,children:[t0,t2,t3]}),$[7]=t0,$[8]=t2,$[9]=t3,$[10]=t4):t4=$[10];let t5;$[11]!==thresholdTax.max||$[12]!==((_b=thresholdTax.min)==null?void 0:_b.total)?(t5=thresholdTax.max&&thresholdTax.max.total===((_c=thresholdTax.min)==null?void 0:_c.total)&&jsx(Value,{title:"Remaining",children:jsx(Cash,{value:(_d=thresholdTax.max)==null?void 0:_d.remaining,compact:!1})}),$[11]=thresholdTax.max,$[12]=(_e=thresholdTax.min)==null?void 0:_e.total,$[13]=t5):t5=$[13];let t6;$[14]!==thresholdTax.max||$[15]!==((_f=thresholdTax.min)==null?void 0:_f.total)?(t6=thresholdTax.max&&thresholdTax.max.total!==((_g=thresholdTax.min)==null?void 0:_g.total)&&jsxs(Fragment,{children:[jsx(Value,{title:thresholdTax.max.firstOccurrence>getLocalDateTime()?"Early":"Low",children:jsx(Cash,{value:(_h=thresholdTax.max)==null?void 0:_h.remaining,compact:!1})}),jsx(Value,{title:thresholdTax.max.firstOccurrence>getLocalDateTime()?"Late":"High",children:jsx(Cash,{value:(_i=thresholdTax.min)==null?void 0:_i.total,compact:!1})})]}),$[14]=thresholdTax.max,$[15]=(_j=thresholdTax.min)==null?void 0:_j.total,$[16]=t6):t6=$[16];const t7=(_k=thresholdTax.max)==null?void 0:_k.perPaycheck;let t8;$[17]!==t7?(t8=jsx(Value,{title:"Per Paycheck",children:jsx(Cash,{value:t7,compact:!1})}),$[17]=t7,$[18]=t8):t8=$[18];let t9;return $[19]!==t4||$[20]!==t5||$[21]!==t6||$[22]!==t8?(t9=jsxs(Card,{title:t4,children:[t5,t6,t8]}),$[19]=t4,$[20]=t5,$[21]=t6,$[22]=t8,$[23]=t9):t9=$[23],t9},"ThresholdTaxCard"),ClusterCard=__name(props=>{const $=compilerRuntimeExports.c(13),{date,cluster,title}=props;let t0;$[0]!==title?(t0=jsx("span",{children:title}),$[0]=title,$[1]=t0):t0=$[1];let t1;$[2]!==date?(t1=jsx(CountDown,{variant:"date",dateFormat:monthDay,dateTime:date}),$[2]=date,$[3]=t1):t1=$[3];let t2;$[4]!==t0||$[5]!==t1?(t2=jsxs(Box$1,{display:"flex",width:"max-content",gap:2,marginRight:2,children:[t0,t1]}),$[4]=t0,$[5]=t1,$[6]=t2):t2=$[6];let t3;$[7]!==cluster||$[8]!==date?(t3=jsx(ClusterValues,{clusters:cluster,eventDate:date}),$[7]=cluster,$[8]=date,$[9]=t3):t3=$[9];let t4;return $[10]!==t2||$[11]!==t3?(t4=jsx(Card,{title:t2,children:t3}),$[10]=t2,$[11]=t3,$[12]=t4):t4=$[12],t4},"ClusterCard");function _temp$6(x){return 1-x.projectedWealth.bonusWithholdingsRate}__name(_temp$6,"_temp$6");const useFuturesWealth=__name(()=>{var _a,_b,_c;const year2=getLocalDateTime().year,totals=useFutureTotals(year2,{excludeHomeEquity:!0}),totalsPlusOne=useFutureTotals(year2+1,{excludeHomeEquity:!0});return{[year2+1]:((_a=findMostMostLikely(totals))==null?void 0:_a.median)??0,[year2+2]:(((_b=findMostMostLikely(totals))==null?void 0:_b.median)??0)+(((_c=findMostMostLikely(totalsPlusOne))==null?void 0:_c.median)??0)}},"useFuturesWealth"),useTimeSeriesWealth=__name(year2=>{const $=compilerRuntimeExports.c(13);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=getLocalDateTime().startOf("day"),$[0]=t0):t0=$[0];const localDateTime=t0,earliest=useEarliestAccountEntry(),accounts=useStore(store,_temp$5),futuresWealth=useFuturesWealth();if(!earliest.isValid){let t12;return $[1]===Symbol.for("react.memo_cache_sentinel")?(t12=[],$[1]=t12):t12=$[1],t12}const t1=year2+2-earliest.year;let t2;if($[2]!==accounts||$[3]!==earliest.year||$[4]!==futuresWealth||$[5]!==t1){const dates=new Array(t1).fill(earliest.year).map(_temp2$3),futureBenchmarkIdx=findNearestIdxOnOrBefore(localDateTime,dates,_temp3$1);let t3;$[7]===Symbol.for("react.memo_cache_sentinel")?(t3=__name(x_2=>x_2.equals(localDateTime),"t3"),$[7]=t3):t3=$[7],dates.some(t3)||dates.splice(futureBenchmarkIdx+1,0,localDateTime);let t4;$[8]!==accounts||$[9]!==futuresWealth?(t4=__name(date=>{const accountWealth=Object.values(accounts).map(x_3=>{if(x_3.type==="mortgage"&&x_3.loan){const houseValue=findNearestOnOrBefore(date,x_3.data),balance=calcLoanBalance(date,x_3.loan);return calcEquity(x_3.loan.ownershipPct,houseValue==null?void 0:houseValue.value,balance,x_3.loan.principal)}else if(x_3.type==="account"){const entry=findNearestOnOrBefore(date,x_3.data);return(entry==null?void 0:entry.value)??0}return 0}).reduce(_temp4$1,0),futureWealth=futuresWealth[date.year]??0;return{date,graphDate:date.toJSDate(),wealth:accountWealth+futureWealth}},"t4"),$[8]=accounts,$[9]=futuresWealth,$[10]=t4):t4=$[10];let t5;$[11]!==futureBenchmarkIdx?(t5=__name((x_4,idx,arr)=>{var _a,_b;if(x_4.date<=localDateTime||x_4.date.year===localDateTime.year+2){const benchmarkWealth=(_a=arr[idx-1])==null?void 0:_a.wealth;return benchmarkWealth?{...x_4,yoyCash:x_4.wealth-benchmarkWealth,yoyPct:x_4.wealth/benchmarkWealth-1}:x_4}const benchmarkWealth_0=(_b=arr[futureBenchmarkIdx])==null?void 0:_b.wealth;return benchmarkWealth_0?{...x_4,yoyCash:x_4.wealth-benchmarkWealth_0,yoyPct:x_4.wealth/benchmarkWealth_0-1}:x_4},"t5"),$[11]=futureBenchmarkIdx,$[12]=t5):t5=$[12],t2=dates.map(t4).map(t5),$[2]=accounts,$[3]=earliest.year,$[4]=futuresWealth,$[5]=t1,$[6]=t2}else t2=$[6];return t2},"useTimeSeriesWealth");function _temp$5(x){return x.wealth}__name(_temp$5,"_temp$5");function _temp2$3(x_0,i){return DateTime.fromObject({day:1,month:1,year:x_0+i}).startOf("day")}__name(_temp2$3,"_temp2$3");function _temp3$1(x_1){return x_1}__name(_temp3$1,"_temp3$1");function _temp4$1(acc,curr){return acc+curr}__name(_temp4$1,"_temp4$1");const WealthChart=__name(props=>{var _a;const $=compilerRuntimeExports.c(11),dataYear=getLocalDateTime().year+1,{titleYear}=props,data=useTimeSeriesWealth(dataYear),offsetIdx=getLocalDateTime().year-titleYear+1;let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0={type:"line",xKey:"graphDate",yKey:"wealth",yName:"Wealth",tooltip:{renderer:_temp$4},marker:{itemStyler:_temp2$2}},$[0]=t0):t0=$[0];let t1;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1=[t0,{type:"line",xKey:"graphDate",yKey:"yoyCash",yName:"YoY ($)",stroke:"grey",tooltip:{renderer:_temp3},marker:{fill:"grey",itemStyler:_temp4}}],$[1]=t1):t1=$[1];const series=t1,t2=`${data[data.length-1-offsetIdx].date.toFormat(shortDate)} Projected wealth ${formatCashShort(((_a=data[data.length-1-offsetIdx])==null?void 0:_a.wealth)??0)}`;let t3;$[2]!==t2?(t3={text:t2},$[2]=t2,$[3]=t3):t3=$[3];let t4;$[4]===Symbol.for("react.memo_cache_sentinel")?(t4=[{type:"time",position:"bottom",label:{format:"%Y"}},{type:"number",position:"left",nice:!1}],$[4]=t4):t4=$[4];let t5;$[5]!==data||$[6]!==t3?(t5={theme:"ag-default-dark",title:t3,data,axes:t4,series},$[5]=data,$[6]=t3,$[7]=t5):t5=$[7];const options=t5;let t6;$[8]===Symbol.for("react.memo_cache_sentinel")?(t6={height:"100%",width:"100%"},$[8]=t6):t6=$[8];let t7;return $[9]!==options?(t7=jsx(AgCharts,{options,css:t6}),$[9]=options,$[10]=t7):t7=$[10],t7},"WealthChart");function _temp$4(t0){const{datum,yKey,xKey}=t0;return{content:`${DateTime.fromJSDate(datum[xKey]).toISODate()} ${formatCash(datum[yKey])}`}}__name(_temp$4,"_temp$4");function _temp2$2(params){if(params.datum.date.year===DateTime.local().plus({years:1}).year)return{fill:"orange"};if(params.datum.date.year===DateTime.local().plus({years:2}).year)return{fill:"rgb(244, 67, 54)"};if(params.datum.date.hasSame(DateTime.local(),"day"))return{fill:"lightgrey"}}__name(_temp2$2,"_temp2$2");function _temp3(t0){const{datum:datum_0,yKey:yKey_0,xKey:xKey_0}=t0;return{content:`${DateTime.fromJSDate(datum_0[xKey_0]).toISODate()} ${formatCash(datum_0[yKey_0])}`}}__name(_temp3,"_temp3");function _temp4(params_0){if(params_0.datum.date.year===DateTime.local().plus({years:1}).year)return{fill:"orange"};if(params_0.datum.date.year===DateTime.local().plus({years:2}).year)return{fill:"rgb(244, 67, 54)"};if(params_0.datum.date.hasSame(DateTime.local(),"day"))return{fill:"lightgrey"}}__name(_temp4,"_temp4");const columnConfig=[{headerName:"Date",colId:"date",sort:"desc",valueFormatter:__name(x=>{var _a;return(_a=x.value)==null?void 0:_a.toFormat(shortDate)},"valueFormatter"),valueGetter:__name(x=>{var _a;return(_a=x.data)==null?void 0:_a.date},"valueGetter"),cellRenderer:__name(x=>{const localDateTime=getLocalDateTime().startOf("day"),systemYear=localDateTime.year;return jsxs(Stack$1,{direction:"row",alignItems:"center",children:[x.valueFormatted," ",x.value&&x.value.equals(localDateTime)&&jsx(Tooltip,{title:"Today",children:jsx(TodayIcon,{htmlColor:"orange"})}),x.value&&x.value.equals(DateTime.fromObject({day:1,month:1,year:systemYear}))&&jsx(Tooltip,{title:`Benchmark for ${localDateTime.toFormat(shortDate)} & ${localDateTime.set({day:1,month:1}).plus({years:1}).toFormat(shortDate)} `,children:jsx(QueryStatsIcon,{htmlColor:"orange"})}),x.value&&x.value.equals(DateTime.fromObject({day:1,month:1,year:systemYear+1}))&&jsx(Tooltip,{title:`Benchmark for ${localDateTime.set({day:1,month:1}).plus({years:2}).toFormat(shortDate)} `,children:jsx(QueryStatsIcon,{htmlColor:"rgb(244, 67, 54)"})}),x.value&&x.value>localDateTime&&jsx(Tooltip,{title:"Future Event",children:jsx(UpdateIcon,{htmlColor:x.value.year-systemYear>1?"rgb(244, 67, 54)":"orange"})})]})},"cellRenderer")},{type:"numericColumn",headerName:"Wealth",colId:"wealth",valueGetter:__name(x=>{var _a;return(_a=x.data)==null?void 0:_a.wealth},"valueGetter"),cellRenderer:__name(x=>x.value&&jsx(Cash,{value:x.value,placement:"left"}),"cellRenderer")},{colId:"yoy-cash",type:"numericColumn",headerName:"YoY ($)",valueGetter:__name(x=>{var _a;return(_a=x.data)==null?void 0:_a.yoyCash},"valueGetter"),cellRenderer:__name(x=>x.value&&jsx(Cash,{value:x.value,placement:"left"}),"cellRenderer")},{colId:"yoy-percent",type:"numericColumn",headerName:"YoY (%)",valueGetter:__name(x=>{var _a;return(_a=x.data)==null?void 0:_a.yoyPct},"valueGetter"),cellRenderer:__name(x=>x.value&&jsx(Percent,{value:x.value}),"cellRenderer"),minWidth:60}],WealthTable=__name(()=>{const $=compilerRuntimeExports.c(3),dataYear=getLocalDateTime().year+1,data=useTimeSeriesWealth(dataYear);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0={type:"fitGridWidth"},$[0]=t0):t0=$[0];let t1;return $[1]!==data?(t1=jsx(Box$1,{height:"100%",width:"100%",children:jsx(AgGrid,{id:"time-series-wealth",rowData:data,columnDefs:columnConfig,autoSizeStrategy:t0,onRowDataUpdated:_temp$3})}),$[1]=data,$[2]=t1):t1=$[2],t1},"WealthTable");function _temp$3(e){return e.api.sizeColumnsToFit()}__name(_temp$3,"_temp$3");const ProjectedWealth=__name(()=>{const $=compilerRuntimeExports.c(11);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=getLocalDateTime(),$[0]=t0):t0=$[0];const localTime=t0,[year2,setYear]=reactExports.useState(localTime.year);let t1;$[1]!==year2?(t1=jsx(Box,{flex:"0 1 auto",height:"100%",overflow:"auto",children:jsx(FutureEvents,{onChange:setYear,year:year2})}),$[1]=year2,$[2]=t1):t1=$[2];let t2;$[3]!==year2?(t2=jsx(WealthChart,{titleYear:year2}),$[3]=year2,$[4]=t2):t2=$[4];let t3;$[5]===Symbol.for("react.memo_cache_sentinel")?(t3=jsx(WealthTable,{}),$[5]=t3):t3=$[5];let t4;$[6]!==t2?(t4=jsx(Box,{flex:"1 1 auto",overflow:"auto",children:jsxs(Stack,{spacing:2,height:"100%",width:"100%",children:[t2,t3]})}),$[6]=t2,$[7]=t4):t4=$[7];let t5;return $[8]!==t1||$[9]!==t4?(t5=jsxs(Box,{display:"flex",flexDirection:"row",height:"100%",width:"100%",gap:1,children:[t1,t4]}),$[8]=t1,$[9]=t4,$[10]=t5):t5=$[10],t5},"ProjectedWealth"),setProjectedWealth=__name((configName,value)=>{store.setState(prev=>create(prev,next=>{next.projectedWealth[configName]=value}))},"setProjectedWealth"),ConfigEntry=__name(props=>{const $=compilerRuntimeExports.c(18),{configName,label,variant:t0}=props,variant=t0===void 0?"cash":t0,[error,setError]=reactExports.useState(!1),isPercent=variant==="percent";let t1;$[0]!==configName||$[1]!==isPercent?(t1=__name(input=>{let value=+input;const isNan=Number.isNaN(value);setError(isNan),!isNan&&(isPercent&&(value=value/100),setProjectedWealth(configName,value))},"t1"),$[0]=configName,$[1]=isPercent,$[2]=t1):t1=$[2];const onchange=t1;let t2;$[3]!==configName?(t2=__name(x=>x.projectedWealth[configName],"t2"),$[3]=configName,$[4]=t2):t2=$[4];const value_0=useStore(store,t2),defaultValue=isPercent?value_0*100:value_0,t3=isPercent?"%":"$";let t4;$[5]!==t3?(t4={input:{startAdornment:jsx(InputAdornment,{position:"start",children:t3})}},$[5]=t3,$[6]=t4):t4=$[6];let t5;$[7]!==defaultValue||$[8]!==isPercent?(t5=defaultValue.toFixed(isPercent?2:0),$[7]=defaultValue,$[8]=isPercent,$[9]=t5):t5=$[9];let t6;$[10]!==onchange?(t6=__name(event=>{onchange(event.target.value)},"t6"),$[10]=onchange,$[11]=t6):t6=$[11];let t7;return $[12]!==error||$[13]!==label||$[14]!==t4||$[15]!==t5||$[16]!==t6?(t7=jsx(TextField,{error,variant:"outlined",slotProps:t4,defaultValue:t5,type:"numeric",label,onChange:t6}),$[12]=error,$[13]=label,$[14]=t4,$[15]=t5,$[16]=t6,$[17]=t7):t7=$[17],t7},"ConfigEntry"),Config=__name(()=>{const $=compilerRuntimeExports.c(6);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=jsx(CardHeader,{title:"Configuration"}),$[0]=t0):t0=$[0];let t1,t2,t3;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1=jsx(ConfigEntry,{configName:"savingsPerPaycheck",label:"Savings Per Paycheck"}),t2=jsx(ConfigEntry,{configName:"retirementContributionPaycheck",label:"Retirement Contribution Per Paycheck"}),t3=jsx(ConfigEntry,{configName:"bonusWithholdingsRate",label:"Bonus Withholdings Rate",variant:"percent"}),$[1]=t1,$[2]=t2,$[3]=t3):(t1=$[1],t2=$[2],t3=$[3]);let t4;$[4]===Symbol.for("react.memo_cache_sentinel")?(t4=jsxs(Stack$1,{direction:"row",spacing:2,width:"100%",sx:{"& > *":{flex:1}},children:[jsx(ConfigEntry,{configName:"socialSecurityLimit",label:"Social Security Tax Limit"}),jsx(ConfigEntry,{configName:"socialSecurityTaxRate",label:"Social Security Tax",variant:"percent"})]}),$[4]=t4):t4=$[4];let t5;return $[5]===Symbol.for("react.memo_cache_sentinel")?(t5=jsxs(Card$1,{children:[t0,jsx(CardContent,{children:jsxs(Stack$1,{spacing:2,children:[t1,t2,t3,t4,jsxs(Stack$1,{direction:"row",spacing:2,width:"100%",sx:{"& > *":{flex:1}},children:[jsx(ConfigEntry,{configName:"medicareSupplementalTaxThreshold",label:"Medicare Supplemental Threshold"}),jsx(ConfigEntry,{configName:"medicareSupplementalTaxRate",label:"Medicare Supplemental Tax",variant:"percent"})]})]})})]}),$[5]=t5):t5=$[5],t5},"Config"),ScenarioExplorer=__name(()=>{const $=compilerRuntimeExports.c(168),[isOpen,setIsOpen]=reactExports.useState(!1);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=getLocalDateTime(),$[0]=t0):t0=$[0];const[year2,setYear]=reactExports.useState(t0.year),[scenarioIndex,setScenarioIndex]=reactExports.useState(0),scenarioData=useStore(scenarioStore),scenarios=scenarioData.scenarios[year2],scenario=scenarios==null?void 0:scenarios[scenarioIndex];if(!scenario)return null;let t1;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1=jsx(Button,{onClick:__name(()=>setIsOpen(!0),"onClick"),children:"Scenario Explorer"}),$[1]=t1):t1=$[1];let t2;$[2]===Symbol.for("react.memo_cache_sentinel")?(t2={position:"absolute",top:24,bottom:24,right:24,left:24,padding:2,overflow:"auto"},$[2]=t2):t2=$[2];let t3;$[3]===Symbol.for("react.memo_cache_sentinel")?(t3=jsx(IconButton,{onClick:__name(()=>setIsOpen(!1),"onClick"),sx:{position:"absolute",top:8,right:8},children:jsx(CloseIcon,{})}),$[3]=t3):t3=$[3];let t4;$[4]===Symbol.for("react.memo_cache_sentinel")?(t4=jsx(Typography,{variant:"h5",children:"Scenario Explorer"}),$[4]=t4):t4=$[4];let t5;$[5]===Symbol.for("react.memo_cache_sentinel")?(t5={width:90,marginRight:2},$[5]=t5):t5=$[5];let t6;$[6]===Symbol.for("react.memo_cache_sentinel")?(t6=["year"],$[6]=t6):t6=$[6];let t7;$[7]!==scenarioData.minYear?(t7=getLocalDateTime().set({year:scenarioData==null?void 0:scenarioData.minYear}),$[7]=scenarioData.minYear,$[8]=t7):t7=$[8];let t8;$[9]!==scenarioData.maxYear?(t8=getLocalDateTime().set({year:scenarioData==null?void 0:scenarioData.maxYear}),$[9]=scenarioData.maxYear,$[10]=t8):t8=$[10];let t10,t11,t9;$[11]===Symbol.for("react.memo_cache_sentinel")?(t9=getLocalDateTime(),t10={textField:{variant:"standard",label:""}},t11=__name(date=>{date&&setYear(date.year)},"t11"),$[11]=t10,$[12]=t11,$[13]=t9):(t10=$[11],t11=$[12],t9=$[13]);let t12;$[14]!==t7||$[15]!==t8?(t12=jsx(DatePicker,{sx:t5,label:"year",views:t6,minDate:t7,maxDate:t8,defaultValue:t9,slotProps:t10,onChange:t11}),$[14]=t7,$[15]=t8,$[16]=t12):t12=$[16];let t13;$[17]===Symbol.for("react.memo_cache_sentinel")?(t13=__name(event=>setScenarioIndex(+event.target.value),"t13"),$[17]=t13):t13=$[17];let t14;$[18]!==scenarios?(t14=scenarios==null?void 0:scenarios.map(_temp$2),$[18]=scenarios,$[19]=t14):t14=$[19];let t15;$[20]!==t14?(t15=jsx(Select,{variant:"standard",onChange:t13,defaultValue:"0",children:t14}),$[20]=t14,$[21]=t15):t15=$[21];let t16;$[22]!==t12||$[23]!==t15?(t16=jsxs(Stack,{direction:"row",alignItems:"center",spacing:2,children:[t4,t12,t15]}),$[22]=t12,$[23]=t15,$[24]=t16):t16=$[24];let t17;$[25]===Symbol.for("react.memo_cache_sentinel")?(t17={padding:2},$[25]=t17):t17=$[25];let t18;$[26]===Symbol.for("react.memo_cache_sentinel")?(t18=["_TotalPay","totalMerit","pay","meritBonus","companyBonus","lastThreeMeritBonusFactor"],$[26]=t18):t18=$[26];let t19;$[27]===Symbol.for("react.memo_cache_sentinel")?(t19=jsx("span",{children:"Scenario"}),$[27]=t19):t19=$[27];let t20;$[28]!==scenario.weight?(t20=jsx(TreeItem,{itemId:"weight",label:jsxs("span",{children:["Weight: ",scenario.weight]})}),$[28]=scenario.weight,$[29]=t20):t20=$[29];let t21;$[30]!==scenario.year?(t21=jsx(TreeItem,{itemId:"year",label:jsxs("span",{children:["Year: ",scenario.year]})}),$[30]=scenario.year,$[31]=t21):t21=$[31];let t22;$[32]!==t20||$[33]!==t21?(t22=jsxs(TreeItem,{itemId:"scenario",label:t19,children:[t20,t21]}),$[32]=t20,$[33]=t21,$[34]=t22):t22=$[34];let t23;$[35]===Symbol.for("react.memo_cache_sentinel")?(t23=jsx("span",{children:"Total Pay: "}),$[35]=t23):t23=$[35];let t24;$[36]!==scenario.totalPay?(t24=jsxs(Stack,{direction:"row",spacing:1,children:[t23,jsx(Cash,{value:scenario.totalPay,compact:!1})]}),$[36]=scenario.totalPay,$[37]=t24):t24=$[37];let t25;$[38]===Symbol.for("react.memo_cache_sentinel")?(t25=jsx("span",{children:"Apr To Apr: "}),$[38]=t25):t25=$[38];let t26;$[39]!==scenario.aprToApr?(t26=jsx(TreeItem,{itemId:"aprToApr",label:jsxs(Stack,{direction:"row",spacing:1,children:[t25,jsx(Cash,{value:scenario.aprToApr,compact:!1})]})}),$[39]=scenario.aprToApr,$[40]=t26):t26=$[40];let t27;$[41]===Symbol.for("react.memo_cache_sentinel")?(t27=jsx("span",{children:"Base Pay: "}),$[41]=t27):t27=$[41];let t28;$[42]!==scenario.basePay?(t28=jsx(TreeItem,{itemId:"basePay",label:jsxs(Stack,{direction:"row",spacing:1,children:[t27,jsx(Cash,{value:scenario.basePay,compact:!1})]})}),$[42]=scenario.basePay,$[43]=t28):t28=$[43];let t29;$[44]===Symbol.for("react.memo_cache_sentinel")?(t29=jsx("span",{children:"Taxable Pay: "}),$[44]=t29):t29=$[44];let t30;$[45]!==scenario.taxablePay?(t30=jsx(TreeItem,{itemId:"taxablePay",label:jsxs(Stack,{direction:"row",spacing:1,children:[t29,jsx(Cash,{value:scenario.taxablePay,compact:!1})]})}),$[45]=scenario.taxablePay,$[46]=t30):t30=$[46];let t31;$[47]===Symbol.for("react.memo_cache_sentinel")?(t31=jsx("span",{children:"Total Pay: "}),$[47]=t31):t31=$[47];let t32;$[48]!==scenario.totalPay?(t32=jsx(TreeItem,{itemId:"totalPay",label:jsxs(Stack,{direction:"row",spacing:1,children:[t31,jsx(Cash,{value:scenario.totalPay,compact:!1})]})}),$[48]=scenario.totalPay,$[49]=t32):t32=$[49];let t33;$[50]===Symbol.for("react.memo_cache_sentinel")?(t33=jsx("span",{children:"Total Merit Increase: "}),$[50]=t33):t33=$[50];const t34=scenario.meritIncreasePct+scenario.equityIncreasePct;let t35;$[51]!==t34?(t35=jsxs(Stack,{direction:"row",spacing:1,children:[t33,jsx(Percent,{value:t34})]}),$[51]=t34,$[52]=t35):t35=$[52];let t36;$[53]===Symbol.for("react.memo_cache_sentinel")?(t36=jsx("span",{children:"Merit Increase: "}),$[53]=t36):t36=$[53];let t37;$[54]!==scenario.meritIncreasePct?(t37=jsx(TreeItem,{itemId:"meritIncreasePct",label:jsxs(Stack,{direction:"row",spacing:1,children:[t36,jsx(Percent,{value:scenario.meritIncreasePct})]})}),$[54]=scenario.meritIncreasePct,$[55]=t37):t37=$[55];let t38;$[56]===Symbol.for("react.memo_cache_sentinel")?(t38=jsx("span",{children:"Equity Increase: "}),$[56]=t38):t38=$[56];let t39;$[57]!==scenario.equityIncreasePct?(t39=jsx(TreeItem,{itemId:"equityIncreasePct",label:jsxs(Stack,{direction:"row",spacing:1,children:[t38,jsx(Percent,{value:scenario.equityIncreasePct})]})}),$[57]=scenario.equityIncreasePct,$[58]=t39):t39=$[58];let t40;$[59]!==t35||$[60]!==t37||$[61]!==t39?(t40=jsxs(TreeItem,{itemId:"totalMerit",label:t35,children:[t37,t39]}),$[59]=t35,$[60]=t37,$[61]=t39,$[62]=t40):t40=$[62];let t41;$[63]===Symbol.for("react.memo_cache_sentinel")?(t41=jsx("span",{children:"Current Payment Index: "}),$[63]=t41):t41=$[63];let t42;$[64]!==scenario.currentPaymentIdx?(t42=jsx(TreeItem,{itemId:"currentPaymentIdx",label:jsxs(Stack,{direction:"row",spacing:1,children:[t41,jsx("span",{children:scenario.currentPaymentIdx})]})}),$[64]=scenario.currentPaymentIdx,$[65]=t42):t42=$[65];let t43;$[66]===Symbol.for("react.memo_cache_sentinel")?(t43=jsx("span",{children:"Remaining Regular Payments: "}),$[66]=t43):t43=$[66];let t44;$[67]!==scenario.remainingRegularPayments?(t44=jsx(TreeItem,{itemId:"remainingPayments",label:jsxs(Stack,{direction:"row",spacing:1,children:[t43,jsx("span",{children:scenario.remainingRegularPayments})]})}),$[67]=scenario.remainingRegularPayments,$[68]=t44):t44=$[68];let t45;$[69]===Symbol.for("react.memo_cache_sentinel")?(t45=jsx(Box,{children:"Current Payment: "}),$[69]=t45):t45=$[69];let t46;$[70]!==scenario.currentPaymentIdx||$[71]!==scenario.payments?(t46=DateTime.fromISO(scenario.payments[scenario.currentPaymentIdx].payedOn).toFormat(shortDate),$[70]=scenario.currentPaymentIdx,$[71]=scenario.payments,$[72]=t46):t46=$[72];let t47;$[73]!==t46?(t47=jsx(Box,{children:t46}),$[73]=t46,$[74]=t47):t47=$[74];const t48=scenario.payments[scenario.currentPaymentIdx];let t49;$[75]!==t48.value?(t49=formatCash(t48.value),$[75]=t48.value,$[76]=t49):t49=$[76];let t50;$[77]!==t49?(t50=jsx(Box,{width:70,textAlign:"right",children:t49}),$[77]=t49,$[78]=t50):t50=$[78];const t51=scenario.payments[scenario.currentPaymentIdx];let t52;$[79]!==t51.cumulative?(t52=formatCash(t51.cumulative),$[79]=t51.cumulative,$[80]=t52):t52=$[80];let t53;$[81]!==t52?(t53=jsx(Box,{width:70,textAlign:"right",children:t52}),$[81]=t52,$[82]=t53):t53=$[82];const t54=scenario.payments[scenario.currentPaymentIdx];let t55;$[83]!==t54.type?(t55=jsxs(Box,{children:[" ",t54.type]}),$[83]=t54.type,$[84]=t55):t55=$[84];let t56;$[85]!==t47||$[86]!==t50||$[87]!==t53||$[88]!==t55?(t56=jsx(TreeItem,{itemId:"current_payment",label:jsxs(Stack,{direction:"row",spacing:2,children:[t45,t47,t50,t53,t55]})}),$[85]=t47,$[86]=t50,$[87]=t53,$[88]=t55,$[89]=t56):t56=$[89];let t57;if($[90]!==scenario.currentPaymentIdx||$[91]!==scenario.payments){let t582;$[93]!==scenario.currentPaymentIdx?(t582=__name((x_0,i_0,arr)=>jsx(TreeItem,{itemId:`payments-${i_0}`,label:jsxs(Stack,{sx:{backgroundColor:scenario.currentPaymentIdx==arr.length-1-i_0?"rgba(0,255,0,.15)":void 0},direction:"row",spacing:2,children:[jsx(Box,{children:arr.length-1-i_0}),jsx(Box,{children:DateTime.fromISO(x_0.payedOn).toFormat(shortDate)}),jsx(Box,{width:70,textAlign:"right",children:formatCash(x_0.value)}),jsx(Box,{width:70,textAlign:"right",children:formatCash(x_0.cumulative)}),jsxs(Box,{children:[" ",x_0.type]})]})},i_0),"t582"),$[93]=scenario.currentPaymentIdx,$[94]=t582):t582=$[94],t57=scenario.payments.toReversed().map(t582),$[90]=scenario.currentPaymentIdx,$[91]=scenario.payments,$[92]=t57}else t57=$[92];let t58;$[95]!==t57?(t58=jsx(TreeItem,{itemId:"payments",label:"Payments Considered",children:t57}),$[95]=t57,$[96]=t58):t58=$[96];let t59;$[97]!==scenario.pay?(t59=scenario.pay.toReversed().map(_temp2$1),$[97]=scenario.pay,$[98]=t59):t59=$[98];let t60;$[99]!==t59?(t60=jsx(TreeItem,{itemId:"pay",label:"Pay",children:t59}),$[99]=t59,$[100]=t60):t60=$[100];let t61;$[101]!==t24||$[102]!==t26||$[103]!==t28||$[104]!==t30||$[105]!==t32||$[106]!==t40||$[107]!==t42||$[108]!==t44||$[109]!==t56||$[110]!==t58||$[111]!==t60?(t61=jsxs(TreeItem,{itemId:"_TotalPay",label:t24,children:[t26,t28,t30,t32,t40,t42,t44,t56,t58,t60]}),$[101]=t24,$[102]=t26,$[103]=t28,$[104]=t30,$[105]=t32,$[106]=t40,$[107]=t42,$[108]=t44,$[109]=t56,$[110]=t58,$[111]=t60,$[112]=t61):t61=$[112];let t62;$[113]===Symbol.for("react.memo_cache_sentinel")?(t62=jsx("span",{children:"Merit Bonus: "}),$[113]=t62):t62=$[113];let t63;$[114]!==scenario.meritBonus?(t63=jsxs(Stack,{direction:"row",spacing:1,children:[t62,jsx(Cash,{value:scenario.meritBonus,compact:!1})]}),$[114]=scenario.meritBonus,$[115]=t63):t63=$[115];let t64;$[116]===Symbol.for("react.memo_cache_sentinel")?(t64=jsx("span",{children:"Merit Bonus Percent: "}),$[116]=t64):t64=$[116];let t65;$[117]!==scenario.meritBonusPct?(t65=jsx(TreeItem,{itemId:"mertiBonusPct",label:jsxs(Stack,{direction:"row",spacing:1,children:[t64,jsx(Percent,{value:scenario.meritBonusPct})]})}),$[117]=scenario.meritBonusPct,$[118]=t65):t65=$[118];let t66;$[119]!==t63||$[120]!==t65?(t66=jsx(TreeItem,{itemId:"meritBonus",label:t63,children:t65}),$[119]=t63,$[120]=t65,$[121]=t66):t66=$[121];let t67;$[122]===Symbol.for("react.memo_cache_sentinel")?(t67=jsx("span",{children:"Company Bonus:"}),$[122]=t67):t67=$[122];let t68;$[123]!==scenario.companyBonus?(t68=jsxs(Stack,{direction:"row",spacing:1,children:[t67,jsx(Cash,{value:scenario.companyBonus,compact:!1})]}),$[123]=scenario.companyBonus,$[124]=t68):t68=$[124];let t69;$[125]===Symbol.for("react.memo_cache_sentinel")?(t69=jsx("span",{children:"Company Bonus Factor:"}),$[125]=t69):t69=$[125];let t70;$[126]!==scenario.companyBonusFactor?(t70=jsx(TreeItem,{itemId:"companyBonusFactor.value",label:jsxs(Stack,{direction:"row",spacing:1,children:[t69,jsx(Percent,{value:scenario.companyBonusFactor})]})}),$[126]=scenario.companyBonusFactor,$[127]=t70):t70=$[127];let t71;$[128]===Symbol.for("react.memo_cache_sentinel")?(t71=jsx("span",{children:"Company Bonus Percent:"}),$[128]=t71):t71=$[128];let t72;$[129]!==scenario.companyBonusPct?(t72=jsx(TreeItem,{itemId:"companyBonusPct.value",label:jsxs(Stack,{direction:"row",spacing:1,children:[t71,jsx(Percent,{value:scenario.companyBonusPct})]})}),$[129]=scenario.companyBonusPct,$[130]=t72):t72=$[130];let t73;$[131]===Symbol.for("react.memo_cache_sentinel")?(t73=jsx("span",{children:"Last Three Merit Bonus Percent:"}),$[131]=t73):t73=$[131];let t74;$[132]!==scenario.lastThreeMeritBonusFactor?(t74=jsxs(Stack,{direction:"row",spacing:1,children:[t73,jsx(Percent,{value:scenario.lastThreeMeritBonusFactor})]}),$[132]=scenario.lastThreeMeritBonusFactor,$[133]=t74):t74=$[133];let t75;if($[134]!==scenario.lastThreeMeritBonuses||$[135]!==year2){let t762;$[137]!==year2?(t762=__name((x_2,i_2)=>jsx(TreeItem,{itemId:`lastThreeMeritBonuses${i_2}`,label:`${year2-i_2} ${formatPercent(x_2)}`},`${i_2}${x_2}`),"t762"),$[137]=year2,$[138]=t762):t762=$[138],t75=scenario.lastThreeMeritBonuses.toReversed().map(t762),$[134]=scenario.lastThreeMeritBonuses,$[135]=year2,$[136]=t75}else t75=$[136];let t76;$[139]!==t74||$[140]!==t75?(t76=jsx(TreeItem,{itemId:"lastThreeMeritBonusFactor",label:t74,children:t75}),$[139]=t74,$[140]=t75,$[141]=t76):t76=$[141];let t77;$[142]!==t68||$[143]!==t70||$[144]!==t72||$[145]!==t76?(t77=jsxs(TreeItem,{itemId:"companyBonus",label:t68,children:[t70,t72,t76]}),$[142]=t68,$[143]=t70,$[144]=t72,$[145]=t76,$[146]=t77):t77=$[146];let t78;$[147]===Symbol.for("react.memo_cache_sentinel")?(t78=jsx("span",{children:"Retirement Bonus:"}),$[147]=t78):t78=$[147];let t79;$[148]!==scenario.retirementBonus?(t79=jsxs(Stack,{direction:"row",spacing:1,children:[t78,jsx(Cash,{value:scenario.retirementBonus,compact:!1})]}),$[148]=scenario.retirementBonus,$[149]=t79):t79=$[149];let t80;$[150]===Symbol.for("react.memo_cache_sentinel")?(t80=jsx("span",{children:"Retirement Bonus Percent:"}),$[150]=t80):t80=$[150];let t81;$[151]!==scenario.retirementBonusPct?(t81=jsx(TreeItem,{itemId:"retirementBonusPct",label:jsxs(Stack,{direction:"row",spacing:1,children:[t80,jsx(Percent,{value:scenario.retirementBonusPct})]})}),$[151]=scenario.retirementBonusPct,$[152]=t81):t81=$[152];let t82;$[153]!==t79||$[154]!==t81?(t82=jsx(TreeItem,{itemId:"retirementBonus",label:t79,children:t81}),$[153]=t79,$[154]=t81,$[155]=t82):t82=$[155];let t83;$[156]!==t22||$[157]!==t61||$[158]!==t66||$[159]!==t77||$[160]!==t82?(t83=jsx(Paper,{elevation:5,sx:t17,children:jsxs(SimpleTreeView,{defaultExpandedItems:t18,children:[t22,t61,t66,t77,t82]})}),$[156]=t22,$[157]=t61,$[158]=t66,$[159]=t77,$[160]=t82,$[161]=t83):t83=$[161];let t84;$[162]!==t16||$[163]!==t83?(t84=jsxs(Paper,{sx:t2,children:[t3,jsxs(Stack,{spacing:2,children:[t16,t83]})]}),$[162]=t16,$[163]=t83,$[164]=t84):t84=$[164];let t85;return $[165]!==isOpen||$[166]!==t84?(t85=jsxs(Fragment,{children:[t1,jsx(Modal,{open:isOpen,children:t84})]}),$[165]=isOpen,$[166]=t84,$[167]=t85):t85=$[167],t85},"ScenarioExplorer");function _temp$2(x,i){return jsxs(MenuItem,{value:i,children:[x.weight," ",formatCash(x.totalPay)]},i)}__name(_temp$2,"_temp$2");function _temp2$1(x_1,i_1){return jsx(TreeItem,{itemId:`$pay-${i_1}`,label:`${DateTime.fromISO(x_1.date).year} ${x_1.value}`},i_1)}__name(_temp2$1,"_temp2$1");function InvalidDataDialog(props){const $=compilerRuntimeExports.c(12),{open,error,children}=props,t0=!!open;let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1=jsx(DialogTitle,{id:"alert-dialog-title",children:"Error Loading Data"}),$[0]=t1):t1=$[0];let t2;$[1]===Symbol.for("react.memo_cache_sentinel")?(t2=jsx(TableHead,{children:jsxs(TableRow,{children:[jsx(TableCell,{children:"Error Message"}),jsx(TableCell,{children:"Path"})]})}),$[1]=t2):t2=$[1];let t3;$[2]!==(error==null?void 0:error.issues)?(t3=error==null?void 0:error.issues.map(_temp$1),$[2]=error==null?void 0:error.issues,$[3]=t3):t3=$[3];let t4;$[4]!==t3?(t4=jsx(DialogContent,{children:jsx(DialogContentText,{id:"alert-dialog-description",children:jsx(Box,{maxHeight:500,overflow:"auto",children:jsxs(Table,{children:[t2,jsx(TableBody,{children:t3})]})})})}),$[4]=t3,$[5]=t4):t4=$[5];let t5;$[6]!==children?(t5=jsx(DialogActions,{children}),$[6]=children,$[7]=t5):t5=$[7];let t6;return $[8]!==t0||$[9]!==t4||$[10]!==t5?(t6=jsx(Fragment,{children:jsxs(Dialog,{open:t0,children:[t1,t4,t5]})}),$[8]=t0,$[9]=t4,$[10]=t5,$[11]=t6):t6=$[11],t6}__name(InvalidDataDialog,"InvalidDataDialog");function _temp$1(x,idx){return jsxs(TableRow,{children:[jsx(TableCell,{children:x.message}),jsx(TableCell,{children:x.path.join(".")})]},idx)}__name(_temp$1,"_temp$1");const downloadJson=__name((filename,storeData)=>{const data=JSON.stringify(storeData,null,2),link=document.createElement("a");link.download=filename;const blob=new Blob([data],{type:"application/json"});link.href=window.URL.createObjectURL(blob),link.click()},"downloadJson"),useExport=__name(()=>{const $=compilerRuntimeExports.c(2),storeData=useStore(store);let t0;return $[0]!==storeData?(t0=__name(()=>{downloadJson(`wealth-tracker-${getLocalDateTime().toFormat(shortDate)}.json`,storeData)},"t0"),$[0]=storeData,$[1]=t0):t0=$[1],t0},"useExport");function selectFile(contentType){return new Promise(resolve=>{const input=document.createElement("input");input.type="file",input.multiple=!1,input.accept=contentType,input.onchange=()=>{const files=Array.from(input.files??[]);resolve(files[0])},input.click()})}__name(selectFile,"selectFile");const useImport=__name(()=>_temp2,"useImport");function _temp(resolve,reject){selectFile("application/json").then(file=>{const reader=new FileReader;reader.readAsDataURL(file),reader.onload=readerEvent=>{var _a,_b;const content=(_b=(_a=readerEvent.target)==null?void 0:_a.result)==null?void 0:_b.toString();if(content){const data=JSON.parse(window.atob(content.split(",")[1]));if(storeValidator$5.safeParse(data).success)store.setState(()=>data),resolve();else try{migration(data),store.setState(()=>data),resolve()}catch(t0){const err=t0;console.log("error",err),console.log("invalid data",data),reject(err)}}}})}__name(_temp,"_temp");function _temp2(){return new Promise(_temp)}__name(_temp2,"_temp2");const useStoreDataError=__name(()=>{const invalidData=localStorage.getItem("store-invalid");if(!invalidData)return{hadError:!1};const jsonInvalidData=JSON.parse(invalidData),validated=storeValidator$5.safeParse(jsonInvalidData);return{hadError:!!invalidData,invalidData:jsonInvalidData,parseError:invalidData&&!validated.success?validated.error:void 0,resetError:__name(()=>{localStorage.removeItem("store-invalid")},"resetError")}},"useStoreDataError"),System=__name(()=>{const $=compilerRuntimeExports.c(26),onExport=useExport(),onImport=useImport(),{hadError,parseError,resetError,invalidData}=useStoreDataError(),[error,setError]=reactExports.useState(parseError),[isOpen,setIsOpen]=reactExports.useState(hadError),localTime=useLocalDateTime();let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=jsx(CardHeader,{title:"System"}),$[0]=t0):t0=$[0];let t1;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1=jsxs(Card$1,{children:[t0,jsx(CardContent,{children:jsxs(Typography,{variant:"body2",children:["Built On ","2025 May 04 22:21"]})})]}),$[1]=t1):t1=$[1];let t2;$[2]===Symbol.for("react.memo_cache_sentinel")?(t2=jsx(CardHeader,{title:"Data"}),$[2]=t2):t2=$[2];let t3;$[3]!==onImport?(t3=jsx(Button,{onClick:__name(()=>onImport().catch(err=>{setIsOpen(!0),setError(err)}),"onClick"),children:"Import"}),$[3]=onImport,$[4]=t3):t3=$[4];let t4;$[5]!==onExport?(t4=jsx(Button,{onClick:onExport,children:"Export"}),$[5]=onExport,$[6]=t4):t4=$[6];let t5;$[7]===Symbol.for("react.memo_cache_sentinel")?(t5=jsx(ConfirmDialog,{title:"Reset Everything",onConfirm:resetStore,children:jsxs(Button,{color:"error",children:[jsx(DeleteForever,{}),"Reset"]})}),$[7]=t5):t5=$[7];let t6;$[8]!==t3||$[9]!==t4?(t6=jsxs(Stack,{spacing:2,children:[t1,jsxs(Card$1,{children:[t2,jsxs(CardActions,{children:[t3,t4,t5]})]})]}),$[8]=t3,$[9]=t4,$[10]=t6):t6=$[10];let t7;$[11]!==hadError||$[12]!==invalidData||$[13]!==localTime||$[14]!==resetError?(t7=hadError&&jsxs(Fragment,{children:[jsx(Button,{color:"error",onClick:__name(()=>{setIsOpen(!1),resetError==null||resetError(),resetStore()},"onClick"),children:"Reset"}),jsx(Button,{onClick:__name(()=>{downloadJson(`invalid-data-wealth-tracker-${localTime.toFormat(shortDate)}.json`,invalidData)},"onClick"),children:"Download Data"}),jsx(Button,{onClick:__name(()=>{setIsOpen(!1),resetError==null||resetError()},"onClick"),children:"Ignore"})]}),$[11]=hadError,$[12]=invalidData,$[13]=localTime,$[14]=resetError,$[15]=t7):t7=$[15];let t8;$[16]!==hadError?(t8=!hadError&&jsx(Button,{onClick:__name(()=>{setIsOpen(!1)},"onClick"),children:"Cancel"}),$[16]=hadError,$[17]=t8):t8=$[17];let t9;$[18]!==error||$[19]!==isOpen||$[20]!==t7||$[21]!==t8?(t9=jsxs(InvalidDataDialog,{open:isOpen,error,children:[t7,t8]}),$[18]=error,$[19]=isOpen,$[20]=t7,$[21]=t8,$[22]=t9):t9=$[22];let t10;return $[23]!==t6||$[24]!==t9?(t10=jsxs(Fragment,{children:[t6,t9]}),$[23]=t6,$[24]=t9,$[25]=t10):t10=$[25],t10},"System"),ConfigModal=__name(()=>{const $=compilerRuntimeExports.c(26),[tab,setTab]=reactExports.useState("system"),[isOpen,setIsOpen]=reactExports.useState(!1);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=jsx(Button,{onClick:__name(()=>setIsOpen(!0),"onClick"),children:jsx(SettingsIcon,{})}),$[0]=t0):t0=$[0];let t1;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1=__name(()=>setIsOpen(!1),"t1"),$[1]=t1):t1=$[1];let t2;$[2]===Symbol.for("react.memo_cache_sentinel")?(t2={display:"flex"},$[2]=t2):t2=$[2];let t3,t4,t5,t6;$[3]===Symbol.for("react.memo_cache_sentinel")?(t3=__name((_,value)=>setTab(value),"t3"),t4=jsx(Tab,{value:"projected-Income",label:"Projected Income"}),t5=jsx(Tab,{value:"projected-wealth",label:"Projected Wealth"}),t6=jsx(Tab,{value:"system",label:"System"}),$[3]=t3,$[4]=t4,$[5]=t5,$[6]=t6):(t3=$[3],t4=$[4],t5=$[5],t6=$[6]);let t7;$[7]!==tab?(t7=jsxs(Tabs,{value:tab,onChange:t3,children:[t4,t5,t6]}),$[7]=tab,$[8]=t7):t7=$[8];let t8;$[9]===Symbol.for("react.memo_cache_sentinel")?(t8=jsx(IconButton,{sx:{height:"min-content",marginLeft:"auto"},onClick:__name(()=>setIsOpen(!1),"onClick"),children:jsx(CloseIcon,{})}),$[9]=t8):t8=$[9];let t9;$[10]!==t7?(t9=jsxs(DialogTitle,{sx:t2,children:[t7,t8]}),$[10]=t7,$[11]=t9):t9=$[11];let t10;$[12]!==tab?(t10=tab==="projected-Income"&&jsx(ScenarioExplorer,{}),$[12]=tab,$[13]=t10):t10=$[13];let t11;$[14]!==tab?(t11=tab==="projected-wealth"&&jsx(Config,{}),$[14]=tab,$[15]=t11):t11=$[15];let t12;$[16]!==tab?(t12=tab==="system"&&jsx(System,{}),$[16]=tab,$[17]=t12):t12=$[17];let t13;$[18]!==t10||$[19]!==t11||$[20]!==t12?(t13=jsx(DialogContent,{children:jsxs(Box,{width:600,height:450,children:[t10,t11,t12]})}),$[18]=t10,$[19]=t11,$[20]=t12,$[21]=t13):t13=$[21];let t14;return $[22]!==isOpen||$[23]!==t13||$[24]!==t9?(t14=jsxs(Fragment,{children:[t0,jsxs(Dialog,{maxWidth:!1,open:isOpen,onClose:t1,children:[t9,t13]})]}),$[22]=isOpen,$[23]=t13,$[24]=t9,$[25]=t14):t14=$[25],t14},"ConfigModal"),App=__name(()=>{const $=compilerRuntimeExports.c(16),navigate=useNavigate(),location=useLocation();let t0;$[0]!==location.pathname?(t0=location.pathname.split("/").slice(2),$[0]=location.pathname,$[1]=t0):t0=$[1];const currentPath=t0[0];let t1;$[2]!==navigate?(t1=__name((_,value)=>navigate({to:value}),"t1"),$[2]=navigate,$[3]=t1):t1=$[3];let t2,t3,t4;$[4]===Symbol.for("react.memo_cache_sentinel")?(t2=jsx(Tab,{value:"net-wealth",label:"Total Wealth",component:Link,to:"/net-wealth"}),t3=jsx(Tab,{value:"projected-income",label:"Projected Income",component:Link,to:"/projected-income"}),t4=jsx(Tab,{value:"projected-wealth",label:"Projected Wealth",component:Link,to:"/projected-wealth"}),$[4]=t2,$[5]=t3,$[6]=t4):(t2=$[4],t3=$[5],t4=$[6]);let t5;$[7]!==currentPath||$[8]!==t1?(t5=jsxs(Tabs,{value:currentPath,onChange:t1,children:[t2,t3,t4]}),$[7]=currentPath,$[8]=t1,$[9]=t5):t5=$[9];let t6;$[10]===Symbol.for("react.memo_cache_sentinel")?(t6=jsx(Box,{marginLeft:"auto",gap:2,display:"flex",children:jsx(ConfigModal,{})}),$[10]=t6):t6=$[10];let t7;$[11]!==t5?(t7=jsx(Box,{flex:"0 1 auto",children:jsxs(Stack,{direction:"row",children:[t5,t6]})}),$[11]=t5,$[12]=t7):t7=$[12];let t8;$[13]===Symbol.for("react.memo_cache_sentinel")?(t8=jsx(Box,{flex:"1 1 auto",height:"100%",width:"100%",overflow:"hidden",children:jsx(Outlet,{})}),$[13]=t8):t8=$[13];let t9;return $[14]!==t7?(t9=jsxs(Box,{padding:2,paddingTop:0,display:"flex",flexDirection:"column",height:"100%",gap:2,children:[t7,t8]}),$[14]=t7,$[15]=t9):t9=$[15],t9},"App"),rootRoute=createRootRoute({component:App}),indexRoute=createRoute({getParentRoute:__name(()=>rootRoute,"getParentRoute"),path:"/",beforeLoad:__name(()=>{throw redirect({to:"/net-wealth"})},"beforeLoad")}),netWealthRoute=createRoute({getParentRoute:__name(()=>rootRoute,"getParentRoute"),path:"/net-wealth",component:NetWealth}),projectedIncomeRoute=createRoute({getParentRoute:__name(()=>rootRoute,"getParentRoute"),path:"/projected-income",component:ProjectedIncome}),projectedWealthRoute=createRoute({getParentRoute:__name(()=>rootRoute,"getParentRoute"),path:"/projected-wealth",component:ProjectedWealth}),routeTree=rootRoute.addChildren([indexRoute,netWealthRoute,projectedIncomeRoute,projectedWealthRoute]),router=createRouter({routeTree,defaultPreload:"intent",basepath:"/wealth-tracker"});DateTime.prototype.toValid=function(){if(!this.isValid)throw new Error(`Invalid date: ${this.invalidReason}`);return this};const getMeritPairs=__name((year2,timeSeries)=>{const meritDetails=findSameYear(year2,timeSeries.meritPct);if(meritDetails&&meritDetails.enabled)return[{meritIncreasePct:meritDetails.meritIncreasePct,meritBonusPct:meritDetails.meritBonusPct,weight:1}];const unweightedPairs=timeSeries.meritPct.filter(x=>x.enabled).slice(-1*MAX_NUM_ENTRIES).map(x=>({meritIncreasePct:x.meritIncreasePct,meritBonusPct:x.meritBonusPct}));return Object.values(Object.groupBy(unweightedPairs,x=>`${x.meritBonusPct} ${x.meritIncreasePct}`)).map(x=>({...x[0],weight:x.length}))},"getMeritPairs"),getMeritSequence=__name((year2,timeSeries)=>{const meritPairs=getMeritPairs(year2,timeSeries),mostRecentPay=timeSeries.paycheck.filter(x=>DateTime.fromISO(x.date).year>year2-3).at(-1)??timeSeries.paycheck.at(-1);if(!mostRecentPay)return[];const mostRecentPayYear=DateTime.fromISO(mostRecentPay.date).year,yearsToGenerate=Math.max(year2-mostRecentPayYear,1);let meritSequence=meritPairs.slice().map(x=>[x]);for(let i=0;i<yearsToGenerate-1;i++)meritSequence=meritSequence.flatMap(x=>meritPairs.map(merit=>x.slice().concat(merit)));return meritSequence.map(values=>({weight:values.reduce((acc,curr)=>acc*curr.weight,1),values}))},"getMeritSequence"),getScenarioSize=__name((year2,timeSeries)=>{const meritSequence=getMeritSequence(year2,timeSeries),companyBonusFactor=findSameYear(year2,timeSeries.companyBonusPct),companyBonusPcts=companyBonusFactor?[companyBonusFactor.value]:timeSeries.companyBonusPct.slice(-1*MAX_NUM_ENTRIES).map(x=>x.value),companyBonusPctWeights=Object.entries(Object.groupBy(companyBonusPcts,x=>x)).map(([,values])=>({weight:values.length,value:values.at(0)}));return meritSequence.slice(-1*MAX_NUM_ENTRIES).length*companyBonusPctWeights.length},"getScenarioSize"),maxScenarioSize=2499,currentYear=getLocalDateTime().year,maxYear=(()=>{const timeSeries=store.state.projectedIncome.timeSeries;for(let i=currentYear;i<=currentYear+5;i++){const size=getScenarioSize(i,timeSeries);if(size>maxScenarioSize||size===0)return Math.max(currentYear,i-1)}return currentYear+5})(),workers=[new Worker(new URL("/wealth-tracker/assets/worker-DJCtIUm7.js",import.meta.url),{type:"module",name:"1"}),new Worker(new URL("/wealth-tracker/assets/worker-DJCtIUm7.js",import.meta.url),{type:"module",name:"2"}),new Worker(new URL("/wealth-tracker/assets/worker-DJCtIUm7.js",import.meta.url),{type:"module",name:"3"}),new Worker(new URL("/wealth-tracker/assets/worker-DJCtIUm7.js",import.meta.url),{type:"module",name:"4"})];workers.map(x=>x.onmessage=event=>{scenarioStore.setState(prev=>create(prev,x2=>{x2.scenarios[event.data.year]=event.data.scenarios;const range=Object.keys(x2.scenarios).map(x3=>+x3).filter((x3,i,arr)=>i===0?!0:x3-arr[i-1]===1),min2=range[0],max2=range.at(-1);x2.loading=max2!==maxYear,x2.maxYear=max2,x2.minYear=min2}))});const loadAllScenarios=__name(()=>{var _a;const projectedIncome2=store.state.projectedIncome,first=(_a=projectedIncome2.timeSeries.paycheck[1])==null?void 0:_a.date,oldestYear=(first?DateTime.fromISO(first):getLocalDateTime()).year;workers[0].postMessage({year:currentYear,projectedIncome:projectedIncome2});let workerIdx=1;for(let i=oldestYear;i<currentYear;i++){const idx=workerIdx++%workers.length;workers[idx].postMessage({year:i,projectedIncome:projectedIncome2})}for(let i=currentYear+1;i<=maxYear;i++){const idx=workerIdx++%workers.length;workers[idx].postMessage({year:i,projectedIncome:projectedIncome2})}},"loadAllScenarios");loadAllScenarios();let priorProjectedIncome=store.state.projectedIncome;store.subscribe(()=>{priorProjectedIncome!==store.state.projectedIncome&&(scenarioStore.setState(()=>({loading:!1,scenarios:{},maxYear:currentYear,minYear:currentYear})),priorProjectedIncome=store.state.projectedIncome,loadAllScenarios())});ModuleRegistry.registerModules([AllCommunityModule]);const darkTheme=createTheme({palette:{mode:"dark"}});ReactDOM.createRoot(document.getElementById("root")).render(jsx(React.StrictMode,{children:jsx(ErrorBoundary,{fallbackRender:__name(props=>jsxs(Fragment,{children:[jsx("div",{style:{backgroundColor:"#FFF"},children:props.error.message}),jsx("div",{style:{backgroundColor:"#FFF"},children:props.error.stackTrace})]}),"fallbackRender"),children:jsx(LocalizationProvider,{dateAdapter:AdapterLuxon,children:jsxs(ThemeProvider,{theme:darkTheme,children:[jsx(CssBaseline,{}),jsx(RouterProvider,{router})]})})})}));
//# sourceMappingURL=index-Bgw-iGmN.js.map
