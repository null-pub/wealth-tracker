var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});var _a,LocalEventService=(_a=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(frameworkOverrides){this.frameworkOverrides=frameworkOverrides}getListeners(eventType,async,autoCreateListenerCollection){const listenerMap=async?this.allAsyncListeners:this.allSyncListeners;let listeners=listenerMap.get(eventType);return!listeners&&autoCreateListenerCollection&&(listeners=new Set,listenerMap.set(eventType,listeners)),listeners}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(eventType,listener,async=!1){this.getListeners(eventType,async,!0).add(listener)}removeEventListener(eventType,listener,async=!1){const listeners=this.getListeners(eventType,async,!1);listeners&&(listeners.delete(listener),listeners.size===0&&(async?this.allAsyncListeners:this.allSyncListeners).delete(eventType))}addGlobalListener(listener,async=!1){(async?this.globalAsyncListeners:this.globalSyncListeners).add(listener)}removeGlobalListener(listener,async=!1){(async?this.globalAsyncListeners:this.globalSyncListeners).delete(listener)}dispatchEvent(event){const agEvent=event;this.dispatchToListeners(agEvent,!0),this.dispatchToListeners(agEvent,!1),this.firedEvents[agEvent.type]=!0}dispatchEventOnce(event){this.firedEvents[event.type]||this.dispatchEvent(event)}dispatchToListeners(event,async){const eventType=event.type;if(async&&"event"in event){const browserEvent=event.event;browserEvent instanceof Event&&(event.eventPath=browserEvent.composedPath())}const processEventListeners=__name((listeners2,originalListeners2)=>listeners2.forEach(listener=>{if(!originalListeners2.has(listener))return;const callback=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>listener(event)):()=>listener(event);async?this.dispatchAsync(callback):callback()}),"processEventListeners"),originalListeners=this.getListeners(eventType,async,!1)??new Set,listeners=new Set(originalListeners);listeners.size>0&&processEventListeners(listeners,originalListeners),new Set(async?this.globalAsyncListeners:this.globalSyncListeners).forEach(listener=>{const callback=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>listener(eventType,event)):()=>listener(eventType,event);async?this.dispatchAsync(callback):callback()})}dispatchAsync(func){if(this.asyncFunctionsQueue.push(func),!this.scheduled){const flush=__name(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)},"flush");this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(flush):flush(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const queueCopy=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],queueCopy.forEach(func=>func())}},__name(_a,"LocalEventService"),_a);function defaultLocaleTextFunc(_key,defaultValue){return defaultValue}__name(defaultLocaleTextFunc,"defaultLocaleTextFunc");function _getLocaleTextFunc(localeSvc){return(localeSvc==null?void 0:localeSvc.getLocaleTextFunc())??defaultLocaleTextFunc}__name(_getLocaleTextFunc,"_getLocaleTextFunc");function _toggleAriaAttribute(element,attribute,value){value==null||typeof value=="string"&&value==""?_removeAriaAttribute(element,attribute):_setAriaAttribute(element,attribute,value)}__name(_toggleAriaAttribute,"_toggleAriaAttribute");function _setAriaAttribute(element,attribute,value){element.setAttribute(_ariaAttributeName(attribute),value.toString())}__name(_setAriaAttribute,"_setAriaAttribute");function _removeAriaAttribute(element,attribute){element.removeAttribute(_ariaAttributeName(attribute))}__name(_removeAriaAttribute,"_removeAriaAttribute");function _ariaAttributeName(attribute){return`aria-${attribute}`}__name(_ariaAttributeName,"_ariaAttributeName");function _setAriaRole(element,role){role?element.setAttribute("role",role):element.removeAttribute("role")}__name(_setAriaRole,"_setAriaRole");function _getAriaSortState(sortDirection){let sort;return sortDirection==="asc"?sort="ascending":sortDirection==="desc"?sort="descending":sortDirection==="mixed"?sort="other":sort="none",sort}__name(_getAriaSortState,"_getAriaSortState");function _getAriaLabel(element){return element.getAttribute("aria-label")}__name(_getAriaLabel,"_getAriaLabel");function _setAriaLabel(element,label){_toggleAriaAttribute(element,"label",label)}__name(_setAriaLabel,"_setAriaLabel");function _setAriaLabelledBy(element,labelledBy){_toggleAriaAttribute(element,"labelledby",labelledBy)}__name(_setAriaLabelledBy,"_setAriaLabelledBy");function _setAriaLive(element,live){_toggleAriaAttribute(element,"live",live)}__name(_setAriaLive,"_setAriaLive");function _setAriaAtomic(element,atomic){_toggleAriaAttribute(element,"atomic",atomic)}__name(_setAriaAtomic,"_setAriaAtomic");function _setAriaRelevant(element,relevant){_toggleAriaAttribute(element,"relevant",relevant)}__name(_setAriaRelevant,"_setAriaRelevant");function _setAriaDisabled(element,disabled){_toggleAriaAttribute(element,"disabled",disabled)}__name(_setAriaDisabled,"_setAriaDisabled");function _setAriaHidden(element,hidden){_toggleAriaAttribute(element,"hidden",hidden)}__name(_setAriaHidden,"_setAriaHidden");function _setAriaExpanded(element,expanded){_setAriaAttribute(element,"expanded",expanded)}__name(_setAriaExpanded,"_setAriaExpanded");function _setAriaSetSize(element,setsize){_setAriaAttribute(element,"setsize",setsize)}__name(_setAriaSetSize,"_setAriaSetSize");function _setAriaPosInSet(element,position){_setAriaAttribute(element,"posinset",position)}__name(_setAriaPosInSet,"_setAriaPosInSet");function _setAriaRowCount(element,rowCount){_setAriaAttribute(element,"rowcount",rowCount)}__name(_setAriaRowCount,"_setAriaRowCount");function _setAriaRowIndex(element,rowIndex){_setAriaAttribute(element,"rowindex",rowIndex)}__name(_setAriaRowIndex,"_setAriaRowIndex");function _setAriaRowSpan(element,spanCount){_setAriaAttribute(element,"rowspan",spanCount)}__name(_setAriaRowSpan,"_setAriaRowSpan");function _setAriaColCount(element,colCount){_setAriaAttribute(element,"colcount",colCount)}__name(_setAriaColCount,"_setAriaColCount");function _setAriaColIndex(element,colIndex){_setAriaAttribute(element,"colindex",colIndex)}__name(_setAriaColIndex,"_setAriaColIndex");function _setAriaColSpan(element,colSpan){_setAriaAttribute(element,"colspan",colSpan)}__name(_setAriaColSpan,"_setAriaColSpan");function _setAriaSort(element,sort){_setAriaAttribute(element,"sort",sort)}__name(_setAriaSort,"_setAriaSort");function _removeAriaSort(element){_removeAriaAttribute(element,"sort")}__name(_removeAriaSort,"_removeAriaSort");function _setAriaSelected(element,selected){_toggleAriaAttribute(element,"selected",selected)}__name(_setAriaSelected,"_setAriaSelected");function _setAriaControls(controllerElement,controlledElement){_toggleAriaAttribute(controllerElement,"controls",controlledElement.id),_setAriaLabelledBy(controlledElement,controllerElement.id)}__name(_setAriaControls,"_setAriaControls");function _getAriaCheckboxStateName(translate,state){return state===void 0?translate("ariaIndeterminate","indeterminate"):state===!0?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked")}__name(_getAriaCheckboxStateName,"_getAriaCheckboxStateName");var isSafari,isFirefox,isMacOs,isIOS,invisibleScrollbar,browserScrollbarWidth,maxDivHeight;function _isBrowserSafari(){return isSafari===void 0&&(isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),isSafari}__name(_isBrowserSafari,"_isBrowserSafari");function _isBrowserFirefox(){return isFirefox===void 0&&(isFirefox=/(firefox)/i.test(navigator.userAgent)),isFirefox}__name(_isBrowserFirefox,"_isBrowserFirefox");function _isMacOsUserAgent(){return isMacOs===void 0&&(isMacOs=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),isMacOs}__name(_isMacOsUserAgent,"_isMacOsUserAgent");function _isIOSUserAgent(){return isIOS===void 0&&(isIOS=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),isIOS}__name(_isIOSUserAgent,"_isIOSUserAgent");function _getTabIndex(el){if(!el)return null;const numberTabIndex=el.tabIndex,tabIndex=el.getAttribute("tabIndex");return numberTabIndex===-1&&(tabIndex===null||tabIndex===""&&!_isBrowserFirefox())?null:numberTabIndex.toString()}__name(_getTabIndex,"_getTabIndex");function _getMaxDivHeight(){if(maxDivHeight!==void 0)return maxDivHeight;if(!document.body)return-1;let res=1e6;const testUpTo=_isBrowserFirefox()?6e6:1e9,div=document.createElement("div");for(document.body.appendChild(div);;){const test=res*2;if(div.style.height=test+"px",test>testUpTo||div.clientHeight!==test)break;res=test}return document.body.removeChild(div),maxDivHeight=res,res}__name(_getMaxDivHeight,"_getMaxDivHeight");function _getScrollbarWidth(){return browserScrollbarWidth==null&&initScrollbarWidthAndVisibility(),browserScrollbarWidth}__name(_getScrollbarWidth,"_getScrollbarWidth");function initScrollbarWidthAndVisibility(){const body=document.body,div=document.createElement("div");div.style.width=div.style.height="100px",div.style.opacity="0",div.style.overflow="scroll",div.style.msOverflowStyle="scrollbar",div.style.position="absolute",body.appendChild(div);let width=div.offsetWidth-div.clientWidth;width===0&&div.clientWidth===0&&(width=null),div.parentNode&&div.parentNode.removeChild(div),width!=null&&(browserScrollbarWidth=width,invisibleScrollbar=width===0)}__name(initScrollbarWidthAndVisibility,"initScrollbarWidthAndVisibility");function _isInvisibleScrollbar(){return invisibleScrollbar==null&&initScrollbarWidthAndVisibility(),invisibleScrollbar}__name(_isInvisibleScrollbar,"_isInvisibleScrollbar");var FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea, [href]",FOCUSABLE_EXCLUDE="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function _isFocusableFormField(element){const matches=Element.prototype.matches||Element.prototype.msMatchesSelector,isFocusable=matches.call(element,"input, select, button, textarea"),isNotFocusable=matches.call(element,FOCUSABLE_EXCLUDE),isElementVisible=_isVisible(element);return isFocusable&&!isNotFocusable&&isElementVisible}__name(_isFocusableFormField,"_isFocusableFormField");function _setDisplayed(element,displayed,options={}){const{skipAriaHidden}=options;element.classList.toggle("ag-hidden",!displayed),skipAriaHidden||_setAriaHidden(element,!displayed)}__name(_setDisplayed,"_setDisplayed");function _setVisible(element,visible,options={}){const{skipAriaHidden}=options;element.classList.toggle("ag-invisible",!visible),skipAriaHidden||_setAriaHidden(element,!visible)}__name(_setVisible,"_setVisible");function _setDisabled(element,disabled){const attributeName="disabled",addOrRemoveDisabledAttribute=disabled?e=>e.setAttribute(attributeName,""):e=>e.removeAttribute(attributeName);addOrRemoveDisabledAttribute(element);const inputs=element.querySelectorAll("input")??[];for(const input of inputs)addOrRemoveDisabledAttribute(input)}__name(_setDisabled,"_setDisabled");function _isElementChildOfClass(element,cls,maxNest){let counter=0;for(;element;){if(element.classList.contains(cls))return!0;if(element=element.parentElement,typeof maxNest=="number"){if(++counter>maxNest)break}else if(element===maxNest)break}return!1}__name(_isElementChildOfClass,"_isElementChildOfClass");function _getElementSize(el){const{height,width,borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth,paddingTop,paddingRight,paddingBottom,paddingLeft,marginTop,marginRight,marginBottom,marginLeft,boxSizing}=window.getComputedStyle(el);return{height:parseFloat(height||"0"),width:parseFloat(width||"0"),borderTopWidth:parseFloat(borderTopWidth||"0"),borderRightWidth:parseFloat(borderRightWidth||"0"),borderBottomWidth:parseFloat(borderBottomWidth||"0"),borderLeftWidth:parseFloat(borderLeftWidth||"0"),paddingTop:parseFloat(paddingTop||"0"),paddingRight:parseFloat(paddingRight||"0"),paddingBottom:parseFloat(paddingBottom||"0"),paddingLeft:parseFloat(paddingLeft||"0"),marginTop:parseFloat(marginTop||"0"),marginRight:parseFloat(marginRight||"0"),marginBottom:parseFloat(marginBottom||"0"),marginLeft:parseFloat(marginLeft||"0"),boxSizing}}__name(_getElementSize,"_getElementSize");function _getInnerHeight(el){const size=_getElementSize(el);return size.boxSizing==="border-box"?size.height-size.paddingTop-size.paddingBottom:size.height}__name(_getInnerHeight,"_getInnerHeight");function _getInnerWidth(el){const size=_getElementSize(el);return size.boxSizing==="border-box"?size.width-size.paddingLeft-size.paddingRight:size.width}__name(_getInnerWidth,"_getInnerWidth");function _getAbsoluteHeight(el){const{height,marginBottom,marginTop}=_getElementSize(el);return Math.floor(height+marginBottom+marginTop)}__name(_getAbsoluteHeight,"_getAbsoluteHeight");function _getAbsoluteWidth(el){const{width,marginLeft,marginRight}=_getElementSize(el);return Math.floor(width+marginLeft+marginRight)}__name(_getAbsoluteWidth,"_getAbsoluteWidth");function _getElementRectWithOffset(el){const offsetElementRect=el.getBoundingClientRect(),{borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth}=_getElementSize(el);return{top:offsetElementRect.top+(borderTopWidth||0),left:offsetElementRect.left+(borderLeftWidth||0),right:offsetElementRect.right+(borderRightWidth||0),bottom:offsetElementRect.bottom+(borderBottomWidth||0)}}__name(_getElementRectWithOffset,"_getElementRectWithOffset");function _getScrollLeft(element,rtl){let scrollLeft=element.scrollLeft;return rtl&&(scrollLeft=Math.abs(scrollLeft)),scrollLeft}__name(_getScrollLeft,"_getScrollLeft");function _setScrollLeft(element,value,rtl){rtl&&(value*=-1),element.scrollLeft=value}__name(_setScrollLeft,"_setScrollLeft");function _clearElement(el){for(;el&&el.firstChild;)el.removeChild(el.firstChild)}__name(_clearElement,"_clearElement");function _removeFromParent(node){node&&node.parentNode&&node.parentNode.removeChild(node)}__name(_removeFromParent,"_removeFromParent");function _isInDOM(element){return!!element.offsetParent}__name(_isInDOM,"_isInDOM");function _isVisible(element){const el=element;return el.checkVisibility?el.checkVisibility({checkVisibilityCSS:!0}):!(!_isInDOM(element)||window.getComputedStyle(element).visibility!=="visible")}__name(_isVisible,"_isVisible");function _loadTemplate(template){const tempDiv=document.createElement("div");return tempDiv.innerHTML=(template||"").trim(),tempDiv.firstChild}__name(_loadTemplate,"_loadTemplate");function _isHorizontalScrollShowing(element){return element.clientWidth<element.scrollWidth}__name(_isHorizontalScrollShowing,"_isHorizontalScrollShowing");function _isVerticalScrollShowing(element){return element.clientHeight<element.scrollHeight}__name(_isVerticalScrollShowing,"_isVerticalScrollShowing");function _setElementWidth(element,width){width==="flex"?(element.style.removeProperty("width"),element.style.removeProperty("minWidth"),element.style.removeProperty("maxWidth"),element.style.flex="1 1 auto"):_setFixedWidth(element,width)}__name(_setElementWidth,"_setElementWidth");function _setFixedWidth(element,width){width=_formatSize(width),element.style.width=width,element.style.maxWidth=width,element.style.minWidth=width}__name(_setFixedWidth,"_setFixedWidth");function _setFixedHeight(element,height){height=_formatSize(height),element.style.height=height,element.style.maxHeight=height,element.style.minHeight=height}__name(_setFixedHeight,"_setFixedHeight");function _formatSize(size){return typeof size=="number"?`${size}px`:size}__name(_formatSize,"_formatSize");function _isNodeOrElement(o){return o instanceof Node||o instanceof HTMLElement}__name(_isNodeOrElement,"_isNodeOrElement");function _addOrRemoveAttribute(element,name,value){value==null||value===""?element.removeAttribute(name):element.setAttribute(name,value.toString())}__name(_addOrRemoveAttribute,"_addOrRemoveAttribute");function _observeResize(beans,element,callback){const ResizeObserverImpl=_getWindow(beans).ResizeObserver,resizeObserver=ResizeObserverImpl?new ResizeObserverImpl(callback):null;return resizeObserver==null||resizeObserver.observe(element),()=>resizeObserver==null?void 0:resizeObserver.disconnect()}__name(_observeResize,"_observeResize");function _requestAnimationFrame(beans,callback){const win=_getWindow(beans);win.requestAnimationFrame?win.requestAnimationFrame(callback):win.webkitRequestAnimationFrame?win.webkitRequestAnimationFrame(callback):win.setTimeout(callback,0)}__name(_requestAnimationFrame,"_requestAnimationFrame");var DataRefAttribute="data-ref",whitespaceNode;function getWhitespaceNode(){return whitespaceNode??(whitespaceNode=document.createTextNode(" ")),whitespaceNode.cloneNode()}__name(getWhitespaceNode,"getWhitespaceNode");function _createElement(params){const{attrs,children,cls,ref,role,tag}=params,element=document.createElement(tag);if(cls&&(element.className=cls),ref&&element.setAttribute(DataRefAttribute,ref),role&&element.setAttribute("role",role),attrs)for(const key of Object.keys(attrs))element.setAttribute(key,attrs[key]);if(children)if(typeof children=="string")element.textContent=children;else{let addFirstWhitespace=!0;for(const child of children)child&&(typeof child=="string"?(element.appendChild(document.createTextNode(child)),addFirstWhitespace=!1):(addFirstWhitespace&&(element.appendChild(getWhitespaceNode()),addFirstWhitespace=!1),element.append(_createElement(child)),element.appendChild(getWhitespaceNode())))}return element}__name(_createElement,"_createElement");function _makeNull(value){return value==null||value===""?null:value}__name(_makeNull,"_makeNull");function _exists(value){return value!=null&&value!==""}__name(_exists,"_exists");function _missing(value){return!_exists(value)}__name(_missing,"_missing");function _toStringOrNull(value){return value!=null&&typeof value.toString=="function"?value.toString():null}__name(_toStringOrNull,"_toStringOrNull");function _jsonEquals(val1,val2){const val1Json=val1?JSON.stringify(val1):null,val2Json=val2?JSON.stringify(val2):null;return val1Json===val2Json}__name(_jsonEquals,"_jsonEquals");function _defaultComparator(valueA,valueB,accentedCompare=!1){const valueAMissing=valueA==null,valueBMissing=valueB==null;if(valueA&&valueA.toNumber&&(valueA=valueA.toNumber()),valueB&&valueB.toNumber&&(valueB=valueB.toNumber()),valueAMissing&&valueBMissing)return 0;if(valueAMissing)return-1;if(valueBMissing)return 1;function doQuickCompare(a,b){return a>b?1:a<b?-1:0}if(__name(doQuickCompare,"doQuickCompare"),typeof valueA!="string"||!accentedCompare)return doQuickCompare(valueA,valueB);try{return valueA.localeCompare(valueB)}catch{return doQuickCompare(valueA,valueB)}}__name(_defaultComparator,"_defaultComparator");var BASE_URL="https://www.ag-grid.com",doOnceFlags={};function _doOnce(func,key){doOnceFlags[key]||(func(),doOnceFlags[key]=!0)}__name(_doOnce,"_doOnce");function _logIfDebug(gos,message,...args){gos.get("debug")&&console.log("AG Grid: "+message,...args)}__name(_logIfDebug,"_logIfDebug");function _warnOnce(msg,...args){_doOnce(()=>console.warn("AG Grid: "+msg,...args),msg+(args==null?void 0:args.join("")))}__name(_warnOnce,"_warnOnce");function _errorOnce(msg,...args){_doOnce(()=>console.error("AG Grid: "+msg,...args),msg+(args==null?void 0:args.join("")))}__name(_errorOnce,"_errorOnce");var batchedCallsSetTimeout={pending:!1,funcs:[]},batchedCallsRaf={pending:!1,funcs:[]};function _batchCall(func,mode="setTimeout",beans){const batch=mode==="raf"?batchedCallsRaf:batchedCallsSetTimeout;if(batch.funcs.push(func),batch.pending)return;batch.pending=!0;const runBatch=__name(()=>{const funcsCopy=batch.funcs.slice();batch.funcs.length=0,batch.pending=!1,funcsCopy.forEach(func2=>func2())},"runBatch");mode==="raf"?_requestAnimationFrame(beans,runBatch):window.setTimeout(runBatch,0)}__name(_batchCall,"_batchCall");function _debounce(bean,func,delay){let timeout;return function(...args){const context=this;window.clearTimeout(timeout),timeout=window.setTimeout(function(){bean.isAlive()&&func.apply(context,args)},delay)}}__name(_debounce,"_debounce");function _throttle(func,wait){let previousCall=0;return function(...args){const context=this,currentCall=Date.now();currentCall-previousCall<wait||(previousCall=currentCall,func.apply(context,args))}}__name(_throttle,"_throttle");function _waitUntil(condition,callback,timeout=100,timeoutMessage){const timeStamp=Date.now();let interval=null,executed=!1;const internalCallback=__name(()=>{const reachedTimeout=Date.now()-timeStamp>timeout;(condition()||reachedTimeout)&&(callback(),executed=!0,interval!=null&&(window.clearInterval(interval),interval=null))},"internalCallback");internalCallback(),executed||(interval=window.setInterval(internalCallback,10))}__name(_waitUntil,"_waitUntil");var VERSION="33.2.4",MAX_URL_LENGTH=2e3,MIN_PARAM_LENGTH=100,VERSION_PARAM_NAME="_version_",validation=null,baseDocLink=`${BASE_URL}/javascript-data-grid`;function provideValidationServiceLogger(logger){validation=logger}__name(provideValidationServiceLogger,"provideValidationServiceLogger");function setValidationDocLink(docLink){baseDocLink=docLink}__name(setValidationDocLink,"setValidationDocLink");function getErrorParts(id,args,defaultMessage){return(validation==null?void 0:validation.getConsoleMessage(id,args))??[minifiedLog(id,args,defaultMessage)]}__name(getErrorParts,"getErrorParts");function getMsgOrDefault(logger,id,args,defaultMessage){logger(`error #${id}`,...getErrorParts(id,args,defaultMessage))}__name(getMsgOrDefault,"getMsgOrDefault");function stringifyObject(inputObj){if(!inputObj)return String(inputObj);const object={};for(const prop of Object.keys(inputObj))typeof inputObj[prop]!="object"&&typeof inputObj[prop]!="function"&&(object[prop]=inputObj[prop]);return JSON.stringify(object)}__name(stringifyObject,"stringifyObject");function stringifyValue(value){let output=value;return value instanceof Error?output=value.toString():typeof value=="object"&&(output=stringifyObject(value)),output}__name(stringifyValue,"stringifyValue");function toStringWithNullUndefined(str){return str===void 0?"undefined":str===null?"null":str}__name(toStringWithNullUndefined,"toStringWithNullUndefined");function getParamsUrl(baseUrl,params){return`${baseUrl}?${params.toString()}`}__name(getParamsUrl,"getParamsUrl");function truncateUrl(baseUrl,params,maxLength){const sortedParams=Array.from(params.entries()).sort((a,b)=>b[1].length-a[1].length);let url=getParamsUrl(baseUrl,params);for(const[key,value]of sortedParams){if(key===VERSION_PARAM_NAME)continue;const excessLength=url.length-maxLength;if(excessLength<=0)break;const ellipse="...",truncateAmount=excessLength+ellipse.length,truncatedValue=value.length-truncateAmount>MIN_PARAM_LENGTH?value.slice(0,value.length-truncateAmount)+ellipse:value.slice(0,MIN_PARAM_LENGTH)+ellipse;params.set(key,truncatedValue),url=getParamsUrl(baseUrl,params)}return url}__name(truncateUrl,"truncateUrl");function getErrorLink(errorNum,args){const params=new URLSearchParams;if(params.append(VERSION_PARAM_NAME,VERSION),args)for(const key of Object.keys(args))params.append(key,stringifyValue(args[key]));const baseUrl=`${baseDocLink}/errors/${errorNum}`,url=getParamsUrl(baseUrl,params);return url.length<=MAX_URL_LENGTH?url:truncateUrl(baseUrl,params,MAX_URL_LENGTH)}__name(getErrorLink,"getErrorLink");var minifiedLog=__name((errorNum,args,defaultMessage)=>{const errorLink=getErrorLink(errorNum,args);return`${defaultMessage?defaultMessage+` 
`:""}Visit ${errorLink}${defaultMessage?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`},"minifiedLog");function _warn(...args){getMsgOrDefault(_warnOnce,args[0],args[1])}__name(_warn,"_warn");function _error(...args){getMsgOrDefault(_errorOnce,args[0],args[1])}__name(_error,"_error");function _logPreInitErr(id,args,defaultMessage){getMsgOrDefault(_errorOnce,id,args,defaultMessage)}__name(_logPreInitErr,"_logPreInitErr");function getErrMsg(defaultMessage,args){const id=args[0];return`error #${id} `+getErrorParts(id,args[1],defaultMessage).join(" ")}__name(getErrMsg,"getErrMsg");function _errMsg(...args){return getErrMsg(void 0,args)}__name(_errMsg,"_errMsg");function isRowModelType(gos,rowModelType){return gos.get("rowModelType")===rowModelType}__name(isRowModelType,"isRowModelType");function _isClientSideRowModel(gos,rowModel){return isRowModelType(gos,"clientSide")}__name(_isClientSideRowModel,"_isClientSideRowModel");function _isServerSideRowModel(gos,rowModel){return isRowModelType(gos,"serverSide")}__name(_isServerSideRowModel,"_isServerSideRowModel");function _isDomLayout(gos,domLayout){return gos.get("domLayout")===domLayout}__name(_isDomLayout,"_isDomLayout");function _isRowSelection(gos){return _getRowSelectionMode(gos)!==void 0}__name(_isRowSelection,"_isRowSelection");function _isGetRowHeightFunction(gos){return typeof gos.get("getRowHeight")=="function"}__name(_isGetRowHeightFunction,"_isGetRowHeightFunction");function _shouldMaintainColumnOrder(gos,isPivotColumns){return isPivotColumns?!gos.get("enableStrictPivotColumnOrder"):gos.get("maintainColumnOrder")}__name(_shouldMaintainColumnOrder,"_shouldMaintainColumnOrder");function _getRowHeightForNode(beans,rowNode,allowEstimate=!1,defaultRowHeight){const{gos,environment}=beans;if(defaultRowHeight==null&&(defaultRowHeight=environment.getDefaultRowHeight()),_isGetRowHeightFunction(gos)){if(allowEstimate)return{height:defaultRowHeight,estimated:!0};const params={node:rowNode,data:rowNode.data},height=gos.getCallback("getRowHeight")(params);if(isNumeric(height))return height===0&&_warn(23),{height:Math.max(1,height),estimated:!1}}if(rowNode.detail&&gos.get("masterDetail"))return getMasterDetailRowHeight(gos);const gridOptionsRowHeight=gos.get("rowHeight");return{height:gridOptionsRowHeight&&isNumeric(gridOptionsRowHeight)?gridOptionsRowHeight:defaultRowHeight,estimated:!1}}__name(_getRowHeightForNode,"_getRowHeightForNode");function getMasterDetailRowHeight(gos){if(gos.get("detailRowAutoHeight"))return{height:1,estimated:!1};const defaultRowHeight=gos.get("detailRowHeight");return isNumeric(defaultRowHeight)?{height:defaultRowHeight,estimated:!1}:{height:300,estimated:!1}}__name(getMasterDetailRowHeight,"getMasterDetailRowHeight");function _getRowHeightAsNumber(beans){const{environment,gos}=beans,gridOptionsRowHeight=gos.get("rowHeight");if(!gridOptionsRowHeight||_missing(gridOptionsRowHeight))return environment.getDefaultRowHeight();const rowHeight=environment.refreshRowHeightVariable();return rowHeight!==-1?rowHeight:(_warn(24),environment.getDefaultRowHeight())}__name(_getRowHeightAsNumber,"_getRowHeightAsNumber");function isNumeric(value){return!isNaN(value)&&typeof value=="number"&&isFinite(value)}__name(isNumeric,"isNumeric");function _getDomData(gos,element,key){const domData=element[gos.getDomDataKey()];return domData?domData[key]:void 0}__name(_getDomData,"_getDomData");function _setDomData(gos,element,key,value){const domDataKey=gos.getDomDataKey();let domData=element[domDataKey];_missing(domData)&&(domData={},element[domDataKey]=domData),domData[key]=value}__name(_setDomData,"_setDomData");function _getDocument(beans){const{gos,eGridDiv}=beans;let result=null;const gridOptionsGetDocument=gos.get("getDocument");return gridOptionsGetDocument&&_exists(gridOptionsGetDocument)?result=gridOptionsGetDocument():eGridDiv&&(result=eGridDiv.ownerDocument),result&&_exists(result)?result:document}__name(_getDocument,"_getDocument");function _getWindow(beans){return _getDocument(beans).defaultView||window}__name(_getWindow,"_getWindow");function _getRootNode(beans){return beans.eGridDiv.getRootNode()}__name(_getRootNode,"_getRootNode");function _getActiveDomElement(beans){return _getRootNode(beans).activeElement}__name(_getActiveDomElement,"_getActiveDomElement");function _getPageBody(beans){let rootNode=null,targetEl=null;try{rootNode=_getDocument(beans).fullscreenElement}catch{}finally{rootNode||(rootNode=_getRootNode(beans));const body=rootNode.querySelector("body");body?targetEl=body:rootNode instanceof ShadowRoot?targetEl=rootNode:rootNode instanceof Document?targetEl=rootNode==null?void 0:rootNode.documentElement:targetEl=rootNode}return targetEl}__name(_getPageBody,"_getPageBody");function _getBodyWidth(beans){const body=_getPageBody(beans);return(body==null?void 0:body.clientWidth)??(window.innerHeight||-1)}__name(_getBodyWidth,"_getBodyWidth");function _getBodyHeight(beans){const body=_getPageBody(beans);return(body==null?void 0:body.clientHeight)??(window.innerHeight||-1)}__name(_getBodyHeight,"_getBodyHeight");function _anchorElementToMouseMoveEvent(element,mouseMoveEvent,beans){const height=element.getBoundingClientRect().height,browserWidth=_getBodyWidth(beans)-2,browserHeight=_getBodyHeight(beans)-2;if(!element.offsetParent)return;const offsetParentSize=_getElementRectWithOffset(element.offsetParent),{clientY,clientX}=mouseMoveEvent;let top=clientY-offsetParentSize.top-height/2,left=clientX-offsetParentSize.left-10;const eDocument=_getDocument(beans),win=eDocument.defaultView||window,windowScrollY=win.pageYOffset||eDocument.documentElement.scrollTop,windowScrollX=win.pageXOffset||eDocument.documentElement.scrollLeft;browserWidth>0&&left+element.clientWidth>browserWidth+windowScrollX&&(left=browserWidth+windowScrollX-element.clientWidth),left<0&&(left=0),browserHeight>0&&top+element.clientHeight>browserHeight+windowScrollY&&(top=browserHeight+windowScrollY-element.clientHeight),top<0&&(top=0),element.style.left=`${left}px`,element.style.top=`${top}px`}__name(_anchorElementToMouseMoveEvent,"_anchorElementToMouseMoveEvent");function _isNothingFocused(beans){const eDocument=_getDocument(beans),activeEl=_getActiveDomElement(beans);return activeEl===null||activeEl===eDocument.body}__name(_isNothingFocused,"_isNothingFocused");function _isAnimateRows(gos){return gos.get("ensureDomOrder")?!1:gos.get("animateRows")}__name(_isAnimateRows,"_isAnimateRows");function _isGroupRowsSticky(gos){return!(gos.get("paginateChildRows")||gos.get("groupHideOpenParents")||_isDomLayout(gos,"print"))}__name(_isGroupRowsSticky,"_isGroupRowsSticky");function _isColumnsSortingCoupledToGroup(gos){const autoGroupColumnDef=gos.get("autoGroupColumnDef");return!(autoGroupColumnDef!=null&&autoGroupColumnDef.comparator)&&!gos.get("treeData")}__name(_isColumnsSortingCoupledToGroup,"_isColumnsSortingCoupledToGroup");function _getGroupAggFiltering(gos){const userValue=gos.get("groupAggFiltering");if(typeof userValue=="function")return gos.getCallback("groupAggFiltering");if(userValue===!0)return()=>!0}__name(_getGroupAggFiltering,"_getGroupAggFiltering");function _isGroupMultiAutoColumn(gos){return gos.get("groupHideOpenParents")?!0:gos.get("groupDisplayType")==="multipleColumns"}__name(_isGroupMultiAutoColumn,"_isGroupMultiAutoColumn");function _isGroupUseEntireRow(gos,pivotMode){return pivotMode?!1:gos.get("groupDisplayType")==="groupRows"}__name(_isGroupUseEntireRow,"_isGroupUseEntireRow");function _getRowIdCallback(gos){const getRowId=gos.getCallback("getRowId");return getRowId===void 0?getRowId:params=>{let id=getRowId(params);return typeof id!="string"&&(_warn(25,{id}),id=String(id)),id}}__name(_getRowIdCallback,"_getRowIdCallback");function _canSkipShowingRowGroup(gos,node){const isSkippingGroups=gos.get("groupHideParentOfSingleChild");return!!(isSkippingGroups===!0||isSkippingGroups==="leafGroupsOnly"&&node.leafGroup||gos.get("groupRemoveSingleChildren")||gos.get("groupRemoveLowestSingleChildren")&&node.leafGroup)}__name(_canSkipShowingRowGroup,"_canSkipShowingRowGroup");function _getMaxConcurrentDatasourceRequests(gos){const res=gos.get("maxConcurrentDatasourceRequests");return res>0?res:void 0}__name(_getMaxConcurrentDatasourceRequests,"_getMaxConcurrentDatasourceRequests");function _getCheckboxes(selection){return(selection==null?void 0:selection.checkboxes)??!0}__name(_getCheckboxes,"_getCheckboxes");function _getHeaderCheckbox(selection){return(selection==null?void 0:selection.mode)==="multiRow"&&(selection.headerCheckbox??!0)}__name(_getHeaderCheckbox,"_getHeaderCheckbox");function _getCheckboxLocation(rowSelection){if(typeof rowSelection=="object")return rowSelection.checkboxLocation??"selectionColumn"}__name(_getCheckboxLocation,"_getCheckboxLocation");function _getHideDisabledCheckboxes(selection){return(selection==null?void 0:selection.hideDisabledCheckboxes)??!1}__name(_getHideDisabledCheckboxes,"_getHideDisabledCheckboxes");function _isUsingNewRowSelectionAPI(gos){return typeof gos.get("rowSelection")!="string"}__name(_isUsingNewRowSelectionAPI,"_isUsingNewRowSelectionAPI");function _isCellSelectionEnabled(gos){const selection=gos.get("cellSelection");return selection!==void 0?!!selection:gos.get("enableRangeSelection")}__name(_isCellSelectionEnabled,"_isCellSelectionEnabled");function _getEnableClickSelection(gos){const selection=gos.get("rowSelection")??"single";if(typeof selection=="string"){const suppressRowClickSelection=gos.get("suppressRowClickSelection"),suppressRowDeselection=gos.get("suppressRowDeselection");return suppressRowClickSelection&&suppressRowDeselection?!1:suppressRowClickSelection?"enableDeselection":suppressRowDeselection?"enableSelection":!0}return selection.mode==="singleRow"||selection.mode==="multiRow"?selection.enableClickSelection??!1:!1}__name(_getEnableClickSelection,"_getEnableClickSelection");function _getEnableSelection(gos){const enableClickSelection=_getEnableClickSelection(gos);return enableClickSelection===!0||enableClickSelection==="enableSelection"}__name(_getEnableSelection,"_getEnableSelection");function _getEnableDeselection(gos){const enableClickSelection=_getEnableClickSelection(gos);return enableClickSelection===!0||enableClickSelection==="enableDeselection"}__name(_getEnableDeselection,"_getEnableDeselection");function _getIsRowSelectable(gos){const selection=gos.get("rowSelection");return typeof selection=="string"?gos.get("isRowSelectable"):selection==null?void 0:selection.isRowSelectable}__name(_getIsRowSelectable,"_getIsRowSelectable");function _getRowSelectionMode(arg){const selection="beanName"in arg&&arg.beanName==="gos"?arg.get("rowSelection"):arg.rowSelection;if(typeof selection=="string")switch(selection){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(selection==null?void 0:selection.mode){case"multiRow":case"singleRow":return selection.mode;default:return}}__name(_getRowSelectionMode,"_getRowSelectionMode");function _isMultiRowSelection(arg){return _getRowSelectionMode(arg)==="multiRow"}__name(_isMultiRowSelection,"_isMultiRowSelection");function _getEnableSelectionWithoutKeys(gos){const selection=gos.get("rowSelection");return typeof selection=="string"?gos.get("rowMultiSelectWithClick"):(selection==null?void 0:selection.enableSelectionWithoutKeys)??!1}__name(_getEnableSelectionWithoutKeys,"_getEnableSelectionWithoutKeys");function _getGroupSelection(gos){const selection=gos.get("rowSelection");if(typeof selection=="string"){const groupSelectsChildren=gos.get("groupSelectsChildren"),groupSelectsFiltered=gos.get("groupSelectsFiltered");return groupSelectsChildren&&groupSelectsFiltered?"filteredDescendants":groupSelectsChildren?"descendants":"self"}return(selection==null?void 0:selection.mode)==="multiRow"?selection.groupSelects:void 0}__name(_getGroupSelection,"_getGroupSelection");function _getSelectAll(gos,defaultValue=!0){const rowSelection=gos.get("rowSelection");return typeof rowSelection!="object"?defaultValue?"all":void 0:rowSelection.mode==="multiRow"?rowSelection.selectAll:"all"}__name(_getSelectAll,"_getSelectAll");function _getGroupSelectsDescendants(gos){const groupSelection=_getGroupSelection(gos);return groupSelection==="descendants"||groupSelection==="filteredDescendants"}__name(_getGroupSelectsDescendants,"_getGroupSelectsDescendants");function _getMasterSelects(gos){const rowSelection=gos.get("rowSelection");return typeof rowSelection=="object"&&rowSelection.masterSelects||"self"}__name(_getMasterSelects,"_getMasterSelects");function _isSetFilterByDefault(gos){return gos.isModuleRegistered("SetFilter")&&!gos.get("suppressSetFilterByDefault")}__name(_isSetFilterByDefault,"_isSetFilterByDefault");function _isLegacyMenuEnabled(gos){return gos.get("columnMenu")==="legacy"}__name(_isLegacyMenuEnabled,"_isLegacyMenuEnabled");function _isColumnMenuAnchoringEnabled(gos){return!_isLegacyMenuEnabled(gos)}__name(_isColumnMenuAnchoringEnabled,"_isColumnMenuAnchoringEnabled");function _getCallbackForEvent(eventName){return!eventName||eventName.length<2?eventName:"on"+eventName[0].toUpperCase()+eventName.substring(1)}__name(_getCallbackForEvent,"_getCallbackForEvent");function _combineAttributesAndGridOptions(gridOptions,component,gridOptionsKeys){typeof gridOptions!="object"&&(gridOptions={});const mergedOptions={...gridOptions};return gridOptionsKeys.forEach(key=>{const value=component[key];typeof value<"u"&&(mergedOptions[key]=value)}),mergedOptions}__name(_combineAttributesAndGridOptions,"_combineAttributesAndGridOptions");function _processOnChange(changes,api){if(!changes)return;const gridChanges={};let hasChanges=!1;if(Object.keys(changes).forEach(key=>{gridChanges[key]=changes[key],hasChanges=!0}),!hasChanges)return;const internalUpdateEvent={type:"gridOptionsChanged",options:gridChanges};api.dispatchEvent(internalUpdateEvent);const event={type:"componentStateChanged",...gridChanges};api.dispatchEvent(event)}__name(_processOnChange,"_processOnChange");function _addGridCommonParams(gos,params){return gos.addGridCommonParams(params)}__name(_addGridCommonParams,"_addGridCommonParams");function _getGroupingApproach(gos){return gos.get("treeData")?gos.get("treeDataParentIdField")?"treeSelfRef":gos.get("treeDataChildrenField")?"treeNested":"treePath":"group"}__name(_getGroupingApproach,"_getGroupingApproach");var AG_GRID_STOP_PROPAGATION="__ag_Grid_Stop_Propagation",PASSIVE_EVENTS=["touchstart","touchend","touchmove","touchcancel","scroll"],NON_PASSIVE_EVENTS=["wheel"],supports={};function _stopPropagationForAgGrid(event){event[AG_GRID_STOP_PROPAGATION]=!0}__name(_stopPropagationForAgGrid,"_stopPropagationForAgGrid");function _isStopPropagationForAgGrid(event){return event[AG_GRID_STOP_PROPAGATION]===!0}__name(_isStopPropagationForAgGrid,"_isStopPropagationForAgGrid");var _isEventSupported=(()=>{const tags={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return __name(eventName=>{if(typeof supports[eventName]=="boolean")return supports[eventName];const el=document.createElement(tags[eventName]||"div");return eventName="on"+eventName,supports[eventName]=eventName in el},"eventChecker")})();function _getCtrlForEventTarget(gos,eventTarget,type){let sourceElement=eventTarget;for(;sourceElement;){const renderedComp=_getDomData(gos,sourceElement,type);if(renderedComp)return renderedComp;sourceElement=sourceElement.parentElement}return null}__name(_getCtrlForEventTarget,"_getCtrlForEventTarget");function _isElementInEventPath(element,event){return!event||!element?!1:_getEventPath(event).indexOf(element)>=0}__name(_isElementInEventPath,"_isElementInEventPath");function _createEventPath(event){const res=[];let pointer=event.target;for(;pointer;)res.push(pointer),pointer=pointer.parentElement;return res}__name(_createEventPath,"_createEventPath");function _getEventPath(event){const eventNoType=event;return eventNoType.path?eventNoType.path:eventNoType.composedPath?eventNoType.composedPath():_createEventPath(eventNoType)}__name(_getEventPath,"_getEventPath");function _addSafePassiveEventListener(frameworkOverrides,eElement,event,listener){const passive=getPassiveStateForEvent(event);let options;passive!=null&&(options={passive}),frameworkOverrides&&frameworkOverrides.addEventListener&&frameworkOverrides.addEventListener(eElement,event,listener,options)}__name(_addSafePassiveEventListener,"_addSafePassiveEventListener");var getPassiveStateForEvent=__name(event=>{const isPassive=PASSIVE_EVENTS.includes(event),isNonPassive=NON_PASSIVE_EVENTS.includes(event);if(isPassive)return!0;if(isNonPassive)return!1},"getPassiveStateForEvent"),_a2,BeanStub=(_a2=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(beans){this.beans=beans,this.stubContext=beans.context,this.eventSvc=beans.eventSvc,this.gos=beans.gos}destroy(){const{destroyFunctions}=this;for(let i=0;i<destroyFunctions.length;i++)destroyFunctions[i]();destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(eventType,listener,async){this.localEventService||(this.localEventService=new LocalEventService),this.localEventService.addEventListener(eventType,listener,async)}removeEventListener(eventType,listener,async){var _a238;(_a238=this.localEventService)==null||_a238.removeEventListener(eventType,listener,async)}dispatchLocalEvent(event){var _a238;(_a238=this.localEventService)==null||_a238.dispatchEvent(event)}addManagedElementListeners(object,handlers){return this._setupListeners(object,handlers)}addManagedEventListeners(handlers){return this._setupListeners(this.eventSvc,handlers)}addManagedListeners(object,handlers){return this._setupListeners(object,handlers)}_setupListeners(object,handlers){const destroyFuncs=[];for(const k of Object.keys(handlers)){const handler=handlers[k];handler&&destroyFuncs.push(this._setupListener(object,k,handler))}return destroyFuncs}_setupListener(object,event,listener){if(this.destroyed)return()=>null;let destroyFunc;return isAgEventEmitter(object)?(object.__addEventListener(event,listener),destroyFunc=__name(()=>(object.__removeEventListener(event,listener),null),"destroyFunc")):(object instanceof HTMLElement?_addSafePassiveEventListener(this.beans.frameworkOverrides,object,event,listener):object.addEventListener(event,listener),destroyFunc=__name(()=>(object.removeEventListener(event,listener),null),"destroyFunc")),this.destroyFunctions.push(destroyFunc),()=>(destroyFunc(),this.destroyFunctions=this.destroyFunctions.filter(fn=>fn!==destroyFunc),null)}setupGridOptionListener(event,listener){const{gos}=this;gos.addPropertyEventListener(event,listener);const destroyFunc=__name(()=>(gos.removePropertyEventListener(event,listener),null),"destroyFunc");return this.destroyFunctions.push(destroyFunc),()=>(destroyFunc(),this.destroyFunctions=this.destroyFunctions.filter(fn=>fn!==destroyFunc),null)}addManagedPropertyListener(event,listener){return this.destroyed?()=>null:this.setupGridOptionListener(event,listener)}addManagedPropertyListeners(events,listener){if(this.destroyed)return;const eventsKey=events.join("-")+this.propertyListenerId++,wrappedListener=__name(event=>{if(event.changeSet){if(event.changeSet&&event.changeSet.id===this.lastChangeSetIdLookup[eventsKey])return;this.lastChangeSetIdLookup[eventsKey]=event.changeSet.id}const propertiesChangeEvent={type:"gridPropertyChanged",changeSet:event.changeSet,source:event.source};listener(propertiesChangeEvent)},"wrappedListener");events.forEach(event=>this.setupGridOptionListener(event,wrappedListener))}getLocaleTextFunc(){return _getLocaleTextFunc(this.beans.localeSvc)}addDestroyFunc(func){this.isAlive()?this.destroyFunctions.push(func):func()}createOptionalManagedBean(bean,context){return bean?this.createManagedBean(bean,context):void 0}createManagedBean(bean,context){const res=this.createBean(bean,context);return this.addDestroyFunc(this.destroyBean.bind(this,bean,context)),res}createBean(bean,context,afterPreCreateCallback){return(context||this.stubContext).createBean(bean,afterPreCreateCallback)}destroyBean(bean,context){return(context||this.stubContext).destroyBean(bean)}destroyBeans(beans,context){return(context||this.stubContext).destroyBeans(beans)}},__name(_a2,"BeanStub"),_a2);function isAgEventEmitter(object){return object.__addEventListener!==void 0}__name(isAgEventEmitter,"isAgEventEmitter");var SKIP_JS_BUILTINS=new Set(["__proto__","constructor","prototype"]);function _iterateObject(object,callback){if(object!=null){if(Array.isArray(object)){for(let i=0;i<object.length;i++)callback(i.toString(),object[i]);return}for(const key of Object.keys(object))callback(key,object[key])}}__name(_iterateObject,"_iterateObject");function _mergeDeep(dest,source,copyUndefined=!0,makeCopyOfSimpleObjects=!1){_exists(source)&&_iterateObject(source,(key,sourceValue)=>{if(SKIP_JS_BUILTINS.has(key))return;let destValue=dest[key];destValue!==sourceValue&&(makeCopyOfSimpleObjects&&destValue==null&&sourceValue!=null&&typeof sourceValue=="object"&&sourceValue.constructor===Object&&(destValue={},dest[key]=destValue),_isNonNullObject(sourceValue)&&_isNonNullObject(destValue)&&!Array.isArray(destValue)?_mergeDeep(destValue,sourceValue,copyUndefined,makeCopyOfSimpleObjects):(copyUndefined||sourceValue!==void 0)&&(dest[key]=sourceValue))})}__name(_mergeDeep,"_mergeDeep");function _getValueUsingField(data,field,fieldContainsDots){if(!field||!data)return;if(!fieldContainsDots)return data[field];const fields=field.split(".");let currentObject=data;for(let i=0;i<fields.length;i++){if(currentObject==null)return;currentObject=currentObject[fields[i]]}return currentObject}__name(_getValueUsingField,"_getValueUsingField");function _isNonNullObject(value){return typeof value=="object"&&value!==null}__name(_isNonNullObject,"_isNonNullObject");var reUnescapedHtml=/[&<>"']/g,HTML_ESCAPES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _escapeString(toEscape,skipEscapingHtmlChars){if(toEscape==null)return null;const stringResult=toEscape.toString().toString();return skipEscapingHtmlChars?stringResult:stringResult.replace(reUnescapedHtml,chr=>HTML_ESCAPES[chr])}__name(_escapeString,"_escapeString");var COL_DEF_DEFAULTS={resizable:!0,sortable:!0},instanceIdSequence=0;function getNextColInstanceId(){return instanceIdSequence++}__name(getNextColInstanceId,"getNextColInstanceId");function isColumn(col){return col instanceof AgColumn}__name(isColumn,"isColumn");var _a3,AgColumn=(_a3=class extends BeanStub{constructor(colDef,userProvidedColDef,colId,primary){super(),this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.colId=colId,this.primary=primary,this.isColumn=!0,this.instanceId=getNextColInstanceId(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new LocalEventService,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=_escapeString(colId)}destroy(){var _a238;super.destroy(),(_a238=this.beans.rowSpanSvc)==null||_a238.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef,beans:{sortSvc,pinnedCols,colFlex}}=this;sortSvc==null||sortSvc.initCol(this);const hide=colDef.hide;hide!==void 0?this.visible=!hide:this.visible=!colDef.initialHide,pinnedCols==null||pinnedCols.initCol(this),colFlex==null||colFlex.initCol(this)}setColDef(colDef,userProvidedColDef,source){var _a238;const colSpanChanged=colDef.spanRows!==this.colDef.spanRows;this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),colSpanChanged&&((_a238=this.beans.rowSpanSvc)==null||_a238.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",source)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan()}initDotNotation(){const{gos,colDef:{field,tooltipField}}=this,suppressDotNotation=gos.get("suppressFieldDotNotation");this.fieldContainsDots=_exists(field)&&field.indexOf(".")>=0&&!suppressDotNotation,this.tooltipFieldContainsDots=_exists(tooltipField)&&tooltipField.indexOf(".")>=0&&!suppressDotNotation}initMinAndMaxWidths(){const colDef=this.colDef;this.minWidth=colDef.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=colDef.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){var _a238;(_a238=this.beans.tooltipSvc)==null||_a238.initCol(this)}initRowSpan(){var _a238;this.colDef.spanRows&&((_a238=this.beans.rowSpanSvc)==null||_a238.register(this))}resetActualWidth(source){const initialWidth=this.calculateColInitialWidth(this.colDef);this.setActualWidth(initialWidth,source,!0)}calculateColInitialWidth(colDef){let width;const colDefWidth=colDef.width,colDefInitialWidth=colDef.initialWidth;return colDefWidth!=null?width=colDefWidth:colDefInitialWidth!=null?width=colDefInitialWidth:width=200,Math.max(Math.min(width,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(colId){var _a238;return((_a238=this.beans.showRowGroupCols)==null?void 0:_a238.isRowGroupDisplayed(this,colId))??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(eventType,listener){this.colEventSvc.addEventListener(eventType,listener)}__removeEventListener(eventType,listener){this.colEventSvc.removeEventListener(eventType,listener)}addEventListener(eventType,userListener){var _a238,_b2,_c;this.frameworkEventListenerService=(_b2=(_a238=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:_b2.call(_a238,this.frameworkEventListenerService,this.colEventSvc);const listener=((_c=this.frameworkEventListenerService)==null?void 0:_c.wrap(userListener))??userListener;this.colEventSvc.addEventListener(eventType,listener)}removeEventListener(eventType,userListener){var _a238;const listener=((_a238=this.frameworkEventListenerService)==null?void 0:_a238.unwrap(userListener))??userListener;this.colEventSvc.removeEventListener(eventType,listener)}createColumnFunctionCallbackParams(rowNode){return _addGridCommonParams(this.gos,{node:rowNode,data:rowNode.data,column:this,colDef:this.colDef})}isSuppressNavigable(rowNode){var _a238;return((_a238=this.beans.cellNavigation)==null?void 0:_a238.isSuppressNavigable(this,rowNode))??!1}isCellEditable(rowNode){var _a238;return((_a238=this.beans.editSvc)==null?void 0:_a238.isCellEditable(this,rowNode))??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(rowNode){return this.isColumnFunc(rowNode,this.colDef.rowDrag)}isDndSource(rowNode){return this.isColumnFunc(rowNode,this.colDef.dndSource)}isCellCheckboxSelection(rowNode){var _a238;return((_a238=this.beans.selectionSvc)==null?void 0:_a238.isCellCheckboxSelection(this,rowNode))??!1}isSuppressPaste(rowNode){var _a238;return this.isColumnFunc(rowNode,((_a238=this.colDef)==null?void 0:_a238.suppressPaste)??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(key){return this.colDef[key]??COL_DEF_DEFAULTS[key]}isColumnFunc(rowNode,value){if(typeof value=="boolean")return value;if(typeof value=="function"){const params=this.createColumnFunctionCallbackParams(rowNode);return value(params)}return!1}createColumnEvent(type,source){return _addGridCommonParams(this.gos,{type,column:this,columns:[this],source})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return _missing(this.sort)}isSorting(){return _exists(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(left,source){this.oldLeft=this.left,this.left!==left&&(this.left=left,this.dispatchColEvent("leftChanged",source))}isFilterActive(){return this.filterActive}isHovered(){var _a238;return _warn(261),!!((_a238=this.beans.colHover)!=null&&_a238.isHovered(this))}setFirstRightPinned(firstRightPinned,source){this.firstRightPinned!==firstRightPinned&&(this.firstRightPinned=firstRightPinned,this.dispatchColEvent("firstRightPinnedChanged",source))}setLastLeftPinned(lastLeftPinned,source){this.lastLeftPinned!==lastLeftPinned&&(this.lastLeftPinned=lastLeftPinned,this.dispatchColEvent("lastLeftPinnedChanged",source))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(visible,source){const newValue=visible===!0;this.visible!==newValue&&(this.visible=newValue,this.dispatchColEvent("visibleChanged",source)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let parent=this.getParent();if(!parent||!parent.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const numberOfParents=parent.getPaddingLevel()+1;let isSpanningTotal=!0;for(;parent;){if(!parent.isPadding()){isSpanningTotal=!1;break}parent=parent.getParent()}return{numberOfParents,isSpanningTotal}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(height){const changed=height!==this.autoHeaderHeight;return this.autoHeaderHeight=height,changed}createBaseColDefParams(rowNode){return _addGridCommonParams(this.gos,{node:rowNode,data:rowNode.data,colDef:this.colDef,column:this})}getColSpan(rowNode){if(_missing(this.colDef.colSpan))return 1;const params=this.createBaseColDefParams(rowNode),colSpan=this.colDef.colSpan(params);return Math.max(colSpan,1)}getRowSpan(rowNode){if(_missing(this.colDef.rowSpan))return 1;const params=this.createBaseColDefParams(rowNode),rowSpan=this.colDef.rowSpan(params);return Math.max(rowSpan,1)}setActualWidth(actualWidth,source,silent=!1){actualWidth=Math.max(actualWidth,this.minWidth),actualWidth=Math.min(actualWidth,this.maxWidth),this.actualWidth!==actualWidth&&(this.actualWidth=actualWidth,this.flex!=null&&source!=="flex"&&source!=="gridInitializing"&&(this.flex=null),silent||this.fireColumnWidthChangedEvent(source)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(source){this.dispatchColEvent("widthChanged",source)}isGreaterThanMax(width){return width>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(type,source,additionalEventAttributes){const colEvent=this.createColumnEvent(type,source);additionalEventAttributes&&_mergeDeep(colEvent,additionalEventAttributes),this.colEventSvc.dispatchEvent(colEvent)}dispatchStateUpdatedEvent(key){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key})}},__name(_a3,"AgColumn"),_a3);function isProvidedColumnGroup(col){return col instanceof AgProvidedColumnGroup}__name(isProvidedColumnGroup,"isProvidedColumnGroup");var _a4,AgProvidedColumnGroup=(_a4=class extends BeanStub{constructor(colGroupDef,groupId,padding,level){super(),this.colGroupDef=colGroupDef,this.groupId=groupId,this.padding=padding,this.level=level,this.isColumn=!1,this.expandable=!1,this.instanceId=getNextColInstanceId(),this.expandableListenerRemoveCallback=null,this.expanded=!!(colGroupDef!=null&&colGroupDef.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(colGroupDef,level){this.colGroupDef=colGroupDef,this.level=level,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(child=>child.isVisible()):!1}isPadding(){return this.padding}setExpanded(expanded){this.expanded=expanded===void 0?!1:expanded,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(children){this.children=children}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const result=[];return this.addLeafColumns(result),result}addLeafColumns(leafColumns){this.children&&this.children.forEach(child=>{isColumn(child)?leafColumns.push(child):isProvidedColumnGroup(child)&&child.addLeafColumns(leafColumns)})}getColumnGroupShow(){const colGroupDef=this.colGroupDef;if(colGroupDef)return colGroupDef.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const listener=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(col=>col.__addEventListener("visibleChanged",listener)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(col=>col.__removeEventListener("visibleChanged",listener)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let atLeastOneShowingWhenOpen=!1,atLeastOneShowingWhenClosed=!1,atLeastOneChangeable=!1;const children=this.findChildrenRemovingPadding();for(let i=0,j=children.length;i<j;i++){const abstractColumn=children[i];if(!abstractColumn.isVisible())continue;const headerGroupShow=abstractColumn.getColumnGroupShow();headerGroupShow==="open"?(atLeastOneShowingWhenOpen=!0,atLeastOneChangeable=!0):headerGroupShow==="closed"?(atLeastOneShowingWhenClosed=!0,atLeastOneChangeable=!0):(atLeastOneShowingWhenOpen=!0,atLeastOneShowingWhenClosed=!0)}const expandable=atLeastOneShowingWhenOpen&&atLeastOneShowingWhenClosed&&atLeastOneChangeable;this.expandable!==expandable&&(this.expandable=expandable,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const res=[],process=__name(items=>{items.forEach(item=>{isProvidedColumnGroup(item)&&item.isPadding()?process(item.children):res.push(item)})},"process");return process(this.children),res}onColumnVisibilityChanged(){this.setExpandable()}},__name(_a4,"AgProvidedColumnGroup"),_a4),DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},_a5,ColumnKeyCreator=(_a5=class{constructor(){this.existingKeys={}}addExistingKeys(keys){for(let i=0;i<keys.length;i++)this.existingKeys[keys[i]]=!0}getUniqueKey(colId,colField){colId=_toStringOrNull(colId);let count=0;for(;;){let idToTry=colId??colField;if(idToTry?count!==0&&(idToTry+="_"+count):idToTry=count,!this.existingKeys[idToTry])return this.existingKeys[idToTry]=!0,String(idToTry);count++}}},__name(_a5,"ColumnKeyCreator"),_a5),_EmptyArray=Object.freeze([]);function _last(arr){if(arr!=null&&arr.length)return arr[arr.length-1]}__name(_last,"_last");function _areEqual(a,b,comparator){return a==null&&b==null?!0:a!=null&&b!=null&&a.length===b.length&&a.every((value,index)=>comparator?comparator(value,b[index]):b[index]===value)}__name(_areEqual,"_areEqual");function _forAll(array,callback){if(array)for(const value of array)callback(value)}__name(_forAll,"_forAll");function _removeFromArray(array,object){const index=array.indexOf(object);index>=0&&array.splice(index,1)}__name(_removeFromArray,"_removeFromArray");function _moveInArray(array,objectsToMove,toIndex){for(let i=0;i<objectsToMove.length;i++)_removeFromArray(array,objectsToMove[i]);for(let i=objectsToMove.length-1;i>=0;i--)array.splice(toIndex,0,objectsToMove[i])}__name(_moveInArray,"_moveInArray");var GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",SELECTION_COLUMN_ID="ag-Grid-SelectionColumn",ROW_NUMBERS_COLUMN_ID="ag-Grid-RowNumbersColumn";function _getColumnsFromTree(rootColumns){const result=[],recursiveFindColumns=__name(childColumns=>{for(let i=0;i<childColumns.length;i++){const child=childColumns[i];isColumn(child)?result.push(child):isProvidedColumnGroup(child)&&recursiveFindColumns(child.getChildren())}},"recursiveFindColumns");return recursiveFindColumns(rootColumns),result}__name(_getColumnsFromTree,"_getColumnsFromTree");function getWidthOfColsInList(columnList){return columnList.reduce((width,col)=>width+col.getActualWidth(),0)}__name(getWidthOfColsInList,"getWidthOfColsInList");function _destroyColumnTree(beans,oldTree,newTree){const oldObjectsById={};if(!oldTree)return;depthFirstOriginalTreeSearch(null,oldTree,child=>{oldObjectsById[child.getInstanceId()]=child}),newTree&&depthFirstOriginalTreeSearch(null,newTree,child=>{oldObjectsById[child.getInstanceId()]=null});const colsToDestroy=Object.values(oldObjectsById).filter(item=>item!=null);beans.context.destroyBeans(colsToDestroy)}__name(_destroyColumnTree,"_destroyColumnTree");function isColumnGroupAutoCol(col){return col.getId().startsWith(GROUP_AUTO_COLUMN_ID)}__name(isColumnGroupAutoCol,"isColumnGroupAutoCol");function isColumnSelectionCol(col){const id=typeof col=="string"?col:"getColId"in col?col.getColId():col.colId;return(id==null?void 0:id.startsWith(SELECTION_COLUMN_ID))??!1}__name(isColumnSelectionCol,"isColumnSelectionCol");function isRowNumberCol(col){const id=typeof col=="string"?col:"getColId"in col?col.getColId():col.colId;return(id==null?void 0:id.startsWith(ROW_NUMBERS_COLUMN_ID))??!1}__name(isRowNumberCol,"isRowNumberCol");function convertColumnTypes(type){let typeKeys=[];return type instanceof Array?typeKeys=type:typeof type=="string"&&(typeKeys=type.split(",")),typeKeys}__name(convertColumnTypes,"convertColumnTypes");function _areColIdsEqual(colsA,colsB){return _areEqual(colsA,colsB,(a,b)=>a.getColId()===b.getColId())}__name(_areColIdsEqual,"_areColIdsEqual");function _updateColsMap(cols){cols.map={},cols.list.forEach(col=>cols.map[col.getId()]=col)}__name(_updateColsMap,"_updateColsMap");function _convertColumnEventSourceType(source){return source==="gridOptionsUpdated"?"gridOptionsChanged":source}__name(_convertColumnEventSourceType,"_convertColumnEventSourceType");function _columnsMatch(column,key){const columnMatches=column===key,colDefMatches=column.getColDef()===key,idMatches=column.getColId()==key;return columnMatches||colDefMatches||idMatches}__name(_columnsMatch,"_columnsMatch");var getValueFactory=__name((stateItem,defaultState)=>(key1,key2)=>{const obj={value1:void 0,value2:void 0};let calculated=!1;return stateItem&&(stateItem[key1]!==void 0&&(obj.value1=stateItem[key1],calculated=!0),_exists(key2)&&stateItem[key2]!==void 0&&(obj.value2=stateItem[key2],calculated=!0)),!calculated&&defaultState&&(defaultState[key1]!==void 0&&(obj.value1=defaultState[key1]),_exists(key2)&&defaultState[key2]!==void 0&&(obj.value2=defaultState[key2])),obj},"getValueFactory");function _createColumnTree(beans,defs=null,primaryColumns,existingTree,source){const columnKeyCreator=new ColumnKeyCreator,{existingCols,existingGroups,existingColKeys}=extractExistingTreeData(existingTree);columnKeyCreator.addExistingKeys(existingColKeys);const unbalancedTree=_recursivelyCreateColumns(beans,defs,0,primaryColumns,existingCols,columnKeyCreator,existingGroups,source),{colGroupSvc}=beans,treeDept=(colGroupSvc==null?void 0:colGroupSvc.findMaxDepth(unbalancedTree,0))??0,columnTree=colGroupSvc?colGroupSvc.balanceColumnTree(unbalancedTree,0,treeDept,columnKeyCreator):unbalancedTree;return depthFirstOriginalTreeSearch(null,columnTree,__name((child,parent)=>{isProvidedColumnGroup(child)&&child.setupExpandable(),child.originalParent=parent},"deptFirstCallback")),{columnTree,treeDept}}__name(_createColumnTree,"_createColumnTree");function extractExistingTreeData(existingTree){const existingCols=[],existingGroups=[],existingColKeys=[];return existingTree&&depthFirstOriginalTreeSearch(null,existingTree,item=>{if(isProvidedColumnGroup(item)){const group=item;existingGroups.push(group)}else{const col=item;existingColKeys.push(col.getId()),existingCols.push(col)}}),{existingCols,existingGroups,existingColKeys}}__name(extractExistingTreeData,"extractExistingTreeData");function _recursivelyCreateColumns(beans,defs,level,primaryColumns,existingColsCopy,columnKeyCreator,existingGroups,source){if(!defs)return[];const{colGroupSvc}=beans,result=new Array(defs.length);for(let i=0;i<result.length;i++){const def=defs[i];colGroupSvc&&isColumnGroup(def)?result[i]=colGroupSvc.createProvidedColumnGroup(primaryColumns,def,level,existingColsCopy,columnKeyCreator,existingGroups,source):result[i]=createColumn(beans,primaryColumns,def,existingColsCopy,columnKeyCreator,source)}return result}__name(_recursivelyCreateColumns,"_recursivelyCreateColumns");function createColumn(beans,primaryColumns,colDef,existingColsCopy,columnKeyCreator,source){var _a238;const existingColAndIndex=findExistingColumn(colDef,existingColsCopy);existingColAndIndex&&(existingColsCopy==null||existingColsCopy.splice(existingColAndIndex.idx,1));let column=existingColAndIndex==null?void 0:existingColAndIndex.column;if(column){const colDefMerged=_addColumnDefaultAndTypes(beans,colDef,column.getColId());column.setColDef(colDefMerged,colDef,source),_updateColumnState(beans,column,colDefMerged,source)}else{const colId=columnKeyCreator.getUniqueKey(colDef.colId,colDef.field),colDefMerged=_addColumnDefaultAndTypes(beans,colDef,colId);column=new AgColumn(colDefMerged,colDef,colId,primaryColumns),beans.context.createBean(column)}return(_a238=beans.dataTypeSvc)==null||_a238.addColumnListeners(column),column}__name(createColumn,"createColumn");function updateSomeColumnState(beans,column,hide,sort,sortIndex,pinned,flex,source){const{sortSvc,pinnedCols,colFlex}=beans;hide!==void 0&&column.setVisible(!hide,source),sortSvc&&(sortSvc.updateColSort(column,sort,source),sortIndex!==void 0&&sortSvc.setColSortIndex(column,sortIndex)),pinned!==void 0&&(pinnedCols==null||pinnedCols.setColPinned(column,pinned)),flex!==void 0&&(colFlex==null||colFlex.setColFlex(column,flex))}__name(updateSomeColumnState,"updateSomeColumnState");function _updateColumnState(beans,column,colDef,source){updateSomeColumnState(beans,column,colDef.hide,colDef.sort,colDef.sortIndex,colDef.pinned,colDef.flex,source);const colFlex=column.getFlex();if(!(colFlex!=null&&colFlex>0))if(colDef.width!=null)column.setActualWidth(colDef.width,source);else{const widthBeforeUpdate=column.getActualWidth();column.setActualWidth(widthBeforeUpdate,source)}}__name(_updateColumnState,"_updateColumnState");function findExistingColumn(newColDef,existingColsCopy){if(existingColsCopy)for(let i=0;i<existingColsCopy.length;i++){const def=existingColsCopy[i].getUserProvidedColDef();if(!def)continue;if(newColDef.colId!=null){if(existingColsCopy[i].getId()===newColDef.colId)return{idx:i,column:existingColsCopy[i]};continue}if(newColDef.field!=null){if(def.field===newColDef.field)return{idx:i,column:existingColsCopy[i]};continue}if(def===newColDef)return{idx:i,column:existingColsCopy[i]}}}__name(findExistingColumn,"findExistingColumn");function _addColumnDefaultAndTypes(beans,colDef,colId,isAutoCol){const{gos,dataTypeSvc,validation:validation2}=beans,res={},defaultColDef=gos.get("defaultColDef");_mergeDeep(res,defaultColDef,!1,!0);const columnType=updateColDefAndGetColumnType(beans,res,colDef,colId);columnType&&assignColumnTypes(beans,columnType,res),_mergeDeep(res,colDef,!1,!0);const autoGroupColDef=gos.get("autoGroupColumnDef"),isSortingCoupled=_isColumnsSortingCoupledToGroup(gos);return colDef.rowGroup&&autoGroupColDef&&isSortingCoupled&&_mergeDeep(res,{sort:autoGroupColDef.sort,initialSort:autoGroupColDef.initialSort},!1,!0),dataTypeSvc==null||dataTypeSvc.validateColDef(res),validation2==null||validation2.validateColDef(res,colId,isAutoCol),res}__name(_addColumnDefaultAndTypes,"_addColumnDefaultAndTypes");function updateColDefAndGetColumnType(beans,colDef,userColDef,colId){var _a238;const dataTypeDefinitionColumnType=(_a238=beans.dataTypeSvc)==null?void 0:_a238.updateColDefAndGetColumnType(colDef,userColDef,colId),columnTypes=userColDef.type??dataTypeDefinitionColumnType??colDef.type;return colDef.type=columnTypes,columnTypes?convertColumnTypes(columnTypes):void 0}__name(updateColDefAndGetColumnType,"updateColDefAndGetColumnType");function assignColumnTypes(beans,typeKeys,colDefMerged){if(!typeKeys.length)return;const allColumnTypes=Object.assign({},DefaultColumnTypes),userTypes=beans.gos.get("columnTypes")||{};for(const key of Object.keys(userTypes)){const value=userTypes[key];key in allColumnTypes?_warn(34,{key}):(value.type&&_warn(35),allColumnTypes[key]=value)}typeKeys.forEach(t=>{const typeColDef=allColumnTypes[t.trim()];typeColDef?_mergeDeep(colDefMerged,typeColDef,!1,!0):_warn(36,{t})})}__name(assignColumnTypes,"assignColumnTypes");function isColumnGroup(abstractColDef){return abstractColDef.children!==void 0}__name(isColumnGroup,"isColumnGroup");function depthFirstOriginalTreeSearch(parent,tree,callback){if(tree)for(let i=0;i<tree.length;i++){const child=tree[i];isProvidedColumnGroup(child)&&depthFirstOriginalTreeSearch(child,child.getChildren(),callback),callback(child,parent)}}__name(depthFirstOriginalTreeSearch,"depthFirstOriginalTreeSearch");function placeLockedColumns(cols,gos){const left=[],normal=[],right=[];return cols.forEach(col=>{const position=col.getColDef().lockPosition;position==="right"?right.push(col):position==="left"||position===!0?left.push(col):normal.push(col)}),gos.get("enableRtl")?[...right,...normal,...left]:[...left,...normal,...right]}__name(placeLockedColumns,"placeLockedColumns");function doesMovePassMarryChildren(allColumnsCopy,gridBalancedTree){let rulePassed=!0;return depthFirstOriginalTreeSearch(null,gridBalancedTree,child=>{if(!isProvidedColumnGroup(child))return;const columnGroup=child,colGroupDef=columnGroup.getColGroupDef();if(!(colGroupDef&&colGroupDef.marryChildren))return;const newIndexes=[];columnGroup.getLeafColumns().forEach(col=>{const newColIndex=allColumnsCopy.indexOf(col);newIndexes.push(newColIndex)});const maxIndex=Math.max.apply(Math,newIndexes),minIndex=Math.min.apply(Math,newIndexes),spread=maxIndex-minIndex,maxSpread=columnGroup.getLeafColumns().length-1;spread>maxSpread&&(rulePassed=!1)}),rulePassed}__name(doesMovePassMarryChildren,"doesMovePassMarryChildren");function getCommonValue(cols,valueGetter){if(!cols||cols.length==0)return;const firstValue=valueGetter(cols[0]);for(let i=1;i<cols.length;i++)if(firstValue!==valueGetter(cols[i]))return;return firstValue}__name(getCommonValue,"getCommonValue");function dispatchColumnPinnedEvent(eventSvc,changedColumns,source){if(!changedColumns.length)return;const column=changedColumns.length===1?changedColumns[0]:null,pinned=getCommonValue(changedColumns,col=>col.getPinned());eventSvc.dispatchEvent({type:"columnPinned",pinned:pinned??null,columns:changedColumns,column,source})}__name(dispatchColumnPinnedEvent,"dispatchColumnPinnedEvent");function dispatchColumnVisibleEvent(eventSvc,changedColumns,source){if(!changedColumns.length)return;const column=changedColumns.length===1?changedColumns[0]:null,visible=getCommonValue(changedColumns,col=>col.isVisible());eventSvc.dispatchEvent({type:"columnVisible",visible,columns:changedColumns,column,source})}__name(dispatchColumnVisibleEvent,"dispatchColumnVisibleEvent");function dispatchColumnChangedEvent(eventSvc,type,columns,source){eventSvc.dispatchEvent({type,columns,column:columns&&columns.length==1?columns[0]:null,source})}__name(dispatchColumnChangedEvent,"dispatchColumnChangedEvent");function dispatchColumnResizedEvent(eventSvc,columns,finished,source,flexColumns=null){columns!=null&&columns.length&&eventSvc.dispatchEvent({type:"columnResized",columns,column:columns.length===1?columns[0]:null,flexColumns,finished,source})}__name(dispatchColumnResizedEvent,"dispatchColumnResizedEvent");function _applyColumnState(beans,params,source){var _a238;const{colModel,rowGroupColsSvc,pivotColsSvc,autoColSvc,selectionColSvc,colAnimation,visibleCols,pivotResultCols,environment,valueColsSvc,eventSvc,gos}=beans,providedCols=colModel.getColDefCols()||[];if(!(providedCols!=null&&providedCols.length))return!1;if(params!=null&&params.state&&!params.state.forEach)return _warn(32),!1;const syncColumnWithStateItem=__name((column,stateItem,rowGroupIndexes,pivotIndexes,autoCol)=>{if(!column)return;const getValue=getValueFactory(stateItem,params.defaultState),flex=getValue("flex").value1;if(updateSomeColumnState(beans,column,getValue("hide").value1,getValue("sort").value1,getValue("sortIndex").value1,getValue("pinned").value1,flex,source),flex==null){const width=getValue("width").value1;if(width!=null){const minColWidth=column.getColDef().minWidth??environment.getDefaultColumnMinWidth();minColWidth!=null&&width>=minColWidth&&column.setActualWidth(width,source)}}autoCol||!column.isPrimary()||(valueColsSvc==null||valueColsSvc.syncColumnWithState(column,source,getValue),rowGroupColsSvc==null||rowGroupColsSvc.syncColumnWithState(column,source,getValue,rowGroupIndexes),pivotColsSvc==null||pivotColsSvc.syncColumnWithState(column,source,getValue,pivotIndexes))},"syncColumnWithStateItem"),applyStates=__name((states,existingColumns,getById2)=>{var _a239,_b2;const dispatchEventsFunc=_compareColumnStatesAndDispatchEvents(beans,source),columnsWithNoState=existingColumns.slice(),rowGroupIndexes={},pivotIndexes={},autoColStates=[],selectionColStates=[],unmatchedAndAutoStates2=[];let unmatchedCount2=0;const previousRowGroupCols=(rowGroupColsSvc==null?void 0:rowGroupColsSvc.columns.slice())??[],previousPivotCols=(pivotColsSvc==null?void 0:pivotColsSvc.columns.slice())??[];states.forEach(state=>{const colId=state.colId;if(colId.startsWith(GROUP_AUTO_COLUMN_ID)){autoColStates.push(state),unmatchedAndAutoStates2.push(state);return}if(isColumnSelectionCol(colId)){selectionColStates.push(state),unmatchedAndAutoStates2.push(state);return}const column=getById2(colId);column?(syncColumnWithStateItem(column,state,rowGroupIndexes,pivotIndexes,!1),_removeFromArray(columnsWithNoState,column)):(unmatchedAndAutoStates2.push(state),unmatchedCount2+=1)});const applyDefaultsFunc=__name(col=>syncColumnWithStateItem(col,null,rowGroupIndexes,pivotIndexes,!1),"applyDefaultsFunc");columnsWithNoState.forEach(applyDefaultsFunc),rowGroupColsSvc==null||rowGroupColsSvc.sortColumns(comparatorByIndex.bind(rowGroupColsSvc,rowGroupIndexes,previousRowGroupCols)),pivotColsSvc==null||pivotColsSvc.sortColumns(comparatorByIndex.bind(pivotColsSvc,pivotIndexes,previousPivotCols)),colModel.refreshCols(!1);const syncColStates=__name((getCol,colStates,columns=[])=>{colStates.forEach(stateItem=>{const col=getCol(stateItem.colId);_removeFromArray(columns,col),syncColumnWithStateItem(col,stateItem,null,null,!0)}),columns.forEach(applyDefaultsFunc)},"syncColStates");return syncColStates(colId=>(autoColSvc==null?void 0:autoColSvc.getColumn(colId))??null,autoColStates,(_a239=autoColSvc==null?void 0:autoColSvc.getColumns())==null?void 0:_a239.slice()),syncColStates(colId=>(selectionColSvc==null?void 0:selectionColSvc.getColumn(colId))??null,selectionColStates,(_b2=selectionColSvc==null?void 0:selectionColSvc.getColumns())==null?void 0:_b2.slice()),orderLiveColsLikeState(params,colModel,gos),visibleCols.refresh(source),eventSvc.dispatchEvent({type:"columnEverythingChanged",source}),dispatchEventsFunc(),{unmatchedAndAutoStates:unmatchedAndAutoStates2,unmatchedCount:unmatchedCount2}},"applyStates");colAnimation==null||colAnimation.start();let{unmatchedAndAutoStates,unmatchedCount}=applyStates(params.state||[],providedCols,id=>colModel.getColDefCol(id));if(unmatchedAndAutoStates.length>0||_exists(params.defaultState)){const pivotResultColsList=((_a238=pivotResultCols==null?void 0:pivotResultCols.getPivotResultCols())==null?void 0:_a238.list)??[];unmatchedCount=applyStates(unmatchedAndAutoStates,pivotResultColsList,id=>(pivotResultCols==null?void 0:pivotResultCols.getPivotResultCol(id))??null).unmatchedCount}return colAnimation==null||colAnimation.finish(),unmatchedCount===0}__name(_applyColumnState,"_applyColumnState");function _resetColumnState(beans,source){var _a238,_b2;const{colModel,autoColSvc,selectionColSvc}=beans,primaryCols=colModel.getColDefCols();if(!(primaryCols!=null&&primaryCols.length))return;const primaryColumnTree=colModel.getColDefColTree(),primaryColumns=_getColumnsFromTree(primaryColumnTree),columnStates=[];let letRowGroupIndex=1e3,letPivotIndex=1e3;const addColState=__name(col=>{const stateItem=getColumnStateFromColDef(col);_missing(stateItem.rowGroupIndex)&&stateItem.rowGroup&&(stateItem.rowGroupIndex=letRowGroupIndex++),_missing(stateItem.pivotIndex)&&stateItem.pivot&&(stateItem.pivotIndex=letPivotIndex++),columnStates.push(stateItem)},"addColState");(_a238=autoColSvc==null?void 0:autoColSvc.getColumns())==null||_a238.forEach(addColState),(_b2=selectionColSvc==null?void 0:selectionColSvc.getColumns())==null||_b2.forEach(addColState),primaryColumns==null||primaryColumns.forEach(addColState),_applyColumnState(beans,{state:columnStates},source);const autoCols=(autoColSvc==null?void 0:autoColSvc.getColumns())??[],orderedColState=[...(selectionColSvc==null?void 0:selectionColSvc.getColumns())??[],...autoCols,...primaryCols].map(col=>({colId:col.colId}));_applyColumnState(beans,{state:orderedColState,applyOrder:!0},source)}__name(_resetColumnState,"_resetColumnState");function _compareColumnStatesAndDispatchEvents(beans,source){const{rowGroupColsSvc,pivotColsSvc,valueColsSvc,colModel,sortSvc,eventSvc}=beans,startState={rowGroupColumns:(rowGroupColsSvc==null?void 0:rowGroupColsSvc.columns.slice())??[],pivotColumns:(pivotColsSvc==null?void 0:pivotColsSvc.columns.slice())??[],valueColumns:(valueColsSvc==null?void 0:valueColsSvc.columns.slice())??[]},columnStateBefore=_getColumnState(beans),columnStateBeforeMap={};return columnStateBefore.forEach(col=>{columnStateBeforeMap[col.colId]=col}),()=>{const dispatchWhenListsDifferent=__name((eventType,colsBefore,colsAfter,idMapper)=>{const beforeList=colsBefore.map(idMapper),afterList=colsAfter.map(idMapper);if(_areEqual(beforeList,afterList))return;const changes=new Set(colsBefore);colsAfter.forEach(id=>{changes.delete(id)||changes.add(id)});const changesArr=[...changes];eventSvc.dispatchEvent({type:eventType,columns:changesArr,column:changesArr.length===1?changesArr[0]:null,source})},"dispatchWhenListsDifferent"),getChangedColumns=__name(changedPredicate=>{const changedColumns2=[];return colModel.forAllCols(column=>{const colStateBefore=columnStateBeforeMap[column.getColId()];colStateBefore&&changedPredicate(colStateBefore,column)&&changedColumns2.push(column)}),changedColumns2},"getChangedColumns"),columnIdMapper=__name(c=>c.getColId(),"columnIdMapper");dispatchWhenListsDifferent("columnRowGroupChanged",startState.rowGroupColumns,(rowGroupColsSvc==null?void 0:rowGroupColsSvc.columns)??[],columnIdMapper),dispatchWhenListsDifferent("columnPivotChanged",startState.pivotColumns,(pivotColsSvc==null?void 0:pivotColsSvc.columns)??[],columnIdMapper);const changedValues=getChangedColumns(__name((cs,c)=>{const oldActive=cs.aggFunc!=null,activeChanged=oldActive!=c.isValueActive(),aggFuncChanged=oldActive&&cs.aggFunc!=c.getAggFunc();return activeChanged||aggFuncChanged},"valueChangePredicate"));changedValues.length>0&&dispatchColumnChangedEvent(eventSvc,"columnValueChanged",changedValues,source),dispatchColumnResizedEvent(eventSvc,getChangedColumns(__name((cs,c)=>cs.width!=c.getActualWidth(),"resizeChangePredicate")),!0,source),dispatchColumnPinnedEvent(eventSvc,getChangedColumns(__name((cs,c)=>cs.pinned!=c.getPinned(),"pinnedChangePredicate")),source),dispatchColumnVisibleEvent(eventSvc,getChangedColumns(__name((cs,c)=>cs.hide==c.isVisible(),"visibilityChangePredicate")),source);const changedColumns=getChangedColumns(__name((cs,c)=>cs.sort!=c.getSort()||cs.sortIndex!=c.getSortIndex(),"sortChangePredicate"));changedColumns.length>0&&(sortSvc==null||sortSvc.dispatchSortChangedEvents(source,changedColumns));const colStateAfter=_getColumnState(beans);normaliseColumnMovedEventForColumnState(columnStateBefore,colStateAfter,source,colModel,eventSvc)}}__name(_compareColumnStatesAndDispatchEvents,"_compareColumnStatesAndDispatchEvents");function _getColumnState(beans){const{colModel,rowGroupColsSvc,pivotColsSvc}=beans,primaryCols=colModel.getColDefCols();if(_missing(primaryCols)||!colModel.isAlive())return[];const rowGroupColumns=rowGroupColsSvc==null?void 0:rowGroupColsSvc.columns,pivotColumns=pivotColsSvc==null?void 0:pivotColsSvc.columns,res=[],createStateItemFromColumn=__name(column=>{const rowGroupIndex=column.isRowGroupActive()&&rowGroupColumns?rowGroupColumns.indexOf(column):null,pivotIndex=column.isPivotActive()&&pivotColumns?pivotColumns.indexOf(column):null,aggFunc=column.isValueActive()?column.getAggFunc():null,sort=column.getSort()!=null?column.getSort():null,sortIndex=column.getSortIndex()!=null?column.getSortIndex():null;res.push({colId:column.getColId(),width:column.getActualWidth(),hide:!column.isVisible(),pinned:column.getPinned(),sort,sortIndex,aggFunc,rowGroup:column.isRowGroupActive(),rowGroupIndex,pivot:column.isPivotActive(),pivotIndex,flex:column.getFlex()??null})},"createStateItemFromColumn");colModel.forAllCols(col=>createStateItemFromColumn(col));const colIdToGridIndexMap=new Map(colModel.getCols().map((col,index)=>[col.getColId(),index]));return res.sort((itemA,itemB)=>{const posA=colIdToGridIndexMap.has(itemA.colId)?colIdToGridIndexMap.get(itemA.colId):-1,posB=colIdToGridIndexMap.has(itemB.colId)?colIdToGridIndexMap.get(itemB.colId):-1;return posA-posB}),res}__name(_getColumnState,"_getColumnState");function getColumnStateFromColDef(column){const getValueOrNull=__name((a,b)=>a??b??null,"getValueOrNull"),colDef=column.getColDef(),sort=getValueOrNull(colDef.sort,colDef.initialSort),sortIndex=getValueOrNull(colDef.sortIndex,colDef.initialSortIndex),hide=getValueOrNull(colDef.hide,colDef.initialHide),pinned=getValueOrNull(colDef.pinned,colDef.initialPinned),width=getValueOrNull(colDef.width,colDef.initialWidth),flex=getValueOrNull(colDef.flex,colDef.initialFlex);let rowGroupIndex=getValueOrNull(colDef.rowGroupIndex,colDef.initialRowGroupIndex),rowGroup=getValueOrNull(colDef.rowGroup,colDef.initialRowGroup);rowGroupIndex==null&&(rowGroup==null||rowGroup==!1)&&(rowGroupIndex=null,rowGroup=null);let pivotIndex=getValueOrNull(colDef.pivotIndex,colDef.initialPivotIndex),pivot=getValueOrNull(colDef.pivot,colDef.initialPivot);pivotIndex==null&&(pivot==null||pivot==!1)&&(pivotIndex=null,pivot=null);const aggFunc=getValueOrNull(colDef.aggFunc,colDef.initialAggFunc);return{colId:column.getColId(),sort,sortIndex,hide,pinned,width,flex,rowGroup,rowGroupIndex,pivot,pivotIndex,aggFunc}}__name(getColumnStateFromColDef,"getColumnStateFromColDef");function orderLiveColsLikeState(params,colModel,gos){if(!params.applyOrder||!params.state)return;const colIds=[];params.state.forEach(item=>{item.colId!=null&&colIds.push(item.colId)}),sortColsLikeKeys(colModel.cols,colIds,colModel,gos)}__name(orderLiveColsLikeState,"orderLiveColsLikeState");function sortColsLikeKeys(cols,colIds,colModel,gos){if(cols==null)return;let newOrder=[];const processedColIds={};colIds.forEach(colId=>{if(processedColIds[colId])return;const col=cols.map[colId];col&&(newOrder.push(col),processedColIds[colId]=!0)});let autoGroupInsertIndex=0;if(cols.list.forEach(col=>{const colId=col.getColId();if(processedColIds[colId]!=null)return;colId.startsWith(GROUP_AUTO_COLUMN_ID)?newOrder.splice(autoGroupInsertIndex++,0,col):newOrder.push(col)}),newOrder=placeLockedColumns(newOrder,gos),!doesMovePassMarryChildren(newOrder,colModel.getColTree())){_warn(39);return}cols.list=newOrder}__name(sortColsLikeKeys,"sortColsLikeKeys");function normaliseColumnMovedEventForColumnState(colStateBefore,colStateAfter,source,colModel,eventSvc){const colStateAfterMapped={};colStateAfter.forEach(s=>colStateAfterMapped[s.colId]=s);const colsIntersectIds={};colStateBefore.forEach(s=>{colStateAfterMapped[s.colId]&&(colsIntersectIds[s.colId]=!0)});const beforeFiltered=colStateBefore.filter(c=>colsIntersectIds[c.colId]),afterFiltered=colStateAfter.filter(c=>colsIntersectIds[c.colId]),movedColumns=[];afterFiltered.forEach((csAfter,index)=>{const csBefore=beforeFiltered&&beforeFiltered[index];if(csBefore&&csBefore.colId!==csAfter.colId){const gridCol=colModel.getCol(csBefore.colId);gridCol&&movedColumns.push(gridCol)}}),movedColumns.length&&eventSvc.dispatchEvent({type:"columnMoved",columns:movedColumns,column:movedColumns.length===1?movedColumns[0]:null,finished:!0,source})}__name(normaliseColumnMovedEventForColumnState,"normaliseColumnMovedEventForColumnState");var comparatorByIndex=__name((indexes,oldList,colA,colB)=>{const indexA=indexes[colA.getId()],indexB=indexes[colB.getId()],aHasIndex=indexA!=null,bHasIndex=indexB!=null;if(aHasIndex&&bHasIndex)return indexA-indexB;if(aHasIndex)return-1;if(bHasIndex)return 1;const oldIndexA=oldList.indexOf(colA),oldIndexB=oldList.indexOf(colB),aHasOldIndex=oldIndexA>=0,bHasOldIndex=oldIndexB>=0;return aHasOldIndex&&bHasOldIndex?oldIndexA-oldIndexB:aHasOldIndex?-1:1},"comparatorByIndex"),_a6,ColumnModel=(_a6=class extends BeanStub{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],event=>this.refreshAll(_convertColumnEventSourceType(event.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",event=>this.setPivotMode(this.gos.get("pivotMode"),_convertColumnEventSourceType(event.source)))}createColsFromColDefs(source){var _a238,_b2,_c;const{beans}=this,{valueCache,colAutosize,rowGroupColsSvc,pivotColsSvc,valueColsSvc,visibleCols,colViewport,eventSvc}=beans,dispatchEventsFunc=this.colDefs?_compareColumnStatesAndDispatchEvents(beans,source):void 0;valueCache==null||valueCache.expire();const oldCols=(_a238=this.colDefCols)==null?void 0:_a238.list,oldTree=(_b2=this.colDefCols)==null?void 0:_b2.tree,newTree=_createColumnTree(beans,this.colDefs,!0,oldTree,source);_destroyColumnTree(beans,(_c=this.colDefCols)==null?void 0:_c.tree,newTree.columnTree);const tree=newTree.columnTree,treeDepth=newTree.treeDept,list=_getColumnsFromTree(tree),map={};list.forEach(col=>map[col.getId()]=col),this.colDefCols={tree,treeDepth,list,map},rowGroupColsSvc==null||rowGroupColsSvc.extractCols(source,oldCols),pivotColsSvc==null||pivotColsSvc.extractCols(source,oldCols),valueColsSvc==null||valueColsSvc.extractCols(source,oldCols),this.ready=!0,this.refreshCols(!0),visibleCols.refresh(source),colViewport.checkViewportColumns(),eventSvc.dispatchEvent({type:"columnEverythingChanged",source}),dispatchEventsFunc&&(this.changeEventsDispatching=!0,dispatchEventsFunc(),this.changeEventsDispatching=!1),eventSvc.dispatchEvent({type:"newColumnsLoaded",source}),source==="gridInitializing"&&(colAutosize==null||colAutosize.applyAutosizeStrategy())}refreshCols(newColDefs){var _a238;if(!this.colDefCols)return;const prevColTree=(_a238=this.cols)==null?void 0:_a238.tree;this.saveColOrder();const{autoColSvc,selectionColSvc,rowNumbersSvc,quickFilter,pivotResultCols,showRowGroupCols,rowAutoHeight,visibleCols,colViewport,eventSvc}=this.beans,cols=this.selectCols(pivotResultCols,this.colDefCols);this.createColumnsForService([autoColSvc,selectionColSvc,rowNumbersSvc],cols);const shouldSortNewColDefs=_shouldMaintainColumnOrder(this.gos,this.showingPivotResult);(!newColDefs||shouldSortNewColDefs)&&this.restoreColOrder(cols),this.positionLockedCols(cols),showRowGroupCols==null||showRowGroupCols.refresh(),quickFilter==null||quickFilter.refreshCols(),this.setColSpanActive(),rowAutoHeight==null||rowAutoHeight.setAutoHeightActive(cols),visibleCols.clear(),colViewport.clear(),!_areEqual(prevColTree,this.cols.tree)&&eventSvc.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(services,cols){for(const service of services)service&&(service.createColumns(cols,updateOrder=>{this.lastOrder=updateOrder(this.lastOrder),this.lastPivotOrder=updateOrder(this.lastPivotOrder)}),service.addColumns(cols))}selectCols(pivotResultColsSvc,colDefCols){const pivotResultCols=(pivotResultColsSvc==null?void 0:pivotResultColsSvc.getPivotResultCols())??null;this.showingPivotResult=pivotResultCols!=null;const{map,list,tree,treeDepth}=pivotResultCols??colDefCols;return this.cols={list:list.slice(),map:{...map},tree:tree.slice(),treeDepth},pivotResultCols&&(pivotResultCols.list.some(col=>{var _a238;return((_a238=this.cols)==null?void 0:_a238.map[col.getColId()])!==void 0})||(this.lastPivotOrder=null)),this.cols}getColsToShow(){var _a238;if(!this.cols)return[];const showAutoGroupAndValuesOnly=this.isPivotMode()&&!this.showingPivotResult,valueColumns=(_a238=this.beans.valueColsSvc)==null?void 0:_a238.columns;return this.cols.list.filter(col=>{const isAutoGroupCol=isColumnGroupAutoCol(col);if(showAutoGroupAndValuesOnly){const isValueCol=valueColumns==null?void 0:valueColumns.includes(col);return isAutoGroupCol||isValueCol}else return isAutoGroupCol||col.isVisible()})}refreshAll(source){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(source))}setColsVisible(keys,visible=!1,source){_applyColumnState(this.beans,{state:keys.map(key=>({colId:typeof key=="string"?key:key.getColId(),hide:!visible}))},source)}restoreColOrder(cols){const lastOrder=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!lastOrder)return;const lastOrderMapped=new Map(lastOrder.map((col,index)=>[col,index]));if(!cols.list.some(col=>lastOrderMapped.has(col)))return;const colsMap=new Map(cols.list.map(col=>[col,!0])),lastOrderFiltered=lastOrder.filter(col=>colsMap.has(col)),lastOrderFilteredMap=new Map(lastOrderFiltered.map(col=>[col,!0])),missingFromLastOrder=cols.list.filter(col=>!lastOrderFilteredMap.has(col)),res=lastOrderFiltered.slice();missingFromLastOrder.forEach(newCol=>{let parent=newCol.getOriginalParent();if(!parent){res.push(newCol);return}const siblings=[];for(;!siblings.length&&parent;)parent.getLeafColumns().forEach(leafCol=>{const presentInNewCols=res.indexOf(leafCol)>=0,notYetInSiblings=siblings.indexOf(leafCol)<0;presentInNewCols&&notYetInSiblings&&siblings.push(leafCol)}),parent=parent.getOriginalParent();if(!siblings.length){res.push(newCol);return}const indexes=siblings.map(col=>res.indexOf(col)),lastIndex=Math.max(...indexes);res.splice(lastIndex+1,0,newCol)}),cols.list=res}positionLockedCols(cols){cols.list=placeLockedColumns(cols.list,this.gos)}saveColOrder(){var _a238,_b2;this.showingPivotResult?this.lastPivotOrder=((_a238=this.cols)==null?void 0:_a238.list)??null:this.lastOrder=((_b2=this.cols)==null?void 0:_b2.list)??null}getColumnDefs(){var _a238,_b2;return this.colDefCols?(_b2=this.beans.colDefFactory)==null?void 0:_b2.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,((_a238=this.cols)==null?void 0:_a238.list)??[]):void 0}setColSpanActive(){var _a238;this.colSpanActive=!!((_a238=this.cols)!=null&&_a238.list.some(col=>col.getColDef().colSpan!=null))}isPivotMode(){return this.pivotMode}setPivotMode(pivotMode,source){if(pivotMode===this.pivotMode||(this.pivotMode=pivotMode,!this.ready))return;this.refreshCols(!1);const{visibleCols,eventSvc}=this.beans;visibleCols.refresh(source),eventSvc.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var _a238;const pivotColumns=(_a238=this.beans.pivotColsSvc)==null?void 0:_a238.columns;return this.pivotMode&&!!(pivotColumns!=null&&pivotColumns.length)}recreateColumnDefs(e){var _a238;if(!this.cols)return;(_a238=this.beans.autoColSvc)==null||_a238.updateColumns(e);const source=_convertColumnEventSourceType(e.source);this.createColsFromColDefs(source)}setColumnDefs(columnDefs,source){this.colDefs=columnDefs,this.createColsFromColDefs(source)}destroy(){var _a238;_destroyColumnTree(this.beans,(_a238=this.colDefCols)==null?void 0:_a238.tree),super.destroy()}getColTree(){var _a238;return((_a238=this.cols)==null?void 0:_a238.tree)??[]}getColDefColTree(){var _a238;return((_a238=this.colDefCols)==null?void 0:_a238.tree)??[]}getColDefCols(){var _a238;return((_a238=this.colDefCols)==null?void 0:_a238.list)??null}getCols(){var _a238;return((_a238=this.cols)==null?void 0:_a238.list)??[]}forAllCols(callback){var _a238,_b2,_c,_d;const{pivotResultCols,autoColSvc,selectionColSvc}=this.beans;_forAll((_a238=this.colDefCols)==null?void 0:_a238.list,callback),_forAll((_b2=autoColSvc==null?void 0:autoColSvc.columns)==null?void 0:_b2.list,callback),_forAll((_c=selectionColSvc==null?void 0:selectionColSvc.columns)==null?void 0:_c.list,callback),_forAll((_d=pivotResultCols==null?void 0:pivotResultCols.getPivotResultCols())==null?void 0:_d.list,callback)}getColsForKeys(keys){return keys?keys.map(key=>this.getCol(key)).filter(col=>col!=null):[]}getColDefCol(key){var _a238;return(_a238=this.colDefCols)!=null&&_a238.list?this.getColFromCollection(key,this.colDefCols):null}getCol(key){return key==null?null:this.getColFromCollection(key,this.cols)}getColFromCollection(key,cols){var _a238,_b2;if(cols==null)return null;const{map,list}=cols;if(typeof key=="string"&&map[key])return map[key];for(let i=0;i<list.length;i++)if(_columnsMatch(list[i],key))return list[i];return((_a238=this.beans.autoColSvc)==null?void 0:_a238.getColumn(key))??((_b2=this.beans.selectionColSvc)==null?void 0:_b2.getColumn(key))??null}},__name(_a6,"ColumnModel"),_a6),_a7,GroupInstanceIdCreator=(_a7=class{constructor(){this.existingIds={}}getInstanceIdForKey(key){const lastResult=this.existingIds[key];let result;return typeof lastResult!="number"?result=0:result=lastResult+1,this.existingIds[key]=result,result}},__name(_a7,"GroupInstanceIdCreator"),_a7),_a8,EmptyBean=(_a8=class extends BeanStub{},__name(_a8,"EmptyBean"),_a8);function setupCompBean(ctrl,ctx,compBean){return compBean&&ctrl.addDestroyFunc(()=>ctx.destroyBean(compBean)),compBean??ctrl}__name(setupCompBean,"setupCompBean");var _a9,CssClassManager=(_a9=class{constructor(getGui){this.cssClassStates={},this.getGui=getGui}addCssClass(className){this.addOrRemoveCssClass(className,!0)}removeCssClass(className){this.addOrRemoveCssClass(className,!1)}containsCssClass(className){const eGui=this.getGui();return eGui?eGui.classList.contains(className):!1}addOrRemoveCssClass(className,addOrRemove){if(!className)return;if(className.indexOf(" ")>=0){const list=(className||"").split(" ");if(list.length>1){list.forEach(cls=>this.addOrRemoveCssClass(cls,addOrRemove));return}}if(this.cssClassStates[className]!==addOrRemove&&className.length){const eGui=this.getGui();eGui&&eGui.classList.toggle(className,addOrRemove),this.cssClassStates[className]=addOrRemove}}},__name(_a9,"CssClassManager"),_a9),compIdSequence=0,RefPlaceholder=null,_a10,Component=(_a10=class extends BeanStub{constructor(templateOrParams,componentSelectors){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=compIdSequence++,this.cssClassManager=new CssClassManager(()=>this.eGui),this.componentSelectors=new Map((componentSelectors??[]).map(comp=>[comp.selector,comp])),templateOrParams&&this.setTemplate(templateOrParams)}preConstruct(){var _a238,_b2,_c;this.wireTemplate(this.getGui());const debugId="component-"+((_b2=(_a238=Object.getPrototypeOf(this))==null?void 0:_a238.constructor)==null?void 0:_b2.name);(_c=this.css)==null||_c.forEach(css=>this.beans.environment.addGlobalCSS(css,debugId))}wireTemplate(element,paramsMap){element&&this.gos&&(this.applyElementsToComponent(element),this.createChildComponentsFromTags(element,paramsMap))}getCompId(){return this.compId}getDataRefAttribute(element){return element.getAttribute?element.getAttribute(DataRefAttribute):null}applyElementsToComponent(element,elementRef,paramsMap,newComponent=null){if(elementRef===void 0&&(elementRef=this.getDataRefAttribute(element)),elementRef){const current=this[elementRef];if(current===RefPlaceholder)this[elementRef]=newComponent??element;else{const usedAsParamRef=paramsMap&&paramsMap[elementRef];if(!this.suppressDataRefValidation&&!usedAsParamRef)throw new Error(`data-ref: ${elementRef} on ${this.constructor.name} with ${current}`)}}}createChildComponentsFromTags(parentNode,paramsMap){const childNodeList=[];for(const childNode of parentNode.childNodes??[])childNodeList.push(childNode);childNodeList.forEach(childNode=>{if(!(childNode instanceof HTMLElement))return;const childComp=this.createComponentFromElement(childNode,childComp2=>{const childGui=childComp2.getGui();if(childGui)for(const attr of childNode.attributes??[])childGui.setAttribute(attr.name,attr.value)},paramsMap);if(childComp){if(childComp.addItems&&childNode.children.length){this.createChildComponentsFromTags(childNode,paramsMap);const items=Array.prototype.slice.call(childNode.children);childComp.addItems(items)}this.swapComponentForNode(childComp,parentNode,childNode)}else childNode.childNodes&&this.createChildComponentsFromTags(childNode,paramsMap)})}createComponentFromElement(element,afterPreCreateCallback,paramsMap){const key=element.nodeName,elementRef=this.getDataRefAttribute(element),isAgGridComponent=key.indexOf("AG-")===0,componentSelector=isAgGridComponent?this.componentSelectors.get(key):null;let newComponent=null;if(componentSelector){const componentParams=paramsMap&&elementRef?paramsMap[elementRef]:void 0;newComponent=new componentSelector.component(componentParams),newComponent.setParentComponent(this),this.createBean(newComponent,null,afterPreCreateCallback)}else if(isAgGridComponent)throw new Error(`selector: ${key}`);return this.applyElementsToComponent(element,elementRef,paramsMap,newComponent),newComponent}swapComponentForNode(newComponent,parentNode,childNode){const eComponent=newComponent.getGui();parentNode.replaceChild(eComponent,childNode),parentNode.insertBefore(document.createComment(childNode.nodeName),eComponent),this.addDestroyFunc(this.destroyBean.bind(this,newComponent))}activateTabIndex(elements){const tabIndex=this.gos.get("tabIndex");elements||(elements=[]),elements.length||elements.push(this.getGui()),elements.forEach(el=>el.setAttribute("tabindex",tabIndex.toString()))}setTemplate(templateOrParams,componentSelectors,paramsMap){let eGui;typeof templateOrParams=="string"||templateOrParams==null?eGui=_loadTemplate(templateOrParams):eGui=_createElement(templateOrParams),this.setTemplateFromElement(eGui,componentSelectors,paramsMap)}setTemplateFromElement(element,components,paramsMap,suppressDataRefValidation=!1){if(this.eGui=element,this.suppressDataRefValidation=suppressDataRefValidation,components)for(let i=0;i<components.length;i++){const component=components[i];this.componentSelectors.set(component.selector,component)}this.wireTemplate(element,paramsMap)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(component){this.parentComponent=component}getParentComponent(){return this.parentComponent}setGui(eGui){this.eGui=eGui}queryForHtmlElement(cssSelector){return this.eGui.querySelector(cssSelector)}getContainerAndElement(newChild,container){let parent=container;return newChild==null?null:(parent||(parent=this.eGui),_isNodeOrElement(newChild)?{element:newChild,parent}:{element:newChild.getGui(),parent})}prependChild(newChild,container){const{element,parent}=this.getContainerAndElement(newChild,container)||{};!element||!parent||parent.insertAdjacentElement("afterbegin",element)}appendChild(newChild,container){const{element,parent}=this.getContainerAndElement(newChild,container)||{};!element||!parent||parent.appendChild(element)}isDisplayed(){return this.displayed}setVisible(visible,options={}){if(visible!==this.visible){this.visible=visible;const{skipAriaHidden}=options;_setVisible(this.eGui,visible,{skipAriaHidden})}}setDisplayed(displayed,options={}){if(displayed!==this.displayed){this.displayed=displayed;const{skipAriaHidden}=options;_setDisplayed(this.eGui,displayed,{skipAriaHidden});const event={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(event)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(event,listener,options){this.eGui.addEventListener(event,listener,options),this.addDestroyFunc(()=>this.eGui.removeEventListener(event,listener))}addCssClass(className){this.cssClassManager.addCssClass(className)}removeCssClass(className){this.cssClassManager.removeCssClass(className)}containsCssClass(className){return this.cssClassManager.containsCssClass(className)}addOrRemoveCssClass(className,addOrRemove){this.cssClassManager.addOrRemoveCssClass(className,addOrRemove)}registerCSS(css){this.css||(this.css=[]),this.css.push(css)}},__name(_a10,"Component"),_a10),_a11,AgPromise=(_a11=class{constructor(callback){this.status=0,this.resolution=null,this.waiters=[],callback(value=>this.onDone(value),params=>this.onReject(params))}static all(promises){return promises.length?new _a11(resolve=>{let remainingToResolve=promises.length;const combinedValues=new Array(remainingToResolve);promises.forEach((promise,index)=>{promise.then(value=>{combinedValues[index]=value,remainingToResolve--,remainingToResolve===0&&resolve(combinedValues)})})}):_a11.resolve()}static resolve(value=null){return new _a11(resolve=>resolve(value))}then(func){return new _a11(resolve=>{this.status===1?resolve(func(this.resolution)):this.waiters.push(value=>resolve(func(value)))})}onDone(value){this.status=1,this.resolution=value,this.waiters.forEach(waiter=>waiter(value))}onReject(_){}},__name(_a11,"_AgPromise"),_a11);function doesImplementIComponent(candidate){return candidate?candidate.prototype&&"getGui"in candidate.prototype:!1}__name(doesImplementIComponent,"doesImplementIComponent");function _getUserCompKeys(frameworkOverrides,defObject,type,params){const{name}=type;let compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector;if(defObject){const defObjectAny=defObject,selectorFunc=defObjectAny[name+"Selector"],selectorRes=selectorFunc?selectorFunc(params):null,assignComp=__name(providedJsComp=>{typeof providedJsComp=="string"?compName=providedJsComp:providedJsComp!=null&&providedJsComp!==!0&&(frameworkOverrides.isFrameworkComponent(providedJsComp)?fwComp=providedJsComp:jsComp=providedJsComp)},"assignComp");selectorRes?(assignComp(selectorRes.component),paramsFromSelector=selectorRes.params,popupFromSelector=selectorRes.popup,popupPositionFromSelector=selectorRes.popupPosition):assignComp(defObjectAny[name])}return{compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector}}__name(_getUserCompKeys,"_getUserCompKeys");var _a12,UserComponentFactory=(_a12=class extends BeanStub{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(beans){this.agCompUtils=beans.agCompUtils,this.registry=beans.registry,this.frameworkCompWrapper=beans.frameworkCompWrapper,this.gridOptions=beans.gridOptions}getCompDetailsFromGridOptions(type,defaultName,params,mandatory=!1){return this.getCompDetails(this.gridOptions,type,defaultName,params,mandatory)}getCompDetails(defObject,type,defaultName,params,mandatory=!1){var _a238;const{name,cellRenderer}=type;let{compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector}=_getUserCompKeys(this.beans.frameworkOverrides,defObject,type,params),defaultCompParams;const lookupFromRegistry=__name(key=>{const item=this.registry.getUserComponent(name,key);item&&(jsComp=item.componentFromFramework?void 0:item.component,fwComp=item.componentFromFramework?item.component:void 0,defaultCompParams=item.params)},"lookupFromRegistry");if(compName!=null&&lookupFromRegistry(compName),jsComp==null&&fwComp==null&&defaultName!=null&&lookupFromRegistry(defaultName),jsComp&&cellRenderer&&!doesImplementIComponent(jsComp)&&(jsComp=(_a238=this.agCompUtils)==null?void 0:_a238.adaptFunction(type,jsComp)),!jsComp&&!fwComp){const{validation:validation2}=this.beans;mandatory&&(compName!==defaultName||!defaultName)?compName?validation2!=null&&validation2.isProvidedUserComp(compName)||_error(50,{compName}):defaultName?validation2||_error(260,{...this.gos.getModuleErrorParams(),propName:name,compName:defaultName}):_error(216,{name}):defaultName&&!validation2&&_error(146,{comp:defaultName});return}const paramsMerged=this.mergeParams(defObject,type,params,paramsFromSelector,defaultCompParams),componentFromFramework=jsComp==null,componentClass=jsComp??fwComp;return{componentFromFramework,componentClass,params:paramsMerged,type,popupFromSelector,popupPositionFromSelector,newAgStackInstance:__name(()=>this.newAgStackInstance(componentClass,componentFromFramework,paramsMerged,type),"newAgStackInstance")}}newAgStackInstance(ComponentClass,componentFromFramework,params,type){var _a238;const jsComponent=!componentFromFramework;let instance;jsComponent?instance=new ComponentClass:instance=this.frameworkCompWrapper.wrap(ComponentClass,type.mandatoryMethods,type.optionalMethods,type),this.createBean(instance);const deferredInit=(_a238=instance.init)==null?void 0:_a238.call(instance,params);return deferredInit==null?AgPromise.resolve(instance):deferredInit.then(()=>instance)}mergeParams(defObject,type,paramsFromGrid,paramsFromSelector=null,defaultCompParams){const params={...paramsFromGrid,...defaultCompParams},defObjectAny=defObject,userParams=defObjectAny&&defObjectAny[type.name+"Params"];if(typeof userParams=="function"){const userParamsFromFunc=userParams(paramsFromGrid);_mergeDeep(params,userParamsFromFunc)}else typeof userParams=="object"&&_mergeDeep(params,userParams);return _mergeDeep(params,paramsFromSelector),params}},__name(_a12,"UserComponentFactory"),_a12),DateComponent={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},DragAndDropImageComponent={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},HeaderComponent={name:"headerComponent",optionalMethods:["refresh"]},InnerHeaderComponent={name:"innerHeaderComponent"},InnerHeaderGroupComponent={name:"innerHeaderGroupComponent"},HeaderGroupComponent={name:"headerGroupComponent"},CellRendererComponent={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},LoadingCellRendererComponent={name:"loadingCellRenderer",cellRenderer:!0},CellEditorComponent={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},LoadingOverlayComponent={name:"loadingOverlayComponent",optionalMethods:["refresh"]},NoRowsOverlayComponent={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},TooltipComponent={name:"tooltipComponent"},FilterComponent={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},FloatingFilterComponent={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},FullWidth={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},FullWidthLoading={name:"loadingCellRenderer",cellRenderer:!0},FullWidthGroup={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},FullWidthDetail={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function _getDragAndDropImageCompDetails(userCompFactory,params){return userCompFactory.getCompDetailsFromGridOptions(DragAndDropImageComponent,"agDragAndDropImage",params,!0)}__name(_getDragAndDropImageCompDetails,"_getDragAndDropImageCompDetails");function _getHeaderCompDetails(userCompFactory,colDef,params){return userCompFactory.getCompDetails(colDef,HeaderComponent,"agColumnHeader",params)}__name(_getHeaderCompDetails,"_getHeaderCompDetails");function _getInnerHeaderCompDetails(userCompFactory,headerCompParams,params){return userCompFactory.getCompDetails(headerCompParams,InnerHeaderComponent,void 0,params)}__name(_getInnerHeaderCompDetails,"_getInnerHeaderCompDetails");function _getHeaderGroupCompDetails(userCompFactory,params){const colGroupDef=params.columnGroup.getColGroupDef();return userCompFactory.getCompDetails(colGroupDef,HeaderGroupComponent,"agColumnGroupHeader",params)}__name(_getHeaderGroupCompDetails,"_getHeaderGroupCompDetails");function _getInnerHeaderGroupCompDetails(userCompFactory,headerGroupCompParams,params){return userCompFactory.getCompDetails(headerGroupCompParams,InnerHeaderGroupComponent,void 0,params)}__name(_getInnerHeaderGroupCompDetails,"_getInnerHeaderGroupCompDetails");function _getFullWidthCellRendererDetails(userCompFactory,params){return userCompFactory.getCompDetailsFromGridOptions(FullWidth,void 0,params,!0)}__name(_getFullWidthCellRendererDetails,"_getFullWidthCellRendererDetails");function _getFullWidthLoadingCellRendererDetails(userCompFactory,params){return userCompFactory.getCompDetailsFromGridOptions(FullWidthLoading,"agLoadingCellRenderer",params,!0)}__name(_getFullWidthLoadingCellRendererDetails,"_getFullWidthLoadingCellRendererDetails");function _getFullWidthGroupCellRendererDetails(userCompFactory,params){return userCompFactory.getCompDetailsFromGridOptions(FullWidthGroup,"agGroupRowRenderer",params,!0)}__name(_getFullWidthGroupCellRendererDetails,"_getFullWidthGroupCellRendererDetails");function _getFullWidthDetailCellRendererDetails(userCompFactory,params){return userCompFactory.getCompDetailsFromGridOptions(FullWidthDetail,"agDetailCellRenderer",params,!0)}__name(_getFullWidthDetailCellRendererDetails,"_getFullWidthDetailCellRendererDetails");function _getCellRendererDetails(userCompFactory,def,params){return userCompFactory.getCompDetails(def,CellRendererComponent,void 0,params)}__name(_getCellRendererDetails,"_getCellRendererDetails");function _getLoadingCellRendererDetails(userCompFactory,def,params){return userCompFactory.getCompDetails(def,LoadingCellRendererComponent,"agSkeletonCellRenderer",params,!0)}__name(_getLoadingCellRendererDetails,"_getLoadingCellRendererDetails");function _getCellEditorDetails(userCompFactory,def,params){return userCompFactory.getCompDetails(def,CellEditorComponent,"agCellEditor",params,!0)}__name(_getCellEditorDetails,"_getCellEditorDetails");function _getFilterDetails(userCompFactory,def,params,defaultFilter){return userCompFactory.getCompDetails(def,FilterComponent,defaultFilter,params,!0)}__name(_getFilterDetails,"_getFilterDetails");function _getDateCompDetails(userCompFactory,def,params){return userCompFactory.getCompDetails(def,DateComponent,"agDateInput",params,!0)}__name(_getDateCompDetails,"_getDateCompDetails");function _getLoadingOverlayCompDetails(userCompFactory,params){return userCompFactory.getCompDetailsFromGridOptions(LoadingOverlayComponent,"agLoadingOverlay",params,!0)}__name(_getLoadingOverlayCompDetails,"_getLoadingOverlayCompDetails");function _getNoRowsOverlayCompDetails(userCompFactory,params){return userCompFactory.getCompDetailsFromGridOptions(NoRowsOverlayComponent,"agNoRowsOverlay",params,!0)}__name(_getNoRowsOverlayCompDetails,"_getNoRowsOverlayCompDetails");function _getTooltipCompDetails(userCompFactory,params){return userCompFactory.getCompDetails(params.colDef,TooltipComponent,"agTooltipComponent",params,!0)}__name(_getTooltipCompDetails,"_getTooltipCompDetails");function _getFloatingFilterCompDetails(userCompFactory,def,params,defaultFloatingFilter){return userCompFactory.getCompDetails(def,FloatingFilterComponent,defaultFloatingFilter,params)}__name(_getFloatingFilterCompDetails,"_getFloatingFilterCompDetails");function _getFilterCompKeys(frameworkOverrides,def){return _getUserCompKeys(frameworkOverrides,def,FilterComponent)}__name(_getFilterCompKeys,"_getFilterCompKeys");function _mergeFilterParamsWithApplicationProvidedParams(userCompFactory,defObject,paramsFromGrid){return userCompFactory.mergeParams(defObject,FilterComponent,paramsFromGrid)}__name(_mergeFilterParamsWithApplicationProvidedParams,"_mergeFilterParamsWithApplicationProvidedParams");function _unwrapUserComp(comp){const compAsAny=comp;return compAsAny!=null&&compAsAny.getFrameworkComponentInstance!=null?compAsAny.getFrameworkComponentInstance():comp}__name(_unwrapUserComp,"_unwrapUserComp");var allRegisteredModules=new Set,globalModulesMap={},gridModulesMap={},currentModuleVersion,areGridScopedModules=!1,isUmd=!1;function isValidModuleVersion(module){const[moduleMajor,moduleMinor]=module.version.split(".")||[],[currentModuleMajor,currentModuleMinor]=currentModuleVersion.split(".")||[];return moduleMajor===currentModuleMajor&&moduleMinor===currentModuleMinor}__name(isValidModuleVersion,"isValidModuleVersion");function runVersionChecks(module){currentModuleVersion||(currentModuleVersion=module.version);const errorMsg=__name(details=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${details} Please update all modules to the same version.`,"errorMsg");if(module.version?isValidModuleVersion(module)||_errorOnce(errorMsg(`'${module.moduleName}' is version ${module.version} but the other modules are version ${currentModuleVersion}.`)):_errorOnce(errorMsg(`'${module.moduleName}' is incompatible.`)),module.validate){const result=module.validate();result.isValid||_errorOnce(`${result.message}`)}}__name(runVersionChecks,"runVersionChecks");function _registerModule(module,gridId){runVersionChecks(module);const rowModels=module.rowModels??["all"];allRegisteredModules.add(module);let moduleStore;gridId!==void 0?(areGridScopedModules=!0,gridModulesMap[gridId]===void 0&&(gridModulesMap[gridId]={}),moduleStore=gridModulesMap[gridId]):moduleStore=globalModulesMap,rowModels.forEach(rowModel=>{moduleStore[rowModel]===void 0&&(moduleStore[rowModel]={}),moduleStore[rowModel][module.moduleName]=module}),module.dependsOn&&module.dependsOn.forEach(dependency=>_registerModule(dependency,gridId))}__name(_registerModule,"_registerModule");function _unRegisterGridModules(gridId){delete gridModulesMap[gridId]}__name(_unRegisterGridModules,"_unRegisterGridModules");function _isModuleRegistered(moduleName,gridId,rowModel){const isRegisteredForRowModel=__name(model=>{var _a238,_b2,_c;return!!((_a238=globalModulesMap[model])!=null&&_a238[moduleName])||!!((_c=(_b2=gridModulesMap[gridId])==null?void 0:_b2[model])!=null&&_c[moduleName])},"isRegisteredForRowModel");return isRegisteredForRowModel(rowModel)||isRegisteredForRowModel("all")}__name(_isModuleRegistered,"_isModuleRegistered");function _areModulesGridScoped(){return areGridScopedModules}__name(_areModulesGridScoped,"_areModulesGridScoped");function _getRegisteredModules(gridId,rowModel){const gridModules=gridModulesMap[gridId]??{};return[...Object.values(globalModulesMap.all??{}),...Object.values(gridModules.all??{}),...Object.values(globalModulesMap[rowModel]??{}),...Object.values(gridModules[rowModel]??{})]}__name(_getRegisteredModules,"_getRegisteredModules");function _getAllRegisteredModules(){return new Set(allRegisteredModules)}__name(_getAllRegisteredModules,"_getAllRegisteredModules");function _getGridRegisteredModules(gridId,rowModel){const gridModules=gridModulesMap[gridId]??{};return[...Object.values(gridModules.all??{}),...Object.values(gridModules[rowModel]??{})]}__name(_getGridRegisteredModules,"_getGridRegisteredModules");function _isUmd(){return isUmd}__name(_isUmd,"_isUmd");var _a13,ModuleRegistry=(_a13=class{static register(module){_registerModule(module,void 0)}static registerModules(modules){modules.forEach(module=>_registerModule(module,void 0))}},__name(_a13,"ModuleRegistry"),_a13),_a14,GenericContext=(_a14=class{constructor(params){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!params||!params.beanClasses)&&(this.beanDestroyComparator=params.beanDestroyComparator,this.init(params))}init(params){var _a238;for(const beanName of Object.keys(params.providedBeanInstances))this.beans[beanName]=params.providedBeanInstances[beanName];params.beanClasses.forEach(BeanClass=>{const instance=new BeanClass;instance.beanName?this.beans[instance.beanName]=instance:console.error(`Bean ${BeanClass.name} is missing beanName`),this.createdBeans.push(instance)}),(_a238=params.derivedBeans)==null||_a238.forEach(beanFunc=>{const{beanName,bean}=beanFunc(this);this.beans[beanName]=bean,this.createdBeans.push(bean)}),params.beanInitComparator&&this.createdBeans.sort(params.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(bean,afterPreCreateCallback){if(!bean)throw Error("null bean");return this.initBeans([bean],afterPreCreateCallback),bean}initBeans(beanInstances,afterPreCreateCallback){beanInstances.forEach(instance=>{var _a238,_b2;(_a238=instance.preWireBeans)==null||_a238.call(instance,this.beans),(_b2=instance.wireBeans)==null||_b2.call(instance,this.beans)}),beanInstances.forEach(instance=>{var _a238;return(_a238=instance.preConstruct)==null?void 0:_a238.call(instance)}),afterPreCreateCallback&&beanInstances.forEach(afterPreCreateCallback),beanInstances.forEach(instance=>{var _a238;return(_a238=instance.postConstruct)==null?void 0:_a238.call(instance)})}getBeans(){return this.beans}getBean(name){return this.beans[name]}destroy(){if(this.destroyed)return;this.destroyed=!0;const beanInstances=this.getBeanInstances();this.beanDestroyComparator&&beanInstances.sort(this.beanDestroyComparator),this.destroyBeans(beanInstances),this.beans={},this.createdBeans=[]}destroyBean(bean){var _a238;(_a238=bean==null?void 0:bean.destroy)==null||_a238.call(bean)}destroyBeans(beans){if(beans)for(let i=0;i<beans.length;i++)this.destroyBean(beans[i]);return[]}isDestroyed(){return this.destroyed}},__name(_a14,"GenericContext"),_a14),_a15,Context=(_a15=class extends GenericContext{init(params){this.gridId=params.gridId,this.beans.context=this,this.destroyCallback=params.destroyCallback,super.init(params)}destroy(){var _a238;super.destroy(),_unRegisterGridModules(this.gridId),(_a238=this.destroyCallback)==null||_a238.call(this)}getGridId(){return this.gridId}},__name(_a15,"Context"),_a15),CSS_FIRST_COLUMN="ag-column-first",CSS_LAST_COLUMN="ag-column-last";function _getHeaderClassesFromColDef(abstractColDef,gos,column,columnGroup){return _missing(abstractColDef)?[]:getColumnClassesFromCollDef(abstractColDef.headerClass,abstractColDef,gos,column,columnGroup)}__name(_getHeaderClassesFromColDef,"_getHeaderClassesFromColDef");function refreshFirstAndLastStyles(comp,column,presentedColsService){comp.addOrRemoveCssClass(CSS_FIRST_COLUMN,presentedColsService.isColAtEdge(column,"first")),comp.addOrRemoveCssClass(CSS_LAST_COLUMN,presentedColsService.isColAtEdge(column,"last"))}__name(refreshFirstAndLastStyles,"refreshFirstAndLastStyles");function getClassParams(abstractColDef,gos,column,columnGroup){return _addGridCommonParams(gos,{colDef:abstractColDef,column,columnGroup})}__name(getClassParams,"getClassParams");function getColumnClassesFromCollDef(classesOrFunc,abstractColDef,gos,column,columnGroup){if(_missing(classesOrFunc))return[];let classToUse;if(typeof classesOrFunc=="function"){const params=getClassParams(abstractColDef,gos,column,columnGroup);classToUse=classesOrFunc(params)}else classToUse=classesOrFunc;return typeof classToUse=="string"?[classToUse]:Array.isArray(classToUse)?[...classToUse]:[]}__name(getColumnClassesFromCollDef,"getColumnClassesFromCollDef");var KeyCode={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},keyboardModeActive=!1,instanceCount=0;function addKeyboardModeEvents(doc){instanceCount>0||(doc.addEventListener("keydown",toggleKeyboardMode),doc.addEventListener("mousedown",toggleKeyboardMode))}__name(addKeyboardModeEvents,"addKeyboardModeEvents");function removeKeyboardModeEvents(doc){instanceCount>0||(doc.removeEventListener("keydown",toggleKeyboardMode),doc.removeEventListener("mousedown",toggleKeyboardMode))}__name(removeKeyboardModeEvents,"removeKeyboardModeEvents");function toggleKeyboardMode(event){const isKeyboardActive=keyboardModeActive,isKeyboardEvent=event.type==="keydown";isKeyboardEvent&&(event.ctrlKey||event.metaKey||event.altKey)||isKeyboardActive!==isKeyboardEvent&&(keyboardModeActive=isKeyboardEvent)}__name(toggleKeyboardMode,"toggleKeyboardMode");function _registerKeyboardFocusEvents(beans){const eDocument=_getDocument(beans);return addKeyboardModeEvents(eDocument),instanceCount++,()=>{instanceCount--,removeKeyboardModeEvents(eDocument)}}__name(_registerKeyboardFocusEvents,"_registerKeyboardFocusEvents");function _isKeyboardMode(){return keyboardModeActive}__name(_isKeyboardMode,"_isKeyboardMode");function _addFocusableContainerListener(beans,comp,eGui){comp.addManagedElementListeners(eGui,{keydown:__name(e=>{if(!e.defaultPrevented&&e.key===KeyCode.TAB){const backwards=e.shiftKey;_findNextFocusableElement(beans,eGui,!1,backwards)||_focusNextGridCoreContainer(beans,backwards)&&e.preventDefault()}},"keydown")})}__name(_addFocusableContainerListener,"_addFocusableContainerListener");function _findFocusableElements(rootNode,exclude,onlyUnmanaged=!1){const focusableString=FOCUSABLE_SELECTOR;let excludeString=FOCUSABLE_EXCLUDE;exclude&&(excludeString+=", "+exclude),onlyUnmanaged&&(excludeString+=', [tabindex="-1"]');const nodes=Array.prototype.slice.apply(rootNode.querySelectorAll(focusableString)).filter(node=>_isVisible(node)),excludeNodes=Array.prototype.slice.apply(rootNode.querySelectorAll(excludeString));return excludeNodes.length?__name((a,b)=>a.filter(element=>b.indexOf(element)===-1),"diff")(nodes,excludeNodes):nodes}__name(_findFocusableElements,"_findFocusableElements");function _focusInto(rootNode,up=!1,onlyUnmanaged=!1,excludeTabGuards=!1){const focusableElements=_findFocusableElements(rootNode,excludeTabGuards?".ag-tab-guard":null,onlyUnmanaged),toFocus=up?_last(focusableElements):focusableElements[0];return toFocus?(toFocus.focus({preventScroll:!0}),!0):!1}__name(_focusInto,"_focusInto");function _findNextFocusableElement(beans,rootNode,onlyManaged,backwards){const focusable=_findFocusableElements(rootNode,onlyManaged?':not([tabindex="-1"])':null),activeEl=_getActiveDomElement(beans);let currentIndex;onlyManaged?currentIndex=focusable.findIndex(el=>el.contains(activeEl)):currentIndex=focusable.indexOf(activeEl);const nextIndex=currentIndex+(backwards?-1:1);return nextIndex<0||nextIndex>=focusable.length?null:focusable[nextIndex]}__name(_findNextFocusableElement,"_findNextFocusableElement");function _findTabbableParent(node,limit=5){let counter=0;for(;node&&_getTabIndex(node)===null&&++counter<=limit;)node=node.parentElement;return _getTabIndex(node)===null?null:node}__name(_findTabbableParent,"_findTabbableParent");function _focusGridInnerElement(beans,fromBottom){return beans.ctrlsSvc.get("gridCtrl").focusInnerElement(fromBottom)}__name(_focusGridInnerElement,"_focusGridInnerElement");function _isHeaderFocusSuppressed(beans){var _a238;return beans.gos.get("suppressHeaderFocus")||!!((_a238=beans.overlays)!=null&&_a238.isExclusive())}__name(_isHeaderFocusSuppressed,"_isHeaderFocusSuppressed");function _isCellFocusSuppressed(beans){var _a238;return beans.gos.get("suppressCellFocus")||!!((_a238=beans.overlays)!=null&&_a238.isExclusive())}__name(_isCellFocusSuppressed,"_isCellFocusSuppressed");function _focusNextGridCoreContainer(beans,backwards,forceOut=!1){const gridCtrl=beans.ctrlsSvc.get("gridCtrl");return!forceOut&&gridCtrl.focusNextInnerContainer(backwards)?!0:((forceOut||!backwards&&!gridCtrl.isDetailGrid())&&gridCtrl.forceFocusOutOfContainer(backwards),!1)}__name(_focusNextGridCoreContainer,"_focusNextGridCoreContainer");function _isDeleteKey(key,alwaysReturnFalseOnBackspace=!1){return key===KeyCode.DELETE?!0:!alwaysReturnFalseOnBackspace&&key===KeyCode.BACKSPACE?_isMacOsUserAgent():!1}__name(_isDeleteKey,"_isDeleteKey");var _a16,CellKeyboardListenerFeature=(_a16=class extends BeanStub{constructor(cellCtrl,beans,rowNode,rowCtrl){super(),this.cellCtrl=cellCtrl,this.rowNode=rowNode,this.rowCtrl=rowCtrl,this.beans=beans}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(event){const key=event.key;switch(key){case KeyCode.ENTER:this.onEnterKeyDown(event);break;case KeyCode.F2:this.onF2KeyDown(event);break;case KeyCode.ESCAPE:this.onEscapeKeyDown(event);break;case KeyCode.TAB:this.onTabKeyDown(event);break;case KeyCode.BACKSPACE:case KeyCode.DELETE:this.onBackspaceOrDeleteKeyDown(key,event);break;case KeyCode.DOWN:case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.LEFT:this.onNavigationKeyDown(event,key);break}}onNavigationKeyDown(event,key){var _a238;if(!this.cellCtrl.editing){if(event.shiftKey&&this.cellCtrl.isRangeSelectionEnabled())this.onShiftRangeSelect(event);else{const currentCellPosition=this.cellCtrl.getFocusedCellPosition();(_a238=this.beans.navigation)==null||_a238.navigateToNextCell(event,key,currentCellPosition,!0)}event.preventDefault()}}onShiftRangeSelect(event){const{rangeSvc,navigation}=this.beans;if(!rangeSvc)return;const endCell=rangeSvc.extendLatestRangeInDirection(event);endCell&&(navigation==null||navigation.ensureCellVisible(endCell))}onTabKeyDown(event){var _a238;(_a238=this.beans.navigation)==null||_a238.onTabKeyDown(this.cellCtrl,event)}onBackspaceOrDeleteKeyDown(key,event){var _a238;const{cellCtrl,beans,rowNode}=this,{gos,rangeSvc,eventSvc}=beans;if(!cellCtrl.editing){if(eventSvc.dispatchEvent({type:"keyShortcutChangedCellStart"}),_isDeleteKey(key,gos.get("enableCellEditingOnBackspace"))){if(rangeSvc&&_isCellSelectionEnabled(gos))rangeSvc.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(cellCtrl.isCellEditable()){const{column}=cellCtrl,emptyValue=this.beans.valueSvc.getDeleteValue(column,rowNode);rowNode.setDataValue(column,emptyValue,"cellClear")}}else(_a238=beans.editSvc)==null||_a238.startRowOrCellEdit(cellCtrl,key,event);eventSvc.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){var _a238,_b2,_c;const{cellCtrl,beans}=this;if(cellCtrl.editing||this.rowCtrl.editing)(_a238=this.beans.editSvc)==null||_a238.stopRowOrCellEdit(cellCtrl,!1,!1,e.shiftKey);else if(beans.gos.get("enterNavigatesVertically")){const key=e.shiftKey?KeyCode.UP:KeyCode.DOWN;(_b2=beans.navigation)==null||_b2.navigateToNextCell(null,key,cellCtrl.cellPosition,!1)}else(_c=beans.editSvc)==null||_c.startRowOrCellEdit(cellCtrl,KeyCode.ENTER,e),cellCtrl.editing&&e.preventDefault()}onF2KeyDown(event){var _a238;const{cellCtrl,beans}=this;cellCtrl.editing||(_a238=beans.editSvc)==null||_a238.startRowOrCellEdit(cellCtrl,KeyCode.F2,event)}onEscapeKeyDown(event){var _a238;const{cellCtrl,beans}=this;cellCtrl.editing&&((_a238=beans.editSvc)==null||_a238.stopRowOrCellEdit(cellCtrl,!0))}processCharacter(event){var _a238;if(event.target!==this.eGui||this.cellCtrl.editing)return;const key=event.key;key===KeyCode.SPACE?this.onSpaceKeyDown(event):(_a238=this.beans.editSvc)!=null&&_a238.startRowOrCellEdit(this.cellCtrl,key,event)&&event.preventDefault()}onSpaceKeyDown(event){var _a238;const{gos}=this.beans;!this.cellCtrl.editing&&_isRowSelection(gos)&&((_a238=this.beans.selectionSvc)==null||_a238.handleSelectionEvent(event,this.rowNode,"spaceKey")),event.preventDefault()}destroy(){super.destroy()}},__name(_a16,"CellKeyboardListenerFeature"),_a16),_a17,CellMouseListenerFeature=(_a17=class extends BeanStub{constructor(cellCtrl,beans,column){super(),this.cellCtrl=cellCtrl,this.column=column,this.beans=beans}onMouseEvent(eventName,mouseEvent){if(!_isStopPropagationForAgGrid(mouseEvent))switch(eventName){case"click":this.onCellClicked(mouseEvent);break;case"mousedown":case"touchstart":this.onMouseDown(mouseEvent);break;case"dblclick":this.onCellDoubleClicked(mouseEvent);break;case"mouseout":this.onMouseOut(mouseEvent);break;case"mouseover":this.onMouseOver(mouseEvent);break}}onCellClicked(mouseEvent){var _a238;if((_a238=this.beans.touchSvc)!=null&&_a238.handleCellDoubleClick(this,mouseEvent))return;const{eventSvc,rangeSvc,gos,editSvc}=this.beans,isMultiKey=mouseEvent.ctrlKey||mouseEvent.metaKey;rangeSvc&&isMultiKey&&rangeSvc.getCellRangeCount(this.cellCtrl.cellPosition)>1&&rangeSvc.intersectLastRange(!0);const cellClickedEvent=this.cellCtrl.createEvent(mouseEvent,"cellClicked");eventSvc.dispatchEvent(cellClickedEvent);const colDef=this.column.getColDef();colDef.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{colDef.onCellClicked(cellClickedEvent)})},0),(gos.get("singleClickEdit")||colDef.singleClickEdit)&&!gos.get("suppressClickEdit")&&!(mouseEvent.shiftKey&&(rangeSvc==null?void 0:rangeSvc.getCellRanges().length)!=0)&&(editSvc==null||editSvc.startRowOrCellEdit(this.cellCtrl,void 0,mouseEvent))}onCellDoubleClicked(mouseEvent){const{column,beans,cellCtrl}=this,{eventSvc,frameworkOverrides,gos,editSvc}=beans,colDef=column.getColDef(),cellDoubleClickedEvent=cellCtrl.createEvent(mouseEvent,"cellDoubleClicked");eventSvc.dispatchEvent(cellDoubleClickedEvent),typeof colDef.onCellDoubleClicked=="function"&&window.setTimeout(()=>{frameworkOverrides.wrapOutgoing(()=>{colDef.onCellDoubleClicked(cellDoubleClickedEvent)})},0),!gos.get("singleClickEdit")&&!gos.get("suppressClickEdit")&&(editSvc==null||editSvc.startRowOrCellEdit(cellCtrl,null,mouseEvent))}onMouseDown(mouseEvent){const{ctrlKey,metaKey,shiftKey}=mouseEvent,target=mouseEvent.target,{cellCtrl,beans}=this,{eventSvc,rangeSvc,rowNumbersSvc,focusSvc,gos}=beans;if(this.isRightClickInExistingRange(mouseEvent))return;const hasRanges=rangeSvc&&!rangeSvc.isEmpty(),containsWidget=this.containsWidget(target),{cellPosition}=cellCtrl,isRowNumberColumn=isRowNumberCol(cellPosition.column);if(rowNumbersSvc&&isRowNumberColumn&&!rowNumbersSvc.handleMouseDownOnCell(cellPosition,mouseEvent)){rangeSvc&&mouseEvent.preventDefault(),mouseEvent.stopImmediatePropagation();return}if(!shiftKey||!hasRanges){const shouldFocus=gos.get("enableCellTextSelection")&&mouseEvent.defaultPrevented,forceBrowserFocus=(_isBrowserSafari()||shouldFocus)&&!cellCtrl.editing&&!_isFocusableFormField(target)&&!containsWidget;cellCtrl.focusCell(forceBrowserFocus)}if(shiftKey&&hasRanges&&!focusSvc.isCellFocused(cellPosition)){mouseEvent.preventDefault();const focusedCellPosition=focusSvc.getFocusedCell();if(focusedCellPosition){const{column,rowIndex,rowPinned}=focusedCellPosition,focusedRowCtrl=beans.rowRenderer.getRowByPosition({rowIndex,rowPinned}),focusedCellCtrl=focusedRowCtrl==null?void 0:focusedRowCtrl.getCellCtrl(column);focusedCellCtrl!=null&&focusedCellCtrl.editing&&focusedCellCtrl.stopEditing(),focusSvc.setFocusedCell({column,rowIndex,rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!containsWidget){if(rangeSvc)if(isRowNumberColumn&&mouseEvent.preventDefault(),shiftKey)rangeSvc.extendLatestRangeToCell(cellPosition);else{const isMultiKey=ctrlKey||metaKey;rangeSvc.setRangeToCell(cellPosition,isMultiKey)}eventSvc.dispatchEvent(this.cellCtrl.createEvent(mouseEvent,"cellMouseDown"))}}isRightClickInExistingRange(mouseEvent){const{rangeSvc}=this.beans;if(rangeSvc){const cellInRange=rangeSvc.isCellInAnyRange(this.cellCtrl.cellPosition),isRightClick=mouseEvent.button===2||mouseEvent.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(cellInRange&&isRightClick)return!0}return!1}containsWidget(target){return _isElementChildOfClass(target,"ag-selection-checkbox",3)||_isElementChildOfClass(target,"ag-drag-handle",3)}onMouseOut(mouseEvent){if(this.mouseStayingInsideCell(mouseEvent))return;const{eventSvc,colHover}=this.beans;eventSvc.dispatchEvent(this.cellCtrl.createEvent(mouseEvent,"cellMouseOut")),colHover==null||colHover.clearMouseOver()}onMouseOver(mouseEvent){if(this.mouseStayingInsideCell(mouseEvent))return;const{eventSvc,colHover}=this.beans;eventSvc.dispatchEvent(this.cellCtrl.createEvent(mouseEvent,"cellMouseOver")),colHover==null||colHover.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const eCell=this.cellCtrl.eGui,cellContainsTarget=eCell.contains(e.target),cellContainsRelatedTarget=eCell.contains(e.relatedTarget);return cellContainsTarget&&cellContainsRelatedTarget}destroy(){super.destroy()}},__name(_a17,"CellMouseListenerFeature"),_a17),_a18,CellPositionFeature=(_a18=class extends BeanStub{constructor(cellCtrl,beans){super(),this.cellCtrl=cellCtrl,this.beans=beans,this.column=cellCtrl.column,this.rowNode=cellCtrl.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:__name(()=>this.onNewColumnsLoaded(),"newColumnsLoaded")})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const cellSpan=this.cellCtrl.getCellSpan();cellSpan||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),cellSpan||this._legacyApplyRowSpan(),cellSpan&&(this.refreshSpanHeight(cellSpan),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:this.refreshSpanHeight.bind(this,cellSpan),recalculateRowBounds:this.refreshSpanHeight.bind(this,cellSpan)}))}refreshSpanHeight(cellSpan){const spanHeight=cellSpan.getCellHeight();spanHeight!=null&&(this.eContent.style.height=`${spanHeight}px`)}onNewColumnsLoaded(){const rowSpan=this.column.getRowSpan(this.rowNode);this.rowSpan!==rowSpan&&(this.rowSpan=rowSpan,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const colsSpanning=this.getColSpanningList();_areEqual(this.colsSpanning,colsSpanning)||(this.colsSpanning=colsSpanning,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const width=this.getCellWidth();this.eContent.style.width=`${width}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((width,col)=>width+col.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column,rowNode}=this,colSpan=column.getColSpan(rowNode),colsSpanning=[];if(colSpan===1)colsSpanning.push(column);else{let pointer=column;const pinned=column.getPinned();for(let i=0;pointer&&i<colSpan&&(colsSpanning.push(pointer),pointer=this.beans.visibleCols.getColAfter(pointer),!(!pointer||_missing(pointer)||pinned!==pointer.getPinned()));i++);}return colsSpanning}onLeftChanged(){if(!this.eSetLeft)return;const left=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=left+"px"}getCellLeft(){let mostLeftCol;return this.beans.gos.get("enableRtl")&&this.colsSpanning?mostLeftCol=_last(this.colsSpanning):mostLeftCol=this.column,mostLeftCol.getLeft()}modifyLeftForPrintLayout(leftPosition){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return leftPosition;const{visibleCols}=this.beans,leftWidth=visibleCols.getColsLeftWidth();if(this.column.getPinned()==="right"){const bodyWidth=visibleCols.bodyWidth;return leftWidth+bodyWidth+(leftPosition||0)}return leftWidth+(leftPosition||0)}_legacyApplyRowSpan(force){if(this.rowSpan===1&&!force)return;const totalRowHeight=_getRowHeightAsNumber(this.beans)*this.rowSpan;this.eContent.style.height=`${totalRowHeight}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},__name(_a18,"CellPositionFeature"),_a18),CSS_CELL="ag-cell",CSS_AUTO_HEIGHT="ag-cell-auto-height",CSS_NORMAL_HEIGHT="ag-cell-normal-height",CSS_CELL_FOCUS="ag-cell-focus",CSS_CELL_FIRST_RIGHT_PINNED="ag-cell-first-right-pinned",CSS_CELL_LAST_LEFT_PINNED="ag-cell-last-left-pinned",CSS_CELL_NOT_INLINE_EDITING="ag-cell-not-inline-editing",CSS_CELL_WRAP_TEXT="ag-cell-wrap-text",DOM_DATA_KEY_CELL_CTRL="cellCtrl";function _getCellCtrlForEventTarget(gos,eventTarget){return _getCtrlForEventTarget(gos,eventTarget,DOM_DATA_KEY_CELL_CTRL)}__name(_getCellCtrlForEventTarget,"_getCellCtrlForEventTarget");var instanceIdSequence2=0,_a19,CellCtrl=(_a19=class extends BeanStub{constructor(column,rowNode,beans,rowCtrl){super(),this.column=column,this.rowNode=rowNode,this.rowCtrl=rowCtrl,this.rangeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.tooltipFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.beans=beans;const{colId,colIdSanitised}=column;this.instanceId=colId+"-"+instanceIdSequence2++,this.colIdSanitised=colIdSanitised,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){var _a238;const{beans}=this;this.positionFeature=new CellPositionFeature(this,beans),this.customStyleFeature=(_a238=beans.cellStyles)==null?void 0:_a238.createCellCustomStyleFeature(this,beans),this.mouseListener=new CellMouseListenerFeature(this,beans,this.column),this.keyboardListener=new CellKeyboardListenerFeature(this,beans,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature();const{rangeSvc}=beans;rangeSvc&&_isCellSelectionEnabled(beans.gos)&&(this.rangeFeature=rangeSvc.createCellRangeFeature(beans,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const context=this.beans.context;this.positionFeature=context.destroyBean(this.positionFeature),this.customStyleFeature=context.destroyBean(this.customStyleFeature),this.mouseListener=context.destroyBean(this.mouseListener),this.keyboardListener=context.destroyBean(this.keyboardListener),this.rangeFeature=context.destroyBean(this.rangeFeature),this.disableTooltipFeature()}enableTooltipFeature(value,shouldDisplayTooltip){var _a238;this.tooltipFeature=(_a238=this.beans.tooltipSvc)==null?void 0:_a238.enableCellTooltipFeature(this,value,shouldDisplayTooltip)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(comp,eCell,_eWrapper,eCellWrapper,printLayout,startEditing,compBean){var _a238,_b2,_c,_d,_e,_f;this.comp=comp,this.eGui=eCell,this.printLayout=printLayout,compBean??(compBean=this),this.addDomData(compBean),this.addFeatures(),compBean.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(eCellWrapper,compBean),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(_a238=this.positionFeature)==null||_a238.init(),(_b2=this.customStyleFeature)==null||_b2.setComp(comp),(_c=this.tooltipFeature)==null||_c.refreshTooltip(),(_d=this.keyboardListener)==null||_d.init(),(_e=this.rangeFeature)==null||_e.setComp(comp),startEditing&&this.isCellEditable()?(_f=this.beans.editSvc)==null||_f.startEditing(this):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach(func=>func()),this.onCompAttachedFuncs=[])}setupAutoHeight(eCellWrapper,compBean){var _a238;this.isAutoHeight=((_a238=this.beans.rowAutoHeight)==null?void 0:_a238.setupCellAutoHeight(this,eCellWrapper,compBean))??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const colDef=this.column.getColDef();return colDef.cellRenderer!=null||colDef.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(forceNewCellRendererInstance,skipRangeHandleRefresh){var _a238,_b2;const{beans,column,rowNode,rangeFeature}=this,{userCompFactory}=beans,valueToDisplay=this.getValueToDisplay();let compDetails;const isSsrmLoading=rowNode.stub&&((_a238=rowNode.groupData)==null?void 0:_a238[column.getId()])==null,colDef=column.getColDef();if(isSsrmLoading||this.isCellRenderer()){const params=this.createCellRendererParams();!isSsrmLoading||isRowNumberCol(column)?compDetails=_getCellRendererDetails(userCompFactory,colDef,params):compDetails=_getLoadingCellRendererDetails(userCompFactory,colDef,params)}if(!compDetails&&!isSsrmLoading&&((_b2=beans.findSvc)!=null&&_b2.isMatch(rowNode,column))){const params=this.createCellRendererParams();compDetails=_getCellRendererDetails(userCompFactory,{...column.getColDef(),cellRenderer:"agFindCellRenderer"},params)}this.comp.setRenderDetails(compDetails,valueToDisplay,forceNewCellRendererInstance),!skipRangeHandleRefresh&&rangeFeature&&_requestAnimationFrame(beans,()=>rangeFeature==null?void 0:rangeFeature.refreshHandle())}setupControlComps(){const colDef=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(colDef)),this.includeRowDrag=this.isIncludeControl(colDef.rowDrag),this.includeDndSource=this.isIncludeControl(colDef.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(value){return this.rowNode.rowPinned!=null?!1:typeof value=="function"||value===!0}isCheckboxSelection(colDef){const{rowSelection,groupDisplayType}=this.beans.gridOptions,checkboxLocation=_getCheckboxLocation(rowSelection),isSelectionColumn=isColumnSelectionCol(this.column);return groupDisplayType==="custom"&&checkboxLocation!=="selectionColumn"&&isSelectionColumn?!1:colDef.checkboxSelection||isSelectionColumn&&typeof rowSelection=="object"&&_getCheckboxes(rowSelection)}refreshShouldDestroy(){const colDef=this.column.getColDef(),selectionChanged=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(colDef)),rowDragChanged=this.includeRowDrag!=this.isIncludeControl(colDef.rowDrag),dndSourceChanged=this.includeDndSource!=this.isIncludeControl(colDef.dndSource),autoHeightChanged=this.isAutoHeight!=this.column.isAutoHeight();return selectionChanged||rowDragChanged||dndSourceChanged||autoHeightChanged}onPopupEditorClosed(){var _a238;this.editing&&((_a238=this.beans.editSvc)==null||_a238.stopRowOrCellEdit(this))}stopEditing(cancel=!1){var _a238;return((_a238=this.beans.editSvc)==null?void 0:_a238.stopEditing(this,cancel))??!1}createCellRendererParams(){const{value,valueFormatted,column,rowNode,comp,eGui,beans:{valueSvc,gos}}=this;return _addGridCommonParams(gos,{value,valueFormatted,getValue:__name(()=>valueSvc.getValueForDisplay(column,rowNode),"getValue"),setValue:__name(value2=>valueSvc.setValue(rowNode,column,value2),"setValue"),formatValue:this.formatValue.bind(this),data:rowNode.data,node:rowNode,pinned:column.getPinned(),colDef:column.getColDef(),column,refreshCell:this.refreshCell.bind(this),eGridCell:eGui,eParentOfValue:comp.getParentOfValue(),registerRowDragger:__name((rowDraggerElement,dragStartPixels,value2,suppressVisibilityChange)=>this.registerRowDragger(rowDraggerElement,dragStartPixels,suppressVisibilityChange),"registerRowDragger"),setTooltip:__name((value2,shouldDisplayTooltip)=>{var _a238;gos.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(value2,shouldDisplayTooltip),(_a238=this.tooltipFeature)==null||_a238.refreshTooltip()},"setTooltip")})}onCellChanged(event){event.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(params){var _a238;this.refreshShouldDestroy()?(_a238=this.rowCtrl)==null||_a238.recreateCell(this):this.refreshCell(params)}refreshCell(params){var _a238,_b2,_c,_d,_e,_f;if(this.suppressRefreshCell||this.editing)return;const colDef=this.column.getColDef(),newData=params!=null&&!!params.newData,suppressFlash=params!=null&&!!params.suppressFlash,noValueProvided=colDef.field==null&&colDef.valueGetter==null&&colDef.showRowGroup==null,forceRefresh=params&&params.forceRefresh||noValueProvided||newData,isCellCompReady=!!this.comp,valuesDifferent=this.updateAndFormatValue(isCellCompReady),dataNeedsUpdating=forceRefresh||valuesDifferent;if(isCellCompReady){if(dataNeedsUpdating){this.showValue(newData,!1);const processingFilterChange=(_a238=this.beans.filterManager)==null?void 0:_a238.isSuppressFlashingCellsBecauseFiltering();!suppressFlash&&!processingFilterChange&&colDef.enableCellChangeFlash&&((_b2=this.beans.cellFlashSvc)==null||_b2.flashCell(this)),(_c=this.customStyleFeature)==null||_c.applyUserStyles(),(_d=this.customStyleFeature)==null||_d.applyClassesFromColDef()}(_e=this.tooltipFeature)==null||_e.refreshTooltip(),(_f=this.customStyleFeature)==null||_f.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(value){return this.callValueFormatter(value)??value}callValueFormatter(value){return this.beans.valueSvc.formatValue(this.column,this.rowNode,value)}updateAndFormatValue(compareValues){const oldValue=this.value,oldValueFormatted=this.valueFormatted;return this.value=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),compareValues?!this.valuesAreEqual(oldValue,this.value)||this.valueFormatted!=oldValueFormatted:!0}valuesAreEqual(val1,val2){const colDef=this.column.getColDef();return colDef.equals?colDef.equals(val1,val2):val1===val2}addDomData(compBean){const element=this.eGui;_setDomData(this.beans.gos,element,DOM_DATA_KEY_CELL_CTRL,this),compBean.addDestroyFunc(()=>_setDomData(this.beans.gos,element,DOM_DATA_KEY_CELL_CTRL,null))}createEvent(domEvent,eventType){const{rowNode,column,value,beans}=this;return _addGridCommonParams(beans.gos,{type:eventType,node:rowNode,data:rowNode.data,value,column,colDef:column.getColDef(),rowPinned:rowNode.rowPinned,event:domEvent,rowIndex:rowNode.rowIndex})}processCharacter(event){var _a238;(_a238=this.keyboardListener)==null||_a238.processCharacter(event)}onKeyDown(event){var _a238;(_a238=this.keyboardListener)==null||_a238.onKeyDown(event)}onMouseEvent(eventName,mouseEvent){var _a238;(_a238=this.mouseListener)==null||_a238.onMouseEvent(eventName,mouseEvent)}getColSpanningList(){return this.positionFeature.getColSpanningList()}onLeftChanged(){var _a238;this.comp&&((_a238=this.positionFeature)==null||_a238.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp,column,beans}=this;refreshFirstAndLastStyles(comp,column,beans.visibleCols)}refreshAriaColIndex(){const colIdx=this.beans.visibleCols.getAriaColIndex(this.column);_setAriaColIndex(this.eGui,colIdx)}onWidthChanged(){var _a238;return(_a238=this.positionFeature)==null?void 0:_a238.onWidthChanged()}getRowPosition(){const{rowIndex,rowPinned}=this.cellPosition;return{rowIndex,rowPinned}}updateRangeBordersIfRangeCount(){var _a238;this.comp&&((_a238=this.rangeFeature)==null||_a238.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var _a238;this.comp&&((_a238=this.rangeFeature)==null||_a238.onCellSelectionChanged())}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(forceBrowserFocus=!1){this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus})}restoreFocus(waitForRender=!1){if(!this.comp||this.editing||!this.isCellFocused()||!this.beans.focusSvc.shouldTakeFocus())return;const focus=__name(()=>{if(!this.isAlive())return;const focusableElement=this.comp.getFocusableElement();this.isCellFocused()&&focusableElement.focus({preventScroll:!0})},"focus");if(waitForRender){setTimeout(focus,0);return}focus()}onRowIndexChanged(){var _a238;this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),(_a238=this.rangeFeature)==null||_a238.onCellSelectionChanged()}onSuppressCellFocusChanged(suppressCellFocus){const element=this.eGui;element&&(isRowNumberCol(this.column)&&(suppressCellFocus=!0),_addOrRemoveAttribute(element,"tabindex",suppressCellFocus?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const firstRightPinned=this.column.isFirstRightPinned();this.comp.addOrRemoveCssClass(CSS_CELL_FIRST_RIGHT_PINNED,firstRightPinned)}onLastLeftPinnedChanged(){if(!this.comp)return;const lastLeftPinned=this.column.isLastLeftPinned();this.comp.addOrRemoveCssClass(CSS_CELL_LAST_LEFT_PINNED,lastLeftPinned)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const isFocused=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=isFocused),isFocused}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(event){var _a238;const{beans}=this;if(_isCellFocusSuppressed(beans))return;if(!this.comp){event&&(this.focusEventWhileNotReady=event);return}const cellFocused=this.isCellFocused();if(this.comp.addOrRemoveCssClass(CSS_CELL_FOCUS,cellFocused),cellFocused&&event&&event.forceBrowserFocus){let focusEl=this.comp.getFocusableElement();if(this.editing){const focusableEls=_findFocusableElements(focusEl,null,!0);focusableEls.length&&(focusEl=focusableEls[0])}focusEl.focus({preventScroll:!!event.preventScrollOnBrowserFocus})}const fullRowEdit=beans.gos.get("editType")==="fullRow";!cellFocused&&!fullRowEdit&&this.editing&&((_a238=beans.editSvc)==null||_a238.stopRowOrCellEdit(this)),cellFocused&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex,rowPinned}=this.rowNode;this.cellPosition={rowIndex,rowPinned:_makeNull(rowPinned),column:this.column}}setInlineEditingCss(){var _a238;(_a238=this.beans.editSvc)==null||_a238.setInlineEditingCss(this.rowCtrl)}applyStaticCssClasses(){const{comp}=this;comp.addOrRemoveCssClass(CSS_CELL,!0),comp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING,!0);const autoHeight=this.column.isAutoHeight()==!0;comp.addOrRemoveCssClass(CSS_AUTO_HEIGHT,autoHeight),comp.addOrRemoveCssClass(CSS_NORMAL_HEIGHT,!autoHeight)}onColumnHover(){var _a238;(_a238=this.beans.colHover)==null||_a238.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var _a238;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?(_a238=this.beans.editSvc)==null||_a238.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){const value=this.column.getColDef().wrapText==!0;this.comp.addOrRemoveCssClass(CSS_CELL_WRAP_TEXT,value)}dispatchCellContextMenuEvent(event){const colDef=this.column.getColDef(),cellContextMenuEvent=this.createEvent(event,"cellContextMenu"),{beans}=this;beans.eventSvc.dispatchEvent(cellContextMenuEvent),colDef.onCellContextMenu&&window.setTimeout(()=>{beans.frameworkOverrides.wrapOutgoing(()=>{colDef.onCellContextMenu(cellContextMenuEvent)})},0)}getCellRenderer(){var _a238;return((_a238=this.comp)==null?void 0:_a238.getCellRenderer())??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){var _a238;return((_a238=this.eGui)==null?void 0:_a238.contains(_getActiveDomElement(this.beans)))??!1}createSelectionCheckbox(){var _a238;const cbSelectionComponent=(_a238=this.beans.selectionSvc)==null?void 0:_a238.createCheckboxSelectionComponent();if(cbSelectionComponent)return this.beans.context.createBean(cbSelectionComponent),cbSelectionComponent.init({rowNode:this.rowNode,column:this.column}),cbSelectionComponent}createDndSource(){const dndSourceComp=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return dndSourceComp&&this.beans.context.createBean(dndSourceComp),dndSourceComp}registerRowDragger(customElement,dragStartPixels,suppressVisibilityChange){if(this.customRowDragComp){this.customRowDragComp.setDragElement(customElement,dragStartPixels);return}const newComp=this.createRowDragComp(customElement,dragStartPixels,suppressVisibilityChange);newComp&&(this.customRowDragComp=newComp,this.addDestroyFunc(()=>{this.beans.context.destroyBean(newComp),this.customRowDragComp=null}))}createRowDragComp(customElement,dragStartPixels,suppressVisibilityChange){var _a238;const rowDragComp=(_a238=this.beans.rowDragSvc)==null?void 0:_a238.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,customElement,dragStartPixels,suppressVisibilityChange);if(rowDragComp)return this.beans.context.createBean(rowDragComp),rowDragComp}cellEditorAttached(){this.onEditorAttachedFuncs.forEach(func=>func()),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(_cellPosition){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}},__name(_a19,"CellCtrl"),_a19),GRID_DOM_KEY="__ag_grid_instance";function _stampTopLevelGridCompWithGridInstance(gos,eGridDiv){eGridDiv[GRID_DOM_KEY]=gos.gridInstanceId}__name(_stampTopLevelGridCompWithGridInstance,"_stampTopLevelGridCompWithGridInstance");function _isEventFromThisGrid(gos,event){return _isElementInThisGrid(gos,event.target)}__name(_isEventFromThisGrid,"_isEventFromThisGrid");function _isElementInThisGrid(gos,element){let pointer=element;for(;pointer;){const instanceId=pointer[GRID_DOM_KEY];if(_exists(instanceId))return instanceId===gos.gridInstanceId;pointer=pointer.parentElement}return!1}__name(_isElementInThisGrid,"_isElementInThisGrid");function _getCellPositionForEvent(gos,event){var _a238;return((_a238=_getCellCtrlForEventTarget(gos,event.target))==null?void 0:_a238.getFocusedCellPosition())??null}__name(_getCellPositionForEvent,"_getCellPositionForEvent");function _getNormalisedMousePosition(beans,event){const gridPanelHasScrolls=_isDomLayout(beans.gos,"normal"),e=event;let x,y;if(e.clientX!=null||e.clientY!=null?(x=e.clientX,y=e.clientY):(x=e.x,y=e.y),gridPanelHasScrolls){const scrollFeature=beans.ctrlsSvc.getScrollFeature(),vRange=scrollFeature.getVScrollPosition(),hRange=scrollFeature.getHScrollPosition();x+=hRange.left,y+=vRange.top}return{x,y}}__name(_getNormalisedMousePosition,"_getNormalisedMousePosition");var _a20,DragAndDropService=(_a20=class extends BeanStub{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(beans){this.ctrlsSvc=beans.ctrlsSvc,this.dragSvc=beans.dragSvc,this.environment=beans.environment,this.userCompFactory=beans.userCompFactory}addDragSource(dragSource,allowTouch=!1){const params={eElement:dragSource.eElement,dragStartPixels:dragSource.dragStartPixels,onDragStart:this.onDragStart.bind(this,dragSource),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:allowTouch};this.dragSourceAndParamsList.push({params,dragSource}),this.dragSvc.addDragSource(params)}getDragAndDropImageComponent(){const{dragAndDropImageComp}=this;return!dragAndDropImageComp||!dragAndDropImageComp.comp?null:dragAndDropImageComp.comp}removeDragSource(dragSource){const{dragSourceAndParamsList,dragSvc}=this,sourceAndParams=dragSourceAndParamsList.find(item=>item.dragSource===dragSource);sourceAndParams&&(dragSvc.removeDragSource(sourceAndParams.params),_removeFromArray(dragSourceAndParamsList,sourceAndParams))}destroy(){const{dragSourceAndParamsList,dragSvc,dropTargets}=this;dragSourceAndParamsList.forEach(sourceAndParams=>dragSvc.removeDragSource(sourceAndParams.params)),dragSourceAndParamsList.length=0,dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(dragSource,mouseEvent){var _a238;this.dragging=!0,this.dragSource=dragSource,this.eventLastTime=mouseEvent,this.dragItem=dragSource.getDragItem(),(_a238=dragSource.onDragStarted)==null||_a238.call(dragSource),this.createDragAndDropImageComponent()}onDragStop(mouseEvent){var _a238,_b2;(_b2=(_a238=this.dragSource)==null?void 0:_a238.onDragStopped)==null||_b2.call(_a238);const{lastDropTarget}=this;if(lastDropTarget!=null&&lastDropTarget.onDragStop){const draggingEvent=this.createDropTargetEvent(lastDropTarget,mouseEvent,null,null,!1);lastDropTarget.onDragStop(draggingEvent)}this.clearDragAndDropProperties()}onDragCancel(){var _a238;const{dragSource,lastDropTarget}=this;(_a238=dragSource==null?void 0:dragSource.onDragCancelled)==null||_a238.call(dragSource),lastDropTarget!=null&&lastDropTarget.onDragCancel&&lastDropTarget.onDragCancel(this.createDropTargetEvent(lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(mouseEvent,fromNudge=!1){var _a238,_b2;const hDirection=this.getHorizontalDirection(mouseEvent),vDirection=this.getVerticalDirection(mouseEvent);this.eventLastTime=mouseEvent,this.positionDragAndDropImageComp(mouseEvent);const validDropTargets=this.dropTargets.filter(target=>this.isMouseOnDropTarget(mouseEvent,target)),dropTarget=this.findCurrentDropTarget(mouseEvent,validDropTargets),{lastDropTarget,dragSource,dragAndDropImageComp,dragItem}=this;if(dropTarget!==lastDropTarget){if(this.leaveLastTargetIfExists(mouseEvent,hDirection,vDirection,fromNudge),lastDropTarget!==null&&dropTarget===null&&((_a238=dragSource==null?void 0:dragSource.onGridExit)==null||_a238.call(dragSource,dragItem)),lastDropTarget===null&&dropTarget!==null&&((_b2=dragSource==null?void 0:dragSource.onGridEnter)==null||_b2.call(dragSource,dragItem)),this.enterDragTargetIfExists(dropTarget,mouseEvent,hDirection,vDirection,fromNudge),dropTarget&&dragAndDropImageComp){const{comp,promise}=dragAndDropImageComp;comp?comp.setIcon(dropTarget.getIconName?dropTarget.getIconName():null,!1):promise.then(resolvedComponent=>{resolvedComponent&&resolvedComponent.setIcon(dropTarget.getIconName?dropTarget.getIconName():null,!1)})}this.lastDropTarget=dropTarget}else if(dropTarget&&dropTarget.onDragging){const draggingEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragging(draggingEvent)}}getAllContainersFromDropTarget(dropTarget){const secondaryContainers=dropTarget.getSecondaryContainers?dropTarget.getSecondaryContainers():null,containers=[[dropTarget.getContainer()]];return secondaryContainers?containers.concat(secondaryContainers):containers}isMouseOnDropTarget(mouseEvent,dropTarget){const allContainersFromDropTarget=this.getAllContainersFromDropTarget(dropTarget);let mouseOverTarget=!1;const allContainersIntersect=__name((mouseEvent2,containers)=>{for(const container of containers){const{width,height,left,right,top,bottom}=container.getBoundingClientRect();if(width===0||height===0)return!1;const horizontalFit=mouseEvent2.clientX>=left&&mouseEvent2.clientX<right,verticalFit=mouseEvent2.clientY>=top&&mouseEvent2.clientY<bottom;if(!horizontalFit||!verticalFit)return!1}return!0},"allContainersIntersect");for(const currentContainers of allContainersFromDropTarget)if(allContainersIntersect(mouseEvent,currentContainers)){mouseOverTarget=!0;break}const{eElement,type}=this.dragSource;return dropTarget.targetContainsSource&&!dropTarget.getContainer().contains(eElement)?!1:mouseOverTarget&&dropTarget.isInterestedIn(type,eElement)}findCurrentDropTarget(mouseEvent,validDropTargets){const len=validDropTargets.length;if(len===0)return null;if(len===1)return validDropTargets[0];const elementStack=_getRootNode(this.beans).elementsFromPoint(mouseEvent.clientX,mouseEvent.clientY);for(const el of elementStack)for(const dropTarget of validDropTargets)if(this.getAllContainersFromDropTarget(dropTarget).flatMap(a=>a).indexOf(el)!==-1)return dropTarget;return null}enterDragTargetIfExists(dropTarget,mouseEvent,hDirection,vDirection,fromNudge){if(dropTarget&&dropTarget.onDragEnter){const dragEnterEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragEnter(dragEnterEvent)}}leaveLastTargetIfExists(mouseEvent,hDirection,vDirection,fromNudge){const{lastDropTarget}=this;if(!lastDropTarget)return;if(lastDropTarget.onDragLeave){const dragLeaveEvent=this.createDropTargetEvent(lastDropTarget,mouseEvent,hDirection,vDirection,fromNudge);lastDropTarget.onDragLeave(dragLeaveEvent)}const dragAndDropImageComponent=this.getDragAndDropImageComponent();dragAndDropImageComponent&&dragAndDropImageComponent.setIcon(null,!1)}addDropTarget(dropTarget){this.dropTargets.push(dropTarget)}removeDropTarget(dropTarget){this.dropTargets=this.dropTargets.filter(target=>target.getContainer()!==dropTarget.getContainer())}hasExternalDropZones(){return this.dropTargets.some(zones=>zones.external)}findExternalZone(params){return this.dropTargets.filter(target=>target.external).find(zone=>zone.getContainer()===params.getContainer())||null}isDropZoneWithinThisGrid(draggingEvent){const gridGui=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget}=draggingEvent;return gridGui.contains(dropZoneTarget)}getHorizontalDirection(event){var _a238;const clientX=(_a238=this.eventLastTime)==null?void 0:_a238.clientX,eClientX=event.clientX;return clientX===eClientX?null:clientX>eClientX?"left":"right"}getVerticalDirection(event){var _a238;const clientY=(_a238=this.eventLastTime)==null?void 0:_a238.clientY,eClientY=event.clientY;return clientY===eClientY?null:clientY>eClientY?"up":"down"}createDropTargetEvent(dropTarget,event,hDirection,vDirection,fromNudge){const dropZoneTarget=dropTarget.getContainer(),rect=dropZoneTarget.getBoundingClientRect(),{dragItem,dragSource,gos}=this,x=event.clientX-rect.left,y=event.clientY-rect.top;return _addGridCommonParams(gos,{event,x,y,vDirection,hDirection,dragSource,fromNudge,dragItem,dropZoneTarget})}positionDragAndDropImageComp(event){const dragAndDropImageComponent=this.getDragAndDropImageComponent();dragAndDropImageComponent&&_anchorElementToMouseMoveEvent(dragAndDropImageComponent.getGui(),event,this.beans)}removeDragAndDropImageComponent(){var _a238;const{dragAndDropImageComp}=this;if(dragAndDropImageComp){const{comp}=dragAndDropImageComp;if(comp){const eGui=comp.getGui();(_a238=this.dragAndDropImageParent)==null||_a238.removeChild(eGui),this.destroyBean(comp)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource,gos,userCompFactory}=this;if(!dragSource)return;const userCompDetails=_getDragAndDropImageCompDetails(userCompFactory,_addGridCommonParams(gos,{dragSource}));if(!userCompDetails)return;const promise=userCompDetails.newAgStackInstance();this.dragAndDropImageComp={promise},promise.then(comp=>{!comp||!this.isAlive()||(this.processDragAndDropImageComponent(comp),this.dragAndDropImageComp.comp=comp)})}processDragAndDropImageComponent(dragAndDropImageComponent){const{dragSource,environment}=this;if(!dragSource)return;const eGui=dragAndDropImageComponent.getGui();eGui.style.setProperty("position","absolute"),eGui.style.setProperty("z-index","9999"),_stampTopLevelGridCompWithGridInstance(this.gos,eGui),environment.applyThemeClasses(eGui),dragAndDropImageComponent.setIcon(null,!1);let{dragItemName}=dragSource;typeof dragItemName=="function"&&(dragItemName=dragItemName()),dragAndDropImageComponent.setLabel(dragItemName||""),eGui.style.top="20px",eGui.style.left="20px";const targetEl=_getPageBody(this.beans);this.dragAndDropImageParent=targetEl,targetEl?targetEl.appendChild(eGui):_warn(54)}registerGridDropTarget(elementFn,ctrl){const dropTarget={getContainer:elementFn,isInterestedIn:__name(type=>type===1||type===0,"isInterestedIn"),getIconName:__name(()=>"notAllowed","getIconName")};this.addDropTarget(dropTarget),ctrl.addDestroyFunc(()=>this.removeDropTarget(dropTarget))}},__name(_a20,"DragAndDropService"),_a20),_a21,AutoScrollService=(_a21=class{constructor(params){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=params.scrollContainer,this.scrollHorizontally=params.scrollAxis.indexOf("x")!==-1,this.scrollVertically=params.scrollAxis.indexOf("y")!==-1,this.scrollByTick=params.scrollByTick!=null?params.scrollByTick:20,params.onScrollCallback&&(this.onScrollCallback=params.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=params.getVerticalPosition,this.setVerticalPosition=params.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=params.getHorizontalPosition,this.setHorizontalPosition=params.setHorizontalPosition),this.shouldSkipVerticalScroll=params.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=params.shouldSkipHorizontalScroll||(()=>!1)}check(mouseEvent,forceSkipVerticalScroll=!1){const skipVerticalScroll=forceSkipVerticalScroll||this.shouldSkipVerticalScroll();if(skipVerticalScroll&&this.shouldSkipHorizontalScroll())return;const rect=this.scrollContainer.getBoundingClientRect(),scrollTick=this.scrollByTick;this.tickLeft=mouseEvent.clientX<rect.left+scrollTick,this.tickRight=mouseEvent.clientX>rect.right-scrollTick,this.tickUp=mouseEvent.clientY<rect.top+scrollTick&&!skipVerticalScroll,this.tickDown=mouseEvent.clientY>rect.bottom-scrollTick&&!skipVerticalScroll,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const tickAmount=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const vScrollPosition=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(vScrollPosition-tickAmount),this.tickDown&&this.setVerticalPosition(vScrollPosition+tickAmount)}if(this.scrollHorizontally){const hScrollPosition=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(hScrollPosition-tickAmount),this.tickRight&&this.setHorizontalPosition(hScrollPosition+tickAmount)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},__name(_a21,"AutoScrollService"),_a21);function _createCellId(cellPosition){const{rowIndex,rowPinned,column}=cellPosition;return`${rowIndex}.${rowPinned??"null"}.${column.getId()}`}__name(_createCellId,"_createCellId");function _areCellsEqual(cellA,cellB){const colsMatch=cellA.column===cellB.column,floatingMatch=cellA.rowPinned===cellB.rowPinned,indexMatch=cellA.rowIndex===cellB.rowIndex;return colsMatch&&floatingMatch&&indexMatch}__name(_areCellsEqual,"_areCellsEqual");function _isRowBefore(rowA,rowB){switch(rowA.rowPinned){case"top":if(rowB.rowPinned!=="top")return!0;break;case"bottom":if(rowB.rowPinned!=="bottom")return!1;break;default:if(_exists(rowB.rowPinned))return rowB.rowPinned!=="top";break}return rowA.rowIndex<rowB.rowIndex}__name(_isRowBefore,"_isRowBefore");function _isSameRow(rowA,rowB){return!rowA&&!rowB?!0:rowA&&!rowB||!rowA&&rowB?!1:rowA.rowIndex===rowB.rowIndex&&rowA.rowPinned==rowB.rowPinned}__name(_isSameRow,"_isSameRow");function _getFirstRow(beans){let rowIndex=0,rowPinned;const{pinnedRowModel,rowModel,pageBounds}=beans;return pinnedRowModel!=null&&pinnedRowModel.getPinnedTopRowCount()?rowPinned="top":rowModel.getRowCount()?(rowPinned=null,rowIndex=pageBounds.getFirstRow()):pinnedRowModel!=null&&pinnedRowModel.getPinnedBottomRowCount()&&(rowPinned="bottom"),rowPinned===void 0?null:{rowIndex,rowPinned}}__name(_getFirstRow,"_getFirstRow");function _getLastRow(beans){let rowIndex,rowPinned=null;const{pinnedRowModel,pageBounds}=beans,pinnedBottomCount=pinnedRowModel==null?void 0:pinnedRowModel.getPinnedBottomRowCount(),pinnedTopCount=pinnedRowModel==null?void 0:pinnedRowModel.getPinnedTopRowCount();return pinnedBottomCount?(rowPinned="bottom",rowIndex=pinnedBottomCount-1):beans.rowModel.getRowCount()?(rowPinned=null,rowIndex=pageBounds.getLastRow()):pinnedTopCount&&(rowPinned="top",rowIndex=pinnedTopCount-1),rowIndex===void 0?null:{rowIndex,rowPinned}}__name(_getLastRow,"_getLastRow");function _getRowNode(beans,gridRow){var _a238,_b2;switch(gridRow.rowPinned){case"top":return(_a238=beans.pinnedRowModel)==null?void 0:_a238.getPinnedTopRow(gridRow.rowIndex);case"bottom":return(_b2=beans.pinnedRowModel)==null?void 0:_b2.getPinnedBottomRow(gridRow.rowIndex);default:return beans.rowModel.getRow(gridRow.rowIndex)}}__name(_getRowNode,"_getRowNode");function _getCellByPosition(beans,cellPosition){var _a238;const spannedCellCtrl=(_a238=beans.spannedRowRenderer)==null?void 0:_a238.getCellByPosition(cellPosition);if(spannedCellCtrl)return spannedCellCtrl;const rowCtrl=beans.rowRenderer.getRowByPosition(cellPosition);return rowCtrl?rowCtrl.getCellCtrl(cellPosition.column):null}__name(_getCellByPosition,"_getCellByPosition");function _getRowAbove(beans,rowPosition){const{rowIndex:index,rowPinned:pinned}=rowPosition,{pageBounds,pinnedRowModel,rowModel}=beans;if(index===0)return pinned==="top"?null:pinned==="bottom"&&rowModel.isRowsToRender()?{rowIndex:pageBounds.getLastRow(),rowPinned:null}:pinnedRowModel!=null&&pinnedRowModel.isRowsToRender("top")?{rowIndex:pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}:null;const rowNode=pinned?void 0:rowModel.getRow(index);return getNextStickyPosition(beans,rowNode,!0)??{rowIndex:index-1,rowPinned:pinned}}__name(_getRowAbove,"_getRowAbove");function _getRowBelow(beans,rowPosition){const{rowIndex:index,rowPinned:pinned}=rowPosition,{pageBounds,pinnedRowModel,rowModel}=beans;if(isLastRowInContainer(beans,rowPosition))return pinned==="bottom"?null:pinned==="top"&&rowModel.isRowsToRender()?{rowIndex:pageBounds.getFirstRow(),rowPinned:null}:pinnedRowModel!=null&&pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;const rowNode=pinned?void 0:rowModel.getRow(index);return getNextStickyPosition(beans,rowNode)??{rowIndex:index+1,rowPinned:pinned}}__name(_getRowBelow,"_getRowBelow");function getNextStickyPosition(beans,rowNode,up){const{gos,rowRenderer}=beans;if(!(rowNode!=null&&rowNode.sticky)||!_isGroupRowsSticky(gos))return;const stickyRowCtrls=up?rowRenderer.getStickyTopRowCtrls():rowRenderer.getStickyBottomRowCtrls();let nextCtrl;for(let i=0;i<stickyRowCtrls.length;i++)if(stickyRowCtrls[i].rowNode.rowIndex===rowNode.rowIndex){nextCtrl=stickyRowCtrls[i+(up?-1:1)];break}return nextCtrl?{rowIndex:nextCtrl.rowNode.rowIndex,rowPinned:null}:void 0}__name(getNextStickyPosition,"getNextStickyPosition");function isLastRowInContainer(beans,rowPosition){const{rowPinned,rowIndex}=rowPosition,{pinnedRowModel,pageBounds}=beans;return rowPinned==="top"?((pinnedRowModel==null?void 0:pinnedRowModel.getPinnedTopRowCount())??0)-1<=rowIndex:rowPinned==="bottom"?((pinnedRowModel==null?void 0:pinnedRowModel.getPinnedBottomRowCount())??0)-1<=rowIndex:pageBounds.getLastRow()<=rowIndex}__name(isLastRowInContainer,"isLastRowInContainer");var _a22,RowDragFeature=(_a22=class extends BeanStub{constructor(eContainer){super(),this.eContainer=eContainer}postConstruct(){const{rowModel,gos,ctrlsSvc}=this.beans;_isClientSideRowModel(gos)&&(this.clientSideRowModel=rowModel),ctrlsSvc.whenReady(this,p=>{const gridBodyCon=p.gridBodyCtrl;this.autoScrollService=new AutoScrollService({scrollContainer:gridBodyCon.eBodyViewport,scrollAxis:"y",getVerticalPosition:__name(()=>gridBodyCon.scrollFeature.getVScrollPosition().top,"getVerticalPosition"),setVerticalPosition:__name(position=>gridBodyCon.scrollFeature.setVerticalScrollPosition(position),"setVerticalPosition"),onScrollCallback:__name(()=>{this.onDragging(this.lastDraggingEvent)},"onScrollCallback")})})}getContainer(){return this.eContainer}isInterestedIn(type){return type===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc,filterManager,sortSvc}=this.beans;return!!(((rowGroupColsSvc==null?void 0:rowGroupColsSvc.columns)??[]).length||(filterManager==null?void 0:filterManager.isAnyFilterPresent())||(sortSvc==null?void 0:sortSvc.isSortActive()))}getRowNodes(draggingEvent){var _a238;if(!this.isFromThisGrid(draggingEvent))return draggingEvent.dragItem.rowNodes||[];const currentNode=draggingEvent.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const selectedNodes=[...((_a238=this.beans.selectionSvc)==null?void 0:_a238.getSelectedNodes())??[]].sort((a,b)=>a.rowIndex==null||b.rowIndex==null?0:this.getRowIndexNumber(a)-this.getRowIndexNumber(b));if(selectedNodes.indexOf(currentNode)!==-1)return selectedNodes}return[currentNode]}onDragEnter(draggingEvent){draggingEvent.dragItem.rowNodes=this.getRowNodes(draggingEvent),this.dispatchGridEvent("rowDragEnter",draggingEvent),this.getRowNodes(draggingEvent).forEach(rowNode=>{this.setRowNodeDragging(rowNode,!0)}),this.onEnterOrDragging(draggingEvent)}onDragging(draggingEvent){this.onEnterOrDragging(draggingEvent)}isFromThisGrid(draggingEvent){const{dragSourceDomDataKey}=draggingEvent.dragSource;return dragSourceDomDataKey===this.gos.getDomDataKey()}onEnterOrDragging(draggingEvent){this.dispatchGridEvent("rowDragMove",draggingEvent),this.lastDraggingEvent=draggingEvent;const pixel=_getNormalisedMousePosition(this.beans,draggingEvent).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(draggingEvent,pixel),this.autoScrollService.check(draggingEvent.event)}doManagedDrag(draggingEvent,pixel){const{dragAndDrop,gos}=this.beans,isFromThisGrid=this.isFromThisGrid(draggingEvent),managedDrag=gos.get("rowDragManaged"),rowNodes=draggingEvent.dragItem.rowNodes;managedDrag&&this.shouldPreventRowMove()||(gos.get("suppressMoveWhenRowDragging")||!isFromThisGrid?dragAndDrop.isDropZoneWithinThisGrid(draggingEvent)&&this.clientSideRowModel.highlightRowAtPixel(rowNodes[0],pixel):this.moveRows(rowNodes,pixel))}getRowIndexNumber(rowNode){const rowIndexStr=rowNode.getRowIndexString();return parseInt(_last(rowIndexStr.split("-")),10)}moveRowAndClearHighlight(draggingEvent){const clientSideRowModel=this.clientSideRowModel,lastHighlightedRowNode=clientSideRowModel.getLastHighlightedRowNode(),isBelow=lastHighlightedRowNode&&lastHighlightedRowNode.highlighted==="Below",pixel=_getNormalisedMousePosition(this.beans,draggingEvent).y,rowNodes=draggingEvent.dragItem.rowNodes;let increment=isBelow?1:0;if(this.isFromThisGrid(draggingEvent))rowNodes.forEach(rowNode=>{rowNode.rowTop<pixel&&(increment-=1)}),this.moveRows(rowNodes,pixel,increment);else{const getRowIdFunc=_getRowIdCallback(this.gos);let addIndex=clientSideRowModel.getRowIndexAtPixel(pixel)+1;clientSideRowModel.getHighlightPosition(pixel)==="Above"&&addIndex--,clientSideRowModel.updateRowData({add:rowNodes.filter(node=>!clientSideRowModel.getRowNode((getRowIdFunc==null?void 0:getRowIdFunc({data:node.data,level:0,rowPinned:node.rowPinned}))??node.data.id)).map(node=>node.data),addIndex})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(rowNodes,pixel,increment=0){const focusSvc=this.beans.focusSvc,cellPosition=focusSvc.getFocusedCell(),cellCtrl=cellPosition&&_getCellByPosition(this.beans,cellPosition);this.clientSideRowModel.ensureRowsAtPixel(rowNodes,pixel,increment)&&(cellCtrl?cellCtrl.focusCell():focusSvc.clearFocusedCell())}addRowDropZone(params){if(!params.getContainer()){_warn(55);return}const dragAndDrop=this.beans.dragAndDrop;if(dragAndDrop.findExternalZone(params)){_warn(56);return}let processedParams={getContainer:params.getContainer};params.fromGrid?processedParams=params:(params.onDragEnter&&(processedParams.onDragEnter=e=>{params.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",e))}),params.onDragLeave&&(processedParams.onDragLeave=e=>{params.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",e))}),params.onDragging&&(processedParams.onDragging=e=>{params.onDragging(this.draggingToRowDragEvent("rowDragMove",e))}),params.onDragStop&&(processedParams.onDragStop=e=>{params.onDragStop(this.draggingToRowDragEvent("rowDragEnd",e))}),params.onDragCancel&&(processedParams.onDragCancel=e=>{params.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",e))}));const dropTarget={isInterestedIn:__name(type=>type===2,"isInterestedIn"),getIconName:__name(()=>"move","getIconName"),external:!0,...processedParams};dragAndDrop.addDropTarget(dropTarget),this.addDestroyFunc(()=>dragAndDrop.removeDropTarget(dropTarget))}getRowDropZone(events){const getContainer=this.getContainer.bind(this),onDragEnter=this.onDragEnter.bind(this),onDragLeave=this.onDragLeave.bind(this),onDragging=this.onDragging.bind(this),onDragStop=this.onDragStop.bind(this),onDragCancel=this.onDragCancel.bind(this);let params;return events?params={getContainer,onDragEnter:events.onDragEnter?e=>{onDragEnter(e),events.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",e))}:onDragEnter,onDragLeave:events.onDragLeave?e=>{onDragLeave(e),events.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",e))}:onDragLeave,onDragging:events.onDragging?e=>{onDragging(e),events.onDragging(this.draggingToRowDragEvent("rowDragMove",e))}:onDragging,onDragStop:events.onDragStop?e=>{onDragStop(e),events.onDragStop(this.draggingToRowDragEvent("rowDragEnd",e))}:onDragStop,onDragCancel:events.onDragCancel?e=>{onDragCancel(e),events.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",e))}:onDragCancel,fromGrid:!0}:params={getContainer,onDragEnter,onDragLeave,onDragging,onDragStop,onDragCancel,fromGrid:!0},params}draggingToRowDragEvent(type,draggingEvent){const beans=this.beans,{pageBounds,rowModel,gos}=beans,yNormalised=_getNormalisedMousePosition(beans,draggingEvent).y,mouseIsPastLastRow=yNormalised>pageBounds.getCurrentPageHeight();let overIndex=-1,overNode;return mouseIsPastLastRow||(overIndex=rowModel.getRowIndexAtPixel(yNormalised),overNode=rowModel.getRow(overIndex)),_addGridCommonParams(gos,{type,event:draggingEvent.event,node:draggingEvent.dragItem.rowNode,nodes:draggingEvent.dragItem.rowNodes,overIndex,overNode,y:yNormalised,vDirection:draggingEvent.vDirection})}dispatchGridEvent(type,draggingEvent){const event=this.draggingToRowDragEvent(type,draggingEvent);this.eventSvc.dispatchEvent(event)}onDragLeave(draggingEvent){this.dispatchGridEvent("rowDragLeave",draggingEvent),this.stopDragging(draggingEvent),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(draggingEvent){this.dispatchGridEvent("rowDragEnd",draggingEvent),this.stopDragging(draggingEvent);const{dragAndDrop,gos}=this.beans;gos.get("rowDragManaged")&&(gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(draggingEvent))&&dragAndDrop.isDropZoneWithinThisGrid(draggingEvent)&&this.moveRowAndClearHighlight(draggingEvent)}onDragCancel(draggingEvent){this.dispatchGridEvent("rowDragCancel",draggingEvent),this.stopDragging(draggingEvent);const{dragAndDrop,gos}=this.beans;gos.get("rowDragManaged")&&(gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(draggingEvent))&&dragAndDrop.isDropZoneWithinThisGrid(draggingEvent)&&this.clearRowHighlight()}stopDragging(draggingEvent){this.autoScrollService.ensureCleared(),this.getRowNodes(draggingEvent).forEach(rowNode=>{this.setRowNodeDragging(rowNode,!1)})}setRowNodeDragging(rowNode,dragging){rowNode.dragging!==dragging&&(rowNode.dragging=dragging,rowNode.dispatchRowEvent("draggingChanged"))}},__name(_a22,"RowDragFeature"),_a22);function _areEventsNear(e1,e2,pixelCount){if(pixelCount===0)return!1;const diffX=Math.abs(e1.clientX-e2.clientX),diffY=Math.abs(e1.clientY-e2.clientY);return Math.max(diffX,diffY)<=pixelCount}__name(_areEventsNear,"_areEventsNear");var _a23,DragService=(_a23=class extends BeanStub{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){const{dragSources}=this;dragSources.forEach(this.removeListener.bind(this)),dragSources.length=0,super.destroy()}removeListener(dragSourceAndListener){const element=dragSourceAndListener.dragSource.eElement,mouseDownListener=dragSourceAndListener.mouseDownListener;if(element.removeEventListener("mousedown",mouseDownListener),dragSourceAndListener.touchEnabled){const touchStartListener=dragSourceAndListener.touchStartListener;element.removeEventListener("touchstart",touchStartListener,{passive:!0})}}removeDragSource(params){const{dragSources}=this,dragSourceAndListener=dragSources.find(item=>item.dragSource===params);dragSourceAndListener&&(this.removeListener(dragSourceAndListener),_removeFromArray(dragSources,dragSourceAndListener))}addDragSource(params){const mouseListener=this.onMouseDown.bind(this,params),{eElement,includeTouch,stopPropagationForTouch}=params;eElement.addEventListener("mousedown",mouseListener);let touchListener=null;const suppressTouch=this.gos.get("suppressTouch");includeTouch&&!suppressTouch&&(touchListener=__name(touchEvent=>{_isFocusableFormField(touchEvent.target)||(stopPropagationForTouch&&touchEvent.stopPropagation(),this.onTouchStart(params,touchEvent))},"touchListener"),eElement.addEventListener("touchstart",touchListener,{passive:!1})),this.dragSources.push({dragSource:params,mouseDownListener:mouseListener,touchStartListener:touchListener,touchEnabled:!!includeTouch})}onTouchStart(params,touchEvent){this.currentDragParams=params,this.dragging=!1;const touch=touchEvent.touches[0];this.touchLastTime=touch,this.touchStart=touch;const touchMoveEvent=__name(e=>this.onTouchMove(e,params.eElement),"touchMoveEvent"),touchEndEvent=__name(e=>this.onTouchUp(e,params.eElement),"touchEndEvent"),documentTouchMove=__name(e=>{e.cancelable&&e.preventDefault()},"documentTouchMove"),target=touchEvent.target,events=[{target:_getRootNode(this.beans),type:"touchmove",listener:documentTouchMove,options:{passive:!1}},{target,type:"touchmove",listener:touchMoveEvent,options:{passive:!0}},{target,type:"touchend",listener:touchEndEvent,options:{passive:!0}},{target,type:"touchcancel",listener:touchEndEvent,options:{passive:!0}}];this.addTemporaryEvents(events),params.dragStartPixels===0&&this.onCommonMove(touch,this.touchStart,params.eElement)}onMouseDown(params,mouseEvent){const e=mouseEvent;if(params.skipMouseEvent&&params.skipMouseEvent(mouseEvent)||e._alreadyProcessedByDragService||(e._alreadyProcessedByDragService=!0,mouseEvent.button!==0))return;this.shouldPreventMouseEvent(mouseEvent)&&mouseEvent.preventDefault(),this.currentDragParams=params,this.dragging=!1,this.mouseStartEvent=mouseEvent,this.startTarget=mouseEvent.target;const mouseMoveEvent=__name(event=>this.onMouseMove(event,params.eElement),"mouseMoveEvent"),mouseUpEvent=__name(event=>this.onMouseUp(event,params.eElement),"mouseUpEvent"),contextEvent=__name(event=>event.preventDefault(),"contextEvent"),keydownEvent=__name(event=>{event.key===KeyCode.ESCAPE&&this.cancelDrag(params.eElement)},"keydownEvent"),target=_getRootNode(this.beans),events=[{target,type:"mousemove",listener:mouseMoveEvent},{target,type:"mouseup",listener:mouseUpEvent},{target,type:"contextmenu",listener:contextEvent},{target,type:"keydown",listener:keydownEvent}];this.addTemporaryEvents(events),params.dragStartPixels===0&&this.onMouseMove(mouseEvent,params.eElement)}addTemporaryEvents(events){events.forEach(currentEvent=>{const{target,type,listener,options}=currentEvent;target.addEventListener(type,listener,options)}),this.dragEndFunctions.push(()=>{events.forEach(currentEvent=>{const{target,type,listener,options}=currentEvent;target.removeEventListener(type,listener,options)})})}isEventNearStartEvent(currentEvent,startEvent){const{dragStartPixels}=this.currentDragParams,requiredPixelDiff=_exists(dragStartPixels)?dragStartPixels:4;return _areEventsNear(currentEvent,startEvent,requiredPixelDiff)}getFirstActiveTouch(touchList){for(let i=0;i<touchList.length;i++)if(touchList[i].identifier===this.touchStart.identifier)return touchList[i];return null}onCommonMove(currentEvent,startEvent,el){var _a238;if(!this.dragging){if(this.isEventNearStartEvent(currentEvent,startEvent))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:el}),this.currentDragParams.onDragStart(startEvent),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(startEvent)}(_a238=this.currentDragParams)==null||_a238.onDragging(currentEvent)}onTouchMove(touchEvent,el){const touch=this.getFirstActiveTouch(touchEvent.touches);touch&&this.onCommonMove(touch,this.touchStart,el)}onMouseMove(mouseEvent,el){var _a238;_isBrowserSafari()&&((_a238=_getDocument(this.beans).getSelection())==null||_a238.removeAllRanges()),this.shouldPreventMouseEvent(mouseEvent)&&mouseEvent.preventDefault(),this.onCommonMove(mouseEvent,this.mouseStartEvent,el)}shouldPreventMouseEvent(mouseEvent){const{gos}=this,isEnableCellTextSelect=gos.get("enableCellTextSelection"),isMouseMove=mouseEvent.type==="mousemove",isOverFormFieldElement=__name(mouseEvent2=>{const el=mouseEvent2.target,tagName=el==null?void 0:el.tagName.toLocaleLowerCase();return!!(tagName!=null&&tagName.match("^a$|textarea|input|select|button"))},"isOverFormFieldElement");return isEnableCellTextSelect&&isMouseMove&&mouseEvent.cancelable&&_isEventFromThisGrid(gos,mouseEvent)&&!isOverFormFieldElement(mouseEvent)}onTouchUp(touchEvent,el){let touch=this.getFirstActiveTouch(touchEvent.changedTouches);touch||(touch=this.touchLastTime),this.onUpCommon(touch,el)}onMouseUp(mouseEvent,el){this.onUpCommon(mouseEvent,el)}onUpCommon(eventOrTouch,el){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(eventOrTouch),this.eventSvc.dispatchEvent({type:"dragStopped",target:el})),this.resetDragProperties()}cancelDrag(el){var _a238,_b2;this.eventSvc.dispatchEvent({type:"dragCancelled",target:el}),(_b2=(_a238=this.currentDragParams)==null?void 0:_a238.onDragCancel)==null||_b2.call(_a238),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;const{dragEndFunctions}=this;dragEndFunctions.forEach(func=>func()),dragEndFunctions.length=0}},__name(_a23,"DragService"),_a23);function createUniqueColumnGroupId(groupId,instanceId){return groupId+"_"+instanceId}__name(createUniqueColumnGroupId,"createUniqueColumnGroupId");function isColumnGroup2(col){return col instanceof AgColumnGroup}__name(isColumnGroup2,"isColumnGroup2");var _a24,AgColumnGroup=(_a24=class extends BeanStub{constructor(providedColumnGroup,groupId,partId,pinned){super(),this.providedColumnGroup=providedColumnGroup,this.groupId=groupId,this.partId=partId,this.pinned=pinned,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return createUniqueColumnGroupId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const allLeafColumns=this.getProvidedColumnGroup().getLeafColumns();return!allLeafColumns||allLeafColumns.length===0?!1:allLeafColumns.every(col=>col.isMoving())}checkLeft(){if(this.displayedChildren.forEach(child=>{isColumnGroup2(child)&&child.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const lastChildLeft=_last(this.displayedChildren).getLeft();this.setLeft(lastChildLeft)}else{const firstChildLeft=this.displayedChildren[0].getLeft();this.setLeft(firstChildLeft)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(left){this.oldLeft=this.left,this.left!==left&&(this.left=left,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){var _a238;let groupActualWidth=0;return(_a238=this.displayedChildren)==null||_a238.forEach(child=>{groupActualWidth+=child.getActualWidth()}),groupActualWidth}isResizable(){if(!this.displayedChildren)return!1;let result=!1;return this.displayedChildren.forEach(child=>{child.isResizable()&&(result=!0)}),result}getMinWidth(){let result=0;return this.displayedChildren.forEach(groupChild=>{result+=groupChild.getMinWidth()}),result}addChild(child){this.children||(this.children=[]),this.children.push(child)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const result=[];return this.addLeafColumns(result),result}getDisplayedLeafColumns(){const result=[];return this.addDisplayedLeafColumns(result),result}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(expanded){this.providedColumnGroup.setExpanded(expanded)}isAutoHeaderHeight(){var _a238;return!!((_a238=this.getColGroupDef())!=null&&_a238.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(height){const changed=height!==this.autoHeaderHeight;return this.autoHeaderHeight=height,changed}addDisplayedLeafColumns(leafColumns){this.displayedChildren.forEach(child=>{isColumn(child)?leafColumns.push(child):isColumnGroup2(child)&&child.addDisplayedLeafColumns(leafColumns)})}addLeafColumns(leafColumns){this.children.forEach(child=>{isColumn(child)?leafColumns.push(child):isColumnGroup2(child)&&child.addLeafColumns(leafColumns)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const parent=this.getParent();return!this.isPadding()||!parent||!parent.isPadding()?0:1+parent.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let parentWithExpansion=this;for(;parentWithExpansion!=null&&parentWithExpansion.isPadding();)parentWithExpansion=parentWithExpansion.getParent();if(!(parentWithExpansion?parentWithExpansion.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(child=>{if(isColumnGroup2(child)&&(!child.displayedChildren||!child.displayedChildren.length))return;switch(child.getColumnGroupShow()){case"open":parentWithExpansion.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(child);break;case"closed":parentWithExpansion.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(child);break;default:this.displayedChildren.push(child);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},__name(_a24,"AgColumnGroup"),_a24),ROW_ID_PREFIX_ROW_GROUP="row-group-",ROW_ID_PREFIX_TOP_PINNED="t-",ROW_ID_PREFIX_BOTTOM_PINNED="b-",OBJECT_ID_SEQUENCE=0,_a25,RowNode=(_a25=class{constructor(beans){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=OBJECT_ID_SEQUENCE++,this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.__selected=!1,this.beans=beans}setData(data){this.setDataCommon(data,!1)}updateData(data){this.setDataCommon(data,!0)}setDataCommon(data,update){var _a238;const{valueCache,selectionSvc,eventSvc}=this.beans,oldData=this.data;this.data=data,valueCache==null||valueCache.onDataChanged(),this.updateDataOnDetailNode(),selectionSvc==null||selectionSvc.updateRowSelectable(this),this.resetQuickFilterAggregateText();const event=this.createDataChangedEvent(data,oldData,update);(_a238=this.__localEventService)==null||_a238.dispatchEvent(event),eventSvc.dispatchEvent({type:"rowNodeDataChanged",node:this})}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(newData,oldData,update){return{type:"dataChanged",node:this,oldData,newData,update}}getRowIndexString(){return this.rowIndex==null?(_error(13),null):this.rowPinned==="top"?ROW_ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?ROW_ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}setDataAndId(data,id){var _a238,_b2;const{selectionSvc}=this.beans,oldNode=(_a238=selectionSvc==null?void 0:selectionSvc.createDaemonNode)==null?void 0:_a238.call(selectionSvc,this),oldData=this.data;this.data=data,this.updateDataOnDetailNode(),this.setId(id),selectionSvc&&(selectionSvc.updateRowSelectable(this),selectionSvc.syncInRowNode(this,oldNode));const event=this.createDataChangedEvent(data,oldData,!1);(_b2=this.__localEventService)==null||_b2.dispatchEvent(event)}setId(id){var _a238;const getRowIdFunc=_getRowIdCallback(this.beans.gos);if(getRowIdFunc)if(this.data){const parentKeys=((_a238=this.parent)==null?void 0:_a238.getRoute())??[];this.id=getRowIdFunc({data:this.data,parentKeys:parentKeys.length>0?parentKeys:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(ROW_ID_PREFIX_ROW_GROUP)&&_error(14,{groupPrefix:ROW_ID_PREFIX_ROW_GROUP})}else this.id=void 0;else this.id=id}setRowTop(rowTop){this.oldRowTop=this.rowTop,this.rowTop!==rowTop&&(this.rowTop=rowTop,this.dispatchRowEvent("topChanged"),this.setDisplayed(rowTop!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(hovered){this.hovered=hovered}isHovered(){return this.hovered}setRowHeight(rowHeight,estimated=!1){this.rowHeight=rowHeight,this.rowHeightEstimated=estimated,this.dispatchRowEvent("heightChanged")}setExpanded(expanded,e,forceSync){var _a238;(_a238=this.beans.expansionSvc)==null||_a238.setExpanded(this,expanded,e,forceSync)}setDataValue(colKey,newValue,eventSource){const{colModel,valueSvc,gos,selectionSvc}=this.beans,column=typeof colKey!="string"?colKey:colModel.getCol(colKey)??colModel.getColDefCol(colKey);if(!column)return!1;const oldValue=valueSvc.getValueForDisplay(column,this);if(gos.get("readOnlyEdit")){const{beans:{eventSvc},data,rowIndex,rowPinned}=this;return eventSvc.dispatchEvent({type:"cellEditRequest",event:null,rowIndex,rowPinned,column,colDef:column.colDef,data,node:this,oldValue,newValue,value:newValue,source:eventSource}),!1}const valueChanged=valueSvc.setValue(this,column,newValue,eventSource);return this.dispatchCellChangedEvent(column,newValue,oldValue),selectionSvc==null||selectionSvc.updateRowSelectable(this),valueChanged}updateHasChildren(){let newValue=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;const{rowChildrenSvc}=this.beans;rowChildrenSvc&&(newValue=rowChildrenSvc.getHasChildrenValue(this)),newValue!==this.__hasChildren&&(this.__hasChildren=!!newValue,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(column,newValue,oldValue){var _a238;const cellChangedEvent={type:"cellChanged",node:this,column,newValue,oldValue};(_a238=this.__localEventService)==null||_a238.dispatchEvent(cellChangedEvent)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var _a238;return((_a238=this.beans.expansionSvc)==null?void 0:_a238.isExpandable(this))??!1}isSelected(){return this.footer?this.sibling.isSelected():this.__selected}depthFirstSearch(callback){var _a238;(_a238=this.childrenAfterGroup)==null||_a238.forEach(child=>child.depthFirstSearch(callback)),callback(this)}dispatchRowEvent(type){var _a238;(_a238=this.__localEventService)==null||_a238.dispatchEvent({type,node:this})}setSelected(newValue,clearSelection=!1,source="api"){var _a238;(_a238=this.beans.selectionSvc)==null||_a238.setNodesSelected({nodes:[this],newValue,clearSelection,source})}isRowPinned(){return!!this.rowPinned}__addEventListener(eventType,listener){this.__localEventService||(this.__localEventService=new LocalEventService),this.__localEventService.addEventListener(eventType,listener)}__removeEventListener(eventType,listener){this.removeLocalListener(eventType,listener)}addEventListener(eventType,userListener){var _a238,_b2,_c,_d;(_a238=this.beans.validation)==null||_a238.checkRowEvents(eventType),this.__localEventService||(this.__localEventService=new LocalEventService),this.frameworkEventListenerService=(_c=(_b2=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:_c.call(_b2,this.frameworkEventListenerService,this.__localEventService);const listener=((_d=this.frameworkEventListenerService)==null?void 0:_d.wrap(userListener))??userListener;this.__localEventService.addEventListener(eventType,listener)}removeEventListener(eventType,userListener){var _a238;const listener=((_a238=this.frameworkEventListenerService)==null?void 0:_a238.unwrap(userListener))??userListener;this.removeLocalListener(eventType,listener)}removeLocalListener(eventType,listener){var _a238,_b2;(_a238=this.__localEventService)==null||_a238.removeEventListener(eventType,listener),(_b2=this.__localEventService)!=null&&_b2.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(_warn(61),this.detail)return!0;const isFullWidthCellFunc=this.beans.gos.getCallback("isFullWidthRow");return isFullWidthCellFunc?isFullWidthCellFunc({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const res=[];let pointer=this;for(;pointer&&pointer.key!=null;)res.push(pointer.key),pointer=pointer.parent;return res.reverse()}setFirstChild(firstChild){this.firstChild!==firstChild&&(this.firstChild=firstChild,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(displayed){this.displayed!==displayed&&(this.displayed=displayed,this.dispatchRowEvent("displayedChanged"))}setRowIndex(rowIndex){this.rowIndex!==rowIndex&&(this.rowIndex=rowIndex,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(allChildrenCount){this.allChildrenCount!==allChildrenCount&&(this.allChildrenCount=allChildrenCount,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(uiLevel){this.uiLevel!==uiLevel&&(this.uiLevel=uiLevel,this.dispatchRowEvent("uiLevelChanged"))}},__name(_a25,"RowNode"),_a25);function _createGlobalRowEvent(rowNode,gos,type){return _addGridCommonParams(gos,{type,node:rowNode,data:rowNode.data,rowIndex:rowNode.rowIndex,rowPinned:rowNode.rowPinned})}__name(_createGlobalRowEvent,"_createGlobalRowEvent");var FilterWrapperElement={tag:"div",cls:"ag-filter"},_a26,FilterWrapperComp=(_a26=class extends Component{constructor(column,source){super(FilterWrapperElement),this.column=column,this.source=source,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var _a238;return((_a238=this.filterWrapper)==null?void 0:_a238.filterPromise)??null}afterInit(){var _a238,_b2;return((_b2=(_a238=this.filterWrapper)==null?void 0:_a238.filterPromise)==null?void 0:_b2.then(()=>{}))??AgPromise.resolve()}afterGuiAttached(params){var _a238,_b2;(_b2=(_a238=this.filterWrapper)==null?void 0:_a238.filterPromise)==null||_b2.then(filter=>{var _a239;(_a239=filter==null?void 0:filter.afterGuiAttached)==null||_a239.call(filter,params)})}afterGuiDetached(){var _a238,_b2;(_b2=(_a238=this.filterWrapper)==null?void 0:_a238.filterPromise)==null||_b2.then(filter=>{var _a239;(_a239=filter==null?void 0:filter.afterGuiDetached)==null||_a239.call(filter)})}createFilter(init){var _a238,_b2;const{column,source}=this;this.filterWrapper=((_a238=this.beans.filterManager)==null?void 0:_a238.getOrCreateFilterWrapper(column))??null,(_b2=this.filterWrapper)!=null&&_b2.filterPromise&&this.filterWrapper.filterPromise.then(filter=>{const guiFromFilter=filter.getGui();_exists(guiFromFilter)||_warn(69,{guiFromFilter}),this.appendChild(guiFromFilter),init&&this.eventSvc.dispatchEvent({type:"filterOpened",column,source,eGui:this.getGui()})})}onFilterDestroyed(event){(event.source==="api"||event.source==="paramsUpdated")&&event.column.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(_clearElement(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},__name(_a26,"FilterWrapperComp"),_a26),RESIZE_CONTAINER_STYLE="ag-resizer-wrapper",makeDiv=__name((dataRefPrefix,classSuffix)=>({tag:"div",ref:`${dataRefPrefix}Resizer`,cls:`ag-resizer ag-resizer-${classSuffix}`}),"makeDiv"),RESIZE_TEMPLATE={tag:"div",cls:RESIZE_CONTAINER_STYLE,children:[makeDiv("eTopLeft","topLeft"),makeDiv("eTop","top"),makeDiv("eTopRight","topRight"),makeDiv("eRight","right"),makeDiv("eBottomRight","bottomRight"),makeDiv("eBottom","bottom"),makeDiv("eBottomLeft","bottomLeft"),makeDiv("eLeft","left")]},_a27,PositionableFeature=(_a27=class extends BeanStub{constructor(element,config){super(),this.element=element,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},config)}wireBeans(beans){this.popupSvc=beans.popupSvc,this.dragSvc=beans.dragSvc}center(){const{clientHeight,clientWidth}=this.offsetParent,x=clientWidth/2-this.getWidth()/2,y=clientHeight/2-this.getHeight()/2;this.offsetElement(x,y)}initialisePosition(){if(this.positioned)return;const{centered,forcePopupParentAsOffsetParent,minWidth,width,minHeight,height,x,y}=this.config;this.offsetParent||this.setOffsetParent();let computedMinHeight=0,computedMinWidth=0;const isElementVisible=_isVisible(this.element);if(isElementVisible){const boundaryEl=this.findBoundaryElement(),offsetParentComputedStyles=window.getComputedStyle(boundaryEl);if(offsetParentComputedStyles.minWidth!=null){const paddingWidth=boundaryEl.offsetWidth-this.element.offsetWidth;computedMinWidth=parseInt(offsetParentComputedStyles.minWidth,10)-paddingWidth}if(offsetParentComputedStyles.minHeight!=null){const paddingHeight=boundaryEl.offsetHeight-this.element.offsetHeight;computedMinHeight=parseInt(offsetParentComputedStyles.minHeight,10)-paddingHeight}}if(this.minHeight=minHeight||computedMinHeight,this.minWidth=minWidth||computedMinWidth,width&&this.setWidth(width),height&&this.setHeight(height),(!width||!height)&&this.refreshSize(),centered)this.center();else if(x||y)this.offsetElement(x,y);else if(isElementVisible&&forcePopupParentAsOffsetParent){let boundaryEl=this.boundaryEl,initialisedDuringPositioning=!0;if(boundaryEl||(boundaryEl=this.findBoundaryElement(),initialisedDuringPositioning=!1),boundaryEl){const top=parseFloat(boundaryEl.style.top),left=parseFloat(boundaryEl.style.left);initialisedDuringPositioning?this.offsetElement(isNaN(left)?0:left,isNaN(top)?0:top):this.setPosition(left,top)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(movable,moveElement){var _a238,_b2;if(!this.config.popup||movable===this.movable)return;this.movable=movable;const params=this.moveElementDragListener||{eElement:moveElement,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};movable?((_a238=this.dragSvc)==null||_a238.addDragSource(params),this.moveElementDragListener=params):((_b2=this.dragSvc)==null||_b2.removeDragSource(params),this.moveElementDragListener=void 0)}setResizable(resizable){if(this.clearResizeListeners(),resizable?this.addResizers():this.removeResizers(),typeof resizable=="boolean"){if(resizable===!1)return;resizable={topLeft:resizable,top:resizable,topRight:resizable,right:resizable,bottomRight:resizable,bottom:resizable,bottomLeft:resizable,left:resizable}}Object.keys(resizable).forEach(side=>{var _a238;const isSideResizable=!!resizable[side],resizerEl=this.getResizerElement(side),params={dragStartPixels:0,eElement:resizerEl,onDragStart:__name(e=>this.onResizeStart(e,side),"onDragStart"),onDragging:this.onResize.bind(this),onDragStop:__name(e=>this.onResizeEnd(e,side),"onDragStop")};(isSideResizable||!this.isAlive()&&!isSideResizable)&&(isSideResizable?((_a238=this.dragSvc)==null||_a238.addDragSource(params),this.resizeListeners.push(params),resizerEl.style.pointerEvents="all"):resizerEl.style.pointerEvents="none",this.resizable[side]=isSideResizable)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height,width}=this.lastSize;width!==-1&&(this.element.style.width=`${width}px`),height!==-1&&(this.element.style.height=`${height}px`)}getHeight(){return this.element.offsetHeight}setHeight(height){const{popup}=this.config,eGui=this.element;let isPercent=!1;if(typeof height=="string"&&height.indexOf("%")!==-1)_setFixedHeight(eGui,height),height=_getAbsoluteHeight(eGui),isPercent=!0;else if(height=Math.max(this.minHeight,height),this.positioned){const availableHeight=this.getAvailableHeight();availableHeight&&height>availableHeight&&(height=availableHeight)}this.getHeight()!==height&&(isPercent?(eGui.style.maxHeight="unset",eGui.style.minHeight="unset"):popup?_setFixedHeight(eGui,height):(eGui.style.height=`${height}px`,eGui.style.flex="0 0 auto",this.lastSize.height=typeof height=="number"?height:parseFloat(height)))}getAvailableHeight(){const{popup,forcePopupParentAsOffsetParent}=this.config;this.positioned||this.initialisePosition();const{clientHeight}=this.offsetParent;if(!clientHeight)return null;const elRect=this.element.getBoundingClientRect(),offsetParentRect=this.offsetParent.getBoundingClientRect(),yPosition=popup?this.position.y:elRect.top,parentTop=popup?0:offsetParentRect.top;let additionalHeight=0;if(forcePopupParentAsOffsetParent){const parentEl=this.element.parentElement;if(parentEl){const{bottom}=parentEl.getBoundingClientRect();additionalHeight=bottom-elRect.bottom}}return clientHeight+parentTop-yPosition-additionalHeight}getWidth(){return this.element.offsetWidth}setWidth(width){const eGui=this.element,{popup}=this.config;let isPercent=!1;if(typeof width=="string"&&width.indexOf("%")!==-1)_setFixedWidth(eGui,width),width=_getAbsoluteWidth(eGui),isPercent=!0;else if(this.positioned){width=Math.max(this.minWidth,width);const{clientWidth}=this.offsetParent,xPosition=popup?this.position.x:this.element.getBoundingClientRect().left;clientWidth&&width+xPosition>clientWidth&&(width=clientWidth-xPosition)}this.getWidth()!==width&&(isPercent?(eGui.style.maxWidth="unset",eGui.style.minWidth="unset"):this.config.popup?_setFixedWidth(eGui,width):(eGui.style.width=`${width}px`,eGui.style.flex=" unset",this.lastSize.width=typeof width=="number"?width:parseFloat(width)))}offsetElement(x=0,y=0){var _a238;const{forcePopupParentAsOffsetParent}=this.config,ePopup=forcePopupParentAsOffsetParent?this.boundaryEl:this.element;ePopup&&((_a238=this.popupSvc)==null||_a238.positionPopup({ePopup,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:__name(()=>({x,y}),"updatePosition")}),this.setPosition(parseFloat(ePopup.style.left),parseFloat(ePopup.style.top)))}constrainSizeToAvailableHeight(constrain){var _a238;if(!this.config.forcePopupParentAsOffsetParent)return;const applyMaxHeightToElement=__name(()=>{const availableHeight=this.getAvailableHeight();this.element.style.setProperty("max-height",`${availableHeight}px`)},"applyMaxHeightToElement");constrain&&this.popupSvc?this.resizeObserverSubscriber=_observeResize(this.beans,(_a238=this.popupSvc)==null?void 0:_a238.getPopupParent(),applyMaxHeightToElement):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(x,y){this.position.x=x,this.position.y=y}updateDragStartPosition(x,y){this.dragStartPosition={x,y}}calculateMouseMovement(params){const{e,isLeft,isTop,anywhereWithin,topBuffer}=params,xDiff=e.clientX-this.dragStartPosition.x,yDiff=e.clientY-this.dragStartPosition.y,movementX=this.shouldSkipX(e,!!isLeft,!!anywhereWithin,xDiff)?0:xDiff,movementY=this.shouldSkipY(e,!!isTop,topBuffer,yDiff)?0:yDiff;return{movementX,movementY}}shouldSkipX(e,isLeft,anywhereWithin,diff){const elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),xPosition=this.config.popup?this.position.x:elRect.left;let skipX=xPosition<=0&&parentRect.left>=e.clientX||parentRect.right<=e.clientX&&parentRect.right<=boundaryElRect.right;return skipX?!0:(isLeft?skipX=diff<0&&e.clientX>xPosition+parentRect.left||diff>0&&e.clientX<xPosition+parentRect.left:anywhereWithin?skipX=diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<xPosition+parentRect.left:skipX=diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<boundaryElRect.right,skipX)}shouldSkipY(e,isTop,topBuffer=0,diff){const elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),yPosition=this.config.popup?this.position.y:elRect.top;let skipY=yPosition<=0&&parentRect.top>=e.clientY||parentRect.bottom<=e.clientY&&parentRect.bottom<=boundaryElRect.bottom;return skipY?!0:(isTop?skipY=diff<0&&e.clientY>yPosition+parentRect.top+topBuffer||diff>0&&e.clientY<yPosition+parentRect.top:skipY=diff<0&&e.clientY>boundaryElRect.bottom||diff>0&&e.clientY<boundaryElRect.bottom,skipY)}createResizeMap(){const getElement=__name(ref=>({element:this.element.querySelector(`[data-ref=${ref}Resizer]`)}),"getElement");this.resizerMap={topLeft:getElement("eTopLeft"),top:getElement("eTop"),topRight:getElement("eTopRight"),right:getElement("eRight"),bottomRight:getElement("eBottomRight"),bottom:getElement("eBottom"),bottomLeft:getElement("eBottomLeft"),left:getElement("eLeft")}}addResizers(){if(this.resizersAdded)return;const eGui=this.element;eGui&&(eGui.appendChild(_createElement(RESIZE_TEMPLATE)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const resizerEl=this.element.querySelector(`.${RESIZE_CONTAINER_STYLE}`);resizerEl&&this.element.removeChild(resizerEl),this.resizersAdded=!1}getResizerElement(side){return this.resizerMap[side].element}onResizeStart(e,side){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!side.match(/top/i),isRight:!!side.match(/right/i),isBottom:!!side.match(/bottom/i),isLeft:!!side.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[side].element.classList.add("ag-active");const{popup,forcePopupParentAsOffsetParent}=this.config;!popup&&!forcePopupParentAsOffsetParent&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const parent=this.element.parentElement;return parent?Array.prototype.slice.call(parent.children).filter(el=>!el.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const siblings=this.getSiblings()||[];let height=0,width=0;for(let i=0;i<siblings.length;i++){const currentEl=siblings[i],isFlex=!!currentEl.style.flex&&currentEl.style.flex!=="0 0 auto";if(currentEl===this.element)continue;let nextHeight=this.minHeight||0,nextWidth=this.minWidth||0;if(isFlex){const computedStyle=window.getComputedStyle(currentEl);computedStyle.minHeight&&(nextHeight=parseInt(computedStyle.minHeight,10)),computedStyle.minWidth&&(nextWidth=parseInt(computedStyle.minWidth,10))}else nextHeight=currentEl.offsetHeight,nextWidth=currentEl.offsetWidth;height+=nextHeight,width+=nextWidth}return{height,width}}applySizeToSiblings(vertical){let containerToFlex=null;const siblings=this.getSiblings();if(siblings){for(let i=0;i<siblings.length;i++){const el=siblings[i];el!==containerToFlex&&(vertical?el.style.height=`${el.offsetHeight}px`:el.style.width=`${el.offsetWidth}px`,el.style.flex="0 0 auto",el===this.element&&(containerToFlex=siblings[i+1]))}containerToFlex&&(containerToFlex.style.removeProperty("height"),containerToFlex.style.removeProperty("min-height"),containerToFlex.style.removeProperty("max-height"),containerToFlex.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(value=>value)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup,forcePopupParentAsOffsetParent}=this.config,{isTop,isRight,isBottom,isLeft}=this.currentResizer,isHorizontal=isRight||isLeft,isVertical=isBottom||isTop,{movementX,movementY}=this.calculateMouseMovement({e,isLeft,isTop}),xPosition=this.position.x,yPosition=this.position.y;let offsetLeft=0,offsetTop=0;if(isHorizontal&&movementX){const direction=isLeft?-1:1,oldWidth=this.getWidth(),newWidth=oldWidth+movementX*direction;let skipWidth=!1;isLeft&&(offsetLeft=oldWidth-newWidth,(xPosition+offsetLeft<=0||newWidth<=this.minWidth)&&(skipWidth=!0,offsetLeft=0)),skipWidth||this.setWidth(newWidth)}if(isVertical&&movementY){const direction=isTop?-1:1,oldHeight=this.getHeight(),newHeight=oldHeight+movementY*direction;let skipHeight=!1;isTop?(offsetTop=oldHeight-newHeight,(yPosition+offsetTop<=0||newHeight<=this.minHeight)&&(skipHeight=!0,offsetTop=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&oldHeight<newHeight&&this.getMinSizeOfSiblings().height+newHeight>this.element.parentElement.offsetHeight&&(skipHeight=!0),skipHeight||this.setHeight(newHeight)}this.updateDragStartPosition(e.clientX,e.clientY),((popup||forcePopupParentAsOffsetParent)&&offsetLeft||offsetTop)&&this.offsetElement(xPosition+offsetLeft,yPosition+offsetTop)}onResizeEnd(e,side){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[side].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const eGui=this.element;this.config.popup&&(this.config.width||this.setWidth(eGui.offsetWidth),this.config.height||this.setHeight(eGui.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x,y}=this.position;let topBuffer;this.config.calculateTopBuffer&&(topBuffer=this.config.calculateTopBuffer());const{movementX,movementY}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer});this.offsetElement(x+movementX,y+movementY),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let el=this.element;for(;el;){if(window.getComputedStyle(el).position!=="static")return el;el=el.parentElement}return this.element}clearResizeListeners(){var _a238;for(;this.resizeListeners.length;){const params=this.resizeListeners.pop();(_a238=this.dragSvc)==null||_a238.removeDragSource(params)}}destroy(){var _a238;super.destroy(),this.moveElementDragListener&&((_a238=this.dragSvc)==null||_a238.removeDragSource(this.moveElementDragListener)),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},__name(_a27,"PositionableFeature"),_a27),FOCUS_MANAGED_CLASS="ag-focus-managed",_a28,ManagedFocusFeature=(_a28=class extends BeanStub{constructor(eFocusable,callbacks={}){super(),this.eFocusable=eFocusable,this.callbacks=callbacks,this.callbacks={shouldStopEventPropagation:__name(()=>!1,"shouldStopEventPropagation"),onTabKeyDown:__name(e=>{if(e.defaultPrevented)return;const nextRoot=_findNextFocusableElement(this.beans,this.eFocusable,!1,e.shiftKey);nextRoot&&(nextRoot.focus(),e.preventDefault())},"onTabKeyDown"),...callbacks}}postConstruct(){const{eFocusable,callbacks:{onFocusIn,onFocusOut}}=this;eFocusable.classList.add(FOCUS_MANAGED_CLASS),this.addKeyDownListeners(eFocusable),onFocusIn&&this.addManagedElementListeners(eFocusable,{focusin:onFocusIn}),onFocusOut&&this.addManagedElementListeners(eFocusable,{focusout:onFocusOut})}addKeyDownListeners(eGui){this.addManagedElementListeners(eGui,{keydown:__name(e=>{if(e.defaultPrevented||_isStopPropagationForAgGrid(e))return;const{callbacks}=this;if(callbacks.shouldStopEventPropagation(e)){_stopPropagationForAgGrid(e);return}e.key===KeyCode.TAB?callbacks.onTabKeyDown(e):callbacks.handleKeyDown&&callbacks.handleKeyDown(e)},"keydown")})}},__name(_a28,"ManagedFocusFeature"),_a28),FILTER_LOCALE_TEXT={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function getDebounceMs(params,debounceDefault){const{debounceMs}=params;return isUseApplyButton(params)?(debounceMs!=null&&_warn(71),0):debounceMs??debounceDefault}__name(getDebounceMs,"getDebounceMs");function isUseApplyButton(params){var _a238;return(((_a238=params.buttons)==null?void 0:_a238.indexOf("apply"))??-1)>=0}__name(isUseApplyButton,"isUseApplyButton");var _a29,ProvidedFilter=(_a29=class extends Component{constructor(filterNameKey){super(),this.filterNameKey=filterNameKey,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=RefPlaceholder,this.buttonListeners=[],this.defaultDebounceMs=0}postConstruct(){this.resetTemplate(),this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new PositionableFeature(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(paramsMap){let eGui=this.getGui();eGui==null||eGui.removeEventListener("submit",this.onFormSubmit);const element={tag:"form",cls:"ag-filter-wrapper",children:[{tag:"div",ref:"eFilterBody",cls:`ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper`,children:[this.createBodyTemplate()]}]};this.setTemplate(element,this.getAgComponents(),paramsMap),eGui=this.getGui(),eGui==null||eGui.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.params.readOnly}init(params){this.setParams(params),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(params){this.params=params,this.applyActive=isUseApplyButton(params),this.resetButtonsPanel(params)}updateParams(params){this.params=params,this.applyActive=isUseApplyButton(params),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(newParams,oldParams){const{buttons:oldButtons,readOnly:oldReadOnly}=oldParams??{},{buttons,readOnly}=newParams;if(oldReadOnly===readOnly&&_jsonEquals(oldButtons,buttons))return;const hasButtons=buttons&&buttons.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(_clearElement(this.eButtonsPanel),this.buttonListeners.forEach(destroyFunc=>destroyFunc()),this.buttonListeners=[]):hasButtons&&(this.eButtonsPanel=_createElement({tag:"div",cls:"ag-filter-apply-panel"})),!hasButtons){this.eButtonsPanel&&_removeFromParent(this.eButtonsPanel);return}const fragment=document.createDocumentFragment(),addButton=__name(type=>{let clickListener;const text=type?this.translate(`${type}Filter`):void 0;switch(type){case"apply":clickListener=__name(e=>this.onBtApply(!1,!1,e),"clickListener");break;case"clear":clickListener=__name(()=>this.onBtClear(),"clickListener");break;case"reset":clickListener=__name(()=>this.onBtReset(),"clickListener");break;case"cancel":clickListener=__name(e=>{this.onBtCancel(e)},"clickListener");break;default:_warn(75);return}const button=_loadTemplate(`<button
                    type="${type==="apply"?"submit":"button"}"
                    data-ref="${type}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${text}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(button,{click:clickListener})),fragment.append(button)},"addButton");buttons.forEach(type=>addButton(type)),this.eButtonsPanel.append(fragment),this.getGui().appendChild(this.eButtonsPanel)}setupOnBtApplyDebounce(){const debounceMs=getDebounceMs(this.params,this.defaultDebounceMs),debounceFunc=_debounce(this,this.checkApplyDebounce.bind(this),debounceMs);this.onBtApplyDebounce=()=>{this.debouncePending=!0,debounceFunc()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel??null}setModel(model){return(model!=null?this.setModelIntoUi(model):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.params.closeOnApply&&this.close(e)}resetUiToActiveModel(currentModel,afterUiUpdatedFunc){const afterAppliedFunc=__name(()=>{this.onUiChanged(!1,"prevent"),afterUiUpdatedFunc==null||afterUiUpdatedFunc()},"afterAppliedFunc");currentModel!=null?this.setModelIntoUi(currentModel).then(afterAppliedFunc):this.resetUiToDefaults().then(afterAppliedFunc)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(source="api"){const newModel=this.getModelFromUi();if(!this.isModelValid(newModel))return!1;const previousModel=this.appliedModel;return this.appliedModel=newModel,!this.areModelsEqual(previousModel,newModel)}isModelValid(model){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(afterFloatingFilter=!1,afterDataChange=!1,e){e&&e.preventDefault(),this.applyModel(afterDataChange?"rowDataUpdated":"ui")&&this.params.filterChangedCallback({afterFloatingFilter,afterDataChange,source:"columnFilter"});const{closeOnApply}=this.params;closeOnApply&&this.applyActive&&!afterFloatingFilter&&!afterDataChange&&this.close(e)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const keyboardEvent=e,key=keyboardEvent&&keyboardEvent.key;let params;(key==="Enter"||key==="Space")&&(params={keyboardEvent}),this.hidePopup(params),this.hidePopup=null}onUiChanged(fromFloatingFilter=!1,apply){if(this.updateUiVisibility(),this.params.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const isValid=this.isModelValid(this.getModelFromUi()),applyFilterButton=this.queryForHtmlElement('[data-ref="applyFilterButton"]');applyFilterButton&&_setDisabled(applyFilterButton,!isValid)}fromFloatingFilter&&!apply||apply==="immediately"?this.onBtApply(fromFloatingFilter):(!this.applyActive&&!apply||apply==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(params){params&&(this.hidePopup=params.hidePopup),this.refreshFilterResizer(params==null?void 0:params.container)}refreshFilterResizer(containerType){const{positionableFeature,gos}=this;if(!positionableFeature||containerType==="toolPanel")return;containerType==="floatingFilter"||containerType==="columnFilter"?(positionableFeature.restoreLastSize(),positionableFeature.setResizable(gos.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(positionableFeature.removeSizeFromEl(),positionableFeature.setResizable(!1)),positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){var _a238;this.checkApplyDebounce(),(_a238=this.positionableFeature)==null||_a238.constrainSizeToAvailableHeight(!1)}refresh(newParams){const oldParams=this.params;return this.params=newParams,this.resetButtonsPanel(newParams,oldParams),!0}destroy(){const eGui=this.getGui();eGui&&eGui.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(key){return this.getLocaleTextFunc()(key,FILTER_LOCALE_TEXT[key])}getCellValue(rowNode){return this.params.getValue(rowNode)}getPositionableElement(){return this.eFilterBody}},__name(_a29,"ProvidedFilter"),_a29);function _getDefaultFloatingFilterType(frameworkOverrides,def,getFromDefault){if(def==null)return null;let defaultFloatingFilterType=null;const{compName,jsComp,fwComp}=_getFilterCompKeys(frameworkOverrides,def);return compName?defaultFloatingFilterType={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[compName]:jsComp==null&&fwComp==null&&def.filter===!0&&(defaultFloatingFilterType=getFromDefault()),defaultFloatingFilterType}__name(_getDefaultFloatingFilterType,"_getDefaultFloatingFilterType");var LayoutCssClasses={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},_a30,LayoutFeature=(_a30=class extends BeanStub{constructor(view){super(),this.view=view}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const domLayout=this.gos.get("domLayout"),params={autoHeight:domLayout==="autoHeight",normal:domLayout==="normal",print:domLayout==="print"},cssClass=params.autoHeight?LayoutCssClasses.AUTO_HEIGHT:params.print?LayoutCssClasses.PRINT:LayoutCssClasses.NORMAL;this.view.updateLayoutClasses(cssClass,params)}},__name(_a30,"LayoutFeature"),_a30),VIEWPORT="Viewport",FAKE_V_SCROLLBAR="fakeVScrollComp",HORIZONTAL_SOURCES=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],SCROLL_DEBOUNCE_TIMEOUT=100,SCROLL_END_TIMEOUT=150,_a31,GridBodyScrollFeature=(_a31=class extends BeanStub{constructor(eBodyViewport){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=eBodyViewport,this.resetLastHScrollDebounced=_debounce(this,()=>this.lastScrollSource[1]=null,SCROLL_END_TIMEOUT),this.resetLastVScrollDebounced=_debounce(this,()=>this.lastScrollSource[0]=null,SCROLL_END_TIMEOUT)}wireBeans(beans){this.ctrlsSvc=beans.ctrlsSvc,this.animationFrameSvc=beans.animationFrameSvc,this.visibleCols=beans.visibleCols}destroy(){super.destroy(),window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const invalidateVerticalScroll=this.invalidateVerticalScroll.bind(this),invalidateHorizontalScroll=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:invalidateVerticalScroll,scrollGapChanged:invalidateHorizontalScroll}),this.addManagedElementListeners(this.eBodyViewport,{scroll:invalidateVerticalScroll}),this.ctrlsSvc.whenReady(this,p=>{this.centerRowsCtrl=p.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,VIEWPORT)});for(const source of HORIZONTAL_SOURCES){const scrollPartner=this.ctrlsSvc.get(source);this.registerScrollPartner(scrollPartner,this.onHScroll.bind(this,source))}}addVerticalScrollListeners(){const fakeVScrollComp=this.ctrlsSvc.get("fakeVScrollComp"),isDebounce=this.gos.get("debounceVerticalScrollbar"),onVScroll=isDebounce?_debounce(this,this.onVScroll.bind(this,VIEWPORT),SCROLL_DEBOUNCE_TIMEOUT):this.onVScroll.bind(this,VIEWPORT),onFakeVScroll=isDebounce?_debounce(this,this.onVScroll.bind(this,FAKE_V_SCROLLBAR),SCROLL_DEBOUNCE_TIMEOUT):this.onVScroll.bind(this,FAKE_V_SCROLLBAR);this.addManagedElementListeners(this.eBodyViewport,{scroll:onVScroll}),this.registerScrollPartner(fakeVScrollComp,onFakeVScroll)}registerScrollPartner(comp,callback){comp.onScrollCallback(callback)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(scrollLeft){this.centerRowsCtrl!=null&&(scrollLeft===void 0&&(scrollLeft=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(scrollLeft)))}setScrollLeftForAllContainersExceptCurrent(scrollLeft){for(const container of[...HORIZONTAL_SOURCES,VIEWPORT]){if(this.lastScrollSource[1]===container)continue;const viewport=this.getViewportForSource(container);_setScrollLeft(viewport,scrollLeft,this.enableRtl)}}getViewportForSource(source){return source===VIEWPORT?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(source).eViewport}isControllingScroll(source,direction){return this.lastScrollSource[direction]==null?(direction===0?this.lastScrollSource[0]=source:this.lastScrollSource[1]=source,!0):this.lastScrollSource[direction]===source}onHScroll(source){if(!this.isControllingScroll(source,1))return;const centerContainerViewport=this.centerRowsCtrl.eViewport,{scrollLeft}=centerContainerViewport;if(this.shouldBlockScrollUpdate(1,scrollLeft,!0))return;const newScrollLeft=_getScrollLeft(this.getViewportForSource(source),this.enableRtl);this.doHorizontalScroll(newScrollLeft),this.resetLastHScrollDebounced()}onVScroll(source){if(!this.isControllingScroll(source,0))return;let scrollTop;if(source===VIEWPORT?scrollTop=this.eBodyViewport.scrollTop:scrollTop=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,scrollTop,!0))return;const{animationFrameSvc}=this;animationFrameSvc==null||animationFrameSvc.setScrollTop(scrollTop),this.nextScrollTop=scrollTop,source===VIEWPORT?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(scrollTop):this.eBodyViewport.scrollTop=scrollTop,animationFrameSvc!=null&&animationFrameSvc.active?animationFrameSvc.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(scrollLeft){const fakeScrollLeft=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===scrollLeft&&scrollLeft===fakeScrollLeft||(this.scrollLeft=scrollLeft,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(scrollLeft),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(direction){const bodyScrollEvent={type:"bodyScroll",direction:direction===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventSvc.dispatchEvent(bodyScrollEvent),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.eventSvc.dispatchEvent({...bodyScrollEvent,type:"bodyScrollEnd"})},SCROLL_END_TIMEOUT)}shouldBlockScrollUpdate(direction,scrollTo,touchOnly=!1){return touchOnly&&!_isIOSUserAgent()?!1:direction===0?this.shouldBlockVerticalScroll(scrollTo):this.shouldBlockHorizontalScroll(scrollTo)}shouldBlockVerticalScroll(scrollTo){const clientHeight=_getInnerHeight(this.eBodyViewport),{scrollHeight}=this.eBodyViewport;return scrollTo<0||scrollTo+clientHeight>scrollHeight}shouldBlockHorizontalScroll(scrollTo){const clientWidth=this.centerRowsCtrl.getCenterWidth(),{scrollWidth}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(scrollTo>0)return!0}else if(scrollTo<0)return!0;return Math.abs(scrollTo)+clientWidth>scrollWidth}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll(VIEWPORT)}scrollGridIfNeeded(suppressedAnimationFrame=!1){const frameNeeded=this.scrollTop!=this.nextScrollTop;return frameNeeded&&(this.scrollTop=this.nextScrollTop,suppressedAnimationFrame&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),frameNeeded}setHorizontalScrollPosition(hScrollPosition,fromAlignedGridsService=!1){const maxScrollLeft=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!fromAlignedGridsService&&this.shouldBlockScrollUpdate(1,hScrollPosition)&&(this.enableRtl?hScrollPosition=hScrollPosition>0?0:maxScrollLeft:hScrollPosition=Math.min(Math.max(hScrollPosition,0),maxScrollLeft)),_setScrollLeft(this.centerRowsCtrl.eViewport,Math.abs(hScrollPosition),this.enableRtl),this.doHorizontalScroll(hScrollPosition)}setVerticalScrollPosition(vScrollPosition){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=vScrollPosition}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight,lastScrollTop}=this;return{top:lastScrollTop,bottom:lastScrollTop+lastOffsetHeight}}this.isVerticalPositionInvalidated=!1;const{scrollTop,offsetHeight}=this.eBodyViewport;return this.lastScrollTop=scrollTop,this.lastOffsetHeight=offsetHeight,{top:scrollTop,bottom:scrollTop+offsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(pixels){const oldScrollPosition=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(oldScrollPosition+pixels),this.centerRowsCtrl.eViewport.scrollLeft-oldScrollPosition}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(comparator,position=null){const{rowModel}=this.beans,rowCount=rowModel.getRowCount();let indexToSelect=-1;for(let i=0;i<rowCount;i++){const node=rowModel.getRow(i);if(typeof comparator=="function"){if(node&&comparator(node)){indexToSelect=i;break}}else if(comparator===node||comparator===node.data){indexToSelect=i;break}}indexToSelect>=0&&this.ensureIndexVisible(indexToSelect,position)}ensureIndexVisible(index,position){if(_isDomLayout(this.gos,"print"))return;const{rowModel}=this.beans,rowCount=rowModel.getRowCount();if(typeof index!="number"||index<0||index>=rowCount){_warn(88,{index});return}const{frameworkOverrides,pageBounds,rowContainerHeight:heightScaler,rowRenderer}=this.beans;frameworkOverrides.wrapIncoming(()=>{var _a238;const gridBodyCtrl=this.ctrlsSvc.getGridBodyCtrl(),rowNode=rowModel.getRow(index);let rowGotShiftedDuringOperation,stickyHeightsChanged,attempt=0;this.invalidateVerticalScroll();do{const{stickyTopHeight,stickyBottomHeight}=gridBodyCtrl,startingRowTop=rowNode.rowTop,startingRowHeight=rowNode.rowHeight,paginationOffset=pageBounds.getPixelOffset(),rowTopPixel=rowNode.rowTop-paginationOffset,rowBottomPixel=rowTopPixel+rowNode.rowHeight,scrollPosition=this.getVScrollPosition(),heightOffset=heightScaler.divStretchOffset,vScrollTop=scrollPosition.top+heightOffset,vScrollBottom=scrollPosition.bottom+heightOffset,viewportHeight=vScrollBottom-vScrollTop,pxTop=heightScaler.getScrollPositionForPixel(rowTopPixel),pxBottom=heightScaler.getScrollPositionForPixel(rowBottomPixel-viewportHeight),pxMiddle=Math.min((pxTop+pxBottom)/2,rowTopPixel),rowAboveViewport=vScrollTop+stickyTopHeight>rowTopPixel,rowBelowViewport=vScrollBottom-stickyBottomHeight<rowBottomPixel;let newScrollPosition=null;position==="top"?newScrollPosition=pxTop-stickyTopHeight:position==="bottom"?newScrollPosition=pxBottom+stickyBottomHeight:position==="middle"?newScrollPosition=pxMiddle:rowAboveViewport?newScrollPosition=pxTop-stickyTopHeight:rowBelowViewport&&(newScrollPosition=pxBottom+stickyBottomHeight),newScrollPosition!==null&&(this.setVerticalScrollPosition(newScrollPosition),rowRenderer.redraw({afterScroll:!0})),rowGotShiftedDuringOperation=startingRowTop!==rowNode.rowTop||startingRowHeight!==rowNode.rowHeight,stickyHeightsChanged=stickyTopHeight!==gridBodyCtrl.stickyTopHeight||stickyBottomHeight!==gridBodyCtrl.stickyBottomHeight,attempt++}while((rowGotShiftedDuringOperation||stickyHeightsChanged)&&attempt<10);(_a238=this.animationFrameSvc)==null||_a238.flushAllFrames()})}ensureColumnVisible(key,position="auto"){const{colModel,frameworkOverrides}=this.beans,column=colModel.getCol(key);if(!column||column.isPinned()||!this.visibleCols.isColDisplayed(column))return;const newHorizontalScroll=this.getPositionedHorizontalScroll(column,position);frameworkOverrides.wrapIncoming(()=>{var _a238;newHorizontalScroll!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(newHorizontalScroll),this.centerRowsCtrl.onHorizontalViewportChanged(),(_a238=this.animationFrameSvc)==null||_a238.flushAllFrames()})}getPositionedHorizontalScroll(column,position){const{columnBeforeStart,columnAfterEnd}=this.isColumnOutsideViewport(column),viewportTooSmallForColumn=this.centerRowsCtrl.getCenterWidth()<column.getActualWidth(),viewportWidth=this.centerRowsCtrl.getCenterWidth(),isRtl=this.enableRtl;let alignColToStart=(isRtl?columnBeforeStart:columnAfterEnd)||viewportTooSmallForColumn,alignColToEnd=isRtl?columnAfterEnd:columnBeforeStart;position!=="auto"&&(alignColToStart=position==="start",alignColToEnd=position==="end");const isMiddle=position==="middle";if(alignColToStart||alignColToEnd||isMiddle){const{colLeft,colMiddle,colRight}=this.getColumnBounds(column);return isMiddle?colMiddle-viewportWidth/2:alignColToStart?isRtl?colRight:colLeft:isRtl?colLeft-viewportWidth:colRight-viewportWidth}return null}isColumnOutsideViewport(column){const{start:viewportStart,end:viewportEnd}=this.getViewportBounds(),{colLeft,colRight}=this.getColumnBounds(column),isRtl=this.enableRtl,columnBeforeStart=isRtl?viewportStart>colRight:viewportEnd<colRight,columnAfterEnd=isRtl?viewportEnd<colLeft:viewportStart>colLeft;return{columnBeforeStart,columnAfterEnd}}getColumnBounds(column){const isRtl=this.enableRtl,bodyWidth=this.visibleCols.bodyWidth,colWidth=column.getActualWidth(),colLeft=column.getLeft(),multiplier=isRtl?-1:1,colLeftPixel=isRtl?bodyWidth-colLeft:colLeft,colRightPixel=colLeftPixel+colWidth*multiplier,colMidPixel=colLeftPixel+colWidth/2*multiplier;return{colLeft:colLeftPixel,colMiddle:colMidPixel,colRight:colRightPixel}}getViewportBounds(){const viewportWidth=this.centerRowsCtrl.getCenterWidth(),scrollPosition=this.centerRowsCtrl.getCenterViewportScrollLeft(),viewportStartPixel=scrollPosition,viewportEndPixel=viewportWidth+scrollPosition;return{start:viewportStartPixel,end:viewportEndPixel,width:viewportWidth}}},__name(_a31,"GridBodyScrollFeature"),_a31),_a32,CenterWidthFeature=(_a32=class extends BeanStub{constructor(callback,addSpacer=!1){super(),this.callback=callback,this.addSpacer=addSpacer}postConstruct(){const listener=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",listener),this.addManagedEventListeners({columnContainerWidthChanged:listener,displayedColumnsChanged:listener,leftPinnedWidthChanged:listener}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:listener,scrollVisibilityChanged:listener,scrollbarWidthChanged:listener}),this.setWidth()}setWidth(){const printLayout=_isDomLayout(this.gos,"print"),{visibleCols,scrollVisibleSvc}=this.beans,centerWidth=visibleCols.bodyWidth,leftWidth=visibleCols.getColsLeftWidth(),rightWidth=visibleCols.getDisplayedColumnsRightWidth();let totalWidth;printLayout?totalWidth=centerWidth+leftWidth+rightWidth:(totalWidth=centerWidth,this.addSpacer&&(this.gos.get("enableRtl")?leftWidth:rightWidth)===0&&scrollVisibleSvc.verticalScrollShowing&&(totalWidth+=scrollVisibleSvc.getScrollbarWidth())),this.callback(totalWidth)}},__name(_a32,"CenterWidthFeature"),_a32),_a33,ViewportSizeFeature=(_a33=class extends BeanStub{constructor(centerContainerCtrl){super(),this.centerContainerCtrl=centerContainerCtrl}wireBeans(beans){this.scrollVisibleSvc=beans.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,p=>{this.gridBodyCtrl=p.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans,centerContainerCtrl,gridBodyCtrl}=this,listener=__name(()=>{_requestAnimationFrame(beans,()=>{this.onCenterViewportResized()})},"listener");centerContainerCtrl.registerViewportResizeListener(listener),gridBodyCtrl.registerBodyViewportResizeListener(listener)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols,colFlex}=this.beans;pinnedCols==null||pinnedCols.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const newWidth=this.centerContainerCtrl.getCenterWidth();newWidth!==this.centerWidth&&(this.centerWidth=newWidth,colFlex==null||colFlex.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const eBodyViewport=this.gridBodyCtrl.eBodyViewport,bodyHeight=_getInnerHeight(eBodyViewport);this.bodyHeight!==bodyHeight&&(this.bodyHeight=bodyHeight,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const params={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(params)}onHorizontalViewportChanged(){const scrollWidth=this.centerContainerCtrl.getCenterWidth(),scrollPosition=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(scrollWidth,scrollPosition)}},__name(_a33,"ViewportSizeFeature"),_a33);function processClassRules(expressionSvc,previousClassRules,classRules,params,onApplicableClass,onNotApplicableClass){if(classRules==null&&previousClassRules==null)return;const classesToApply={},classesToRemove={},forEachSingleClass=__name((className,callback)=>{className.split(" ").forEach(singleClass=>{singleClass.trim()!=""&&callback(singleClass)})},"forEachSingleClass");if(classRules){const classNames=Object.keys(classRules);for(let i=0;i<classNames.length;i++){const className=classNames[i],rule=classRules[className];let resultOfRule;typeof rule=="string"?resultOfRule=expressionSvc?expressionSvc.evaluate(rule,params):!0:typeof rule=="function"&&(resultOfRule=rule(params)),forEachSingleClass(className,singleClass=>{resultOfRule?classesToApply[singleClass]=!0:classesToRemove[singleClass]=!0})}}previousClassRules&&onNotApplicableClass&&Object.keys(previousClassRules).forEach(className=>forEachSingleClass(className,singleClass=>{classesToApply[singleClass]||(classesToRemove[singleClass]=!0)})),onNotApplicableClass&&Object.keys(classesToRemove).forEach(onNotApplicableClass),Object.keys(classesToApply).forEach(onApplicableClass)}__name(processClassRules,"processClassRules");function calculateRowLevel(rowNode){if(rowNode.group)return rowNode.level;const parent=rowNode.parent;return parent?parent.level+1:0}__name(calculateRowLevel,"calculateRowLevel");var _a34,RowStyleService=(_a34=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(classes,rowNode){const gos=this.gos,process=__name(rowCls=>{typeof rowCls=="string"?classes.push(rowCls):Array.isArray(rowCls)&&rowCls.forEach(e=>classes.push(e))},"process"),rowClass=gos.get("rowClass");rowClass&&process(rowClass);const rowClassFunc=gos.getCallback("getRowClass");if(rowClassFunc){const params={data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex},rowClassFuncResult=rowClassFunc(params);process(rowClassFuncResult)}}preProcessRowClassRules(classes,rowNode){this.processRowClassRules(rowNode,className=>{classes.push(className)},()=>{})}processRowClassRules(rowNode,onApplicableClass,onNotApplicableClass){const{gos,expressionSvc}=this.beans,rowClassParams=_addGridCommonParams(gos,{data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex});processClassRules(expressionSvc,void 0,gos.get("rowClassRules"),rowClassParams,onApplicableClass,onNotApplicableClass)}processStylesFromGridOptions(rowNode){const gos=this.gos,rowStyle=gos.get("rowStyle"),rowStyleFunc=gos.getCallback("getRowStyle");let rowStyleFuncResult;if(rowStyleFunc){const params={data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex};rowStyleFuncResult=rowStyleFunc(params)}if(rowStyleFuncResult||rowStyle)return Object.assign({},rowStyle,rowStyleFuncResult)}},__name(_a34,"RowStyleService"),_a34),instanceIdSequence3=0,DOM_DATA_KEY_ROW_CTRL="renderedRow",_a35,RowCtrl=(_a35=class extends BeanStub{constructor(rowNode,beans,animateIn,useAnimationFrameForCreate,printLayout){var _a238;super(),this.rowNode=rowNode,this.useAnimationFrameForCreate=useAnimationFrameForCreate,this.printLayout=printLayout,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=beans,this.gos=beans.gos,this.paginationPage=((_a238=beans.pagination)==null?void 0:_a238.getCurrentPage())??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=rowNode.id+"-"+instanceIdSequence3++,this.rowId=_escapeString(rowNode.id),this.initRowBusinessKey(),this.rowFocused=beans.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(animateIn),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const businessKey=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=_escapeString(businessKey)}updateGui(containerType,gui){containerType==="left"?this.leftGui=gui:containerType==="right"?this.rightGui=gui:containerType==="fullWidth"?this.fullWidthGui=gui:this.centerGui=gui}setComp(rowComp,element,containerType,compBean){var _a238;const{context,focusSvc}=this.beans;compBean=setupCompBean(this,context,compBean);const gui={rowComp,element,containerType,compBean};this.allRowGuis.push(gui),this.updateGui(containerType,gui),this.initialiseRowComp(gui);const rowNode=this.rowNode,isSsrmLoadingRow=this.rowType==="FullWidthLoading"||rowNode.stub,isIrmLoadingRow=!rowNode.data&&this.beans.rowModel.getType()==="infinite";!isSsrmLoadingRow&&!isIrmLoadingRow&&!rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const focusableElement=(_a238=this.fullWidthGui)==null?void 0:_a238.element;focusableElement&&!this.editing&&focusSvc.isRowFocused(rowNode.rowIndex,rowNode.rowPinned)&&focusSvc.shouldTakeFocus()&&setTimeout(()=>focusableElement.focus({preventScroll:!0}),0)}unsetComp(containerType){this.allRowGuis=this.allRowGuis.filter(rowGui=>rowGui.containerType!==containerType),this.updateGui(containerType,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(cached){const displayValue=cached?"none":"";this.allRowGuis.forEach(rg=>rg.element.style.display=displayValue)}initialiseRowComp(gui){const gos=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(gui),this.onRowHeightChanged(gui),this.updateRowIndexes(gui),this.setFocusedClasses(gui),this.setStylesFromGridOptions(!1,gui),_isRowSelection(gos)&&this.rowNode.selectable&&this.onRowSelected(gui),this.updateColumnLists(!this.useAnimationFrameForCreate);const comp=gui.rowComp;this.getInitialRowClasses(gui.containerType).forEach(name=>comp.addOrRemoveCssClass(name,!0)),this.executeSlideAndFadeAnimations(gui),this.rowNode.group&&_setAriaExpanded(gui.element,this.rowNode.expanded==!0),this.setRowCompRowId(comp),this.setRowCompRowBusinessKey(comp),_setDomData(gos,gui.element,DOM_DATA_KEY_ROW_CTRL,this),gui.compBean.addDestroyFunc(()=>_setDomData(gos,gui.element,DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,gui),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(gui),this.isFullWidth()&&this.setupFullWidth(gui),gos.get("rowDragEntireRow")&&this.addRowDraggerToRow(gui),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&gui.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(comp){this.businessKey!=null&&comp.setRowBusinessKey(this.businessKey)}setRowCompRowId(comp){const rowId=_escapeString(this.rowNode.id);this.rowId=rowId,rowId!=null&&comp.setRowId(rowId)}executeSlideAndFadeAnimations(gui){const{containerType}=gui;this.slideInAnimation[containerType]&&(_batchCall(()=>{this.onTopChanged()}),this.slideInAnimation[containerType]=!1),this.fadeInAnimation[containerType]&&(_batchCall(()=>{gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[containerType]=!1)}addRowDraggerToRow(gui){var _a238;const rowDragComp=(_a238=this.beans.rowDragSvc)==null?void 0:_a238.createRowDragCompForRow(this.rowNode,gui.element);if(!rowDragComp)return;const rowDragBean=this.createBean(rowDragComp,this.beans.context);this.rowDragComps.push(rowDragBean),gui.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(r=>r!==rowDragBean),this.destroyBean(rowDragBean,this.beans.context)})}setupFullWidth(gui){const pinned=this.getPinnedForContainer(gui.containerType),compDetails=this.createFullWidthCompDetails(gui.element,pinned);gui.rowComp.showFullWidth(compDetails)}getFullWidthCellRenderers(){var _a238,_b2;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(gui=>{var _a239;return(_a239=gui==null?void 0:gui.rowComp)==null?void 0:_a239.getFullWidthCellRenderer()}):[(_b2=(_a238=this.fullWidthGui)==null?void 0:_a238.rowComp)==null?void 0:_b2.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const func=this.gos.getCallback("processRowPostCreate");if(!func||!this.areAllContainersReady())return;const params={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};func(params)}areAllContainersReady(){const{leftGui,centerGui,rightGui,beans:{visibleCols}}=this,isLeftReady=!!leftGui||!visibleCols.isPinningLeft(),isCenterReady=!!centerGui,isRightReady=!!rightGui||!visibleCols.isPinningRight();return isLeftReady&&isCenterReady&&isRightReady}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const isFullWidthCellFunc=this.beans.gos.getCallback("isFullWidthRow");return isFullWidthCellFunc?isFullWidthCellFunc({rowNode:this.rowNode}):!1}setRowType(){const isStub=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),isFullWidthCell=this.isNodeFullWidthCell(),isDetailCell=this.gos.get("masterDetail")&&this.rowNode.detail,pivotMode=this.beans.colModel.isPivotMode(),isFullWidthGroup=!!this.rowNode.group&&!this.rowNode.footer&&_isGroupUseEntireRow(this.gos,pivotMode);isStub?this.rowType="FullWidthLoading":isDetailCell?this.rowType="FullWidthDetail":isFullWidthCell?this.rowType="FullWidth":isFullWidthGroup?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(suppressAnimationFrame=!1,useFlushSync=!1){if(this.isFullWidth())return;const{animationFrameSvc}=this.beans;if(!(animationFrameSvc!=null&&animationFrameSvc.active)||suppressAnimationFrame||this.printLayout){this.updateColumnListsImpl(useFlushSync);return}this.updateColumnListsPending||(animationFrameSvc.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(col){var _a238;if(!((_a238=this.beans.rowSpanSvc)!=null&&_a238.isCellSpanning(col,this.rowNode)))return new CellCtrl(col,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(cell){var _a238;return!((_a238=this.beans.rowSpanSvc)!=null&&_a238.isCellSpanning(cell.column,this.rowNode))}createCellCtrls(prev,cols,pinned=null){const res={list:[],map:{}},addCell=__name((colInstanceId,cellCtrl,index)=>{index!=null?res.list.splice(index,0,cellCtrl):res.list.push(cellCtrl),res.map[colInstanceId]=cellCtrl},"addCell"),colsFromPrev=[];for(const col of cols){const colInstanceId=col.getInstanceId();let cellCtrl=prev.map[colInstanceId];cellCtrl&&!this.isCorrectCtrlForSpan(cellCtrl)&&(cellCtrl.destroy(),cellCtrl=void 0),cellCtrl||(cellCtrl=this.getNewCellCtrl(col)),cellCtrl&&addCell(colInstanceId,cellCtrl)}for(const prevCellCtrl of prev.list){const colInstanceId=prevCellCtrl.column.getInstanceId();if(res.map[colInstanceId]!=null)continue;!this.isCellEligibleToBeRemoved(prevCellCtrl,pinned)?colsFromPrev.push([colInstanceId,prevCellCtrl]):prevCellCtrl.destroy()}if(colsFromPrev.length)for(const[colInstanceId,cellCtrl]of colsFromPrev){const index=res.list.findIndex(ctrl=>ctrl.column.getLeft()>cellCtrl.column.getLeft()),normalisedIndex=index===-1?void 0:Math.max(index-1,0);addCell(colInstanceId,cellCtrl,normalisedIndex)}const{focusSvc,visibleCols}=this.beans,focusedCell=focusSvc.getFocusedCell();if(focusedCell&&focusedCell.column.getPinned()==pinned){const focusedColInstanceId=focusedCell.column.getInstanceId();if(!res.map[focusedColInstanceId]&&visibleCols.allCols.includes(focusedCell.column)){const cellCtrl=this.createFocusedCellCtrl();if(cellCtrl){const index=res.list.findIndex(ctrl=>ctrl.column.getLeft()>cellCtrl.column.getLeft()),normalisedIndex=index===-1?void 0:Math.max(index-1,0);addCell(focusedColInstanceId,cellCtrl,normalisedIndex)}}}return res}createFocusedCellCtrl(){const{focusSvc,rowSpanSvc}=this.beans,focusedCell=focusSvc.getFocusedCell();if(!focusedCell)return;const focusedSpan=rowSpanSvc==null?void 0:rowSpanSvc.getCellSpan(focusedCell.column,this.rowNode);if(focusedSpan){if(focusedSpan.firstNode!==this.rowNode||!focusedSpan.doesSpanContain(focusedCell))return}else if(!focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(focusedCell.column)}updateColumnListsImpl(useFlushSync){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(useFlushSync)}setCellCtrls(useFlushSync){this.allRowGuis.forEach(item=>{const cellControls=this.getCellCtrlsForContainer(item.containerType);item.rowComp.setCellCtrls(cellControls,useFlushSync)})}getCellCtrlsForContainer(containerType){switch(containerType){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const colViewport=this.beans.colViewport,presentedColsService=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,presentedColsService.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const centerCols=colViewport.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,centerCols);const leftCols=presentedColsService.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,leftCols,"left");const rightCols=presentedColsService.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,rightCols,"right")}}isCellEligibleToBeRemoved(cellCtrl,nextContainerPinned){const{column}=cellCtrl;if(column.getPinned()!=nextContainerPinned||!this.isCorrectCtrlForSpan(cellCtrl))return!0;const{editing}=cellCtrl,{visibleCols}=this.beans,focused=cellCtrl.isCellFocused();return editing||focused?!(visibleCols.allCols.indexOf(column)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||_isDomLayout(this.gos,"print")}listenOnDomOrder(gui){const listener=__name(()=>{gui.rowComp.setDomOrder(this.getDomOrder())},"listener");gui.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],listener)}setAnimateFlags(animateIn){if(this.rowNode.sticky||!animateIn)return;const oldRowTopExists=_exists(this.rowNode.oldRowTop),{visibleCols}=this.beans,pinningLeft=visibleCols.isPinningLeft(),pinningRight=visibleCols.isPinningRight();if(oldRowTopExists){const{slideInAnimation}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){slideInAnimation.fullWidth=!0;return}slideInAnimation.center=!0,slideInAnimation.left=pinningLeft,slideInAnimation.right=pinningRight}else{const{fadeInAnimation}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){fadeInAnimation.fullWidth=!0;return}fadeInAnimation.center=!0,fadeInAnimation.left=pinningLeft,fadeInAnimation.right=pinningRight}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const tryRefresh=__name((gui,pinned)=>gui?gui.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(gui.element,pinned).params):!0,"tryRefresh"),fullWidthSuccess=tryRefresh(this.fullWidthGui,null),centerSuccess=tryRefresh(this.centerGui,null),leftSuccess=tryRefresh(this.leftGui,"left"),rightSuccess=tryRefresh(this.rightGui,"right");return fullWidthSuccess&&centerSuccess&&leftSuccess&&rightSuccess}addListeners(){var _a238;this.addManagedListeners(this.rowNode,{heightChanged:__name(()=>this.onRowHeightChanged(),"heightChanged"),rowSelected:__name(()=>this.onRowSelected(),"rowSelected"),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...((_a238=this.beans.expansionSvc)==null?void 0:_a238.getRowExpandedListeners(this))??{}}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventSvc,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:__name(()=>this.updateColumnLists(),"columnMoved")}),this.beans.rowSpanSvc&&this.addManagedListeners(this.beans.rowSpanSvc,{spannedCellsUpdated:__name(({pinned})=>{pinned&&!this.rowNode.rowPinned||this.updateColumnLists()},"spannedCellsUpdated")}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(gui=>{this.addRowDraggerToRow(gui)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:__name(()=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onRowIndexChanged())},"rowIndexChanged"),cellChanged:__name(event=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onCellChanged(event))},"cellChanged")})}onRowNodeDataChanged(event){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.refreshCell({suppressFlash:!event.update,newData:!event.update})),this.allRowGuis.forEach(gui=>{this.setRowCompRowId(gui.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(gui.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const highlighted=this.rowNode.highlighted;this.allRowGuis.forEach(gui=>{const aboveOn=highlighted==="Above",belowOn=highlighted==="Below";gui.rowComp.addOrRemoveCssClass("ag-row-highlight-above",aboveOn),gui.rowComp.addOrRemoveCssClass("ag-row-highlight-below",belowOn)})}postProcessRowDragging(){const dragging=this.rowNode.dragging;this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass("ag-row-dragging",dragging))}onDisplayedColumnsChanged(){var _a238;this.updateColumnLists(!0),(_a238=this.beans.rowAutoHeight)==null||_a238.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:_makeNull(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(keyboardEvent){const groupInfo=this.findFullWidthInfoForEvent(keyboardEvent);if(!groupInfo)return;const{rowGui,column}=groupInfo;if(!(rowGui.element===keyboardEvent.target))return;const node=this.rowNode,{focusSvc,navigation}=this.beans,lastFocusedCell=focusSvc.getFocusedCell(),cellPosition={rowIndex:node.rowIndex,rowPinned:node.rowPinned,column:(lastFocusedCell==null?void 0:lastFocusedCell.column)??column};navigation==null||navigation.navigateToNextCell(keyboardEvent,keyboardEvent.key,cellPosition,!0),keyboardEvent.preventDefault()}onTabKeyDown(keyboardEvent){var _a238;if(keyboardEvent.defaultPrevented||_isStopPropagationForAgGrid(keyboardEvent))return;const currentFullWidthComp=this.allRowGuis.find(c=>c.element.contains(keyboardEvent.target)),currentFullWidthContainer=currentFullWidthComp?currentFullWidthComp.element:null,isFullWidthContainerFocused=currentFullWidthContainer===keyboardEvent.target,activeEl=_getActiveDomElement(this.beans);let isDetailGridCellFocused=!1;currentFullWidthContainer&&activeEl&&(isDetailGridCellFocused=currentFullWidthContainer.contains(activeEl)&&activeEl.classList.contains("ag-cell"));let nextEl=null;!isFullWidthContainerFocused&&!isDetailGridCellFocused&&(nextEl=_findNextFocusableElement(this.beans,currentFullWidthContainer,!1,keyboardEvent.shiftKey)),(this.isFullWidth()&&isFullWidthContainerFocused||!nextEl)&&((_a238=this.beans.navigation)==null||_a238.onTabKeyDown(this,keyboardEvent))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var _a238;const displayedEl=(_a238=this.allRowGuis.find(el=>_isVisible(el.element)))==null?void 0:_a238.element;return displayedEl?displayedEl.getBoundingClientRect().top:0}onSuppressCellFocusChanged(suppressCellFocus){const tabIndex=this.isFullWidth()&&suppressCellFocus?void 0:-1;this.allRowGuis.forEach(gui=>{_addOrRemoveAttribute(gui.element,"tabindex",tabIndex)})}onFullWidthRowFocused(event){var _a238,_b2,_c;const node=this.rowNode,isFocused=event?this.isFullWidth()&&event.rowIndex===node.rowIndex&&event.rowPinned==node.rowPinned:!1;let element;if(this.fullWidthGui)element=this.fullWidthGui.element;else{const column=this.beans.colModel.getCol(event==null?void 0:event.column),pinned=column==null?void 0:column.pinned;pinned?element=pinned==="right"?(_a238=this.rightGui)==null?void 0:_a238.element:(_b2=this.leftGui)==null?void 0:_b2.element:element=(_c=this.centerGui)==null?void 0:_c.element}element&&(element.classList.toggle("ag-full-width-focus",isFocused),isFocused&&(event!=null&&event.forceBrowserFocus)&&element.focus({preventScroll:!0}))}recreateCell(cellCtrl){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,cellCtrl),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,cellCtrl),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,cellCtrl),cellCtrl.destroy(),this.updateColumnLists()}removeCellCtrl(prev,cellCtrlToRemove){const res={list:[],map:{}};return prev.list.forEach(cellCtrl=>{cellCtrl!==cellCtrlToRemove&&(res.list.push(cellCtrl),res.map[cellCtrl.column.getInstanceId()]=cellCtrl)}),res}onMouseEvent(eventName,mouseEvent){switch(eventName){case"dblclick":this.onRowDblClick(mouseEvent);break;case"click":this.onRowClick(mouseEvent);break;case"touchstart":case"mousedown":this.onRowMouseDown(mouseEvent);break}}createRowEvent(type,domEvent){const{rowNode}=this;return _addGridCommonParams(this.gos,{type,node:rowNode,data:rowNode.data,rowIndex:rowNode.rowIndex,rowPinned:rowNode.rowPinned,event:domEvent})}createRowEventWithSource(type,domEvent){const event=this.createRowEvent(type,domEvent);return event.source=this,event}onRowDblClick(mouseEvent){_isStopPropagationForAgGrid(mouseEvent)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",mouseEvent))}findFullWidthInfoForEvent(event){if(!event)return;const rowGui=this.findFullWidthRowGui(event.target),column=this.getColumnForFullWidth(rowGui);if(!(!rowGui||!column))return{rowGui,column}}findFullWidthRowGui(target){return this.allRowGuis.find(c=>c.element.contains(target))}getColumnForFullWidth(fullWidthRowGui){const{visibleCols}=this.beans;switch(fullWidthRowGui==null?void 0:fullWidthRowGui.containerType){case"center":return visibleCols.centerCols[0];case"left":return visibleCols.leftCols[0];case"right":return visibleCols.rightCols[0];default:return visibleCols.allCols[0]}}onRowMouseDown(mouseEvent){if(this.lastMouseDownOnDragger=_isElementChildOfClass(mouseEvent.target,"ag-row-drag",3),!this.isFullWidth())return;const node=this.rowNode,{rangeSvc,focusSvc}=this.beans;rangeSvc==null||rangeSvc.removeAllCellRanges();const groupInfo=this.findFullWidthInfoForEvent(mouseEvent);if(!groupInfo)return;const{rowGui,column}=groupInfo,element=rowGui.element,target=mouseEvent.target;let forceBrowserFocus=mouseEvent.defaultPrevented||_isBrowserSafari();element&&element.contains(target)&&_isFocusableFormField(target)&&(forceBrowserFocus=!1),focusSvc.setFocusedCell({rowIndex:node.rowIndex,column,rowPinned:node.rowPinned,forceBrowserFocus})}onRowClick(mouseEvent){if(_isStopPropagationForAgGrid(mouseEvent)||this.lastMouseDownOnDragger)return;const{eventSvc,selectionSvc}=this.beans;eventSvc.dispatchEvent(this.createRowEventWithSource("rowClicked",mouseEvent)),selectionSvc==null||selectionSvc.handleSelectionEvent(mouseEvent,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(eDetailGui){var _a238;this.rowType==="FullWidthDetail"&&((_a238=this.beans.masterDetailSvc)==null||_a238.setupDetailRowAutoHeight(this,eDetailGui))}createFullWidthCompDetails(eRow,pinned){const{gos,rowNode}=this,params=_addGridCommonParams(gos,{fullWidth:!0,data:rowNode.data,node:rowNode,value:rowNode.key,valueFormatted:rowNode.key,eGridCell:eRow,eParentOfValue:eRow,pinned,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:__name((rowDraggerElement,dragStartPixels,value,suppressVisibilityChange)=>this.addFullWidthRowDragging(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange),"registerRowDragger"),setTooltip:__name((value,shouldDisplayTooltip)=>{gos.assertModuleRegistered("Tooltip",3),this.refreshRowTooltip(value,shouldDisplayTooltip)},"setTooltip")}),compFactory=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return _getFullWidthDetailCellRendererDetails(compFactory,params);case"FullWidthGroup":return params.value=rowNode.groupValue,params.valueFormatted=rowNode.rowGroupColumn?this.beans.valueSvc.formatValue(rowNode.rowGroupColumn,rowNode,params.value):params.value,_getFullWidthGroupCellRendererDetails(compFactory,params);case"FullWidthLoading":return _getFullWidthLoadingCellRendererDetails(compFactory,params);default:return _getFullWidthCellRendererDetails(compFactory,params)}}refreshRowTooltip(value,shouldDisplayTooltip){var _a238;this.fullWidthGui&&(this.tooltipFeature=(_a238=this.beans.tooltipSvc)==null?void 0:_a238.refreshRowTooltip(this.tooltipFeature,this,value,shouldDisplayTooltip))}addFullWidthRowDragging(rowDraggerElement,dragStartPixels,value="",suppressVisibilityChange){const{rowDragSvc,context}=this.beans;if(!rowDragSvc||!this.isFullWidth())return;const rowDragComp=rowDragSvc.createRowDragComp(()=>value,this.rowNode,void 0,rowDraggerElement,dragStartPixels,suppressVisibilityChange);this.createBean(rowDragComp,context),this.addDestroyFunc(()=>{this.destroyBean(rowDragComp,context)})}onUiLevelChanged(){const newLevel=calculateRowLevel(this.rowNode);if(this.rowLevel!=newLevel){const classToAdd="ag-row-level-"+newLevel,classToRemove="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(gui=>{gui.rowComp.addOrRemoveCssClass(classToAdd,!0),gui.rowComp.addOrRemoveCssClass(classToRemove,!1)})}this.rowLevel=newLevel}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const newFirst=this.isFirstRowOnPage(),newLast=this.isLastRowOnPage();this.firstRowOnPage!==newFirst&&(this.firstRowOnPage=newFirst,this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass("ag-row-first",newFirst))),this.lastRowOnPage!==newLast&&(this.lastRowOnPage=newLast,this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass("ag-row-last",newLast)))}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var _a238;const cssClasses=[];(_a238=this.beans.rowStyleSvc)==null||_a238.processClassesFromGridOptions(cssClasses,this.rowNode),cssClasses.length&&cssClasses.forEach(classStr=>{this.allRowGuis.forEach(c=>c.rowComp.addOrRemoveCssClass(classStr,!0))})}postProcessRowClassRules(){var _a238;(_a238=this.beans.rowStyleSvc)==null||_a238.processRowClassRules(this.rowNode,className=>{this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass(className,!0))},className=>{this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass(className,!1))})}setStylesFromGridOptions(updateStyles,gui){updateStyles&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(gui,gui2=>gui2.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(rowContainerType){return rowContainerType==="left"||rowContainerType==="right"?rowContainerType:null}getInitialRowClasses(rowContainerType){var _a238;const pinned=this.getPinnedForContainer(rowContainerType),fullWidthRow=this.isFullWidth(),{rowNode,beans}=this,classes=[];classes.push("ag-row"),classes.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[rowContainerType]&&classes.push("ag-opacity-zero"),classes.push(rowNode.rowIndex%2===0?"ag-row-even":"ag-row-odd"),rowNode.isRowPinned()&&classes.push("ag-row-pinned"),rowNode.isSelected()&&classes.push("ag-row-selected"),rowNode.footer&&classes.push("ag-row-footer"),classes.push("ag-row-level-"+this.rowLevel),rowNode.stub&&classes.push("ag-row-loading"),fullWidthRow&&classes.push("ag-full-width-row"),(_a238=beans.expansionSvc)==null||_a238.addExpandedCss(classes,rowNode),rowNode.dragging&&classes.push("ag-row-dragging");const{rowStyleSvc}=beans;return rowStyleSvc&&(rowStyleSvc.processClassesFromGridOptions(classes,rowNode),rowStyleSvc.preProcessRowClassRules(classes,rowNode)),classes.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&classes.push("ag-row-first"),this.isLastRowOnPage()&&classes.push("ag-row-last"),fullWidthRow&&(pinned==="left"&&classes.push("ag-cell-last-left-pinned"),pinned==="right"&&classes.push("ag-cell-first-right-pinned")),classes}processStylesFromGridOptions(){var _a238;return((_a238=this.beans.rowStyleSvc)==null?void 0:_a238.processStylesFromGridOptions(this.rowNode))??this.emptyStyle}onRowSelected(gui){var _a238;(_a238=this.beans.selectionSvc)==null||_a238.onRowCtrlSelected(this,gui2=>{(gui2===this.centerGui||gui2===this.fullWidthGui)&&this.announceDescription()},gui)}announceDescription(){var _a238;(_a238=this.beans.selectionSvc)==null||_a238.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(eGui){if(!this.active)return;const{element,compBean}=eGui,{rowNode,beans,gos}=this;compBean.addManagedListeners(element,{mouseenter:__name(()=>rowNode.dispatchRowEvent("mouseEnter"),"mouseenter"),mouseleave:__name(()=>rowNode.dispatchRowEvent("mouseLeave"),"mouseleave")}),compBean.addManagedListeners(rowNode,{mouseEnter:__name(()=>{var _a238;!((_a238=beans.dragSvc)!=null&&_a238.dragging)&&!gos.get("suppressRowHoverHighlight")&&(element.classList.add("ag-row-hover"),rowNode.setHovered(!0))},"mouseEnter"),mouseLeave:__name(()=>{this.resetHoveredStatus(element)},"mouseLeave")})}resetHoveredStatus(el){const elements=el?[el]:this.allRowGuis.map(gui=>gui.element);for(const element of elements)element.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(rowTop){const range=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),minPixel=this.applyPaginationOffset(range.top,!0)-100,maxPixel=this.applyPaginationOffset(range.bottom,!0)+100;return Math.min(Math.max(minPixel,rowTop),maxPixel)}forEachGui(gui,callback){gui?callback(gui):this.allRowGuis.forEach(callback)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(gui){if(this.rowNode.rowHeight==null)return;const rowHeight=this.rowNode.rowHeight,defaultRowHeight=this.beans.environment.getDefaultRowHeight(),heightFromFunc=_isGetRowHeightFunction(this.gos)?_getRowHeightForNode(this.beans,this.rowNode).height:void 0,lineHeight=heightFromFunc?`${Math.min(defaultRowHeight,heightFromFunc)-2}px`:void 0;this.forEachGui(gui,gui2=>{gui2.element.style.height=`${rowHeight}px`,lineHeight&&gui2.element.style.setProperty("--ag-line-height",lineHeight)})}destroyFirstPass(suppressAnimation=!1){var _a238;this.active=!1;const{rowNode}=this;if(!suppressAnimation&&_isAnimateRows(this.gos)&&!rowNode.sticky)if(rowNode.rowTop!=null){const rowTop=this.roundRowTopToBounds(rowNode.rowTop);this.setRowTop(rowTop)}else this.allRowGuis.forEach(gui=>gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));(_a238=this.fullWidthGui)!=null&&_a238.element.contains(_getActiveDomElement(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),rowNode.setHovered(!1);const event=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(event),this.beans.eventSvc.dispatchEvent(event),super.destroy()}destroySecondPass(){var _a238;this.allRowGuis.length=0,(_a238=this.beans.editSvc)==null||_a238.stopRowEditing(this);const destroyCellCtrls=__name(ctrls=>(ctrls.list.forEach(c=>c.destroy()),{list:[],map:{}}),"destroyCellCtrls");this.centerCellCtrls=destroyCellCtrls(this.centerCellCtrls),this.leftCellCtrls=destroyCellCtrls(this.leftCellCtrls),this.rightCellCtrls=destroyCellCtrls(this.rightCellCtrls)}setFocusedClasses(gui){this.forEachGui(gui,gui2=>{gui2.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),gui2.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc,editSvc}=this.beans,rowFocused=focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);rowFocused!==this.rowFocused&&(this.rowFocused=rowFocused,this.setFocusedClasses()),!rowFocused&&this.editing&&(editSvc==null||editSvc.stopRowEditing(this,!1))}onPaginationChanged(){var _a238;const currentPage=((_a238=this.beans.pagination)==null?void 0:_a238.getCurrentPage())??0;this.paginationPage!==currentPage&&(this.paginationPage=currentPage,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(topPx,reverse=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return topPx;const pixelOffset=this.beans.pageBounds.getPixelOffset();return topPx+pixelOffset*(reverse?1:-1)}setRowTop(pixels){if(!this.printLayout&&_exists(pixels)){const afterPaginationPixels=this.applyPaginationOffset(pixels),topPx=`${this.rowNode.isRowPinned()||this.rowNode.sticky?afterPaginationPixels:this.beans.rowContainerHeight.getRealPixelPosition(afterPaginationPixels)}px`;this.setRowTopStyle(topPx)}}getInitialRowTop(rowContainerType){return this.suppressRowTransform?this.getInitialRowTopShared(rowContainerType):void 0}getInitialTransform(rowContainerType){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(rowContainerType)})`}getInitialRowTopShared(rowContainerType){if(this.printLayout)return"";const rowNode=this.rowNode;let rowTop;if(rowNode.sticky)rowTop=rowNode.stickyRowTop;else{const pixels=this.slideInAnimation[rowContainerType]?this.roundRowTopToBounds(rowNode.oldRowTop):rowNode.rowTop,afterPaginationPixels=this.applyPaginationOffset(pixels);rowTop=rowNode.isRowPinned()?afterPaginationPixels:this.beans.rowContainerHeight.getRealPixelPosition(afterPaginationPixels)}return rowTop+"px"}setRowTopStyle(topPx){this.allRowGuis.forEach(gui=>this.suppressRowTransform?gui.rowComp.setTop(topPx):gui.rowComp.setTransform(`translateY(${topPx})`))}getCellCtrl(column,skipColSpanSearch=!1){let res=null;return this.getAllCellCtrls().forEach(cellCtrl=>{cellCtrl.column==column&&(res=cellCtrl)}),res!=null||skipColSpanSearch||this.getAllCellCtrls().forEach(cellCtrl=>{cellCtrl.getColSpanningList().indexOf(column)>=0&&(res=cellCtrl)}),res}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(gui){var _a238,_b2;const rowIndexStr=this.rowNode.getRowIndexString();if(rowIndexStr===null)return;const headerRowCount=(((_a238=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:_a238.getRowCount())??0)+(((_b2=this.beans.filterManager)==null?void 0:_b2.getHeaderRowCount())??0),rowIsEven=this.rowNode.rowIndex%2===0,ariaRowIndex=headerRowCount+this.rowNode.rowIndex+1;this.forEachGui(gui,c=>{c.rowComp.setRowIndex(rowIndexStr),c.rowComp.addOrRemoveCssClass("ag-row-even",rowIsEven),c.rowComp.addOrRemoveCssClass("ag-row-odd",!rowIsEven),_setAriaRowIndex(c.element,ariaRowIndex)})}},__name(_a35,"RowCtrl"),_a35);function _isEventFromPrintableCharacter(event){var _a238;return event.altKey||event.ctrlKey||event.metaKey?!1:((_a238=event.key)==null?void 0:_a238.length)===1}__name(_isEventFromPrintableCharacter,"_isEventFromPrintableCharacter");function _isUserSuppressingKeyboardEvent(gos,keyboardEvent,rowNode,column,editing){const colDefFunc=column?column.getColDef().suppressKeyboardEvent:void 0;if(!colDefFunc)return!1;const params=_addGridCommonParams(gos,{event:keyboardEvent,editing,column,node:rowNode,data:rowNode.data,colDef:column.getColDef()});return!!(colDefFunc&&colDefFunc(params))}__name(_isUserSuppressingKeyboardEvent,"_isUserSuppressingKeyboardEvent");function _selectAllCells(beans){const{pinnedRowModel,rowModel}=beans,[isEmptyPinnedTop,isEmptyPinnedBottom]=[(pinnedRowModel==null?void 0:pinnedRowModel.isEmpty("top"))??!0,(pinnedRowModel==null?void 0:pinnedRowModel.isEmpty("bottom"))??!0],floatingStart=isEmptyPinnedTop?null:"top";let floatingEnd,rowEnd;isEmptyPinnedBottom?(floatingEnd=null,rowEnd=rowModel.getRowCount()-1):(floatingEnd="bottom",rowEnd=(pinnedRowModel==null?void 0:pinnedRowModel.getPinnedBottomRowCount())??-1);const{visibleCols,rangeSvc}=beans,allDisplayedColumns=visibleCols.allCols;!rangeSvc||!(allDisplayedColumns!=null&&allDisplayedColumns.length)||rangeSvc.setCellRange({rowStartIndex:0,rowStartPinned:floatingStart,rowEndIndex:rowEnd,rowEndPinned:floatingEnd})}__name(_selectAllCells,"_selectAllCells");var A_KEYCODE=65,C_KEYCODE=67,V_KEYCODE=86,D_KEYCODE=68,Z_KEYCODE=90,Y_KEYCODE=89;function _normaliseQwertyAzerty(keyboardEvent){const{keyCode}=keyboardEvent;let code;switch(keyCode){case A_KEYCODE:code=KeyCode.A;break;case C_KEYCODE:code=KeyCode.C;break;case V_KEYCODE:code=KeyCode.V;break;case D_KEYCODE:code=KeyCode.D;break;case Z_KEYCODE:code=KeyCode.Z;break;case Y_KEYCODE:code=KeyCode.Y;break;default:code=keyboardEvent.code}return code}__name(_normaliseQwertyAzerty,"_normaliseQwertyAzerty");var _a36,RowContainerEventsFeature=(_a36=class extends BeanStub{constructor(element){super(),this.element=element}postConstruct(){var _a238;this.addKeyboardListeners(),this.addMouseListeners(),(_a238=this.beans.touchSvc)==null||_a238.mockRowContextMenu(this)}addKeyboardListeners(){const eventName="keydown",listener=this.processKeyboardEvent.bind(this,eventName);this.addManagedElementListeners(this.element,{[eventName]:listener})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",_isEventSupported("touchstart")?"touchstart":"mousedown"].forEach(eventName=>{const listener=this.processMouseEvent.bind(this,eventName);this.addManagedElementListeners(this.element,{[eventName]:listener})})}processMouseEvent(eventName,mouseEvent){var _a238;if(!_isEventFromThisGrid(this.gos,mouseEvent)||_isStopPropagationForAgGrid(mouseEvent))return;const{cellCtrl,rowCtrl}=this.getControlsForEventTarget(mouseEvent.target);eventName==="contextmenu"?(cellCtrl!=null&&cellCtrl.column&&cellCtrl.dispatchCellContextMenuEvent(mouseEvent),(_a238=this.beans.contextMenuSvc)==null||_a238.handleContextMenuMouseEvent(mouseEvent,void 0,rowCtrl,cellCtrl)):(cellCtrl&&cellCtrl.onMouseEvent(eventName,mouseEvent),rowCtrl&&rowCtrl.onMouseEvent(eventName,mouseEvent))}getControlsForEventTarget(target){const{gos}=this;return{cellCtrl:_getCellCtrlForEventTarget(gos,target),rowCtrl:_getCtrlForEventTarget(gos,target,DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(eventName,keyboardEvent){const{cellCtrl,rowCtrl}=this.getControlsForEventTarget(keyboardEvent.target);keyboardEvent.defaultPrevented||(cellCtrl?this.processCellKeyboardEvent(cellCtrl,eventName,keyboardEvent):rowCtrl&&rowCtrl.isFullWidth()&&this.processFullWidthRowKeyboardEvent(rowCtrl,eventName,keyboardEvent))}processCellKeyboardEvent(cellCtrl,eventName,keyboardEvent){var _a238;const{rowNode,column,editing}=cellCtrl;!_isUserSuppressingKeyboardEvent(this.gos,keyboardEvent,rowNode,column,editing)&&eventName==="keydown"&&(!editing&&((_a238=this.beans.navigation)!=null&&_a238.handlePageScrollingKey(keyboardEvent))||cellCtrl.onKeyDown(keyboardEvent),this.doGridOperations(keyboardEvent,cellCtrl.editing),_isEventFromPrintableCharacter(keyboardEvent)&&cellCtrl.processCharacter(keyboardEvent)),eventName==="keydown"&&this.eventSvc.dispatchEvent(cellCtrl.createEvent(keyboardEvent,"cellKeyDown"))}processFullWidthRowKeyboardEvent(rowCtrl,eventName,keyboardEvent){const{rowNode}=rowCtrl,{focusSvc,navigation}=this.beans,focusedCell=focusSvc.getFocusedCell(),column=focusedCell&&focusedCell.column;if(!_isUserSuppressingKeyboardEvent(this.gos,keyboardEvent,rowNode,column,!1)){const key=keyboardEvent.key;if(eventName==="keydown")switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:navigation==null||navigation.handlePageScrollingKey(keyboardEvent,!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case KeyCode.UP:case KeyCode.DOWN:rowCtrl.onKeyboardNavigate(keyboardEvent);break;case KeyCode.TAB:rowCtrl.onTabKeyDown(keyboardEvent);break}}eventName==="keydown"&&this.eventSvc.dispatchEvent(rowCtrl.createRowEvent("cellKeyDown",keyboardEvent))}doGridOperations(keyboardEvent,editing){if(!keyboardEvent.ctrlKey&&!keyboardEvent.metaKey||editing||!_isEventFromThisGrid(this.gos,keyboardEvent))return;const keyCode=_normaliseQwertyAzerty(keyboardEvent),{clipboardSvc,undoRedo}=this.beans;if(keyCode===KeyCode.A)return this.onCtrlAndA(keyboardEvent);if(keyCode===KeyCode.C)return this.onCtrlAndC(clipboardSvc,keyboardEvent);if(keyCode===KeyCode.D)return this.onCtrlAndD(clipboardSvc,keyboardEvent);if(keyCode===KeyCode.V)return this.onCtrlAndV(clipboardSvc,keyboardEvent);if(keyCode===KeyCode.X)return this.onCtrlAndX(clipboardSvc,keyboardEvent);if(keyCode===KeyCode.Y)return this.onCtrlAndY(undoRedo);if(keyCode===KeyCode.Z)return this.onCtrlAndZ(undoRedo,keyboardEvent)}onCtrlAndA(event){const{beans:{rowModel,rangeSvc,selectionSvc},gos}=this;rangeSvc&&_isCellSelectionEnabled(gos)&&rowModel.isRowsToRender()?_selectAllCells(this.beans):selectionSvc&&(selectionSvc==null||selectionSvc.selectAllRowNodes({source:"keyboardSelectAll",selectAll:_getSelectAll(gos)})),event.preventDefault()}onCtrlAndC(clipboardSvc,event){if(!clipboardSvc||this.gos.get("enableCellTextSelection"))return;const{cellCtrl,rowCtrl}=this.getControlsForEventTarget(event.target);cellCtrl!=null&&cellCtrl.editing||rowCtrl!=null&&rowCtrl.editing||(event.preventDefault(),clipboardSvc.copyToClipboard())}onCtrlAndX(clipboardSvc,event){if(!clipboardSvc||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl,rowCtrl}=this.getControlsForEventTarget(event.target);cellCtrl!=null&&cellCtrl.editing||rowCtrl!=null&&rowCtrl.editing||(event.preventDefault(),clipboardSvc.cutToClipboard(void 0,"ui"))}onCtrlAndV(clipboardSvc,event){const{cellCtrl,rowCtrl}=this.getControlsForEventTarget(event.target);cellCtrl!=null&&cellCtrl.editing||rowCtrl!=null&&rowCtrl.editing||clipboardSvc&&!this.gos.get("suppressClipboardPaste")&&clipboardSvc.pasteFromClipboard()}onCtrlAndD(clipboardSvc,event){clipboardSvc&&!this.gos.get("suppressClipboardPaste")&&clipboardSvc.copyRangeDown(),event.preventDefault()}onCtrlAndZ(undoRedo,event){!this.gos.get("undoRedoCellEditing")||!undoRedo||(event.preventDefault(),event.shiftKey?undoRedo.redo("ui"):undoRedo.undo("ui"))}onCtrlAndY(undoRedo){undoRedo==null||undoRedo.redo("ui")}},__name(_a36,"RowContainerEventsFeature"),_a36),_a37,SetHeightFeature=(_a37=class extends BeanStub{constructor(eContainer,eViewport){super(),this.eContainer=eContainer,this.eViewport=eViewport}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(maxDivHeightScaler){const height=maxDivHeightScaler.uiContainerHeight,heightString=height!=null?`${height}px`:"";this.eContainer.style.height=heightString,this.eViewport&&(this.eViewport.style.height=heightString)}},__name(_a37,"SetHeightFeature"),_a37),getTopRowCtrls=__name(r=>r.topRowCtrls,"getTopRowCtrls"),getStickyTopRowCtrls=__name(r=>r.getStickyTopRowCtrls(),"getStickyTopRowCtrls"),getStickyBottomRowCtrls=__name(r=>r.getStickyBottomRowCtrls(),"getStickyBottomRowCtrls"),getBottomRowCtrls=__name(r=>r.bottomRowCtrls,"getBottomRowCtrls"),getCentreRowCtrls=__name(r=>r.allRowCtrls,"getCentreRowCtrls"),getSpannedTopRowCtrls=__name(r=>r.getCtrls("top"),"getSpannedTopRowCtrls"),getSpannedCenterRowCtrls=__name(r=>r.getCtrls("center"),"getSpannedCenterRowCtrls"),getSpannedBottomRowCtrls=__name(r=>r.getCtrls("bottom"),"getSpannedBottomRowCtrls"),ContainerCssClasses={center:{type:"center",name:"center-cols",getRowCtrls:getCentreRowCtrls,getSpannedRowCtrls:getSpannedCenterRowCtrls},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:getCentreRowCtrls,getSpannedRowCtrls:getSpannedCenterRowCtrls},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:getCentreRowCtrls,getSpannedRowCtrls:getSpannedCenterRowCtrls},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:getCentreRowCtrls},topCenter:{type:"center",name:"floating-top",getRowCtrls:getTopRowCtrls,getSpannedRowCtrls:getSpannedTopRowCtrls},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:getTopRowCtrls,getSpannedRowCtrls:getSpannedTopRowCtrls},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:getTopRowCtrls,getSpannedRowCtrls:getSpannedTopRowCtrls},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:getTopRowCtrls},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:getStickyTopRowCtrls},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:getStickyTopRowCtrls},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:getStickyTopRowCtrls},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:getStickyTopRowCtrls},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:getStickyBottomRowCtrls},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:getStickyBottomRowCtrls},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:getStickyBottomRowCtrls},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:getStickyBottomRowCtrls},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:getBottomRowCtrls,getSpannedRowCtrls:getSpannedBottomRowCtrls},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:getBottomRowCtrls,getSpannedRowCtrls:getSpannedBottomRowCtrls},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:getBottomRowCtrls,getSpannedRowCtrls:getSpannedBottomRowCtrls},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:getBottomRowCtrls}};function _getRowViewportClass(name){return`ag-${_getRowContainerOptions(name).name}-viewport`}__name(_getRowViewportClass,"_getRowViewportClass");function _getRowContainerClass(name){const options=_getRowContainerOptions(name);return options.container??`ag-${options.name}-container`}__name(_getRowContainerClass,"_getRowContainerClass");function _getRowSpanContainerClass(name){return`ag-${_getRowContainerOptions(name).name}-spanned-cells-container`}__name(_getRowSpanContainerClass,"_getRowSpanContainerClass");function _getRowContainerOptions(name){return ContainerCssClasses[name]}__name(_getRowContainerOptions,"_getRowContainerOptions");var allTopNoFW=["topCenter","topLeft","topRight"],allBottomNoFW=["bottomCenter","bottomLeft","bottomRight"],allMiddleNoFW=["center","left","right"],allMiddle=["center","left","right","fullWidth"],allCenter=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],allLeft=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],allRight=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],allStickyTopNoFW=["stickyTopCenter","stickyTopLeft","stickyTopRight"],allStickyBottomNoFW=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],allStickyContainers=[...allStickyTopNoFW,"stickyTopFullWidth",...allStickyBottomNoFW,"stickyBottomFullWidth"],allNoFW=[...allTopNoFW,...allBottomNoFW,...allMiddleNoFW,...allStickyTopNoFW,...allStickyBottomNoFW],_a38,RowContainerCtrl=(_a38=class extends BeanStub{constructor(name){super(),this.name=name,this.visible=!0,this.EMPTY_CTRLS=[],this.options=_getRowContainerOptions(name)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new ViewportSizeFeature(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(event){this.comp.setOffsetTop(`${event.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(names,callback){names.indexOf(this.name)>=0&&callback()}setComp(view,eContainer,eSpannedContainer,eViewport){this.comp=view,this.eContainer=eContainer,this.eSpannedContainer=eSpannedContainer,this.eViewport=eViewport,this.createManagedBean(new RowContainerEventsFeature(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols,rangeSvc}=this.beans,pinnedWidthChanged=__name(()=>this.onPinnedWidthChanged(),"pinnedWidthChanged");this.forContainers(allLeft,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(pinnedCols==null?void 0:pinnedCols.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:pinnedWidthChanged})}),this.forContainers(allRight,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(pinnedCols==null?void 0:pinnedCols.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:pinnedWidthChanged})}),this.forContainers(allMiddle,()=>this.createManagedBean(new SetHeightFeature(this.eContainer,this.name==="center"?eViewport:void 0))),rangeSvc&&this.forContainers(allNoFW,()=>this.createManagedBean(rangeSvc.createDragListenerFeature(this.eContainer))),this.forContainers(allCenter,()=>this.createManagedBean(new CenterWidthFeature(width=>this.comp.setContainerWidth(`${width}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(fn){this.addManagedElementListeners(this.eViewport,{scroll:fn})}addListeners(){const{spannedRowRenderer,gos}=this.beans;this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsChanged.bind(this),displayedRowsChanged:__name(params=>this.onDisplayedRowsChanged(params.afterScroll),"displayedRowsChanged")}),this.onDisplayedColumnsChanged(),this.onDisplayedRowsChanged(),spannedRowRenderer&&this.options.getSpannedRowCtrls&&gos.get("enableCellSpan")&&this.addManagedListeners(spannedRowRenderer,{spannedRowsUpdated:__name(()=>{const spannedCtrls=this.options.getSpannedRowCtrls(spannedRowRenderer);spannedCtrls&&this.comp.setSpannedRowCtrls(spannedCtrls,!1)},"spannedRowsUpdated")})}listenOnDomOrder(){if(allStickyContainers.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const listener=__name(()=>{const isEnsureDomOrder=this.gos.get("ensureDomOrder"),isPrintLayout=_isDomLayout(this.gos,"print");this.comp.setDomOrder(isEnsureDomOrder||isPrintLayout)},"listener");this.addManagedPropertyListener("domLayout",listener),listener()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc}=this.beans;if(!dragSvc)return;const preventScroll=__name(e=>{dragSvc.dragging&&e.cancelable&&e.preventDefault()},"preventScroll");this.eContainer.addEventListener("touchmove",preventScroll,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",preventScroll))}onHorizontalViewportChanged(afterScroll=!1){const scrollWidth=this.getCenterWidth(),scrollPosition=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(scrollWidth,scrollPosition,afterScroll)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return _getInnerWidth(this.eViewport)}getCenterViewportScrollLeft(){return _getScrollLeft(this.eViewport,this.enableRtl)}registerViewportResizeListener(listener){const unsubscribeFromResize=_observeResize(this.beans,this.eViewport,listener);this.addDestroyFunc(()=>unsubscribeFromResize())}isViewportInTheDOMTree(){return _isInDOM(this.eViewport)}getViewportScrollLeft(){return _getScrollLeft(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||_isHorizontalScrollShowing(this.eViewport)}setHorizontalScroll(offset){this.comp.setHorizontalScroll(offset)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(value){_setScrollLeft(this.eViewport,value,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const visible=this.isContainerVisible();this.visible!=visible&&(this.visible=visible,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(afterScroll=!1){const rows=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||rows.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const printLayout=_isDomLayout(this.gos,"print"),embedFW=this.gos.get("embedFullWidthRows")||printLayout,rowsThisContainer=rows.filter(rowCtrl=>{const fullWidthRow=rowCtrl.isFullWidth();return this.options.fullWidth?!embedFW&&fullWidthRow:embedFW||!fullWidthRow});this.comp.setRowCtrls({rowCtrls:rowsThisContainer,useFlushSync:afterScroll})}},__name(_a38,"RowContainerCtrl"),_a38),CSS_CLASS_FORCE_VERTICAL_SCROLL="ag-force-vertical-scroll",CSS_CLASS_CELL_SELECTABLE="ag-selectable",CSS_CLASS_COLUMN_MOVING="ag-column-moving",_a39,GridBodyCtrl=(_a39=class extends BeanStub{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(beans){this.ctrlsSvc=beans.ctrlsSvc,this.colModel=beans.colModel,this.scrollVisibleSvc=beans.scrollVisibleSvc,this.pinnedRowModel=beans.pinnedRowModel,this.filterManager=beans.filterManager,this.rowGroupColsSvc=beans.rowGroupColsSvc}setComp(comp,eGridBody,eBodyViewport,eTop,eBottom,eStickyTop,eStickyBottom){var _a238,_b2;this.comp=comp,this.eGridBody=eGridBody,this.eBodyViewport=eBodyViewport,this.eTop=eTop,this.eBottom=eBottom,this.eStickyTop=eStickyTop,this.eStickyBottom=eStickyBottom,this.eCenterColsViewport=eBodyViewport.querySelector(`.${_getRowViewportClass("center")}`),this.eFullWidthContainer=eBodyViewport.querySelector(`.${_getRowContainerClass("fullWidth")}`),this.eStickyTopFullWidthContainer=eStickyTop.querySelector(`.${_getRowContainerClass("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=eStickyBottom.querySelector(`.${_getRowContainerClass("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",props=>this.setCellTextSelection(props.currentValue)),this.createManagedBean(new LayoutFeature(this.comp)),this.scrollFeature=this.createManagedBean(new GridBodyScrollFeature(this.eBodyViewport)),(_a238=this.beans.rowDragSvc)==null||_a238.setupRowDrag(this.eBodyViewport,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([eTop,eBodyViewport,eBottom,eStickyTop,eStickyBottom]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(_b2=this.filterManager)==null||_b2.setupAdvFilterHeaderComp(eTop),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const setFloatingHeights=this.setFloatingHeights.bind(this),setGridRootRole=this.setGridRootRole.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:setFloatingHeights,pinnedHeightChanged:setFloatingHeights,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:setGridRootRole,columnPivotChanged:setGridRootRole}),this.addManagedPropertyListener("treeData",setGridRootRole)}onGridColumnsChanged(){const columns=this.beans.colModel.getCols();this.comp.setColumnCount(columns.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc}=this,visible=scrollVisibleSvc.verticalScrollShowing;this.setVerticalScrollPaddingVisible(visible),this.setStickyWidth(visible),this.setStickyBottomOffsetBottom();const scrollbarWidth=visible&&scrollVisibleSvc.getScrollbarWidth()||0,pad=_isInvisibleScrollbar()?16:0,width=`calc(100% + ${scrollbarWidth+pad}px)`;_requestAnimationFrame(this.beans,()=>this.comp.setBodyViewportWidth(width)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc,colModel}=this;let isTreeGrid=this.gos.get("treeData");if(!isTreeGrid){const isPivotActive=colModel.isPivotMode();isTreeGrid=(rowGroupColsSvc?rowGroupColsSvc.columns.length:0)>=(isPivotActive?2:1)}this.comp.setGridRootRole(isTreeGrid?"treegrid":"grid")}addFocusListeners(elements){elements.forEach(element=>{this.addManagedElementListeners(element,{focusin:__name(e=>{const{target}=e,isFocusedElementNested=_isElementChildOfClass(target,"ag-root",element);element.classList.toggle("ag-has-focus",!isFocusedElementNested)},"focusin"),focusout:__name(e=>{const{target,relatedTarget}=e,gridContainRelatedTarget=element.contains(relatedTarget),isNestedRelatedTarget=_isElementChildOfClass(relatedTarget,"ag-root",element);_isElementChildOfClass(target,"ag-root",element)||(!gridContainRelatedTarget||isNestedRelatedTarget)&&element.classList.remove("ag-has-focus")},"focusout")})})}setColumnMovingCss(moving){this.comp.setColumnMovingCss(CSS_CLASS_COLUMN_MOVING,moving)}setCellTextSelection(selectable=!1){this.comp.setCellSelectableCss(CSS_CLASS_CELL_SELECTABLE,selectable)}updateScrollingClasses(){const{eGridBody:{classList},scrollVisibleSvc}=this;classList.toggle("ag-body-vertical-content-no-gap",!scrollVisibleSvc.verticalScrollGap),classList.toggle("ag-body-horizontal-content-no-gap",!scrollVisibleSvc.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:__name(event=>{if(event.target instanceof HTMLImageElement)return event.preventDefault(),!1},"dragstart")})}addStopEditingWhenGridLosesFocus(){var _a238;(_a238=this.beans.editSvc)==null||_a238.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var _a238,_b2;const headerCount=(((_a238=this.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:_a238.getRowCount())??0)+(((_b2=this.filterManager)==null?void 0:_b2.getHeaderRowCount())??0),{rowModel}=this.beans,rowCount=rowModel.isLastRowIndexKnown()?rowModel.getRowCount():-1,total=rowCount===-1?-1:headerCount+rowCount;this.comp.setRowCount(total)}registerBodyViewportResizeListener(listener){this.comp.registerBodyViewportResizeListener(listener)}setVerticalScrollPaddingVisible(visible){const overflowY=visible?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(overflowY)}isVerticalScrollShowing(){const show=this.gos.get("alwaysShowVerticalScroll"),cssClass=show?CSS_CLASS_FORCE_VERTICAL_SCROLL:null,allowVerticalScroll=_isDomLayout(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(cssClass,show),show||allowVerticalScroll&&_isVerticalScrollShowing(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight,environment}=this.beans;let initialSizeMeasurementComplete=environment.sizesMeasured;const updateAnimationClass=__name(()=>{const animateRows=initialSizeMeasurementComplete&&_isAnimateRows(this.gos)&&!rowContainerHeight.stretching,animateRowsCssClass=animateRows?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(animateRowsCssClass,animateRows)},"updateAnimationClass");updateAnimationClass(),this.addManagedEventListeners({heightScaleChanged:updateAnimationClass}),this.addManagedPropertyListener("animateRows",updateAnimationClass),this.addManagedEventListeners({gridStylesChanged:__name(()=>{!initialSizeMeasurementComplete&&environment.sizesMeasured&&(initialSizeMeasurementComplete=!0,updateAnimationClass())},"gridStylesChanged")})}addBodyViewportListener(){const{popupSvc,touchSvc}=this.beans,listener=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:listener}),touchSvc==null||touchSvc.mockBodyContextMenu(this,listener),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this,popupSvc)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:__name(e=>this.onFullWidthContainerWheel(e),"wheel")})}onFullWidthContainerWheel(e){const{deltaX,deltaY,shiftKey}=e;(shiftKey||Math.abs(deltaX)>Math.abs(deltaY))&&_isEventFromThisGrid(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX,deltaY,shiftKey}=e,isHorizontalScroll=shiftKey||Math.abs(deltaX)>Math.abs(deltaY),target=e.target;isHorizontalScroll?(this.eStickyTopFullWidthContainer.contains(target)||this.eStickyBottomFullWidthContainer.contains(target))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(deltaY))}scrollGridBodyToMatchEvent(e){const{deltaX,deltaY}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:deltaX||deltaY})}onBodyViewportContextMenu(mouseEvent,touch,touchEvent){var _a238;if(!mouseEvent&&!touchEvent)return;this.gos.get("preventDefaultOnContextMenu")&&(mouseEvent||touchEvent).preventDefault();const{target}=mouseEvent||touch;(target===this.eBodyViewport||target===this.ctrlsSvc.get("center").eViewport)&&((_a238=this.beans.contextMenuSvc)==null||_a238.showContextMenu({mouseEvent,touchEvent,value:null,anchorToElement:this.eGridBody,source:"ui"}))}onBodyViewportWheel(popupSvc,e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&popupSvc!=null&&popupSvc.hasAnchoredPopup()&&e.preventDefault()}scrollVertically(pixels){const oldScrollPosition=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(oldScrollPosition+pixels),this.eBodyViewport.scrollTop-oldScrollPosition}setFloatingHeights(){const{pinnedRowModel}=this,floatingTopHeight=(pinnedRowModel==null?void 0:pinnedRowModel.getPinnedTopTotalHeight())??0,floatingBottomHeight=(pinnedRowModel==null?void 0:pinnedRowModel.getPinnedBottomTotalHeight())??0;this.comp.setTopHeight(floatingTopHeight),this.comp.setBottomHeight(floatingBottomHeight),this.comp.setTopInvisible(floatingTopHeight<=0),this.comp.setBottomInvisible(floatingBottomHeight<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(height=0){this.comp.setStickyTopHeight(`${height}px`),this.stickyTopHeight=height}setStickyBottomHeight(height=0){this.comp.setStickyBottomHeight(`${height}px`),this.stickyBottomHeight=height}setStickyWidth(vScrollVisible){if(!vScrollVisible)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const scrollbarWidth=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${scrollbarWidth}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${scrollbarWidth}px)`)}}setStickyTopOffsetTop(){var _a238,_b2;const headerHeight=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(((_a238=this.filterManager)==null?void 0:_a238.getHeaderHeight())??0),pinnedTopHeight=((_b2=this.pinnedRowModel)==null?void 0:_b2.getPinnedTopTotalHeight())??0;let height=0;headerHeight>0&&(height+=headerHeight),pinnedTopHeight>0&&(height+=pinnedTopHeight),height>0&&(height+=1),this.comp.setStickyTopTop(`${height}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel,scrollVisibleSvc,comp}=this,pinnedBottomHeight=(pinnedRowModel==null?void 0:pinnedRowModel.getPinnedBottomTotalHeight())??0,scrollbarWidth=scrollVisibleSvc.horizontalScrollShowing&&scrollVisibleSvc.getScrollbarWidth()||0,height=pinnedBottomHeight+scrollbarWidth;comp.setStickyBottomBottom(`${height}px`)}},__name(_a39,"GridBodyCtrl"),_a39),_a40,AbstractFakeScrollComp=(_a40=class extends Component{constructor(template,direction){super(),this.direction=direction,this.eViewport=RefPlaceholder,this.eContainer=RefPlaceholder,this.hideTimeout=0,this.setTemplate(template)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",_isMacOsUserAgent()||_isIOSUserAgent())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=_isInvisibleScrollbar(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const eGui=this.getGui(),onActivate=__name(()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),"onActivate"),onDeactivate=__name(()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1),"onDeactivate");this.addManagedListeners(eGui,{mouseenter:onActivate,mousedown:onActivate,touchstart:onActivate,mouseleave:onDeactivate,touchend:onDeactivate})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),_requestAnimationFrame(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:__name(params=>{params.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},"bodyScroll"),bodyScrollEnd:__name(()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)},"bodyScrollEnd")})}attemptSettingScrollPosition(value){const viewport=this.eViewport;_waitUntil(()=>_isVisible(viewport),()=>this.setScrollPosition(value),100)}onScrollCallback(fn){this.addManagedElementListeners(this.eViewport,{scroll:fn})}},__name(_a40,"AbstractFakeScrollComp"),_a40),FakeHScrollElement={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},_a41,FakeHScrollComp=(_a41=class extends AbstractFakeScrollComp{constructor(){super(FakeHScrollElement,"horizontal"),this.eLeftSpacer=RefPlaceholder,this.eRightSpacer=RefPlaceholder,this.setScrollVisibleDebounce=0}wireBeans(beans){this.visibleCols=beans.visibleCols,this.scrollVisibleSvc=beans.scrollVisibleSvc}postConstruct(){super.postConstruct();const spacerWidthsListener=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:spacerWidthsListener,displayedColumnsWidthChanged:spacerWidthsListener,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",spacerWidthsListener),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new CenterWidthFeature(width=>this.eContainer.style.width=`${width}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var _a238;if(!this.invisibleScrollbar)return;const bottomPinnedHeight=((_a238=this.beans.pinnedRowModel)==null?void 0:_a238.getPinnedBottomTotalHeight())??0;this.getGui().style.bottom=`${bottomPinnedHeight}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const vScrollShowing=this.scrollVisibleSvc.verticalScrollShowing;let rightSpacing=this.visibleCols.getDisplayedColumnsRightWidth();const scrollOnRight=!this.enableRtl&&vScrollShowing,scrollbarWidth=this.scrollVisibleSvc.getScrollbarWidth();scrollOnRight&&(rightSpacing+=scrollbarWidth),_setFixedWidth(this.eRightSpacer,rightSpacing),this.eRightSpacer.classList.toggle("ag-scroller-corner",rightSpacing<=scrollbarWidth);let leftSpacing=this.visibleCols.getColsLeftWidth();this.enableRtl&&vScrollShowing&&(leftSpacing+=scrollbarWidth),_setFixedWidth(this.eLeftSpacer,leftSpacing),this.eLeftSpacer.classList.toggle("ag-scroller-corner",leftSpacing<=scrollbarWidth)}setScrollVisible(){const hScrollShowing=this.scrollVisibleSvc.horizontalScrollShowing,invisibleScrollbar2=this.invisibleScrollbar,isSuppressHorizontalScroll=this.gos.get("suppressHorizontalScroll"),scrollbarWidth=hScrollShowing&&this.scrollVisibleSvc.getScrollbarWidth()||0,scrollContainerSize=isSuppressHorizontalScroll?0:scrollbarWidth===0&&invisibleScrollbar2?16:scrollbarWidth,apply=__name(()=>{this.setScrollVisibleDebounce=0,this.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar2),_setFixedHeight(this.getGui(),scrollContainerSize),_setFixedHeight(this.eViewport,scrollContainerSize),_setFixedHeight(this.eContainer,scrollContainerSize),scrollContainerSize||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(hScrollShowing,{skipAriaHidden:!0})},"apply");window.clearTimeout(this.setScrollVisibleDebounce),hScrollShowing?this.setScrollVisibleDebounce=window.setTimeout(apply,100):apply()}getScrollPosition(){return _getScrollLeft(this.eViewport,this.enableRtl)}setScrollPosition(value){_isVisible(this.eViewport)||this.attemptSettingScrollPosition(value),_setScrollLeft(this.eViewport,value,this.enableRtl)}},__name(_a41,"FakeHScrollComp"),_a41),FakeVScrollElement={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},_a42,FakeVScrollComp=(_a42=class extends AbstractFakeScrollComp{constructor(){super(FakeVScrollElement,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new SetHeightFeature(this.eContainer));const{ctrlsSvc}=this.beans;ctrlsSvc.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,ctrlsSvc)})}setScrollVisible(){const{scrollVisibleSvc}=this.beans,vScrollShowing=scrollVisibleSvc.verticalScrollShowing,invisibleScrollbar2=this.invisibleScrollbar,scrollbarWidth=vScrollShowing&&scrollVisibleSvc.getScrollbarWidth()||0,adjustedScrollbarWidth=scrollbarWidth===0&&invisibleScrollbar2?16:scrollbarWidth;this.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar2),_setFixedWidth(this.getGui(),adjustedScrollbarWidth),_setFixedWidth(this.eViewport,adjustedScrollbarWidth),_setFixedWidth(this.eContainer,adjustedScrollbarWidth),this.setDisplayed(vScrollShowing,{skipAriaHidden:!0})}onRowContainerHeightChanged(ctrlsSvc){const gridBodyViewportEl=ctrlsSvc.getGridBodyCtrl().eBodyViewport,eViewportScrollTop=this.getScrollPosition(),gridBodyViewportScrollTop=gridBodyViewportEl.scrollTop;eViewportScrollTop!=gridBodyViewportScrollTop&&this.setScrollPosition(gridBodyViewportScrollTop,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(value,force){!force&&!_isVisible(this.eViewport)&&this.attemptSettingScrollPosition(value),this.eViewport.scrollTop=value}},__name(_a42,"FakeVScrollComp"),_a42);function getHeaderRowCount(colModel){return colModel.cols?colModel.cols.treeDepth+1:-1}__name(getHeaderRowCount,"getHeaderRowCount");function getFocusHeaderRowCount(beans){var _a238;return((_a238=beans.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:_a238.getRowCount())??0}__name(getFocusHeaderRowCount,"getFocusHeaderRowCount");function getGroupRowsHeight(beans){const heights=[],headerRowContainerCtrls=beans.ctrlsSvc.getHeaderRowContainerCtrls();for(const headerRowContainerCtrl of headerRowContainerCtrls){if(!headerRowContainerCtrl)continue;const groupRowCount=headerRowContainerCtrl.getGroupRowCount()||0;for(let i=0;i<groupRowCount;i++){const headerRowCtrl=headerRowContainerCtrl.getGroupRowCtrlAtIndex(i),currentHeightAtPos=heights[i];if(headerRowCtrl){const newHeight=getColumnGroupHeaderRowHeight(beans,headerRowCtrl);(currentHeightAtPos==null||newHeight>currentHeightAtPos)&&(heights[i]=newHeight)}}}return heights}__name(getGroupRowsHeight,"getGroupRowsHeight");function getColumnGroupHeaderRowHeight(beans,headerRowCtrl){let maxDisplayedHeight=beans.colModel.isPivotMode()?getPivotGroupHeaderHeight(beans):getGroupHeaderHeight(beans);const headerRowCellCtrls=headerRowCtrl.getHeaderCellCtrls();for(const headerCellCtrl of headerRowCellCtrls){const{column}=headerCellCtrl,height=column.getAutoHeaderHeight();height!=null&&height>maxDisplayedHeight&&column.isAutoHeaderHeight()&&(maxDisplayedHeight=height)}return maxDisplayedHeight}__name(getColumnGroupHeaderRowHeight,"getColumnGroupHeaderRowHeight");function getColumnHeaderRowHeight(beans){let maxDisplayedHeight=beans.colModel.isPivotMode()?getPivotHeaderHeight(beans):getHeaderHeight(beans);return beans.colModel.forAllCols(col=>{const height=col.getAutoHeaderHeight();height!=null&&height>maxDisplayedHeight&&col.isAutoHeaderHeight()&&(maxDisplayedHeight=height)}),maxDisplayedHeight}__name(getColumnHeaderRowHeight,"getColumnHeaderRowHeight");function getHeaderHeight(beans){return beans.gos.get("headerHeight")??beans.environment.getDefaultHeaderHeight()}__name(getHeaderHeight,"getHeaderHeight");function getFloatingFiltersHeight(beans){return beans.gos.get("floatingFiltersHeight")??getHeaderHeight(beans)}__name(getFloatingFiltersHeight,"getFloatingFiltersHeight");function getGroupHeaderHeight(beans){return beans.gos.get("groupHeaderHeight")??getHeaderHeight(beans)}__name(getGroupHeaderHeight,"getGroupHeaderHeight");function getPivotHeaderHeight(beans){return beans.gos.get("pivotHeaderHeight")??getHeaderHeight(beans)}__name(getPivotHeaderHeight,"getPivotHeaderHeight");function getPivotGroupHeaderHeight(beans){return beans.gos.get("pivotGroupHeaderHeight")??getGroupHeaderHeight(beans)}__name(getPivotGroupHeaderHeight,"getPivotGroupHeaderHeight");var _a43,GridHeaderCtrl=(_a43=class extends BeanStub{setComp(comp,eGui,eFocusableElement){this.comp=comp,this.eGui=eGui;const{beans}=this,{headerNavigation,touchSvc,ctrlsSvc}=beans;headerNavigation&&this.createManagedBean(new ManagedFocusFeature(eFocusableElement,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,beans),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,beans)}),this.onPivotModeChanged(beans),this.setupHeaderHeight();const listener=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:listener}),touchSvc==null||touchSvc.mockHeaderContextMenu(this,listener),ctrlsSvc.register("gridHeaderCtrl",this)}setupHeaderHeight(){const listener=this.setHeaderHeight.bind(this);listener(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],listener),this.addManagedEventListeners({displayedColumnsChanged:listener,columnHeaderHeightChanged:listener,columnGroupHeaderHeightChanged:__name(()=>_requestAnimationFrame(this.beans,()=>listener()),"columnGroupHeaderHeightChanged"),gridStylesChanged:listener,advancedFilterEnabledChanged:listener})}setHeaderHeight(){var _a238;const{beans}=this;let totalHeaderHeight=0;const groupHeight=getGroupRowsHeight(beans).reduce((prev,curr)=>prev+curr,0),headerHeight=getColumnHeaderRowHeight(beans);if((_a238=beans.filterManager)!=null&&_a238.hasFloatingFilters()&&(totalHeaderHeight+=getFloatingFiltersHeight(beans)),totalHeaderHeight+=groupHeight,totalHeaderHeight+=headerHeight,this.headerHeight===totalHeaderHeight)return;this.headerHeight=totalHeaderHeight;const px=`${totalHeaderHeight+1}px`;this.comp.setHeightAndMinHeight(px),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(beans){const pivotMode=beans.colModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",pivotMode),this.comp.addOrRemoveCssClass("ag-pivot-off",!pivotMode)}onDisplayedColumnsChanged(beans){const shouldAllowOverflow=beans.visibleCols.allCols.some(col=>col.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",shouldAllowOverflow)}onTabKeyDown(e){const isRtl=this.gos.get("enableRtl"),backwards=e.shiftKey,direction=backwards!==isRtl?"LEFT":"RIGHT",{beans}=this,{headerNavigation,focusSvc}=beans;(headerNavigation.navigateHorizontally(direction,!0,e)||!backwards&&focusSvc.focusOverlay(!1)||_focusNextGridCoreContainer(beans,backwards,!0))&&e.preventDefault()}handleKeyDown(e){let direction=null;const{headerNavigation}=this.beans;switch(e.key){case KeyCode.LEFT:direction="LEFT";case KeyCode.RIGHT:{_exists(direction)||(direction="RIGHT"),headerNavigation.navigateHorizontally(direction,!1,e)&&e.preventDefault();break}case KeyCode.UP:direction="UP";case KeyCode.DOWN:{_exists(direction)||(direction="DOWN"),headerNavigation.navigateVertically(direction,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget}=e,{eGui,beans}=this;!relatedTarget&&eGui.contains(_getActiveDomElement(beans))||eGui.contains(relatedTarget)||(beans.focusSvc.focusedHeader=null)}onHeaderContextMenu(mouseEvent,touch,touchEvent){var _a238;const{menuSvc,ctrlsSvc}=this.beans;if(!mouseEvent&&!touchEvent||!(menuSvc!=null&&menuSvc.isHeaderContextMenuEnabled()))return;const{target}=mouseEvent??touch;(target===this.eGui||target===((_a238=ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:_a238.eViewport))&&menuSvc.showHeaderContextMenu(void 0,mouseEvent,touchEvent)}},__name(_a43,"GridHeaderCtrl"),_a43),_a44,SetLeftFeature=(_a44=class extends BeanStub{constructor(columnOrGroup,eCell,beans,colsSpanning){super(),this.columnOrGroup=columnOrGroup,this.eCell=eCell,this.colsSpanning=colsSpanning,this.columnOrGroup=columnOrGroup,this.ariaEl=eCell.querySelector("[role=columnheader]")||eCell,this.beans=beans}setColsSpanning(colsSpanning){this.colsSpanning=colsSpanning,this.onLeftChanged()}getColumnOrGroup(){const{beans,colsSpanning}=this;return beans.gos.get("enableRtl")&&colsSpanning?_last(colsSpanning):this.columnOrGroup}postConstruct(){const onLeftChanged=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:onLeftChanged}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:onLeftChanged}),this.addManagedPropertyListener("domLayout",onLeftChanged)}setLeftFirstTime(){const{gos,colAnimation}=this.beans,suppressMoveAnimation=gos.get("suppressColumnMoveAnimation"),oldLeftExists=_exists(this.columnOrGroup.getOldLeft());(colAnimation==null?void 0:colAnimation.isActive())&&oldLeftExists&&!suppressMoveAnimation?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const colOrGroup=this.getColumnOrGroup(),oldActualLeft=this.modifyLeftForPrintLayout(colOrGroup,colOrGroup.getOldLeft()),actualLeft=this.modifyLeftForPrintLayout(colOrGroup,colOrGroup.getLeft());this.setLeft(oldActualLeft),this.actualLeft=actualLeft,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===actualLeft&&this.setLeft(actualLeft)})}onLeftChanged(){const colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(colOrGroup,leftPosition){const{gos,visibleCols}=this.beans;if(!_isDomLayout(gos,"print")||colOrGroup.getPinned()==="left")return leftPosition;const leftWidth=visibleCols.getColsLeftWidth();if(colOrGroup.getPinned()==="right"){const bodyWidth=visibleCols.bodyWidth;return leftWidth+bodyWidth+leftPosition}return leftWidth+leftPosition}setLeft(value){if(_exists(value)&&(this.eCell.style.left=`${value}px`),isColumnGroup2(this.columnOrGroup)){const children=this.columnOrGroup.getLeafColumns();if(!children.length)return;children.length>1&&_setAriaColSpan(this.ariaEl,children.length)}}},__name(_a44,"SetLeftFeature"),_a44),instanceIdSequence4=0,DOM_DATA_KEY_HEADER_CTRL="headerCtrl",_a45,AbstractHeaderCellCtrl=(_a45=class extends BeanStub{constructor(column,rowCtrl){super(),this.column=column,this.rowCtrl=rowCtrl,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=column.getUniqueId()+"-"+instanceIdSequence4++}postConstruct(){const refreshTabIndex=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],refreshTabIndex),this.addManagedEventListeners({overlayExclusiveChanged:refreshTabIndex})}shouldStopEventPropagation(event){const{headerRowIndex,column}=this.beans.focusSvc.focusedHeader,colDef=column.getDefinition(),colDefFunc=colDef&&colDef.suppressHeaderKeyboardEvent;if(!_exists(colDefFunc))return!1;const params=_addGridCommonParams(this.gos,{colDef,column,headerRowIndex,event});return!!colDefFunc(params)}getWrapperHasFocus(){return _getActiveDomElement(this.beans)===this.eGui}setGui(eGui,compBean){this.eGui=eGui,this.addDomData(compBean),compBean.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),compBean.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const colDef=this.column.getDefinition();if(!colDef)return;const{headerStyle}=colDef;let styles;if(typeof headerStyle=="function"){const cellStyleParams=this.getHeaderClassParams();styles=headerStyle(cellStyleParams)}else styles=headerStyle;styles&&this.comp.setUserStyles(styles)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(params){const{wrapperElement,checkMeasuringCallback,compBean}=params,{beans}=this,measureHeight=__name(timesCalled=>{if(!this.isAlive()||!compBean.isAlive())return;const{paddingTop,paddingBottom,borderBottomWidth,borderTopWidth}=_getElementSize(this.eGui),extraHeight=paddingTop+paddingBottom+borderBottomWidth+borderTopWidth,autoHeight=wrapperElement.offsetHeight+extraHeight;if(timesCalled<5){const doc=_getDocument(beans),notYetInDom=!doc||!doc.contains(wrapperElement),possiblyNoContentYet=autoHeight==0;if(notYetInDom||possiblyNoContentYet){_batchCall(()=>measureHeight(timesCalled+1),"raf",beans);return}}this.setColHeaderHeight(this.column,autoHeight)},"measureHeight");let isMeasuring=!1,stopResizeObserver;const checkMeasuring=__name(()=>{const newValue=this.column.isAutoHeaderHeight();newValue&&!isMeasuring&&startMeasuring(),!newValue&&isMeasuring&&stopMeasuring()},"checkMeasuring"),startMeasuring=__name(()=>{isMeasuring=!0,measureHeight(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),stopResizeObserver=_observeResize(this.beans,wrapperElement,()=>measureHeight(0))},"startMeasuring"),stopMeasuring=__name(()=>{isMeasuring=!1,stopResizeObserver&&stopResizeObserver(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),stopResizeObserver=void 0},"stopMeasuring");checkMeasuring(),compBean.addDestroyFunc(()=>stopMeasuring()),compBean.addManagedListeners(this.column,{widthChanged:__name(()=>isMeasuring&&measureHeight(0),"widthChanged")}),compBean.addManagedEventListeners({sortChanged:__name(()=>{isMeasuring&&window.setTimeout(()=>measureHeight(0))},"sortChanged")}),checkMeasuringCallback&&checkMeasuringCallback(checkMeasuring)}onDisplayedColumnsChanged(){const{comp,column,beans,eGui}=this;!comp||!column||!eGui||(refreshFirstAndLastStyles(comp,column,beans.visibleCols),_setAriaColIndex(eGui,beans.visibleCols.getAriaColIndex(column)))}addResizeAndMoveKeyboardListeners(compBean){compBean.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const suppressHeaderFocus=_isHeaderFocusSuppressed(this.beans);this.eGui&&_addOrRemoveAttribute(this.eGui,"tabindex",suppressHeaderFocus?null:"-1")}onGuiKeyDown(e){var _a238;const activeEl=_getActiveDomElement(this.beans),isLeftOrRight=e.key===KeyCode.LEFT||e.key===KeyCode.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),activeEl!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||isLeftOrRight)&&(e.preventDefault(),e.stopImmediatePropagation()),!isLeftOrRight))return;const direction=e.key===KeyCode.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const diff=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(diff,e.shiftKey),(_a238=this.resizeFeature)==null||_a238.toggleColumnResizing(!0)}else this.moveHeader(direction)}moveHeader(hDirection){var _a238;(_a238=this.beans.colMoves)==null||_a238.moveHeader(hDirection,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const diff=this.getResizeDiff(e),{pinnedCols}=this.beans;return pinnedCols?pinnedCols.getHeaderResizeDiff(diff,this.column):diff}getResizeDiff(e){const{gos,column}=this;let isLeft=e.key===KeyCode.LEFT!==gos.get("enableRtl");const pinned=column.getPinned(),isRtl=gos.get("enableRtl");return pinned&&isRtl!==(pinned==="right")&&(isLeft=!isLeft),(isLeft?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var _a238;(_a238=this.resizeFeature)==null||_a238.toggleColumnResizing(!1)},150))}handleKeyDown(e){const wrapperHasFocus=this.getWrapperHasFocus();switch(e.key){case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:wrapperHasFocus&&e.preventDefault()}}addDomData(compBean){const key=DOM_DATA_KEY_HEADER_CTRL,{eGui,gos}=this;_setDomData(gos,eGui,key,this),compBean.addDestroyFunc(()=>_setDomData(gos,eGui,key,null))}focus(event){const{eGui}=this;return eGui?(this.lastFocusEvent=event||null,eGui.focus(),!0):!1}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var _a238;this.dragSource&&((_a238=this.beans.dragAndDrop)==null||_a238.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(mouseEvent,touchEvent,column){const event=mouseEvent??touchEvent,{menuSvc,gos}=this.beans;gos.get("preventDefaultOnContextMenu")&&event.preventDefault(),menuSvc!=null&&menuSvc.isHeaderContextMenuEnabled(column)&&menuSvc.showHeaderContextMenu(column,mouseEvent,touchEvent),this.dispatchColumnMouseEvent("columnHeaderContextMenu",column)}dispatchColumnMouseEvent(eventType,column){this.eventSvc.dispatchEvent({type:eventType,column})}setColHeaderHeight(col,height){if(!col.setAutoHeaderHeight(height))return;const{eventSvc}=this;col.isColumn?eventSvc.dispatchEvent({type:"columnHeaderHeightChanged",column:col,columns:[col],source:"autosizeColumnHeaderHeight"}):eventSvc.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:col,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},__name(_a45,"AbstractHeaderCellCtrl"),_a45),_a46,HeaderCellCtrl=(_a46=class extends AbstractHeaderCellCtrl{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(comp,eGui,eResize,eHeaderCompWrapper,compBeanInput){this.comp=comp;const{rowCtrl,column,beans}=this,{colResize,context,colHover,rangeSvc}=beans,compBean=setupCompBean(this,context,compBeanInput);this.setGui(eGui,compBean),this.updateState(),this.setupWidth(compBean),this.setupMovingCss(compBean),this.setupMenuClass(compBean),this.setupSortableClass(compBean),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:eHeaderCompWrapper,checkMeasuringCallback:__name(checkMeasuring=>this.setRefreshFunction("measuring",checkMeasuring),"checkMeasuringCallback"),compBean}),this.addColumnHoverListener(compBean),this.setupFilterClass(compBean),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(compBean),this.setupSelectAll(compBean),this.setupUserComp(),this.refreshAria(),colResize?this.resizeFeature=compBean.createManagedBean(colResize.createResizeFeature(rowCtrl.pinned,column,eResize,comp,this)):_setDisplayed(eResize,!1),colHover==null||colHover.createHoverFeature(compBean,[column],eGui),rangeSvc==null||rangeSvc.createRangeHighlightFeature(compBean,column,comp),compBean.createManagedBean(new SetLeftFeature(column,eGui,beans)),compBean.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:__name(e=>this.shouldStopEventPropagation(e),"shouldStopEventPropagation"),onTabKeyDown:__name(()=>null,"onTabKeyDown"),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(compBean),compBean.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),compBean.addManagedListeners(column,{colDefChanged:__name(()=>this.refresh(),"colDefChanged")}),compBean.addManagedListeners(column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const listener=__name(()=>this.checkDisplayName(),"listener");compBean.addManagedEventListeners({columnValueChanged:listener,columnRowGroupChanged:listener,columnPivotChanged:listener,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),compBean.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(delta,shiftKey){var _a238;(_a238=this.beans.colResize)==null||_a238.resizeHeader(this.column,delta,shiftKey)}getHeaderClassParams(){const{column,beans}=this,colDef=column.colDef;return _addGridCommonParams(beans.gos,{colDef,column,floatingFilter:!1})}setupUserComp(){const compDetails=this.lookupUserCompDetails();compDetails&&this.setCompDetails(compDetails)}setCompDetails(compDetails){this.userCompDetails=compDetails,this.comp.setUserCompDetails(compDetails)}lookupUserCompDetails(){const params=this.createParams(),colDef=this.column.getColDef();return _getHeaderCompDetails(this.beans.userCompFactory,colDef,params)}createParams(){const{menuSvc,sortSvc,colFilter,gos}=this.beans;return _addGridCommonParams(gos,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!(menuSvc!=null&&menuSvc.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!colFilter&&(!this.openFilterEnabled||_isLegacyMenuEnabled(this.gos)),showColumnMenu:__name((buttonElement,onClosedCallback)=>{menuSvc==null||menuSvc.showColumnMenu({column:this.column,buttonElement,positionBy:"button",onClosedCallback})},"showColumnMenu"),showColumnMenuAfterMouseClick:__name((mouseEvent,onClosedCallback)=>{menuSvc==null||menuSvc.showColumnMenu({column:this.column,mouseEvent,positionBy:"mouse",onClosedCallback})},"showColumnMenuAfterMouseClick"),showFilter:__name(buttonElement=>{menuSvc==null||menuSvc.showFilterMenu({column:this.column,buttonElement,containerType:"columnFilter",positionBy:"button"})},"showFilter"),progressSort:__name(multiSort=>{sortSvc==null||sortSvc.progressSort(this.column,!!multiSort,"uiColumnSorted")},"progressSort"),setSort:__name((sort,multiSort)=>{sortSvc==null||sortSvc.setSortForColumn(this.column,sort,!!multiSort,"uiColumnSorted")},"setSort"),eGridHeader:this.eGui,setTooltip:__name((value,shouldDisplayTooltip)=>{gos.assertModuleRegistered("Tooltip",3),this.setupTooltip(value,shouldDisplayTooltip)},"setTooltip")})}setupSelectAll(compBean){const{selectionSvc}=this.beans;selectionSvc&&(this.selectAllFeature=compBean.createManagedBean(selectionSvc.createSelectAllFeature(this.column)),this.selectAllFeature.setComp(this))}getSelectAllGui(){var _a238;return(_a238=this.selectAllFeature)==null?void 0:_a238.getCheckboxGui()}handleKeyDown(e){var _a238;super.handleKeyDown(e),e.key===KeyCode.SPACE&&((_a238=this.selectAllFeature)==null||_a238.onSpaceKeyDown(e)),e.key===KeyCode.ENTER&&this.onEnterKeyDown(e),e.key===KeyCode.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){var _a238;e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&((_a238=this.beans.sortSvc)==null||_a238.progressSort(this.column,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,isFilterShortcut){const headerComp=this.comp.getUserCompInstance();isHeaderComp(headerComp)&&headerComp.onMenuKeyboardShortcut(isFilterShortcut)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),_isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(value,shouldDisplayTooltip){var _a238;this.tooltipFeature=(_a238=this.beans.tooltipSvc)==null?void 0:_a238.setupHeaderTooltip(this.tooltipFeature,this,value,shouldDisplayTooltip)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const refreshHeaderClasses=__name(()=>{const colDef=this.column.getColDef(),classes=_getHeaderClassesFromColDef(colDef,this.gos,this.column,null),oldClasses=this.userHeaderClasses;this.userHeaderClasses=new Set(classes),classes.forEach(c=>{oldClasses.has(c)?oldClasses.delete(c):this.comp.addOrRemoveCssClass(c,!0)}),oldClasses.forEach(c=>this.comp.addOrRemoveCssClass(c,!1))},"refreshHeaderClasses");this.setRefreshFunction("headerClasses",refreshHeaderClasses),refreshHeaderClasses()}setDragSource(eSource){var _a238;this.dragSourceElement=eSource,this.removeDragSource(),!(!eSource||!this.draggable)&&(this.dragSource=((_a238=this.beans.colMoves)==null?void 0:_a238.setDragSourceForHeader(eSource,this.column,this.displayName))??null)}updateState(){const{menuSvc}=this.beans;this.menuEnabled=!!(menuSvc!=null&&menuSvc.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!!(menuSvc!=null&&menuSvc.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(name,func){this.refreshFunctions[name]=func}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach(f=>f())}refreshHeaderComp(){const newCompDetails=this.lookupUserCompDetails();if(!newCompDetails)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==newCompDetails.componentClass?this.attemptHeaderCompRefresh(newCompDetails.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(newCompDetails)}attemptHeaderCompRefresh(params){const headerComp=this.comp.getUserCompInstance();return!headerComp||!headerComp.refresh?!1:headerComp.refresh(params)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const colDef=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!colDef.suppressMovable&&!colDef.lockPosition)||!!colDef.enableRowGroup||!!colDef.enablePivot}setupWidth(compBean){const listener=__name(()=>{const columnWidth=this.column.getActualWidth();this.comp.setWidth(`${columnWidth}px`)},"listener");compBean.addManagedListeners(this.column,{widthChanged:listener}),listener()}setupMovingCss(compBean){const listener=__name(()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())},"listener");compBean.addManagedListeners(this.column,{movingChanged:listener}),listener()}setupMenuClass(compBean){const listener=__name(()=>{var _a238;(_a238=this.comp)==null||_a238.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())},"listener");compBean.addManagedListeners(this.column,{menuVisibleChanged:listener}),listener()}setupSortableClass(compBean){const updateSortableCssClass=__name(()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)},"updateSortableCssClass");updateSortableCssClass(),this.setRefreshFunction("updateSortable",updateSortableCssClass),compBean.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(compBean){const listener=__name(()=>{const isFilterActive=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",isFilterActive),this.refreshAria()},"listener");compBean.addManagedListeners(this.column,{filterActiveChanged:listener}),listener()}setupWrapTextClass(){const listener=__name(()=>{const wrapText=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",wrapText)},"listener");listener(),this.setRefreshFunction("wrapText",listener)}onHeaderHighlightChanged(){const highlighted=this.column.getHighlighted(),beforeOn=highlighted===0,afterOn=highlighted===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",beforeOn),this.comp.addOrRemoveCssClass("ag-header-highlight-after",afterOn)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui,column,comp,beans}=this,groupHeaderHeight=getGroupRowsHeight(this.beans),isZeroGroupHeight=groupHeaderHeight.reduce((total,next)=>total+=next,0)===0;if(comp.addOrRemoveCssClass("ag-header-parent-hidden",isZeroGroupHeight),!column.isSpanHeaderHeight()){eGui.style.removeProperty("top"),eGui.style.removeProperty("height"),comp.addOrRemoveCssClass("ag-header-span-height",!1),comp.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents,isSpanningTotal}=this.column.getColumnGroupPaddingInfo();comp.addOrRemoveCssClass("ag-header-span-height",numberOfParents>0);const headerHeight=getColumnHeaderRowHeight(beans);if(numberOfParents===0){comp.addOrRemoveCssClass("ag-header-span-total",!1),eGui.style.setProperty("top","0px"),eGui.style.setProperty("height",`${headerHeight}px`);return}comp.addOrRemoveCssClass("ag-header-span-total",isSpanningTotal);let extraHeight=0;for(let i=0;i<numberOfParents;i++)extraHeight+=groupHeaderHeight[groupHeaderHeight.length-1-i];eGui.style.setProperty("top",`${-extraHeight}px`),eGui.style.setProperty("height",`${headerHeight+extraHeight}px`)}refreshAriaSort(){var _a238;if(this.sortable){const translate=this.getLocaleTextFunc(),sort=((_a238=this.beans.sortSvc)==null?void 0:_a238.getDisplaySortForColumn(this.column))||null;this.comp.setAriaSort(_getAriaSortState(sort)),this.setAriaDescriptionProperty("sort",translate("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const translate=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",translate("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!_isLegacyMenuEnabled(this.gos)){const translate=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",translate("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const translate=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",translate("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(property,value){value!=null?this.ariaDescriptionProperties.set(property,value):this.ariaDescriptionProperties.delete(property)}announceAriaDescription(){var _a238;if(!this.eGui.contains(_getActiveDomElement(this.beans)))return;const ariaDescription=Array.from(this.ariaDescriptionProperties.keys()).sort((a,b)=>a==="filter"?-1:b.charCodeAt(0)-a.charCodeAt(0)).map(key=>this.ariaDescriptionProperties.get(key)).join(". ");(_a238=this.beans.ariaAnnounce)==null||_a238.announceValue(ariaDescription,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(compBean){var _a238;(_a238=this.beans.colHover)==null||_a238.addHeaderColumnHoverListener(compBean,this.comp,this.column)}addActiveHeaderMouseListeners(compBean){const listener=__name(e=>this.handleMouseOverChange(e.type==="mouseenter"),"listener"),clickListener=__name(()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},"clickListener"),contextMenuListener=__name(event=>this.handleContextMenuMouseEvent(event,void 0,this.column),"contextMenuListener");compBean.addManagedListeners(this.eGui,{mouseenter:listener,mouseleave:listener,click:clickListener,contextmenu:contextMenuListener})}handleMouseOverChange(isMouseOver){this.setActiveHeader(isMouseOver),this.eventSvc.dispatchEvent({type:isMouseOver?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(active){this.comp.addOrRemoveCssClass("ag-header-active",active)}getAnchorElementForMenu(isFilter){const headerComp=this.comp.getUserCompInstance();return isHeaderComp(headerComp)?headerComp.getAnchorElementForMenu(isFilter):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}},__name(_a46,"HeaderCellCtrl"),_a46);function isHeaderComp(headerComp){return typeof headerComp.getAnchorElementForMenu=="function"&&typeof headerComp.onMenuKeyboardShortcut=="function"}__name(isHeaderComp,"isHeaderComp");var instanceIdSequence5=0,_a47,HeaderRowCtrl=(_a47=class extends BeanStub{constructor(rowIndex,pinned,type){super(),this.rowIndex=rowIndex,this.pinned=pinned,this.type=type,this.instanceId=instanceIdSequence5++,this.allCtrls=[];const typeClass=type=="group"?"ag-header-row-column-group":type=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${typeClass}`}postConstruct(){this.isPrintLayout=_isDomLayout(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(ctrl=>ctrl.eGui!=null):!1}setComp(comp,compBean,initCompState=!0){this.comp=comp,compBean=setupCompBean(this,this.beans.context,compBean),initCompState&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(compBean)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(compBean){const onHeightChanged=this.onRowHeightChanged.bind(this),onDisplayedColumnsChanged=this.onDisplayedColumnsChanged.bind(this);compBean.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:onDisplayedColumnsChanged,virtualColumnsChanged:__name(params=>this.onVirtualColumnsChanged(params.afterScroll),"virtualColumnsChanged"),columnGroupHeaderHeightChanged:onHeightChanged,columnHeaderHeightChanged:onHeightChanged,gridStylesChanged:onHeightChanged,advancedFilterEnabledChanged:onHeightChanged}),compBean.addManagedPropertyListener("domLayout",onDisplayedColumnsChanged),compBean.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),compBean.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],onHeightChanged)}onDisplayedColumnsChanged(){this.isPrintLayout=_isDomLayout(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){const width=this.getWidthForRow();this.comp.setWidth(`${width}px`)}getWidthForRow(){const{visibleCols}=this.beans;return this.isPrintLayout?this.pinned!=null?0:visibleCols.getContainerWidth("right")+visibleCols.getContainerWidth("left")+visibleCols.getContainerWidth(null):visibleCols.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset,rowHeight}=this.getTopAndHeight();this.comp.setTop(topOffset+"px"),this.comp.setHeight(rowHeight+"px")}getTopAndHeight(){const{filterManager}=this.beans,sizes=[],groupHeadersHeight=getGroupRowsHeight(this.beans),headerHeight=getColumnHeaderRowHeight(this.beans);sizes.push(...groupHeadersHeight),sizes.push(headerHeight),filterManager!=null&&filterManager.hasFloatingFilters()&&sizes.push(getFloatingFiltersHeight(this.beans));let topOffset=0;for(let i=0;i<this.rowIndex;i++)topOffset+=sizes[i];const rowHeight=sizes[this.rowIndex];return{topOffset,rowHeight}}onVirtualColumnsChanged(afterScroll=!1){const ctrlsToDisplay=this.getUpdatedHeaderCtrls(),forceOrder=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(ctrlsToDisplay,forceOrder,afterScroll)}getUpdatedHeaderCtrls(){const oldCtrls=this.ctrlsById;this.ctrlsById=new Map;const columns=this.getColumnsInViewport();for(const child of columns)this.recycleAndCreateHeaderCtrls(child,this.ctrlsById,oldCtrls);const isFocusedAndDisplayed=__name(ctrl=>{const{focusSvc,visibleCols}=this.beans;return focusSvc.isHeaderWrapperFocused(ctrl)?visibleCols.isVisible(ctrl.column):!1},"isFocusedAndDisplayed");if(oldCtrls)for(const[id,oldCtrl]of oldCtrls)isFocusedAndDisplayed(oldCtrl)?this.ctrlsById.set(id,oldCtrl):this.destroyBean(oldCtrl);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(headerColumn,currCtrls,oldCtrls){if(headerColumn.isEmptyGroup())return;const idOfChild=headerColumn.getUniqueId();let headerCtrl;if(oldCtrls&&(headerCtrl=oldCtrls.get(idOfChild),oldCtrls.delete(idOfChild)),headerCtrl&&headerCtrl.column!=headerColumn&&(this.destroyBean(headerCtrl),headerCtrl=void 0),headerCtrl==null)switch(this.type){case"filter":{headerCtrl=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,headerColumn,this));break}case"group":headerCtrl=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,headerColumn,this));break;default:headerCtrl=this.createBean(new HeaderCellCtrl(headerColumn,this));break}currCtrls.set(idOfChild,headerCtrl)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let viewportColumns=[];const actualDepth=this.getActualDepth(),{colViewport}=this.beans;return["left",null,"right"].forEach(pinned=>{const items=colViewport.getHeadersToRender(pinned,actualDepth);viewportColumns=viewportColumns.concat(items)}),viewportColumns}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.colViewport.getHeadersToRender(this.pinned,this.getActualDepth())}focusHeader(column,event){const ctrl=this.allCtrls.find(ctrl2=>ctrl2.column==column);return ctrl?ctrl.focus(event):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,super.destroy()}},__name(_a47,"HeaderRowCtrl"),_a47),_a48,HeaderRowContainerCtrl=(_a48=class extends BeanStub{constructor(pinned){super(),this.pinned=pinned,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(comp,eGui){this.comp=comp,this.eViewport=eGui;const{pinnedCols,ctrlsSvc,colModel,colMoves,filterManager}=this.beans;this.setupCenterWidth(),pinnedCols==null||pinnedCols.setupHeaderPinnedWidth(this),this.setupDragAndDrop(colMoves,this.eViewport);const onDisplayedColsChanged=this.onDisplayedColumnsChanged.bind(this,filterManager);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:onDisplayedColsChanged,advancedFilterEnabledChanged:onDisplayedColsChanged});const headerType=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;ctrlsSvc.register(headerType,this),colModel.ready&&this.refresh()}getAllCtrls(){const res=[...this.groupsRowCtrls];return this.columnsRowCtrl&&res.push(this.columnsRowCtrl),this.filtersRowCtrl&&res.push(this.filtersRowCtrl),res}refresh(keepColumns=!1){const{focusSvc,colModel,filterManager}=this.beans;let sequence=0;const focusedHeaderPosition=focusSvc.getFocusHeaderToUseAfterRefresh(),refreshColumnGroups=__name(()=>{const groupRowCount=getHeaderRowCount(colModel)-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let i=0;i<groupRowCount;i++){const ctrl=this.createBean(new HeaderRowCtrl(sequence++,this.pinned,"group"));this.groupsRowCtrls.push(ctrl)}},"refreshColumnGroups"),refreshColumns=__name(()=>{const rowIndex=sequence++,needNewInstance=!this.hidden&&(this.columnsRowCtrl==null||!keepColumns||this.columnsRowCtrl.rowIndex!==rowIndex);(needNewInstance||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),needNewInstance&&(this.columnsRowCtrl=this.createBean(new HeaderRowCtrl(rowIndex,this.pinned,"column")))},"refreshColumns"),refreshFilters=__name(()=>{this.includeFloatingFilter=!!(filterManager!=null&&filterManager.hasFloatingFilters())&&!this.hidden;const destroyPreviousComp=__name(()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)},"destroyPreviousComp");if(!this.includeFloatingFilter){destroyPreviousComp();return}const rowIndex=sequence++;if(this.filtersRowCtrl){const rowIndexMismatch=this.filtersRowCtrl.rowIndex!==rowIndex;(!keepColumns||rowIndexMismatch)&&destroyPreviousComp()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new HeaderRowCtrl(rowIndex,this.pinned,"filter")))},"refreshFilters");refreshColumnGroups(),refreshColumns(),refreshFilters();const allCtrls=this.getAllCtrls();this.comp.setCtrls(allCtrls),this.restoreFocusOnHeader(focusSvc,focusedHeaderPosition)}getHeaderCtrlForColumn(column){const findCtrl=__name(ctrl=>ctrl==null?void 0:ctrl.getHeaderCellCtrls().find(ctrl2=>ctrl2.column===column),"findCtrl");if(isColumn(column))return findCtrl(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let i=0;i<this.groupsRowCtrls.length;i++){const ctrl=findCtrl(this.groupsRowCtrls[i]);if(ctrl)return ctrl}}getHtmlElementForColumnHeader(column){var _a238;return((_a238=this.getHeaderCtrlForColumn(column))==null?void 0:_a238.eGui)??null}getRowType(rowIndex){var _a238;return(_a238=this.getAllCtrls()[rowIndex])==null?void 0:_a238.type}focusHeader(rowIndex,column,event){const ctrl=this.getAllCtrls()[rowIndex];return ctrl?ctrl.focusHeader(column,event):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(index){return this.groupsRowCtrls[index]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(offset){this.comp.setViewportScrollLeft(offset)}onScrollCallback(fn){this.addManagedElementListeners(this.eViewport,{scroll:fn})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(colMoves,dropContainer){const bodyDropTarget=colMoves==null?void 0:colMoves.createBodyDropTarget(this.pinned,dropContainer);bodyDropTarget&&this.createManagedBean(bodyDropTarget)}restoreFocusOnHeader(focusSvc,position){if(!position)return;const{column}=position;column.getPinned()==this.pinned&&focusSvc.focusHeaderPosition({headerPosition:position})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(filterManager){const includeFloatingFilter=!!(filterManager!=null&&filterManager.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==includeFloatingFilter&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new CenterWidthFeature(width=>this.comp.setCenterWidth(`${width}px`),!0))}},__name(_a48,"HeaderRowContainerCtrl"),_a48),_a49,MenuService=(_a49=class extends BeanStub{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory,filterMenuFactory}=this.beans;this.activeMenuFactory=enterpriseMenuFactory??filterMenuFactory}showColumnMenu(params){this.showColumnMenuCommon(this.activeMenuFactory,params,"columnMenu")}showFilterMenu(params){const{enterpriseMenuFactory,filterMenuFactory}=this.beans,menuFactory=enterpriseMenuFactory&&_isLegacyMenuEnabled(this.gos)?enterpriseMenuFactory:filterMenuFactory;this.showColumnMenuCommon(menuFactory,params,params.containerType,!0)}showHeaderContextMenu(column,mouseEvent,touchEvent){var _a238;(_a238=this.activeMenuFactory)==null||_a238.showMenuAfterContextMenuEvent(column,mouseEvent,touchEvent)}hidePopupMenu(){var _a238,_b2;(_a238=this.beans.contextMenuSvc)==null||_a238.hideActiveMenu(),(_b2=this.activeMenuFactory)==null||_b2.hideActiveMenu()}isColumnMenuInHeaderEnabled(column){var _a238;const{suppressHeaderMenuButton}=column.getColDef();return!suppressHeaderMenuButton&&!!((_a238=this.activeMenuFactory)!=null&&_a238.isMenuEnabled(column))&&(_isLegacyMenuEnabled(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(column){var _a238;return!column.getColDef().suppressHeaderFilterButton&&!!((_a238=this.beans.filterManager)!=null&&_a238.isFilterAllowed(column))}isHeaderContextMenuEnabled(column){const colDef=column&&isColumn(column)?column.getColDef():column==null?void 0:column.getColGroupDef();return!(colDef!=null&&colDef.suppressHeaderContextMenu)&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const menuHides=!this.isSuppressMenuHide();return!(_isIOSUserAgent()&&menuHides)}isHeaderFilterButtonEnabled(column){return this.isFilterMenuInHeaderEnabled(column)&&!_isLegacyMenuEnabled(this.gos)&&!this.isFloatingFilterButtonDisplayed(column)}isFilterMenuItemEnabled(column){var _a238;return!!((_a238=this.beans.filterManager)!=null&&_a238.isFilterAllowed(column))&&!_isLegacyMenuEnabled(this.gos)&&!this.isFilterMenuInHeaderEnabled(column)&&!this.isFloatingFilterButtonDisplayed(column)}isFloatingFilterButtonEnabled(column){return!column.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(column){return!!column.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(column)}isSuppressMenuHide(){const gos=this.gos,suppressMenuHide=gos.get("suppressMenuHide");return _isLegacyMenuEnabled(gos)?gos.exists("suppressMenuHide")?suppressMenuHide:!1:suppressMenuHide}showColumnMenuCommon(menuFactory,params,containerType,filtersOnly){const{positionBy,onClosedCallback}=params,column=params.column;if(positionBy==="button"){const{buttonElement}=params;menuFactory==null||menuFactory.showMenuAfterButtonClick(column,buttonElement,containerType,onClosedCallback,filtersOnly)}else if(positionBy==="mouse"){const{mouseEvent}=params;menuFactory==null||menuFactory.showMenuAfterMouseEvent(column,mouseEvent,containerType,onClosedCallback,filtersOnly)}else if(column){const beans=this.beans,ctrlsSvc=beans.ctrlsSvc;ctrlsSvc.getScrollFeature().ensureColumnVisible(column,"auto"),_requestAnimationFrame(beans,()=>{var _a238;const headerCellCtrl=(_a238=ctrlsSvc.getHeaderRowContainerCtrl(column.getPinned()))==null?void 0:_a238.getHeaderCtrlForColumn(column);headerCellCtrl&&(menuFactory==null||menuFactory.showMenuAfterButtonClick(column,headerCellCtrl.getAnchorElementForMenu(filtersOnly),containerType,onClosedCallback,!0))})}}},__name(_a49,"MenuService"),_a49);function _setColMenuVisible(column,visible,source){column.menuVisible!==visible&&(column.menuVisible=visible,column.dispatchColEvent("menuVisibleChanged",source))}__name(_setColMenuVisible,"_setColMenuVisible");var _a50,OverlayComponent=(_a50=class extends Component{constructor(){super()}},__name(_a50,"OverlayComponent"),_a50),LoadingOverlayElement={tag:"span",cls:"ag-overlay-loading-center",attrs:{"aria-live":"polite","aria-atomic":"true"}},_a51,LoadingOverlayComponent2=(_a51=class extends OverlayComponent{init(){var _a238;const customTemplate=_makeNull((_a238=this.gos.get("overlayLoadingTemplate"))==null?void 0:_a238.trim());if(this.setTemplate(customTemplate??LoadingOverlayElement),!customTemplate){const localeTextFunc=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=localeTextFunc("loadingOoo","Loading...")})}}},__name(_a51,"LoadingOverlayComponent2"),_a51),NoRowsOverlayElement={tag:"span",cls:"ag-overlay-no-rows-center"},_a52,NoRowsOverlayComponent2=(_a52=class extends OverlayComponent{init(){var _a238;const customTemplate=_makeNull((_a238=this.gos.get("overlayNoRowsTemplate"))==null?void 0:_a238.trim());if(this.setTemplate(customTemplate??NoRowsOverlayElement),!customTemplate){const localeTextFunc=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=localeTextFunc("noRowsToShow","No Rows To Show")})}}},__name(_a52,"NoRowsOverlayComponent2"),_a52);function _createIcon(iconName,beans,column){const iconContents=_createIconNoSpan(iconName,beans,column);if(iconContents){const{className}=iconContents;if(typeof className=="string"&&className.indexOf("ag-icon")>-1||typeof className=="object"&&className["ag-icon"])return iconContents}const eResult=_createElement({tag:"span"});return eResult.appendChild(iconContents),eResult}__name(_createIcon,"_createIcon");function _createIconNoSpan(iconName,beans,column){var _a238;let userProvidedIcon=null;iconName==="smallDown"?_warn(262):iconName==="smallLeft"?_warn(263):iconName==="smallRight"&&_warn(264);const icons=column&&column.getColDef().icons;if(icons&&(userProvidedIcon=icons[iconName]),beans.gos&&!userProvidedIcon){const optionsIcons=beans.gos.get("icons");optionsIcons&&(userProvidedIcon=optionsIcons[iconName])}if(userProvidedIcon){let rendererResult;if(typeof userProvidedIcon=="function")rendererResult=userProvidedIcon();else if(typeof userProvidedIcon=="string")rendererResult=userProvidedIcon;else{_warn(38,{iconName});return}if(typeof rendererResult=="string")return _loadTemplate(rendererResult);if(_isNodeOrElement(rendererResult))return rendererResult;_warn(133,{iconName});return}else{const iconValue=beans.registry.getIcon(iconName);return iconValue||(_a238=beans.validation)==null||_a238.validateIcon(iconName),_createElement({tag:"span",cls:`ag-icon ag-icon-${iconValue??iconName}`,role:"presentation",attrs:{unselectable:"on"}})}}__name(_createIconNoSpan,"_createIconNoSpan");var dragAndDropImageComponentCSS=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}",DragAndDropElement={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},_a53,DragAndDropImageComponent2=(_a53=class extends Component{constructor(){super(),this.dragSource=null,this.eIcon=RefPlaceholder,this.eLabel=RefPlaceholder,this.eGhost=RefPlaceholder,this.registerCSS(dragAndDropImageComponentCSS)}postConstruct(){const create=__name(iconName=>_createIcon(iconName,this.beans,null),"create");this.dropIconMap={pinned:create("columnMovePin"),hide:create("columnMoveHide"),move:create("columnMoveMove"),left:create("columnMoveLeft"),right:create("columnMoveRight"),group:create("columnMoveGroup"),aggregate:create("columnMoveValue"),pivot:create("columnMovePivot"),notAllowed:create("dropNotAllowed")}}init(params){this.dragSource=params.dragSource,this.setTemplate(DragAndDropElement),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(iconName,shake){const{eIcon,dragSource,dropIconMap,gos}=this;_clearElement(eIcon);let eIconChild=null;iconName||(iconName=dragSource!=null&&dragSource.getDefaultIconName?dragSource.getDefaultIconName():"notAllowed"),eIconChild=dropIconMap[iconName],eIcon.classList.toggle("ag-shake-left-to-right",shake),!(eIconChild===dropIconMap.hide&&gos.get("suppressDragLeaveHidesColumns"))&&eIconChild&&eIcon.appendChild(eIconChild)}setLabel(label){this.eLabel.textContent=label}},__name(_a53,"DragAndDropImageComponent2"),_a53),agAbstractLabelCSS=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",_a54,AgAbstractLabel=(_a54=class extends Component{constructor(config,template,components){super(template,components),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=config||{},this.registerCSS(agAbstractLabelCSS)}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator,label,labelWidth,labelAlignment,disabled}=this.config;disabled!=null&&this.setDisabled(disabled),labelSeparator!=null&&this.setLabelSeparator(labelSeparator),label!=null&&this.setLabel(label),labelWidth!=null&&this.setLabelWidth(labelWidth),this.setLabelAlignment(labelAlignment||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label,eLabel}=this;_clearElement(eLabel),typeof label=="string"?eLabel.innerText=label+this.labelSeparator:label&&eLabel.appendChild(label),label===""?(_setDisplayed(eLabel,!1),_setAriaRole(eLabel,"presentation")):(_setDisplayed(eLabel,!0),_setAriaRole(eLabel,null))}setLabelSeparator(labelSeparator){return this.labelSeparator===labelSeparator?this:(this.labelSeparator=labelSeparator,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const eLabel=this.eLabel;return eLabel.id=eLabel.id||`ag-${this.getCompId()}-label`,eLabel.id}getLabel(){return this.label}setLabel(label){return this.label===label?this:(this.label=label,this.refreshLabel(),this)}setLabelAlignment(alignment){const eGuiClassList=this.getGui().classList;return eGuiClassList.toggle("ag-label-align-left",alignment==="left"),eGuiClassList.toggle("ag-label-align-right",alignment==="right"),eGuiClassList.toggle("ag-label-align-top",alignment==="top"),this}setLabelEllipsis(hasEllipsis){return this.eLabel.classList.toggle("ag-label-ellipsis",hasEllipsis),this}setLabelWidth(width){return this.label==null?this:(_setElementWidth(this.eLabel,width),this)}setDisabled(disabled){disabled=!!disabled;const element=this.getGui();return _setDisabled(element,disabled),element.classList.toggle("ag-disabled",disabled),this.disabled=disabled,this}isDisabled(){return!!this.disabled}},__name(_a54,"AgAbstractLabel"),_a54),_a55,AgAbstractField=(_a55=class extends AgAbstractLabel{constructor(config,template,components,className){super(config,template,components),this.className=className}postConstruct(){super.postConstruct();const{width,value,onValueChange}=this.config;width!=null&&this.setWidth(width),value!=null&&this.setValue(value),onValueChange!=null&&this.onValueChange(onValueChange),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(label){return super.setLabel(label),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const ariaEl=this.getAriaElement(),labelId=this.getLabelId(),label=this.getLabel();label==null||label==""||_getAriaLabel(ariaEl)!==null?_setAriaLabelledBy(ariaEl,""):_setAriaLabelledBy(ariaEl,labelId??"")}setAriaLabel(label){return _setAriaLabel(this.getAriaElement(),label),this.refreshAriaLabelledBy(),this}onValueChange(callbackFn){return this.addManagedListeners(this,{fieldValueChanged:__name(()=>callbackFn(this.getValue()),"fieldValueChanged")}),this}getWidth(){return this.getGui().clientWidth}setWidth(width){return _setFixedWidth(this.getGui(),width),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(value,silent){return this.value===value?this:(this.previousValue=this.value,this.value=value,silent||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},__name(_a55,"AgAbstractField"),_a55);function buildTemplate(displayFieldTag){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:displayFieldTag,ref:"eInput",cls:"ag-input-field-input"}]}]}}__name(buildTemplate,"buildTemplate");var _a56,AgAbstractInputField=(_a56=class extends AgAbstractField{constructor(config,className,inputType="text",displayFieldTag="input"){super(config,(config==null?void 0:config.template)??buildTemplate(displayFieldTag),[],className),this.inputType=inputType,this.displayFieldTag=displayFieldTag,this.eLabel=RefPlaceholder,this.eWrapper=RefPlaceholder,this.eInput=RefPlaceholder}postConstruct(){super.postConstruct(),this.setInputType();const{eLabel,eWrapper,eInput,className}=this;eLabel.classList.add(`${className}-label`),eWrapper.classList.add(`${className}-input-wrapper`),eInput.classList.add(`${className}-input`),this.addCssClass("ag-input-field"),eInput.id=eInput.id||`ag-${this.getCompId()}-input`;const{inputName,inputWidth}=this.config;inputName!=null&&this.setInputName(inputName),inputWidth!=null&&this.setInputWidth(inputWidth),this.addInputListeners(),this.activateTabIndex([eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:__name(e=>this.setValue(e.target.value),"input")})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(width){return _setElementWidth(this.eWrapper,width),this}setInputName(name){return this.getInputElement().setAttribute("name",name),this}getFocusableElement(){return this.eInput}setMaxLength(length){const eInput=this.eInput;return eInput.maxLength=length,this}setInputPlaceholder(placeholder){return _addOrRemoveAttribute(this.eInput,"placeholder",placeholder),this}setInputAriaLabel(label){return _setAriaLabel(this.eInput,label),this.refreshAriaLabelledBy(),this}setDisabled(disabled){return _setDisabled(this.eInput,disabled),super.setDisabled(disabled)}setAutoComplete(value){if(value===!0)_addOrRemoveAttribute(this.eInput,"autocomplete",null);else{const autoCompleteValue=typeof value=="string"?value:"off";_addOrRemoveAttribute(this.eInput,"autocomplete",autoCompleteValue)}return this}},__name(_a56,"AgAbstractInputField"),_a56),_a57,AgCheckbox=(_a57=class extends AgAbstractInputField{constructor(config,className="ag-checkbox",inputType="checkbox"){super(config,className,inputType),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly,passive}=this.config;typeof readOnly=="boolean"&&this.setReadOnly(readOnly),typeof passive=="boolean"&&this.setPassive(passive)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(passive){this.passive=passive}isReadOnly(){return this.readOnly}setReadOnly(readOnly){this.eWrapper.classList.toggle("ag-disabled",readOnly),this.eInput.disabled=readOnly,this.readOnly=readOnly}setDisabled(disabled){return this.eWrapper.classList.toggle("ag-disabled",disabled),super.setDisabled(disabled)}toggle(){if(this.eInput.disabled)return;const previousValue=this.isSelected(),nextValue=this.getNextValue();this.passive?this.dispatchChange(nextValue,previousValue):this.setValue(nextValue)}getValue(){return this.isSelected()}setValue(value,silent){return this.refreshSelectedClass(value),this.setSelected(value,silent),this}setName(name){const input=this.getInputElement();return input.name=name,this}isSelected(){return this.selected}setSelected(selected,silent){if(this.isSelected()===selected)return;this.previousValue=this.isSelected(),selected=this.selected=typeof selected=="boolean"?selected:void 0;const eInput=this.eInput;eInput.checked=selected,eInput.indeterminate=selected===void 0,silent||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(selected,previousValue,event){this.dispatchLocalEvent({type:"fieldValueChanged",selected,previousValue,event});const input=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:input.id,name:input.name,selected,previousValue})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const previousValue=this.isSelected(),selected=this.selected=e.target.checked;this.refreshSelectedClass(selected),this.dispatchChange(selected,previousValue,e)}refreshSelectedClass(value){const classList=this.eWrapper.classList;classList.toggle("ag-checked",value===!0),classList.toggle("ag-indeterminate",value==null)}},__name(_a57,"AgCheckbox"),_a57),AgCheckboxSelector={selector:"AG-CHECKBOX",component:AgCheckbox},checkboxCellRendererCSS=".ag-checkbox-cell{height:100%}",CheckboxCellRendererElement={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},_a58,CheckboxCellRenderer=(_a58=class extends Component{constructor(){super(CheckboxCellRendererElement,[AgCheckboxSelector]),this.eCheckbox=RefPlaceholder,this.registerCSS(checkboxCellRendererCSS)}init(params){this.refresh(params);const{eCheckbox,beans}=this,inputEl=eCheckbox.getInputElement();inputEl.setAttribute("tabindex","-1"),_setAriaLive(inputEl,"polite"),this.addManagedListeners(inputEl,{click:__name(event=>{if(_stopPropagationForAgGrid(event),eCheckbox.isDisabled())return;const isSelected=eCheckbox.getValue();this.onCheckboxChanged(isSelected)},"click"),dblclick:__name(event=>{_stopPropagationForAgGrid(event)},"dblclick")}),this.addManagedElementListeners(params.eGridCell,{keydown:__name(event=>{if(event.key===KeyCode.SPACE&&!eCheckbox.isDisabled()){params.eGridCell===_getActiveDomElement(beans)&&eCheckbox.toggle();const isSelected=eCheckbox.getValue();this.onCheckboxChanged(isSelected),event.preventDefault()}},"keydown")})}refresh(params){return this.params=params,this.updateCheckbox(params),!0}updateCheckbox(params){let isSelected,displayed=!0;const{value,column,node}=params;if(node.group&&column)if(typeof value=="boolean")isSelected=value;else{const colId=column.getColId();colId.startsWith(GROUP_AUTO_COLUMN_ID)?isSelected=value==null||value===""?void 0:value==="true":node.aggData&&node.aggData[colId]!==void 0?isSelected=value??void 0:displayed=!1}else isSelected=value??void 0;const{eCheckbox}=this;if(!displayed){eCheckbox.setDisplayed(!1);return}eCheckbox.setValue(isSelected);const disabled=params.disabled??!(column!=null&&column.isCellEditable(node));eCheckbox.setDisabled(disabled);const translate=this.getLocaleTextFunc(),stateName=_getAriaCheckboxStateName(translate,isSelected),ariaLabel=disabled?stateName:`${translate("ariaToggleCellValue","Press SPACE to toggle cell value")} (${stateName})`;eCheckbox.setInputAriaLabel(ariaLabel)}onCheckboxChanged(isSelected){const{eventSvc,params}=this,{column,node,value}=params,sharedEventParams={column,colDef:column.getColDef(),data:node.data,node,rowIndex:node.rowIndex,rowPinned:node.rowPinned,value};eventSvc.dispatchEvent({type:"cellEditingStarted",...sharedEventParams});const valueChanged=node.setDataValue(column,isSelected,"edit");eventSvc.dispatchEvent({type:"cellEditingStopped",...sharedEventParams,oldValue:value,newValue:isSelected,valueChanged}),valueChanged||this.updateCheckbox(params)}},__name(_a58,"CheckboxCellRenderer"),_a58),ROOT_NODE_ID="ROOT_NODE_ID",_a59,AbstractClientSideNodeManager=(_a59=class extends BeanStub{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}get treeData(){return!1}getRowNode(id){return this.allNodesMap[id]}extractRowData(){var _a238,_b2;return(_b2=(_a238=this.rootNode)==null?void 0:_a238.allLeafChildren)==null?void 0:_b2.map(node=>node.data)}activate(rootNode){this.rootNode=rootNode,rootNode.group=!0,rootNode.level=-1,rootNode.id=ROOT_NODE_ID,rootNode.allLeafChildren=[],rootNode.childrenAfterGroup=[],rootNode.childrenAfterSort=[],rootNode.childrenAfterAggFilter=[],rootNode.childrenAfterFilter=[],this.updateRootSiblingArrays(rootNode)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(rowData){const rootNode=this.rootNode;rootNode&&(this.dispatchRowDataUpdateStartedEvent(rowData),rootNode.childrenAfterFilter=null,rootNode.childrenAfterGroup=null,rootNode.childrenAfterAggFilter=null,rootNode.childrenAfterSort=null,rootNode.childrenMapped=null,rootNode.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(rowData),this.updateRootSiblingArrays(rootNode))}updateRootSiblingArrays(rootNode){const sibling=rootNode.sibling;sibling&&(sibling.childrenAfterFilter=rootNode.childrenAfterFilter,sibling.childrenAfterGroup=rootNode.childrenAfterGroup,sibling.childrenAfterAggFilter=rootNode.childrenAfterAggFilter,sibling.childrenAfterSort=rootNode.childrenAfterSort,sibling.childrenMapped=rootNode.childrenMapped,sibling.allLeafChildren=rootNode.allLeafChildren)}loadNewRowData(rowData){this.rootNode.allLeafChildren=(rowData==null?void 0:rowData.map((dataItem,index)=>this.createRowNode(dataItem,index)))??[]}setImmutableRowData(params,rowData){const getRowIdFunc=_getRowIdCallback(this.gos),reorder=!this.gos.get("suppressMaintainUnsortedOrder"),changedRowNodes=params.changedRowNodes,processedNodes=new Set,rootNode=this.rootNode,oldAllLeafChildren=rootNode.allLeafChildren,oldAllLeafChildrenLen=oldAllLeafChildren.length;let nodesAdded=!1,nodesRemoved=!1,nodesUpdated=!1,orderChanged=!1;for(let i=0,prevSourceRowIndex=-1,len=rowData.length;i<len;i++){const data=rowData[i];let node=this.getRowNode(getRowIdFunc({data,level:0}));if(!node)nodesAdded=!0,node=this.createRowNode(data,-1),changedRowNodes.add(node);else{if(reorder){const sourceRowIndex=node.sourceRowIndex;orderChanged||(orderChanged=sourceRowIndex<=prevSourceRowIndex||nodesAdded),prevSourceRowIndex=sourceRowIndex}node.data!==data&&(nodesUpdated=!0,node.updateData(data),changedRowNodes.update(node))}processedNodes.add(node)}const nodesToUnselect=[];for(let i=0;i<oldAllLeafChildrenLen;i++){const node=oldAllLeafChildren[i];processedNodes.has(node)||(nodesRemoved=!0,node.isSelected()&&nodesToUnselect.push(node),this.rowNodeDeleted(node),changedRowNodes.remove(node))}if(nodesAdded||nodesRemoved||orderChanged){const newAllLeafChildren=new Array(processedNodes.size);let writeIdx=0;if(!reorder)for(let i=0;i<oldAllLeafChildrenLen;++i){const node=oldAllLeafChildren[i];processedNodes.delete(node)&&(node.sourceRowIndex=writeIdx,newAllLeafChildren[writeIdx++]=node)}for(const node of processedNodes)node.sourceRowIndex=writeIdx,newAllLeafChildren[writeIdx++]=node;rootNode.allLeafChildren=newAllLeafChildren;const sibling=rootNode.sibling;sibling&&(sibling.allLeafChildren=newAllLeafChildren),params.rowNodesOrderChanged||(params.rowNodesOrderChanged=orderChanged)}(nodesAdded||nodesRemoved||orderChanged||nodesUpdated)&&(this.deselectNodes(nodesToUnselect),params.rowDataUpdated=!0)}rowNodeDeleted(node){node.clearRowTopAndRowIndex();const id=node.id,allNodesMap=this.allNodesMap;allNodesMap[id]===node&&delete allNodesMap[id]}updateRowData(rowDataTran,changedRowNodes){this.dispatchRowDataUpdateStartedEvent(rowDataTran.add);const updateRowDataResult={changedRowNodes,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},nodesToUnselect=[],getRowIdFunc=_getRowIdCallback(this.gos);return this.executeRemove(getRowIdFunc,rowDataTran,updateRowDataResult,nodesToUnselect),this.executeUpdate(getRowIdFunc,rowDataTran,updateRowDataResult,nodesToUnselect),this.executeAdd(rowDataTran,updateRowDataResult),this.deselectNodes(nodesToUnselect),updateRowDataResult}executeAdd(rowDataTran,result){const add=rowDataTran.add;if(!(add!=null&&add.length))return;let allLeafChildren=this.rootNode.allLeafChildren,addIndex=allLeafChildren.length;if(typeof rowDataTran.addIndex=="number"&&(addIndex=this.sanitizeAddIndex(rowDataTran.addIndex),addIndex>0&&this.gos.get("treeData")&&this.gos.get("getDataPath")))for(let i=0;i<allLeafChildren.length;i++){const node=allLeafChildren[i];if((node==null?void 0:node.rowIndex)==addIndex-1){addIndex=i+1;break}}const addLength=add.length,changedRowNodes=result.changedRowNodes,newNodes=new Array(addLength);for(let i=0;i<addLength;i++){const newNode=this.createRowNode(add[i],addIndex+i);changedRowNodes.add(newNode),newNodes[i]=newNode}const rootNode=this.rootNode;if(addIndex<allLeafChildren.length){const nodesBeforeIndex=allLeafChildren.slice(0,addIndex),nodesAfterIndex=allLeafChildren.slice(addIndex,allLeafChildren.length),nodesAfterIndexFirstIndex=nodesBeforeIndex.length+newNodes.length;for(let index=0,length=nodesAfterIndex.length;index<length;++index)nodesAfterIndex[index].sourceRowIndex=nodesAfterIndexFirstIndex+index;allLeafChildren=[...nodesBeforeIndex,...newNodes,...nodesAfterIndex],result.rowsInserted=!0}else allLeafChildren=allLeafChildren.concat(newNodes);rootNode.allLeafChildren=allLeafChildren;const sibling=rootNode.sibling;sibling&&(sibling.allLeafChildren=allLeafChildren),result.rowNodeTransaction.add=newNodes}executeRemove(getRowIdFunc,rowDataTran,{changedRowNodes,rowNodeTransaction},nodesToUnselect){var _a238,_b2;const{remove}=rowDataTran;if(!(remove!=null&&remove.length))return;const rowIdsRemoved={};remove.forEach(item=>{const rowNode=this.lookupRowNode(getRowIdFunc,item);rowNode&&(rowNode.isSelected()&&nodesToUnselect.push(rowNode),rowNode.clearRowTopAndRowIndex(),rowIdsRemoved[rowNode.id]=!0,delete this.allNodesMap[rowNode.id],rowNodeTransaction.remove.push(rowNode),changedRowNodes.remove(rowNode))});const rootNode=this.rootNode;rootNode.allLeafChildren=((_a238=rootNode.allLeafChildren)==null?void 0:_a238.filter(rowNode=>!rowIdsRemoved[rowNode.id]))??null,(_b2=rootNode.allLeafChildren)==null||_b2.forEach((node,idx)=>{node.sourceRowIndex=idx});const sibling=rootNode.sibling;sibling&&(sibling.allLeafChildren=rootNode.allLeafChildren)}executeUpdate(getRowIdFunc,rowDataTran,{changedRowNodes,rowNodeTransaction},nodesToUnselect){const{update}=rowDataTran;update!=null&&update.length&&update.forEach(item=>{const rowNode=this.lookupRowNode(getRowIdFunc,item);rowNode&&(rowNode.updateData(item),!rowNode.selectable&&rowNode.isSelected()&&nodesToUnselect.push(rowNode),rowNodeTransaction.update.push(rowNode),changedRowNodes.update(rowNode))})}dispatchRowDataUpdateStartedEvent(rowData){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:rowData!=null&&rowData.length?rowData[0]:null})}deselectNodes(nodesToUnselect){var _a238;const source="rowDataChanged",selectionSvc=this.beans.selectionSvc,selectionChanged=nodesToUnselect.length>0;selectionChanged&&(selectionSvc==null||selectionSvc.setNodesSelected({newValue:!1,nodes:nodesToUnselect,suppressFinishActions:!0,source})),(_a238=selectionSvc==null?void 0:selectionSvc.updateGroupsFromChildrenSelections)==null||_a238.call(selectionSvc,source),selectionChanged&&this.eventSvc.dispatchEvent({type:"selectionChanged",source,selectedNodes:(selectionSvc==null?void 0:selectionSvc.getSelectedNodes())??null,serverSideState:null})}sanitizeAddIndex(addIndex){var _a238;const allChildrenCount=((_a238=this.rootNode.allLeafChildren)==null?void 0:_a238.length)??0;return addIndex<0||addIndex>=allChildrenCount||Number.isNaN(addIndex)?allChildrenCount:Math.ceil(addIndex)}createRowNode(data,sourceRowIndex){const node=new RowNode(this.beans);return node.parent=this.rootNode,node.level=0,node.group=!1,node.expanded=!1,node.sourceRowIndex=sourceRowIndex,node.setDataAndId(data,String(this.nextId)),this.allNodesMap[node.id]&&_warn(2,{nodeId:node.id}),this.allNodesMap[node.id]=node,this.nextId++,node}lookupRowNode(getRowIdFunc,data){var _a238,_b2;let rowNode;if(getRowIdFunc){const id=getRowIdFunc({data,level:0});if(rowNode=this.allNodesMap[id],!rowNode)return _error(4,{id}),null}else if(rowNode=(_b2=(_a238=this.rootNode)==null?void 0:_a238.allLeafChildren)==null?void 0:_b2.find(node=>node.data===data),!rowNode)return _error(5,{data}),null;return rowNode||null}},__name(_a59,"AbstractClientSideNodeManager"),_a59),CheckboxSelectionComponentElement={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},_a60,CheckboxSelectionComponent=(_a60=class extends Component{constructor(){super(CheckboxSelectionComponentElement,[AgCheckboxSelector]),this.eCheckbox=RefPlaceholder}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const translate=this.getLocaleTextFunc(),{rowNode,eCheckbox}=this,state=rowNode.isSelected(),stateName=_getAriaCheckboxStateName(translate,state),[ariaKey,ariaLabel]=rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],translatedLabel=translate(ariaKey,ariaLabel);eCheckbox.setValue(state,!0),eCheckbox.setInputAriaLabel(`${translatedLabel} (${stateName})`)}init(params){if(this.rowNode=params.rowNode,this.column=params.column,this.overrides=params.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:_stopPropagationForAgGrid,click:__name(event=>{var _a238;_stopPropagationForAgGrid(event),(_a238=this.beans.selectionSvc)==null||_a238.handleSelectionEvent(event,this.rowNode,"checkboxSelected")},"click")}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue,previousValue})=>{const curr=typeof currentValue=="object"?_getHideDisabledCheckboxes(currentValue):void 0,prev=typeof previousValue=="object"?_getHideDisabledCheckboxes(previousValue):void 0;curr!==prev&&this.onSelectableChanged()}),_getIsRowSelectable(this.gos)||typeof this.getIsVisible()=="function"){const showOrHideSelectListener=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:showOrHideSelectListener}),this.addManagedListeners(this.rowNode,{dataChanged:showOrHideSelectListener,cellChanged:showOrHideSelectListener}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column,rowNode,overrides,gos}=this;let selectable=rowNode.selectable;const isVisible=this.getIsVisible();if(selectable)if(typeof isVisible=="function"){const extraParams=overrides==null?void 0:overrides.callbackParams;if(!column)selectable=isVisible({...extraParams,node:rowNode,data:rowNode.data});else{const params=column.createColumnFunctionCallbackParams(rowNode);selectable=isVisible({...extraParams,...params})}}else selectable=isVisible??!1;const so=gos.get("rowSelection");if(so&&typeof so!="string"?!_getHideDisabledCheckboxes(so):column==null?void 0:column.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!selectable),this.setVisible(!0),this.setDisplayed(!0);return}if(overrides!=null&&overrides.removeHidden){this.setDisplayed(selectable);return}this.setVisible(selectable)}getIsVisible(){var _a238,_b2;const overrides=this.overrides;if(overrides)return overrides.isVisible;const so=this.gos.get("rowSelection");return so&&typeof so!="string"?_getCheckboxes(so):(_b2=(_a238=this.column)==null?void 0:_a238.getColDef())==null?void 0:_b2.checkboxSelection}},__name(_a60,"CheckboxSelectionComponent"),_a60),_a61,RowRangeSelectionContext=(_a61=class{constructor(rowModel){this.rowModel=rowModel,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(node){this.rootId=node.id,this.endId=null,this.cachedRange.length=0}setEndRange(end){this.endId=end.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const root=this.getRoot(),end=this.getEnd();if(root==null||end==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(root,end)??[]}return this.cachedRange}isInRange(node){return this.rootId===null?!1:this.getRange().some(nodeInRange=>nodeInRange.id===node.id)}getRoot(fallback){return this.rootId?this.rowModel.getRowNode(this.rootId)??null:fallback?(this.setRoot(fallback),fallback):null}getEnd(){return this.endId?this.rowModel.getRowNode(this.endId)??null:null}truncate(node){const range=this.getRange();if(range.length===0)return{keep:[],discard:[]};const discardAfter=range[0].id===this.rootId,idx=range.findIndex(rowNode=>rowNode.id===node.id);if(idx>-1){const above=range.slice(0,idx),below=range.slice(idx+1);return this.setEndRange(node),discardAfter?{keep:above,discard:below}:{keep:below,discard:above}}else return{keep:range,discard:[]}}extend(node,groupSelectsChildren=!1){const root=this.getRoot();if(root==null){const keep=this.getRange().slice();return groupSelectsChildren&&node.depthFirstSearch(node2=>!node2.group&&keep.push(node2)),keep.push(node),this.setRoot(node),{keep,discard:[]}}const newRange=this.rowModel.getNodesInRangeForSelection(root,node);if(!newRange)return this.setRoot(node),{keep:[node],discard:[]};if(newRange.find(newRangeNode=>newRangeNode.id===this.endId))return this.setEndRange(node),{keep:this.getRange(),discard:[]};{const discard=this.getRange().slice();return this.setEndRange(node),{keep:this.getRange(),discard}}}},__name(_a61,"RowRangeSelectionContext"),_a61),_a62,SelectAllFeature=(_a62=class extends BeanStub{constructor(column){super(),this.column=column,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const checkbox=this.cbSelectAll;checkbox.isDisplayed()&&!checkbox.getGui().contains(_getActiveDomElement(this.beans))&&(e.preventDefault(),checkbox.setValue(!checkbox.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(ctrl){this.headerCellCtrl=ctrl;const cbSelectAll=this.createManagedBean(new AgCheckbox);this.cbSelectAll=cbSelectAll,cbSelectAll.addCssClass("ag-header-select-all"),_setAriaRole(cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:__name(()=>this.showOrHideSelectAll(),"newColumnsLoaded"),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue,previousValue})=>{const getSelectAll=__name(rowSelection=>typeof rowSelection=="string"||!rowSelection||rowSelection.mode==="singleRow"?void 0:rowSelection.selectAll,"getSelectAll");getSelectAll(currentValue)!==getSelectAll(previousValue)&&this.showOrHideSelectAll()}),this.addManagedListeners(cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(fromColumnMoved=!1){const cbSelectAllVisible=this.isCheckboxSelection();this.cbSelectAllVisible=cbSelectAllVisible,this.cbSelectAll.setDisplayed(cbSelectAllVisible),cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(fromColumnMoved)}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const selectAllMode=this.getSelectAllMode(),selectionSvc=this.beans.selectionSvc,cbSelectAll=this.cbSelectAll,allSelected=selectionSvc.getSelectAllState(selectAllMode);cbSelectAll.setValue(allSelected);const hasNodesToSelect=selectionSvc.hasNodesToSelect(selectAllMode);cbSelectAll.setDisabled(!hasNodesToSelect),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(fromColumnMoved=!1){const translate=this.getLocaleTextFunc(),{headerCellCtrl,cbSelectAll,cbSelectAllVisible}=this,ariaStatus=cbSelectAll.getValue()?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked"),ariaLabel=translate("ariaRowSelectAll","Press Space to toggle all rows selection");headerCellCtrl.setAriaDescriptionProperty("selectAll",cbSelectAllVisible?`${ariaLabel} (${ariaStatus})`:null),cbSelectAll.setInputAriaLabel(translate("ariaHeaderSelection","Column with Header Selection")),fromColumnMoved||headerCellCtrl.announceAriaDescription()}checkSelectionType(feature){return _isMultiRowSelection(this.gos)?!0:(_warn(128,{feature}),!1)}checkRightRowModelType(feature){const{gos,rowModel}=this.beans;return _isClientSideRowModel(gos)||_isServerSideRowModel(gos)?!0:(_warn(129,{feature,rowModel:rowModel.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const value=this.cbSelectAll.getValue(),selectAll2=this.getSelectAllMode();let source="uiSelectAll";selectAll2==="currentPage"?source="uiSelectAllCurrentPage":selectAll2==="filtered"&&(source="uiSelectAllFiltered");const params={source,selectAll:selectAll2},selectionSvc=this.beans.selectionSvc;value?selectionSvc.selectAllRowNodes(params):selectionSvc.deselectAllRowNodes(params)}isCheckboxSelection(){var _a238;const{column,gos,beans}=this,rowSelection=gos.get("rowSelection"),colDef=column.getColDef(),{headerCheckboxSelection}=colDef;let result=!1;const newHeaderCheckbox=typeof rowSelection=="object";if(newHeaderCheckbox){const isSelectionCol=isColumnSelectionCol(column),isAutoCol=isColumnGroupAutoCol(column);(_getCheckboxLocation(rowSelection)==="autoGroupColumn"&&isAutoCol||isSelectionCol&&((_a238=beans.selectionColSvc)!=null&&_a238.isSelectionColumnEnabled()))&&(result=_getHeaderCheckbox(rowSelection))}else typeof headerCheckboxSelection=="function"?result=headerCheckboxSelection(_addGridCommonParams(gos,{column,colDef})):result=!!headerCheckboxSelection;const featureName=newHeaderCheckbox?"headerCheckbox":"headerCheckboxSelection";return result&&this.checkRightRowModelType(featureName)&&this.checkSelectionType(featureName)}getSelectAllMode(){const selectAll2=_getSelectAll(this.gos,!1);if(selectAll2)return selectAll2;const{headerCheckboxSelectionCurrentPageOnly,headerCheckboxSelectionFilteredOnly}=this.column.getColDef();return headerCheckboxSelectionCurrentPageOnly?"currentPage":headerCheckboxSelectionFilteredOnly?"filtered":"all"}},__name(_a62,"SelectAllFeature"),_a62),_a63,BaseSelectionService=(_a63=class extends BeanStub{postConstruct(){const{gos,beans}=this;this.selectionCtx=new RowRangeSelectionContext(beans.rowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const callback=_getIsRowSelectable(gos);callback!==this.isRowSelectable&&(this.isRowSelectable=callback,this.updateSelectable())}),this.isRowSelectable=_getIsRowSelectable(gos)}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new CheckboxSelectionComponent}createSelectAllFeature(column){return new SelectAllFeature(column)}isMultiSelect(){return _isMultiRowSelection(this.gos)}onRowCtrlSelected(rowCtrl,hasFocusFunc,gui){const selected=!!rowCtrl.rowNode.isSelected();rowCtrl.forEachGui(gui,gui2=>{gui2.rowComp.addOrRemoveCssClass("ag-row-selected",selected);const element=gui2.element;_setAriaSelected(element,selected),element.contains(_getActiveDomElement(this.beans))&&hasFocusFunc(gui2)})}announceAriaRowSelection(rowNode){var _a238;if(this.isRowSelectionBlocked(rowNode))return;const selected=rowNode.isSelected();if(!rowNode.selectable)return;const label=this.getLocaleTextFunc()(selected?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${selected?"deselect":"select"} this row`);(_a238=this.beans.ariaAnnounce)==null||_a238.announceValue(label,"rowSelection")}isRowSelectionBlocked(rowNode){return!rowNode.selectable||!!rowNode.rowPinned||!_isRowSelection(this.gos)}updateRowSelectable(rowNode,suppressSelectionUpdate){var _a238;const selectable=((_a238=this.isRowSelectable)==null?void 0:_a238.call(this,rowNode))??!0;return this.setRowSelectable(rowNode,selectable,suppressSelectionUpdate),selectable}setRowSelectable(rowNode,newVal,suppressSelectionUpdate){if(rowNode.selectable!==newVal){if(rowNode.selectable=newVal,rowNode.dispatchRowEvent("selectableChanged"),suppressSelectionUpdate)return;if(_getGroupSelectsDescendants(this.gos)){const selected=this.calculateSelectedFromChildren(rowNode);this.setNodesSelected({nodes:[rowNode],newValue:selected??!1,source:"selectableChanged"});return}rowNode.isSelected()&&!rowNode.selectable&&this.setNodesSelected({nodes:[rowNode],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(rowNode){var _a238;let atLeastOneSelected=!1,atLeastOneDeSelected=!1;if(!((_a238=rowNode.childrenAfterGroup)!=null&&_a238.length))return rowNode.selectable?rowNode.__selected:null;for(let i=0;i<rowNode.childrenAfterGroup.length;i++){const child=rowNode.childrenAfterGroup[i];let childState=child.isSelected();if(!child.selectable){const selectable=this.calculateSelectedFromChildren(child);if(selectable===null)continue;childState=selectable}switch(childState){case!0:atLeastOneSelected=!0;break;case!1:atLeastOneDeSelected=!0;break;default:return}}if(!(atLeastOneSelected&&atLeastOneDeSelected))return atLeastOneSelected?!0:atLeastOneDeSelected?!1:rowNode.selectable?rowNode.__selected:null}selectRowNode(rowNode,newValue,e,source="api"){const selectionNotAllowed=!rowNode.selectable&&newValue,selectionNotChanged=rowNode.__selected===newValue;if(selectionNotAllowed||selectionNotChanged)return!1;rowNode.__selected=newValue,rowNode.dispatchRowEvent("rowSelected");const sibling=rowNode.sibling;return sibling&&sibling.footer&&sibling.__localEventService&&sibling.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({..._createGlobalRowEvent(rowNode,this.gos,"rowSelected"),event:e||null,source}),!0}isCellCheckboxSelection(column,rowNode){const so=this.gos.get("rowSelection");if(so&&typeof so!="string"){const checkbox=isColumnSelectionCol(column)&&_getCheckboxes(so);return column.isColumnFunc(rowNode,checkbox)}else return column.isColumnFunc(rowNode,column.colDef.checkboxSelection)}inferNodeSelections(node,shiftKey,metaKey,source){const{gos,selectionCtx}=this,currentSelection=node.isSelected(),groupSelectsDescendants=_getGroupSelectsDescendants(gos),enableClickSelection=_getEnableSelection(gos),enableDeselection=_getEnableDeselection(gos),isMultiSelect=this.isMultiSelect(),isRowClicked=source==="rowClicked";if(isRowClicked&&groupSelectsDescendants&&node.group||isRowClicked&&!(enableClickSelection||enableDeselection))return null;if(shiftKey&&metaKey&&isMultiSelect){const root=selectionCtx.getRoot();if(root)if(root.isSelected()){const partition=selectionCtx.isInRange(node)?selectionCtx.truncate(node):selectionCtx.extend(node,groupSelectsDescendants);return{deselect:partition.discard,select:partition.keep,reset:!1}}else{const partition=selectionCtx.extend(node,groupSelectsDescendants);return{select:[],deselect:partition.keep,reset:!1}}else return null}else if(shiftKey&&isMultiSelect){const fallback=selectionCtx.selectAll?this.beans.rowModel.getRow(0):void 0,root=selectionCtx.getRoot(fallback),partition=selectionCtx.isInRange(node)?selectionCtx.truncate(node):selectionCtx.extend(node,groupSelectsDescendants);return{select:partition.keep,deselect:partition.discard,reset:selectionCtx.selectAll||!!(root&&!root.isSelected())}}else{if(metaKey)return selectionCtx.setRoot(node),isRowClicked&&currentSelection&&!enableDeselection?null:{node,newValue:!currentSelection,clearSelection:!isMultiSelect};{selectionCtx.setRoot(node);const enableSelectionWithoutKeys=_getEnableSelectionWithoutKeys(gos),groupSelectsFiltered=_getGroupSelection(gos)==="filteredDescendants",shouldClear=isRowClicked&&(!enableSelectionWithoutKeys||!enableClickSelection);if(groupSelectsFiltered&&currentSelection===void 0&&_isClientSideRowModel(gos))return{node,newValue:!1,clearSelection:!isMultiSelect||shouldClear};if(isRowClicked){const newValue=currentSelection?!enableSelectionWithoutKeys:enableClickSelection;return newValue===currentSelection&&!shouldClear||newValue&&!enableClickSelection||!newValue&&!enableDeselection?null:{node,newValue,clearSelection:!isMultiSelect||shouldClear}}return{node,newValue:!currentSelection,clearSelection:!isMultiSelect||shouldClear}}}}},__name(_a63,"BaseSelectionService"),_a63),_a64,AgRadioButton=(_a64=class extends AgCheckbox{constructor(config){super(config,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(event){const eInput=this.eInput;event.selected&&event.name&&eInput.name&&eInput.name===event.name&&event.id&&eInput.id!==event.id&&this.setValue(!1,!0)}},__name(_a64,"AgRadioButton"),_a64),_a65,AgInputTextField=(_a65=class extends AgAbstractInputField{constructor(config,className="ag-text-field",inputType="text"){super(config,className,inputType)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(value,silent){const eInput=this.eInput;return eInput.value!==value&&(eInput.value=_exists(value)?value:""),super.setValue(value,silent)}setStartValue(value){this.setValue(value,!0)}preventDisallowedCharacters(){const pattern=new RegExp(`[${this.config.allowedCharPattern}]`),preventCharacters=__name(event=>{_isEventFromPrintableCharacter(event)&&event.key&&!pattern.test(event.key)&&event.preventDefault()},"preventCharacters");this.addManagedListeners(this.eInput,{keydown:preventCharacters,paste:__name(e=>{var _a238;const text=(_a238=e.clipboardData)==null?void 0:_a238.getData("text");text&&text.split("").some(c=>!pattern.test(c))&&e.preventDefault()},"paste")})}},__name(_a65,"AgInputTextField"),_a65),AgInputTextFieldSelector={selector:"AG-INPUT-TEXT-FIELD",component:AgInputTextField},_a66,AgInputTextArea=(_a66=class extends AgAbstractInputField{constructor(config){super(config,"ag-text-area",null,"textarea")}setValue(value,silent){const ret=super.setValue(value,silent);return this.eInput.value=value,ret}setCols(cols){return this.eInput.cols=cols,this}setRows(rows){return this.eInput.rows=rows,this}},__name(_a66,"AgInputTextArea"),_a66),AgInputTextAreaSelector={selector:"AG-INPUT-TEXT-AREA",component:AgInputTextArea},_a67,AgInputNumberField=(_a67=class extends AgInputTextField{constructor(config){super(config,"ag-number-field","number")}postConstruct(){super.postConstruct();const eInput=this.eInput;this.addManagedListeners(eInput,{blur:__name(()=>{const floatedValue=parseFloat(eInput.value),value=isNaN(floatedValue)?"":this.normalizeValue(floatedValue.toString());this.value!==value&&this.setValue(value)},"blur"),wheel:this.onWheel.bind(this)}),eInput.step="any";const{precision,min,max,step}=this.config;typeof precision=="number"&&this.setPrecision(precision),typeof min=="number"&&this.setMin(min),typeof max=="number"&&this.setMax(max),typeof step=="number"&&this.setStep(step)}onWheel(e){_getActiveDomElement(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(value){if(value==="")return"";this.precision!=null&&(value=this.adjustPrecision(value));const val=parseFloat(value),{min,max}=this;return min!=null&&val<min?value=min.toString():max!=null&&val>max&&(value=max.toString()),value}adjustPrecision(value,isScientificNotation){const precision=this.precision;if(precision==null)return value;if(isScientificNotation){const floatString=parseFloat(value).toFixed(precision);return parseFloat(floatString).toString()}const parts=String(value).split(".");if(parts.length>1){if(parts[1].length<=precision)return value;if(precision>0)return`${parts[0]}.${parts[1].slice(0,precision)}`}return parts[0]}setMin(min){return this.min===min?this:(this.min=min,_addOrRemoveAttribute(this.eInput,"min",min),this)}setMax(max){return this.max===max?this:(this.max=max,_addOrRemoveAttribute(this.eInput,"max",max),this)}setPrecision(precision){return this.precision=precision,this}setStep(step){return this.step===step?this:(this.step=step,_addOrRemoveAttribute(this.eInput,"step",step),this)}setValue(value,silent){return this.setValueOrInputValue(v=>super.setValue(v,silent),()=>this,value)}setStartValue(value){return this.setValueOrInputValue(v=>super.setValue(v,!0),v=>{this.eInput.value=v},value)}setValueOrInputValue(setValueFunc,setInputValueOnlyFunc,value){if(_exists(value)){let setInputValueOnly=this.isScientificNotation(value);if(setInputValueOnly&&this.eInput.validity.valid)return setValueFunc(value);if(!setInputValueOnly){value=this.adjustPrecision(value);const normalizedValue=this.normalizeValue(value);setInputValueOnly=value!=normalizedValue}if(setInputValueOnly)return setInputValueOnlyFunc(value)}return setValueFunc(value)}getValue(){const eInput=this.eInput;if(!eInput.validity.valid)return;const inputValue=eInput.value;return this.isScientificNotation(inputValue)?this.adjustPrecision(inputValue,!0):super.getValue()}isScientificNotation(value){return typeof value=="string"&&value.includes("e")}},__name(_a67,"AgInputNumberField"),_a67),AgInputNumberFieldSelector={selector:"AG-INPUT-NUMBER-FIELD",component:AgInputNumberField};function _padStartWidthZeros(value,totalStringSize){return value.toString().padStart(totalStringSize,"0")}__name(_padStartWidthZeros,"_padStartWidthZeros");function _serialiseDate(date,includeTime=!0,separator="-"){if(!date)return null;let serialised=[date.getFullYear(),date.getMonth()+1,date.getDate()].map(part=>_padStartWidthZeros(part,2)).join(separator);return includeTime&&(serialised+=" "+[date.getHours(),date.getMinutes(),date.getSeconds()].map(part=>_padStartWidthZeros(part,2)).join(":")),serialised}__name(_serialiseDate,"_serialiseDate");var calculateOrdinal=__name(value=>{if(value>3&&value<21)return"th";switch(value%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},"calculateOrdinal");function _dateToFormattedString(date,format="YYYY-MM-DD"){const fullYear=_padStartWidthZeros(date.getFullYear(),4),months=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],replace={YYYY:__name(()=>fullYear.slice(fullYear.length-4,fullYear.length),"YYYY"),YY:__name(()=>fullYear.slice(fullYear.length-2,fullYear.length),"YY"),Y:__name(()=>`${date.getFullYear()}`,"Y"),MMMM:__name(()=>months[date.getMonth()],"MMMM"),MMM:__name(()=>months[date.getMonth()].slice(0,3),"MMM"),MM:__name(()=>_padStartWidthZeros(date.getMonth()+1,2),"MM"),Mo:__name(()=>`${date.getMonth()+1}${calculateOrdinal(date.getMonth()+1)}`,"Mo"),M:__name(()=>`${date.getMonth()+1}`,"M"),Do:__name(()=>`${date.getDate()}${calculateOrdinal(date.getDate())}`,"Do"),DD:__name(()=>_padStartWidthZeros(date.getDate(),2),"DD"),D:__name(()=>`${date.getDate()}`,"D"),dddd:__name(()=>days[date.getDay()],"dddd"),ddd:__name(()=>days[date.getDay()].slice(0,3),"ddd"),dd:__name(()=>days[date.getDay()].slice(0,2),"dd"),do:__name(()=>`${date.getDay()}${calculateOrdinal(date.getDay())}`,"do"),d:__name(()=>`${date.getDay()}`,"d")},regexp=new RegExp(Object.keys(replace).join("|"),"g");return format.replace(regexp,match=>match in replace?replace[match]():match)}__name(_dateToFormattedString,"_dateToFormattedString");function _parseDateTimeFromString(value){if(!value)return null;const[dateStr,timeStr]=value.split(" ");if(!dateStr)return null;const fields=dateStr.split("-").map(f=>parseInt(f,10));if(fields.filter(f=>!isNaN(f)).length!==3)return null;const[year,month,day]=fields,date=new Date(year,month-1,day);if(date.getFullYear()!==year||date.getMonth()!==month-1||date.getDate()!==day)return null;if(!timeStr||timeStr==="00:00:00")return date;const[hours,minutes,seconds]=timeStr.split(":").map(part=>parseInt(part,10));return hours>=0&&hours<24&&date.setHours(hours),minutes>=0&&minutes<60&&date.setMinutes(minutes),seconds>=0&&seconds<60&&date.setSeconds(seconds),date}__name(_parseDateTimeFromString,"_parseDateTimeFromString");var _a68,AgInputDateField=(_a68=class extends AgInputTextField{constructor(config){super(config,"ag-date-field","date")}postConstruct(){super.postConstruct();const usingSafari=_isBrowserSafari();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:__name(()=>{this.isDisabled()||usingSafari||this.eInput.focus()},"mousedown")}),this.eInput.step="any"}onWheel(e){_getActiveDomElement(this.beans)===this.eInput&&e.preventDefault()}setMin(minDate){const min=minDate instanceof Date?_serialiseDate(minDate??null,!1)??void 0:minDate;return this.min===min?this:(this.min=min,_addOrRemoveAttribute(this.eInput,"min",min),this)}setMax(maxDate){const max=maxDate instanceof Date?_serialiseDate(maxDate??null,!1)??void 0:maxDate;return this.max===max?this:(this.max=max,_addOrRemoveAttribute(this.eInput,"max",max),this)}setStep(step){return this.step===step?this:(this.step=step,_addOrRemoveAttribute(this.eInput,"step",step),this)}getDate(){if(this.eInput.validity.valid)return _parseDateTimeFromString(this.getValue())??void 0}setDate(date,silent){this.setValue(_serialiseDate(date??null,!1),silent)}},__name(_a68,"AgInputDateField"),_a68),AgInputDateFieldSelector={selector:"AG-INPUT-DATE-FIELD",component:AgInputDateField},SHOW_QUICK_TOOLTIP_DIFF=1e3,FADE_OUT_TOOLTIP_TIMEOUT=1e3,INTERACTIVE_HIDE_DELAY=100,lastTooltipHideTime,isLocked=!1,_a69,TooltipStateManager=(_a69=class extends BeanStub{constructor(tooltipCtrl,getTooltipValue){super(),this.tooltipCtrl=tooltipCtrl,this.getTooltipValue=getTooltipValue,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(beans){this.popupSvc=beans.popupSvc,this.userCompFactory=beans.userCompFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const el=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(el,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(el,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(el,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(el,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(delayOption){const delay=this.gos.get(delayOption);return Math.max(200,delay)}getTooltipDelay(type){var _a238,_b2,_c,_d;return type==="show"?((_b2=(_a238=this.tooltipCtrl).getTooltipShowDelayOverride)==null?void 0:_b2.call(_a238))??this.getGridOptionsTooltipDelay("tooltipShowDelay"):((_d=(_c=this.tooltipCtrl).getTooltipHideDelayOverride)==null?void 0:_d.call(_c))??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const trigger=this.gos.get("tooltipTrigger");return!trigger||trigger==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!_isIOSUserAgent()&&(isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var _a238;const relatedTarget=e.relatedTarget,parentCompGui=this.tooltipCtrl.getGui(),tooltipGui=(_a238=this.tooltipComp)==null?void 0:_a238.getGui();this.isInteractingWithTooltip||parentCompGui.contains(relatedTarget)||this.interactionEnabled&&(tooltipGui!=null&&tooltipGui.contains(relatedTarget))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(mouseEvent){if(this.state!=0||isLocked)return;let delay=0;mouseEvent&&(delay=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=mouseEvent||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),delay),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-lastTooltipHideTime<SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(fromHideTooltip){!fromHideTooltip&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){var _a238,_b2,_c,_d,_e,_f,_g;const value=this.getTooltipValue(),ctrl=this.tooltipCtrl;if(!_exists(value)||ctrl.shouldDisplayTooltip&&!ctrl.shouldDisplayTooltip()){this.setToDoNothing();return}const rowNode=(_a238=ctrl.getRowNode)==null?void 0:_a238.call(ctrl),params=_addGridCommonParams(this.gos,{location:((_b2=ctrl.getLocation)==null?void 0:_b2.call(ctrl))??"UNKNOWN",colDef:(_c=ctrl.getColDef)==null?void 0:_c.call(ctrl),column:(_d=ctrl.getColumn)==null?void 0:_d.call(ctrl),rowIndex:(_e=ctrl.getRowIndex)==null?void 0:_e.call(ctrl),node:rowNode,data:rowNode==null?void 0:rowNode.data,value,valueFormatted:(_f=ctrl.getValueFormatted)==null?void 0:_f.call(ctrl),hideTooltipCallback:__name(()=>this.hideTooltip(!0),"hideTooltipCallback"),...((_g=ctrl.getAdditionalParams)==null?void 0:_g.call(ctrl))??{}});this.state=2,this.tooltipInstanceCount++;const callback=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),userDetails=_getTooltipCompDetails(this.userCompFactory,params);userDetails==null||userDetails.newAgStackInstance().then(callback)}hideTooltip(forceHide){!forceHide&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),lastTooltipHideTime=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),forceHide&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(tooltipInstanceCopy,tooltipComp){var _a238;if(this.state!==2||this.tooltipInstanceCount!==tooltipInstanceCopy){this.destroyBean(tooltipComp);return}const eGui=tooltipComp.getGui();this.tooltipComp=tooltipComp,eGui.classList.contains("ag-tooltip")||eGui.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&eGui.classList.add("ag-tooltip-animate"),this.interactionEnabled&&eGui.classList.add("ag-tooltip-interactive");const translate=this.getLocaleTextFunc(),addPopupRes=(_a238=this.popupSvc)==null?void 0:_a238.addPopup({eChild:eGui,ariaLabel:translate("ariaLabelTooltip","Tooltip")});if(addPopupRes&&(this.tooltipPopupDestroyFunc=addPopupRes.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const listener=__name(()=>this.setToDoNothing(),"listener");[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:listener,columnMoved:listener})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(eGui,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(_getDocument(this.beans),{keydown:__name(e=>{eGui.contains(e==null?void 0:e.target)||this.onKeyDown()},"keydown")}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(eGui,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:eGui,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var _a238;const tooltipGui=(_a238=this.tooltipComp)==null?void 0:_a238.getGui(),activeEl=_getActiveDomElement(this.beans);return!!tooltipGui&&tooltipGui.contains(activeEl)}onTooltipFocusOut(e){const parentGui=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,parentGui.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){var _a238,_b2;const params={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?(_a238=this.popupSvc)==null||_a238.positionPopupUnderMouseEvent({...params,mouseEvent:this.lastMouseEvent}):(_b2=this.popupSvc)==null||_b2.positionPopupByComponent({...params,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const tooltipPopupDestroyFunc=this.tooltipPopupDestroyFunc,tooltipComp=this.tooltipComp,delay=this.tooltipTrigger===0?FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{tooltipPopupDestroyFunc(),this.destroyBean(tooltipComp)},delay),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(listener=>{listener&&listener()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},INTERACTIVE_HIDE_DELAY)}unlockService(){isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},__name(_a69,"TooltipStateManager"),_a69);function _isShowTooltipWhenTruncated(gos){return gos.get("tooltipShowMode")==="whenTruncated"}__name(_isShowTooltipWhenTruncated,"_isShowTooltipWhenTruncated");function _shouldDisplayTooltip(getElement){return()=>{const element=getElement();return element?element.scrollWidth>element.clientWidth:!0}}__name(_shouldDisplayTooltip,"_shouldDisplayTooltip");var _a70,TooltipFeature=(_a70=class extends BeanStub{constructor(ctrl,beans){super(),this.ctrl=ctrl,beans&&(this.beans=beans)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(tooltip){const name="title",eGui=this.ctrl.getGui();eGui&&(tooltip!=null&&tooltip!=""?eGui.setAttribute(name,tooltip):eGui.removeAttribute(name))}updateTooltipText(){const{getTooltipValue}=this.ctrl;getTooltipValue&&(this.tooltip=getTooltipValue())}createTooltipFeatureIfNeeded(){this.tooltipManager==null&&(this.tooltipManager=this.createBean(new TooltipStateManager(this.ctrl,()=>this.tooltip),this.beans.context))}setTooltipAndRefresh(tooltip){this.tooltip=tooltip,this.refreshTooltip()}refreshTooltip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},__name(_a70,"TooltipFeature"),_a70),_a71,AgList=(_a71=class extends Component{constructor(cssIdentifier="default",unFocusable=!1){super({tag:"div",cls:`ag-list ag-${cssIdentifier}-list`}),this.cssIdentifier=cssIdentifier,this.unFocusable=unFocusable,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const eGui=this.getGui();this.addManagedElementListeners(eGui,{mouseleave:__name(()=>this.clearHighlighted(),"mouseleave")}),!this.unFocusable&&this.addManagedElementListeners(eGui,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const key=e.key;switch(key){case KeyCode.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const pos=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(pos)}break;case KeyCode.DOWN:case KeyCode.UP:e.preventDefault(),this.navigate(key);break;case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:e.preventDefault(),this.navigateToPage(key);break}}navigate(key){const isDown=key===KeyCode.DOWN;let itemToHighlight;const{itemEls,highlightedEl}=this;if(!highlightedEl)itemToHighlight=itemEls[isDown?0:itemEls.length-1];else{let nextPos=itemEls.indexOf(highlightedEl)+(isDown?1:-1);nextPos=Math.min(Math.max(nextPos,0),itemEls.length-1),itemToHighlight=itemEls[nextPos]}this.highlightItem(itemToHighlight)}navigateToPage(key){const{itemEls,highlightedEl}=this;if(!highlightedEl||itemEls.length===0)return;const currentIdx=itemEls.indexOf(highlightedEl),rowCount=this.options.length-1,itemHeight=itemEls[0].clientHeight,pageSize=Math.floor(this.getGui().clientHeight/itemHeight);let newIndex=-1;key===KeyCode.PAGE_HOME?newIndex=0:key===KeyCode.PAGE_END?newIndex=rowCount:key===KeyCode.PAGE_DOWN?newIndex=Math.min(currentIdx+pageSize,rowCount):key===KeyCode.PAGE_UP&&(newIndex=Math.max(currentIdx-pageSize,0)),newIndex!==-1&&this.highlightItem(itemEls[newIndex])}addOptions(listOptions){return listOptions.forEach(listOption=>this.addOption(listOption)),this}addOption(listOption){const{value,text}=listOption,valueToRender=text||value;return this.options.push({value,text:valueToRender}),this.renderOption(value,valueToRender),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(itemEl=>{_removeFromParent(itemEl)}),this.itemEls=[],this.refreshAriaRole()}refreshAriaRole(){const eGui=this.getGui();_setAriaRole(eGui,this.options.length===0?"presentation":"listbox")}updateIndices(){const options=this.getGui().querySelectorAll(".ag-list-item");this.refreshAriaRole(),options.forEach((option,idx)=>{_setAriaPosInSet(option,idx+1),_setAriaSetSize(option,options.length)})}renderOption(value,text){const eDocument=_getDocument(this.beans),itemEl=eDocument.createElement("div");_setAriaRole(itemEl,"option"),itemEl.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const span=eDocument.createElement("span");itemEl.appendChild(span),span.textContent=text,this.unFocusable||(itemEl.tabIndex=-1),this.itemEls.push(itemEl),this.addManagedListeners(itemEl,{mouseover:__name(()=>this.highlightItem(itemEl),"mouseover"),mousedown:__name(e=>{e.preventDefault(),e.stopPropagation(),this.setValue(value)},"mousedown")}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:__name(()=>text,"getTooltipValue"),getGui:__name(()=>itemEl,"getGui"),getLocation:__name(()=>"UNKNOWN","getLocation"),shouldDisplayTooltip:__name(()=>span.scrollWidth>span.clientWidth,"shouldDisplayTooltip")})),this.getGui().appendChild(itemEl)}setValue(value,silent){if(this.value===value)return this.fireItemSelected(),this;if(value==null)return this.reset(silent),this;const idx=this.options.findIndex(option=>option.value===value);if(idx!==-1){const option=this.options[idx];this.value=option.value,this.displayValue=option.text,this.highlightItem(this.itemEls[idx]),silent||this.fireChangeEvent()}return this}setValueByIndex(idx){return this.setValue(this.options[idx].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const idx=this.options.findIndex(option=>option.value===this.value);idx!==-1&&this.highlightItem(this.itemEls[idx])}reset(silent){this.value=null,this.displayValue=null,this.clearHighlighted(),silent||this.fireChangeEvent()}highlightItem(el){if(!_isVisible(el))return;this.clearHighlighted(),this.highlightedEl=el,el.classList.add(this.activeClass),_setAriaSelected(el,!0);const eGui=this.getGui(),{scrollTop,clientHeight}=eGui,{offsetTop,offsetHeight}=el;(offsetTop+offsetHeight>scrollTop+clientHeight||offsetTop<scrollTop)&&el.scrollIntoView({block:"nearest"}),this.unFocusable||el.focus()}clearHighlighted(){const highlightedEl=this.highlightedEl;!highlightedEl||!_isVisible(highlightedEl)||(highlightedEl.classList.remove(this.activeClass),_setAriaSelected(highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},__name(_a71,"AgList"),_a71),agPickerFieldCSS=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:disabled{opacity:.5}&.ag-picker-has-focus,&:focus-within{background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow)}}",AgPickerFieldElement={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},_a72,AgPickerField=(_a72=class extends AgAbstractField{constructor(config){if(super(config,(config==null?void 0:config.template)||AgPickerFieldElement,(config==null?void 0:config.agComponents)||[],config==null?void 0:config.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=RefPlaceholder,this.eWrapper=RefPlaceholder,this.eDisplayField=RefPlaceholder,this.eIcon=RefPlaceholder,this.registerCSS(agPickerFieldCSS),this.ariaRole=config==null?void 0:config.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!config)return;const{pickerGap,maxPickerHeight,variableWidth,minPickerWidth,maxPickerWidth}=config;pickerGap!=null&&(this.pickerGap=pickerGap),this.variableWidth=!!variableWidth,maxPickerHeight!=null&&this.setPickerMaxHeight(maxPickerHeight),minPickerWidth!=null&&this.setPickerMinWidth(minPickerWidth),maxPickerWidth!=null&&this.setPickerMaxWidth(maxPickerWidth)}postConstruct(){super.postConstruct(),this.setupAria();const displayId=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",displayId);const ariaEl=this.getAriaElement();this.addManagedElementListeners(ariaEl,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon,inputWidth}=this.config;if(pickerIcon){const icon=_createIconNoSpan(pickerIcon,this.beans);icon&&this.eIcon.appendChild(icon)}inputWidth!=null&&this.setInputWidth(inputWidth)}setupAria(){const ariaEl=this.getAriaElement();ariaEl.setAttribute("tabindex",this.gos.get("tabIndex").toString()),_setAriaExpanded(ariaEl,!1),this.ariaRole&&_setAriaRole(ariaEl,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const focusableEl=this.getFocusableElement();if(focusableEl!==this.eWrapper&&(e==null?void 0:e.target)===focusableEl)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:case KeyCode.ENTER:case KeyCode.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case KeyCode.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const pickerGui=this.pickerComponent.getGui();pickerGui.addEventListener("focusin",this.onPickerFocusIn),pickerGui.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const ePicker=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:__name(()=>{this.hidePicker()},"bodyScroll")}));const translate=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey,pickerAriaLabelValue,modalPicker=!0},maxPickerHeight,minPickerWidth,maxPickerWidth,variableWidth,beans,eWrapper}=this,popupParams={modal:modalPicker,eChild:ePicker,closeOnEsc:!0,closedCallback:__name(()=>{const shouldRestoreFocus=_isNothingFocused(beans);this.beforeHidePicker(),shouldRestoreFocus&&this.isAlive()&&this.getFocusableElement().focus()},"closedCallback"),ariaLabel:translate(pickerAriaLabelKey,pickerAriaLabelValue),anchorToElement:eWrapper};ePicker.style.position="absolute";const popupSvc=beans.popupSvc,addPopupRes=popupSvc.addPopup(popupParams);variableWidth?(minPickerWidth&&(ePicker.style.minWidth=minPickerWidth),ePicker.style.width=_formatSize(_getAbsoluteWidth(eWrapper)),maxPickerWidth&&(ePicker.style.maxWidth=maxPickerWidth)):_setElementWidth(ePicker,maxPickerWidth??_getAbsoluteWidth(eWrapper));const maxHeight=maxPickerHeight??`${_getInnerHeight(popupSvc.getPopupParent())}px`;return ePicker.style.setProperty("max-height",maxHeight),this.alignPickerToComponent(),addPopupRes.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap,config:{pickerType},beans:{popupSvc,gos},eWrapper,pickerComponent}=this,alignSide=gos.get("enableRtl")?"right":"left";popupSvc.positionPopupByComponent({type:pickerType,eventSource:eWrapper,ePopup:pickerComponent.getGui(),position:"under",alignSide,keepWithinBounds:!0,nudgeY:pickerGap})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const pickerGui=this.pickerComponent.getGui();pickerGui.removeEventListener("focusin",this.onPickerFocusIn),pickerGui.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(expanded){if(!this.isAlive())return;const ariaEl=this.getAriaElement();_setAriaExpanded(ariaEl,expanded);const classList=this.eWrapper.classList;classList.toggle("ag-picker-expanded",expanded),classList.toggle("ag-picker-collapsed",!expanded)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var _a238;(_a238=this.pickerComponent)!=null&&_a238.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(focused){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",focused)}hidePicker(){var _a238;(_a238=this.hideCurrentPicker)==null||_a238.call(this)}setInputWidth(width){return _setElementWidth(this.eWrapper,width),this}getFocusableElement(){return this.eWrapper}setPickerGap(gap){return this.pickerGap=gap,this}setPickerMinWidth(width){return typeof width=="number"&&(width=`${width}px`),this.minPickerWidth=width??void 0,this}setPickerMaxWidth(width){return typeof width=="number"&&(width=`${width}px`),this.maxPickerWidth=width??void 0,this}setPickerMaxHeight(height){return typeof height=="number"&&(height=`${height}px`),this.maxPickerHeight=height??void 0,this}destroy(){this.hidePicker(),super.destroy()}},__name(_a72,"AgPickerField"),_a72),agSelectCSS=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}",_a73,AgSelect=(_a73=class extends AgPickerField{constructor(config){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...config}),this.registerCSS(agSelectCSS)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:_shouldDisplayTooltip(()=>this.eDisplayField),getGui:__name(()=>this.getGui(),"getGui")})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options,value,placeholder}=this.config;options!=null&&this.addOptions(options),value!=null&&this.setValue(value,!0),placeholder&&value==null&&(this.eDisplayField.textContent=placeholder),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const listComponent=this.createBean(new AgList("select",!0));this.listComponent=listComponent,listComponent.setParentComponent(this);const eListAriaEl=listComponent.getAriaElement(),listId=`ag-select-list-${listComponent.getCompId()}`;eListAriaEl.setAttribute("id",listId),_setAriaControls(this.getAriaElement(),eListAriaEl),listComponent.addManagedElementListeners(listComponent.getGui(),{mousedown:__name(e=>{e==null||e.preventDefault()},"mousedown")}),listComponent.addManagedListeners(listComponent,{selectedItem:__name(()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},"selectedItem"),fieldValueChanged:__name(()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())},"fieldValueChanged")})}createPickerComponent(){return this.listComponent}onKeyDown(e){var _a238;const{key}=e;switch(key===KeyCode.TAB&&this.hidePicker(),key){case KeyCode.ENTER:case KeyCode.UP:case KeyCode.DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(_a238=this.listComponent)==null||_a238.handleKeyDown(e):super.onKeyDown(e);break;case KeyCode.ESCAPE:super.onKeyDown(e);break;case KeyCode.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const listComponent=this.listComponent;listComponent&&(super.showPicker(),listComponent.refreshHighlighted())}addOptions(options){return options.forEach(option=>this.addOption(option)),this}addOption(option){return this.listComponent.addOption(option),this}clearOptions(){var _a238;return(_a238=this.listComponent)==null||_a238.clearOptions(),this.setValue(void 0,!0),this}setValue(value,silent,fromPicker){const{listComponent,config:{placeholder},eDisplayField,tooltipFeature}=this;if(this.value===value||!listComponent)return this;if(fromPicker||listComponent.setValue(value,!0),listComponent.getValue()===this.getValue())return this;let displayValue=listComponent.getDisplayValue();return displayValue==null&&placeholder&&(displayValue=placeholder),eDisplayField.textContent=displayValue,tooltipFeature==null||tooltipFeature.setTooltipAndRefresh(displayValue??null),super.setValue(value,silent)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},__name(_a73,"AgSelect"),_a73),AgSelectSelector={selector:"AG-SELECT",component:AgSelect},TabGuardClassNames={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},_a74,TabGuardCtrl=(_a74=class extends BeanStub{constructor(params){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp,eTopGuard,eBottomGuard,focusTrapActive,forceFocusOutWhenTabGuardsAreEmpty,isFocusableContainer,focusInnerElement,onFocusIn,onFocusOut,shouldStopEventPropagation,onTabKeyDown,handleKeyDown,isEmpty,eFocusableElement}=params;this.comp=comp,this.eTopGuard=eTopGuard,this.eBottomGuard=eBottomGuard,this.providedFocusInnerElement=focusInnerElement,this.eFocusableElement=eFocusableElement,this.focusTrapActive=!!focusTrapActive,this.forceFocusOutWhenTabGuardsAreEmpty=!!forceFocusOutWhenTabGuardsAreEmpty,this.isFocusableContainer=!!isFocusableContainer,this.providedFocusIn=onFocusIn,this.providedFocusOut=onFocusOut,this.providedShouldStopEventPropagation=shouldStopEventPropagation,this.providedOnTabKeyDown=onTabKeyDown,this.providedHandleKeyDown=handleKeyDown,this.providedIsEmpty=isEmpty}postConstruct(){this.createManagedBean(new ManagedFocusFeature(this.eFocusableElement,{shouldStopEventPropagation:__name(()=>this.shouldStopEventPropagation(),"shouldStopEventPropagation"),onTabKeyDown:__name(e=>this.onTabKeyDown(e),"onTabKeyDown"),handleKeyDown:__name(e=>this.handleKeyDown(e),"handleKeyDown"),onFocusIn:__name(e=>this.onFocusIn(e),"onFocusIn"),onFocusOut:__name(e=>this.onFocusOut(e),"onFocusOut")})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(guard=>this.addManagedElementListeners(guard,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const tabIndex=this.gos.get("tabIndex");this.comp.setTabIndex(tabIndex.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():_findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const fromBottom=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(fromBottom):this.focusInnerElement(fromBottom))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(up){var _a238;const eDocument=_getDocument(this.beans),focusableEls=_findFocusableElements(eDocument.body,null,!0),index=focusableEls.indexOf(up?this.eTopGuard:this.eBottomGuard);if(index===-1)return;let start,end;up?(start=0,end=index):(start=index+1,end=focusableEls.length);const focusableRange=focusableEls.slice(start,end),targetTabIndex=this.gos.get("tabIndex");focusableRange.sort((a,b)=>{const indexA=parseInt(a.getAttribute("tabindex")||"0"),indexB=parseInt(b.getAttribute("tabindex")||"0");return indexB===targetTabIndex?1:indexA===targetTabIndex?-1:indexA===0?1:indexB===0?-1:indexA-indexB}),(_a238=focusableRange[up?focusableRange.length-1:0])==null||_a238.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const tabGuardsAreActive=this.tabGuardsAreActive();tabGuardsAreActive&&this.deactivateTabGuards();const nextRoot=this.getNextFocusableElement(e.shiftKey);tabGuardsAreActive&&setTimeout(()=>this.activateTabGuards(),0),nextRoot&&(nextRoot.focus(),e.preventDefault())}focusInnerElement(fromBottom=!1){const focusable=_findFocusableElements(this.eFocusableElement);return this.tabGuardsAreActive()&&(focusable.splice(0,1),focusable.splice(focusable.length-1,1)),focusable.length?(focusable[fromBottom?focusable.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(backwards){return _findNextFocusableElement(this.beans,this.eFocusableElement,!1,backwards)}forceFocusOutOfContainer(up=!1){if(this.forcingFocusOut)return;const tabGuardToFocus=up?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,tabGuardToFocus.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(element,bottom){return element===this.eTopGuard&&!bottom||element===this.eBottomGuard&&(bottom??!0)}setAllowFocus(allowFocus){this.allowFocus=allowFocus}},__name(_a74,"TabGuardCtrl"),_a74),_a75,TabGuardFeature=(_a75=class extends BeanStub{constructor(comp){super(),this.comp=comp}initialiseTabGuard(params){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard,eBottomGuard,eFocusableElement}=this,tabGuards=[eTopGuard,eBottomGuard],compProxy={setTabIndex:__name(tabIndex=>{tabGuards.forEach(tabGuard=>tabIndex!=null?tabGuard.setAttribute("tabindex",tabIndex):tabGuard.removeAttribute("tabindex"))},"setTabIndex")};this.addTabGuards(eTopGuard,eBottomGuard);const{focusTrapActive=!1,onFocusIn,onFocusOut,focusInnerElement,handleKeyDown,onTabKeyDown,shouldStopEventPropagation,isEmpty,forceFocusOutWhenTabGuardsAreEmpty,isFocusableContainer}=params;this.tabGuardCtrl=this.createManagedBean(new TabGuardCtrl({comp:compProxy,focusTrapActive,eTopGuard,eBottomGuard,eFocusableElement,onFocusIn,onFocusOut,focusInnerElement,handleKeyDown,onTabKeyDown,shouldStopEventPropagation,isEmpty,forceFocusOutWhenTabGuardsAreEmpty,isFocusableContainer}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(side){const tabGuard=_getDocument(this.beans).createElement("div"),cls=side==="top"?TabGuardClassNames.TAB_GUARD_TOP:TabGuardClassNames.TAB_GUARD_BOTTOM;return tabGuard.classList.add(TabGuardClassNames.TAB_GUARD,cls),_setAriaRole(tabGuard,"presentation"),tabGuard}addTabGuards(topTabGuard,bottomTabGuard){const eFocusableElement=this.eFocusableElement;eFocusableElement.insertAdjacentElement("afterbegin",topTabGuard),eFocusableElement.insertAdjacentElement("beforeend",bottomTabGuard)}removeAllChildrenExceptTabGuards(){const tabGuards=[this.eTopGuard,this.eBottomGuard];_clearElement(this.comp.getFocusableElement()),this.addTabGuards(...tabGuards)}forceFocusOutOfContainer(up=!1){this.tabGuardCtrl.forceFocusOutOfContainer(up)}appendChild(appendChild,newChild,container){_isNodeOrElement(newChild)||(newChild=newChild.getGui());const{eBottomGuard:bottomTabGuard}=this;bottomTabGuard?bottomTabGuard.insertAdjacentElement("beforebegin",newChild):appendChild(newChild,container)}destroy(){const{eTopGuard,eBottomGuard}=this;_removeFromParent(eTopGuard),_removeFromParent(eBottomGuard),super.destroy()}},__name(_a75,"TabGuardFeature"),_a75),_a76,TabGuardComp=(_a76=class extends Component{initialiseTabGuard(params){this.tabGuardFeature=this.createManagedBean(new TabGuardFeature(this)),this.tabGuardFeature.initialiseTabGuard(params)}forceFocusOutOfContainer(up=!1){this.tabGuardFeature.forceFocusOutOfContainer(up)}appendChild(newChild,container){this.tabGuardFeature.appendChild(super.appendChild.bind(this),newChild,container)}},__name(_a76,"TabGuardComp"),_a76),_a77,PopupComponent=(_a77=class extends Component{isPopup(){return!0}setParentComponent(container){container.addCssClass("ag-has-popup"),super.setParentComponent(container)}destroy(){const parentComp=this.parentComponent;parentComp&&parentComp.isAlive()&&parentComp.getGui().classList.remove("ag-has-popup"),super.destroy()}},__name(_a77,"PopupComponent"),_a77),_a78,TouchListener=(_a78=class{constructor(eElement,preventMouseClick=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new LocalEventService,this.preventMouseClick=preventMouseClick;const startListener=this.onTouchStart.bind(this),moveListener=this.onTouchMove.bind(this),endListener=this.onTouchEnd.bind(this);eElement.addEventListener("touchstart",startListener,{passive:!0}),eElement.addEventListener("touchmove",moveListener,{passive:!0}),eElement.addEventListener("touchend",endListener,{passive:!1}),this.destroyFuncs.push(()=>{eElement.removeEventListener("touchstart",startListener,{passive:!0}),eElement.removeEventListener("touchmove",moveListener,{passive:!0}),eElement.removeEventListener("touchend",endListener,{passive:!1})})}getActiveTouch(touchList){for(let i=0;i<touchList.length;i++)if(touchList[i].identifier===this.touchStart.identifier)return touchList[i];return null}addEventListener(eventType,listener){this.localEventService.addEventListener(eventType,listener)}removeEventListener(eventType,listener){this.localEventService.removeEventListener(eventType,listener)}onTouchStart(touchEvent){if(this.touching)return;this.touchStart=touchEvent.touches[0],this.touching=!0,this.moved=!1;const touchStartCopy=this.touchStart;window.setTimeout(()=>{const touchesMatch=this.touchStart===touchStartCopy;if(this.touching&&touchesMatch&&!this.moved){this.moved=!0;const event={type:"longTap",touchStart:this.touchStart,touchEvent};this.localEventService.dispatchEvent(event)}},500)}onTouchMove(touchEvent){if(!this.touching)return;const touch=this.getActiveTouch(touchEvent.touches);if(!touch)return;!_areEventsNear(touch,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(touchEvent){if(this.touching){if(!this.moved){const event={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(event),this.checkForDoubleTap()}this.preventMouseClick&&touchEvent.cancelable&&touchEvent.preventDefault(),this.touching=!1}}checkForDoubleTap(){const now=Date.now();if(this.lastTapTime&&this.lastTapTime>0)if(now-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const event={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(event),this.lastTapTime=null}else this.lastTapTime=now;else this.lastTapTime=now}destroy(){this.destroyFuncs.forEach(func=>func())}},__name(_a78,"TouchListener"),_a78),_a79,VanillaFrameworkOverrides=(_a79=class{constructor(frameworkName="javascript"){this.frameworkName=frameworkName,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=callback=>callback(),this.wrapOutgoing=callback=>callback(),this.baseDocLink=`${BASE_URL}/${this.frameworkName}-data-grid`,setValidationDocLink(this.baseDocLink)}setInterval(action,timeout){return new AgPromise(resolve=>{resolve(window.setInterval(action,timeout))})}addEventListener(element,type,listener,options){let eventListenerOptions={};if(typeof options=="object"?eventListenerOptions=options:typeof options=="boolean"&&(eventListenerOptions={capture:options}),eventListenerOptions.passive==null){const passive=getPassiveStateForEvent(type);passive!=null&&(eventListenerOptions.passive=passive)}element.addEventListener(type,listener,eventListenerOptions)}frameworkComponent(_){return null}isFrameworkComponent(_){return!1}getDocLink(path){return`${this.baseDocLink}${path?`/${path}`:""}`}},__name(_a79,"VanillaFrameworkOverrides"),_a79);function createGridApi(context){return{beanName:"gridApi",bean:context.getBean("apiFunctionSvc").api}}__name(createGridApi,"createGridApi");var orderedCoreBeans=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],beanNamePosition=Object.fromEntries(orderedCoreBeans.map((beanName,index)=>[beanName,index]));function gridBeanInitComparator(bean1,bean2){const index1=(bean1.beanName?beanNamePosition[bean1.beanName]:void 0)??Number.MAX_SAFE_INTEGER,index2=(bean2.beanName?beanNamePosition[bean2.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return index1-index2}__name(gridBeanInitComparator,"gridBeanInitComparator");function gridBeanDestroyComparator(bean1,bean2){return(bean1==null?void 0:bean1.beanName)==="gridDestroySvc"?-1:0}__name(gridBeanDestroyComparator,"gridBeanDestroyComparator");var _a80,GridCtrl=(_a80=class extends BeanStub{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(view,eGridDiv,eGui){this.view=view,this.eGridHostDiv=eGridDiv,this.eGui=eGui,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDrop,ctrlsSvc}=this.beans;dragAndDrop==null||dragAndDrop.registerGridDropTarget(()=>this.eGui,this),_stampTopLevelGridCompWithGridInstance(this.gos,eGridDiv),this.createManagedBean(new LayoutFeature(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const unsubscribeFromResize=_observeResize(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>unsubscribeFromResize()),ctrlsSvc.register("gridCtrl",this)}isDetailGrid(){var _a238;const el=_findTabbableParent(this.getGui());return((_a238=el==null?void 0:el.getAttribute("row-id"))==null?void 0:_a238.startsWith("detail"))||!1}getOptionalSelectors(){var _a238,_b2,_c,_d;const beans=this.beans;return{paginationSelector:(_a238=beans.pagination)==null?void 0:_a238.getPaginationSelector(),gridHeaderDropZonesSelector:beans.registry.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:(_b2=beans.sideBar)==null?void 0:_b2.getSelector(),statusBarSelector:(_c=beans.registry)==null?void 0:_c.getSelector("AG-STATUS-BAR"),watermarkSelector:(_d=beans.licenseManager)==null?void 0:_d.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(on){this.view.setCursor(on?"ew-resize":null)}disableUserSelect(on){this.view.setUserSelect(on?"none":null)}focusNextInnerContainer(backwards){const focusableContainers=this.getFocusableContainers(),{indexWithFocus,nextIndex}=this.getNextFocusableIndex(focusableContainers,backwards);if(nextIndex<0||nextIndex>=focusableContainers.length)return!1;if(nextIndex===0){if(indexWithFocus>0){const{visibleCols,focusSvc}=this.beans,allColumns=visibleCols.allCols,lastColumn=_last(allColumns);if(focusSvc.focusGridView({column:lastColumn,backwards:!0}))return!0}return!1}return this.focusContainer(focusableContainers[nextIndex],backwards)}focusInnerElement(fromBottom){const userCallbackFunction=this.gos.getCallback("focusGridInnerElement");if(userCallbackFunction&&userCallbackFunction({fromBottom:!!fromBottom}))return!0;const focusableContainers=this.getFocusableContainers(),{focusSvc,visibleCols}=this.beans,allColumns=visibleCols.allCols;if(fromBottom){if(focusableContainers.length>1)return this.focusContainer(_last(focusableContainers),fromBottom);const lastColumn=_last(allColumns);if(focusSvc.focusGridView({column:lastColumn,backwards:fromBottom}))return!0}if(this.gos.get("headerHeight")===0||_isHeaderFocusSuppressed(this.beans)){if(focusSvc.focusGridView({column:allColumns[0],backwards:fromBottom}))return!0;for(let i=1;i<focusableContainers.length;i++)if(_focusInto(focusableContainers[i].getGui(),fromBottom))return!0;return!1}return focusSvc.focusFirstHeader()}forceFocusOutOfContainer(up=!1){this.view.forceFocusOutOfContainer(up)}addFocusableContainer(container){this.additionalFocusableContainers.add(container)}removeFocusableContainer(container){this.additionalFocusableContainers.delete(container)}allowFocusForNextCoreContainer(up){var _a238;const coreContainers=this.view.getFocusableContainers(),{nextIndex,indexWithFocus}=this.getNextFocusableIndex(coreContainers,up);if(indexWithFocus===-1||nextIndex<0||nextIndex>=coreContainers.length)return;const comp=coreContainers[nextIndex];(_a238=comp.setAllowFocus)==null||_a238.call(comp,!0),setTimeout(()=>{var _a239;(_a239=comp.setAllowFocus)==null||_a239.call(comp,!1)})}isFocusable(){var _a238,_b2;const beans=this.beans;return!_isCellFocusSuppressed(beans)||!_isHeaderFocusSuppressed(beans)||!!((_b2=(_a238=beans.sideBar)==null?void 0:_a238.comp)!=null&&_b2.isDisplayed())}getNextFocusableIndex(focusableContainers,backwards){const activeEl=_getActiveDomElement(this.beans),indexWithFocus=focusableContainers.findIndex(container=>container.getGui().contains(activeEl)),nextIndex=indexWithFocus+(backwards?-1:1);return{indexWithFocus,nextIndex}}focusContainer(comp,up){var _a238,_b2;(_a238=comp.setAllowFocus)==null||_a238.call(comp,!0);const result=_focusInto(comp.getGui(),up,!1,!0);return(_b2=comp.setAllowFocus)==null||_b2.call(comp,!1),result}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},__name(_a80,"GridCtrl"),_a80),mod=__name((moduleName,input)=>{for(const key of Object.keys(input))input[key]=moduleName;return input},"mod"),gridApiFunctionsMap={dispatchEvent:"CommunityCore",...mod("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0}),...mod("GridState",{getState:0}),...mod("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...mod("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...mod("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...mod("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...mod("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...mod("ValueCache",{expireValueCache:0}),...mod("CellApi",{getCellValue:0}),...mod("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...mod("Sort",{onSortChanged:0}),...mod("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0}),...mod("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...mod("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...mod("HighlightChanges",{flashCells:0}),...mod("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0}),...mod("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...mod("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...mod("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...mod("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...mod("ColumnResize",{setColumnWidths:0}),...mod("ColumnHover",{isColumnHovered:0}),...mod("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0}),...mod("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...mod("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...mod("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0}),...mod("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...mod("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...mod("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...mod("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0}),...mod("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...mod("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...mod("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...mod("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...mod("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...mod("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...mod("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...mod("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...mod("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...mod("ContextMenu",{showContextMenu:0}),...mod("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...mod("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...mod("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...mod("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...mod("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...mod("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...mod("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...mod("StatusBar",{getStatusPanel:0})},defaultFns={isDestroyed:__name(()=>!0,"isDestroyed"),destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},dispatchEvent=__name((beans,event)=>beans.eventSvc.dispatchEvent(event),"dispatchEvent"),_a81,GridApiClass=(_a81=class{},__name(_a81,"GridApiClass"),_a81);Reflect.defineProperty(GridApiClass,"name",{value:"GridApi"});var _a82,ApiFunctionService=(_a82=class extends BeanStub{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new GridApiClass,this.fns={...defaultFns,dispatchEvent},this.preDestroyLink="";const{api}=this;for(const key of Object.keys(gridApiFunctionsMap))api[key]=this.makeApi(key)[key]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(functionName,func){var _a238;const{fns,beans}=this;fns!==defaultFns&&(fns[functionName]=((_a238=beans==null?void 0:beans.validation)==null?void 0:_a238.validateApiFunction(functionName,func))??func)}makeApi(apiName){return{[apiName]:(...args)=>{const{beans,fns:{[apiName]:fn}}=this;return fn?fn(beans,...args):this.apiNotFound(apiName)}}}apiNotFound(fnName){const{beans,gos,preDestroyLink}=this;if(!beans)_warn(26,{fnName,preDestroyLink});else{const module=gridApiFunctionsMap[fnName];gos.assertModuleRegistered(module,`api.${fnName}`)&&_warn(27,{fnName,module})}}destroy(){super.destroy(),this.fns=defaultFns,this.beans=null}},__name(_a82,"ApiFunctionService"),_a82);function getGridId(beans){return beans.context.getGridId()}__name(getGridId,"getGridId");function destroy(beans){beans.gridDestroySvc.destroy()}__name(destroy,"destroy");function isDestroyed(beans){return beans.gridDestroySvc.destroyCalled}__name(isDestroyed,"isDestroyed");function getGridOption(beans,key){return beans.gos.get(key)}__name(getGridOption,"getGridOption");function setGridOption(beans,key,value){updateGridOptions(beans,{[key]:value})}__name(setGridOption,"setGridOption");function updateGridOptions(beans,options){beans.gos.updateGridOptions({options})}__name(updateGridOptions,"updateGridOptions");var DndSourceElement={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},_a83,DndSourceComp=(_a83=class extends Component{constructor(rowNode,column,eCell){super(DndSourceElement),this.rowNode=rowNode,this.column=column,this.eCell=eCell}postConstruct(){this.getGui().appendChild(_createIconNoSpan("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(dragEvent){const{rowNode,column,eCell,gos}=this,providedOnRowDrag=column.getColDef().dndSourceOnRowDrag,dataTransfer=dragEvent.dataTransfer;if(dataTransfer.setDragImage(eCell,0,0),providedOnRowDrag){const params=_addGridCommonParams(gos,{rowNode,dragEvent});providedOnRowDrag(params)}else try{const jsonData=JSON.stringify(rowNode.data);dataTransfer.setData("application/json",jsonData),dataTransfer.setData("text/plain",jsonData)}catch{}}checkVisibility(){const visible=this.column.isDndSource(this.rowNode);this.setDisplayed(visible)}},__name(_a83,"DndSourceComp"),_a83);function addRowDropZone(beans,params){var _a238,_b2;(_b2=(_a238=beans.rowDragSvc)==null?void 0:_a238.rowDragFeature)==null||_b2.addRowDropZone(params)}__name(addRowDropZone,"addRowDropZone");function removeRowDropZone(beans,params){var _a238,_b2;const activeDropTarget=(_a238=beans.dragAndDrop)==null?void 0:_a238.findExternalZone(params);activeDropTarget&&((_b2=beans.dragAndDrop)==null||_b2.removeDropTarget(activeDropTarget))}__name(removeRowDropZone,"removeRowDropZone");function getRowDropZoneParams(beans,events){var _a238,_b2;return(_b2=(_a238=beans.rowDragSvc)==null?void 0:_a238.rowDragFeature)==null?void 0:_b2.getRowDropZone(events)}__name(getRowDropZoneParams,"getRowDropZoneParams");var _a84,HorizontalResizeService=(_a84=class extends BeanStub{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(params){const dragSource={dragStartPixels:params.dragStartPixels||0,eElement:params.eResizeBar,onDragStart:this.onDragStart.bind(this,params),onDragStop:this.onDragStop.bind(this,params),onDragging:this.onDragging.bind(this,params),onDragCancel:this.onDragStop.bind(this,params),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc}=this.beans;return dragSvc.addDragSource(dragSource),__name(()=>dragSvc.removeDragSource(dragSource),"finishedWithResizeFunc")}onDragStart(params,mouseEvent){this.dragStartX=mouseEvent.clientX,this.setResizeIcons();const shiftKey=mouseEvent instanceof MouseEvent&&mouseEvent.shiftKey===!0;params.onResizeStart(shiftKey)}setResizeIcons(){const ctrl=this.beans.ctrlsSvc.get("gridCtrl");ctrl.setResizeCursor(!0),ctrl.disableUserSelect(!0)}onDragStop(params){params.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const ctrl=this.beans.ctrlsSvc.get("gridCtrl");ctrl.setResizeCursor(!1),ctrl.disableUserSelect(!1)}onDragging(params,mouseEvent){this.resizeAmount=mouseEvent.clientX-this.dragStartX,params.onResizing(this.resizeAmount)}},__name(_a84,"HorizontalResizeService"),_a84),RowDragElement={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},_a85,RowDragComp=(_a85=class extends Component{constructor(cellValueFn,rowNode,column,customGui,dragStartPixels,suppressVisibilityChange){super(),this.cellValueFn=cellValueFn,this.rowNode=rowNode,this.column=column,this.customGui=customGui,this.dragStartPixels=dragStartPixels,this.suppressVisibilityChange=suppressVisibilityChange,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans,rowNode,column,gos}=this;if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate(RowDragElement),this.getGui().appendChild(_createIconNoSpan("rowDrag",beans,null)),this.addDragSource()),!this.suppressVisibilityChange){const strategy=gos.get("rowDragManaged")?new ManagedVisibilityStrategy(this,rowNode,column):new NonManagedVisibilityStrategy(this,rowNode,column);this.createManagedBean(strategy,this.beans.context)}}setDragElement(dragElement,dragStartPixels){this.setTemplateFromElement(dragElement,void 0,void 0,!0),this.addDragSource(dragStartPixels)}getSelectedNodes(){var _a238;const rowNode=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[rowNode];const selection=((_a238=this.beans.selectionSvc)==null?void 0:_a238.getSelectedNodes())??[];return selection.indexOf(rowNode)!==-1?selection:[rowNode]}getDragItem(){const{column,rowNode}=this;return{rowNode,rowNodes:this.getSelectedNodes(),columns:column?[column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(column){if(column){const colDef=column.getColDef();if(colDef.rowDragText)return colDef.rowDragText}return this.gos.get("rowDragText")}addDragSource(dragStartPixels=4){this.dragSource&&this.removeDragSource();const eGui=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(eGui,{mousedown:__name(e=>{e==null||e.preventDefault()},"mousedown")})[0]);const translate=this.getLocaleTextFunc();this.dragSource={type:2,eElement:eGui,dragItemName:__name(()=>{var _a238;const dragItem=this.getDragItem(),dragItemCount=((_a238=dragItem.rowNodes)==null?void 0:_a238.length)||1,rowDragText=this.getRowDragText(this.column);return rowDragText?rowDragText(dragItem,dragItemCount):dragItemCount===1?this.cellValueFn():`${dragItemCount} ${translate("rowDragRows","rows")}`},"dragItemName"),getDragItem:__name(()=>this.getDragItem(),"getDragItem"),dragStartPixels,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},__name(_a85,"RowDragComp"),_a85),_a86,VisibilityStrategy=(_a86=class extends BeanStub{constructor(parent,rowNode,column){super(),this.parent=parent,this.rowNode=rowNode,this.column=column}setDisplayedOrVisible(neverDisplayed){const displayedOptions={skipAriaHidden:!0};if(neverDisplayed)this.parent.setDisplayed(!1,displayedOptions);else{let shown=!0,isShownSometimes=!1;const{column,rowNode,parent}=this;column&&(shown=column.isRowDrag(rowNode)||parent.isCustomGui(),isShownSometimes=typeof column.getColDef().rowDrag=="function"),isShownSometimes?(parent.setDisplayed(!0,displayedOptions),parent.setVisible(shown,displayedOptions)):(parent.setDisplayed(shown,displayedOptions),parent.setVisible(!0,displayedOptions))}}},__name(_a86,"VisibilityStrategy"),_a86),_a87,NonManagedVisibilityStrategy=(_a87=class extends VisibilityStrategy{postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const listener=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:listener,cellChanged:listener}),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:listener}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const neverDisplayed=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(neverDisplayed)}},__name(_a87,"NonManagedVisibilityStrategy"),_a87),_a88,ManagedVisibilityStrategy=(_a88=class extends VisibilityStrategy{postConstruct(){const listener=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventSvc,{sortChanged:listener,filterChanged:listener,columnRowGroupChanged:listener,newColumnsLoaded:listener}),this.addManagedListeners(this.rowNode,{dataChanged:listener,cellChanged:listener}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const{rowDragSvc,dragAndDrop,gos}=this.beans,rowDragFeature=rowDragSvc.rowDragFeature,shouldPreventRowMove=rowDragFeature&&rowDragFeature.shouldPreventRowMove(),suppressRowDrag=gos.get("suppressRowDrag"),hasExternalDropZones=dragAndDrop.hasExternalDropZones(),neverDisplayed=shouldPreventRowMove&&!hasExternalDropZones||suppressRowDrag;this.setDisplayedOrVisible(neverDisplayed)}},__name(_a88,"ManagedVisibilityStrategy"),_a88),_a89,RowDragService=(_a89=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(element,ctrl){const rowDragFeature=ctrl.createManagedBean(new RowDragFeature(element)),dragAndDrop=this.beans.dragAndDrop;dragAndDrop.addDropTarget(rowDragFeature),ctrl.addDestroyFunc(()=>dragAndDrop.removeDropTarget(rowDragFeature)),this.rowDragFeature=rowDragFeature}createRowDragComp(cellValueFn,rowNode,column,customGui,dragStartPixels,suppressVisibilityChange){return new RowDragComp(cellValueFn,rowNode,column,customGui,dragStartPixels,suppressVisibilityChange)}createRowDragCompForRow(rowNode,element){if(_isCellSelectionEnabled(this.gos))return;const translate=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${translate("rowDragRow","row")}`,rowNode,void 0,element,void 0,!0)}createRowDragCompForCell(rowNode,column,cellValueFn,element,dragStartPixels,suppressVisibilityChange){const gos=this.gos;return gos.get("rowDragManaged")&&(!_isClientSideRowModel(gos)||gos.get("pagination"))?void 0:this.createRowDragComp(cellValueFn,rowNode,column,element,dragStartPixels,suppressVisibilityChange)}},__name(_a89,"RowDragService"),_a89),DragModule={moduleName:"Drag",version:VERSION,beans:[DragService]},DragAndDropModule={moduleName:"DragAndDrop",version:VERSION,dynamicBeans:{dndSourceComp:DndSourceComp},icons:{rowDrag:"grip"}},SharedDragAndDropModule={moduleName:"SharedDragAndDrop",version:VERSION,beans:[DragAndDropService],dependsOn:[DragModule],userComponents:{agDragAndDropImage:DragAndDropImageComponent2},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},RowDragModule={moduleName:"RowDrag",version:VERSION,beans:[RowDragService],apiFunctions:{addRowDropZone,removeRowDropZone,getRowDropZoneParams},dependsOn:[SharedDragAndDropModule]},HorizontalResizeModule={moduleName:"HorizontalResize",version:VERSION,beans:[HorizontalResizeService],dependsOn:[DragModule]},columnMovingCSS=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",_a90,ColumnAnimationService=(_a90=class extends BeanStub{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,p=>this.gridBodyCtrl=p.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(suppress){this.suppressAnimation=suppress}start(){if(this.active)return;const{gos}=this;gos.get("suppressColumnMoveAnimation")||gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(func){this.activeNext?this.executeNextFuncs.push(func):func()}executeLaterVMTurn(func){this.active?this.executeLaterFuncs.push(func):func()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const animationThreadCountCopy=this.animationThreadCount,{gridBodyCtrl}=this;gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===animationThreadCountCopy&&gridBodyCtrl.setColumnMovingCss(!1)})}flush(callbackNext,callbackLater){const{executeNextFuncs,executeLaterFuncs}=this;if(executeNextFuncs.length===0&&executeLaterFuncs.length===0){callbackNext(),callbackLater();return}const runFuncs=__name(queue=>{for(;queue.length;){const func=queue.pop();func&&func()}},"runFuncs");this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{callbackNext(),runFuncs(executeNextFuncs)},0),window.setTimeout(()=>{callbackLater(),runFuncs(executeLaterFuncs)},200)})}},__name(_a90,"ColumnAnimationService"),_a90);function moveColumnByIndex(beans,fromIndex,toIndex){var _a238;(_a238=beans.colMoves)==null||_a238.moveColumnByIndex(fromIndex,toIndex,"api")}__name(moveColumnByIndex,"moveColumnByIndex");function moveColumns(beans,columnsToMoveKeys,toIndex){var _a238;(_a238=beans.colMoves)==null||_a238.moveColumns(columnsToMoveKeys,toIndex,"api")}__name(moveColumns,"moveColumns");var _a91,BodyDropPivotTarget=(_a91=class extends BeanStub{constructor(pinned){super(),this.pinned=pinned,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(draggingEvent){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const dragColumns=draggingEvent.dragItem.columns;dragColumns&&dragColumns.forEach(column=>{column.isPrimary()&&(column.isAnyFunctionActive()||(column.isAllowValue()?this.columnsToAggregate.push(column):column.isAllowRowGroup()?this.columnsToGroup.push(column):column.isAllowPivot()&&this.columnsToPivot.push(column)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(draggingEvent){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(draggingEvent){}onDragStop(draggingEvent){const{valueColsSvc,rowGroupColsSvc,pivotColsSvc}=this.beans;this.columnsToAggregate.length>0&&(valueColsSvc==null||valueColsSvc.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(rowGroupColsSvc==null||rowGroupColsSvc.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(pivotColsSvc==null||pivotColsSvc.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}},__name(_a91,"BodyDropPivotTarget"),_a91);function sortColsLikeCols(colsList,cols){!cols||cols.length<=1||cols.filter(c=>colsList.indexOf(c)<0).length>0||cols.sort((a,b)=>{const indexA=colsList.indexOf(a),indexB=colsList.indexOf(b);return indexA-indexB})}__name(sortColsLikeCols,"sortColsLikeCols");function getBestColumnMoveIndexFromXPosition(params){const{isFromHeader,fromLeft,xPosition,fromEnter,fakeEvent,pinned,gos,colModel,colMoves,visibleCols}=params;let{allMovingColumns}=params;if(isFromHeader){const newCols=[];allMovingColumns.forEach(col=>{var _a238;let movingGroup=null,parent=col.getParent();for(;parent!=null&&parent.getDisplayedLeafColumns().length===1;)movingGroup=parent,parent=parent.getParent();movingGroup!=null?(!!((_a238=movingGroup.getColGroupDef())!=null&&_a238.marryChildren)?movingGroup.getProvidedColumnGroup().getLeafColumns():movingGroup.getLeafColumns()).forEach(newCol=>{newCols.includes(newCol)||newCols.push(newCol)}):newCols.includes(col)||newCols.push(col)}),allMovingColumns=newCols}const allMovingColumnsOrdered=allMovingColumns.slice();sortColsLikeCols(colModel.getCols(),allMovingColumnsOrdered);const validMoves=calculateValidMoves({movingCols:allMovingColumnsOrdered,draggingRight:fromLeft,xPosition,pinned,gos,colModel,visibleCols}),oldIndex=calculateOldIndex(allMovingColumnsOrdered,colModel);if(validMoves.length===0)return;const firstValidMove=validMoves[0];let constrainDirection=oldIndex!==null&&!fromEnter;if(isFromHeader&&(constrainDirection=oldIndex!==null),constrainDirection&&!fakeEvent&&(!fromLeft&&firstValidMove>=oldIndex||fromLeft&&firstValidMove<=oldIndex))return;const displayedCols=visibleCols.allCols,potentialMoves=[];let targetOrder=null;for(let i=0;i<validMoves.length;i++){const move=validMoves[i],order=colMoves.getProposedColumnOrder(allMovingColumnsOrdered,move);if(!colMoves.doesOrderPassRules(order))continue;const displayedOrder=order.filter(col=>displayedCols.includes(col));if(targetOrder===null)targetOrder=displayedOrder;else if(!_areEqual(displayedOrder,targetOrder))break;const fragCount=groupFragCount(order);potentialMoves.push({move,fragCount})}if(potentialMoves.length===0)return;potentialMoves.sort((a,b)=>a.fragCount-b.fragCount);const toIndex=potentialMoves[0].move;if(!(toIndex>colModel.getCols().length-allMovingColumns.length))return{columns:allMovingColumns,toIndex}}__name(getBestColumnMoveIndexFromXPosition,"getBestColumnMoveIndexFromXPosition");function attemptMoveColumns(params){const{columns,toIndex}=getBestColumnMoveIndexFromXPosition(params)||{},{finished,colMoves}=params;return!columns||toIndex==null?null:(colMoves.moveColumns(columns,toIndex,"uiColumnMoved",finished),finished?null:{columns,toIndex})}__name(attemptMoveColumns,"attemptMoveColumns");function calculateOldIndex(movingCols,colModel){const gridCols=colModel.getCols(),indexes=movingCols.map(col=>gridCols.indexOf(col)).sort((a,b)=>a-b),firstIndex=indexes[0];return _last(indexes)-firstIndex!==indexes.length-1?null:firstIndex}__name(calculateOldIndex,"calculateOldIndex");function groupFragCount(columns){function parents(col){const result=[];let parent=col.getOriginalParent();for(;parent!=null;)result.push(parent),parent=parent.getOriginalParent();return result}__name(parents,"parents");let count=0;for(let i=0;i<columns.length-1;i++){let a=parents(columns[i]),b=parents(columns[i+1]);[a,b]=a.length>b.length?[a,b]:[b,a],a.forEach(parent=>{b.indexOf(parent)===-1&&count++})}return count}__name(groupFragCount,"groupFragCount");function getDisplayedColumns(visibleCols,type){switch(type){case"left":return visibleCols.leftCols;case"right":return visibleCols.rightCols;default:return visibleCols.centerCols}}__name(getDisplayedColumns,"getDisplayedColumns");function calculateValidMoves(params){const{movingCols,draggingRight,xPosition,pinned,gos,colModel,visibleCols}=params;if(gos.get("suppressMovableColumns")||movingCols.some(col=>col.getColDef().suppressMovable))return[];const allDisplayedCols=getDisplayedColumns(visibleCols,pinned),allGridCols=colModel.getCols(),movingDisplayedCols=allDisplayedCols.filter(col=>movingCols.includes(col)),otherDisplayedCols=allDisplayedCols.filter(col=>!movingCols.includes(col)),otherGridCols=allGridCols.filter(col=>!movingCols.includes(col));let displayIndex=0,availableWidth=xPosition;if(draggingRight){let widthOfMovingDisplayedCols=0;movingDisplayedCols.forEach(col=>widthOfMovingDisplayedCols+=col.getActualWidth()),availableWidth-=widthOfMovingDisplayedCols}if(availableWidth>0){for(let i=0;i<otherDisplayedCols.length;i++){const col=otherDisplayedCols[i];if(availableWidth-=col.getActualWidth(),availableWidth<0)break;displayIndex++}draggingRight&&displayIndex++}let firstValidMove;if(displayIndex>0){const leftColumn=otherDisplayedCols[displayIndex-1];firstValidMove=otherGridCols.indexOf(leftColumn)+1}else firstValidMove=otherGridCols.indexOf(otherDisplayedCols[0]),firstValidMove===-1&&(firstValidMove=0);const validMoves=[firstValidMove],numberComparator=__name((a,b)=>a-b,"numberComparator");if(draggingRight){let pointer=firstValidMove+1;const lastIndex=allGridCols.length-1;for(;pointer<=lastIndex;)validMoves.push(pointer),pointer++;validMoves.sort(numberComparator)}else{let pointer=firstValidMove;const lastIndex=allGridCols.length-1;let displacedCol=allGridCols[pointer];for(;pointer<=lastIndex&&allDisplayedCols.indexOf(displacedCol)<0;)pointer++,validMoves.push(pointer),displacedCol=allGridCols[pointer];pointer=firstValidMove-1;const firstDisplayIndex=0;for(;pointer>=firstDisplayIndex;)validMoves.push(pointer),pointer--;validMoves.sort(numberComparator).reverse()}return validMoves}__name(calculateValidMoves,"calculateValidMoves");function normaliseX(params){var _a238;const{pinned,fromKeyboard,gos,ctrlsSvc,useHeaderRow,skipScrollPadding}=params;let eViewport=(_a238=ctrlsSvc.getHeaderRowContainerCtrl(pinned))==null?void 0:_a238.eViewport,{x}=params;return eViewport?(fromKeyboard&&(x-=eViewport.getBoundingClientRect().left),gos.get("enableRtl")&&(useHeaderRow&&(eViewport=eViewport.querySelector(".ag-header-row")),x=eViewport.clientWidth-x),pinned==null&&!skipScrollPadding&&(x+=ctrlsSvc.get("center").getCenterViewportScrollLeft()),x):0}__name(normaliseX,"normaliseX");function setColumnsMoving(columns,isMoving){for(const column of columns)column.moving=isMoving,column.dispatchColEvent("movingChanged","uiColumnMoved")}__name(setColumnsMoving,"setColumnsMoving");var MOVE_FAIL_THRESHOLD=7,SCROLL_MOVE_WIDTH=100,SCROLL_GAP_NEEDED_BEFORE_MOVE=SCROLL_MOVE_WIDTH/2,SCROLL_ACCELERATION_RATE=5,SCROLL_TIME_INTERVAL=100,_a92,MoveColumnFeature=(_a92=class extends BeanStub{constructor(pinned){super(),this.pinned=pinned,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!_exists(pinned)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,p=>{this.gridBodyCon=p.gridBodyCtrl})}getIconName(){const{pinned,lastDraggingEvent}=this,columns=(lastDraggingEvent==null?void 0:lastDraggingEvent.dragItem.columns)??[];for(const col of columns){const colPinned=col.getPinned();if(col.getColDef().lockPinned){if(colPinned==pinned)return"move";continue}if(colPinned===pinned||!pinned)return"move";if(!colPinned&&pinned)return"pinned"}return"notAllowed"}onDragEnter(draggingEvent){const dragItem=draggingEvent.dragItem,columns=dragItem.columns;if(draggingEvent.dragSource.type===0)this.setColumnsVisible(columns,!0,"uiColumnDragged");else{const visibleState=dragItem.visibleState,visibleColumns=(columns||[]).filter(column=>visibleState[column.getId()]);this.setColumnsVisible(visibleColumns,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(columns,this.pinned),this.onDragging(draggingEvent,!0,!0)}onDragging(draggingEvent=this.lastDraggingEvent,fromEnter=!1,fakeEvent=!1,finished=!1){const{gos,ctrlsSvc}=this.beans,isSuppressMoveWhenDragging=gos.get("suppressMoveWhenColumnDragging");if(finished&&!isSuppressMoveWhenDragging){this.finishColumnMoving();return}if(this.lastDraggingEvent=draggingEvent,!draggingEvent||!finished&&_missing(draggingEvent.hDirection))return;const mouseX=normaliseX({x:draggingEvent.x,pinned:this.pinned,gos,ctrlsSvc});fromEnter||this.checkCenterForScrolling(mouseX),isSuppressMoveWhenDragging?this.handleColumnDragWhileSuppressingMovement(draggingEvent,fromEnter,fakeEvent,mouseX,finished):this.handleColumnDragWhileAllowingMovement(draggingEvent,fromEnter,fakeEvent,mouseX,finished)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(columns,visible,source){if(!columns)return;const allowedCols=columns.filter(c=>!c.getColDef().lockVisible);this.beans.colModel.setColsVisible(allowedCols,visible,source)}finishColumnMoving(){this.clearHighlighted();const lastMovedInfo=this.lastMovedInfo;if(!lastMovedInfo)return;const{columns,toIndex}=lastMovedInfo;this.beans.colMoves.moveColumns(columns,toIndex,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(draggingEvent,fromEnter,fakeEvent,mouseX,finished){const allMovingColumns=this.getAllMovingColumns(draggingEvent,!0);if(finished){const isAttemptingToPin=this.isAttemptingToPin(allMovingColumns);isAttemptingToPin&&this.attemptToPinColumns(allMovingColumns,void 0,!0);const{fromLeft,xPosition}=this.getNormalisedXPositionInfo(allMovingColumns,isAttemptingToPin)||{};if(fromLeft==null||xPosition==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns,xPosition,fromEnter,fakeEvent,fromLeft})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(draggingEvent))return;this.highlightHoveredColumn(allMovingColumns,mouseX)}}handleColumnDragWhileAllowingMovement(draggingEvent,fromEnter,fakeEvent,mouseX,finished){const allMovingColumns=this.getAllMovingColumns(draggingEvent),fromLeft=this.normaliseDirection(draggingEvent.hDirection)==="right",isFromHeader=draggingEvent.dragSource.type===1,params=this.getMoveColumnParams({allMovingColumns,isFromHeader,xPosition:mouseX,fromLeft,fromEnter,fakeEvent}),lastMovedInfo=attemptMoveColumns({...params,finished});lastMovedInfo&&(this.lastMovedInfo=lastMovedInfo)}getAllMovingColumns(draggingEvent,useSplit=!1){const dragItem=draggingEvent.dragSource.getDragItem();let columns=null;useSplit?(columns=dragItem.columnsInSplit,columns||(columns=dragItem.columns)):columns=dragItem.columns;const conditionCallback=__name(col=>col.getColDef().lockPinned?col.getPinned()==this.pinned:!0,"conditionCallback");return columns?columns.filter(conditionCallback):[]}getMoveColumnParams(params){const{allMovingColumns,isFromHeader,xPosition,fromLeft,fromEnter,fakeEvent}=params,{gos,colModel,colMoves,visibleCols}=this.beans;return{allMovingColumns,isFromHeader,fromLeft,xPosition,pinned:this.pinned,fromEnter,fakeEvent,gos,colModel,colMoves,visibleCols}}highlightHoveredColumn(movingColumns,mouseX){var _a238;const{gos,colModel}=this.beans,isRtl=gos.get("enableRtl"),consideredColumns=colModel.getCols().filter(col=>col.isVisible()&&col.getPinned()===this.pinned);let start=null,width=null,targetColumn=null;for(const col of consideredColumns){if(width=col.getActualWidth(),start=this.getNormalisedColumnLeft(col,0,isRtl),start!=null){const end=start+width;if(start<=mouseX&&end>=mouseX){targetColumn=col;break}}start=null,width=null}if(targetColumn)movingColumns.indexOf(targetColumn)!==-1&&(targetColumn=null);else{for(let i=consideredColumns.length-1;i>=0;i--){const currentColumn=consideredColumns[i],parent=consideredColumns[i].getParent();if(!parent){targetColumn=currentColumn;break}const leafDisplayedCols=parent==null?void 0:parent.getDisplayedLeafColumns();if(leafDisplayedCols.length){targetColumn=_last(leafDisplayedCols);break}}if(!targetColumn)return;start=this.getNormalisedColumnLeft(targetColumn,0,isRtl),width=targetColumn.getActualWidth()}if(((_a238=this.lastHighlightedColumn)==null?void 0:_a238.column)!==targetColumn&&this.clearHighlighted(),targetColumn==null||start==null||width==null)return;let position;mouseX-start<width/2!==isRtl?position=0:position=1,setColumnHighlighted(targetColumn,position),this.lastHighlightedColumn={column:targetColumn,position}}getNormalisedXPositionInfo(allMovingColumns,isAttemptingToPin){const{gos,visibleCols}=this.beans,isRtl=gos.get("enableRtl"),{firstMovingCol,column,position}=this.getColumnMoveAndTargetInfo(allMovingColumns,isAttemptingToPin,isRtl);if(!firstMovingCol||!column||position==null)return;const visibleColumns=visibleCols.allCols,movingColIndex=visibleColumns.indexOf(firstMovingCol),targetIndex=visibleColumns.indexOf(column),isBefore=position===0!==isRtl,fromLeft=movingColIndex<targetIndex||movingColIndex===targetIndex&&!isBefore;let diff=0;if(isBefore?fromLeft&&(diff-=1):fromLeft||(diff+=1),targetIndex+diff===movingColIndex)return;const targetColumn=visibleColumns[targetIndex+diff];if(!targetColumn)return;const xPosition=this.getNormalisedColumnLeft(targetColumn,20,isRtl);return{fromLeft,xPosition}}getColumnMoveAndTargetInfo(allMovingColumns,isAttemptingToPin,isRtl){const lastHighlightedColumn=this.lastHighlightedColumn||{},{firstMovingCol,lastMovingCol}=findFirstAndLastMovingColumns(allMovingColumns);if(!firstMovingCol||!lastMovingCol||lastHighlightedColumn.column||!isAttemptingToPin)return{firstMovingCol,...lastHighlightedColumn};const isLeft=this.getPinDirection()==="left";return{firstMovingCol,position:isLeft?1:0,column:isLeft!==isRtl?firstMovingCol:lastMovingCol}}normaliseDirection(hDirection){if(this.gos.get("enableRtl"))switch(hDirection){case"left":return"right";case"right":return"left"}return hDirection}getNormalisedColumnLeft(col,padding,isRtl){const{gos,ctrlsSvc}=this.beans,left=col.getLeft();if(left==null)return null;const width=col.getActualWidth();return normaliseX({x:isRtl?left+width-padding:left+padding,pinned:col.getPinned(),useHeaderRow:isRtl,skipScrollPadding:!0,gos,ctrlsSvc})}isAttemptingToPin(columns){const isMovingHorizontally=this.needToMoveLeft||this.needToMoveRight,isFailedMoreThanThreshold=this.failedMoveAttempts>MOVE_FAIL_THRESHOLD;return isMovingHorizontally&&isFailedMoreThanThreshold||columns.some(col=>col.getPinned()!==this.pinned)}moveColumnsAfterHighlight(params){const{allMovingColumns,xPosition,fromEnter,fakeEvent,fromLeft}=params,columnMoveParams=this.getMoveColumnParams({allMovingColumns,isFromHeader:!0,xPosition,fromLeft,fromEnter,fakeEvent}),{columns,toIndex}=getBestColumnMoveIndexFromXPosition(columnMoveParams)||{};columns&&toIndex!=null&&(this.lastMovedInfo={columns,toIndex}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn}=this;lastHighlightedColumn&&(setColumnHighlighted(lastHighlightedColumn.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(xAdjustedForScroll){if(!this.isCenterContainer)return;const centerCtrl=this.beans.ctrlsSvc.get("center"),firstVisiblePixel=centerCtrl.getCenterViewportScrollLeft(),lastVisiblePixel=firstVisiblePixel+centerCtrl.getCenterWidth();let needToMoveRight,needToMoveLeft;this.gos.get("enableRtl")?(needToMoveRight=xAdjustedForScroll<firstVisiblePixel+SCROLL_GAP_NEEDED_BEFORE_MOVE,needToMoveLeft=xAdjustedForScroll>lastVisiblePixel-SCROLL_GAP_NEEDED_BEFORE_MOVE):(needToMoveLeft=xAdjustedForScroll<firstVisiblePixel+SCROLL_GAP_NEEDED_BEFORE_MOVE,needToMoveRight=xAdjustedForScroll>lastVisiblePixel-SCROLL_GAP_NEEDED_BEFORE_MOVE),this.needToMoveRight=needToMoveRight,this.needToMoveLeft=needToMoveLeft,needToMoveLeft||needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var _a238;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),SCROLL_TIME_INTERVAL),(_a238=this.beans.dragAndDrop.getDragAndDropImageComponent())==null||_a238.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var _a238;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,(_a238=this.beans.dragAndDrop.getDragAndDropImageComponent())==null||_a238.setIcon(this.getIconName(),!1))}moveInterval(){var _a238,_b2;let pixelsToMove;this.intervalCount++,pixelsToMove=10+this.intervalCount*SCROLL_ACCELERATION_RATE,pixelsToMove>SCROLL_MOVE_WIDTH&&(pixelsToMove=SCROLL_MOVE_WIDTH);let pixelsMoved=null;const scrollFeature=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?pixelsMoved=scrollFeature.scrollHorizontally(-pixelsToMove):this.needToMoveRight&&(pixelsMoved=scrollFeature.scrollHorizontally(pixelsToMove)),pixelsMoved!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols,dragAndDrop,gos}=this.beans;if(this.failedMoveAttempts<=MOVE_FAIL_THRESHOLD+1||!pinnedCols)return;if((_a238=dragAndDrop.getDragAndDropImageComponent())==null||_a238.setIcon("pinned",!1),!gos.get("suppressMoveWhenColumnDragging")){const columns=(_b2=this.lastDraggingEvent)==null?void 0:_b2.dragItem.columns;this.attemptToPinColumns(columns,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(columns,pinned,fromMoving=!1){const allowedCols=(columns||[]).filter(c=>!c.getColDef().lockPinned);if(!allowedCols.length)return 0;fromMoving&&(pinned=this.getPinDirection());const{pinnedCols,dragAndDrop}=this.beans;return pinnedCols==null||pinnedCols.setColsPinned(allowedCols,pinned,"uiColumnDragged"),fromMoving&&dragAndDrop.nudge(),allowedCols.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},__name(_a92,"MoveColumnFeature"),_a92);function setColumnHighlighted(column,highlighted){column.highlighted!==highlighted&&(column.highlighted=highlighted,column.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}__name(setColumnHighlighted,"setColumnHighlighted");function findFirstAndLastMovingColumns(allMovingColumns){const moveLen=allMovingColumns.length;let firstMovingCol,lastMovingCol;for(let i=0;i<moveLen;i++){if(!firstMovingCol){const leftCol=allMovingColumns[i];leftCol.getLeft()!=null&&(firstMovingCol=leftCol)}if(!lastMovingCol){const rightCol=allMovingColumns[moveLen-1-i];rightCol.getLeft()!=null&&(lastMovingCol=rightCol)}if(firstMovingCol&&lastMovingCol)break}return{firstMovingCol,lastMovingCol}}__name(findFirstAndLastMovingColumns,"findFirstAndLastMovingColumns");var _a93,BodyDropTarget=(_a93=class extends BeanStub{constructor(pinned,eContainer){super(),this.pinned=pinned,this.eContainer=eContainer}postConstruct(){const{ctrlsSvc,dragAndDrop}=this.beans,pinned=this.pinned;ctrlsSvc.whenReady(this,p=>{let eSecondaryContainers;const eBodyViewport=p.gridBodyCtrl.eBodyViewport;switch(pinned){case"left":eSecondaryContainers=[[eBodyViewport,p.left.eContainer],[p.bottomLeft.eContainer],[p.topLeft.eContainer]];break;case"right":eSecondaryContainers=[[eBodyViewport,p.right.eContainer],[p.bottomRight.eContainer],[p.topRight.eContainer]];break;default:eSecondaryContainers=[[eBodyViewport,p.center.eViewport],[p.bottomCenter.eViewport],[p.topCenter.eViewport]];break}this.eSecondaryContainers=eSecondaryContainers}),this.moveColumnFeature=this.createManagedBean(new MoveColumnFeature(pinned)),this.bodyDropPivotTarget=this.createManagedBean(new BodyDropPivotTarget(pinned)),dragAndDrop.addDropTarget(this),this.addDestroyFunc(()=>dragAndDrop.removeDropTarget(this))}isInterestedIn(type){return type===1||type===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(draggingEvent){return this.beans.colModel.isPivotMode()&&draggingEvent.dragSource.type===0}onDragEnter(draggingEvent){this.currentDropListener=this.isDropColumnInPivotMode(draggingEvent)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(draggingEvent)}onDragLeave(params){this.currentDropListener.onDragLeave(params)}onDragging(params){this.currentDropListener.onDragging(params)}onDragStop(params){this.currentDropListener.onDragStop(params)}onDragCancel(){this.currentDropListener.onDragCancel()}},__name(_a93,"BodyDropTarget"),_a93),_a94,ColumnMoveService=(_a94=class extends BeanStub{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(fromIndex,toIndex,source){const gridColumns=this.beans.colModel.getCols();if(!gridColumns)return;const column=gridColumns[fromIndex];this.moveColumns([column],toIndex,source)}moveColumns(columnsToMoveKeys,toIndex,source,finished=!0){const{colModel,colAnimation,visibleCols,eventSvc}=this.beans,gridColumns=colModel.getCols();if(!gridColumns)return;if(toIndex>gridColumns.length-columnsToMoveKeys.length){_warn(30,{toIndex});return}colAnimation==null||colAnimation.start();const movedColumns=colModel.getColsForKeys(columnsToMoveKeys);this.doesMovePassRules(movedColumns,toIndex)&&(_moveInArray(colModel.getCols(),movedColumns,toIndex),visibleCols.refresh(source),eventSvc.dispatchEvent({type:"columnMoved",columns:movedColumns,column:movedColumns.length===1?movedColumns[0]:null,toIndex,finished,source})),colAnimation==null||colAnimation.finish()}doesMovePassRules(columnsToMove,toIndex){const proposedColumnOrder=this.getProposedColumnOrder(columnsToMove,toIndex);return this.doesOrderPassRules(proposedColumnOrder)}doesOrderPassRules(gridOrder){const{colModel,gos}=this.beans;return!(!doesMovePassMarryChildren(gridOrder,colModel.getColTree())||!__name(proposedColumnOrder=>{const lockPositionToPlacement=__name(position=>position?position==="left"||position===!0?-1:1:0,"lockPositionToPlacement"),isRtl=gos.get("enableRtl");let lastPlacement=isRtl?1:-1,rulePassed=!0;return proposedColumnOrder.forEach(col=>{const placement=lockPositionToPlacement(col.getColDef().lockPosition);isRtl?placement>lastPlacement&&(rulePassed=!1):placement<lastPlacement&&(rulePassed=!1),lastPlacement=placement}),rulePassed},"doesMovePassLockedPositions")(gridOrder))}getProposedColumnOrder(columnsToMove,toIndex){const proposedColumnOrder=this.beans.colModel.getCols().slice();return _moveInArray(proposedColumnOrder,columnsToMove,toIndex),proposedColumnOrder}createBodyDropTarget(pinned,dropContainer){return new BodyDropTarget(pinned,dropContainer)}moveHeader(hDirection,eGui,column,pinned,bean){const{ctrlsSvc,gos,colModel,visibleCols,focusSvc}=this.beans,rect=eGui.getBoundingClientRect(),left=rect.left,isGroup=isColumnGroup2(column),width=isGroup?rect.width:column.getActualWidth(),isLeft=hDirection==="left"!==gos.get("enableRtl"),xPosition=normaliseX({x:isLeft?left-20:left+width+20,pinned,fromKeyboard:!0,gos,ctrlsSvc}),headerPosition=focusSvc.focusedHeader;attemptMoveColumns({allMovingColumns:isGroup?column.getLeafColumns():[column],isFromHeader:!0,fromLeft:hDirection==="right",xPosition,pinned,fromEnter:!1,fakeEvent:!1,gos,colModel,colMoves:this,visibleCols,finished:!0});let targetColumn;if(isGroup){const displayedLeafColumns=column.getDisplayedLeafColumns();targetColumn=isLeft?displayedLeafColumns[0]:_last(displayedLeafColumns)}else targetColumn=column;if(ctrlsSvc.getScrollFeature().ensureColumnVisible(targetColumn,"auto"),(!bean.isAlive()||gos.get("ensureDomOrder"))&&headerPosition){let restoreFocusColumn;if(isGroup){const groupId=column.getGroupId(),leafCols=column.getLeafColumns();if(!leafCols.length)return;const parent=leafCols[0].getParent();if(!parent)return;restoreFocusColumn=findGroupWidthId(parent,groupId)}else restoreFocusColumn=column;restoreFocusColumn&&focusSvc.focusHeaderPosition({headerPosition:{...headerPosition,column:restoreFocusColumn}})}}setDragSourceForHeader(eSource,column,displayName){const{gos,colModel,dragAndDrop,visibleCols}=this.beans;let hideColumnOnExit=!gos.get("suppressDragLeaveHidesColumns");const isGroup=isColumnGroup2(column),columns=isGroup?column.getProvidedColumnGroup().getLeafColumns():[column],dragSource={type:1,eElement:eSource,getDefaultIconName:__name(()=>hideColumnOnExit?"hide":"notAllowed","getDefaultIconName"),getDragItem:isGroup?()=>createDragItemForGroup(column,visibleCols.allCols):()=>createDragItem(column),dragItemName:displayName,onDragStarted:__name(()=>{hideColumnOnExit=!gos.get("suppressDragLeaveHidesColumns"),setColumnsMoving(columns,!0)},"onDragStarted"),onDragStopped:__name(()=>setColumnsMoving(columns,!1),"onDragStopped"),onDragCancelled:__name(()=>setColumnsMoving(columns,!1),"onDragCancelled"),onGridEnter:__name(dragItem=>{if(hideColumnOnExit){const{columns:columns2=[],visibleState}=dragItem??{},hasVisibleState=isGroup?col=>!visibleState||visibleState[col.getColId()]:()=>!0,unlockedColumns=columns2.filter(col=>!col.getColDef().lockVisible&&hasVisibleState(col));colModel.setColsVisible(unlockedColumns,!0,"uiColumnMoved")}},"onGridEnter"),onGridExit:__name(dragItem=>{var _a238;if(hideColumnOnExit){const unlockedColumns=((_a238=dragItem==null?void 0:dragItem.columns)==null?void 0:_a238.filter(col=>!col.getColDef().lockVisible))||[];colModel.setColsVisible(unlockedColumns,!1,"uiColumnMoved")}},"onGridExit")};return dragAndDrop.addDragSource(dragSource,!0),dragSource}},__name(_a94,"ColumnMoveService"),_a94);function findGroupWidthId(columnGroup,id){for(;columnGroup;){if(columnGroup.getGroupId()===id)return columnGroup;columnGroup=columnGroup.getParent()}}__name(findGroupWidthId,"findGroupWidthId");function createDragItem(column){const visibleState={};return visibleState[column.getId()]=column.isVisible(),{columns:[column],visibleState}}__name(createDragItem,"createDragItem");function createDragItemForGroup(columnGroup,allCols){const allColumnsOriginalOrder=columnGroup.getProvidedColumnGroup().getLeafColumns(),visibleState={};allColumnsOriginalOrder.forEach(column=>visibleState[column.getId()]=column.isVisible());const allColumnsCurrentOrder=[];allCols.forEach(column=>{allColumnsOriginalOrder.indexOf(column)>=0&&(allColumnsCurrentOrder.push(column),_removeFromArray(allColumnsOriginalOrder,column))}),allColumnsOriginalOrder.forEach(column=>allColumnsCurrentOrder.push(column));const columnsInSplit=[],columnGroupColumns=columnGroup.getLeafColumns();for(const col of allColumnsCurrentOrder)columnGroupColumns.indexOf(col)!==-1&&columnsInSplit.push(col);return{columns:allColumnsCurrentOrder,columnsInSplit,visibleState}}__name(createDragItemForGroup,"createDragItemForGroup");var ColumnMoveModule={moduleName:"ColumnMove",version:VERSION,beans:[ColumnMoveService,ColumnAnimationService],apiFunctions:{moveColumnByIndex,moveColumns},dependsOn:[SharedDragAndDropModule],css:[columnMovingCSS]},_a95,AutoWidthCalculator=(_a95=class extends BeanStub{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,p=>{this.centerRowContainerCtrl=p.center})}getPreferredWidthForColumn(column,skipHeader){const eHeaderCell=this.getHeaderCellForColumn(column);if(!eHeaderCell)return-1;const elements=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(column);return skipHeader||elements.push(eHeaderCell),this.getPreferredWidthForElements(elements)}getPreferredWidthForColumnGroup(columnGroup){const eHeaderCell=this.getHeaderCellForColumn(columnGroup);return eHeaderCell?this.getPreferredWidthForElements([eHeaderCell]):-1}getPreferredWidthForElements(elements,extraPadding){const eDummyContainer=document.createElement("form");eDummyContainer.style.position="fixed";const eBodyContainer=this.centerRowContainerCtrl.eContainer;elements.forEach(el=>this.cloneItemIntoDummy(el,eDummyContainer)),eBodyContainer.appendChild(eDummyContainer);const dummyContainerWidth=eDummyContainer.offsetWidth;return eBodyContainer.removeChild(eDummyContainer),extraPadding=extraPadding??this.gos.get("autoSizePadding"),dummyContainerWidth+extraPadding}getHeaderCellForColumn(column){let element=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(container=>{const res=container.getHtmlElementForColumnHeader(column);res!=null&&(element=res)}),element}cloneItemIntoDummy(eCell,eDummyContainer){const eCellClone=eCell.cloneNode(!0);eCellClone.style.width="",eCellClone.style.position="static",eCellClone.style.left="";const eCloneParent=document.createElement("div"),eCloneParentClassList=eCloneParent.classList;["ag-header-cell","ag-header-group-cell"].some(cls=>eCellClone.classList.contains(cls))?(eCloneParentClassList.add("ag-header","ag-header-row"),eCloneParent.style.position="static"):eCloneParentClassList.add("ag-row");let pointer=eCell.parentElement;for(;pointer;){if(["ag-header-row","ag-row"].some(cls=>pointer.classList.contains(cls))){for(let i=0;i<pointer.classList.length;i++){const item=pointer.classList[i];item!="ag-row-position-absolute"&&eCloneParentClassList.add(item)}break}pointer=pointer.parentElement}eCloneParent.appendChild(eCellClone),eDummyContainer.appendChild(eCloneParent)}},__name(_a95,"AutoWidthCalculator"),_a95),AutoWidthModule={moduleName:"AutoWidth",version:VERSION,beans:[AutoWidthCalculator]};function setColumnWidths(beans,columnWidths,finished=!0,source="api"){var _a238;(_a238=beans.colResize)==null||_a238.setColumnWidths(columnWidths,!1,finished,source)}__name(setColumnWidths,"setColumnWidths");var _a96,GroupResizeFeature=(_a96=class extends BeanStub{constructor(comp,eResize,pinned,columnGroup){super(),this.comp=comp,this.eResize=eResize,this.pinned=pinned,this.columnGroup=columnGroup}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc,gos,colAutosize}=this.beans,finishedWithResizeFunc=horizontalResizeSvc.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(finishedWithResizeFunc),!gos.get("suppressAutoSize")&&colAutosize&&this.addDestroyFunc(colAutosize.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(shiftKey){const{columnsToResize,resizeStartWidth,resizeRatios,groupAfterColumns,groupAfterStartWidth,groupAfterRatios}=this.getInitialValues(shiftKey);this.resizeCols=columnsToResize,this.resizeStartWidth=resizeStartWidth,this.resizeRatios=resizeRatios,this.resizeTakeFromCols=groupAfterColumns,this.resizeTakeFromStartWidth=groupAfterStartWidth,this.resizeTakeFromRatios=groupAfterRatios,this.toggleColumnResizing(!0)}onResizing(finished,resizeAmount,source="uiColumnResized"){const resizeAmountNormalised=this.normaliseDragChange(resizeAmount),width=this.resizeStartWidth+resizeAmountNormalised;this.resizeColumnsFromLocalValues(width,source,finished)}getInitialValues(shiftKey){var _a238;const getInitialSizeOfColumns=__name(columns=>columns.reduce((totalWidth,column)=>totalWidth+column.getActualWidth(),0),"getInitialSizeOfColumns"),getSizeRatiosOfColumns=__name((columns,initialSizeOfColumns)=>columns.map(column=>column.getActualWidth()/initialSizeOfColumns),"getSizeRatiosOfColumns"),columnsToResize=this.getColumnsToResize(),resizeStartWidth=getInitialSizeOfColumns(columnsToResize),resizeRatios=getSizeRatiosOfColumns(columnsToResize,resizeStartWidth),columnSizeAndRatios={columnsToResize,resizeStartWidth,resizeRatios};let groupAfter=null;if(shiftKey&&(groupAfter=((_a238=this.beans.colGroupSvc)==null?void 0:_a238.getGroupAtDirection(this.columnGroup,"After"))??null),groupAfter){const takeFromLeafCols=groupAfter.getDisplayedLeafColumns(),groupAfterColumns=columnSizeAndRatios.groupAfterColumns=takeFromLeafCols.filter(col=>col.isResizable()),groupAfterStartWidth=columnSizeAndRatios.groupAfterStartWidth=getInitialSizeOfColumns(groupAfterColumns);columnSizeAndRatios.groupAfterRatios=getSizeRatiosOfColumns(groupAfterColumns,groupAfterStartWidth)}else columnSizeAndRatios.groupAfterColumns=void 0,columnSizeAndRatios.groupAfterStartWidth=void 0,columnSizeAndRatios.groupAfterRatios=void 0;return columnSizeAndRatios}resizeLeafColumnsToFit(source){const preferredSize=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),initialValues=this.getInitialValues();preferredSize>initialValues.resizeStartWidth&&this.resizeColumns(initialValues,preferredSize,source,!0)}resizeColumnsFromLocalValues(totalWidth,source,finished=!0){if(!this.resizeCols||!this.resizeRatios)return;const initialValues={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(initialValues,totalWidth,source,finished)}resizeColumns(initialValues,totalWidth,source,finished=!0){var _a238;const{columnsToResize,resizeStartWidth,resizeRatios,groupAfterColumns,groupAfterStartWidth,groupAfterRatios}=initialValues,resizeSets=[];if(resizeSets.push({columns:columnsToResize,ratios:resizeRatios,width:totalWidth}),groupAfterColumns){const diff=totalWidth-resizeStartWidth;resizeSets.push({columns:groupAfterColumns,ratios:groupAfterRatios,width:groupAfterStartWidth-diff})}(_a238=this.beans.colResize)==null||_a238.resizeColumnSets({resizeSets,finished,source}),finished&&this.toggleColumnResizing(!1)}toggleColumnResizing(resizing){this.comp.addOrRemoveCssClass("ag-column-resizing",resizing)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(col=>col.isResizable())}normaliseDragChange(dragChange){let result=dragChange;return this.gos.get("enableRtl")?this.pinned!=="left"&&(result*=-1):this.pinned==="right"&&(result*=-1),result}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},__name(_a96,"GroupResizeFeature"),_a96),_a97,ResizeFeature=(_a97=class extends BeanStub{constructor(pinned,column,eResize,comp,ctrl){super(),this.pinned=pinned,this.column=column,this.eResize=eResize,this.comp=comp,this.ctrl=ctrl}postConstruct(){const destroyResizeFuncs=[];let canResize,canAutosize;const addResize=__name(()=>{if(_setDisplayed(this.eResize,canResize),!canResize)return;const{horizontalResizeSvc,colAutosize}=this.beans,finishedWithResizeFunc=horizontalResizeSvc.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});destroyResizeFuncs.push(finishedWithResizeFunc),canAutosize&&colAutosize&&destroyResizeFuncs.push(colAutosize.addColumnAutosize(this.eResize,this.column))},"addResize"),removeResize=__name(()=>{destroyResizeFuncs.forEach(f=>f()),destroyResizeFuncs.length=0},"removeResize"),refresh=__name(()=>{const resize=this.column.isResizable(),autoSize=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(resize!==canResize||autoSize!==canAutosize)&&(canResize=resize,canAutosize=autoSize,removeResize(),addResize())},"refresh");refresh(),this.addDestroyFunc(removeResize),this.ctrl.setRefreshFunction("resize",refresh)}onResizing(finished,resizeAmount){const{column:key,lastResizeAmount,resizeStartWidth,beans}=this,resizeAmountNormalised=this.normaliseResizeAmount(resizeAmount),newWidth=resizeStartWidth+resizeAmountNormalised,columnWidths=[{key,newWidth}],{pinnedCols,ctrlsSvc,colResize}=beans;if(this.column.getPinned()){const leftWidth=(pinnedCols==null?void 0:pinnedCols.leftWidth)??0,rightWidth=(pinnedCols==null?void 0:pinnedCols.rightWidth)??0,bodyWidth=_getInnerWidth(ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(leftWidth+rightWidth+(resizeAmountNormalised-lastResizeAmount)>bodyWidth)return}this.lastResizeAmount=resizeAmountNormalised,colResize==null||colResize.setColumnWidths(columnWidths,this.resizeWithShiftKey,finished,"uiColumnResized"),finished&&this.toggleColumnResizing(!1)}onResizeStart(shiftKey){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=shiftKey,this.toggleColumnResizing(!0)}toggleColumnResizing(resizing){this.comp.addOrRemoveCssClass("ag-column-resizing",resizing)}normaliseResizeAmount(dragChange){let result=dragChange;const notPinningLeft=this.pinned!=="left",pinningRight=this.pinned==="right";return this.gos.get("enableRtl")?notPinningLeft&&(result*=-1):pinningRight&&(result*=-1),result}},__name(_a97,"ResizeFeature"),_a97),_a98,ColumnResizeService=(_a98=class extends BeanStub{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(columnWidths,shiftKey,finished,source){const sets=[],{colModel,gos,visibleCols}=this.beans;columnWidths.forEach(columnWidth=>{const col=colModel.getColDefCol(columnWidth.key)||colModel.getCol(columnWidth.key);if(!col)return;if(sets.push({width:columnWidth.newWidth,ratios:[1],columns:[col]}),gos.get("colResizeDefault")==="shift"&&(shiftKey=!shiftKey),shiftKey){const otherCol=visibleCols.getColAfter(col);if(!otherCol)return;const widthDiff=col.getActualWidth()-columnWidth.newWidth,otherColWidth=otherCol.getActualWidth()+widthDiff;sets.push({width:otherColWidth,ratios:[1],columns:[otherCol]})}}),sets.length!==0&&this.resizeColumnSets({resizeSets:sets,finished,source})}resizeColumnSets(params){const{resizeSets,finished,source}=params;if(!(!resizeSets||resizeSets.every(columnResizeSet=>checkMinAndMaxWidthsForSet(columnResizeSet)))){if(finished){const columns=resizeSets&&resizeSets.length>0?resizeSets[0].columns:null;dispatchColumnResizedEvent(this.eventSvc,columns,finished,source)}return}const changedCols=[],allResizedCols=[];resizeSets.forEach(set=>{const{width,columns,ratios}=set,newWidths={},finishedCols={};columns.forEach(col=>allResizedCols.push(col));let finishedColsGrew=!0,loopCount=0;for(;finishedColsGrew;){if(loopCount++,loopCount>1e3){_error(31);break}finishedColsGrew=!1;const subsetCols=[];let subsetRatioTotal=0,pixelsToDistribute=width;columns.forEach((col,index)=>{if(finishedCols[col.getId()])pixelsToDistribute-=newWidths[col.getId()];else{subsetCols.push(col);const ratioThisCol=ratios[index];subsetRatioTotal+=ratioThisCol}});const ratioScale=1/subsetRatioTotal;subsetCols.forEach((col,index)=>{const lastCol=index===subsetCols.length-1;let colNewWidth;lastCol?colNewWidth=pixelsToDistribute:(colNewWidth=Math.round(ratios[index]*width*ratioScale),pixelsToDistribute-=colNewWidth);const minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();colNewWidth<minWidth?(colNewWidth=minWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0):maxWidth>0&&colNewWidth>maxWidth&&(colNewWidth=maxWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0),newWidths[col.getId()]=colNewWidth})}columns.forEach(col=>{const newWidth=newWidths[col.getId()];col.getActualWidth()!==newWidth&&(col.setActualWidth(newWidth,source),changedCols.push(col))})});const atLeastOneColChanged=changedCols.length>0;let flexedCols=[];if(atLeastOneColChanged){const{colFlex,visibleCols,colViewport}=this.beans;flexedCols=(colFlex==null?void 0:colFlex.refreshFlexedColumns({resizingCols:allResizedCols,skipSetLeft:!0}))??[],visibleCols.setLeftValues(source),visibleCols.updateBodyWidths(),colViewport.checkViewportColumns()}const colsForEvent=allResizedCols.concat(flexedCols);(atLeastOneColChanged||finished)&&dispatchColumnResizedEvent(this.eventSvc,colsForEvent,finished,source,flexedCols)}resizeHeader(column,delta,shiftKey){if(!column.isResizable())return;const actualWidth=column.getActualWidth(),minWidth=column.getMinWidth(),maxWidth=column.getMaxWidth(),newWidth=Math.min(Math.max(actualWidth+delta,minWidth),maxWidth);this.setColumnWidths([{key:column,newWidth}],shiftKey,!0,"uiColumnResized")}createResizeFeature(pinned,column,eResize,comp,ctrl){return new ResizeFeature(pinned,column,eResize,comp,ctrl)}createGroupResizeFeature(comp,eResize,pinned,columnGroup){return new GroupResizeFeature(comp,eResize,pinned,columnGroup)}},__name(_a98,"ColumnResizeService"),_a98);function checkMinAndMaxWidthsForSet(columnResizeSet){const{columns,width}=columnResizeSet;let minWidthAccumulated=0,maxWidthAccumulated=0,maxWidthActive=!0;columns.forEach(col=>{const minWidth=col.getMinWidth();minWidthAccumulated+=minWidth||0;const maxWidth=col.getMaxWidth();maxWidth>0?maxWidthAccumulated+=maxWidth:maxWidthActive=!1});const minWidthPasses=width>=minWidthAccumulated,maxWidthPasses=!maxWidthActive||width<=maxWidthAccumulated;return minWidthPasses&&maxWidthPasses}__name(checkMinAndMaxWidthsForSet,"checkMinAndMaxWidthsForSet");var ColumnResizeModule={moduleName:"ColumnResize",version:VERSION,beans:[ColumnResizeService],apiFunctions:{setColumnWidths},dependsOn:[HorizontalResizeModule,AutoWidthModule]},_a99,GroupWidthFeature=(_a99=class extends BeanStub{constructor(comp,columnGroup){super(),this.removeChildListenersFuncs=[],this.columnGroup=columnGroup,this.comp=comp}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const widthChangedListener=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(column=>{column.__addEventListener("widthChanged",widthChangedListener),column.__addEventListener("visibleChanged",widthChangedListener),this.removeChildListenersFuncs.push(()=>{column.__removeEventListener("widthChanged",widthChangedListener),column.__removeEventListener("visibleChanged",widthChangedListener)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(func=>func()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const columnWidth=this.columnGroup.getActualWidth();this.comp.setWidth(`${columnWidth}px`),this.comp.addOrRemoveCssClass("ag-hidden",columnWidth===0)}},__name(_a99,"GroupWidthFeature"),_a99),_a100,HeaderGroupCellCtrl=(_a100=class extends AbstractHeaderCellCtrl{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(comp,eGui,eResize,eHeaderCompWrapper,compBean){const{column,beans}=this,{context,colNames,colHover,rangeSvc,colResize}=beans;this.comp=comp,compBean=setupCompBean(this,context,compBean),this.setGui(eGui,compBean),this.displayName=colNames.getDisplayNameForColumnGroup(column,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(compBean),this.setupExpandable(compBean),this.setupTooltip(),this.setupAutoHeight({wrapperElement:eHeaderCompWrapper,compBean}),this.setupUserComp(),this.addHeaderMouseListeners(compBean),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const pinned=this.rowCtrl.pinned,leafCols=column.getProvidedColumnGroup().getLeafColumns();colHover==null||colHover.createHoverFeature(compBean,leafCols,eGui),rangeSvc==null||rangeSvc.createRangeHighlightFeature(compBean,column,comp),compBean.createManagedBean(new SetLeftFeature(column,eGui,beans)),compBean.createManagedBean(new GroupWidthFeature(comp,column)),colResize?this.resizeFeature=compBean.createManagedBean(colResize.createGroupResizeFeature(comp,eResize,pinned,column)):comp.setResizableDisplayed(!1),compBean.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:__name(()=>{},"onTabKeyDown"),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(compBean,leafCols),compBean.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(compBean),compBean.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column,beans}=this,colDef=column.getDefinition();return _addGridCommonParams(beans.gos,{colDef,columnGroup:column,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos,comp}=this,groupHeaderHeight=gos.get("groupHeaderHeight");groupHeaderHeight!=null?groupHeaderHeight===0?comp.setHeaderWrapperHidden(!0):comp.setHeaderWrapperMaxHeight(groupHeaderHeight):(comp.setHeaderWrapperHidden(!1),comp.setHeaderWrapperMaxHeight(null))}addHighlightListeners(compBean,columns){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const column of columns)compBean.addManagedListeners(column,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,column)})}onLeafColumnHighlightChanged(column){const displayedColumns=this.column.getDisplayedLeafColumns(),isFirst=displayedColumns[0]===column,isLast=_last(displayedColumns)===column;if(!isFirst&&!isLast)return;const highlighted=column.getHighlighted(),isColumnMoveAtThisLevel=!!this.rowCtrl.getHeaderCellCtrls().find(ctrl=>ctrl.column.isMoving());let beforeOn=!1,afterOn=!1;if(isColumnMoveAtThisLevel){const isRtl=this.beans.gos.get("enableRtl"),isHighlightAfter=highlighted===1,isHighlightBefore=highlighted===0;isFirst&&(isRtl?afterOn=isHighlightAfter:beforeOn=isHighlightBefore),isLast&&(isRtl?beforeOn=isHighlightBefore:afterOn=isHighlightAfter)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",beforeOn),this.comp.addOrRemoveCssClass("ag-header-highlight-after",afterOn)}resizeHeader(delta,shiftKey){const{resizeFeature}=this;if(!resizeFeature)return;const initialValues=resizeFeature.getInitialValues(shiftKey);resizeFeature.resizeColumns(initialValues,initialValues.resizeStartWidth+delta,"uiColumnResized",!0)}resizeLeafColumnsToFit(source){var _a238;(_a238=this.resizeFeature)==null||_a238.resizeLeafColumnsToFit(source)}setupUserComp(){const{colGroupSvc,userCompFactory,gos}=this.beans,params=_addGridCommonParams(gos,{displayName:this.displayName,columnGroup:this.column,setExpanded:__name(expanded=>{colGroupSvc.setColumnGroupOpened(this.column.getProvidedColumnGroup(),expanded,"gridInitializing")},"setExpanded"),setTooltip:__name((value,shouldDisplayTooltip)=>{gos.assertModuleRegistered("Tooltip",3),this.setupTooltip(value,shouldDisplayTooltip)},"setTooltip")}),compDetails=_getHeaderGroupCompDetails(userCompFactory,params);compDetails&&this.comp.setUserCompDetails(compDetails)}addHeaderMouseListeners(compBean){const listener=__name(e=>this.handleMouseOverChange(e.type==="mouseenter"),"listener"),clickListener=__name(()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),"clickListener"),contextMenuListener=__name(event=>this.handleContextMenuMouseEvent(event,void 0,this.column.getProvidedColumnGroup()),"contextMenuListener");compBean.addManagedListeners(this.eGui,{mouseenter:listener,mouseleave:listener,click:clickListener,contextmenu:contextMenuListener})}handleMouseOverChange(isMouseOver){this.eventSvc.dispatchEvent({type:isMouseOver?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(value,shouldDisplayTooltip){var _a238;this.tooltipFeature=(_a238=this.beans.tooltipSvc)==null?void 0:_a238.setupHeaderGroupTooltip(this.tooltipFeature,this,value,shouldDisplayTooltip)}setupExpandable(compBean){const providedColGroup=this.column.getProvidedColumnGroup();this.refreshExpanded();const listener=this.refreshExpanded.bind(this);compBean.addManagedListeners(providedColGroup,{expandedChanged:listener,expandableChanged:listener})}refreshExpanded(){const{column}=this;this.expandable=column.isExpandable();const expanded=column.isExpanded();this.expandable?this.comp.setAriaExpanded(expanded?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column}=this,colGroupDef=column.getColGroupDef(),classes=_getHeaderClassesFromColDef(colGroupDef,this.gos,null,column);column.isPadding()?(classes.push("ag-header-group-cell-no-group"),column.getLeafColumns().every(col=>col.isSpanHeaderHeight())&&classes.push("ag-header-span-height")):(classes.push("ag-header-group-cell-with-group"),colGroupDef!=null&&colGroupDef.wrapHeaderText&&classes.push("ag-header-cell-wrap-text")),classes.forEach(c=>this.comp.addOrRemoveCssClass(c,!0))}setupMovingCss(compBean){const{column}=this,leafColumns=column.getProvidedColumnGroup().getLeafColumns(),listener=__name(()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",column.isMoving()),"listener");leafColumns.forEach(col=>{compBean.addManagedListeners(col,{movingChanged:listener})}),listener()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const wrapperHasFocus=this.getWrapperHasFocus();if(!(!this.expandable||!wrapperHasFocus)&&e.key===KeyCode.ENTER){const column=this.column,newExpandedValue=!column.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(column.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")}}setDragSource(eHeaderGroup){var _a238;!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),eHeaderGroup&&(this.dragSource=((_a238=this.beans.colMoves)==null?void 0:_a238.setDragSourceForHeader(eHeaderGroup,this.column,this.displayName))??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(column=>column.getColDef().suppressMovable||column.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}},__name(_a100,"HeaderGroupCellCtrl"),_a100);function setColumnGroupOpened(beans,group,newValue){var _a238;(_a238=beans.colGroupSvc)==null||_a238.setColumnGroupOpened(group,newValue,"api")}__name(setColumnGroupOpened,"setColumnGroupOpened");function getColumnGroup(beans,name,instanceId){var _a238;return((_a238=beans.colGroupSvc)==null?void 0:_a238.getColumnGroup(name,instanceId))??null}__name(getColumnGroup,"getColumnGroup");function getProvidedColumnGroup(beans,name){var _a238;return((_a238=beans.colGroupSvc)==null?void 0:_a238.getProvidedColGroup(name))??null}__name(getProvidedColumnGroup,"getProvidedColumnGroup");function getDisplayNameForColumnGroup(beans,columnGroup,location){return beans.colNames.getDisplayNameForColumnGroup(columnGroup,location)||""}__name(getDisplayNameForColumnGroup,"getDisplayNameForColumnGroup");function getColumnGroupState(beans){var _a238;return((_a238=beans.colGroupSvc)==null?void 0:_a238.getColumnGroupState())??[]}__name(getColumnGroupState,"getColumnGroupState");function setColumnGroupState(beans,stateItems){var _a238;(_a238=beans.colGroupSvc)==null||_a238.setColumnGroupState(stateItems,"api")}__name(setColumnGroupState,"setColumnGroupState");function resetColumnGroupState(beans){var _a238;(_a238=beans.colGroupSvc)==null||_a238.resetColumnGroupState("api")}__name(resetColumnGroupState,"resetColumnGroupState");function getLeftDisplayedColumnGroups(beans){return beans.visibleCols.treeLeft}__name(getLeftDisplayedColumnGroups,"getLeftDisplayedColumnGroups");function getCenterDisplayedColumnGroups(beans){return beans.visibleCols.treeCenter}__name(getCenterDisplayedColumnGroups,"getCenterDisplayedColumnGroups");function getRightDisplayedColumnGroups(beans){return beans.visibleCols.treeRight}__name(getRightDisplayedColumnGroups,"getRightDisplayedColumnGroups");function getAllDisplayedColumnGroups(beans){return beans.visibleCols.getAllTrees()}__name(getAllDisplayedColumnGroups,"getAllDisplayedColumnGroups");function _removeAllFromUnorderedArray(array,toRemove){for(let i=0;i<toRemove.length;i++){const index=array.indexOf(toRemove[i]);index>=0&&(array[index]=array[array.length-1],array.pop())}}__name(_removeAllFromUnorderedArray,"_removeAllFromUnorderedArray");var _a101,VisibleColsService=(_a101=class extends BeanStub{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(source,skipTreeBuild=!1){var _a238;const{colModel,colGroupSvc,colViewport}=this.beans;skipTreeBuild||this.buildTrees(colModel,colGroupSvc),colGroupSvc==null||colGroupSvc.updateOpenClosedVisibility();const leftCols=pickDisplayedCols(this.treeLeft);this.leftCols=leftCols,this.centerCols=pickDisplayedCols(this.treeCenter);const rightCols=pickDisplayedCols(this.treeRight);this.rightCols=rightCols,this.joinColsAriaOrder(colModel),this.joinCols(),this.setLeftValues(source),this.autoHeightCols=this.allCols.filter(col=>col.isAutoHeight()),(_a238=this.beans.colFlex)==null||_a238.refreshFlexedColumns(),this.updateBodyWidths(),colViewport.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(colModel,leftCols,rightCols,source),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source})}updateBodyWidths(){const newBodyWidth=getWidthOfColsInList(this.centerCols),newLeftWidth=getWidthOfColsInList(this.leftCols),newRightWidth=getWidthOfColsInList(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==newBodyWidth,(this.bodyWidth!==newBodyWidth||this.leftWidth!==newLeftWidth||this.rightWidth!==newRightWidth)&&(this.bodyWidth=newBodyWidth,this.leftWidth=newLeftWidth,this.rightWidth=newRightWidth,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(source){this.setLeftValuesOfCols(source),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(colModel,leftCols,rightCols,source){let lastLeft,firstRight;this.gos.get("enableRtl")?(lastLeft=leftCols?leftCols[0]:null,firstRight=rightCols?_last(rightCols):null):(lastLeft=leftCols?_last(leftCols):null,firstRight=rightCols?rightCols[0]:null),colModel.getCols().forEach(col=>{col.setLastLeftPinned(col===lastLeft,source),col.setFirstRightPinned(col===firstRight,source)})}buildTrees(colModel,columnGroupSvc){const cols=colModel.getColsToShow(),leftCols=cols.filter(col=>col.getPinned()=="left"),rightCols=cols.filter(col=>col.getPinned()=="right"),centerCols=cols.filter(col=>col.getPinned()!="left"&&col.getPinned()!="right"),idCreator=new GroupInstanceIdCreator,createGroups=__name(params=>columnGroupSvc?columnGroupSvc.createColumnGroups(params):params.columns,"createGroups");this.treeLeft=createGroups({columns:leftCols,idCreator,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=createGroups({columns:rightCols,idCreator,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=createGroups({columns:centerCols,idCreator,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(colModel){const allColumns=colModel.getCols(),pinnedLeft=[],center=[],pinnedRight=[];for(const col of allColumns){const pinned=col.getPinned();pinned?pinned===!0||pinned==="left"?pinnedLeft.push(col):pinnedRight.push(col):center.push(col)}this.ariaOrderColumns=pinnedLeft.concat(center).concat(pinnedRight)}getAriaColIndex(colOrGroup){let col;return isColumnGroup2(colOrGroup)?col=colOrGroup.getLeafColumns()[0]:col=colOrGroup,this.ariaOrderColumns.indexOf(col)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(columns=>{columns.forEach(column=>{isColumnGroup2(column)&&column.checkLeft()})})}setLeftValuesOfCols(source){const{colModel}=this.beans;if(!colModel.getColDefCols())return;const allColumns=colModel.getCols().slice(0),doingRtl=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach(columns=>{if(doingRtl){let left=getWidthOfColsInList(columns);columns.forEach(column=>{left-=column.getActualWidth(),column.setLeft(left,source)})}else{let left=0;columns.forEach(column=>{column.setLeft(left,source),left+=column.getActualWidth()})}_removeAllFromUnorderedArray(allColumns,columns)}),allColumns.forEach(column=>{column.setLeft(null,source)})}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(column){return this.allCols.indexOf(column)>=0}getLeftColsForRow(rowNode){const{leftCols,beans:{colModel}}=this;return colModel.colSpanActive?this.getColsForRow(rowNode,leftCols):leftCols}getRightColsForRow(rowNode){const{rightCols,beans:{colModel}}=this;return colModel.colSpanActive?this.getColsForRow(rowNode,rightCols):rightCols}getColsForRow(rowNode,displayedColumns,filterCallback,emptySpaceBeforeColumn){const result=[];let lastConsideredCol=null;for(let i=0;i<displayedColumns.length;i++){const col=displayedColumns[i],maxAllowedColSpan=displayedColumns.length-i,colSpan=Math.min(col.getColSpan(rowNode),maxAllowedColSpan),columnsToCheckFilter=[col];if(colSpan>1){const colsToRemove=colSpan-1;for(let j=1;j<=colsToRemove;j++)columnsToCheckFilter.push(displayedColumns[i+j]);i+=colsToRemove}let filterPasses;filterCallback?(filterPasses=!1,columnsToCheckFilter.forEach(colForFilter=>{filterCallback(colForFilter)&&(filterPasses=!0)})):filterPasses=!0,filterPasses&&(result.length===0&&lastConsideredCol&&(emptySpaceBeforeColumn&&emptySpaceBeforeColumn(col))&&result.push(lastConsideredCol),result.push(col)),lastConsideredCol=col}return result}getContainerWidth(pinned){switch(pinned){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(col){const allDisplayedColumns=this.allCols,oldIndex=allDisplayedColumns.indexOf(col);return oldIndex>0?allDisplayedColumns[oldIndex-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const func=__name(child=>{this.colsAndGroupsMap[child.getUniqueId()]=child},"func");depthFirstAllColumnTreeSearch(this.treeCenter,!1,func),depthFirstAllColumnTreeSearch(this.treeLeft,!1,func),depthFirstAllColumnTreeSearch(this.treeRight,!1,func)}isVisible(item){return this.colsAndGroupsMap[item.getUniqueId()]===item}getFirstColumn(){const isRtl=this.gos.get("enableRtl"),queryOrder=["leftCols","centerCols","rightCols"];isRtl&&queryOrder.reverse();for(let i=0;i<queryOrder.length;i++){const container=this[queryOrder[i]];if(container.length)return isRtl?_last(container):container[0]}return null}getColAfter(col){const allDisplayedColumns=this.allCols,oldIndex=allDisplayedColumns.indexOf(col);return oldIndex<allDisplayedColumns.length-1?allDisplayedColumns[oldIndex+1]:null}getColsLeftWidth(){return getWidthOfColsInList(this.leftCols)}getDisplayedColumnsRightWidth(){return getWidthOfColsInList(this.rightCols)}isColAtEdge(col,edge){const allColumns=this.allCols;if(!allColumns.length)return!1;const isFirst=edge==="first";let columnToCompare;if(isColumnGroup2(col)){const leafColumns=col.getDisplayedLeafColumns();if(!leafColumns.length)return!1;columnToCompare=isFirst?leafColumns[0]:_last(leafColumns)}else columnToCompare=col;return(isFirst?allColumns[0]:_last(allColumns))===columnToCompare}},__name(_a101,"VisibleColsService"),_a101);function depthFirstAllColumnTreeSearch(tree,useDisplayedChildren,callback){if(tree)for(let i=0;i<tree.length;i++){const child=tree[i];if(isColumnGroup2(child)){const childTree=useDisplayedChildren?child.getDisplayedChildren():child.getChildren();depthFirstAllColumnTreeSearch(childTree,useDisplayedChildren,callback)}callback(child)}}__name(depthFirstAllColumnTreeSearch,"depthFirstAllColumnTreeSearch");function pickDisplayedCols(tree){const res=[];return depthFirstAllColumnTreeSearch(tree,!0,child=>{isColumn(child)&&res.push(child)}),res}__name(pickDisplayedCols,"pickDisplayedCols");var _a102,ColumnGroupService=(_a102=class extends BeanStub{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const columnGroupState=[],gridBalancedTree=this.beans.colModel.getColTree();return depthFirstOriginalTreeSearch(null,gridBalancedTree,node=>{isProvidedColumnGroup(node)&&columnGroupState.push({groupId:node.getGroupId(),open:node.isExpanded()})}),columnGroupState}resetColumnGroupState(source){const primaryColumnTree=this.beans.colModel.getColDefColTree();if(!primaryColumnTree)return;const stateItems=[];depthFirstOriginalTreeSearch(null,primaryColumnTree,child=>{if(isProvidedColumnGroup(child)){const colGroupDef=child.getColGroupDef(),groupState={groupId:child.getGroupId(),open:colGroupDef?colGroupDef.openByDefault:void 0};stateItems.push(groupState)}}),this.setColumnGroupState(stateItems,source)}setColumnGroupState(stateItems,source){const{colModel,colAnimation,visibleCols,eventSvc}=this.beans;if(!colModel.getColTree().length)return;colAnimation==null||colAnimation.start();const impactedGroups=[];stateItems.forEach(stateItem=>{const groupKey=stateItem.groupId,newValue=stateItem.open,providedColumnGroup=this.getProvidedColGroup(groupKey);providedColumnGroup&&providedColumnGroup.isExpanded()!==newValue&&(providedColumnGroup.setExpanded(newValue),impactedGroups.push(providedColumnGroup))}),visibleCols.refresh(source,!0),impactedGroups.length&&eventSvc.dispatchEvent({type:"columnGroupOpened",columnGroup:impactedGroups.length===1?impactedGroups[0]:void 0,columnGroups:impactedGroups}),colAnimation==null||colAnimation.finish()}setColumnGroupOpened(key,newValue,source){let keyAsString;isProvidedColumnGroup(key)?keyAsString=key.getId():keyAsString=key||"",this.setColumnGroupState([{groupId:keyAsString,open:newValue}],source)}getProvidedColGroup(key){let res=null;return depthFirstOriginalTreeSearch(null,this.beans.colModel.getColTree(),node=>{isProvidedColumnGroup(node)&&node.getId()===key&&(res=node)}),res}getGroupAtDirection(columnGroup,direction){const requiredLevel=columnGroup.getProvidedColumnGroup().getLevel()+columnGroup.getPaddingLevel(),colGroupLeafColumns=columnGroup.getDisplayedLeafColumns(),col=direction==="After"?_last(colGroupLeafColumns):colGroupLeafColumns[0],getDisplayColMethod=`getCol${direction}`;for(;;){const column=this.beans.visibleCols[getDisplayColMethod](col);if(!column)return null;const groupPointer=this.getColGroupAtLevel(column,requiredLevel);if(groupPointer!==columnGroup)return groupPointer}}getColGroupAtLevel(column,level){let groupPointer=column.getParent(),originalGroupLevel,groupPointerLevel;for(;originalGroupLevel=groupPointer.getProvidedColumnGroup().getLevel(),groupPointerLevel=groupPointer.getPaddingLevel(),!(originalGroupLevel+groupPointerLevel<=level);)groupPointer=groupPointer.getParent();return groupPointer}updateOpenClosedVisibility(){const allColumnGroups=this.beans.visibleCols.getAllTrees();depthFirstAllColumnTreeSearch(allColumnGroups,!1,child=>{isColumnGroup2(child)&&child.calculateDisplayedColumns()})}getColumnGroup(colId,partId){if(!colId)return null;if(isColumnGroup2(colId))return colId;const allColumnGroups=this.beans.visibleCols.getAllTrees(),checkPartId=typeof partId=="number";let result=null;return depthFirstAllColumnTreeSearch(allColumnGroups,!1,child=>{if(isColumnGroup2(child)){const columnGroup=child;let matched;checkPartId?matched=colId===columnGroup.getGroupId()&&partId===columnGroup.getPartId():matched=colId===columnGroup.getGroupId(),matched&&(result=columnGroup)}}),result}createColumnGroups(params){const{columns,idCreator,pinned,oldDisplayedGroups,isStandaloneStructure}=params,oldColumnsMapped=this.mapOldGroupsById(oldDisplayedGroups),topLevelResultCols=[];let groupsOrColsAtCurrentLevel=columns;for(;groupsOrColsAtCurrentLevel.length;){const currentlyIterating=groupsOrColsAtCurrentLevel;groupsOrColsAtCurrentLevel=[];let lastGroupedColIdx=0;const createGroupToIndex=__name(to=>{const from=lastGroupedColIdx;lastGroupedColIdx=to;const previousNode=currentlyIterating[from],previousNodeParent=(isColumnGroup2(previousNode)?previousNode.getProvidedColumnGroup():previousNode).getOriginalParent();if(previousNodeParent==null){for(let i=from;i<to;i++)topLevelResultCols.push(currentlyIterating[i]);return}const newGroup=this.createColumnGroup(previousNodeParent,idCreator,oldColumnsMapped,pinned,isStandaloneStructure);for(let i=from;i<to;i++)newGroup.addChild(currentlyIterating[i]);groupsOrColsAtCurrentLevel.push(newGroup)},"createGroupToIndex");for(let i=1;i<currentlyIterating.length;i++){const thisNode=currentlyIterating[i],thisNodeParent=(isColumnGroup2(thisNode)?thisNode.getProvidedColumnGroup():thisNode).getOriginalParent(),previousNode=currentlyIterating[lastGroupedColIdx],previousNodeParent=(isColumnGroup2(previousNode)?previousNode.getProvidedColumnGroup():previousNode).getOriginalParent();thisNodeParent!==previousNodeParent&&createGroupToIndex(i)}lastGroupedColIdx<currentlyIterating.length&&createGroupToIndex(currentlyIterating.length)}return isStandaloneStructure||this.setupParentsIntoCols(topLevelResultCols,null),topLevelResultCols}createProvidedColumnGroup(primaryColumns,colGroupDef,level,existingColumns,columnKeyCreator,existingGroups,source){const groupId=columnKeyCreator.getUniqueKey(colGroupDef.groupId||null,null),colGroupDefMerged=this.createMergedColGroupDef(colGroupDef,groupId),providedGroup=new AgProvidedColumnGroup(colGroupDefMerged,groupId,!1,level);this.createBean(providedGroup);const existingGroupAndIndex=this.findExistingGroup(colGroupDef,existingGroups);existingGroupAndIndex&&existingGroups.splice(existingGroupAndIndex.idx,1);const existingGroup=existingGroupAndIndex==null?void 0:existingGroupAndIndex.group;existingGroup&&providedGroup.setExpanded(existingGroup.isExpanded());const children=_recursivelyCreateColumns(this.beans,colGroupDefMerged.children,level+1,primaryColumns,existingColumns,columnKeyCreator,existingGroups,source);return providedGroup.setChildren(children),providedGroup}balanceColumnTree(unbalancedTree,currentDepth,columnDepth,columnKeyCreator){const result=[];for(let i=0;i<unbalancedTree.length;i++){const child=unbalancedTree[i];if(isProvidedColumnGroup(child)){const originalGroup=child,newChildren=this.balanceColumnTree(originalGroup.getChildren(),currentDepth+1,columnDepth,columnKeyCreator);originalGroup.setChildren(newChildren),result.push(originalGroup)}else{let firstPaddedGroup,currentPaddedGroup;for(let j=columnDepth-1;j>=currentDepth;j--){const newColId=columnKeyCreator.getUniqueKey(null,null),colGroupDefMerged=this.createMergedColGroupDef(null,newColId),paddedGroup=new AgProvidedColumnGroup(colGroupDefMerged,newColId,!0,currentDepth);this.createBean(paddedGroup),currentPaddedGroup&&currentPaddedGroup.setChildren([paddedGroup]),currentPaddedGroup=paddedGroup,firstPaddedGroup||(firstPaddedGroup=currentPaddedGroup)}if(firstPaddedGroup&&currentPaddedGroup)if(result.push(firstPaddedGroup),unbalancedTree.some(leaf=>isProvidedColumnGroup(leaf))){currentPaddedGroup.setChildren([child]);continue}else{currentPaddedGroup.setChildren(unbalancedTree);break}result.push(child)}}return result}findDepth(balancedColumnTree){let depth=0,pointer=balancedColumnTree;for(;pointer&&pointer[0]&&isProvidedColumnGroup(pointer[0]);)depth++,pointer=pointer[0].getChildren();return depth}findMaxDepth(treeChildren,depth){let maxDeptThisLevel=depth;for(let i=0;i<treeChildren.length;i++){const abstractColumn=treeChildren[i];if(isProvidedColumnGroup(abstractColumn)){const originalGroup=abstractColumn,newDept=this.findMaxDepth(originalGroup.getChildren(),depth+1);maxDeptThisLevel<newDept&&(maxDeptThisLevel=newDept)}}return maxDeptThisLevel}balanceTreeForAutoCols(autoCols,depth){const tree=[];return autoCols.forEach(col=>{let nextChild=col;for(let i=depth-1;i>=0;i--){const autoGroup=new AgProvidedColumnGroup(null,`FAKE_PATH_${col.getId()}}_${i}`,!0,i);this.createBean(autoGroup),autoGroup.setChildren([nextChild]),nextChild.originalParent=autoGroup,nextChild=autoGroup}depth===0&&(col.originalParent=null),tree.push(nextChild)}),tree}createMergedColGroupDef(colGroupDef,groupId){const colGroupDefMerged={},{gos,validation:validation2}=this.beans;return Object.assign(colGroupDefMerged,gos.get("defaultColGroupDef")),Object.assign(colGroupDefMerged,colGroupDef),validation2==null||validation2.validateColDef(colGroupDefMerged,groupId),colGroupDefMerged}findExistingGroup(newGroupDef,existingGroups){if(newGroupDef.groupId!=null)for(let i=0;i<existingGroups.length;i++){const existingGroup=existingGroups[i];if(existingGroup.getColGroupDef()&&existingGroup.getId()===newGroupDef.groupId)return{idx:i,group:existingGroup}}}createColumnGroup(providedGroup,groupInstanceIdCreator,oldColumnsMapped,pinned,isStandaloneStructure){const groupId=providedGroup.getGroupId(),instanceId=groupInstanceIdCreator.getInstanceIdForKey(groupId),uniqueId=createUniqueColumnGroupId(groupId,instanceId);let columnGroup=oldColumnsMapped[uniqueId];return columnGroup&&columnGroup.getProvidedColumnGroup()!==providedGroup&&(columnGroup=null),_exists(columnGroup)?columnGroup.reset():(columnGroup=new AgColumnGroup(providedGroup,groupId,instanceId,pinned),isStandaloneStructure||this.createBean(columnGroup)),columnGroup}mapOldGroupsById(displayedGroups){const result={},recursive=__name(columnsOrGroups=>{columnsOrGroups.forEach(columnOrGroup=>{if(isColumnGroup2(columnOrGroup)){const columnGroup=columnOrGroup;result[columnOrGroup.getUniqueId()]=columnGroup,recursive(columnGroup.getChildren())}})},"recursive");return displayedGroups&&recursive(displayedGroups),result}setupParentsIntoCols(columnsOrGroups,parent){columnsOrGroups.forEach(columnsOrGroup=>{if(columnsOrGroup.parent=parent,isColumnGroup2(columnsOrGroup)){const columnGroup=columnsOrGroup;this.setupParentsIntoCols(columnGroup.getChildren(),columnGroup)}})}},__name(_a102,"ColumnGroupService"),_a102),ColumnGroupModule={moduleName:"ColumnGroup",version:VERSION,dynamicBeans:{headerGroupCellCtrl:HeaderGroupCellCtrl},beans:[ColumnGroupService],apiFunctions:{getAllDisplayedColumnGroups,getCenterDisplayedColumnGroups,getColumnGroup,getColumnGroupState,getDisplayNameForColumnGroup,getLeftDisplayedColumnGroups,getProvidedColumnGroup,getRightDisplayedColumnGroups,resetColumnGroupState,setColumnGroupOpened,setColumnGroupState}},CheckboxCellRendererModule={moduleName:"CheckboxCellRenderer",version:VERSION,userComponents:{agCheckboxCellRenderer:CheckboxCellRenderer}};function getColumnDef(beans,key){const column=beans.colModel.getColDefCol(key);return column?column.getColDef():null}__name(getColumnDef,"getColumnDef");function getColumnDefs(beans){return beans.colModel.getColumnDefs()}__name(getColumnDefs,"getColumnDefs");function getDisplayNameForColumn(beans,column,location){return beans.colNames.getDisplayNameForColumn(column,location)||""}__name(getDisplayNameForColumn,"getDisplayNameForColumn");function getColumn(beans,key){return beans.colModel.getColDefCol(key)}__name(getColumn,"getColumn");function getColumns(beans){return beans.colModel.getColDefCols()}__name(getColumns,"getColumns");function applyColumnState(beans,params){return _applyColumnState(beans,params,"api")}__name(applyColumnState,"applyColumnState");function getColumnState(beans){return _getColumnState(beans)}__name(getColumnState,"getColumnState");function resetColumnState(beans){_resetColumnState(beans,"api")}__name(resetColumnState,"resetColumnState");function isPinning(beans){return beans.visibleCols.isPinningLeft()||beans.visibleCols.isPinningRight()}__name(isPinning,"isPinning");function isPinningLeft(beans){return beans.visibleCols.isPinningLeft()}__name(isPinningLeft,"isPinningLeft");function isPinningRight(beans){return beans.visibleCols.isPinningRight()}__name(isPinningRight,"isPinningRight");function getDisplayedColAfter(beans,col){return beans.visibleCols.getColAfter(col)}__name(getDisplayedColAfter,"getDisplayedColAfter");function getDisplayedColBefore(beans,col){return beans.visibleCols.getColBefore(col)}__name(getDisplayedColBefore,"getDisplayedColBefore");function setColumnsVisible(beans,keys,visible){beans.colModel.setColsVisible(keys,visible,"api")}__name(setColumnsVisible,"setColumnsVisible");function setColumnsPinned(beans,keys,pinned){var _a238;(_a238=beans.pinnedCols)==null||_a238.setColsPinned(keys,pinned,"api")}__name(setColumnsPinned,"setColumnsPinned");function getAllGridColumns(beans){return beans.colModel.getCols()}__name(getAllGridColumns,"getAllGridColumns");function getDisplayedLeftColumns(beans){return beans.visibleCols.leftCols}__name(getDisplayedLeftColumns,"getDisplayedLeftColumns");function getDisplayedCenterColumns(beans){return beans.visibleCols.centerCols}__name(getDisplayedCenterColumns,"getDisplayedCenterColumns");function getDisplayedRightColumns(beans){return beans.visibleCols.rightCols}__name(getDisplayedRightColumns,"getDisplayedRightColumns");function getAllDisplayedColumns(beans){return beans.visibleCols.allCols}__name(getAllDisplayedColumns,"getAllDisplayedColumns");function getAllDisplayedVirtualColumns(beans){return beans.colViewport.getViewportColumns()}__name(getAllDisplayedVirtualColumns,"getAllDisplayedVirtualColumns");function _deepCloneDefinition(object,keysToSkip){if(!object)return;const obj=object,res={};return Object.keys(obj).forEach(key=>{if(keysToSkip&&keysToSkip.indexOf(key)>=0||SKIP_JS_BUILTINS.has(key))return;const value=obj[key];typeof value=="object"&&value!==null&&value.constructor===Object?res[key]=_deepCloneDefinition(value):res[key]=value}),res}__name(_deepCloneDefinition,"_deepCloneDefinition");var _a103,ColumnDefFactory=(_a103=class extends BeanStub{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(beans){this.rowGroupColsSvc=beans.rowGroupColsSvc,this.pivotColsSvc=beans.pivotColsSvc}getColumnDefs(colDefColsList,showingPivotResult,lastOrder,colsList){var _a238,_b2;const cols=colDefColsList.slice();showingPivotResult?cols.sort((a,b)=>lastOrder.indexOf(a)-lastOrder.indexOf(b)):lastOrder&&cols.sort((a,b)=>colsList.indexOf(a)-colsList.indexOf(b));const rowGroupColumns=(_a238=this.rowGroupColsSvc)==null?void 0:_a238.columns,pivotColumns=(_b2=this.pivotColsSvc)==null?void 0:_b2.columns;return this.buildColumnDefs(cols,rowGroupColumns,pivotColumns)}buildColumnDefs(cols,rowGroupColumns=[],pivotColumns=[]){const res=[],colGroupDefs={};return cols.forEach(col=>{const colDef=this.createDefFromColumn(col,rowGroupColumns,pivotColumns);let addToResult=!0,childDef=colDef,pointer=col.getOriginalParent(),lastPointer=null;for(;pointer;){let parentDef=null;if(pointer.isPadding()){pointer=pointer.getOriginalParent();continue}const existingParentDef=colGroupDefs[pointer.getGroupId()];if(existingParentDef){existingParentDef.children.push(childDef),addToResult=!1;break}if(parentDef=this.createDefFromGroup(pointer),parentDef&&(parentDef.children=[childDef],colGroupDefs[parentDef.groupId]=parentDef,childDef=parentDef,pointer=pointer.getOriginalParent()),pointer!=null&&lastPointer===pointer){addToResult=!1;break}lastPointer=pointer}addToResult&&res.push(childDef)}),res}createDefFromGroup(group){const defCloned=_deepCloneDefinition(group.getColGroupDef(),["children"]);return defCloned&&(defCloned.groupId=group.getGroupId()),defCloned}createDefFromColumn(col,rowGroupColumns,pivotColumns){const colDefCloned=_deepCloneDefinition(col.getColDef());return colDefCloned.colId=col.getColId(),colDefCloned.width=col.getActualWidth(),colDefCloned.rowGroup=col.isRowGroupActive(),colDefCloned.rowGroupIndex=col.isRowGroupActive()?rowGroupColumns.indexOf(col):null,colDefCloned.pivot=col.isPivotActive(),colDefCloned.pivotIndex=col.isPivotActive()?pivotColumns.indexOf(col):null,colDefCloned.aggFunc=col.isValueActive()?col.getAggFunc():null,colDefCloned.hide=col.isVisible()?void 0:!0,colDefCloned.pinned=col.isPinned()?col.getPinned():null,colDefCloned.sort=col.getSort()?col.getSort():null,colDefCloned.sortIndex=col.getSortIndex()!=null?col.getSortIndex():null,colDefCloned}},__name(_a103,"ColumnDefFactory"),_a103),_a104,ColumnFlexService=(_a104=class extends BeanStub{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(params={}){const source=params.source??"flex";params.viewportWidth!=null&&(this.flexViewportWidth=params.viewportWidth);const totalSpace=this.flexViewportWidth;if(!totalSpace)return[];const{visibleCols}=this.beans,visibleCenterCols=visibleCols.centerCols;let flexAfterDisplayIndex=-1;if(params.resizingCols){const allResizingCols=new Set(params.resizingCols);for(let i=visibleCenterCols.length-1;i>=0;i--)if(allResizingCols.has(visibleCenterCols[i])){flexAfterDisplayIndex=i;break}}let hasFlexItems=!1;const items=visibleCenterCols.map((col,i)=>{const flex=col.getFlex(),isFlex=flex!=null&&flex>0&&i>flexAfterDisplayIndex;return hasFlexItems||(hasFlexItems=isFlex),{col,isFlex,flex:Math.max(0,flex??0),initialSize:col.getActualWidth(),min:col.getMinWidth(),max:col.getMaxWidth(),targetSize:0}});if(!hasFlexItems)return[];let unfrozenItemCount=items.length,unfrozenFlex=items.reduce((acc,item)=>acc+item.flex,0),unfrozenSpace=totalSpace;const freeze=__name((item,width)=>{item.frozenSize=width,item.col.setActualWidth(width,source),unfrozenSpace-=width,unfrozenFlex-=item.flex,unfrozenItemCount-=1},"freeze"),isFrozen=__name(item=>item.frozenSize!=null,"isFrozen");for(const item of items)item.isFlex||freeze(item,item.initialSize);for(;unfrozenItemCount>0;){const spaceToFill=Math.round(unfrozenFlex<1?unfrozenSpace*unfrozenFlex:unfrozenSpace);let lastUnfrozenItem,actualLeft=0,idealRight=0;for(const item of items){if(isFrozen(item))continue;lastUnfrozenItem=item,idealRight+=spaceToFill*(item.flex/unfrozenFlex);const idealSize=idealRight-actualLeft,roundedSize=Math.round(idealSize);item.targetSize=roundedSize,actualLeft+=roundedSize}lastUnfrozenItem&&(lastUnfrozenItem.targetSize+=spaceToFill-actualLeft);let totalViolation=0;for(const item of items){if(isFrozen(item))continue;const unclampedSize=item.targetSize,clampedSize=Math.min(Math.max(unclampedSize,item.min),item.max);totalViolation+=clampedSize-unclampedSize,item.violationType=clampedSize===unclampedSize?void 0:clampedSize<unclampedSize?"max":"min",item.targetSize=clampedSize}const freezeType=totalViolation===0?"all":totalViolation>0?"min":"max";for(const item of items)isFrozen(item)||(freezeType==="all"||item.violationType===freezeType)&&freeze(item,item.targetSize)}params.skipSetLeft||visibleCols.setLeftValues(source),params.updateBodyWidths&&visibleCols.updateBodyWidths();const unconstrainedFlexColumns=items.filter(item=>item.isFlex&&!item.violationType).map(item=>item.col);if(params.fireResizedEvent){const changedColumns=items.filter(item=>item.initialSize!==item.frozenSize).map(item=>item.col),flexingColumns=items.filter(item=>item.flex).map(item=>item.col);dispatchColumnResizedEvent(this.eventSvc,changedColumns,!0,source,flexingColumns)}return unconstrainedFlexColumns}initCol(column){const{flex,initialFlex}=column.colDef;flex!==void 0?column.flex=flex:initialFlex!==void 0&&(column.flex=initialFlex)}setColFlex(column,flex){column.flex=flex??null,column.dispatchStateUpdatedEvent("flex")}},__name(_a104,"ColumnFlexService"),_a104),_a105,DataTypeService=(_a105=class extends BeanStub{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(beans){this.colModel=beans.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",event=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(event)})}processDataTypeDefinitions(){const defaultDataTypes=this.getDefaultDataTypes(),newDataTypeDefinitions={};this.dataTypeDefinitions=newDataTypeDefinitions;const newFormatValueFuncs={};this.formatValueFuncs=newFormatValueFuncs;const generateFormatValueFunc=__name(dataTypeDefinition=>params=>{const{column,node,value}=params;let valueFormatter=column.getColDef().valueFormatter;return valueFormatter===dataTypeDefinition.groupSafeValueFormatter&&(valueFormatter=dataTypeDefinition.valueFormatter),this.beans.valueSvc.formatValue(column,node,value,valueFormatter)},"generateFormatValueFunc");for(const cellDataType of Object.keys(defaultDataTypes)){const dataTypeDefinition=defaultDataTypes[cellDataType],mergedDataTypeDefinition={...dataTypeDefinition,groupSafeValueFormatter:createGroupSafeValueFormatter(dataTypeDefinition,this.gos)};newDataTypeDefinitions[cellDataType]=mergedDataTypeDefinition,newFormatValueFuncs[cellDataType]=generateFormatValueFunc(mergedDataTypeDefinition)}const dataTypeDefinitions=this.gos.get("dataTypeDefinitions")??{},newDataTypeMatchers={};this.dataTypeMatchers=newDataTypeMatchers;for(const cellDataType of Object.keys(dataTypeDefinitions)){const dataTypeDefinition=dataTypeDefinitions[cellDataType],mergedDataTypeDefinition=this.processDataTypeDefinition(dataTypeDefinition,dataTypeDefinitions,[cellDataType],defaultDataTypes);mergedDataTypeDefinition&&(newDataTypeDefinitions[cellDataType]=mergedDataTypeDefinition,dataTypeDefinition.dataTypeMatcher&&(newDataTypeMatchers[cellDataType]=dataTypeDefinition.dataTypeMatcher),newFormatValueFuncs[cellDataType]=generateFormatValueFunc(mergedDataTypeDefinition))}this.checkObjectValueHandlers(defaultDataTypes),["dateString","text","number","boolean","date"].forEach(cellDataType=>{const overriddenDataTypeMatcher=newDataTypeMatchers[cellDataType];overriddenDataTypeMatcher&&delete newDataTypeMatchers[cellDataType],newDataTypeMatchers[cellDataType]=overriddenDataTypeMatcher??defaultDataTypes[cellDataType].dataTypeMatcher})}processDataTypeDefinition(dataTypeDefinition,dataTypeDefinitions,alreadyProcessedDataTypes,defaultDataTypes){let mergedDataTypeDefinition;const extendsCellDataType=dataTypeDefinition.extendsDataType;if(dataTypeDefinition.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),dataTypeDefinition.extendsDataType===dataTypeDefinition.baseDataType){let baseDataTypeDefinition=defaultDataTypes[extendsCellDataType];const overriddenBaseDataTypeDefinition=dataTypeDefinitions[extendsCellDataType];if(baseDataTypeDefinition&&overriddenBaseDataTypeDefinition&&(baseDataTypeDefinition=overriddenBaseDataTypeDefinition),!validateDataTypeDefinition(dataTypeDefinition,baseDataTypeDefinition,extendsCellDataType))return;mergedDataTypeDefinition=mergeDataTypeDefinitions(baseDataTypeDefinition,dataTypeDefinition)}else{if(alreadyProcessedDataTypes.includes(extendsCellDataType)){_warn(44);return}const extendedDataTypeDefinition=dataTypeDefinitions[extendsCellDataType];if(!validateDataTypeDefinition(dataTypeDefinition,extendedDataTypeDefinition,extendsCellDataType))return;const mergedExtendedDataTypeDefinition=this.processDataTypeDefinition(extendedDataTypeDefinition,dataTypeDefinitions,[...alreadyProcessedDataTypes,extendsCellDataType],defaultDataTypes);if(!mergedExtendedDataTypeDefinition)return;mergedDataTypeDefinition=mergeDataTypeDefinitions(mergedExtendedDataTypeDefinition,dataTypeDefinition)}return{...mergedDataTypeDefinition,groupSafeValueFormatter:createGroupSafeValueFormatter(mergedDataTypeDefinition,this.gos)}}updateColDefAndGetColumnType(colDef,userColDef,colId){let{cellDataType}=userColDef;const{field}=userColDef;if(cellDataType===void 0&&(cellDataType=colDef.cellDataType),(cellDataType==null||cellDataType===!0)&&(cellDataType=this.canInferCellDataType(colDef,userColDef)?this.inferCellDataType(field,colId):!1),!cellDataType){colDef.cellDataType=!1;return}const dataTypeDefinition=this.dataTypeDefinitions[cellDataType];if(!dataTypeDefinition){_warn(47,{cellDataType});return}return colDef.cellDataType=cellDataType,dataTypeDefinition.groupSafeValueFormatter&&(colDef.valueFormatter=dataTypeDefinition.groupSafeValueFormatter),dataTypeDefinition.valueParser&&(colDef.valueParser=dataTypeDefinition.valueParser),dataTypeDefinition.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(colDef,cellDataType,dataTypeDefinition,colId),dataTypeDefinition.columnTypes}addColumnListeners(column){if(!this.isPendingInference)return;const columnStateUpdates=this.columnStateUpdatesPendingInference[column.getColId()];if(!columnStateUpdates)return;const columnListener=__name(event=>{columnStateUpdates.add(event.key)},"columnListener");column.__addEventListener("columnStateUpdated",columnListener),this.columnStateUpdateListenerDestroyFuncs.push(()=>column.__removeEventListener("columnStateUpdated",columnListener))}canInferCellDataType(colDef,userColDef){const{gos}=this;if(!_isClientSideRowModel(gos))return!1;const propsToCheckForInference={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(doColDefPropsPreventInference(userColDef,propsToCheckForInference))return!1;const columnTypes=userColDef.type===null?colDef.type:userColDef.type;if(columnTypes){const columnTypeDefs=gos.get("columnTypes")??{};if(convertColumnTypes(columnTypes).some(columnType=>{const columnTypeDef=columnTypeDefs[columnType.trim()];return columnTypeDef&&doColDefPropsPreventInference(columnTypeDef,propsToCheckForInference)}))return!1}return!doColDefPropsPreventInference(colDef,propsToCheckForInference)}inferCellDataType(field,colId){if(!field)return;let value;const initialData=this.getInitialData();if(initialData){const fieldContainsDots=field.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");value=_getValueUsingField(initialData,field,fieldContainsDots)}else this.initWaitForRowData(colId);if(value!=null)return Object.keys(this.dataTypeMatchers).find(_cellDataType=>this.dataTypeMatchers[_cellDataType](value))??"object"}getInitialData(){var _a238;const rowData=this.gos.get("rowData");if(rowData!=null&&rowData.length)return rowData[0];if(this.initialData)return this.initialData;{const rowNodes=(_a238=this.beans.rowModel.rootNode)==null?void 0:_a238.allLeafChildren;if(rowNodes!=null&&rowNodes.length)return rowNodes[0].data}return null}initWaitForRowData(colId){if(this.columnStateUpdatesPendingInference[colId]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const columnTypeOverridesExist=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize,eventSvc}=this.beans;columnTypeOverridesExist&&colAutosize&&(colAutosize.shouldQueueResizeOperations=!0);const[destroyFunc]=this.addManagedEventListeners({rowDataUpdateStarted:__name(event=>{const{firstRowData}=event;firstRowData&&(destroyFunc==null||destroyFunc(),this.isPendingInference=!1,this.processColumnsPendingInference(firstRowData,columnTypeOverridesExist),this.columnStateUpdatesPendingInference={},columnTypeOverridesExist&&(colAutosize==null||colAutosize.processResizeOperations()),eventSvc.dispatchEvent({type:"dataTypesInferred"}))},"rowDataUpdateStarted")})}processColumnsPendingInference(firstRowData,columnTypeOverridesExist){this.initialData=firstRowData;const state=[];this.destroyColumnStateUpdateListeners();const newRowGroupColumnStateWithoutIndex={},newPivotColumnStateWithoutIndex={};for(const colId of Object.keys(this.columnStateUpdatesPendingInference)){const columnStateUpdates=this.columnStateUpdatesPendingInference[colId],column=this.colModel.getCol(colId);if(!column)return;const oldColDef=column.getColDef();if(!this.resetColDefIntoCol(column,"cellDataTypeInferred"))return;const newColDef=column.getColDef();if(columnTypeOverridesExist&&newColDef.type&&newColDef.type!==oldColDef.type){const updatedColumnState=getUpdatedColumnState(column,columnStateUpdates);updatedColumnState.rowGroup&&updatedColumnState.rowGroupIndex==null&&(newRowGroupColumnStateWithoutIndex[colId]=updatedColumnState),updatedColumnState.pivot&&updatedColumnState.pivotIndex==null&&(newPivotColumnStateWithoutIndex[colId]=updatedColumnState),state.push(updatedColumnState)}}columnTypeOverridesExist&&state.push(...this.generateColumnStateForRowGroupAndPivotIndexes(newRowGroupColumnStateWithoutIndex,newPivotColumnStateWithoutIndex)),state.length&&_applyColumnState(this.beans,{state},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(updatedRowGroupColumnState,updatedPivotColumnState){const existingColumnStateUpdates={},{rowGroupColsSvc,pivotColsSvc}=this.beans;return rowGroupColsSvc==null||rowGroupColsSvc.restoreColumnOrder(existingColumnStateUpdates,updatedRowGroupColumnState),pivotColsSvc==null||pivotColsSvc.restoreColumnOrder(existingColumnStateUpdates,updatedPivotColumnState),Object.values(existingColumnStateUpdates)}resetColDefIntoCol(column,source){const userColDef=column.getUserProvidedColDef();if(!userColDef)return!1;const newColDef=_addColumnDefaultAndTypes(this.beans,userColDef,column.getColId());return column.setColDef(newColDef,userColDef,source),!0}checkObjectValueHandlers(defaultDataTypes){const resolvedObjectDataTypeDefinition=this.dataTypeDefinitions.object,defaultObjectDataTypeDefinition=defaultDataTypes.object;this.hasObjectValueParser=resolvedObjectDataTypeDefinition.valueParser!==defaultObjectDataTypeDefinition.valueParser,this.hasObjectValueFormatter=resolvedObjectDataTypeDefinition.valueFormatter!==defaultObjectDataTypeDefinition.valueFormatter}getDateStringTypeDefinition(column){const{dateString}=this.dataTypeDefinitions;return column?this.getDataTypeDefinition(column)??dateString:dateString}getDateParserFunction(column){return this.getDateStringTypeDefinition(column).dateParser}getDateFormatterFunction(column){return this.getDateStringTypeDefinition(column).dateFormatter}getDataTypeDefinition(column){const colDef=column.getColDef();if(colDef.cellDataType)return this.dataTypeDefinitions[colDef.cellDataType]}getBaseDataType(column){var _a238;return(_a238=this.getDataTypeDefinition(column))==null?void 0:_a238.baseDataType}checkType(column,value){var _a238;if(value==null)return!0;const dataTypeMatcher=(_a238=this.getDataTypeDefinition(column))==null?void 0:_a238.dataTypeMatcher;return dataTypeMatcher?dataTypeMatcher(value):!0}validateColDef(colDef){const warning=__name(property=>_warn(48,{property}),"warning");if(colDef.cellDataType==="object"){const{object}=this.dataTypeDefinitions;colDef.valueFormatter===object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&warning("Formatter"),colDef.editable&&colDef.valueParser===object.valueParser&&!this.hasObjectValueParser&&warning("Parser")}}getFormatValue(cellDataType){return this.formatValueFuncs[cellDataType]}isColPendingInference(colId){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[colId]}setColDefPropertiesForBaseDataType(colDef,cellDataType,dataTypeDefinition,colId){var _a238;const formatValue=this.formatValueFuncs[cellDataType];switch(dataTypeDefinition.baseDataType){case"number":{colDef.cellEditor="agNumberCellEditor";break}case"boolean":{colDef.cellEditor="agCheckboxCellEditor",colDef.cellRenderer="agCheckboxCellRenderer",colDef.getFindText=()=>null,colDef.suppressKeyboardEvent=params=>!!params.colDef.editable&&params.event.key===KeyCode.SPACE;break}case"date":{colDef.cellEditor="agDateCellEditor",colDef.keyCreator=formatValue;break}case"dateString":{colDef.cellEditor="agDateStringCellEditor",colDef.keyCreator=formatValue;break}case"object":{colDef.cellEditorParams={useFormatter:!0},colDef.comparator=(a,b)=>{const column=this.colModel.getColDefCol(colId),colDef2=column==null?void 0:column.getColDef();if(!column||!colDef2)return 0;const valA=a==null?"":formatValue({column,node:null,value:a}),valB=b==null?"":formatValue({column,node:null,value:b});return valA===valB?0:valA>valB?1:-1},colDef.keyCreator=formatValue;break}}(_a238=this.beans.filterManager)==null||_a238.setColDefPropertiesForDataType(colDef,dataTypeDefinition,formatValue)}getDefaultDataTypes(){const defaultDateFormatMatcher=__name(value=>!!value.match("^\\d{4}-\\d{2}-\\d{2}$"),"defaultDateFormatMatcher"),translate=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:__name(params=>{var _a238,_b2;return((_b2=(_a238=params.newValue)==null?void 0:_a238.trim)==null?void 0:_b2.call(_a238))===""?null:Number(params.newValue)},"valueParser"),valueFormatter:__name(params=>params.value==null?"":typeof params.value!="number"||isNaN(params.value)?translate("invalidNumber","Invalid Number"):String(params.value),"valueFormatter"),dataTypeMatcher:__name(value=>typeof value=="number","dataTypeMatcher")},text:{baseDataType:"text",valueParser:__name(params=>params.newValue===""?null:_toStringOrNull(params.newValue),"valueParser"),dataTypeMatcher:__name(value=>typeof value=="string","dataTypeMatcher")},boolean:{baseDataType:"boolean",valueParser:__name(params=>{var _a238,_b2;return params.newValue==null?params.newValue:((_b2=(_a238=params.newValue)==null?void 0:_a238.trim)==null?void 0:_b2.call(_a238))===""?null:String(params.newValue).toLowerCase()==="true"},"valueParser"),valueFormatter:__name(params=>params.value==null?"":String(params.value),"valueFormatter"),dataTypeMatcher:__name(value=>typeof value=="boolean","dataTypeMatcher")},date:{baseDataType:"date",valueParser:__name(params=>_parseDateTimeFromString(params.newValue==null?null:String(params.newValue)),"valueParser"),valueFormatter:__name(params=>params.value==null?"":!(params.value instanceof Date)||isNaN(params.value.getTime())?translate("invalidDate","Invalid Date"):_serialiseDate(params.value,!1)??"","valueFormatter"),dataTypeMatcher:__name(value=>value instanceof Date,"dataTypeMatcher")},dateString:{baseDataType:"dateString",dateParser:__name(value=>_parseDateTimeFromString(value)??void 0,"dateParser"),dateFormatter:__name(value=>_serialiseDate(value??null,!1)??void 0,"dateFormatter"),valueParser:__name(params=>defaultDateFormatMatcher(String(params.newValue))?params.newValue:null,"valueParser"),valueFormatter:__name(params=>defaultDateFormatMatcher(String(params.value))?params.value:"","valueFormatter"),dataTypeMatcher:__name(value=>typeof value=="string"&&defaultDateFormatMatcher(value),"dataTypeMatcher")},object:{baseDataType:"object",valueParser:__name(()=>null,"valueParser"),valueFormatter:__name(params=>_toStringOrNull(params.value)??"","valueFormatter")}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(destroyFunc=>destroyFunc()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},__name(_a105,"DataTypeService"),_a105);function mergeDataTypeDefinitions(parentDataTypeDefinition,childDataTypeDefinition){const mergedDataTypeDefinition={...parentDataTypeDefinition,...childDataTypeDefinition};return parentDataTypeDefinition.columnTypes&&childDataTypeDefinition.columnTypes&&childDataTypeDefinition.appendColumnTypes&&(mergedDataTypeDefinition.columnTypes=[...convertColumnTypes(parentDataTypeDefinition.columnTypes),...convertColumnTypes(childDataTypeDefinition.columnTypes)]),mergedDataTypeDefinition}__name(mergeDataTypeDefinitions,"mergeDataTypeDefinitions");function validateDataTypeDefinition(dataTypeDefinition,parentDataTypeDefinition,parentCellDataType){return parentDataTypeDefinition?parentDataTypeDefinition.baseDataType!==dataTypeDefinition.baseDataType?(_warn(46),!1):!0:(_warn(45,{parentCellDataType}),!1)}__name(validateDataTypeDefinition,"validateDataTypeDefinition");function createGroupSafeValueFormatter(dataTypeDefinition,gos){if(dataTypeDefinition.valueFormatter)return params=>{var _a238,_b2;if((_a238=params.node)!=null&&_a238.group){const aggFunc=(params.colDef.pivotValueColumn??params.column).getAggFunc();if(aggFunc){if(aggFunc==="first"||aggFunc==="last")return dataTypeDefinition.valueFormatter(params);if(dataTypeDefinition.baseDataType==="number"&&aggFunc!=="count"){if(typeof params.value=="number")return dataTypeDefinition.valueFormatter(params);if(typeof params.value=="object"){if(!params.value)return;if("toNumber"in params.value)return dataTypeDefinition.valueFormatter({...params,value:params.value.toNumber()});if("value"in params.value)return dataTypeDefinition.valueFormatter({...params,value:params.value.value})}}return}if(gos.get("groupDisplayType")==="groupRows"&&!gos.get("treeData"))return}else if(gos.get("groupHideOpenParents")&&params.column.isRowGroupActive()&&typeof params.value=="string"&&!((_b2=dataTypeDefinition.dataTypeMatcher)!=null&&_b2.call(dataTypeDefinition,params.value)))return;return dataTypeDefinition.valueFormatter(params)}}__name(createGroupSafeValueFormatter,"createGroupSafeValueFormatter");function doesColDefPropPreventInference(colDef,checkProps,prop,comparisonValue){if(!checkProps[prop])return!1;const value=colDef[prop];return value===null?(checkProps[prop]=!1,!1):comparisonValue===void 0?!!value:value===comparisonValue}__name(doesColDefPropPreventInference,"doesColDefPropPreventInference");function doColDefPropsPreventInference(colDef,propsToCheckForInference){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([prop,comparisonValue])=>doesColDefPropPreventInference(colDef,propsToCheckForInference,prop,comparisonValue))}__name(doColDefPropsPreventInference,"doColDefPropsPreventInference");function getUpdatedColumnState(column,columnStateUpdates){const columnState=getColumnStateFromColDef(column);return columnStateUpdates.forEach(key=>{delete columnState[key],key==="rowGroup"?delete columnState.rowGroupIndex:key==="pivot"&&delete columnState.pivotIndex}),columnState}__name(getUpdatedColumnState,"getUpdatedColumnState");var DataTypeModule={moduleName:"DataType",version:VERSION,beans:[DataTypeService],dependsOn:[CheckboxCellRendererModule]},ColumnFlexModule={moduleName:"ColumnFlex",version:VERSION,beans:[ColumnFlexService]},ColumnApiModule={moduleName:"ColumnApi",version:VERSION,beans:[ColumnDefFactory],apiFunctions:{getColumnDef,getDisplayNameForColumn,getColumn,getColumns,applyColumnState,getColumnState,resetColumnState,isPinning,isPinningLeft,isPinningRight,getDisplayedColAfter,getDisplayedColBefore,setColumnsVisible,setColumnsPinned,getAllGridColumns,getDisplayedLeftColumns,getDisplayedCenterColumns,getDisplayedRightColumns,getAllDisplayedColumns,getAllDisplayedVirtualColumns,getColumnDefs}};function _camelCaseToHumanText(camelCase){if(!camelCase||camelCase==null)return null;const rex=/([a-z])([A-Z])/g,rexCaps=/([A-Z]+)([A-Z])([a-z])/g;return camelCase.replace(rex,"$1 $2").replace(rexCaps,"$1 $2$3").replace(/\./g," ").split(" ").map(word=>word.substring(0,1).toUpperCase()+(word.length>1?word.substring(1,word.length):"")).join(" ")}__name(_camelCaseToHumanText,"_camelCaseToHumanText");var _a106,ColumnNameService=(_a106=class extends BeanStub{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(column,location,includeAggFunc=!1){if(!column)return null;const headerName=this.getHeaderName(column.getColDef(),column,null,null,location),{aggColNameSvc}=this.beans;return includeAggFunc&&aggColNameSvc?aggColNameSvc.getHeaderName(column,headerName):headerName}getDisplayNameForProvidedColumnGroup(columnGroup,providedColumnGroup,location){const colGroupDef=providedColumnGroup==null?void 0:providedColumnGroup.getColGroupDef();return colGroupDef?this.getHeaderName(colGroupDef,null,columnGroup,providedColumnGroup,location):null}getDisplayNameForColumnGroup(columnGroup,location){return this.getDisplayNameForProvidedColumnGroup(columnGroup,columnGroup.getProvidedColumnGroup(),location)}getHeaderName(colDef,column,columnGroup,providedColumnGroup,location){var _a238;const headerValueGetter=colDef.headerValueGetter;if(headerValueGetter){const params=_addGridCommonParams(this.gos,{colDef,column,columnGroup,providedColumnGroup,location});return typeof headerValueGetter=="function"?headerValueGetter(params):typeof headerValueGetter=="string"?((_a238=this.beans.expressionSvc)==null?void 0:_a238.evaluate(headerValueGetter,params))??null:""}else{if(colDef.headerName!=null)return colDef.headerName;if(colDef.field)return _camelCaseToHumanText(colDef.field)}return""}},__name(_a106,"ColumnNameService"),_a106),_a107,ColumnViewportService=(_a107=class extends BeanStub{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(beans){this.visibleCols=beans.visibleCols,this.colModel=beans.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(scrollWidth,scrollPosition,afterScroll=!1){const{visibleCols}=this,bodyWidthDirty=visibleCols.isBodyWidthDirty;if(!(scrollWidth===this.scrollWidth&&scrollPosition===this.scrollPosition&&!bodyWidthDirty)){if(this.scrollWidth=scrollWidth,this.scrollPosition=scrollPosition,visibleCols.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const bodyWidth=visibleCols.bodyWidth;this.viewportLeft=bodyWidth-scrollPosition-scrollWidth,this.viewportRight=bodyWidth-scrollPosition}else this.viewportLeft=scrollPosition,this.viewportRight=scrollWidth+scrollPosition;this.colModel.ready&&this.checkViewportColumns(afterScroll)}}getHeadersToRender(type,dept){let result;switch(type){case"left":result=this.rowsOfHeadersToRenderLeft[dept];break;case"right":result=this.rowsOfHeadersToRenderRight[dept];break;default:result=this.rowsOfHeadersToRenderCenter[dept];break}return result||[]}extractViewportColumns(){const displayedColumnsCenter=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=displayedColumnsCenter,this.headerColsWithinViewport=displayedColumnsCenter):(this.colsWithinViewport=displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(suppressHashClear){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},suppressHashClear||(this.colsWithinViewportHash="")}isColumnInHeaderViewport(col){return col.isAutoHeaderHeight()||isAnyParentAutoHeaderHeight(col)?!0:this.isColumnInRowViewport(col)}isColumnInRowViewport(col){if(col.isAutoHeight())return!0;const columnLeft=col.getLeft()||0,columnRight=columnLeft+col.getActualWidth(),leftBounds=this.viewportLeft-200,rightBounds=this.viewportRight+200,columnToMuchLeft=columnLeft<leftBounds&&columnRight<leftBounds,columnToMuchRight=columnLeft>rightBounds&&columnRight>rightBounds;return!columnToMuchLeft&&!columnToMuchRight}getViewportColumns(){const{leftCols,rightCols}=this.visibleCols;return this.colsWithinViewport.concat(leftCols).concat(rightCols)}getColsWithinViewport(rowNode){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const emptySpaceBeforeColumn=__name(col=>{const left=col.getLeft();return _exists(left)&&left>this.viewportLeft},"emptySpaceBeforeColumn"),inViewportCallback=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols}=this,displayedColumnsCenter=visibleCols.centerCols;return visibleCols.getColsForRow(rowNode,displayedColumnsCenter,inViewportCallback,emptySpaceBeforeColumn)}checkViewportColumns(afterScroll=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll})}calculateHeaderRows(){this.clear(!0);const renderedColIds={},{leftCols,rightCols,treeLeft,treeRight,treeCenter}=this.visibleCols;this.headerColsWithinViewport.concat(leftCols).concat(rightCols).forEach(col=>renderedColIds[col.getId()]=!0);const testGroup=__name((children,result,dept)=>{let returnValue=!1;for(let i=0;i<children.length;i++){const child=children[i];let addThisItem=!1;if(isColumn(child))addThisItem=renderedColIds[child.getId()]===!0;else{const displayedChildren=child.getDisplayedChildren();displayedChildren&&(addThisItem=testGroup(displayedChildren,result,dept+1))}addThisItem&&(returnValue=!0,result[dept]||(result[dept]=[]),result[dept].push(child))}return returnValue},"testGroup");testGroup(treeLeft,this.rowsOfHeadersToRenderLeft,0),testGroup(treeRight,this.rowsOfHeadersToRenderRight,0),testGroup(treeCenter,this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const hashColumn=__name(c=>`${c.getId()}-${c.getPinned()||"normal"}`,"hashColumn");this.extractViewportColumns();const newHash=this.getViewportColumns().map(hashColumn).join("#"),changed=this.colsWithinViewportHash!==newHash;return changed&&(this.colsWithinViewportHash=newHash,this.calculateHeaderRows()),changed}},__name(_a107,"ColumnViewportService"),_a107);function isAnyParentAutoHeaderHeight(col){for(;col;){if(col.isAutoHeaderHeight())return!0;col=col.getParent()}return!1}__name(isAnyParentAutoHeaderHeight,"isAnyParentAutoHeaderHeight");var _a108,AgComponentUtils=(_a108=class extends BeanStub{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(type,jsCompFunc){if(!type.cellRenderer)return null;const _Adapter=class _Adapter{refresh(){return!1}getGui(){return this.eGui}init(params){const callbackResult=jsCompFunc(params),type2=typeof callbackResult;if(type2==="string"||type2==="number"||type2==="boolean"){this.eGui=_loadTemplate("<span>"+callbackResult+"</span>");return}if(callbackResult==null){this.eGui=_createElement({tag:"span"});return}this.eGui=callbackResult}};__name(_Adapter,"Adapter");let Adapter=_Adapter;return Adapter}},__name(_a108,"AgComponentUtils"),_a108),CellRendererFunctionModule={moduleName:"CellRendererFunction",version:VERSION,beans:[AgComponentUtils]},_a109,Registry=(_a109=class extends BeanStub{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultParams={},this.jsComps={},this.dynamicBeans={},this.selectors={},this.icons={}}postConstruct(){const comps=this.gos.get("components");if(comps!=null)for(const key of Object.keys(comps))this.jsComps[key]=comps[key]}registerModule(module){const{icons,userComponents,dynamicBeans,selectors}=module;if(userComponents){const registerUserComponent=__name((name,component,params)=>{this.agGridDefaults[name]=component,params&&(this.agGridDefaultParams[name]=params)},"registerUserComponent");for(const name of Object.keys(userComponents)){const comp=userComponents[name];typeof comp=="object"?registerUserComponent(name,comp.classImp,comp.params):registerUserComponent(name,comp)}}if(dynamicBeans)for(const name of Object.keys(dynamicBeans))this.dynamicBeans[name]=dynamicBeans[name];if(selectors==null||selectors.forEach(selector=>{this.selectors[selector.selector]=selector}),icons)for(const name of Object.keys(icons))this.icons[name]=icons[name]}getUserComponent(propertyName,name){var _a238;const createResult=__name((component,componentFromFramework,params)=>({componentFromFramework,component,params}),"createResult"),{frameworkOverrides}=this.beans,registeredViaFrameworkComp=frameworkOverrides.frameworkComponent(name,this.gos.get("components"));if(registeredViaFrameworkComp!=null)return createResult(registeredViaFrameworkComp,!0);const jsComponent=this.jsComps[name];if(jsComponent){const isFwkComp=frameworkOverrides.isFrameworkComponent(jsComponent);return createResult(jsComponent,isFwkComp)}const defaultComponent=this.agGridDefaults[name];return defaultComponent?createResult(defaultComponent,!1,this.agGridDefaultParams[name]):((_a238=this.beans.validation)==null||_a238.missingUserComponent(propertyName,name,this.agGridDefaults,this.jsComps),null)}createDynamicBean(name,mandatory,...args){const BeanClass=this.dynamicBeans[name];if(BeanClass==null){if(mandatory)throw new Error(_errMsg(256));return}return new BeanClass(...args)}getSelector(name){return this.selectors[name]}getIcon(name){return this.icons[name]}},__name(_a109,"Registry"),_a109),NUM_CTRLS=23,_a110,CtrlsService=(_a110=class extends BeanStub{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var _a238,_b2;this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(c=>c(this.params)),this.readyCallbacks.length=0)},((_b2=(_a238=this.beans.frameworkOverrides).runWhenReadyAsync)==null?void 0:_b2.call(_a238))??!1)}updateReady(){const values=Object.values(this.params);this.ready=values.length===NUM_CTRLS&&values.every(ctrl=>(ctrl==null?void 0:ctrl.isAlive())??!1)}whenReady(caller,callback){this.ready?callback(this.params):this.readyCallbacks.push(callback),caller.addDestroyFunc(()=>{const index=this.readyCallbacks.indexOf(callback);index>=0&&this.readyCallbacks.splice(index,1)})}register(ctrlType,ctrl){this.params[ctrlType]=ctrl,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),ctrl.addDestroyFunc(()=>{this.updateReady()})}get(ctrlType){return this.params[ctrlType]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader,centerHeader,rightHeader}=this.params;return[leftHeader,rightHeader,centerHeader]}getHeaderRowContainerCtrl(pinned){const params=this.params;switch(pinned){case"left":return params.leftHeader;case"right":return params.rightHeader;default:return params.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},__name(_a110,"CtrlsService"),_a110),coreCSS=':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom,.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}.ag-floating-bottom{border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{opacity:1}50%{opacity:.4}to{opacity:1}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-accent-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',_a111,_b,IS_SSR=typeof window!="object"||!((_b=(_a111=window==null?void 0:window.document)==null?void 0:_a111.fonts)!=null&&_b.forEach),injectionsByContainer=new WeakMap,_injectGlobalCSS=__name((css,styleContainer,debugId,layer,priority,nonce)=>{if(IS_SSR)return;layer&&(css=`@layer ${CSS.escape(layer)} { ${css} }`);let injections=injectionsByContainer.get(styleContainer);if(injections||(injections=[],injectionsByContainer.set(styleContainer,injections)),injections.find(i=>i.css===css))return;const el=document.createElement("style");nonce&&el.setAttribute("nonce",nonce),el.dataset.agGlobalCss=debugId,el.textContent=css;const newInjection={css,el,priority};let insertAfter;for(const injection of injections){if(injection.priority>priority)break;insertAfter=injection}if(insertAfter){insertAfter.el.insertAdjacentElement("afterend",el);const index=injections.indexOf(insertAfter);injections.splice(index+1,0,newInjection)}else styleContainer.insertBefore(el,styleContainer.querySelector(":not(title, meta)")),injections.push(newInjection)},"_injectGlobalCSS"),_injectCoreAndModuleCSS=__name((styleContainer,layer,nonce)=>{_injectGlobalCSS(coreCSS,styleContainer,"core",layer,0,nonce),Array.from(_getAllRegisteredModules()).sort((a,b)=>a.moduleName.localeCompare(b.moduleName)).forEach(module=>{var _a238;return(_a238=module.css)==null?void 0:_a238.forEach(css=>_injectGlobalCSS(css,styleContainer,`module-${module.moduleName}`,layer,0,nonce))})},"_injectCoreAndModuleCSS"),gridsUsingThemingAPI=new Set,_registerGridUsingThemingAPI=__name(environment=>{gridsUsingThemingAPI.add(environment)},"_registerGridUsingThemingAPI"),_unregisterGridUsingThemingAPI=__name(environment=>{if(gridsUsingThemingAPI.delete(environment),gridsUsingThemingAPI.size===0){injectionsByContainer=new WeakMap;for(const style of document.head.querySelectorAll("style[data-ag-global-css]"))style.remove()}},"_unregisterGridUsingThemingAPI"),createPart=__name(args=>new PartImpl(args),"createPart"),defaultModeName="$default",partCounter=0,_a112,PartImpl=(_a112=class{constructor({feature,params,modeParams={},css,cssImports}){this.feature=feature,this.css=css,this.cssImports=cssImports,this.modeParams={[defaultModeName]:{...modeParams[defaultModeName]??{},...params??{}},...modeParams}}use(styleContainer,layer,nonce){let inject=this._inject;if(inject==null){let{css}=this;if(css){const className=`ag-theme-${this.feature??"part"}-${++partCounter}`;typeof css=="function"&&(css=css()),css=`:where(.${className}) {
${css}
}
`;for(const cssImport of this.cssImports??[])css=`@import url(${JSON.stringify(cssImport)});
${css}`;inject={css,class:className}}else inject=!1;this._inject=inject}return inject&&styleContainer&&_injectGlobalCSS(inject.css,styleContainer,inject.class,layer,1,nonce),inject?inject.class:!1}},__name(_a112,"PartImpl"),_a112),kebabCase=__name(str=>str.replace(/[A-Z]/g,m=>`-${m}`).toLowerCase(),"kebabCase"),paramToVariableName=__name(paramName=>`--ag-${kebabCase(paramName)}`,"paramToVariableName"),paramToVariableExpression=__name(paramName=>`var(${paramToVariableName(paramName)})`,"paramToVariableExpression"),clamp=__name((value,min,max)=>Math.max(min,Math.min(max,value)),"clamp"),memoize=__name(fn=>{const values=new Map;return a=>{const key=a;return values.has(key)||values.set(key,fn(a)),values.get(key)}},"memoize"),accentMix=__name(mix=>({ref:"accentColor",mix}),"accentMix"),foregroundMix=__name(mix=>({ref:"foregroundColor",mix}),"foregroundMix"),foregroundBackgroundMix=__name(mix=>({ref:"foregroundColor",mix,onto:"backgroundColor"}),"foregroundBackgroundMix"),foregroundHeaderBackgroundMix=__name(mix=>({ref:"foregroundColor",mix,onto:"headerBackgroundColor"}),"foregroundHeaderBackgroundMix"),backgroundColor={ref:"backgroundColor"},foregroundColor={ref:"foregroundColor"},accentColor={ref:"accentColor"},defaultLightColorSchemeParams={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:foregroundMix(.15),chromeBackgroundColor:foregroundBackgroundMix(.02),browserColorScheme:"light"},coreDefaults={...defaultLightColorSchemeParams,textColor:foregroundColor,accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:backgroundColor,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:accentColor,rangeSelectionBackgroundColor:accentMix(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:accentMix(.5),rangeHeaderHighlightColor:foregroundHeaderBackgroundMix(.08),rowNumbersSelectedColor:accentMix(.5),rowHoverColor:accentMix(.08),columnHoverColor:accentMix(.05),selectedRowBackgroundColor:accentMix(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:backgroundColor,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:backgroundColor,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:foregroundMix(.7),focusShadow:{spread:3,color:accentMix(.5)},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},iconSize:16,iconColor:"inherit",iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:foregroundMix(.1),iconButtonActiveColor:accentColor,iconButtonActiveBackgroundColor:accentMix(.28),iconButtonActiveIndicatorColor:accentColor,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:accentColor,toggleButtonOffBackgroundColor:foregroundBackgroundMix(.3),toggleButtonSwitchBackgroundColor:backgroundColor,toggleButtonSwitchInset:2,menuBorder:{color:foregroundMix(.2)},menuBackgroundColor:foregroundBackgroundMix(.03),menuTextColor:foregroundBackgroundMix(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:foregroundMix(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:accentColor},cellEditingShadow:{ref:"cardShadow"},dialogBorder:{color:foregroundMix(.2)},panelBackgroundColor:backgroundColor,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipTextColor:{ref:"textColor"},tooltipBorder:!0,columnDropCellBackgroundColor:foregroundMix(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:foregroundMix(.13)},selectCellBackgroundColor:foregroundMix(.07),selectCellBorder:{color:foregroundMix(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",findMatchColor:foregroundColor,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:foregroundColor,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:foregroundMix(.15),statusBarLabelColor:foregroundColor,statusBarLabelFontWeight:500,statusBarValueColor:foregroundColor,statusBarValueFontWeight:500},buttonStyleBaseCSS=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",baseParams={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},makeButtonStyleQuartzTreeShakeable=__name(()=>createPart({feature:"buttonStyle",params:{...baseParams,buttonBackgroundColor:backgroundColor,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:accentColor}},css:buttonStyleBaseCSS}),"makeButtonStyleQuartzTreeShakeable"),buttonStyleQuartz=makeButtonStyleQuartzTreeShakeable(),columnDropStyleBorderedCSS=".ag-column-drop-vertical-empty-message{align-items:center;border:1px dashed;border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",makeColumnDropStyleBorderedTreeShakeable=__name(()=>createPart({feature:"columnDropStyle",css:columnDropStyleBorderedCSS}),"makeColumnDropStyleBorderedTreeShakeable"),columnDropStyleBordered=makeColumnDropStyleBorderedTreeShakeable(),paramTypes=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],getParamType=memoize(param=>(param=param.toLowerCase(),paramTypes.find(type=>param.endsWith(type.toLowerCase()))??"length")),literalToCSS=__name(value=>typeof value=="object"&&(value!=null&&value.ref)?paramToVariableExpression(value.ref):typeof value=="string"?value:typeof value=="number"?String(value):!1,"literalToCSS"),colorValueToCss=__name(value=>{if(typeof value=="string")return value;if(value&&"ref"in value){const colorExpr=paramToVariableExpression(value.ref);return value.mix==null?colorExpr:`color-mix(in srgb, ${value.onto?paramToVariableExpression(value.onto):"transparent"}, ${colorExpr} ${clamp(value.mix*100,0,100)}%)`}return!1},"colorValueToCss"),colorSchemeValueToCss=literalToCSS,lengthValueToCss=__name(value=>typeof value=="string"?value:typeof value=="number"?`${value}px`:value&&"calc"in value?`calc(${value.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,p=>p[0]==="-"?p:` ${paramToVariableExpression(p)} `)})`:value&&"ref"in value?paramToVariableExpression(value.ref):!1,"lengthValueToCss"),scaleValueToCss=literalToCSS,borderValueToCss=__name((value,param)=>typeof value=="string"?value:value===!0?"solid 1px var(--ag-border-color)":value===!1?param==="columnBorder"?"solid 1px transparent":"none":value&&"ref"in value?paramToVariableExpression(value.ref):borderStyleValueToCss(value.style??"solid")+" "+lengthValueToCss(value.width??1)+" "+colorValueToCss(value.color??{ref:"borderColor"}),"borderValueToCss"),shadowValueToCss=__name(value=>typeof value=="string"?value:value===!1?"none":value&&"ref"in value?paramToVariableExpression(value.ref):[lengthValueToCss(value.offsetX??0),lengthValueToCss(value.offsetY??0),lengthValueToCss(value.radius??0),lengthValueToCss(value.spread??0),colorValueToCss(value.color??{ref:"foregroundColor"})].join(" "),"shadowValueToCss"),borderStyleValueToCss=literalToCSS,fontFamilyValueToCss=__name(value=>typeof value=="string"?value.includes(",")?value:quoteUnsafeChars(value):value&&"googleFont"in value?fontFamilyValueToCss(value.googleFont):value&&"ref"in value?paramToVariableExpression(value.ref):Array.isArray(value)?value.map(font=>(typeof font=="object"&&"googleFont"in font&&(font=font.googleFont),quoteUnsafeChars(font))).join(", "):!1,"fontFamilyValueToCss"),quoteUnsafeChars=__name(font=>/^[\w-]+$|\w\(/.test(font)?font:JSON.stringify(font),"quoteUnsafeChars"),fontWeightValueToCss=literalToCSS,imageValueToCss=__name(value=>typeof value=="string"?value:value&&"url"in value?`url(${JSON.stringify(value.url)})`:value&&"svg"in value?imageValueToCss({url:`data:image/svg+xml,${encodeURIComponent(value.svg)}`}):value&&"ref"in value?paramToVariableExpression(value.ref):!1,"imageValueToCss"),durationValueToCss=__name((value,param)=>typeof value=="string"?value:typeof value=="number"?(value>=10&&_error(104,{value,param}),`${value}s`):value&&"ref"in value?paramToVariableExpression(value.ref):!1,"durationValueToCss"),paramValidators={color:colorValueToCss,colorScheme:colorSchemeValueToCss,length:lengthValueToCss,scale:scaleValueToCss,border:borderValueToCss,borderStyle:borderStyleValueToCss,shadow:shadowValueToCss,image:imageValueToCss,fontFamily:fontFamilyValueToCss,fontWeight:fontWeightValueToCss,duration:durationValueToCss},paramValueToCss=__name((param,value)=>{const type=getParamType(param);return paramValidators[type](value,param)},"paramValueToCss"),createTheme=__name(()=>new ThemeImpl().withPart(buttonStyleQuartz).withPart(columnDropStyleBordered),"createTheme"),_a113,ThemeImpl=(_a113=class{constructor(parts=[]){this.parts=parts}withPart(part){return typeof part=="function"&&(part=part()),part instanceof PartImpl?new _a113([...this.parts,part]):(_logPreInitErr(259,{part},"Invalid part"),this)}withoutPart(feature){return this.withPart(createPart({feature}))}withParams(params,mode=defaultModeName){return this.withPart(createPart({modeParams:{[mode]:params}}))}_startUse({styleContainer,cssLayer,nonce,loadThemeGoogleFonts}){if(IS_SSR)return;uninstallLegacyCSS(),_injectCoreAndModuleCSS(styleContainer,cssLayer,nonce);const googleFontsUsed=getGoogleFontsUsed(this);if(googleFontsUsed.length>0)for(const googleFont of googleFontsUsed)loadThemeGoogleFonts&&loadGoogleFont(googleFont,nonce);for(const part of this.parts)part.use(styleContainer,cssLayer,nonce)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=deduplicatePartsByFeature(this.parts).map(part=>part.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let paramsCache=this._paramsCache;if(!paramsCache){const mergedModeParams={[defaultModeName]:{...coreDefaults}};for(const part of deduplicatePartsByFeature(this.parts))for(const partMode of Object.keys(part.modeParams)){const partParams=part.modeParams[partMode];if(partParams){const mergedParams=mergedModeParams[partMode]??(mergedModeParams[partMode]={}),partParamNames=new Set;for(const partParamName of Object.keys(partParams)){const partParamValue=partParams[partParamName];partParamValue!==void 0&&(mergedParams[partParamName]=partParamValue,partParamNames.add(partParamName))}if(partMode===defaultModeName)for(const mergedMode of Object.keys(mergedModeParams)){const mergedParams2=mergedModeParams[mergedMode];if(mergedMode!==defaultModeName)for(const partParamName of partParamNames)delete mergedParams2[partParamName]}}}this._paramsCache=paramsCache=mergedModeParams}return paramsCache}_getPerGridCss(className){const selectorPlaceholder="##SELECTOR##";let innerParamsCss=this._paramsCssCache;if(!innerParamsCss){let variablesCss="",inheritanceCss="";const modeParams=this._getModeParams();for(const mode of Object.keys(modeParams)){const params=modeParams[mode];if(mode!==defaultModeName){const wrapPrefix=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(mode):mode}"]) & {
`;variablesCss+=wrapPrefix,inheritanceCss+=wrapPrefix}for(const key of Object.keys(params).sort()){const value=params[key],cssValue=paramValueToCss(key,value);if(cssValue===!1)_error(107,{key,value});else{const cssName=paramToVariableName(key),inheritedName=cssName.replace("--ag-","--ag-inherited-");variablesCss+=`	${cssName}: var(${inheritedName}, ${cssValue});
`,inheritanceCss+=`	${inheritedName}: var(${cssName});
`}}mode!==defaultModeName&&(variablesCss+=`}
`,inheritanceCss+=`}
`)}let css=`${selectorPlaceholder} {
${variablesCss}}
`;css+=`:has(> ${selectorPlaceholder}):not(${selectorPlaceholder}) {
${inheritanceCss}}
`,this._paramsCssCache=innerParamsCss=css}return innerParamsCss.replaceAll(selectorPlaceholder,`:where(.${className})`)}},__name(_a113,"_ThemeImpl"),_a113),deduplicatePartsByFeature=__name(parts=>{const lastPartByFeature=new Map;for(const part of parts)lastPartByFeature.set(part.feature,part);const result=[];for(const part of parts)(!part.feature||lastPartByFeature.get(part.feature)===part)&&result.push(part);return result},"deduplicatePartsByFeature"),getGoogleFontsUsed=__name(theme=>{const googleFontsUsed=new Set,visitParamValue=__name(paramValue=>{if(Array.isArray(paramValue))paramValue.forEach(visitParamValue);else{const googleFont=paramValue==null?void 0:paramValue.googleFont;typeof googleFont=="string"&&googleFontsUsed.add(googleFont)}},"visitParamValue");return Object.values(theme._getModeParams()).flatMap(mv=>Object.values(mv)).forEach(visitParamValue),Array.from(googleFontsUsed).sort()},"getGoogleFontsUsed"),uninstalledLegacyCSS=!1,uninstallLegacyCSS=__name(()=>{if(!uninstalledLegacyCSS){uninstalledLegacyCSS=!0;for(const style of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))style.remove()}},"uninstallLegacyCSS"),googleFontsLoaded=new Set,loadGoogleFont=__name(async(font,nonce)=>{googleFontsLoaded.add(font);const css=`@import url('https://${googleFontsDomain}/css2?family=${encodeURIComponent(font)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;_injectGlobalCSS(css,document.head,`googleFont:${font}`,void 0,0,nonce)},"loadGoogleFont"),googleFontsDomain="fonts.googleapis.com",checkboxStyleDefaultCSS='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',makeCheckboxStyleDefaultTreeShakeable=__name(()=>createPart({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:backgroundColor,checkboxUncheckedBorderColor:foregroundBackgroundMix(.3),checkboxCheckedBackgroundColor:accentColor,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:backgroundColor,checkboxIndeterminateBackgroundColor:foregroundBackgroundMix(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:backgroundColor,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:checkboxStyleDefaultCSS}),"makeCheckboxStyleDefaultTreeShakeable"),checkboxStyleDefault=makeCheckboxStyleDefaultTreeShakeable(),darkParams=__name(()=>({...defaultLightColorSchemeParams,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:foregroundBackgroundMix(.05),rowHoverColor:accentMix(.15),selectedRowBackgroundColor:accentMix(.2),menuBackgroundColor:foregroundBackgroundMix(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",findMatchColor:backgroundColor,findActiveMatchColor:backgroundColor,checkboxUncheckedBorderColor:foregroundBackgroundMix(.4),toggleButtonOffBackgroundColor:foregroundBackgroundMix(.4)}),"darkParams"),darkBlueParams=__name(()=>({...darkParams(),backgroundColor:"#1f2836"}),"darkBlueParams"),makeColorSchemeVariableTreeShakeable=__name(()=>createPart({feature:"colorScheme",params:defaultLightColorSchemeParams,modeParams:{light:defaultLightColorSchemeParams,dark:darkParams(),"dark-blue":darkBlueParams()}}),"makeColorSchemeVariableTreeShakeable"),colorSchemeVariable=makeColorSchemeVariableTreeShakeable(),iconNameToSvgFragment={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},iconNameToFullSvg={"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>'},getQuartzIconsCss=__name((args={})=>{let result="";for(const iconName of[...Object.keys(iconNameToSvgFragment),...Object.keys(iconNameToFullSvg)]){const iconSvg=quartzIconSvg(iconName,args.strokeWidth);result+=`.ag-icon-${iconName}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(iconSvg)}'); }
`}return result},"getQuartzIconsCss"),quartzIconSvg=__name((name,strokeWidth=1.5)=>{const fullSVG=iconNameToFullSvg[name];if(fullSVG)return fullSVG;const svgFragment=iconNameToSvgFragment[name];if(!svgFragment)throw new Error(`Missing icon data for ${name}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${strokeWidth}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+svgFragment+"</svg>"},"quartzIconSvg"),iconSetQuartz=__name((args={})=>createPart({feature:"iconSet",css:__name(()=>getQuartzIconsCss(args),"css")}),"iconSetQuartz"),iconSetQuartzRegular=iconSetQuartz(),inputStyleBaseCSS=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}:where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) :where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',inputStyleBorderedCSS=":where(input.ag-input-field-input:not([type]),input.ag-input-field-input[type=text],input.ag-input-field-input[type=number],input.ag-input-field-input[type=tel],input.ag-input-field-input[type=date],input.ag-input-field-input[type=datetime-local],textarea.ag-input-field-input){&:focus{box-shadow:var(--ag-focus-shadow)}}",baseParams2={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"}},makeInputStyleBorderedTreeShakeable=__name(()=>createPart({feature:"inputStyle",params:{...baseParams2,inputBackgroundColor:backgroundColor,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:accentColor},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:foregroundBackgroundMix(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:__name(()=>inputStyleBaseCSS+inputStyleBorderedCSS,"css")}),"makeInputStyleBorderedTreeShakeable"),inputStyleBordered=makeInputStyleBorderedTreeShakeable(),tabStyleBaseCSS='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:1px solid var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:1px solid var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',baseParams3={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:1,tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},makeTabStyleQuartzTreeShakeable=__name(()=>createPart({feature:"tabStyle",params:{...baseParams3,tabBarBorder:!0,tabBarBackgroundColor:foregroundMix(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:backgroundColor},css:tabStyleBaseCSS}),"makeTabStyleQuartzTreeShakeable"),tabStyleQuartz=makeTabStyleQuartzTreeShakeable(),makeThemeQuartzTreeShakeable=__name(()=>createTheme().withPart(checkboxStyleDefault).withPart(colorSchemeVariable).withPart(iconSetQuartzRegular).withPart(tabStyleQuartz).withPart(inputStyleBordered).withPart(columnDropStyleBordered).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),"makeThemeQuartzTreeShakeable"),themeQuartz=makeThemeQuartzTreeShakeable(),CELL_HORIZONTAL_PADDING={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},INDENTATION_LEVEL={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},ROW_GROUP_INDENT_SIZE={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},ROW_HEIGHT={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},HEADER_HEIGHT={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},LIST_ITEM_HEIGHT={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},ROW_BORDER_WIDTH={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},paramsId=0,_a114,Environment=(_a114=class extends BeanStub{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++paramsId}`,this.globalCSS=[]}wireBeans(beans){const{eGridDiv,gridOptions}=beans;this.eGridDiv=eGridDiv,this.eStyleContainer=gridOptions.themeStyleContainer??(eGridDiv.getRootNode()===document?document.head:eGridDiv),this.cssLayer=gridOptions.themeCssLayer,this.styleNonce=gridOptions.styleNonce}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(ROW_HEIGHT),this.getSizeEl(HEADER_HEIGHT),this.getSizeEl(LIST_ITEM_HEIGHT),this.getSizeEl(ROW_BORDER_WIDTH),this.refreshRowBorderWidthVariable(),this.addDestroyFunc(()=>_unregisterGridUsingThemingAPI(this)),this.mutationObserver=new MutationObserver(()=>{this.fireGridStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}getDefaultRowHeight(){return this.getCSSVariablePixelValue(ROW_HEIGHT)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(HEADER_HEIGHT)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(CELL_HORIZONTAL_PADDING)}getDefaultIndentation(){return this.getCSSVariablePixelValue(INDENTATION_LEVEL)}getDefaultRowGroupIndentSize(){return this.getCSSVariablePixelValue(ROW_GROUP_INDENT_SIZE)}getCellPaddingLeft(){const cellHorizontalPadding=this.getDefaultCellHorizontalPadding(),indentationLevel=this.getDefaultIndentation(),rowGroupIndentSize=this.getDefaultRowGroupIndentSize();return cellHorizontalPadding-1+rowGroupIndentSize*indentationLevel}getCellPaddingRight(){return this.getDefaultCellHorizontalPadding()-1}getCellPadding(){return this.getCellPaddingLeft()+this.getCellPaddingRight()}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(LIST_ITEM_HEIGHT)}getRowBorderWidth(){return this.getCSSVariablePixelValue(ROW_BORDER_WIDTH)}applyThemeClasses(el){const{gridTheme}=this;let themeClass="";if(gridTheme)themeClass=`${this.paramsClass} ${gridTheme._getCssClass()}`;else{this.mutationObserver.disconnect();let node=this.eGridDiv;for(;node;){let isThemeEl=!1;for(const className of Array.from(node.classList))className.startsWith("ag-theme-")&&(isThemeEl=!0,themeClass=themeClass?`${themeClass} ${className}`:className);isThemeEl&&this.mutationObserver.observe(node,{attributes:!0,attributeFilter:["class"]}),node=node.parentElement}}for(const className of Array.from(el.classList))className.startsWith("ag-theme-")&&el.classList.remove(className);if(themeClass){const oldClass=el.className;el.className=oldClass+(oldClass?" ":"")+themeClass}}refreshRowHeightVariable(){const{eGridDiv}=this,oldRowHeight=eGridDiv.style.getPropertyValue("--ag-line-height").trim(),height=this.gos.get("rowHeight");if(height==null||isNaN(height)||!isFinite(height))return oldRowHeight!==null&&eGridDiv.style.setProperty("--ag-line-height",null),-1;const newRowHeight=`${height}px`;return oldRowHeight!=newRowHeight?(eGridDiv.style.setProperty("--ag-line-height",newRowHeight),height):oldRowHeight!=""?parseFloat(oldRowHeight):-1}addGlobalCSS(css,debugId){this.gridTheme?_injectGlobalCSS(css,this.eStyleContainer,debugId,this.cssLayer,0,this.styleNonce):this.globalCSS.push([css,debugId])}getCSSVariablePixelValue(variable){const cached=this.lastKnownValues.get(variable);if(cached!=null)return cached;const measurement=this.measureSizeEl(variable);return measurement==="detached"||measurement==="no-styles"?(variable.cacheDefault&&this.lastKnownValues.set(variable,variable.defaultValue),variable.defaultValue):(this.lastKnownValues.set(variable,measurement),measurement)}measureSizeEl(variable){const sizeEl=this.getSizeEl(variable);if(sizeEl.offsetParent==null)return"detached";const newSize=sizeEl.offsetWidth;return newSize===NO_VALUE_SENTINEL?"no-styles":(this.sizesMeasured=!0,newSize)}getMeasurementContainer(){let container=this.eMeasurementContainer;return container||(container=this.eMeasurementContainer=_createElement({tag:"div",cls:"ag-measurement-container"}),this.eGridDiv.appendChild(container)),container}getSizeEl(variable){let sizeEl=this.sizeEls.get(variable);if(sizeEl)return sizeEl;const container=this.getMeasurementContainer();sizeEl=_createElement({tag:"div"});const{border,noWarn}=variable;border?(sizeEl.className="ag-measurement-element-border",sizeEl.style.setProperty("--ag-internal-measurement-border",`var(${variable.cssName}, solid ${NO_VALUE_SENTINEL}px)`)):sizeEl.style.width=`var(${variable.cssName}, ${NO_VALUE_SENTINEL}px)`,container.appendChild(sizeEl),this.sizeEls.set(variable,sizeEl);let lastMeasurement=this.measureSizeEl(variable);lastMeasurement==="no-styles"&&!noWarn&&_warn(9,{variable});const unsubscribe=_observeResize(this.beans,sizeEl,()=>{const newMeasurement=this.measureSizeEl(variable);newMeasurement==="detached"||newMeasurement==="no-styles"||(this.lastKnownValues.set(variable,newMeasurement),newMeasurement!==lastMeasurement&&(lastMeasurement=newMeasurement,this.fireGridStylesChangedEvent(variable.changeKey)))});return this.addDestroyFunc(()=>unsubscribe()),sizeEl}fireGridStylesChangedEvent(change){change==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[change]:!0})}refreshRowBorderWidthVariable(){const width=this.getCSSVariablePixelValue(ROW_BORDER_WIDTH);this.eGridDiv.style.setProperty("--ag-internal-row-border-width",`${width}px`)}handleThemeGridOptionChange(){const{gos,eGridDiv,globalCSS,gridTheme:oldGridTheme}=this,themeGridOption=gos.get("theme");let newGridTheme;if(themeGridOption==="legacy")newGridTheme=void 0;else{const themeOrDefault=themeGridOption??themeQuartz;themeOrDefault instanceof ThemeImpl?newGridTheme=themeOrDefault:_error(240,{theme:themeOrDefault})}if(newGridTheme!==oldGridTheme){if(newGridTheme){_registerGridUsingThemingAPI(this),_injectCoreAndModuleCSS(this.eStyleContainer,this.cssLayer,this.styleNonce);for(const[css,debugId]of globalCSS)_injectGlobalCSS(css,this.eStyleContainer,debugId,this.cssLayer,0,this.styleNonce);globalCSS.length=0}this.gridTheme=newGridTheme,newGridTheme==null||newGridTheme._startUse({loadThemeGoogleFonts:gos.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce});let eParamsStyle=this.eParamsStyle;if(!eParamsStyle){eParamsStyle=this.eParamsStyle=_createElement({tag:"style"});const styleNonce=this.gos.get("styleNonce");styleNonce&&eParamsStyle.setAttribute("nonce",styleNonce),eGridDiv.appendChild(eParamsStyle)}IS_SSR||(eParamsStyle.textContent=(newGridTheme==null?void 0:newGridTheme._getPerGridCss(this.paramsClass))||""),this.applyThemeClasses(eGridDiv),this.fireGridStylesChangedEvent("themeChanged")}newGridTheme&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&_error(themeGridOption?106:239)}},__name(_a114,"Environment"),_a114),NO_VALUE_SENTINEL=15538,_a115,EventService=(_a115=class extends BeanStub{constructor(){super(...arguments),this.beanName="eventSvc",this.globalEventService=new LocalEventService}postConstruct(){const{globalListener,globalSyncListener}=this.beans;globalListener&&this.addGlobalListener(globalListener,!0),globalSyncListener&&this.addGlobalListener(globalSyncListener,!1)}addEventListener(eventType,listener,async){this.globalEventService.addEventListener(eventType,listener,async)}removeEventListener(eventType,listener,async){this.globalEventService.removeEventListener(eventType,listener,async)}addGlobalListener(listener,async=!1){this.globalEventService.addGlobalListener(listener,async)}removeGlobalListener(listener,async=!1){this.globalEventService.removeGlobalListener(listener,async)}dispatchLocalEvent(){}dispatchEvent(event){this.globalEventService.dispatchEvent(_addGridCommonParams(this.gos,event))}dispatchEventOnce(event){this.globalEventService.dispatchEventOnce(_addGridCommonParams(this.gos,event))}},__name(_a115,"EventService"),_a115);function isAnyChildSpanningHeaderHeight(columnGroup){return columnGroup?columnGroup.getLeafColumns().some(col=>col.isSpanHeaderHeight()):!1}__name(isAnyChildSpanningHeaderHeight,"isAnyChildSpanningHeaderHeight");function getHeaderIndexToFocus(column,currentIndex){let nextColumn;if(isColumnGroup2(column)&&isAnyChildSpanningHeaderHeight(column)&&column.isPadding()){const targetColumn=column;nextColumn=targetColumn.getLeafColumns()[0];let col=nextColumn;for(;col!==targetColumn;)currentIndex++,col=col.getParent()}return{column:nextColumn||column,headerRowIndex:currentIndex}}__name(getHeaderIndexToFocus,"getHeaderIndexToFocus");var _a116,HeaderNavigationService=(_a116=class extends BeanStub{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const beans=this.beans;beans.ctrlsSvc.whenReady(this,p=>{this.gridBodyCon=p.gridBodyCtrl});const eDocument=_getDocument(beans);this.addManagedElementListeners(eDocument,{mousedown:__name(()=>{this.currentHeaderRowWithoutSpan=-1},"mousedown")})}getHeaderPositionForColumn(colKey,floatingFilter){let column;const{colModel,colGroupSvc,ctrlsSvc}=this.beans;if(typeof colKey=="string"?(column=colModel.getCol(colKey),column||(column=(colGroupSvc==null?void 0:colGroupSvc.getColumnGroup(colKey))??null)):column=colKey,!column)return null;const centerHeaderContainer=ctrlsSvc.getHeaderRowContainerCtrl(),allCtrls=centerHeaderContainer==null?void 0:centerHeaderContainer.getAllCtrls(),isFloatingFilterVisible=_last(allCtrls||[]).type==="filter",headerRowCount=getFocusHeaderRowCount(this.beans)-1;let row=-1,col=column;for(;col;)row++,col=col.getParent();let headerRowIndex=row;return floatingFilter&&isFloatingFilterVisible&&headerRowIndex===headerRowCount-1&&headerRowIndex++,headerRowIndex===-1?null:{headerRowIndex,column}}navigateVertically(direction,fromHeader,event){const focusSvc=this.beans.focusSvc;if(fromHeader||(fromHeader=focusSvc.focusedHeader),!fromHeader)return!1;const{headerRowIndex}=fromHeader,column=fromHeader.column,rowLen=getFocusHeaderRowCount(this.beans),isUp=direction==="UP",currentRowType=this.getHeaderRowType(headerRowIndex);let{headerRowIndex:nextRow,column:nextFocusColumn,headerRowIndexWithoutSpan}=isUp?getColumnVisibleParent(currentRowType,column,headerRowIndex):getColumnVisibleChild(currentRowType,column,headerRowIndex),skipColumn=!1;return nextRow<0&&(nextRow=0,nextFocusColumn=column,skipColumn=!0),nextRow>=rowLen?(nextRow=-1,this.currentHeaderRowWithoutSpan=-1):headerRowIndexWithoutSpan!==void 0&&(this.currentHeaderRowWithoutSpan=headerRowIndexWithoutSpan),!skipColumn&&!nextFocusColumn?!1:focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:nextRow,column:nextFocusColumn},allowUserOverride:!0,event})}navigateHorizontally(direction,fromTab=!1,event){const{focusSvc,gos}=this.beans,focusedHeader=focusSvc.focusedHeader;let nextHeader,normalisedDirection;this.currentHeaderRowWithoutSpan!==-1?focusedHeader.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=focusedHeader.headerRowIndex,direction==="LEFT"!==gos.get("enableRtl")?(normalisedDirection="Before",nextHeader=this.findHeader(focusedHeader,normalisedDirection)):(normalisedDirection="After",nextHeader=this.findHeader(focusedHeader,normalisedDirection));const userFunc=gos.getCallback("tabToNextHeader");if(fromTab&&userFunc){const wasFocusedFromUserFunc=focusSvc.focusHeaderPositionFromUserFunc({userFunc,headerPosition:nextHeader,direction:normalisedDirection});if(wasFocusedFromUserFunc){const{headerRowIndex}=focusSvc.focusedHeader||{};headerRowIndex!=null&&headerRowIndex!=focusedHeader.headerRowIndex&&(this.currentHeaderRowWithoutSpan=headerRowIndex)}return wasFocusedFromUserFunc}return nextHeader||!fromTab?focusSvc.focusHeaderPosition({headerPosition:nextHeader,direction:normalisedDirection,fromTab,allowUserOverride:!0,event}):this.focusNextHeaderRow(focusedHeader,normalisedDirection,event)}focusNextHeaderRow(focusedHeader,direction,event){const currentIndex=focusedHeader.headerRowIndex;let nextPosition=null,nextRowIndex;const beans=this.beans;if(direction==="Before"?currentIndex>0&&(nextRowIndex=currentIndex-1,this.currentHeaderRowWithoutSpan-=1,nextPosition=this.findColAtEdgeForHeaderRow(nextRowIndex,"end")):(nextRowIndex=currentIndex+1,this.currentHeaderRowWithoutSpan<getFocusHeaderRowCount(beans)?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1,nextPosition=this.findColAtEdgeForHeaderRow(nextRowIndex,"start")),!nextPosition)return!1;const{column,headerRowIndex}=getHeaderIndexToFocus(nextPosition.column,nextPosition==null?void 0:nextPosition.headerRowIndex);return beans.focusSvc.focusHeaderPosition({headerPosition:{column,headerRowIndex},direction,fromTab:!0,allowUserOverride:!0,event})}scrollToColumn(column,direction="After"){if(column.getPinned())return;let columnToScrollTo;if(isColumnGroup2(column)){const columns=column.getDisplayedLeafColumns();columnToScrollTo=direction==="Before"?_last(columns):columns[0]}else columnToScrollTo=column;this.gridBodyCon.scrollFeature.ensureColumnVisible(columnToScrollTo)}findHeader(focusedHeader,direction){let nextColumn,getColMethod;const{colGroupSvc,visibleCols}=this.beans;if(isColumnGroup2(focusedHeader.column)?nextColumn=(colGroupSvc==null?void 0:colGroupSvc.getGroupAtDirection(focusedHeader.column,direction))??void 0:(getColMethod=`getCol${direction}`,nextColumn=visibleCols[getColMethod](focusedHeader.column)),!nextColumn)return;const{headerRowIndex}=focusedHeader;if(this.getHeaderRowType(headerRowIndex)!=="filter"){const columnsInPath=[nextColumn];for(;nextColumn.getParent();)nextColumn=nextColumn.getParent(),columnsInPath.push(nextColumn);nextColumn=columnsInPath[Math.max(0,columnsInPath.length-1-headerRowIndex)]}const{column,headerRowIndex:indexToFocus}=getHeaderIndexToFocus(nextColumn,headerRowIndex);return{column,headerRowIndex:indexToFocus}}getHeaderRowType(rowIndex){const centerHeaderContainer=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(centerHeaderContainer)return centerHeaderContainer.getRowType(rowIndex)}findColAtEdgeForHeaderRow(level,position){const{visibleCols,ctrlsSvc,colGroupSvc}=this.beans,displayedColumns=visibleCols.allCols,column=displayedColumns[position==="start"?0:displayedColumns.length-1];if(!column)return;const childContainer=ctrlsSvc.getHeaderRowContainerCtrl(column.getPinned()),type=childContainer==null?void 0:childContainer.getRowType(level);if(type=="group"){const columnGroup=colGroupSvc==null?void 0:colGroupSvc.getColGroupAtLevel(column,level);return{headerRowIndex:level,column:columnGroup}}return{headerRowIndex:type==null?-1:level,column}}},__name(_a116,"HeaderNavigationService"),_a116);function getColumnVisibleParent(currentRowType,currentColumn,currentIndex){const isFloatingFilter=currentRowType==="filter",isColumn2=currentRowType==="column";let nextFocusColumn=isFloatingFilter?currentColumn:currentColumn.getParent(),nextRow=currentIndex-1,headerRowIndexWithoutSpan=nextRow;if(isColumn2&&isAnyChildSpanningHeaderHeight(currentColumn.getParent())){for(;nextFocusColumn&&nextFocusColumn.isPadding();)nextFocusColumn=nextFocusColumn.getParent(),nextRow--;headerRowIndexWithoutSpan=nextRow,nextRow<0&&(nextFocusColumn=currentColumn,nextRow=currentIndex,headerRowIndexWithoutSpan=void 0)}return{column:nextFocusColumn,headerRowIndex:nextRow,headerRowIndexWithoutSpan}}__name(getColumnVisibleParent,"getColumnVisibleParent");function getColumnVisibleChild(currentRowType,column,currentIndex,direction="After"){let nextFocusColumn=column,nextRow=currentIndex+1;const headerRowIndexWithoutSpan=nextRow;if(currentRowType==="group"){const leafColumns=column.getDisplayedLeafColumns(),leafColumn=direction==="After"?leafColumns[0]:_last(leafColumns),columnsInTheWay=[];let currentColumn=leafColumn;for(;currentColumn.getParent()!==column;)currentColumn=currentColumn.getParent(),columnsInTheWay.push(currentColumn);if(nextFocusColumn=leafColumn,leafColumn.isSpanHeaderHeight())for(let i=columnsInTheWay.length-1;i>=0;i--){const colToFocus=columnsInTheWay[i];if(!colToFocus.isPadding()){nextFocusColumn=colToFocus;break}nextRow++}else nextFocusColumn=_last(columnsInTheWay),nextFocusColumn||(nextFocusColumn=leafColumn)}return{column:nextFocusColumn,headerRowIndex:nextRow,headerRowIndexWithoutSpan}}__name(getColumnVisibleChild,"getColumnVisibleChild");var _a117,FocusService=(_a117=class extends BeanStub{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(beans){this.colModel=beans.colModel,this.visibleCols=beans.visibleCols,this.rowRenderer=beans.rowRenderer,this.navigation=beans.navigation,this.filterManager=beans.filterManager,this.overlays=beans.overlays}postConstruct(){const clearFocusedCellListener=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:clearFocusedCellListener,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:clearFocusedCellListener,columnRowGroupChanged:clearFocusedCellListener}),this.addDestroyFunc(_registerKeyboardFocusEvents(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const col=this.focusedCell.column,colFromColumnModel=this.colModel.getCol(col.getId());col!==colFromColumnModel&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos,focusedCell}=this;return gos.get("suppressFocusAfterRefresh")||gos.get("suppressCellFocus")||!focusedCell||!this.doesRowOrCellHaveBrowserFocus()?null:focusedCell}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(_getActiveDomElement(this.beans),DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const activeElement=_getActiveDomElement(this.beans);return this.isDomDataPresentInHierarchy(activeElement,DOM_DATA_KEY_CELL_CTRL)?!0:this.isDomDataPresentInHierarchy(activeElement,DOM_DATA_KEY_ROW_CTRL)}isDomDataPresentInHierarchy(eBrowserCell,key){let ePointer=eBrowserCell;for(;ePointer;){if(_getDomData(this.gos,ePointer,key))return!0;ePointer=ePointer.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(focusedCellPosition){const{rowIndex,rowPinned,column}=focusedCellPosition,params={rowIndex,rowPinned,column,isFullWidthCell:!1},rowCtrl=this.rowRenderer.getRowByPosition({rowIndex,rowPinned});return rowCtrl&&(params.isFullWidthCell=rowCtrl.isFullWidth()),params}clearFocusedCell(){if(this.focusedCell==null)return;const focusEventParams=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...focusEventParams})}setFocusedCell(params){this.setFocusRecovered();const{column,rowIndex,rowPinned,forceBrowserFocus=!1,preventScrollOnBrowserFocus=!1}=params,gridColumn=this.colModel.getCol(column);if(!gridColumn){this.focusedCell=null;return}this.focusedCell={rowIndex,rowPinned:_makeNull(rowPinned),column:gridColumn},this.eventSvc.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCell),forceBrowserFocus,preventScrollOnBrowserFocus})}isCellFocused(cellPosition){return this.focusedCell==null?!1:_areCellsEqual(cellPosition,this.focusedCell)}isHeaderWrapperFocused(headerCtrl){if(this.focusedHeader==null)return!1;const{column,rowCtrl:{rowIndex:headerRowIndex,pinned}}=headerCtrl,{column:focusedColumn,headerRowIndex:focusedHeaderRowIndex}=this.focusedHeader;return column===focusedColumn&&headerRowIndex===focusedHeaderRowIndex&&pinned==focusedColumn.getPinned()}focusHeaderPosition(params){var _a238;if(this.setFocusRecovered(),_isHeaderFocusSuppressed(this.beans))return!1;const{direction,fromTab,allowUserOverride,event,fromCell,rowWithoutSpanValue}=params;let{headerPosition}=params;if(fromCell&&((_a238=this.filterManager)!=null&&_a238.isAdvFilterHeaderActive()))return this.focusAdvancedFilter(headerPosition);if(allowUserOverride){const currentPosition=this.focusedHeader,headerRowCount=getFocusHeaderRowCount(this.beans);if(fromTab){const userFunc=this.gos.getCallback("tabToNextHeader");userFunc&&(headerPosition=this.getHeaderPositionFromUserFunc({userFunc,direction,currentPosition,headerPosition,headerRowCount}))}else{const userFunc=this.gos.getCallback("navigateToNextHeader");if(userFunc&&event){const params2={key:event.key,previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount,event};headerPosition=userFunc(params2)}}}return headerPosition?this.focusProvidedHeaderPosition({headerPosition,direction,event,fromCell,rowWithoutSpanValue}):!1}focusHeaderPositionFromUserFunc(params){if(_isHeaderFocusSuppressed(this.beans))return!1;const{userFunc,headerPosition,direction,event}=params,currentPosition=this.focusedHeader,headerRowCount=getFocusHeaderRowCount(this.beans),newHeaderPosition=this.getHeaderPositionFromUserFunc({userFunc,direction,currentPosition,headerPosition,headerRowCount});return!!newHeaderPosition&&this.focusProvidedHeaderPosition({headerPosition:newHeaderPosition,direction,event})}getHeaderPositionFromUserFunc(params){const{userFunc,direction,currentPosition,headerPosition,headerRowCount}=params,userResult=userFunc({backwards:direction==="Before",previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount});return userResult===!0?currentPosition:userResult===!1?null:userResult}focusProvidedHeaderPosition(params){const{headerPosition,direction,fromCell,rowWithoutSpanValue,event}=params,{column,headerRowIndex}=headerPosition,{filterManager,ctrlsSvc,headerNavigation}=this.beans;if(headerRowIndex===-1)return filterManager!=null&&filterManager.isAdvFilterHeaderActive()?this.focusAdvancedFilter(headerPosition):this.focusGridView({column,event});headerNavigation==null||headerNavigation.scrollToColumn(column,direction);const headerRowContainerCtrl=ctrlsSvc.getHeaderRowContainerCtrl(column.getPinned()),focusSuccess=(headerRowContainerCtrl==null?void 0:headerRowContainerCtrl.focusHeader(headerPosition.headerRowIndex,column,event))||!1;return headerNavigation&&focusSuccess&&(rowWithoutSpanValue!=null||fromCell)&&(headerNavigation.currentHeaderRowWithoutSpan=rowWithoutSpanValue??-1),focusSuccess}focusFirstHeader(){var _a238;if((_a238=this.overlays)!=null&&_a238.isExclusive()&&this.focusOverlay())return!0;let firstColumn=this.visibleCols.allCols[0];if(!firstColumn)return!1;const{colGroupSvc}=this.beans;colGroupSvc&&firstColumn.getParent()&&(firstColumn=colGroupSvc.getColGroupAtLevel(firstColumn,0));const headerPosition=getHeaderIndexToFocus(firstColumn,0);return this.focusHeaderPosition({headerPosition,rowWithoutSpanValue:0})}focusLastHeader(event){var _a238;if((_a238=this.overlays)!=null&&_a238.isExclusive()&&this.focusOverlay(!0))return!0;const headerRowIndex=getFocusHeaderRowCount(this.beans)-1,column=_last(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex,column},rowWithoutSpanValue:-1,event})}focusPreviousFromFirstCell(event){var _a238;return(_a238=this.filterManager)!=null&&_a238.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(event)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(rowIndex,rowPinnedType){return this.focusedCell==null?!1:this.focusedCell.rowIndex===rowIndex&&this.focusedCell.rowPinned===_makeNull(rowPinnedType)}focusOverlay(backwards){var _a238,_b2;const overlayGui=((_a238=this.overlays)==null?void 0:_a238.isVisible())&&((_b2=this.overlays.eWrapper)==null?void 0:_b2.getGui());return!!overlayGui&&_focusInto(overlayGui,backwards)}focusGridView(params){var _a238,_b2,_c,_d,_e,_f;const{backwards=!1,canFocusOverlay=!0,event}=params;if((_a238=this.overlays)!=null&&_a238.isExclusive())return canFocusOverlay&&this.focusOverlay(backwards);if(_isCellFocusSuppressed(this.beans))return backwards&&!_isHeaderFocusSuppressed(this.beans)?this.focusLastHeader():canFocusOverlay&&this.focusOverlay(backwards)?!0:backwards?!1:_focusNextGridCoreContainer(this.beans,backwards);const nextRow=backwards?_getLastRow(this.beans):_getFirstRow(this.beans);if(nextRow){const column=params.column??((_b2=this.focusedHeader)==null?void 0:_b2.column),{rowIndex,rowPinned}=nextRow,rowNode=_getRowNode(this.beans,nextRow);if(!column||!rowNode||rowIndex==null)return!1;if(column.isSuppressNavigable(rowNode)){const isRtl=this.gos.get("enableRtl");let key;return!event||event.key===KeyCode.TAB?key=isRtl?KeyCode.LEFT:KeyCode.RIGHT:key=event.key,(_c=this.beans.navigation)==null||_c.navigateToNextCell(null,key,{rowIndex,column,rowPinned:rowPinned||null},!0),!0}if((_d=this.navigation)==null||_d.ensureCellVisible({rowIndex,column,rowPinned}),backwards){const rowCtrl=this.rowRenderer.getRowByPosition(nextRow);if(rowCtrl!=null&&rowCtrl.isFullWidth()&&((_e=this.navigation)!=null&&_e.tryToFocusFullWidthRow(nextRow,backwards)))return!0}return this.setFocusedCell({rowIndex,column,rowPinned:_makeNull(rowPinned),forceBrowserFocus:!0}),(_f=this.beans.rangeSvc)==null||_f.setRangeToCell({rowIndex,rowPinned,column}),!0}return!!(canFocusOverlay&&this.focusOverlay(backwards)||backwards&&this.focusLastHeader())}focusAdvancedFilter(position){var _a238;return this.advFilterFocusColumn=position==null?void 0:position.column,((_a238=this.beans.advancedFilter)==null?void 0:_a238.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(backwards,forceFirstColumn){var _a238;const column=(forceFirstColumn?void 0:this.advFilterFocusColumn)??((_a238=this.visibleCols.allCols)==null?void 0:_a238[0]);return backwards?this.focusHeaderPosition({headerPosition:{column,headerRowIndex:getFocusHeaderRowCount(this.beans)-1}}):this.focusGridView({column})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},__name(_a117,"FocusService"),_a117),_a118,ScrollVisibleService=(_a118=class extends BeanStub{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(beans){this.ctrlsSvc=beans.ctrlsSvc,this.colAnimation=beans.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation}=this;colAnimation!=null&&colAnimation.isActive()?colAnimation.executeLaterVMTurn(()=>{colAnimation.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var _a238;const centerRowCtrl=this.ctrlsSvc.get("center");if(!centerRowCtrl||(_a238=this.colAnimation)!=null&&_a238.isActive())return;const params={horizontalScrollShowing:centerRowCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(params),this.updateScrollGap()}updateScrollGap(){const centerRowCtrl=this.ctrlsSvc.get("center"),horizontalGap=centerRowCtrl.hasHorizontalScrollGap(),verticalGap=centerRowCtrl.hasVerticalScrollGap();(this.horizontalScrollGap!==horizontalGap||this.verticalScrollGap!==verticalGap)&&(this.horizontalScrollGap=horizontalGap,this.verticalScrollGap=verticalGap,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(params){(this.horizontalScrollShowing!==params.horizontalScrollShowing||this.verticalScrollShowing!==params.verticalScrollShowing)&&(this.horizontalScrollShowing=params.horizontalScrollShowing,this.verticalScrollShowing=params.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const gridOptionsScrollbarWidth=this.gos.get("scrollbarWidth"),scrollbarWidth=typeof gridOptionsScrollbarWidth=="number"&&gridOptionsScrollbarWidth>=0?gridOptionsScrollbarWidth:_getScrollbarWidth();scrollbarWidth!=null&&(this.scrollbarWidth=scrollbarWidth,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},__name(_a118,"ScrollVisibleService"),_a118),_a119,GridDestroyService=(_a119=class extends BeanStub{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var _a238;if(this.destroyCalled)return;const{stateSvc,ctrlsSvc,context}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:(stateSvc==null?void 0:stateSvc.getState())??{}}),this.destroyCalled=!0,(_a238=ctrlsSvc.get("gridCtrl"))==null||_a238.destroyGridUi(),context.destroy(),super.destroy()}},__name(_a119,"GridDestroyService"),_a119),ALWAYS_SYNC_GLOBAL_EVENTS=new Set(["gridPreDestroyed","fillStart","pasteStart"]),GRID_OPTION_DEFAULTS={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1},changeSetId=0,gridInstanceSequence=0,_a120,GridOptionsService=(_a120=class extends BeanStub{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=gridInstanceSequence++,this.propEventSvc=new LocalEventService,this.globalEventHandlerFactory=restrictToSyncOnly=>(eventName,event)=>{if(!this.isAlive())return;const alwaysSync=ALWAYS_SYNC_GLOBAL_EVENTS.has(eventName);if(alwaysSync&&!restrictToSyncOnly||!alwaysSync&&restrictToSyncOnly)return;const eventHandlerName=_getCallbackForEvent(eventName),eventHandler=this.gridOptions[eventHandlerName];typeof eventHandler=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{eventHandler(event)})}}wireBeans(beans){this.gridOptions=beans.gridOptions,this.validation=beans.validation,this.api=beans.gridApi,this.gridId=beans.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:__name(({options})=>{this.updateGridOptions({options,force:!0,source:"gridOptionsUpdated"})},"gridOptionsChanged")})}get(property){return this.gridOptions[property]??GRID_OPTION_DEFAULTS[property]}getCallback(property){return this.mergeGridCommonParams(this.gridOptions[property])}exists(property){return _exists(this.gridOptions[property])}mergeGridCommonParams(callback){return callback&&__name(callbackParams=>callback(this.addGridCommonParams(callbackParams)),"wrapped")}updateGridOptions({options,force,source="api"}){const changeSet={id:changeSetId++,properties:[]},events=[],{gridOptions,validation:validation2}=this;for(const key of Object.keys(options)){const value=options[key];validation2==null||validation2.warnOnInitialPropertyUpdate(source,key);const shouldForce=force||typeof value=="object"&&source==="api",previousValue=gridOptions[key];if(shouldForce||previousValue!==value){gridOptions[key]=value;const event={type:key,currentValue:value,previousValue,changeSet,source};events.push(event)}}validation2==null||validation2.processGridOptions(this.gridOptions),changeSet.properties=events.map(event=>event.type),events.forEach(event=>{_logIfDebug(this,`Updated property ${event.type} from`,event.previousValue," to ",event.currentValue),this.propEventSvc.dispatchEvent(event)})}addPropertyEventListener(key,listener){this.propEventSvc.addEventListener(key,listener)}removePropertyEventListener(key,listener){this.propEventSvc.removeEventListener(key,listener)}getDomDataKey(){return this.domDataKey}addGridCommonParams(params){return params.api=this.api,params.context=this.gridOptionsContext,params}assertModuleRegistered(moduleName,reasonOrId){const registered=Array.isArray(moduleName)?moduleName.some(modName=>this.isModuleRegistered(modName)):this.isModuleRegistered(moduleName);return registered||_error(200,{...this.getModuleErrorParams(),moduleName,reasonOrId}),registered}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:_areModulesGridScoped(),rowModelType:this.get("rowModelType"),isUmd:_isUmd()}}isModuleRegistered(moduleName){return _isModuleRegistered(moduleName,this.gridId,this.get("rowModelType"))}},__name(_a120,"GridOptionsService"),_a120);function getHeaderCompElementParams(includeSortIndicator){const hiddenAttrs={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:hiddenAttrs},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:hiddenAttrs},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:hiddenAttrs},includeSortIndicator?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}__name(getHeaderCompElementParams,"getHeaderCompElementParams");var HeaderCompElement=getHeaderCompElementParams(!0),HeaderCompElementNoSort=getHeaderCompElementParams(!1),_a121,HeaderComp=(_a121=class extends Component{constructor(){super(...arguments),this.eFilter=RefPlaceholder,this.eFilterButton=RefPlaceholder,this.eSortIndicator=RefPlaceholder,this.eMenu=RefPlaceholder,this.eLabel=RefPlaceholder,this.eText=RefPlaceholder,this.eSortOrder=RefPlaceholder,this.eSortAsc=RefPlaceholder,this.eSortDesc=RefPlaceholder,this.eSortMixed=RefPlaceholder,this.eSortNone=RefPlaceholder,this.isLoadingInnerComponent=!1}refresh(params){var _a238,_b2,_c;const oldParams=this.params;if(this.params=params,this.workOutTemplate(params,!!((_a238=this.beans)!=null&&_a238.sortSvc))!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||params.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||oldParams.enableFilterButton!=params.enableFilterButton||oldParams.enableFilterIcon!=params.enableFilterIcon)return!1;if(this.innerHeaderComponent){const mergedParams={...params};_mergeDeep(mergedParams,params.innerHeaderComponentParams),(_c=(_b2=this.innerHeaderComponent).refresh)==null||_c.call(_b2,mergedParams)}else this.setDisplayName(params);return!0}workOutTemplate(params,isSorting){const paramsTemplate=params.template;return paramsTemplate?paramsTemplate!=null&&paramsTemplate.trim?paramsTemplate.trim():paramsTemplate:isSorting?HeaderCompElement:HeaderCompElementNoSort}init(params){this.params=params;const{sortSvc,touchSvc,rowNumbersSvc,userCompFactory}=this.beans,sortComp=sortSvc==null?void 0:sortSvc.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(params,!!sortComp),this.setTemplate(this.currentTemplate,sortComp?[sortComp]:void 0),touchSvc==null||touchSvc.setupForHeader(this),this.setMenu(),this.setupSort(),rowNumbersSvc==null||rowNumbersSvc.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(userCompFactory,params),this.setDisplayName(params)}workOutInnerHeaderComponent(userCompFactory,params){const userCompDetails=_getInnerHeaderCompDetails(userCompFactory,params,params);userCompDetails&&(this.isLoadingInnerComponent=!0,userCompDetails.newAgStackInstance().then(comp=>{this.isLoadingInnerComponent=!1,comp&&(this.isAlive()?(this.innerHeaderComponent=comp,this.eText.appendChild(comp.getGui())):this.destroyBean(comp))}))}setDisplayName(params){const{displayName}=params,oldDisplayName=this.currentDisplayName;if(this.currentDisplayName=displayName,oldDisplayName===displayName||this.innerHeaderComponent||this.isLoadingInnerComponent)return;const displayNameSanitised=_escapeString(displayName,!0);this.eText.textContent=displayNameSanitised}addInIcon(iconName,eParent,column){if(eParent==null)return;const eIcon=_createIconNoSpan(iconName,this.beans,column);eIcon&&eParent.appendChild(eIcon)}workOutShowMenu(){var _a238;return this.params.enableMenu&&!!((_a238=this.beans.menuSvc)!=null&&_a238.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var _a238;return!!((_a238=this.beans.menuSvc)!=null&&_a238.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){_removeFromParent(this.eMenu),this.eMenu=void 0;return}const{gos,eMenu,params}=this,isLegacyMenu=_isLegacyMenuEnabled(gos);this.addInIcon(isLegacyMenu?"menu":"menuAlt",eMenu,params.column),eMenu.classList.toggle("ag-header-menu-icon",!isLegacyMenu);const currentSuppressMenuHide=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=currentSuppressMenuHide,this.addManagedElementListeners(eMenu,{click:__name(()=>this.showColumnMenu(this.eMenu),"click")}),this.toggleMenuAlwaysShow(currentSuppressMenuHide)}toggleMenuAlwaysShow(alwaysShow){var _a238;(_a238=this.eMenu)==null||_a238.classList.toggle("ag-header-menu-always-show",alwaysShow)}showColumnMenu(element){const{currentSuppressMenuHide,params}=this;currentSuppressMenuHide||this.toggleMenuAlwaysShow(!0),params.showColumnMenu(element,()=>{currentSuppressMenuHide||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(isFilterShortcut){var _a238;const{params,gos,beans,eMenu,eFilterButton}=this,column=params.column,isLegacyMenuEnabled=_isLegacyMenuEnabled(gos);if(isFilterShortcut&&!isLegacyMenuEnabled){if((_a238=beans.menuSvc)!=null&&_a238.isFilterMenuInHeaderEnabled(column))return params.showFilter(eFilterButton??eMenu??this.getGui()),!0}else if(params.enableMenu)return this.showColumnMenu(eMenu??eFilterButton??this.getGui()),!0;return!1}setupSort(){const{sortSvc}=this.beans;if(!sortSvc)return;const{enableSorting,column}=this.params;if(this.currentSort=enableSorting,!this.eSortIndicator){this.eSortIndicator=this.createBean(sortSvc.createSortIndicator(!0));const{eSortIndicator,eSortOrder,eSortAsc,eSortDesc,eSortMixed,eSortNone}=this;eSortIndicator.attachCustomElements(eSortOrder,eSortAsc,eSortDesc,eSortMixed,eSortNone)}this.eSortIndicator.setupSort(column),this.currentSort&&sortSvc.setupHeader(this,column,this.eLabel)}setupFilterIcon(){const{eFilter,params}=this;eFilter&&this.configureFilter(params.enableFilterIcon,eFilter,this.onFilterChangedIcon.bind(this),"filterActive")}setupFilterButton(){const{eFilterButton,params}=this;if(!eFilterButton)return;this.configureFilter(params.enableFilterButton,eFilterButton,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(eFilterButton,{click:__name(()=>params.showFilter(eFilterButton),"click")}):this.eFilterButton=void 0}configureFilter(enabled,element,filterChangedCallback,icon){if(!enabled)return _removeFromParent(element),!1;const column=this.params.column;return this.addInIcon(icon,element,column),this.addManagedListeners(column,{filterChanged:filterChangedCallback}),filterChangedCallback(),!0}onFilterChangedIcon(){const filterPresent=this.params.column.isFilterActive();_setDisplayed(this.eFilter,filterPresent,{skipAriaHidden:!0})}onFilterChangedButton(){const filterPresent=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",filterPresent)}getAnchorElementForMenu(isFilter){const{eFilterButton,eMenu}=this;return isFilter?eFilterButton??eMenu??this.getGui():eMenu??eFilterButton??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},__name(_a121,"HeaderComp"),_a121),HeaderGroupCompElement={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},_a122,HeaderGroupComp=(_a122=class extends Component{constructor(){super(HeaderGroupCompElement),this.agOpened=RefPlaceholder,this.agClosed=RefPlaceholder,this.agLabel=RefPlaceholder,this.isLoadingInnerComponent=!1}init(params){const{userCompFactory}=this.beans;this.params=params,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(userCompFactory,params),this.setupLabel(params),this.addGroupExpandIcon(params),this.setupExpandIcons()}checkWarnings(){this.params.template&&_warn(89)}workOutInnerHeaderGroupComponent(userCompFactory,params){const userCompDetails=_getInnerHeaderGroupCompDetails(userCompFactory,params,params);userCompDetails&&(this.isLoadingInnerComponent=!0,userCompDetails.newAgStackInstance().then(comp=>{this.isLoadingInnerComponent=!1,comp&&(this.isAlive()?(this.innerHeaderGroupComponent=comp,this.agLabel.appendChild(comp.getGui())):this.destroyBean(comp))}))}setupExpandIcons(){const{agOpened,agClosed,params:{columnGroup},beans}=this;this.addInIcon("columnGroupOpened",agOpened),this.addInIcon("columnGroupClosed",agClosed);const expandAction=__name(event=>{if(_isStopPropagationForAgGrid(event))return;const newExpandedValue=!columnGroup.isExpanded();beans.colGroupSvc.setColumnGroupOpened(columnGroup.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")},"expandAction");this.addTouchAndClickListeners(beans,agClosed,expandAction),this.addTouchAndClickListeners(beans,agOpened,expandAction);const stopPropagationAction=__name(event=>{_stopPropagationForAgGrid(event)},"stopPropagationAction");this.addManagedElementListeners(agClosed,{dblclick:stopPropagationAction}),this.addManagedElementListeners(agOpened,{dblclick:stopPropagationAction}),this.addManagedElementListeners(this.getGui(),{dblclick:expandAction}),this.updateIconVisibility();const providedColumnGroup=columnGroup.getProvidedColumnGroup(),updateIcon=this.updateIconVisibility.bind(this);this.addManagedListeners(providedColumnGroup,{expandedChanged:updateIcon,expandableChanged:updateIcon})}addTouchAndClickListeners(beans,eElement,action){var _a238;(_a238=beans.touchSvc)==null||_a238.setupForHeaderGroup(this,eElement,action),this.addManagedElementListeners(eElement,{click:action})}updateIconVisibility(){const{agOpened,agClosed,params:{columnGroup}}=this;if(columnGroup.isExpandable()){const expanded=columnGroup.isExpanded();_setDisplayed(agOpened,expanded),_setDisplayed(agClosed,!expanded)}else _setDisplayed(agOpened,!1),_setDisplayed(agClosed,!1)}addInIcon(iconName,element){const eIcon=_createIconNoSpan(iconName,this.beans,null);eIcon&&element.appendChild(eIcon)}addGroupExpandIcon(params){if(!params.columnGroup.isExpandable()){const{agOpened,agClosed}=this;_setDisplayed(agOpened,!1),_setDisplayed(agClosed,!1);return}}setupLabel(params){var _a238;const{displayName,columnGroup}=params,hasInnerComponent=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;if(_exists(displayName)&&!hasInnerComponent){const displayNameSanitised=_escapeString(displayName,!0);this.agLabel.textContent=displayNameSanitised}this.addOrRemoveCssClass("ag-sticky-label",!((_a238=columnGroup.getColGroupDef())!=null&&_a238.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},__name(_a122,"HeaderGroupComp"),_a122),ColumnHeaderCompModule={moduleName:"ColumnHeaderComp",version:VERSION,userComponents:{agColumnHeader:HeaderComp},icons:{menu:"menu",menuAlt:"menu-alt"}},ColumnGroupHeaderCompModule={moduleName:"ColumnGroupHeaderComp",version:VERSION,userComponents:{agColumnGroupHeader:HeaderGroupComp},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},_a123,AnimationFrameService=(_a123=class extends BeanStub{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(scrollTop){this.scrollGoingDown=scrollTop>=this.lastScrollTop,scrollTop===0&&(this.scrollGoingDown=!0),this.lastScrollTop=scrollTop}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&_warn(92)}createTask(task,index,list,isFramework){this.verify();let taskList=list;isFramework&&this.batchFrameworkComps&&(taskList="f1");const taskItem={task,index,createOrder:++this.taskCount};this.addTaskToList(this[taskList],taskItem),this.schedule()}addTaskToList(taskList,task){taskList.list.push(task),taskList.sorted=!1}sortTaskList(taskList){if(taskList.sorted)return;const sortDirection=this.scrollGoingDown?1:-1;taskList.list.sort((a,b)=>a.index!==b.index?sortDirection*(b.index-a.index):b.createOrder-a.createOrder),taskList.sorted=!0}addDestroyTask(task){this.verify(),this.destroyTasks.push(task),this.schedule()}executeFrame(millis){const{p1,p2,f1,destroyTasks,beans}=this,{ctrlsSvc,frameworkOverrides}=beans,p1Tasks=p1.list,p2Tasks=p2.list,f1Tasks=f1.list,frameStart=Date.now();let duration=0;const noMaxMillis=millis<=0,scrollFeature=ctrlsSvc.getScrollFeature();for(;noMaxMillis||duration<millis;){if(!scrollFeature.scrollGridIfNeeded()){let task;if(p1Tasks.length)this.sortTaskList(p1),task=p1Tasks.pop().task;else if(p2Tasks.length)this.sortTaskList(p2),task=p2Tasks.pop().task;else if(f1Tasks.length)frameworkOverrides.wrapOutgoing(()=>{for(;(noMaxMillis||duration<millis)&&!scrollFeature.scrollGridIfNeeded();){if(f1Tasks.length)this.sortTaskList(f1),task=f1Tasks.pop().task,task();else break;duration=Date.now()-frameStart}}),task=__name(()=>{},"task");else if(destroyTasks.length)task=destroyTasks.pop();else break;task()}duration=Date.now()-frameStart}p1Tasks.length||p2Tasks.length||f1Tasks.length||destroyTasks.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const callback=this.executeFrame.bind(this,60);_requestAnimationFrame(this.beans,callback)}isQueueEmpty(){return!this.ticking}},__name(_a123,"AnimationFrameService"),_a123),AnimationFrameModule={moduleName:"AnimationFrame",version:VERSION,beans:[AnimationFrameService]},_a124,TouchService=(_a124=class extends BeanStub{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(ctrl,listener){this.mockContextMenu(ctrl,ctrl.eBodyViewport,listener)}mockHeaderContextMenu(ctrl,listener){this.mockContextMenu(ctrl,ctrl.eGui,listener)}mockRowContextMenu(ctrl){if(!_isIOSUserAgent())return;const listener=__name((mouseListener,touch,touchEvent)=>{var _a238;const{rowCtrl,cellCtrl}=ctrl.getControlsForEventTarget((touchEvent==null?void 0:touchEvent.target)??null);cellCtrl!=null&&cellCtrl.column&&cellCtrl.dispatchCellContextMenuEvent(touchEvent??null),(_a238=this.beans.contextMenuSvc)==null||_a238.handleContextMenuMouseEvent(void 0,touchEvent,rowCtrl,cellCtrl)},"listener");this.mockContextMenu(ctrl,ctrl.element,listener)}handleCellDoubleClick(ctrl,mouseEvent){return __name(()=>{if(!_isIOSUserAgent()||_isEventSupported("dblclick"))return!1;const nowMillis=Date.now(),res=nowMillis-ctrl.lastIPadMouseClickEvent<200;return ctrl.lastIPadMouseClickEvent=nowMillis,res},"isDoubleClickOnIPad")()?(ctrl.onCellDoubleClicked(mouseEvent),mouseEvent.preventDefault(),!0):!1}setupForHeader(comp){const{gos,sortSvc}=this.beans;if(gos.get("suppressTouch"))return;const{params,eMenu,eFilterButton}=comp,touchListener=new TouchListener(comp.getGui(),!0),suppressMenuHide=comp.shouldSuppressMenuHide(),tapMenuButton=suppressMenuHide&&_exists(eMenu),menuTouchListener=tapMenuButton?new TouchListener(eMenu,!0):touchListener;if(params.enableMenu){const eventType=tapMenuButton?"tap":"longTap",showMenuFn=__name(event=>params.showColumnMenuAfterMouseClick(event.touchStart),"showMenuFn");comp.addManagedListeners(menuTouchListener,{[eventType]:showMenuFn})}if(params.enableSorting){const tapListener=__name(event=>{const target=event.touchStart.target;suppressMenuHide&&(eMenu!=null&&eMenu.contains(target)||eFilterButton!=null&&eFilterButton.contains(target))||sortSvc==null||sortSvc.progressSort(params.column,!1,"uiColumnSorted")},"tapListener");comp.addManagedListeners(touchListener,{tap:tapListener})}if(params.enableFilterButton&&eFilterButton){const filterButtonTouchListener=new TouchListener(eFilterButton,!0);comp.addManagedListeners(filterButtonTouchListener,{tap:__name(()=>params.showFilter(eFilterButton),"tap")}),comp.addDestroyFunc(()=>filterButtonTouchListener.destroy())}comp.addDestroyFunc(()=>touchListener.destroy()),tapMenuButton&&comp.addDestroyFunc(()=>menuTouchListener.destroy())}setupForHeaderGroup(comp,eElement,action){const touchListener=new TouchListener(eElement,!0);comp.addManagedListeners(touchListener,{tap:action}),comp.addDestroyFunc(()=>touchListener.destroy())}mockContextMenu(ctrl,element,listener){if(!_isIOSUserAgent())return;const touchListener=new TouchListener(element),longTapListener=__name(event=>{_isEventFromThisGrid(this.gos,event.touchEvent)&&listener(void 0,event.touchStart,event.touchEvent)},"longTapListener");ctrl.addManagedListeners(touchListener,{longTap:longTapListener}),ctrl.addDestroyFunc(()=>touchListener.destroy())}},__name(_a124,"TouchService"),_a124),TouchModule={moduleName:"Touch",version:VERSION,beans:[TouchService]},_a125,CellNavigationService=(_a125=class extends BeanStub{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(beans){this.rowSpanSvc=beans.rowSpanSvc}getNextCellToFocus(key,focusedCell,ctrlPressed=!1){return ctrlPressed?this.getNextCellToFocusWithCtrlPressed(key,focusedCell):this.getNextCellToFocusWithoutCtrlPressed(key,focusedCell)}getNextCellToFocusWithCtrlPressed(key,focusedCell){const upKey=key===KeyCode.UP,downKey=key===KeyCode.DOWN,leftKey=key===KeyCode.LEFT;let column,rowIndex;const{pageBounds,gos,visibleCols}=this.beans;if(upKey||downKey)rowIndex=upKey?pageBounds.getFirstRow():pageBounds.getLastRow(),column=focusedCell.column;else{const isRtl=gos.get("enableRtl");rowIndex=focusedCell.rowIndex,column=(leftKey!==isRtl?visibleCols.allCols:[...visibleCols.allCols].reverse()).find(col=>this.isCellGoodToFocusOn({rowIndex,rowPinned:null,column:col}))}return column?{rowIndex,rowPinned:null,column}:null}getNextCellToFocusWithoutCtrlPressed(key,focusedCell){let pointer=focusedCell,finished=!1;for(;!finished;){switch(key){case KeyCode.UP:pointer=this.getCellAbove(pointer);break;case KeyCode.DOWN:pointer=this.getCellBelow(pointer);break;case KeyCode.RIGHT:pointer=this.gos.get("enableRtl")?this.getCellToLeft(pointer):this.getCellToRight(pointer);break;case KeyCode.LEFT:pointer=this.gos.get("enableRtl")?this.getCellToRight(pointer):this.getCellToLeft(pointer);break;default:pointer=null,_warn(8,{key});break}pointer?finished=this.isCellGoodToFocusOn(pointer):finished=!0}return pointer}isCellGoodToFocusOn(gridCell){const column=gridCell.column;let rowNode;const{pinnedRowModel,rowModel}=this.beans;switch(gridCell.rowPinned){case"top":rowNode=pinnedRowModel==null?void 0:pinnedRowModel.getPinnedTopRow(gridCell.rowIndex);break;case"bottom":rowNode=pinnedRowModel==null?void 0:pinnedRowModel.getPinnedBottomRow(gridCell.rowIndex);break;default:rowNode=rowModel.getRow(gridCell.rowIndex);break}return rowNode?!this.isSuppressNavigable(column,rowNode):!1}getCellToLeft(lastCell){if(!lastCell)return null;const colToLeft=this.beans.visibleCols.getColBefore(lastCell.column);return colToLeft?{rowIndex:lastCell.rowIndex,column:colToLeft,rowPinned:lastCell.rowPinned}:null}getCellToRight(lastCell){if(!lastCell)return null;const colToRight=this.beans.visibleCols.getColAfter(lastCell.column);return colToRight?{rowIndex:lastCell.rowIndex,column:colToRight,rowPinned:lastCell.rowPinned}:null}getCellBelow(lastCell){var _a238;if(!lastCell)return null;const adjustedLastCell=((_a238=this.rowSpanSvc)==null?void 0:_a238.getCellEnd(lastCell))??lastCell,rowBelow=_getRowBelow(this.beans,adjustedLastCell);return rowBelow?{rowIndex:rowBelow.rowIndex,column:lastCell.column,rowPinned:rowBelow.rowPinned}:null}getCellAbove(lastCell){var _a238;if(!lastCell)return null;const adjustedLastCell=((_a238=this.rowSpanSvc)==null?void 0:_a238.getCellStart(lastCell))??lastCell,rowAbove=_getRowAbove(this.beans,{rowIndex:adjustedLastCell.rowIndex,rowPinned:adjustedLastCell.rowPinned});return rowAbove?{rowIndex:rowAbove.rowIndex,column:lastCell.column,rowPinned:rowAbove.rowPinned}:null}getNextTabbedCell(gridCell,backwards){return backwards?this.getNextTabbedCellBackwards(gridCell):this.getNextTabbedCellForwards(gridCell)}getNextTabbedCellForwards(gridCell){const{visibleCols,pagination}=this.beans,displayedColumns=visibleCols.allCols;let newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=visibleCols.getColAfter(gridCell.column);if(!newColumn){newColumn=displayedColumns[0];const rowBelow=_getRowBelow(this.beans,gridCell);if(_missing(rowBelow)||!rowBelow.rowPinned&&!((pagination==null?void 0:pagination.isRowInPage(rowBelow.rowIndex))??!0))return null;newRowIndex=rowBelow?rowBelow.rowIndex:null,newFloating=rowBelow?rowBelow.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}}getNextTabbedCellBackwards(gridCell){const{beans}=this,{visibleCols,pagination}=beans,displayedColumns=visibleCols.allCols;let newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=visibleCols.getColBefore(gridCell.column);if(!newColumn){newColumn=_last(displayedColumns);const rowAbove=_getRowAbove(beans,{rowIndex:gridCell.rowIndex,rowPinned:gridCell.rowPinned});if(_missing(rowAbove)||!rowAbove.rowPinned&&!((pagination==null?void 0:pagination.isRowInPage(rowAbove.rowIndex))??!0))return null;newRowIndex=rowAbove?rowAbove.rowIndex:null,newFloating=rowAbove?rowAbove.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}}isSuppressNavigable(column,rowNode){const{suppressNavigable}=column.colDef;if(typeof suppressNavigable=="boolean")return suppressNavigable;if(typeof suppressNavigable=="function"){const params=column.createColumnFunctionCallbackParams(rowNode);return suppressNavigable(params)}return!1}},__name(_a125,"CellNavigationService"),_a125);function getFocusedCell(beans){return beans.focusSvc.getFocusedCell()}__name(getFocusedCell,"getFocusedCell");function clearFocusedCell(beans){return beans.focusSvc.clearFocusedCell()}__name(clearFocusedCell,"clearFocusedCell");function setFocusedCell(beans,rowIndex,colKey,rowPinned){beans.focusSvc.setFocusedCell({rowIndex,column:colKey,rowPinned,forceBrowserFocus:!0})}__name(setFocusedCell,"setFocusedCell");function tabToNextCell(beans,event){var _a238;return((_a238=beans.navigation)==null?void 0:_a238.tabToNextCell(!1,event))??!1}__name(tabToNextCell,"tabToNextCell");function tabToPreviousCell(beans,event){var _a238;return((_a238=beans.navigation)==null?void 0:_a238.tabToNextCell(!0,event))??!1}__name(tabToPreviousCell,"tabToPreviousCell");function setFocusedHeader(beans,colKey,floatingFilter=!1){var _a238;const headerPosition=(_a238=beans.headerNavigation)==null?void 0:_a238.getHeaderPositionForColumn(colKey,floatingFilter);headerPosition&&beans.focusSvc.focusHeaderPosition({headerPosition})}__name(setFocusedHeader,"setFocusedHeader");var _a126,NavigationService=(_a126=class extends BeanStub{constructor(){super(),this.beanName="navigation",this.onPageDown=_throttle(this.onPageDown,100),this.onPageUp=_throttle(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,p=>{this.gridBodyCon=p.gridBodyCtrl})}handlePageScrollingKey(event,fromFullWidth=!1){const key=event.key,alt=event.altKey,ctrl=event.ctrlKey||event.metaKey,rangeServiceShouldHandleShift=!!this.beans.rangeSvc&&event.shiftKey,currentCell=_getCellPositionForEvent(this.gos,event);let processed=!1;switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:!ctrl&&!alt&&(this.onHomeOrEndKey(key),processed=!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.UP:case KeyCode.DOWN:if(!currentCell)return!1;ctrl&&!alt&&!rangeServiceShouldHandleShift&&(this.onCtrlUpDownLeftRight(key,currentCell),processed=!0);break;case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:!ctrl&&!alt&&(processed=this.handlePageUpDown(key,currentCell,fromFullWidth));break}return processed&&event.preventDefault(),processed}handlePageUpDown(key,currentCell,fromFullWidth){return fromFullWidth&&(currentCell=this.beans.focusSvc.getFocusedCell()),currentCell?(key===KeyCode.PAGE_UP?this.onPageUp(currentCell):this.onPageDown(currentCell),!0):!1}navigateTo(navigateParams){const{scrollIndex,scrollType,scrollColumn,focusIndex,focusColumn}=navigateParams,{scrollFeature}=this.gridBodyCon;_exists(scrollColumn)&&!scrollColumn.isPinned()&&scrollFeature.ensureColumnVisible(scrollColumn),_exists(scrollIndex)&&scrollFeature.ensureIndexVisible(scrollIndex,scrollType),navigateParams.isAsync||scrollFeature.ensureIndexVisible(focusIndex);const{focusSvc,rangeSvc}=this.beans;focusSvc.setFocusedCell({rowIndex:focusIndex,column:focusColumn,rowPinned:null,forceBrowserFocus:!0}),rangeSvc==null||rangeSvc.setRangeToCell({rowIndex:focusIndex,rowPinned:null,column:focusColumn})}onPageDown(gridCell){const beans=this.beans,scrollPosition=getVScroll(beans),pixelsInOnePage=this.getViewportHeight(),{pageBounds,rowModel,rowAutoHeight}=beans,pagingPixelOffset=pageBounds.getPixelOffset(),currentPageBottomPixel=scrollPosition.top+pixelsInOnePage,currentPageBottomRow=rowModel.getRowIndexAtPixel(currentPageBottomPixel+pagingPixelOffset);rowAutoHeight!=null&&rowAutoHeight.active?this.navigateToNextPageWithAutoHeight(gridCell,currentPageBottomRow):this.navigateToNextPage(gridCell,currentPageBottomRow)}onPageUp(gridCell){const beans=this.beans,scrollPosition=getVScroll(beans),{pageBounds,rowModel,rowAutoHeight}=beans,pagingPixelOffset=pageBounds.getPixelOffset(),currentPageTopPixel=scrollPosition.top,currentPageTopRow=rowModel.getRowIndexAtPixel(currentPageTopPixel+pagingPixelOffset);rowAutoHeight!=null&&rowAutoHeight.active?this.navigateToNextPageWithAutoHeight(gridCell,currentPageTopRow,!0):this.navigateToNextPage(gridCell,currentPageTopRow,!0)}navigateToNextPage(gridCell,scrollIndex,up=!1){const{pageBounds,rowModel}=this.beans,pixelsInOnePage=this.getViewportHeight(),firstRow=pageBounds.getFirstRow(),lastRow=pageBounds.getLastRow(),pagingPixelOffset=pageBounds.getPixelOffset(),currentRowNode=rowModel.getRow(gridCell.rowIndex),rowPixelDiff=up?(currentRowNode==null?void 0:currentRowNode.rowHeight)-pixelsInOnePage-pagingPixelOffset:pixelsInOnePage-pagingPixelOffset,nextCellPixel=(currentRowNode==null?void 0:currentRowNode.rowTop)+rowPixelDiff;let focusIndex=rowModel.getRowIndexAtPixel(nextCellPixel+pagingPixelOffset);if(focusIndex===gridCell.rowIndex){const diff=up?-1:1;scrollIndex=focusIndex=gridCell.rowIndex+diff}let scrollType;up?(scrollType="bottom",focusIndex<firstRow&&(focusIndex=firstRow),scrollIndex<firstRow&&(scrollIndex=firstRow)):(scrollType="top",focusIndex>lastRow&&(focusIndex=lastRow),scrollIndex>lastRow&&(scrollIndex=lastRow)),this.isRowTallerThanView(rowModel.getRow(focusIndex))&&(scrollIndex=focusIndex,scrollType="top"),this.navigateTo({scrollIndex,scrollType,scrollColumn:null,focusIndex,focusColumn:gridCell.column})}navigateToNextPageWithAutoHeight(gridCell,scrollIndex,up=!1){this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex:scrollIndex,focusColumn:gridCell.column}),setTimeout(()=>{const focusIndex=this.getNextFocusIndexForAutoHeight(gridCell,up);this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex,focusColumn:gridCell.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(gridCell,up=!1){const step=up?-1:1,pixelsInOnePage=this.getViewportHeight(),{pageBounds,rowModel}=this.beans,lastRowIndex=pageBounds.getLastRow();let pixelSum=0,currentIndex=gridCell.rowIndex;for(;currentIndex>=0&&currentIndex<=lastRowIndex;){const currentCell=rowModel.getRow(currentIndex);if(currentCell){const currentCellHeight=currentCell.rowHeight??0;if(pixelSum+currentCellHeight>pixelsInOnePage)break;pixelSum+=currentCellHeight}currentIndex+=step}return Math.max(0,Math.min(currentIndex,lastRowIndex))}getViewportHeight(){const beans=this.beans,scrollPosition=getVScroll(beans),scrollbarWidth=this.beans.scrollVisibleSvc.getScrollbarWidth();let pixelsInOnePage=scrollPosition.bottom-scrollPosition.top;return beans.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(pixelsInOnePage-=scrollbarWidth),pixelsInOnePage}isRowTallerThanView(rowNode){if(!rowNode)return!1;const rowHeight=rowNode.rowHeight;return typeof rowHeight!="number"?!1:rowHeight>this.getViewportHeight()}onCtrlUpDownLeftRight(key,gridCell){const cellToFocus=this.beans.cellNavigation.getNextCellToFocus(key,gridCell,!0),{rowIndex}=cellToFocus,column=cellToFocus.column;this.navigateTo({scrollIndex:rowIndex,scrollType:null,scrollColumn:column,focusIndex:rowIndex,focusColumn:column})}onHomeOrEndKey(key){const homeKey=key===KeyCode.PAGE_HOME,{visibleCols,pageBounds,rowModel}=this.beans,allColumns=visibleCols.allCols,scrollIndex=homeKey?pageBounds.getFirstRow():pageBounds.getLastRow(),rowNode=rowModel.getRow(scrollIndex);if(!rowNode)return;const columnToSelect=(homeKey?allColumns:[...allColumns].reverse()).find(col=>!col.isSuppressNavigable(rowNode));columnToSelect&&this.navigateTo({scrollIndex,scrollType:null,scrollColumn:columnToSelect,focusIndex:scrollIndex,focusColumn:columnToSelect})}onTabKeyDown(previous,keyboardEvent){const backwards=keyboardEvent.shiftKey,movedToNextCell=this.tabToNextCellCommon(previous,backwards,keyboardEvent),beans=this.beans,{ctrlsSvc,pageBounds,focusSvc,gos}=beans;if(movedToNextCell!==!1){movedToNextCell?keyboardEvent.preventDefault():movedToNextCell===null&&ctrlsSvc.get("gridCtrl").allowFocusForNextCoreContainer(backwards);return}if(backwards){const{rowIndex,rowPinned}=previous.getRowPosition();(rowPinned?rowIndex===0:rowIndex===pageBounds.getFirstRow())&&(gos.get("headerHeight")===0||_isHeaderFocusSuppressed(beans)?_focusNextGridCoreContainer(beans,!0,!0):(keyboardEvent.preventDefault(),focusSvc.focusPreviousFromFirstCell(keyboardEvent)))}else previous instanceof CellCtrl&&previous.focusCell(!0),(!backwards&&focusSvc.focusOverlay(!1)||_focusNextGridCoreContainer(beans,backwards))&&keyboardEvent.preventDefault()}tabToNextCell(backwards,event){const beans=this.beans,{focusSvc,rowRenderer}=beans,focusedCell=focusSvc.getFocusedCell();if(!focusedCell)return!1;let cellOrRow=_getCellByPosition(beans,focusedCell);return!cellOrRow&&(cellOrRow=rowRenderer.getRowByPosition(focusedCell),!cellOrRow||!cellOrRow.isFullWidth())?!1:!!this.tabToNextCellCommon(cellOrRow,backwards,event)}tabToNextCellCommon(previous,backwards,event){let editing=previous.editing;if(!editing&&previous instanceof CellCtrl){const row=previous.rowCtrl;row&&(editing=row.editing)}let res;return editing?this.gos.get("editType")==="fullRow"?res=this.moveToNextEditingRow(previous,backwards,event):res=this.moveToNextEditingCell(previous,backwards,event):res=this.moveToNextCellNotEditing(previous,backwards,event),res===null?res:res||!!this.beans.focusSvc.focusedHeader}moveToNextEditingCell(previousCell,backwards,event=null){var _a238;const previousPos=previousCell.cellPosition;previousCell.eGui.focus(),previousCell.stopEditing();const nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);return nextCell===!1?null:nextCell==null?!1:((_a238=this.beans.editSvc)==null||_a238.startEditing(nextCell,null,!0,event),nextCell.focusCell(!1),!0)}moveToNextEditingRow(previousCell,backwards,event=null){const previousPos=previousCell.cellPosition,nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);if(nextCell===!1)return null;if(nextCell==null)return!1;const nextPos=nextCell.cellPosition,previousEditable=this.isCellEditable(previousPos),nextEditable=this.isCellEditable(nextPos),rowsMatch=nextPos&&previousPos.rowIndex===nextPos.rowIndex&&previousPos.rowPinned===nextPos.rowPinned,{editSvc,rowEditSvc}=this.beans;if(previousEditable&&(editSvc==null||editSvc.setFocusOutOnEditor(previousCell)),!rowsMatch){const pRow=previousCell.rowCtrl;editSvc==null||editSvc.stopRowEditing(pRow);const nRow=nextCell.rowCtrl;rowEditSvc==null||rowEditSvc.startEditing(nRow,void 0,void 0,event)}return nextEditable?(editSvc==null||editSvc.setFocusInOnEditor(nextCell),nextCell.focusCell()):nextCell.focusCell(!0),!0}moveToNextCellNotEditing(previousCell,backwards,event){const displayedColumns=this.beans.visibleCols.allCols;let cellPos;if(previousCell instanceof RowCtrl){if(cellPos={...previousCell.getRowPosition(),column:backwards?displayedColumns[0]:_last(displayedColumns)},this.gos.get("embedFullWidthRows")&&event){const focusedContainer=previousCell.findFullWidthInfoForEvent(event);focusedContainer&&(cellPos.column=focusedContainer.column)}}else cellPos=previousCell.getFocusedCellPosition();const nextCell=this.findNextCellToFocusOn(cellPos,backwards,!1);if(nextCell===!1)return null;if(nextCell instanceof CellCtrl)nextCell.focusCell(!0);else if(nextCell)return this.tryToFocusFullWidthRow(nextCell,backwards);return _exists(nextCell)}findNextCellToFocusOn(previousPosition,backwards,startEditing){let nextPosition=previousPosition;const beans=this.beans,{cellNavigation,gos,focusSvc,rowRenderer,rangeSvc}=beans;for(;;){previousPosition!==nextPosition&&(previousPosition=nextPosition),backwards||(nextPosition=this.getLastCellOfColSpan(nextPosition)),nextPosition=cellNavigation.getNextTabbedCell(nextPosition,backwards);const userFunc=gos.getCallback("tabToNextCell");if(_exists(userFunc)){const userResult=userFunc({backwards,editing:startEditing,previousCellPosition:previousPosition,nextCellPosition:nextPosition||null});if(userResult===!0)nextPosition=previousPosition;else{if(userResult===!1)return!1;nextPosition={rowIndex:userResult.rowIndex,column:userResult.column,rowPinned:userResult.rowPinned}}}if(!nextPosition)return null;if(nextPosition.rowIndex<0){const headerLen=getFocusHeaderRowCount(beans);return focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextPosition.rowIndex,column:nextPosition.column},fromCell:!0}),null}const fullRowEdit=gos.get("editType")==="fullRow";if(startEditing&&!fullRowEdit&&!this.isCellEditable(nextPosition))continue;this.ensureCellVisible(nextPosition);const nextCell=_getCellByPosition(beans,nextPosition);if(!nextCell){const row=rowRenderer.getRowByPosition(nextPosition);if(!row||!row.isFullWidth()||startEditing)continue;return{...row.getRowPosition(),column:nextPosition==null?void 0:nextPosition.column}}if(!cellNavigation.isSuppressNavigable(nextCell.column,nextCell.rowNode))return nextCell.setFocusedCellPosition(nextPosition),rangeSvc==null||rangeSvc.setRangeToCell(nextPosition),nextCell}}isCellEditable(cell){const rowNode=this.lookupRowNodeForCell(cell);return rowNode?cell.column.isCellEditable(rowNode):!1}lookupRowNodeForCell({rowIndex,rowPinned}){const{pinnedRowModel,rowModel}=this.beans;return rowPinned==="top"?pinnedRowModel==null?void 0:pinnedRowModel.getPinnedTopRow(rowIndex):rowPinned==="bottom"?pinnedRowModel==null?void 0:pinnedRowModel.getPinnedBottomRow(rowIndex):rowModel.getRow(rowIndex)}navigateToNextCell(event,key,currentCell,allowUserOverride){let nextCell=currentCell,hitEdgeOfGrid=!1;const beans=this.beans,{cellNavigation,focusSvc,gos}=beans;for(;nextCell&&(nextCell===currentCell||!this.isValidNavigateCell(nextCell));)gos.get("enableRtl")?key===KeyCode.LEFT&&(nextCell=this.getLastCellOfColSpan(nextCell)):key===KeyCode.RIGHT&&(nextCell=this.getLastCellOfColSpan(nextCell)),nextCell=cellNavigation.getNextCellToFocus(key,nextCell),hitEdgeOfGrid=_missing(nextCell);if(hitEdgeOfGrid&&event&&event.key===KeyCode.UP&&(nextCell={rowIndex:-1,rowPinned:null,column:currentCell.column}),allowUserOverride){const userFunc=gos.getCallback("navigateToNextCell");if(_exists(userFunc)){const userCell=userFunc({key,previousCellPosition:currentCell,nextCellPosition:nextCell||null,event});_exists(userCell)?nextCell={rowPinned:userCell.rowPinned,rowIndex:userCell.rowIndex,column:userCell.column}:nextCell=null}}if(!nextCell)return;if(nextCell.rowIndex<0){const headerLen=getFocusHeaderRowCount(beans);focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextCell.rowIndex,column:currentCell.column},event:event||void 0,fromCell:!0});return}const normalisedPosition=this.getNormalisedPosition(nextCell);normalisedPosition?this.focusPosition(normalisedPosition):this.tryToFocusFullWidthRow(nextCell)}getNormalisedPosition(cellPosition){var _a238;if(!!((_a238=this.beans.spannedRowRenderer)!=null&&_a238.getCellByPosition(cellPosition)))return cellPosition;this.ensureCellVisible(cellPosition);const cellCtrl=_getCellByPosition(this.beans,cellPosition);return cellCtrl?(cellPosition=cellCtrl.getFocusedCellPosition(),this.ensureCellVisible(cellPosition),cellPosition):null}tryToFocusFullWidthRow(position,backwards){const{visibleCols,rowRenderer,focusSvc,eventSvc}=this.beans,displayedColumns=visibleCols.allCols,rowComp=rowRenderer.getRowByPosition(position);if(!rowComp||!rowComp.isFullWidth())return!1;const currentCellFocused=focusSvc.getFocusedCell(),cellPosition={rowIndex:position.rowIndex,rowPinned:position.rowPinned,column:position.column||(backwards?_last(displayedColumns):displayedColumns[0])};this.focusPosition(cellPosition);const fromBelow=backwards??(currentCellFocused!=null&&_isRowBefore(cellPosition,currentCellFocused));return eventSvc.dispatchEvent({type:"fullWidthRowFocused",rowIndex:cellPosition.rowIndex,rowPinned:cellPosition.rowPinned,column:cellPosition.column,isFullWidthCell:!0,fromBelow}),!0}focusPosition(cellPosition){const{focusSvc,rangeSvc}=this.beans;focusSvc.setFocusedCell({rowIndex:cellPosition.rowIndex,column:cellPosition.column,rowPinned:cellPosition.rowPinned,forceBrowserFocus:!0}),rangeSvc==null||rangeSvc.setRangeToCell(cellPosition)}isValidNavigateCell(cell){return!!_getRowNode(this.beans,cell)}getLastCellOfColSpan(cell){const cellCtrl=_getCellByPosition(this.beans,cell);if(!cellCtrl)return cell;const colSpanningList=cellCtrl.getColSpanningList();return colSpanningList.length===1?cell:{rowIndex:cell.rowIndex,column:_last(colSpanningList),rowPinned:cell.rowPinned}}ensureCellVisible(gridCell){const isGroupStickyEnabled=_isGroupRowsSticky(this.gos),rowNode=this.beans.rowModel.getRow(gridCell.rowIndex),skipScrollToRow=isGroupStickyEnabled&&(rowNode==null?void 0:rowNode.sticky),{scrollFeature}=this.gridBodyCon;!skipScrollToRow&&_missing(gridCell.rowPinned)&&scrollFeature.ensureIndexVisible(gridCell.rowIndex),gridCell.column.isPinned()||scrollFeature.ensureColumnVisible(gridCell.column)}},__name(_a126,"NavigationService"),_a126);function getVScroll(beans){return beans.ctrlsSvc.getScrollFeature().getVScrollPosition()}__name(getVScroll,"getVScroll");var KeyboardNavigationModule={moduleName:"KeyboardNavigation",version:VERSION,beans:[NavigationService,CellNavigationService,HeaderNavigationService],apiFunctions:{getFocusedCell,clearFocusedCell,setFocusedCell,setFocusedHeader,tabToNextCell,tabToPreviousCell}},_a127,PageBoundsListener=(_a127=class extends BeanStub{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(modelUpdatedEvent){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:(modelUpdatedEvent==null?void 0:modelUpdatedEvent.animate)??!1,newData:(modelUpdatedEvent==null?void 0:modelUpdatedEvent.newData)??!1,newPage:(modelUpdatedEvent==null?void 0:modelUpdatedEvent.newPage)??!1,newPageSize:(modelUpdatedEvent==null?void 0:modelUpdatedEvent.newPageSize)??!1,keepRenderedRows:(modelUpdatedEvent==null?void 0:modelUpdatedEvent.keepRenderedRows)??!1})}calculatePages(){const{pageBounds,pagination,rowModel}=this.beans;pagination?pagination.calculatePages():pageBounds.calculateBounds(0,rowModel.getRowCount()-1)}},__name(_a127,"PageBoundsListener"),_a127),_a128,PageBoundsService=(_a128=class extends BeanStub{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var _a238;return((_a238=this.topRowBounds)==null?void 0:_a238.rowIndex)??-1}getLastRow(){var _a238;return((_a238=this.bottomRowBounds)==null?void 0:_a238.rowIndex)??-1}getCurrentPageHeight(){const{topRowBounds,bottomRowBounds}=this;return!topRowBounds||!bottomRowBounds?0:Math.max(bottomRowBounds.rowTop+bottomRowBounds.rowHeight-topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds,bottomRowBounds}=this,pageFirstPixel=(topRowBounds==null?void 0:topRowBounds.rowTop)??0,pageLastPixel=bottomRowBounds?bottomRowBounds.rowTop+bottomRowBounds.rowHeight:0;return{pageFirstPixel,pageLastPixel}}calculateBounds(topDisplayedRowIndex,bottomDisplayedRowIndex){const{rowModel}=this.beans,topRowBounds=rowModel.getRowBounds(topDisplayedRowIndex);topRowBounds&&(topRowBounds.rowIndex=topDisplayedRowIndex),this.topRowBounds=topRowBounds;const bottomRowBounds=rowModel.getRowBounds(bottomDisplayedRowIndex);bottomRowBounds&&(bottomRowBounds.rowIndex=bottomDisplayedRowIndex),this.bottomRowBounds=bottomRowBounds,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var _a238;const value=((_a238=this.topRowBounds)==null?void 0:_a238.rowTop)??0;this.pixelOffset!==value&&(this.pixelOffset=value,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},__name(_a128,"PageBoundsService"),_a128),pinnedColumnModuleCSS=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",_a129,SetPinnedWidthFeature=(_a129=class extends BeanStub{constructor(isLeft,elements){super(),this.isLeft=isLeft,this.elements=elements,this.getWidth=isLeft?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const width=this.getWidth(),displayed=width>0;for(const element of this.elements)element&&(_setDisplayed(element,displayed),_setFixedWidth(element,width))}},__name(_a129,"SetPinnedWidthFeature"),_a129),_a130,PinnedColumnService=(_a130=class extends BeanStub{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,p=>{this.gridBodyCtrl=p.gridBodyCtrl});const listener=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:listener,displayedColumnsWidthChanged:listener}),this.addManagedPropertyListener("domLayout",listener)}checkContainerWidths(){const{gos,visibleCols,eventSvc}=this.beans,printLayout=_isDomLayout(gos,"print"),newLeftWidth=printLayout?0:visibleCols.getColsLeftWidth(),newRightWidth=printLayout?0:visibleCols.getDisplayedColumnsRightWidth();newLeftWidth!=this.leftWidth&&(this.leftWidth=newLeftWidth,eventSvc.dispatchEvent({type:"leftPinnedWidthChanged"})),newRightWidth!=this.rightWidth&&(this.rightWidth=newRightWidth,eventSvc.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const eBodyViewport=this.gridBodyCtrl.eBodyViewport,bodyWidth=_getInnerWidth(eBodyViewport);if(bodyWidth<=50)return;const processedColumnsToRemove=this.getPinnedColumnsOverflowingViewport(bodyWidth-50),processUnpinnedColumns=this.gos.getCallback("processUnpinnedColumns"),{columns,hasLockedPinned}=processedColumnsToRemove;let columnsToRemove=columns;!columnsToRemove.length&&!hasLockedPinned||(processUnpinnedColumns&&(columnsToRemove=processUnpinnedColumns({columns:columnsToRemove,viewportWidth:bodyWidth})),!(!columnsToRemove||!columnsToRemove.length)&&(columnsToRemove=columnsToRemove.filter(col=>!isRowNumberCol(col)),this.setColsPinned(columnsToRemove,null,"viewportSizeFeature")))}createPinnedWidthFeature(isLeft,...elements){return new SetPinnedWidthFeature(isLeft,elements)}setColsPinned(keys,pinned,source){const{colModel,colAnimation,visibleCols,gos}=this.beans;if(!colModel.cols||!(keys!=null&&keys.length))return;if(_isDomLayout(gos,"print")){_warn(37);return}colAnimation==null||colAnimation.start();let actualPinned;pinned===!0||pinned==="left"?actualPinned="left":pinned==="right"?actualPinned="right":actualPinned=null;const updatedCols=[];keys.forEach(key=>{if(!key)return;const column=colModel.getCol(key);column&&column.getPinned()!==actualPinned&&(this.setColPinned(column,actualPinned),updatedCols.push(column))}),updatedCols.length&&(visibleCols.refresh(source),dispatchColumnPinnedEvent(this.eventSvc,updatedCols,source)),colAnimation==null||colAnimation.finish()}initCol(column){const{pinned,initialPinned}=column.colDef;pinned!==void 0?this.setColPinned(column,pinned):this.setColPinned(column,initialPinned)}setColPinned(column,pinned){pinned===!0||pinned==="left"?column.pinned="left":pinned==="right"?column.pinned="right":column.pinned=null,column.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(ctrl){const{scrollVisibleSvc}=this.beans;if(ctrl.pinned==null)return;const pinningLeft=ctrl.pinned==="left",pinningRight=ctrl.pinned==="right";ctrl.hidden=!0;const listener=__name(()=>{const width=pinningLeft?this.leftWidth:this.rightWidth;if(width==null)return;const hidden=width==0,hiddenChanged=ctrl.hidden!==hidden,isRtl=this.gos.get("enableRtl"),scrollbarWidth=scrollVisibleSvc.getScrollbarWidth(),widthWithPadding=scrollVisibleSvc.verticalScrollShowing&&(isRtl&&pinningLeft||!isRtl&&pinningRight)?width+scrollbarWidth:width;ctrl.comp.setPinnedContainerWidth(`${widthWithPadding}px`),ctrl.comp.setDisplayed(!hidden),hiddenChanged&&(ctrl.hidden=hidden,ctrl.refresh())},"listener");ctrl.addManagedEventListeners({leftPinnedWidthChanged:listener,rightPinnedWidthChanged:listener,scrollVisibilityChanged:listener,scrollbarWidthChanged:listener})}getHeaderResizeDiff(diff,column){if(column.getPinned()){const{leftWidth,rightWidth}=this,bodyWidth=_getInnerWidth(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(leftWidth+rightWidth+diff>bodyWidth)if(bodyWidth>leftWidth+rightWidth)diff=bodyWidth-leftWidth-rightWidth;else return 0}return diff}getPinnedColumnsOverflowingViewport(viewportWidth){const pinnedRightWidth=this.rightWidth??0,pinnedLeftWidth=this.leftWidth??0,totalPinnedWidth=pinnedRightWidth+pinnedLeftWidth;let hasLockedPinned=!1;if(totalPinnedWidth<viewportWidth)return{columns:[],hasLockedPinned};const{visibleCols}=this.beans,pinnedLeftColumns=[...visibleCols.leftCols],pinnedRightColumns=[...visibleCols.rightCols];let indexRight=0,indexLeft=0;const totalWidthRemoved=0,columnsToRemove=[];let spaceNecessary=totalPinnedWidth-totalWidthRemoved-viewportWidth;for(;(indexLeft<pinnedLeftColumns.length||indexRight<pinnedRightColumns.length)&&spaceNecessary>0;){if(indexRight<pinnedRightColumns.length){const currentColumn=pinnedRightColumns[indexRight++];if(currentColumn.colDef.lockPinned){hasLockedPinned=!0;continue}spaceNecessary-=currentColumn.getActualWidth(),columnsToRemove.push(currentColumn)}if(indexLeft<pinnedLeftColumns.length&&spaceNecessary>0){const currentColumn=pinnedLeftColumns[indexLeft++];if(currentColumn.colDef.lockPinned){hasLockedPinned=!0;continue}spaceNecessary-=currentColumn.getActualWidth(),columnsToRemove.push(currentColumn)}}return{columns:columnsToRemove,hasLockedPinned}}},__name(_a130,"PinnedColumnService"),_a130),PinnedColumnModule={moduleName:"PinnedColumn",version:VERSION,beans:[PinnedColumnService],css:[pinnedColumnModuleCSS]},_a131,AriaAnnouncementService=(_a131=class extends BeanStub{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=_debounce(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const beans=this.beans,eDocument=_getDocument(beans),div=this.descriptionContainer=eDocument.createElement("div");div.classList.add("ag-aria-description-container"),_setAriaLive(div,"polite"),_setAriaRelevant(div,"additions text"),_setAriaAtomic(div,!0),beans.eGridDiv.appendChild(div)}announceValue(value,key){this.pendingAnnouncements.set(key,value),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const value=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{if(this.isAlive()&&this.descriptionContainer){let valueToAnnounce=value;this.lastAnnouncement===valueToAnnounce&&(valueToAnnounce=`${valueToAnnounce}.`),this.lastAnnouncement=valueToAnnounce,this.descriptionContainer.textContent=valueToAnnounce}},50)}destroy(){var _a238;super.destroy();const{descriptionContainer}=this;descriptionContainer&&(_clearElement(descriptionContainer),(_a238=descriptionContainer.parentElement)==null||_a238.removeChild(descriptionContainer)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},__name(_a131,"AriaAnnouncementService"),_a131),AriaModule={moduleName:"Aria",version:VERSION,beans:[AriaAnnouncementService]};function showLoadingOverlay(beans){var _a238;(_a238=beans.overlays)==null||_a238.showLoadingOverlay()}__name(showLoadingOverlay,"showLoadingOverlay");function showNoRowsOverlay(beans){var _a238;(_a238=beans.overlays)==null||_a238.showNoRowsOverlay()}__name(showNoRowsOverlay,"showNoRowsOverlay");function hideOverlay(beans){var _a238;(_a238=beans.overlays)==null||_a238.hideOverlay()}__name(hideOverlay,"hideOverlay");var overlayWrapperComponentCSS=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",OverlayWrapperElement={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},_a132,OverlayWrapperComponent=(_a132=class extends Component{constructor(){super(OverlayWrapperElement),this.eOverlayWrapper=RefPlaceholder,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(overlayWrapperComponentCSS)}handleKeyDown(e){if(e.key!==KeyCode.TAB||e.defaultPrevented||_isStopPropagationForAgGrid(e))return;const beans=this.beans;if(_findNextFocusableElement(beans,this.eOverlayWrapper,!1,e.shiftKey))return;let isFocused=!1;e.shiftKey?isFocused=beans.focusSvc.focusGridView({column:_last(beans.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):isFocused=_focusNextGridCoreContainer(beans,!1),isFocused&&e.preventDefault()}updateLayoutClasses(cssClass,params){const overlayWrapperClassList=this.eOverlayWrapper.classList,{AUTO_HEIGHT,NORMAL,PRINT}=LayoutCssClasses;overlayWrapperClassList.toggle(AUTO_HEIGHT,params.autoHeight),overlayWrapperClassList.toggle(NORMAL,params.normal),overlayWrapperClassList.toggle(PRINT,params.print)}postConstruct(){this.createManagedBean(new LayoutFeature(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(overlayWrapperCssClass){const overlayWrapperClassList=this.eOverlayWrapper.classList;this.activeCssClass&&overlayWrapperClassList.toggle(this.activeCssClass,!1),this.activeCssClass=overlayWrapperCssClass,overlayWrapperClassList.toggle(overlayWrapperCssClass,!0)}showOverlay(overlayComponentPromise,overlayWrapperCssClass,exclusive,gridOption){if(this.setWrapperTypeClass(overlayWrapperCssClass),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=overlayComponentPromise,!!overlayComponentPromise){if(this.setDisplayed(!0,{skipAriaHidden:!0}),exclusive&&this.isGridFocused()){const activeElement=_getActiveDomElement(this.beans);activeElement&&!_isNothingFocused(this.beans)&&(this.elToFocusAfter=activeElement)}overlayComponentPromise.then(comp=>{if(this.activePromise!==overlayComponentPromise){this.activeOverlay!==comp&&(this.destroyBean(comp),comp=null);return}if(this.activePromise=null,!!comp){if(this.activeOverlay!==comp&&(this.eOverlayWrapper.appendChild(comp.getGui()),this.activeOverlay=comp,gridOption)){const component=comp;this.updateListenerDestroyFunc=this.addManagedPropertyListener(gridOption,({currentValue})=>{var _a238;(_a238=component.refresh)==null||_a238.call(component,_addGridCommonParams(this.gos,{...currentValue??{}}))})}exclusive&&this.isGridFocused()&&_focusInto(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(padding){this.eOverlayWrapper.style.setProperty("padding-top",`${padding}px`)}destroyActiveOverlay(){var _a238;this.activePromise=null;const activeOverlay=this.activeOverlay;if(!activeOverlay)return;let elementToFocus=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,elementToFocus&&!this.isGridFocused()&&(elementToFocus=null);const updateListenerDestroyFunc=this.updateListenerDestroyFunc;updateListenerDestroyFunc&&(updateListenerDestroyFunc(),this.updateListenerDestroyFunc=null),this.destroyBean(activeOverlay),_clearElement(this.eOverlayWrapper),(_a238=elementToFocus==null?void 0:elementToFocus.focus)==null||_a238.call(elementToFocus,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const activeEl=_getActiveDomElement(this.beans);return!!activeEl&&this.beans.eGridDiv.contains(activeEl)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},__name(_a132,"OverlayWrapperComponent"),_a132),OverlayWrapperSelector={selector:"AG-OVERLAY-WRAPPER",component:OverlayWrapperComponent},_a133,OverlayService=(_a133=class extends BeanStub{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=_isClientSideRowModel(this.gos),this.isServerSide=!this.isClientSide&&_isServerSideRowModel(this.gos);const updateOverlayVisibility=__name(()=>this.updateOverlayVisibility(),"updateOverlayVisibility");this.addManagedEventListeners({newColumnsLoaded:updateOverlayVisibility,rowDataUpdated:updateOverlayVisibility,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:__name(()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()},"rowCountReady")}),this.addManagedPropertyListener("loading",updateOverlayVisibility)}setOverlayWrapperComp(overlayWrapperComp){this.eWrapper=overlayWrapperComp,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const gos=this.gos,loading=gos.get("loading");!loading&&(loading!==void 0||gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const gos=this.gos;gos.get("loading")||gos.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){_warn(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return OverlayWrapperSelector}getOverlayWrapperCompClass(){return OverlayWrapperComponent}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state,isClientSide,isServerSide,beans:{gos,colModel,rowModel}}=this;let loading=this.gos.get("loading");loading!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&loading===void 0&&!gos.get("suppressLoadingOverlay")&&(loading=!gos.get("columnDefs")||!colModel.ready||!gos.get("rowData")&&isClientSide),loading?state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,isClientSide&&rowModel.isEmpty()&&!gos.get("suppressNoRowsOverlay")?state!==2&&this.doShowNoRowsOverlay():(state===1||!isServerSide&&state!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(_getLoadingOverlayCompDetails(this.beans.userCompFactory,_addGridCommonParams(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(_getNoRowsOverlayCompDetails(this.beans.userCompFactory,_addGridCommonParams(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(compDetails,wrapperCssClass,gridOption){var _a238;const promise=(compDetails==null?void 0:compDetails.newAgStackInstance())??null;(_a238=this.eWrapper)==null||_a238.showOverlay(promise,wrapperCssClass,this.isExclusive(),gridOption),this.refreshWrapperPadding()}updateExclusive(){const wasExclusive=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==wasExclusive&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const eWrapper=this.eWrapper;if(!eWrapper)return;let newPadding=0;if(this.state===2){const headerCtrl=this.beans.ctrlsSvc.get("gridHeaderCtrl");newPadding=(headerCtrl==null?void 0:headerCtrl.headerHeight)||0}else this.wrapperPadding!==0&&(newPadding=0);this.wrapperPadding!==newPadding&&(this.wrapperPadding=newPadding,eWrapper.updateOverlayWrapperPaddingTop(newPadding))}},__name(_a133,"OverlayService"),_a133),OverlayModule={moduleName:"Overlay",version:VERSION,userComponents:{agLoadingOverlay:LoadingOverlayComponent2,agNoRowsOverlay:NoRowsOverlayComponent2},apiFunctions:{showLoadingOverlay,showNoRowsOverlay,hideOverlay},beans:[OverlayService]},_a134,RowContainerHeightService=(_a134=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=_getMaxDivHeight(),_logIfDebug(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const newScrollY=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,newBodyHeight=this.getUiBodyHeight();(newScrollY!==this.scrollY||newBodyHeight!==this.uiBodyHeight)&&(this.scrollY=newScrollY,this.uiBodyHeight=newBodyHeight,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const scrollPercent=this.scrollY/this.maxScrollY,divStretchOffset=scrollPercent*this.pixelsToShave;_logIfDebug(this.gos,`RowContainerHeightService - Div Stretch Offset = ${divStretchOffset} (${this.pixelsToShave} * ${scrollPercent})`),this.setDivStretchOffset(divStretchOffset)}setUiContainerHeight(height){height!==this.uiContainerHeight&&(this.uiContainerHeight=height,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(newOffset){const newOffsetFloor=typeof newOffset=="number"?Math.floor(newOffset):null;this.divStretchOffset!==newOffsetFloor&&(this.divStretchOffset=newOffsetFloor,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(modelHeight){this.modelHeight=modelHeight,this.stretching=modelHeight!=null&&this.maxDivHeight>0&&modelHeight>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(modelPixel){return modelPixel-this.divStretchOffset}getUiBodyHeight(){const pos=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return pos.bottom-pos.top}getScrollPositionForPixel(rowTop){if(this.pixelsToShave<=0)return rowTop;const modelMaxScroll=this.modelHeight-this.getUiBodyHeight(),scrollPercent=rowTop/modelMaxScroll;return this.maxScrollY*scrollPercent}},__name(_a134,"RowContainerHeightService"),_a134),ROW_ANIMATION_TIMEOUT=400,_a135,RowRenderer=(_a135=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const onCellSelectionChanged=__name(()=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onCellSelectionChanged())},"onCellSelectionChanged"),onColumnMovedPinnedVisible=__name(()=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.updateRangeBordersIfRangeCount())},"onColumnMovedPinnedVisible"),addCellSelectionListeners=__name(()=>{this.eventSvc.addEventListener("cellSelectionChanged",onCellSelectionChanged),this.eventSvc.addEventListener("columnMoved",onColumnMovedPinnedVisible),this.eventSvc.addEventListener("columnPinned",onColumnMovedPinnedVisible),this.eventSvc.addEventListener("columnVisible",onColumnMovedPinnedVisible)},"addCellSelectionListeners"),removeCellSelectionListeners=__name(()=>{this.eventSvc.removeEventListener("cellSelectionChanged",onCellSelectionChanged),this.eventSvc.removeEventListener("columnMoved",onColumnMovedPinnedVisible),this.eventSvc.removeEventListener("columnPinned",onColumnMovedPinnedVisible),this.eventSvc.removeEventListener("columnVisible",onColumnMovedPinnedVisible)},"removeCellSelectionListeners");this.addDestroyFunc(()=>removeCellSelectionListeners()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{_isCellSelectionEnabled(this.gos)?addCellSelectionListeners():removeCellSelectionListeners()}),_isCellSelectionEnabled(this.gos)&&addCellSelectionListeners()}}wireBeans(beans){this.pageBounds=beans.pageBounds,this.colModel=beans.colModel,this.pinnedRowModel=beans.pinnedRowModel,this.rowModel=beans.rowModel,this.focusSvc=beans.focusSvc,this.rowContainerHeight=beans.rowContainerHeight,this.ctrlsSvc=beans.ctrlsSvc}postConstruct(){this.ctrlsSvc.whenReady(this,p=>{this.gridBodyCtrl=p.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue,previousValue})=>{(!previousValue&&currentValue||previousValue&&!currentValue)&&this.redrawRows()});const{stickyRowSvc,gos,showRowGroupCols}=this.beans;if(showRowGroupCols&&this.addManagedPropertyListener("showOpenedGroup",()=>{const columns=showRowGroupCols.getShowRowGroupCols();columns.length&&this.refreshCells({columns,force:!0})}),stickyRowSvc)this.stickyRowFeature=stickyRowSvc.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const gridBodyCtrl=this.gridBodyCtrl;gridBodyCtrl.setStickyTopHeight(0),gridBodyCtrl.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=_isDomLayout(gos,"print"),this.embedFullWidthRows=this.printLayout||gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const countProp=this.getKeepDetailRowsCount(),count=countProp??3;this.cachedRowCtrls=new RowCtrlCache(count)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var _a238;return((_a238=this.stickyRowFeature)==null?void 0:_a238.stickyTopRowCtrls)??[]}getStickyBottomRowCtrls(){var _a238;return((_a238=this.stickyRowFeature)==null?void 0:_a238.stickyBottomRowCtrls)??[]}updateAllRowCtrls(){var _a238;const liveList=Object.values(this.rowCtrlsByRowIndex),zombieList=Object.values(this.zombieRowCtrls),cachedList=((_a238=this.cachedRowCtrls)==null?void 0:_a238.getEntries())??[];zombieList.length>0||cachedList.length>0?this.allRowCtrls=[...liveList,...zombieList,...cachedList]:this.allRowCtrls=liveList}isCellBeingRendered(rowIndex,column){var _a238;const rowCtrl=this.rowCtrlsByRowIndex[rowIndex];return!column||!rowCtrl?!!rowCtrl:rowCtrl.isFullWidth()?!0:!!((_a238=this.beans.spannedRowRenderer)==null?void 0:_a238.getCellByPosition({rowIndex,column,rowPinned:null}))||!!rowCtrl.getCellCtrl(column)||!rowCtrl.isRowRendered()}updateCellFocus(event){this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onCellFocused(event)),this.getFullWidthRowCtrls().forEach(rowCtrl=>rowCtrl.onFullWidthRowFocused(event))}onCellFocusChanged(event){if(event&&event.rowIndex!=null&&!event.rowPinned){const col=this.beans.colModel.getCol(event.column)??void 0;this.isCellBeingRendered(event.rowIndex,col)||this.redraw()}this.updateCellFocus(event)}onSuppressCellFocusChanged(suppressCellFocus){this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onSuppressCellFocusChanged(suppressCellFocus)),this.getFullWidthRowCtrls().forEach(rowCtrl=>rowCtrl.onSuppressCellFocusChanged(suppressCellFocus))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:__name(event=>this.onCellFocusChanged(event),"cellFocused"),cellFocusCleared:__name(()=>this.updateCellFocus(),"cellFocusCleared"),flashCells:__name(event=>{const{cellFlashSvc}=this.beans;cellFlashSvc&&this.getAllCellCtrls().forEach(cellCtrl=>cellFlashSvc.onFlashCells(cellCtrl,event))},"flashCells"),columnHoverChanged:__name(()=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onColumnHover())},"columnHoverChanged"),displayedColumnsChanged:__name(()=>{this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onDisplayedColumnsChanged())},"displayedColumnsChanged"),displayedColumnsWidthChanged:__name(()=>{this.printLayout&&this.getAllCellCtrls().forEach(cellCtrl=>cellCtrl.onLeftChanged())},"displayedColumnsWidthChanged")}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(func=>func()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.colModel.getCols().forEach(col=>{const forEachCellWithThisCol=__name(callback=>{this.getAllCellCtrls().forEach(cellCtrl=>{cellCtrl.column===col&&callback(cellCtrl)})},"forEachCellWithThisCol"),leftChangedListener=__name(()=>{forEachCellWithThisCol(cellCtrl=>cellCtrl.onLeftChanged())},"leftChangedListener"),widthChangedListener=__name(()=>{forEachCellWithThisCol(cellCtrl=>cellCtrl.onWidthChanged())},"widthChangedListener"),firstRightPinnedChangedListener=__name(()=>{forEachCellWithThisCol(cellCtrl=>cellCtrl.onFirstRightPinnedChanged())},"firstRightPinnedChangedListener"),lastLeftPinnedChangedListener=__name(()=>{forEachCellWithThisCol(cellCtrl=>cellCtrl.onLastLeftPinnedChanged())},"lastLeftPinnedChangedListener"),colDefChangedListener=__name(()=>{forEachCellWithThisCol(cellCtrl=>cellCtrl.onColDefChanged())},"colDefChangedListener");col.__addEventListener("leftChanged",leftChangedListener),col.__addEventListener("widthChanged",widthChangedListener),col.__addEventListener("firstRightPinnedChanged",firstRightPinnedChangedListener),col.__addEventListener("lastLeftPinnedChanged",lastLeftPinnedChangedListener),col.__addEventListener("colDefChanged",colDefChangedListener),this.destroyFuncsForColumnListeners.push(()=>{col.__removeEventListener("leftChanged",leftChangedListener),col.__removeEventListener("widthChanged",widthChangedListener),col.__removeEventListener("firstRightPinnedChanged",firstRightPinnedChangedListener),col.__removeEventListener("lastLeftPinnedChanged",lastLeftPinnedChangedListener),col.__removeEventListener("colDefChanged",colDefChangedListener)})})}onDomLayoutChanged(){const printLayout=_isDomLayout(this.gos,"print"),embedFullWidthRows=printLayout||this.gos.get("embedFullWidthRows"),destroyRows=embedFullWidthRows!==this.embedFullWidthRows||this.printLayout!==printLayout;this.printLayout=printLayout,this.embedFullWidthRows=embedFullWidthRows,destroyRows&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove)}onPageLoaded(event){const params={recycleRows:event.keepRenderedRows,animate:event.animate,newData:event.newData,newPage:event.newPage,onlyBody:!0};this.redrawAfterModelUpdate(params)}getAllCellsNotSpanningForColumn(column){const res=[];return this.getAllRowCtrls().forEach(rowCtrl=>{var _a238;const eCell=(_a238=rowCtrl.getCellCtrl(column,!0))==null?void 0:_a238.eGui;eCell&&res.push(eCell)}),res}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}refreshFloatingRows(rowCtrls,floating){const{pinnedRowModel,beans,printLayout}=this,rowCtrlMap=Object.fromEntries(rowCtrls.map(ctrl=>[ctrl.rowNode.id,ctrl]));pinnedRowModel==null||pinnedRowModel.forEachPinnedRow(floating,(node,i)=>{const rowCtrl=rowCtrls[i];rowCtrl&&pinnedRowModel.getPinnedRowById(rowCtrl.rowNode.id,floating)===void 0&&(rowCtrl.destroyFirstPass(),rowCtrl.destroySecondPass()),node.id in rowCtrlMap?(rowCtrls[i]=rowCtrlMap[node.id],delete rowCtrlMap[node.id]):rowCtrls[i]=new RowCtrl(node,beans,!1,!1,printLayout)});const rowNodeCount=(floating==="top"?pinnedRowModel==null?void 0:pinnedRowModel.getPinnedTopRowCount():pinnedRowModel==null?void 0:pinnedRowModel.getPinnedBottomRowCount())??0;rowCtrls.length=rowNodeCount}onPinnedRowDataChanged(){const params={recycleRows:!0};this.redrawAfterModelUpdate(params)}redrawRow(rowNode,suppressEvent=!1){var _a238,_b2;if(rowNode.sticky)(_a238=this.stickyRowFeature)==null||_a238.refreshStickyNode(rowNode);else if((_b2=this.cachedRowCtrls)!=null&&_b2.has(rowNode)){this.cachedRowCtrls.removeRow(rowNode);return}else{const destroyAndRecreateCtrl=__name(dataStruct=>{const ctrl=dataStruct[rowNode.rowIndex];ctrl&&ctrl.rowNode===rowNode&&(ctrl.destroyFirstPass(),ctrl.destroySecondPass(),dataStruct[rowNode.rowIndex]=this.createRowCon(rowNode,!1,!1))},"destroyAndRecreateCtrl");switch(rowNode.rowPinned){case"top":destroyAndRecreateCtrl(this.topRowCtrls);break;case"bottom":destroyAndRecreateCtrl(this.bottomRowCtrls);break;default:destroyAndRecreateCtrl(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}suppressEvent||this.dispatchDisplayedRowsChanged(!1)}redrawRows(rowNodes){if(rowNodes!=null){rowNodes==null||rowNodes.forEach(node=>this.redrawRow(node,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(params={}){var _a238;this.getLockOnRefresh();const focusedCell=(_a238=this.beans.focusSvc)==null?void 0:_a238.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(params);const recycleRows=!params.domLayoutChanged&&!!params.recycleRows,animate=params.animate&&_isAnimateRows(this.gos),rowsToRecycle=recycleRows?this.getRowsToRecycle():null;recycleRows||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature}=this;if(stickyRowFeature){stickyRowFeature.checkStickyRows();const extraHeight=stickyRowFeature.extraTopHeight+stickyRowFeature.extraBottomHeight;extraHeight&&this.updateContainerHeights(extraHeight)}this.recycleRows(rowsToRecycle,animate),this.gridBodyCtrl.updateRowCount(),params.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),focusedCell!=null&&this.restoreFocusedCell(focusedCell),this.releaseLockOnRefresh()}scrollToTopIfNewData(params){var _a238;const scrollToTop=params.newData||params.newPage,suppressScrollToTop=this.gos.get("suppressScrollOnNewData");scrollToTop&&!suppressScrollToTop&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),(_a238=this.stickyRowFeature)==null||_a238.resetOffsets())}updateContainerHeights(additionalHeight=0){const{rowContainerHeight}=this;if(this.printLayout){rowContainerHeight.setModelHeight(null);return}let containerHeight=this.pageBounds.getCurrentPageHeight();containerHeight===0&&(containerHeight=1),rowContainerHeight.setModelHeight(containerHeight+additionalHeight)}getLockOnRefresh(){var _a238,_b2;if(this.refreshInProgress)throw new Error(_errMsg(252));this.refreshInProgress=!0,(_b2=(_a238=this.beans.frameworkOverrides).getLockOnRefresh)==null||_b2.call(_a238)}releaseLockOnRefresh(){var _a238,_b2;this.refreshInProgress=!1,(_b2=(_a238=this.beans.frameworkOverrides).releaseLockOnRefresh)==null||_b2.call(_a238)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(cellPosition){if(!cellPosition)return;const focusSvc=this.beans.focusSvc,cellToFocus=this.findPositionToFocus(cellPosition);if(!cellToFocus){focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:getFocusHeaderRowCount(this.beans)-1,column:cellPosition.column}});return}if(cellPosition.rowIndex!==cellToFocus.rowIndex||cellPosition.rowPinned!=cellToFocus.rowPinned){focusSvc.setFocusedCell({...cellToFocus,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}focusSvc.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(_addGridCommonParams(this.gos,{...cellToFocus,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(cellPosition){const{pagination,pageBounds}=this.beans;let rowPosition=cellPosition;for(rowPosition.rowPinned==null&&pagination&&pageBounds&&!pagination.isRowInPage(rowPosition.rowIndex)&&(rowPosition={rowPinned:null,rowIndex:pageBounds.getFirstRow()});rowPosition;){if(rowPosition.rowPinned==null&&pageBounds)if(rowPosition.rowIndex<pageBounds.getFirstRow()){if(rowPosition=_getRowAbove(this.beans,{rowPinned:null,rowIndex:0}),!rowPosition)return null}else rowPosition.rowIndex>pageBounds.getLastRow()&&(rowPosition={rowPinned:null,rowIndex:pageBounds.getLastRow()});const row=this.getRowByPosition(rowPosition);if(row!=null&&row.isAlive())return{...row.getRowPosition(),column:cellPosition.column};rowPosition=_getRowAbove(this.beans,rowPosition)}return null}getAllCellCtrls(){const res=[],rowCtrls=this.getAllRowCtrls(),rowCtrlsLength=rowCtrls.length;for(let i=0;i<rowCtrlsLength;i++){const cellCtrls=rowCtrls[i].getAllCellCtrls(),cellCtrlsLength=cellCtrls.length;for(let j=0;j<cellCtrlsLength;j++)res.push(cellCtrls[j])}return res}getAllRowCtrls(){const{spannedRowRenderer}=this.beans,stickyTopRowCtrls=this.getStickyTopRowCtrls(),stickyBottomRowCtrls=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...stickyTopRowCtrls,...stickyBottomRowCtrls,...(spannedRowRenderer==null?void 0:spannedRowRenderer.getCtrls("top"))??[],...(spannedRowRenderer==null?void 0:spannedRowRenderer.getCtrls("bottom"))??[],...(spannedRowRenderer==null?void 0:spannedRowRenderer.getCtrls("center"))??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(eventName,rowIndex,callback){const rowComp=this.rowCtrlsByRowIndex[rowIndex];rowComp&&rowComp.addEventListener(eventName,callback)}refreshCells(params={}){const refreshCellParams={forceRefresh:params.force,newData:!1,suppressFlash:params.suppressFlash};for(const cellCtrl of this.getCellCtrls(params.rowNodes,params.columns))cellCtrl.refreshOrDestroyCell(refreshCellParams);this.refreshFullWidth(params.rowNodes)}refreshFullWidth(rowNodes){if(!rowNodes)return;let rowRedrawn=!1;for(const rowCtrl of this.getRowCtrls(rowNodes)){if(!rowCtrl.isFullWidth())continue;rowCtrl.refreshFullWidth()||(rowRedrawn=!0,this.redrawRow(rowCtrl.rowNode,!0))}rowRedrawn&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(rowNodes){const rowIdsMap=mapRowNodes(rowNodes),allRowCtrls=this.getAllRowCtrls();return!rowNodes||!rowIdsMap?allRowCtrls:allRowCtrls.filter(rowCtrl=>{const rowNode=rowCtrl.rowNode;return isRowInMap(rowNode,rowIdsMap)})}getCellCtrls(rowNodes,columns){let colIdsMap;_exists(columns)&&(colIdsMap={},columns.forEach(colKey=>{const column=this.colModel.getCol(colKey);_exists(column)&&(colIdsMap[column.getId()]=!0)}));const res=[];return this.getRowCtrls(rowNodes).forEach(rowCtrl=>{rowCtrl.getAllCellCtrls().forEach(cellCtrl=>{const colId=cellCtrl.column.getId();colIdsMap&&!colIdsMap[colId]||res.push(cellCtrl)})}),res}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(suppressAnimation=!1){var _a238;const rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove,suppressAnimation),(_a238=this.stickyRowFeature)==null||_a238.destroyStickyCtrls()}getRowsToRecycle(){const stubNodeIndexes=[];for(const index of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[index].rowNode.id==null&&stubNodeIndexes.push(index);this.removeRowCtrls(stubNodeIndexes);const ctrlsByIdMap={};for(const rowCtrl of Object.values(this.rowCtrlsByRowIndex)){const rowNode=rowCtrl.rowNode;ctrlsByIdMap[rowNode.id]=rowCtrl}return this.rowCtrlsByRowIndex={},ctrlsByIdMap}removeRowCtrls(rowsToRemove,suppressAnimation=!1){rowsToRemove.forEach(indexToRemove=>{const rowCtrl=this.rowCtrlsByRowIndex[indexToRemove];rowCtrl&&(rowCtrl.destroyFirstPass(suppressAnimation),rowCtrl.destroySecondPass()),delete this.rowCtrlsByRowIndex[indexToRemove]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(params={}){const{focusSvc,animationFrameSvc}=this.beans,{afterScroll}=params;let cellFocused;const stickyRowFeature=this.stickyRowFeature;stickyRowFeature&&(cellFocused=(focusSvc==null?void 0:focusSvc.getFocusCellToUseAfterRefresh())||void 0);const oldFirstRow=this.firstRenderedRow,oldLastRow=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let hasStickyRowChanges=!1;if(stickyRowFeature){hasStickyRowChanges=stickyRowFeature.checkStickyRows();const extraHeight=stickyRowFeature.extraTopHeight+stickyRowFeature.extraBottomHeight;extraHeight&&this.updateContainerHeights(extraHeight)}const rangeChanged=this.firstRenderedRow!==oldFirstRow||this.lastRenderedRow!==oldLastRow;if(!(afterScroll&&!hasStickyRowChanges&&!rangeChanged)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,afterScroll),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(afterScroll&&!hasStickyRowChanges),cellFocused!=null)){const newFocusedCell=focusSvc==null?void 0:focusSvc.getFocusCellToUseAfterRefresh();cellFocused!=null&&newFocusedCell==null&&(animationFrameSvc==null||animationFrameSvc.flushAllFrames(),this.restoreFocusedCell(cellFocused))}}removeRowCompsNotToDraw(indexesToDraw,suppressAnimation){const indexesToDrawMap={};indexesToDraw.forEach(index=>indexesToDrawMap[index]=!0);const indexesNotToDraw=Object.keys(this.rowCtrlsByRowIndex).filter(index=>!indexesToDrawMap[index]);this.removeRowCtrls(indexesNotToDraw,suppressAnimation)}calculateIndexesToDraw(rowsToRecycle){var _a238,_b2;const indexesToDraw=[];for(let i=this.firstRenderedRow;i<=this.lastRenderedRow;i++)indexesToDraw.push(i);const pagination=this.beans.pagination,focusedRow=(_b2=(_a238=this.beans.focusSvc)==null?void 0:_a238.getFocusedCell())==null?void 0:_b2.rowIndex;focusedRow!=null&&(focusedRow<this.firstRenderedRow||focusedRow>this.lastRenderedRow)&&(!pagination||pagination.isRowInPage(focusedRow))&&indexesToDraw.push(focusedRow);const checkRowToDraw=__name(rowComp=>{const index=rowComp.rowNode.rowIndex;index==null||index===focusedRow||(index<this.firstRenderedRow||index>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(rowComp)&&indexesToDraw.push(index)},"checkRowToDraw");for(const rowCtrl of Object.values(this.rowCtrlsByRowIndex))checkRowToDraw(rowCtrl);if(rowsToRecycle)for(const rowCtrl of Object.values(rowsToRecycle))checkRowToDraw(rowCtrl);indexesToDraw.sort((a,b)=>a-b);const ret=[];for(let i=0;i<indexesToDraw.length;i++){const currRow=indexesToDraw[i],rowNode=this.rowModel.getRow(currRow);rowNode&&!rowNode.sticky&&ret.push(currRow)}return ret}recycleRows(rowsToRecycle,animate=!1,afterScroll=!1){const indexesToDraw=this.calculateIndexesToDraw(rowsToRecycle);if((this.printLayout||afterScroll)&&(animate=!1),this.removeRowCompsNotToDraw(indexesToDraw,!animate),indexesToDraw.forEach(rowIndex=>{this.createOrUpdateRowCtrl(rowIndex,rowsToRecycle,animate,afterScroll)}),rowsToRecycle){const{animationFrameSvc}=this.beans;(animationFrameSvc==null?void 0:animationFrameSvc.active)&&afterScroll&&!this.printLayout?animationFrameSvc.addDestroyTask(()=>{this.destroyRowCtrls(rowsToRecycle,animate),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(rowsToRecycle,animate)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(afterScroll=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll})}onDisplayedColumnsChanged(){const{visibleCols}=this.beans,pinningLeft=visibleCols.isPinningLeft(),pinningRight=visibleCols.isPinningRight();(this.pinningLeft!==pinningLeft||pinningRight!==this.pinningRight)&&(this.pinningLeft=pinningLeft,this.pinningRight=pinningRight,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const rowsToRemove=[];this.getFullWidthRowCtrls().forEach(fullWidthCtrl=>{const rowIndex=fullWidthCtrl.rowNode.rowIndex;rowsToRemove.push(rowIndex.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(rowsToRemove),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(rowNodes){const rowNodesMap=mapRowNodes(rowNodes);return this.getAllRowCtrls().filter(rowCtrl=>{if(!rowCtrl.isFullWidth())return!1;const rowNode=rowCtrl.rowNode;return!(rowNodesMap!=null&&!isRowInMap(rowNode,rowNodesMap))})}createOrUpdateRowCtrl(rowIndex,rowsToRecycle,animate,afterScroll){let rowNode,rowCtrl=this.rowCtrlsByRowIndex[rowIndex];if(rowCtrl||(rowNode=this.rowModel.getRow(rowIndex),_exists(rowNode)&&_exists(rowsToRecycle)&&rowsToRecycle[rowNode.id]&&rowNode.alreadyRendered&&(rowCtrl=rowsToRecycle[rowNode.id],rowsToRecycle[rowNode.id]=null)),!rowCtrl)if(rowNode||(rowNode=this.rowModel.getRow(rowIndex)),_exists(rowNode))rowCtrl=this.createRowCon(rowNode,animate,afterScroll);else return;return rowNode&&(rowNode.alreadyRendered=!0),this.rowCtrlsByRowIndex[rowIndex]=rowCtrl,rowCtrl}destroyRowCtrls(rowCtrlsMap,animate){const executeInAWhileFuncs=[];if(rowCtrlsMap){for(const rowCtrl of Object.values(rowCtrlsMap))if(rowCtrl){if(this.cachedRowCtrls&&rowCtrl.isCacheable()){this.cachedRowCtrls.addRow(rowCtrl);continue}if(rowCtrl.destroyFirstPass(!animate),animate){const instanceId=rowCtrl.instanceId;this.zombieRowCtrls[instanceId]=rowCtrl,executeInAWhileFuncs.push(()=>{rowCtrl.destroySecondPass(),delete this.zombieRowCtrls[instanceId]})}else rowCtrl.destroySecondPass()}}animate&&(executeInAWhileFuncs.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),window.setTimeout(()=>executeInAWhileFuncs.forEach(func=>func()),ROW_ANIMATION_TIMEOUT))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const rowsToBuffer=this.getRowBuffer(),defaultRowHeight=_getRowHeightAsNumber(this.beans);return rowsToBuffer*defaultRowHeight}workOutFirstAndLastRowsToRender(){const{rowContainerHeight,pageBounds,rowModel}=this;rowContainerHeight.updateOffset();let newFirst,newLast;if(!rowModel.isRowsToRender())newFirst=0,newLast=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),newFirst=pageBounds.getFirstRow(),newLast=pageBounds.getLastRow();else{const bufferPixels=this.getRowBufferInPixels(),scrollFeature=this.ctrlsSvc.getScrollFeature(),suppressRowVirtualisation=this.gos.get("suppressRowVirtualisation");let rowHeightsChanged=!1,firstPixel,lastPixel;do{const paginationOffset=pageBounds.getPixelOffset(),{pageFirstPixel,pageLastPixel}=pageBounds.getCurrentPagePixelRange(),divStretchOffset=rowContainerHeight.divStretchOffset,bodyVRange=scrollFeature.getVScrollPosition(),bodyTopPixel=bodyVRange.top,bodyBottomPixel=bodyVRange.bottom;suppressRowVirtualisation?(firstPixel=pageFirstPixel+divStretchOffset,lastPixel=pageLastPixel+divStretchOffset):(firstPixel=Math.max(bodyTopPixel+paginationOffset-bufferPixels,pageFirstPixel)+divStretchOffset,lastPixel=Math.min(bodyBottomPixel+paginationOffset+bufferPixels,pageLastPixel)+divStretchOffset),this.firstVisibleVPixel=Math.max(bodyTopPixel+paginationOffset,pageFirstPixel)+divStretchOffset,this.lastVisibleVPixel=Math.min(bodyBottomPixel+paginationOffset,pageLastPixel)+divStretchOffset,rowHeightsChanged=this.ensureAllRowsInRangeHaveHeightsCalculated(firstPixel,lastPixel)}while(rowHeightsChanged);let firstRowIndex=rowModel.getRowIndexAtPixel(firstPixel),lastRowIndex=rowModel.getRowIndexAtPixel(lastPixel);const pageFirstRow=pageBounds.getFirstRow(),pageLastRow=pageBounds.getLastRow();firstRowIndex<pageFirstRow&&(firstRowIndex=pageFirstRow),lastRowIndex>pageLastRow&&(lastRowIndex=pageLastRow),newFirst=firstRowIndex,newLast=lastRowIndex}const rowLayoutNormal=_isDomLayout(this.gos,"normal"),suppressRowCountRestriction=this.gos.get("suppressMaxRenderedRowRestriction"),rowBufferMaxSize=Math.max(this.getRowBuffer(),500);rowLayoutNormal&&!suppressRowCountRestriction&&newLast-newFirst>rowBufferMaxSize&&(newLast=newFirst+rowBufferMaxSize);const firstDiffers=newFirst!==this.firstRenderedRow,lastDiffers=newLast!==this.lastRenderedRow;(firstDiffers||lastDiffers)&&(this.firstRenderedRow=newFirst,this.lastRenderedRow=newLast,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:newFirst,lastRow:newLast}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,_requestAnimationFrame(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(topPixel,bottomPixel){var _a238,_b2;const pinnedRowHeightsChanged=(_a238=this.pinnedRowModel)==null?void 0:_a238.ensureRowHeightsValid(),stickyHeightsChanged=(_b2=this.stickyRowFeature)==null?void 0:_b2.ensureRowHeightsValid(),{pageBounds,rowModel}=this,rowModelHeightsChanged=rowModel.ensureRowHeightsValid(topPixel,bottomPixel,pageBounds.getFirstRow(),pageBounds.getLastRow());return(rowModelHeightsChanged||stickyHeightsChanged)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),stickyHeightsChanged||rowModelHeightsChanged||pinnedRowHeightsChanged?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(rowCtrl){const rowNode=rowCtrl.rowNode,rowHasFocus=this.focusSvc.isRowFocused(rowNode.rowIndex,rowNode.rowPinned),rowIsEditing=rowCtrl.editing,rowIsDetail=rowNode.detail;return rowHasFocus||rowIsEditing||rowIsDetail?!!this.isRowPresent(rowNode):!1}isRowPresent(rowNode){var _a238;return this.rowModel.isRowPresent(rowNode)?((_a238=this.beans.pagination)==null?void 0:_a238.isRowInPage(rowNode.rowIndex))??!0:!1}createRowCon(rowNode,animate,afterScroll){var _a238,_b2;const rowCtrlFromCache=((_a238=this.cachedRowCtrls)==null?void 0:_a238.getRow(rowNode))??null;if(rowCtrlFromCache)return rowCtrlFromCache;const useAnimationFrameForCreate=afterScroll&&!this.printLayout&&!!((_b2=this.beans.animationFrameSvc)!=null&&_b2.active);return new RowCtrl(rowNode,this.beans,animate,useAnimationFrameForCreate,this.printLayout)}getRenderedNodes(){const viewportRows=Object.values(this.rowCtrlsByRowIndex).map(rowCtrl=>rowCtrl.rowNode),stickyTopRows=this.getStickyTopRowCtrls().map(rowCtrl=>rowCtrl.rowNode),stickyBottomRows=this.getStickyBottomRowCtrls().map(rowCtrl=>rowCtrl.rowNode);return[...stickyTopRows,...viewportRows,...stickyBottomRows]}getRowByPosition(rowPosition){let rowCtrl;const{rowIndex}=rowPosition;switch(rowPosition.rowPinned){case"top":rowCtrl=this.topRowCtrls[rowIndex];break;case"bottom":rowCtrl=this.bottomRowCtrls[rowIndex];break;default:rowCtrl=this.rowCtrlsByRowIndex[rowIndex],rowCtrl||(rowCtrl=this.getStickyTopRowCtrls().find(ctrl=>ctrl.rowNode.rowIndex===rowIndex)||null,rowCtrl||(rowCtrl=this.getStickyBottomRowCtrls().find(ctrl=>ctrl.rowNode.rowIndex===rowIndex)||null));break}return rowCtrl}isRangeInRenderedViewport(startIndex,endIndex){if(startIndex==null||endIndex==null)return!1;const blockAfterViewport=startIndex>this.lastRenderedRow;return!(endIndex<this.firstRenderedRow)&&!blockAfterViewport}},__name(_a135,"RowRenderer"),_a135),_a136,RowCtrlCache=(_a136=class{constructor(maxCount){this.entriesMap={},this.entriesList=[],this.maxCount=maxCount}addRow(rowCtrl){if(this.entriesMap[rowCtrl.rowNode.id]=rowCtrl,this.entriesList.push(rowCtrl),rowCtrl.setCached(!0),this.entriesList.length>this.maxCount){const rowCtrlToDestroy=this.entriesList[0];rowCtrlToDestroy.destroyFirstPass(),rowCtrlToDestroy.destroySecondPass(),this.removeFromCache(rowCtrlToDestroy)}}getRow(rowNode){if(rowNode==null||rowNode.id==null)return null;const res=this.entriesMap[rowNode.id];return res?(this.removeFromCache(res),res.setCached(!1),res.rowNode!=rowNode?null:res):null}has(rowNode){return this.entriesMap[rowNode.id]!=null}removeRow(rowNode){const rowNodeId=rowNode.id,ctrl=this.entriesMap[rowNodeId];delete this.entriesMap[rowNodeId],_removeFromArray(this.entriesList,ctrl)}removeFromCache(rowCtrl){const rowNodeId=rowCtrl.rowNode.id;delete this.entriesMap[rowNodeId],_removeFromArray(this.entriesList,rowCtrl)}getEntries(){return this.entriesList}},__name(_a136,"RowCtrlCache"),_a136);function mapRowNodes(rowNodes){if(!rowNodes)return;const res={top:{},bottom:{},normal:{}};return rowNodes.forEach(rowNode=>{const id=rowNode.id;switch(rowNode.rowPinned){case"top":res.top[id]=rowNode;break;case"bottom":res.bottom[id]=rowNode;break;default:res.normal[id]=rowNode;break}}),res}__name(mapRowNodes,"mapRowNodes");function isRowInMap(rowNode,rowIdsMap){const id=rowNode.id;switch(rowNode.rowPinned){case"top":return rowIdsMap.top[id]!=null;case"bottom":return rowIdsMap.bottom[id]!=null;default:return rowIdsMap.normal[id]!=null}}__name(isRowInMap,"isRowInMap");var _a137,RowNodeSorter=(_a137=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos}=this;this.isAccentedSort=gos.get("accentedSort"),this.primaryColumnsSortGroups=_isColumnsSortingCoupledToGroup(gos),this.addManagedPropertyListener("accentedSort",propChange=>this.isAccentedSort=propChange.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=_isColumnsSortingCoupledToGroup(gos))}doFullSort(rowNodes,sortOptions){const sortedRowNodes=rowNodes.map((rowNode,currentPos)=>({currentPos,rowNode}));return sortedRowNodes.sort(this.compareRowNodes.bind(this,sortOptions)),sortedRowNodes.map(item=>item.rowNode)}compareRowNodes(sortOptions,sortedNodeA,sortedNodeB){const nodeA=sortedNodeA.rowNode,nodeB=sortedNodeB.rowNode;for(let i=0,len=sortOptions.length;i<len;i++){const sortOption=sortOptions[i],isDescending=sortOption.sort==="desc",valueA=this.getValue(nodeA,sortOption.column),valueB=this.getValue(nodeB,sortOption.column);let comparatorResult;const providedComparator=this.getComparator(sortOption,nodeA);if(providedComparator?comparatorResult=providedComparator(valueA,valueB,nodeA,nodeB,isDescending):comparatorResult=_defaultComparator(valueA,valueB,this.isAccentedSort),!isNaN(comparatorResult)&&comparatorResult!==0)return sortOption.sort==="asc"?comparatorResult:comparatorResult*-1}return sortedNodeA.currentPos-sortedNodeB.currentPos}getComparator(sortOption,rowNode){const column=sortOption.column,comparatorOnCol=column.getColDef().comparator;if(comparatorOnCol!=null)return comparatorOnCol;if(!column.getColDef().showRowGroup)return;const groupLeafField=!rowNode.group&&column.getColDef().field;if(!groupLeafField)return;const primaryColumn=this.beans.colModel.getColDefCol(groupLeafField);if(primaryColumn)return primaryColumn.getColDef().comparator}getValue(node,column){var _a238,_b2;const{valueSvc,colModel,showRowGroupCols,gos}=this.beans;if(!this.primaryColumnsSortGroups)return valueSvc.getValue(column,node,!1);if(node.rowGroupColumn===column){if(_isGroupUseEntireRow(gos,colModel.isPivotActive())){const leafChild=(_a238=node.allLeafChildren)==null?void 0:_a238[0];return leafChild?valueSvc.getValue(column,leafChild,!1):void 0}const displayCol=showRowGroupCols==null?void 0:showRowGroupCols.getShowRowGroupCol(column.getId());return displayCol?(_b2=node.groupData)==null?void 0:_b2[displayCol.getId()]:void 0}if(!(node.group&&column.getColDef().showRowGroup))return valueSvc.getValue(column,node,!1)}},__name(_a137,"RowNodeSorter"),_a137);function onSortChanged(beans){var _a238;(_a238=beans.sortSvc)==null||_a238.onSortChanged("api")}__name(onSortChanged,"onSortChanged");var makeIconParams=__name((dataRefSuffix,classSuffix)=>({tag:"span",ref:`eSort${dataRefSuffix}`,cls:`ag-sort-indicator-icon ag-sort-${classSuffix} ag-hidden`,attrs:{"aria-hidden":"true"}}),"makeIconParams"),SortIndicatorElement={tag:"span",cls:"ag-sort-indicator-container",children:[makeIconParams("Order","order"),makeIconParams("Asc","ascending-icon"),makeIconParams("Desc","descending-icon"),makeIconParams("Mixed","mixed-icon"),makeIconParams("None","none-icon")]},_a138,SortIndicatorComp=(_a138=class extends Component{constructor(skipTemplate){super(),this.eSortOrder=RefPlaceholder,this.eSortAsc=RefPlaceholder,this.eSortDesc=RefPlaceholder,this.eSortMixed=RefPlaceholder,this.eSortNone=RefPlaceholder,skipTemplate||this.setTemplate(SortIndicatorElement)}attachCustomElements(eSortOrder,eSortAsc,eSortDesc,eSortMixed,eSortNone){this.eSortOrder=eSortOrder,this.eSortAsc=eSortAsc,this.eSortDesc=eSortDesc,this.eSortMixed=eSortMixed,this.eSortNone=eSortNone}setupSort(column,suppressOrder=!1){if(this.column=column,this.suppressOrder=suppressOrder,this.setupMultiSortIndicator(),!column.isSortable()&&!column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,column),this.addInIcon("sortDescending",this.eSortDesc,column),this.addInIcon("sortUnSort",this.eSortNone,column);const updateIcons=this.updateIcons.bind(this),sortUpdated=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",updateIcons),this.addManagedEventListeners({newColumnsLoaded:updateIcons,sortChanged:sortUpdated,columnRowGroupChanged:sortUpdated}),this.onSortChanged()}addInIcon(iconName,eParent,column){if(eParent==null)return;const eIcon=_createIconNoSpan(iconName,this.beans,column);eIcon&&eParent.appendChild(eIcon)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc,eSortDesc,eSortNone,column,gos,beans}=this,sortDirection=beans.sortSvc.getDisplaySortForColumn(column);if(eSortAsc&&_setDisplayed(eSortAsc,sortDirection==="asc",{skipAriaHidden:!0}),eSortDesc&&_setDisplayed(eSortDesc,sortDirection==="desc",{skipAriaHidden:!0}),eSortNone){const alwaysHideNoSort=!column.getColDef().unSortIcon&&!gos.get("unSortIcon"),isNone=sortDirection==null;_setDisplayed(eSortNone,!alwaysHideNoSort&&isNone,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed,column,gos}=this;this.addInIcon("sortUnSort",eSortMixed,column);const isColumnShowingRowGroup=column.getColDef().showRowGroup;_isColumnsSortingCoupledToGroup(gos)&&isColumnShowingRowGroup&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed,beans,column}=this;if(eSortMixed){const isMixedSort=beans.sortSvc.getDisplaySortForColumn(column)==="mixed";_setDisplayed(eSortMixed,isMixedSort,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder,column,beans:{sortSvc}}=this;if(!eSortOrder)return;const allColumnsWithSorting=sortSvc.getColumnsWithSortingOrdered(),indexThisCol=sortSvc.getDisplaySortIndexForColumn(column)??-1,moreThanOneColSorting=allColumnsWithSorting.some(col=>sortSvc.getDisplaySortIndexForColumn(col)??!1),showIndex=indexThisCol>=0&&moreThanOneColSorting;_setDisplayed(eSortOrder,showIndex,{skipAriaHidden:!0}),indexThisCol>=0?eSortOrder.textContent=(indexThisCol+1).toString():_clearElement(eSortOrder)}},__name(_a138,"SortIndicatorComp"),_a138),SortIndicatorSelector={selector:"AG-SORT-INDICATOR",component:SortIndicatorComp},DEFAULT_SORTING_ORDER=["asc","desc",null],_a139,SortService=(_a139=class extends BeanStub{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(column,multiSort,source){const nextDirection=this.getNextSortDirection(column);this.setSortForColumn(column,nextDirection,multiSort,source)}progressSortFromEvent(column,event){const multiSort=this.gos.get("multiSortKey")==="ctrl"?event.ctrlKey||event.metaKey:event.shiftKey;this.progressSort(column,multiSort,"uiColumnSorted")}setSortForColumn(column,sort,multiSort,source){var _a238;sort!=="asc"&&sort!=="desc"&&(sort=null);const{gos,showRowGroupCols}=this.beans,isColumnsSortingCoupledToGroup=_isColumnsSortingCoupledToGroup(gos);let columnsToUpdate=[column];if(isColumnsSortingCoupledToGroup&&column.getColDef().showRowGroup){const rowGroupColumns=(_a238=showRowGroupCols==null?void 0:showRowGroupCols.getSourceColumnsForGroupColumn)==null?void 0:_a238.call(showRowGroupCols,column),sortableRowGroupColumns=rowGroupColumns==null?void 0:rowGroupColumns.filter(col=>col.isSortable());sortableRowGroupColumns&&(columnsToUpdate=[column,...sortableRowGroupColumns])}columnsToUpdate.forEach(col=>this.setColSort(col,sort,source));const doingMultiSort=(multiSort||gos.get("alwaysMultiSort"))&&!gos.get("suppressMultiSort"),updatedColumns=[];if(!doingMultiSort){const clearedColumns=this.clearSortBarTheseColumns(columnsToUpdate,source);updatedColumns.push(...clearedColumns)}this.updateSortIndex(column),updatedColumns.push(...columnsToUpdate),this.dispatchSortChangedEvents(source,updatedColumns)}updateSortIndex(lastColToChange){const{gos,colModel,showRowGroupCols}=this.beans,isCoupled=_isColumnsSortingCoupledToGroup(gos),groupParent=showRowGroupCols==null?void 0:showRowGroupCols.getShowRowGroupCol(lastColToChange.getId()),lastSortIndexCol=isCoupled&&groupParent||lastColToChange,allSortedCols=this.getColumnsWithSortingOrdered();colModel.forAllCols(col=>this.setColSortIndex(col,null));const allSortedColsWithoutChangesOrGroups=allSortedCols.filter(col=>isCoupled&&col.getColDef().showRowGroup?!1:col!==lastSortIndexCol);(lastSortIndexCol.getSort()?[...allSortedColsWithoutChangesOrGroups,lastSortIndexCol]:allSortedColsWithoutChangesOrGroups).forEach((col,idx)=>this.setColSortIndex(col,idx))}onSortChanged(source,columns){this.dispatchSortChangedEvents(source,columns)}isSortActive(){let isSorting=!1;return this.beans.colModel.forAllCols(col=>{col.getSort()&&(isSorting=!0)}),isSorting}dispatchSortChangedEvents(source,columns){const event={type:"sortChanged",source};columns&&(event.columns=columns),this.eventSvc.dispatchEvent(event)}clearSortBarTheseColumns(columnsToSkip,source){const clearedColumns=[];return this.beans.colModel.forAllCols(columnToClear=>{columnsToSkip.includes(columnToClear)||(columnToClear.getSort()&&clearedColumns.push(columnToClear),this.setColSort(columnToClear,void 0,source))}),clearedColumns}getNextSortDirection(column){const sortingOrder=column.getColDef().sortingOrder??this.gos.get("sortingOrder")??DEFAULT_SORTING_ORDER,currentIndex=sortingOrder.indexOf(column.getSort()),notInArray=currentIndex<0,lastItemInArray=currentIndex==sortingOrder.length-1;return notInArray||lastItemInArray?sortingOrder[0]:sortingOrder[currentIndex+1]}getIndexedSortMap(){const{gos,colModel,showRowGroupCols,rowGroupColsSvc}=this.beans;let allSortedCols=[];if(colModel.forAllCols(col=>{col.getSort()&&allSortedCols.push(col)}),colModel.isPivotMode()){const isSortingLinked=_isColumnsSortingCoupledToGroup(gos);allSortedCols=allSortedCols.filter(col=>{const isAggregated=!!col.getAggFunc(),isSecondary=!col.isPrimary(),isGroup=isSortingLinked?showRowGroupCols==null?void 0:showRowGroupCols.getShowRowGroupCol(col.getId()):col.getColDef().showRowGroup;return isAggregated||isSecondary||isGroup})}const sortedRowGroupCols=(rowGroupColsSvc==null?void 0:rowGroupColsSvc.columns.filter(col=>!!col.getSort()))??[],allColsIndexes={};allSortedCols.forEach((col,index)=>allColsIndexes[col.getId()]=index),allSortedCols.sort((a,b)=>{const iA=a.getSortIndex(),iB=b.getSortIndex();if(iA!=null&&iB!=null)return iA-iB;if(iA==null&&iB==null){const posA=allColsIndexes[a.getId()],posB=allColsIndexes[b.getId()];return posA>posB?1:-1}else return iB==null?-1:1});const isSortLinked=_isColumnsSortingCoupledToGroup(gos)&&!!sortedRowGroupCols.length;isSortLinked&&(allSortedCols=[...new Set(allSortedCols.map(col=>(showRowGroupCols==null?void 0:showRowGroupCols.getShowRowGroupCol(col.getId()))??col))]);const indexMap=new Map;return allSortedCols.forEach((col,idx)=>indexMap.set(col,idx)),isSortLinked&&sortedRowGroupCols.forEach(col=>{const groupDisplayCol=showRowGroupCols.getShowRowGroupCol(col.getId());indexMap.set(col,indexMap.get(groupDisplayCol))}),indexMap}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,idx1],[,idx2])=>idx1-idx2).map(([col])=>col)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(column=>column.getSort()).map(column=>({sort:column.getSort(),colId:column.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(column=>column.getSort()).map(column=>({sort:column.getSort(),column}))}canColumnDisplayMixedSort(column){const isColumnSortCouplingActive=_isColumnsSortingCoupledToGroup(this.gos),isGroupDisplayColumn=!!column.getColDef().showRowGroup;return isColumnSortCouplingActive&&isGroupDisplayColumn}getDisplaySortForColumn(column){var _a238;const linkedColumns=(_a238=this.beans.showRowGroupCols)==null?void 0:_a238.getSourceColumnsForGroupColumn(column);if(!this.canColumnDisplayMixedSort(column)||!(linkedColumns!=null&&linkedColumns.length))return column.getSort();const sortableColumns=column.getColDef().field!=null||!!column.getColDef().valueGetter?[column,...linkedColumns]:linkedColumns,firstSort=sortableColumns[0].getSort();return sortableColumns.every(col=>col.getSort()==firstSort)?firstSort:"mixed"}getDisplaySortIndexForColumn(column){return this.getIndexedSortMap().get(column)}setupHeader(comp,column,clickElement){let lastMovingChanged=0;comp.addManagedListeners(column,{movingChanged:__name(()=>{lastMovingChanged=Date.now()},"movingChanged")}),clickElement&&comp.addManagedElementListeners(clickElement,{click:__name(event=>{const moving=column.isMoving(),movedRecently=Date.now()-lastMovingChanged<50;moving||movedRecently||this.progressSortFromEvent(column,event)},"click")});const onSortingChanged=__name(()=>{var _a238;const sort=column.getSort();if(comp.addOrRemoveCssClass("ag-header-cell-sorted-asc",sort==="asc"),comp.addOrRemoveCssClass("ag-header-cell-sorted-desc",sort==="desc"),comp.addOrRemoveCssClass("ag-header-cell-sorted-none",!sort),column.getColDef().showRowGroup){const sourceColumns=(_a238=this.beans.showRowGroupCols)==null?void 0:_a238.getSourceColumnsForGroupColumn(column),isMultiSorting=!(sourceColumns==null?void 0:sourceColumns.every(sourceCol=>column.getSort()==sourceCol.getSort()));comp.addOrRemoveCssClass("ag-header-cell-sorted-mixed",isMultiSorting)}},"onSortingChanged");comp.addManagedEventListeners({sortChanged:onSortingChanged,columnRowGroupChanged:onSortingChanged})}initCol(column){const{sort,initialSort,sortIndex,initialSortIndex}=column.colDef;sort!==void 0?(sort==="asc"||sort==="desc")&&(column.sort=sort):(initialSort==="asc"||initialSort==="desc")&&(column.sort=initialSort),sortIndex!==void 0?sortIndex!==null&&(column.sortIndex=sortIndex):initialSortIndex!==null&&(column.sortIndex=initialSortIndex)}updateColSort(column,sort,source){sort!==void 0&&(sort==="desc"||sort==="asc"?this.setColSort(column,sort,source):this.setColSort(column,void 0,source))}setColSort(column,sort,source){column.sort!==sort&&(column.sort=sort,column.dispatchColEvent("sortChanged",source)),column.dispatchStateUpdatedEvent("sort")}setColSortIndex(column,sortOrder){column.sortIndex=sortOrder,column.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(skipTemplate){return new SortIndicatorComp(skipTemplate)}getSortIndicatorSelector(){return SortIndicatorSelector}},__name(_a139,"SortService"),_a139),SortModule={moduleName:"Sort",version:VERSION,beans:[SortService,RowNodeSorter],apiFunctions:{onSortChanged},userComponents:{agSortIndicator:SortIndicatorComp},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},_a140,SyncService=(_a140=class extends BeanStub{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",event=>this.setColumnDefs(event))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const columnDefs=this.gos.get("columnDefs");columnDefs?this.setColumnsAndData(columnDefs):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(columnDefs){const{colModel,rowModel}=this.beans;colModel.setColumnDefs(columnDefs??[],"gridInitializing"),rowModel.start()}gridReady(){const{eventSvc,gos}=this;eventSvc.dispatchEvent({type:"gridReady"}),_logIfDebug(gos,`initialised successfully, enterprise = ${gos.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(event){const columnDefs=this.gos.get("columnDefs");if(columnDefs){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(columnDefs);return}this.beans.colModel.setColumnDefs(columnDefs,_convertColumnEventSourceType(event.source))}}},__name(_a140,"SyncService"),_a140);function expireValueCache(beans){var _a238;(_a238=beans.valueCache)==null||_a238.expire()}__name(expireValueCache,"expireValueCache");function getCellValue(beans,params){const{colKey,rowNode,useFormatter}=params,column=beans.colModel.getColDefCol(colKey)??beans.colModel.getCol(colKey);if(_missing(column))return null;const value=beans.valueSvc.getValueForDisplay(column,rowNode);return useFormatter?beans.valueSvc.formatValue(column,rowNode,value)??_escapeString(value,!0):value}__name(getCellValue,"getCellValue");var _a141,ChangedPath=(_a141=class{constructor(keepingColumns,rootNode){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=keepingColumns,this.pathRoot={rowNode:rootNode,children:null},this.mapToItems[rootNode.id]=this.pathRoot}depthFirstSearchChangedPath(pathItem,callback){const{rowNode,children}=pathItem;if(children)for(let i=0;i<children.length;++i)this.depthFirstSearchChangedPath(children[i],callback);callback(rowNode)}depthFirstSearchEverything(rowNode,callback,traverseEverything){const childrenAfterGroup=rowNode.childrenAfterGroup;if(childrenAfterGroup)for(let i=0,len=childrenAfterGroup.length;i<len;++i){const childNode=childrenAfterGroup[i];childNode.childrenAfterGroup?this.depthFirstSearchEverything(childNode,callback,traverseEverything):traverseEverything&&callback(childNode)}callback(rowNode)}forEachChangedNodeDepthFirst(callback,traverseLeafNodes=!1,includeUnchangedNodes=!1){this.active&&!includeUnchangedNodes?this.depthFirstSearchChangedPath(this.pathRoot,callback):this.depthFirstSearchEverything(this.pathRoot.rowNode,callback,traverseLeafNodes)}executeFromRootNode(callback){callback(this.pathRoot.rowNode)}createPathItems(rowNode){let pointer=rowNode,newEntryCount=0;for(;!this.mapToItems[pointer.id];){const newEntry={rowNode:pointer,children:null};this.mapToItems[pointer.id]=newEntry,newEntryCount++,pointer=pointer.parent}return newEntryCount}populateColumnsMap(rowNode,columns){if(!this.keepingColumns||!columns)return;let pointer=rowNode;for(;pointer;)this.nodeIdsToColumns[pointer.id]||(this.nodeIdsToColumns[pointer.id]={}),columns.forEach(col=>this.nodeIdsToColumns[pointer.id][col.getId()]=!0),pointer=pointer.parent}linkPathItems(rowNode,newEntryCount){let pointer=rowNode;for(let i=0;i<newEntryCount;i++){const thisItem=this.mapToItems[pointer.id],parentItem=this.mapToItems[pointer.parent.id];parentItem.children||(parentItem.children=[]),parentItem.children.push(thisItem),pointer=pointer.parent}}addParentNode(rowNode,columns){if(!rowNode||rowNode.isRowPinned())return;const newEntryCount=this.createPathItems(rowNode);this.linkPathItems(rowNode,newEntryCount),this.populateColumnsMap(rowNode,columns)}canSkip(rowNode){return this.active&&!this.mapToItems[rowNode.id]}getValueColumnsForNode(rowNode,valueColumns){if(!this.keepingColumns)return valueColumns;const colsForThisNode=this.nodeIdsToColumns[rowNode.id];return valueColumns.filter(col=>colsForThisNode[col.getId()])}getNotValueColumnsForNode(rowNode,valueColumns){if(!this.keepingColumns)return null;const colsForThisNode=this.nodeIdsToColumns[rowNode.id];return valueColumns.filter(col=>!colsForThisNode[col.getId()])}},__name(_a141,"ChangedPath"),_a141),SOURCE_PASTE="paste",_a142,ChangeDetectionService=(_a142=class extends BeanStub{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos,rowModel}=this.beans;_isClientSideRowModel(gos)&&(this.clientSideRowModel=rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(event){const{gos,rowRenderer}=this.beans;if(event.source===SOURCE_PASTE||gos.get("suppressChangeDetection"))return;const rowNode=event.node,nodesToRefresh=[rowNode],clientSideRowModel=this.clientSideRowModel,rootNode=clientSideRowModel==null?void 0:clientSideRowModel.rootNode;if(rootNode&&!rowNode.isRowPinned()){const onlyChangedColumns=gos.get("aggregateOnlyChangedColumns"),changedPath=new ChangedPath(onlyChangedColumns,rootNode);changedPath.addParentNode(rowNode.parent,[event.column]),clientSideRowModel.doAggregate(changedPath),changedPath.forEachChangedNodeDepthFirst(rowNode2=>{nodesToRefresh.push(rowNode2),rowNode2.sibling&&nodesToRefresh.push(rowNode2.sibling)})}rowRenderer.refreshCells({rowNodes:nodesToRefresh})}},__name(_a142,"ChangeDetectionService"),_a142),_a143,ExpressionService=(_a143=class extends BeanStub{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(expression,params){if(typeof expression=="string")return this.evaluateExpression(expression,params);_error(15,{expression})}evaluateExpression(expression,params){try{return this.createExpressionFunction(expression)(params.value,params.context,params.oldValue,params.newValue,params.value,params.node,params.data,params.colDef,params.rowIndex,params.api,params.getValue,params.column,params.columnGroup)}catch(e){return _error(16,{expression,params,e}),null}}createExpressionFunction(expression){const expressionToFunctionCache=this.cache;if(expressionToFunctionCache[expression])return expressionToFunctionCache[expression];const functionBody=this.createFunctionBody(expression),theFunction=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",functionBody);return expressionToFunctionCache[expression]=theFunction,theFunction}createFunctionBody(expression){return expression.indexOf("return")>=0?expression:"return "+expression+";"}},__name(_a143,"ExpressionService"),_a143),_a144,ValueCache=(_a144=class extends BeanStub{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const gos=this.gos;this.active=gos.get("valueCache"),this.neverExpires=gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(rowNode,colId,value){if(this.active){const cacheVersion=this.cacheVersion;rowNode.__cacheVersion!==cacheVersion&&(rowNode.__cacheVersion=cacheVersion,rowNode.__cacheData={}),rowNode.__cacheData[colId]=value}}getValue(rowNode,colId){if(!(!this.active||rowNode.__cacheVersion!==this.cacheVersion))return rowNode.__cacheData[colId]}},__name(_a144,"ValueCache"),_a144),ValueCacheModule={moduleName:"ValueCache",version:VERSION,beans:[ValueCache],apiFunctions:{expireValueCache}},ExpressionModule={moduleName:"Expression",version:VERSION,beans:[ExpressionService]},ChangeDetectionModule={moduleName:"ChangeDetection",version:VERSION,beans:[ChangeDetectionService]},CellApiModule={moduleName:"CellApi",version:VERSION,apiFunctions:{getCellValue}},_a145,ValueService=(_a145=class extends BeanStub{constructor(){super(...arguments),this.beanName="valueSvc",this.initialised=!1,this.isSsrm=!1}wireBeans(beans){this.expressionSvc=beans.expressionSvc,this.colModel=beans.colModel,this.valueCache=beans.valueCache,this.dataTypeSvc=beans.dataTypeSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=_isServerSideRowModel(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const listener=__name(event=>this.callColumnCellValueChangedHandler(event),"listener");this.eventSvc.addEventListener("cellValueChanged",listener,!0),this.addDestroyFunc(()=>this.eventSvc.removeEventListener("cellValueChanged",listener,!0)),this.addManagedPropertyListener("treeData",propChange=>this.isTreeData=propChange.currentValue)}getValueForDisplay(column,node){const rowGroupColId=column.getColDef().showRowGroup;if(rowGroupColId!=null){if(typeof rowGroupColId=="string"){const hideOpenParentsNode=this.getDisplayedNode(node,column,!0);if(hideOpenParentsNode)return this.getValue(column,hideOpenParentsNode)}const value=this.getValue(column,node);if(value==null){const displayedNode=this.getDisplayedNode(node,column);if(displayedNode)return this.getValue(column,displayedNode)}return value}const isPivotLeaf=node.leafGroup&&this.colModel.isPivotMode(),isOpenedGroup=node.group&&node.expanded&&!node.footer&&!isPivotLeaf,groupShowsAggData=this.gos.get("groupSuppressBlankHeader")||!node.sibling,ignoreAggData=isOpenedGroup&&!groupShowsAggData;return this.getValue(column,node,ignoreAggData)}getValue(column,rowNode,ignoreAggData=!1){var _a238;if(this.initialised||this.init(),!rowNode)return;const colDef=column.getColDef(),field=colDef.field,colId=column.getColId(),data=rowNode.data;let result;const rowGroupColId=colDef.showRowGroup;if(typeof rowGroupColId=="string"&&(((_a238=this.beans.rowGroupColsSvc)==null?void 0:_a238.getColumnIndex(rowGroupColId))??-1)>rowNode.level)return null;const groupDataExists=rowNode.groupData&&rowNode.groupData[colId]!==void 0,aggDataExists=!ignoreAggData&&rowNode.aggData&&rowNode.aggData[colId]!==void 0,ignoreSsrmAggData=this.isSsrm&&ignoreAggData&&!!column.getColDef().aggFunc,ssrmFooterGroupCol=this.isSsrm&&rowNode.footer&&rowNode.field&&(column.getColDef().showRowGroup===!0||column.getColDef().showRowGroup===rowNode.field);if(this.isTreeData&&aggDataExists?result=rowNode.aggData[colId]:this.isTreeData&&colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):this.isTreeData&&field&&data?result=_getValueUsingField(data,field,column.isFieldContainsDots()):groupDataExists?result=rowNode.groupData[colId]:aggDataExists?result=rowNode.aggData[colId]:colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):ssrmFooterGroupCol?result=_getValueUsingField(data,rowNode.field,column.isFieldContainsDots()):field&&data&&!ignoreSsrmAggData&&(result=_getValueUsingField(data,field,column.isFieldContainsDots())),this.cellExpressions&&typeof result=="string"&&result.indexOf("=")===0){const cellValueGetter=result.substring(1);result=this.executeValueGetter(cellValueGetter,data,column,rowNode)}return result}parseValue(column,rowNode,newValue,oldValue){var _a238;const colDef=column.getColDef(),valueParser=colDef.valueParser;if(_exists(valueParser)){const params=_addGridCommonParams(this.gos,{node:rowNode,data:rowNode==null?void 0:rowNode.data,oldValue,newValue,colDef,column});return typeof valueParser=="function"?valueParser(params):(_a238=this.expressionSvc)==null?void 0:_a238.evaluate(valueParser,params)}return newValue}getDeleteValue(column,rowNode){return _exists(column.getColDef().valueParser)?this.parseValue(column,rowNode,"",this.getValueForDisplay(column,rowNode))??null:null}formatValue(column,node,value,suppliedFormatter,useFormatterFromColumn=!0){let result=null,formatter;const colDef=column.getColDef();if(suppliedFormatter?formatter=suppliedFormatter:useFormatterFromColumn&&(formatter=colDef.valueFormatter),formatter){const params=_addGridCommonParams(this.gos,{value,node,data:node?node.data:null,colDef,column});typeof formatter=="function"?result=formatter(params):result=this.expressionSvc?this.expressionSvc.evaluate(formatter,params):null}else if(colDef.refData)return colDef.refData[value]||"";return result==null&&Array.isArray(value)&&(result=value.join(", ")),result}getDisplayedNode(node,column,onlyHideOpenParents=!1){var _a238,_b2,_c;const gos=this.gos,isGroupHideOpenParents=gos.get("groupHideOpenParents"),isShowOpenedGroupValue=gos.get("showOpenedGroup")&&!onlyHideOpenParents;if(!isGroupHideOpenParents&&!isShowOpenedGroupValue)return;const showRowGroup=column.colDef.showRowGroup;if(showRowGroup===!0)return node.group?void 0:node.parent??void 0;let pointer=node;for(;pointer&&((_a238=pointer.rowGroupColumn)==null?void 0:_a238.getId())!=showRowGroup;){const isFirstChild=pointer===((_c=(_b2=pointer.parent)==null?void 0:_b2.childrenAfterSort)==null?void 0:_c[0]);if(!isShowOpenedGroupValue&&!isFirstChild)return;pointer=pointer.parent}if(pointer!==node)return pointer??void 0}setValue(rowNode,colKey,newValue,eventSource){var _a238,_b2;const column=this.colModel.getColDefCol(colKey);if(!rowNode||!column)return!1;_missing(rowNode.data)&&(rowNode.data={});const{field,valueSetter}=column.getColDef();if(_missing(field)&&_missing(valueSetter))return _warn(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(column,newValue))return _warn(135),!1;const params=_addGridCommonParams(this.gos,{node:rowNode,data:rowNode.data,oldValue:this.getValue(column,rowNode),newValue,colDef:column.getColDef(),column});params.newValue=newValue;let valueWasDifferent;if(_exists(valueSetter)?typeof valueSetter=="function"?valueWasDifferent=valueSetter(params):valueWasDifferent=(_a238=this.expressionSvc)==null?void 0:_a238.evaluate(valueSetter,params):valueWasDifferent=this.setValueUsingField(rowNode.data,field,newValue,column.isFieldContainsDots()),valueWasDifferent===void 0&&(valueWasDifferent=!0),!valueWasDifferent)return!1;rowNode.resetQuickFilterAggregateText(),(_b2=this.valueCache)==null||_b2.onDataChanged();const savedValue=this.getValue(column,rowNode);return this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:rowNode.rowIndex,rowPinned:rowNode.rowPinned,column:params.column,colDef:params.colDef,data:rowNode.data,node:rowNode,oldValue:params.oldValue,newValue:savedValue,value:savedValue,source:eventSource}),!0}callColumnCellValueChangedHandler(event){const onCellValueChanged=event.colDef.onCellValueChanged;typeof onCellValueChanged=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{onCellValueChanged({node:event.node,data:event.data,oldValue:event.oldValue,newValue:event.newValue,colDef:event.colDef,column:event.column,api:event.api,context:event.context})})}setValueUsingField(data,field,newValue,isFieldContainsDots){if(!field)return!1;let valuesAreSame=!1;if(!isFieldContainsDots)valuesAreSame=data[field]===newValue,valuesAreSame||(data[field]=newValue);else{const fieldPieces=field.split(".");let currentObject=data;for(;fieldPieces.length>0&&currentObject;){const fieldPiece=fieldPieces.shift();fieldPieces.length===0?(valuesAreSame=currentObject[fieldPiece]===newValue,valuesAreSame||(currentObject[fieldPiece]=newValue)):currentObject=currentObject[fieldPiece]}}return!valuesAreSame}executeValueGetterWithValueCache(valueGetter,data,column,rowNode){const colId=column.getColId(),valueFromCache=this.valueCache.getValue(rowNode,colId);if(valueFromCache!==void 0)return valueFromCache;const result=this.executeValueGetterWithoutValueCache(valueGetter,data,column,rowNode);return this.valueCache.setValue(rowNode,colId,result),result}executeValueGetterWithoutValueCache(valueGetter,data,column,rowNode){var _a238;const params=_addGridCommonParams(this.gos,{data,node:rowNode,column,colDef:column.getColDef(),getValue:this.getValueCallback.bind(this,rowNode)});let result;return typeof valueGetter=="function"?result=valueGetter(params):result=(_a238=this.expressionSvc)==null?void 0:_a238.evaluate(valueGetter,params),result}getValueCallback(node,field){const otherColumn=this.colModel.getColDefCol(field);return otherColumn?this.getValue(otherColumn,node):null}getKeyForNode(col,rowNode){const value=this.getValue(col,rowNode),keyCreator=col.getColDef().keyCreator;let result=value;if(keyCreator){const keyParams=_addGridCommonParams(this.gos,{value,colDef:col.getColDef(),column:col,node:rowNode,data:rowNode.data});result=keyCreator(keyParams)}return typeof result=="string"||result==null||(result=String(result),result==="[object Object]"&&_warn(121)),result}},__name(_a145,"ValueService"),_a145),CommunityCoreModule={moduleName:"CommunityCore",version:VERSION,beans:[GridDestroyService,ApiFunctionService,Registry,UserComponentFactory,RowContainerHeightService,VisibleColsService,EventService,GridOptionsService,ColumnModel,PageBoundsService,PageBoundsListener,RowRenderer,ValueService,FocusService,Environment,ScrollVisibleService,CtrlsService,SyncService,ColumnNameService,ColumnViewportService],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId,destroy,isDestroyed,getGridOption,setGridOption,updateGridOptions},dependsOn:[DataTypeModule,ColumnMoveModule,ColumnResizeModule,SortModule,ColumnHeaderCompModule,ColumnGroupModule,ColumnGroupHeaderCompModule,OverlayModule,ChangeDetectionModule,AnimationFrameModule,KeyboardNavigationModule,PinnedColumnModule,AriaModule,TouchModule,CellRendererFunctionModule,ColumnFlexModule,ExpressionModule]},_a146,_GlobalGridOptions=(_a146=class{static applyGlobalGridOptions(providedOptions){if(!_a146.gridOptions)return{...providedOptions};let mergedGridOps={};return _mergeDeep(mergedGridOps,_a146.gridOptions,!0,!0),_a146.mergeStrategy==="deep"?_mergeDeep(mergedGridOps,providedOptions,!0,!0):mergedGridOps={...mergedGridOps,...providedOptions},_a146.gridOptions.context&&(mergedGridOps.context=_a146.gridOptions.context),providedOptions.context&&(_a146.mergeStrategy==="deep"&&mergedGridOps.context&&_mergeDeep(providedOptions.context,mergedGridOps.context,!0,!0),mergedGridOps.context=providedOptions.context),mergedGridOps}},__name(_a146,"_GlobalGridOptions"),_a146);_GlobalGridOptions.gridOptions=void 0;_GlobalGridOptions.mergeStrategy="shallow";var GlobalGridOptions=_GlobalGridOptions;function _getGlobalGridOption(gridOption){var _a238;return(_a238=GlobalGridOptions.gridOptions)==null?void 0:_a238[gridOption]}__name(_getGlobalGridOption,"_getGlobalGridOption");var nextGridId=1,_a147,GridCoreCreator=(_a147=class{create(eGridDiv,providedOptions,createUi,acceptChanges,params,destroyCallback){const gridOptions=GlobalGridOptions.applyGlobalGridOptions(providedOptions),gridId=gridOptions.gridId??String(nextGridId++),rowModelType=gridOptions.rowModelType??"clientSide",registeredModules=this.getRegisteredModules(params,gridId,rowModelType),beanClasses=this.createBeansList(rowModelType,registeredModules,gridId),providedBeanInstances=this.createProvidedBeans(eGridDiv,gridOptions,params);if(!beanClasses)return;const contextParams={providedBeanInstances,beanClasses,gridId,beanInitComparator:gridBeanInitComparator,beanDestroyComparator:gridBeanDestroyComparator,derivedBeans:[createGridApi],destroyCallback},context=new Context(contextParams);return this.registerModuleFeatures(context,registeredModules),createUi(context),context.getBean("syncSvc").start(),acceptChanges&&acceptChanges(context),context.getBean("gridApi")}getRegisteredModules(params,gridId,rowModelType){var _a238;return _registerModule(CommunityCoreModule,void 0),(_a238=params==null?void 0:params.modules)==null||_a238.forEach(m=>_registerModule(m,gridId)),_getRegisteredModules(gridId,rowModelType)}registerModuleFeatures(context,registeredModules){const registry=context.getBean("registry"),apiFunctionSvc=context.getBean("apiFunctionSvc");registeredModules.forEach(module=>{registry.registerModule(module);const apiFunctions=module.apiFunctions;apiFunctions&&Object.keys(apiFunctions).forEach(name=>{apiFunctionSvc==null||apiFunctionSvc.addFunction(name,apiFunctions[name])})})}createProvidedBeans(eGridDiv,gridOptions,params){let frameworkOverrides=params?params.frameworkOverrides:null;_missing(frameworkOverrides)&&(frameworkOverrides=new VanillaFrameworkOverrides);const seed={gridOptions,eGridDiv,globalListener:params?params.globalListener:null,globalSyncListener:params?params.globalSyncListener:null,frameworkOverrides};return params&&params.providedBeanInstances&&Object.assign(seed,params.providedBeanInstances),seed}createBeansList(rowModelType,registeredModules,gridId){const rowModuleModelName={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"}[rowModelType];if(!rowModuleModelName){_logPreInitErr(201,{rowModelType},`Unknown rowModelType ${rowModelType}.`);return}if(!_isModuleRegistered(rowModuleModelName,gridId,rowModelType)){_logPreInitErr(200,{reasonOrId:`rowModelType = '${rowModelType}'`,moduleName:rowModuleModelName,gridScoped:_areModulesGridScoped(),gridId,rowModelType},`Missing module ${rowModuleModelName}Module for rowModelType ${rowModelType}. 
If upgrading from before v33, see ${baseDocLink}/upgrading-to-ag-grid-33/#changes-to-modules/`);return}const beans=new Set;return registeredModules.forEach(module=>{var _a238;return(_a238=module.beans)==null?void 0:_a238.forEach(bean=>beans.add(bean))}),Array.from(beans)}},__name(_a147,"GridCoreCreator"),_a147);function _getClientSideRowModel(beans){const rowModel=beans.rowModel;return rowModel.getType()==="clientSide"?rowModel:void 0}__name(_getClientSideRowModel,"_getClientSideRowModel");function _getInfiniteRowModel(beans){const rowModel=beans.rowModel;return rowModel.getType()==="infinite"?rowModel:void 0}__name(_getInfiniteRowModel,"_getInfiniteRowModel");function _getServerSideRowModel(beans){const rowModel=beans.rowModel;return rowModel.getType()==="serverSide"?rowModel:void 0}__name(_getServerSideRowModel,"_getServerSideRowModel");var _PUBLIC_EVENTS=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged"],_INTERNAL_EVENTS=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged","beforeRefreshModel","rowNodeDataChanged"],_ALL_EVENTS=[..._PUBLIC_EVENTS,..._INTERNAL_EVENTS],_a148,LocaleService=(_a148=class extends BeanStub{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const gos=this.gos,getLocaleText=gos.getCallback("getLocaleText");if(getLocaleText)return(key,defaultValue,variableValues)=>getLocaleText({key,defaultValue,variableValues});const localeText=gos.get("localeText");return(key,defaultValue,variableValues)=>{let localisedText=localeText&&localeText[key];if(localisedText&&variableValues&&variableValues.length){let found=0;for(;!(found>=variableValues.length||localisedText.indexOf("${variable}")===-1);)localisedText=localisedText.replace("${variable}",variableValues[found++])}return localisedText??defaultValue}}},__name(_a148,"LocaleService"),_a148),STRING_GRID_OPTIONS=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce"],OBJECT_GRID_OPTIONS=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions"],ARRAY_GRID_OPTIONS=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],_NUMBER_GRID_OPTIONS=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],OTHER_GRID_OPTIONS=["theme","rowSelection"],_BOOLEAN_MIXED_GRID_OPTIONS=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild"],_BOOLEAN_GRID_OPTIONS=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],_FUNCTION_GRID_OPTIONS=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter"],_ALL_GRID_OPTIONS=[...ARRAY_GRID_OPTIONS,...OBJECT_GRID_OPTIONS,...STRING_GRID_OPTIONS,..._NUMBER_GRID_OPTIONS,..._FUNCTION_GRID_OPTIONS,..._BOOLEAN_GRID_OPTIONS,..._BOOLEAN_MIXED_GRID_OPTIONS,...OTHER_GRID_OPTIONS],_a149,BaseComponentWrapper=(_a149=class{wrap(OriginalConstructor,mandatoryMethods,optionalMethods,componentType){const wrapper=this.createWrapper(OriginalConstructor,componentType);return mandatoryMethods==null||mandatoryMethods.forEach(methodName=>{this.createMethod(wrapper,methodName,!0)}),optionalMethods==null||optionalMethods.forEach(methodName=>{this.createMethod(wrapper,methodName,!1)}),wrapper}createMethod(wrapper,methodName,mandatory){wrapper.addMethod(methodName,this.createMethodProxy(wrapper,methodName,mandatory))}createMethodProxy(wrapper,methodName,mandatory){return function(){return wrapper.hasMethod(methodName)?wrapper.callMethod(methodName,arguments):(mandatory&&_warn(49,{methodName}),null)}}},__name(_a149,"BaseComponentWrapper"),_a149),TooltipComponentElement={tag:"div",cls:"ag-tooltip"},_a150,TooltipComponent2=(_a150=class extends PopupComponent{constructor(){super(TooltipComponentElement)}init(params){const{value}=params;this.getGui().textContent=_escapeString(value,!0)}},__name(_a150,"TooltipComponent2"),_a150);function _fuzzySuggestions(params){const{inputValue,allSuggestions,hideIrrelevant,filterByPercentageOfBestMatch}=params;let thisSuggestions=allSuggestions.map((text,idx)=>({value:text,relevance:hybridFuzzySearch(inputValue,text),idx}));if(thisSuggestions.sort((a,b)=>b.relevance-a.relevance),hideIrrelevant&&(thisSuggestions=thisSuggestions.filter(suggestion=>suggestion.relevance!==0)),thisSuggestions.length>0&&filterByPercentageOfBestMatch&&filterByPercentageOfBestMatch>0){const limit=thisSuggestions[0].relevance*filterByPercentageOfBestMatch;thisSuggestions=thisSuggestions.filter(suggestion=>limit-suggestion.relevance<0)}const values=[],indices=[];for(const suggestion of thisSuggestions)values.push(suggestion.value),indices.push(suggestion.idx);return{values,indices}}__name(_fuzzySuggestions,"_fuzzySuggestions");function hybridFuzzySearch(str1,str2){if(str1===str2)return 1e3;const len1=str1.length,len2=str2.length;if(len1===0||len2===0)return 0;const str1Lower=str1.toLocaleLowerCase(),str2Lower=str2.toLocaleLowerCase(),str2PositionInStr1=str2Lower.indexOf(str1Lower);if(str2PositionInStr1!==-1)return 980-str2PositionInStr1*2;if([...str1Lower].filter(char=>str2Lower.includes(char)).length===0)return 0;let previousRow=Array.from({length:len2+1},(_,i)=>i);for(let i=0;i<len1;i++){const currentRow=[i+1];for(let j=0;j<len2;j++){const insertions=previousRow[j+1]+1,deletions=currentRow[j]+1;let substitutions=previousRow[j]+(str1[i]!==str2[j]?1:0);len2>10&&j>len2/2&&(substitutions+=1),i>0&&j>0&&str1[i-1]===str2[j-1]&&(substitutions-=4),currentRow.push(Math.min(insertions,deletions,substitutions))}previousRow=currentRow}const distance=Math.round(previousRow[len2]),score=Math.max(1,1e3-distance*30);return Math.max(1,score)}__name(hybridFuzzySearch,"hybridFuzzySearch");function _formatNumberCommas(value,getLocaleTextFunc){if(typeof value!="number")return"";const localeTextFunc=getLocaleTextFunc(),thousandSeparator=localeTextFunc("thousandSeparator",","),decimalSeparator=localeTextFunc("decimalSeparator",".");return value.toString().replace(".",decimalSeparator).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${thousandSeparator}`)}__name(_formatNumberCommas,"_formatNumberCommas");var _a151,BaseCreator=(_a151=class extends BeanStub{getFileName(fileName){const extension=this.getDefaultFileExtension();return(fileName==null||!fileName.length)&&(fileName=this.getDefaultFileName()),fileName.indexOf(".")===-1?`${fileName}.${extension}`:fileName}getData(params){const serializingSession=this.createSerializingSession(params);return this.beans.gridSerializer.serialize(serializingSession,params)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},__name(_a151,"BaseCreator"),_a151),_a152,BaseGridSerializingSession=(_a152=class{constructor(config){this.groupColumns=[];const{colModel,rowGroupColsSvc,colNames,valueSvc,gos,processCellCallback,processHeaderCallback,processGroupHeaderCallback,processRowGroupCallback}=config;this.colModel=colModel,this.rowGroupColsSvc=rowGroupColsSvc,this.colNames=colNames,this.valueSvc=valueSvc,this.gos=gos,this.processCellCallback=processCellCallback,this.processHeaderCallback=processHeaderCallback,this.processGroupHeaderCallback=processGroupHeaderCallback,this.processRowGroupCallback=processRowGroupCallback}prepare(columnsToExport){this.groupColumns=columnsToExport.filter(col=>!!col.getColDef().showRowGroup)}extractHeaderValue(column){return this.getHeaderName(this.processHeaderCallback,column)??""}extractRowCellValue(column,index,accumulatedRowIndex,type,node){const value=(!this.gos.get("groupHideOpenParents")||node.footer)&&this.shouldRenderGroupSummaryCell(node,column,index)?this.createValueForGroupNode(column,node):this.valueSvc.getValueForDisplay(column,node);return this.processCell({accumulatedRowIndex,rowNode:node,column,value,processCellCallback:this.processCellCallback,type})}shouldRenderGroupSummaryCell(node,column,currentColumnIndex){var _a238,_b2;if(!(node.group&&!this.gos.get("treeData")))return!1;if(this.groupColumns.indexOf(column)!==-1){if(((_a238=node.groupData)==null?void 0:_a238[column.getId()])!==void 0||_isServerSideRowModel(this.gos)&&node.group)return!0;if(node.footer&&node.level===-1){const colDef=column.getColDef();return colDef==null||colDef.showRowGroup===!0||colDef.showRowGroup===((_b2=this.rowGroupColsSvc)==null?void 0:_b2.columns[0].getId())}}const isGroupUseEntireRow=_isGroupUseEntireRow(this.gos,this.colModel.isPivotMode());return currentColumnIndex===0&&isGroupUseEntireRow}getHeaderName(callback,column){return callback?callback(_addGridCommonParams(this.gos,{column})):this.colNames.getDisplayNameForColumn(column,"csv",!0)}createValueForGroupNode(column,node){if(this.processRowGroupCallback)return this.processRowGroupCallback(_addGridCommonParams(this.gos,{column,node}));const isTreeData=this.gos.get("treeData"),getValueFromNode=__name(node2=>{var _a238;if(isTreeData)return node2.key;const value=(_a238=node2.groupData)==null?void 0:_a238[column.getId()];return!value||!node2.rowGroupColumn||node2.rowGroupColumn.getColDef().useValueFormatterForExport===!1?value:this.valueSvc.formatValue(node2.rowGroupColumn,node2,value)??value},"getValueFromNode"),isFooter=node.footer,keys=[getValueFromNode(node)];if(!_isGroupMultiAutoColumn(this.gos))for(;node.parent;)node=node.parent,keys.push(getValueFromNode(node));const groupValue=keys.reverse().join(" -> ");return isFooter?`Total ${groupValue}`:groupValue}processCell(params){const{accumulatedRowIndex,rowNode,column,value,processCellCallback,type}=params;return processCellCallback?{value:processCellCallback(_addGridCommonParams(this.gos,{accumulatedRowIndex,column,node:rowNode,value,type,parseValue:__name(valueToParse=>this.valueSvc.parseValue(column,rowNode,valueToParse,this.valueSvc.getValue(column,rowNode)),"parseValue"),formatValue:__name(valueToFormat=>this.valueSvc.formatValue(column,rowNode,valueToFormat)??valueToFormat,"formatValue")}))??""}:column.getColDef().useValueFormatterForExport!==!1?{value:value??"",valueFormatted:this.valueSvc.formatValue(column,rowNode,value)}:{value:value??""}}},__name(_a152,"BaseGridSerializingSession"),_a152);function _downloadFile(fileName,content){const win=document.defaultView||window;if(!win){_warn(52);return}const element=document.createElement("a"),url=win.URL.createObjectURL(content);element.setAttribute("href",url),element.setAttribute("download",fileName),element.style.display="none",document.body.appendChild(element),element.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:win})),document.body.removeChild(element),win.setTimeout(()=>{win.URL.revokeObjectURL(url)},0)}__name(_downloadFile,"_downloadFile");var INITIAL_GRID_OPTION_KEYS={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0},clientSide="clientSide",serverSide="serverSide",infinite="infinite",functionRowModels={onGroupExpandedOrCollapsed:[clientSide],refreshClientSideRowModel:[clientSide],isRowDataEmpty:[clientSide],forEachLeafNode:[clientSide],forEachNodeAfterFilter:[clientSide],forEachNodeAfterFilterAndSort:[clientSide],resetRowHeights:[clientSide],applyTransaction:[clientSide],applyTransactionAsync:[clientSide],flushAsyncTransactions:[clientSide],getBestCostNodeSelection:[clientSide],getServerSideSelectionState:[serverSide],setServerSideSelectionState:[serverSide],applyServerSideTransaction:[serverSide],applyServerSideTransactionAsync:[serverSide],applyServerSideRowData:[serverSide],retryServerSideLoads:[serverSide],flushServerSideAsyncTransactions:[serverSide],refreshServerSide:[serverSide],getServerSideGroupLevelState:[serverSide],refreshInfiniteCache:[infinite],purgeInfiniteCache:[infinite],getInfiniteRowCount:[infinite],isLastRowIndexKnown:[infinite,serverSide],expandAll:[clientSide,serverSide],collapseAll:[clientSide,serverSide],onRowHeightChanged:[clientSide,serverSide],setRowCount:[infinite,serverSide],getCacheBlockState:[infinite,serverSide]},deprecatedFunctions={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function validateApiFunction(functionName,apiFunction,beans){const deprecation=deprecatedFunctions[functionName];if(deprecation){const{version,new:replacement,old,message}=deprecation,apiMethod=old??functionName;return(...args)=>{const replacementMessage=replacement?`Please use ${replacement} instead. `:"";return _warnOnce(`Since ${version} api.${apiMethod} is deprecated. ${replacementMessage}${message??""}`),apiFunction.apply(apiFunction,args)}}const rowModels=functionRowModels[functionName];return rowModels?(...args)=>{const rowModel=beans.rowModel.getType();if(!rowModels.includes(rowModel)){_errorOnce(`api.${functionName} can only be called when gridOptions.rowModelType is ${rowModels.join(" or ")}`);return}return apiFunction.apply(apiFunction,args)}:apiFunction}__name(validateApiFunction,"validateApiFunction");var ENTERPRISE_MODULE_NAMES={AdvancedFilter:1,AllEnterprise:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},ALL_COLUMN_FILTERS=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],RESOLVABLE_MODULE_NAMES={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:ALL_COLUMN_FILTERS,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...ALL_COLUMN_FILTERS,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...ALL_COLUMN_FILTERS,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},MODULES_FOR_ROW_MODELS={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function resolveModuleNames(moduleName,rowModelType){const resolvedModuleNames=[];return(Array.isArray(moduleName)?moduleName:[moduleName]).forEach(modName=>{const resolved=RESOLVABLE_MODULE_NAMES[modName];resolved?resolved.forEach(resolvedModName=>{const rowModelForModule=MODULES_FOR_ROW_MODELS[resolvedModName];(!rowModelForModule||rowModelForModule===rowModelType)&&resolvedModuleNames.push(resolvedModName)}):resolvedModuleNames.push(modName)}),resolvedModuleNames}__name(resolveModuleNames,"resolveModuleNames");var USER_COMP_MODULES={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"},moduleImportMsg=__name(moduleNames=>{const imports=moduleNames.map(moduleName=>`import { ${convertToUserModuleName(moduleName)} } from '${ENTERPRISE_MODULE_NAMES[moduleName]?"ag-grid-enterprise":"ag-grid-community"}';`);return moduleNames.some(m=>m==="IntegratedCharts"||m==="Sparklines")&&imports.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${imports.join(` 
`)} 

ModuleRegistry.registerModules([ ${moduleNames.map(m=>convertToUserModuleName(m,!0)).join(", ")} ]); 

For more info see: ${baseDocLink}/modules/`},"moduleImportMsg");function convertToUserModuleName(moduleName,inModuleRegistration=!1){return inModuleRegistration&&(moduleName==="IntegratedCharts"||moduleName==="Sparklines")?`${moduleName}Module.with(AgChartsEnterpriseModule)`:`${moduleName}Module`}__name(convertToUserModuleName,"convertToUserModuleName");function umdMissingModule(reasonOrId,moduleNames){const chartModules=moduleNames.filter(m=>m==="IntegratedCharts"||m==="Sparklines");let message="";return!(globalThis==null?void 0:globalThis.agCharts)&&chartModules.length>0?message=`Unable to use ${reasonOrId} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:moduleNames.some(m=>ENTERPRISE_MODULE_NAMES[m])&&(message=message+`Unable to use ${reasonOrId} as that requires the ag-grid-enterprise script to be included.
`),message}__name(umdMissingModule,"umdMissingModule");var missingModule=__name(({reasonOrId,moduleName,gridScoped,gridId,rowModelType,additionalText,isUmd:isUmd2})=>{const resolvedModuleNames=resolveModuleNames(moduleName,rowModelType),reason=typeof reasonOrId=="string"?reasonOrId:MISSING_MODULE_REASONS[reasonOrId];if(isUmd2)return umdMissingModule(reason,resolvedModuleNames);const chartModules=resolvedModuleNames.filter(m=>m==="IntegratedCharts"||m==="Sparklines"),chartImportRequired=chartModules.length>0?`${chartModules.map(m=>convertToUserModuleName(m)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${reason} as ${resolvedModuleNames.length>1?"one of "+resolvedModuleNames.map(m=>convertToUserModuleName(m)).join(", "):convertToUserModuleName(resolvedModuleNames[0])} is not registered${gridScoped?" for gridId: "+gridId:""}. ${chartImportRequired} Check if you have registered the module:
`}
${moduleImportMsg(resolvedModuleNames)}`+(additionalText?` 

${additionalText}`:"")},"missingModule"),missingChartsWithModule=__name(gridModule=>`${gridModule} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${gridModule} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${gridModule}.with(AgChartsEnterpriseModule)]);
    `,"missingChartsWithModule"),clipboardApiError=__name(method=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${method}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,"clipboardApiError"),AG_GRID_ERRORS={1:()=>"`rowData` must be an array",2:({nodeId})=>`Duplicate node id '${nodeId}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id})=>`Could not find row id=${id}, data item was not found for this id`,5:({data})=>["Could not find data item as object was not found.",data," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key})=>`Unknown key for navigation ${key}`,9:({variable})=>`No value for ${variable==null?void 0:variable.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${variable==null?void 0:variable.defaultValue} will be used and updated when styles load.`,10:({eventType})=>`As of v33, the '${eventType}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey})=>["column ",colKey," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix})=>`Row IDs cannot start with ${groupPrefix}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression})=>["value should be either a string or a function",expression],16:({expression,params,e})=>["Processing of the expression failed","Expression = ",expression,"Params = ",params,"Exception = ",e],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key})=>`${key} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id})=>["The getRowId callback must return a string. The ID ",id," is being cast to a string."],26:({fnName,preDestroyLink})=>`Grid API function ${fnName}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${preDestroyLink}`,27:({fnName,module})=>`API function '${fnName}' not registered to module '${module}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex})=>["tried to insert columns in invalid location, toIndex = ",toIndex,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key})=>`the column type '${key}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t})=>"colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName})=>`provided icon '${iconName}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method})=>`${e}
${clipboardApiError(method)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName})=>`As of v33, icon '${iconName}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType})=>`The data type definition ${parentCellDataType} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType})=>`Missing data type definition - "${cellDataType}"`,48:({property})=>`Cell data type is "object" but no Value ${property} has been provided. Please either provide an object data type definition with a Value ${property}, or set "colDef.value${property}"`,49:({methodName})=>`Framework component is missing the method ${methodName}()`,50:({compName})=>`Could not find component ${compName}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId})=>`setFilterModel() - no column found for colId: ${colId}`,63:({colId})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${colId}`,64:({colId})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${colId}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter})=>`getGui method from filter returned ${guiFromFilter}; it should be a DOM element.`,70:({newFilter})=>`Grid option quickFilterText only supports string inputs, received: ${typeof newFilter}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys})=>["ignoring FilterOptionDef as it doesn't contain one of ",keys],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType})=>['Unexpected type of filter "',filterModelType,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param})=>`DateFilter ${param} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index})=>`Invalid row index for ensureIndexVisible: ${index}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption,pageSizeSet,pageSizesSet,pageSizeOptions})=>`'paginationPageSize=${paginationPageSizeOption}'${pageSizeSet?"":" (default value)"}, but ${paginationPageSizeOption} is not included in${pageSizesSet?"":" the default"} paginationPageSizeSelector=[${pageSizeOptions==null?void 0:pageSizeOptions.join(", ")}].`,95:({paginationPageSizeOption,paginationPageSizeSelector:paginationPageSizeSelector2})=>`Either set '${paginationPageSizeSelector2}' to an array that includes ${paginationPageSizeOption} or to 'false' to disable the page size selector.`,96:({id,data})=>["Duplicate ID",id,"found for pinned row with data",data,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId})=>`cellEditor for column ${colId} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",100:({rowModelType})=>`selectAll only available when rowModelType='clientSide', ie not ${rowModelType}`,101:({propertyName,componentName,agGridDefaults,jsComps})=>{const textOutput=[],validComponents=[...Object.keys(agGridDefaults??[]).filter(k=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(k)),...Object.keys(jsComps??[])],suggestions=_fuzzySuggestions({inputValue:componentName,allSuggestions:validComponents,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return textOutput.push(`Could not find '${componentName}' component. It was configured as "${propertyName}: '${componentName}'" but it wasn't found in the list of registered components.
`),suggestions.length>0&&textOutput.push(`         Did you mean: [${suggestions.slice(0,3)}]?
`),textOutput.push("If using a custom component check it has been registered correctly."),textOutput},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value,param})=>`Numeric value ${value} passed to ${param} param will be interpreted as ${value} seconds. If this is intentional use "${value}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${baseDocLink}/theming-migration/`,107:({key,value})=>`Invalid value for theme param ${key} - ${value}`,108:({e})=>["chart update failed",e],109:({aggFuncOrString})=>`unrecognised aggregation function ${aggFuncOrString}`,110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component})=>`Could not find component with name of ${component}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId})=>`Unable to update chart. No active chart found with ID: ${chartId}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange})=>`unable to create chart as ${allRange?"there are no columns in the grid":"no range is selected"}.`,128:({feature})=>`${feature} is only available if using 'multiRow' selection mode.`,129:({feature,rowModel})=>`${feature} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${rowModel}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName})=>`icon '${iconName}' function should return back a string or a dom object`,134:({iconName})=>`Did not find icon '${iconName}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type,currentChartType})=>`Unable to update chart as a '${type}' update type is not permitted on a ${currentChartType}.`,138:({chartType})=>`invalid chart type supplied: ${chartType}`,139:({customThemeName})=>`a custom chart theme with the name ${customThemeName} has been supplied but not added to the 'chartThemes' list`,140:({name})=>`no stock theme exists with the name '${name}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel})=>`'${panel}' is not a valid Chart Tool Panel name`,144:({type})=>`Invalid charts data panel group name supplied: '${type}'`,145:({group})=>`As of v32, only one charts customize panel group can be expanded at a time. '${group}' will not be expanded.`,146:({comp})=>`Unable to instantiate component '${comp}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group})=>`Invalid charts customize panel group name supplied: '${group}'`,148:({group})=>`invalid chartGroupsDef config '${group}'`,149:({group,chartType})=>`invalid chartGroupsDef config '${group}.${chartType}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType})=>`invalid chartType '${chartType}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId})=>`no 'seriesChartType' found for colId = '${colId}', defaulting to 'line'.`,153:({chartDataType})=>`unexpected chartDataType value '${chartDataType}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${colId}`,155:({option})=>`'${option}' is not a valid Chart Toolbar Option`,156:({panel})=>`Invalid panel in chartToolPanelsDef.panels: '${panel}'`,157:({unrecognisedGroupIds})=>["unable to find group(s) for supplied groupIds:",unrecognisedGroupIds],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id,dataType})=>`Unrecognized data type for excel export [${id}.dataType=${dataType}]`,163:({featureName})=>`Excel table export does not work with ${featureName}. The exported Excel file will not contain any Excel tables.
 Please turn off ${featureName} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds})=>["unable to find groups for these supplied groupIds:",unrecognisedGroupIds],167:({unrecognisedColIds})=>["unable to find columns for these supplied colIds:",unrecognisedColIds],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy})=>`invalid cellRendererParams.refreshStrategy = ${providedStrategy} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group})=>`invalid chartGroupsDef config '${group}'`,174:({group,chartType})=>`invalid chartGroupsDef config '${group}.${chartType}'`,175:({menuTabName,itemsToConsider})=>[`Trying to render an invalid menu item '${menuTabName}'. Check that your 'menuTabs' contains one of `,itemsToConsider],176:({key})=>`unknown menu item type ${key}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId})=>`column ${colId} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData,childNodeData})=>["duplicate group keys for row data, keys should be unique",[parentGroupData,childNodeData]],185:({data})=>["getDataPath() should not return an empty path",[data]],186:({rowId,rowData,duplicateRowsData})=>["duplicate group keys for row data, keys should be unique",rowId,rowData,...duplicateRowsData??[]],187:({rowId,firstData,secondData})=>[`Duplicate node id ${rowId}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",firstData,"second instance",secondData],188:()=>"getRowId callback must be provided for Server Side Row Model selection to work correctly.",189:({startRow})=>`invalid value ${startRow} for startRow, the value should be >= 0`,190:({rowGroupId,data})=>["null and undefined values are not allowed for server side row model keys",rowGroupId?`column = ${rowGroupId}`:"","data is ",data],194:({method})=>`calling gridApi.${method}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage})=>`selecting just ${justCurrentPage?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key})=>`Provided ids must be of string type. Invalid id provided: ${key}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:missingModule,201:({rowModelType})=>`Could not find row model for rowModelType = ${rowModelType}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText})=>`Unable to display rows as duplicate row ids (${duplicateIdText}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${baseDocLink}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key})=>`unable to lookup Tool Panel as invalid key supplied: ${key}`,215:({key,defaultByKey})=>`the key ${key} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(defaultByKey??{}).join(",")}`,216:({name})=>`Missing component for '${name}'`,217:({invalidColIds})=>["unable to find grid columns for the supplied colDef(s):",invalidColIds],218:({property,defaultOffset})=>`${property} must be a number, the value you provided is not a valid number. Using the default of ${defaultOffset}px.`,219:({property})=>`Property ${property} does not exist on the target object.`,220:({lineDash})=>`'${lineDash}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString})=>`unrecognised menu item ${menuItemOrString}`,229:({index})=>["invalid row index for ensureIndexVisible: ",index],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName})=>`Framework component is missing the method ${methodName}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${theme}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType})=>`AG Grid: Unable to create chart as an invalid chartType = '${chartType}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version})=>["Illegal version string: ",version],254:()=>"Cannot create chart: no chart themes available.",255:({point})=>`Lone surrogate U+${point==null?void 0:point.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>missingChartsWithModule("IntegratedChartsModule"),258:()=>missingChartsWithModule("SparklinesModule"),259:({part})=>`the argument to theme.withPart must be a Theming API part object, received: ${part}`,260:({propName,compName,gridScoped,gridId,rowModelType})=>missingModule({reasonOrId:`AG Grid '${propName}' component: ${compName}`,moduleName:USER_COMP_MODULES[compName],gridId,gridScoped,rowModelType}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId})=>`Unable to infer chart data type for column '${colId}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${baseDocLink}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id,parentId})=>`Cycle detected for row with id='${id}' and parent id='${parentId}'. Resetting the parent for row with id='${id}' and showing it as a root-level node.`,271:({id,parentId})=>`Parent row not found for row with id='${id}' and parent id='${parentId}'. Showing row with id='${id}' as a root-level node.`};function getError(errorId,args){const msgOrFunc=AG_GRID_ERRORS[errorId];if(!msgOrFunc)return[`Missing error text for error id ${errorId}!`];const errorBody=msgOrFunc(args),errorSuffix=`
See ${getErrorLink(errorId,args)}`;return Array.isArray(errorBody)?errorBody.concat(errorSuffix):[errorBody,errorSuffix]}__name(getError,"getError");var MISSING_MODULE_REASONS={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},COLUMN_DEFINITION_DEPRECATIONS=__name(()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}}),"COLUMN_DEFINITION_DEPRECATIONS"),COLUMN_DEFINITION_VALIDATIONS=__name(()=>({aggFunc:{module:"SharedAggregation"},autoHeight:{supportedRowModels:["clientSide","serverSide"],module:"RowAutoHeight"},cellClass:{module:"CellStyle"},cellClassRules:{module:"CellStyle"},cellEditor:__name(({cellEditor,editable})=>{if(!editable)return null;if(typeof cellEditor=="string"){const module=USER_COMP_MODULES[cellEditor];if(module)return{module}}return{module:"CustomEditor"}},"cellEditor"),cellRenderer:__name(({cellRenderer})=>{if(typeof cellRenderer!="string")return null;const module=USER_COMP_MODULES[cellRenderer];return module?{module}:null},"cellRenderer"),cellRendererParams:{validate:__name(colDef=>(colDef.rowGroup!=null||colDef.rowGroupIndex!=null||colDef.cellRenderer==="agGroupCellRenderer")&&"checkbox"in colDef.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null,"validate")},cellStyle:{module:"CellStyle"},children:__name(()=>COL_DEF_VALIDATORS(),"children"),columnChooserParams:{module:"ColumnMenu"},contextMenuItems:{module:"ContextMenu"},dndSource:{module:"DragAndDrop"},dndSourceOnRowDrag:{module:"DragAndDrop"},editable:__name(({editable,cellEditor})=>editable&&!cellEditor?{module:"TextEditor"}:null,"editable"),enableCellChangeFlash:{module:"HighlightChanges"},enablePivot:{module:"SharedPivot"},enableRowGroup:{module:"SharedRowGrouping"},enableValue:{module:"SharedAggregation"},filter:__name(({filter})=>{if(filter&&typeof filter!="string"&&typeof filter!="boolean")return{module:"CustomFilter"};if(typeof filter=="string"){const module=USER_COMP_MODULES[filter];if(module)return{module}}return{module:"ColumnFilter"}},"filter"),floatingFilter:{module:"ColumnFilter"},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:__name((_options,{rowSelection})=>rowSelection==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple","validate")},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:__name((_options,{rowSelection})=>rowSelection==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple","validate")},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:__name((_options,{rowSelection})=>rowSelection==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple","validate")},headerTooltip:{module:"Tooltip"},headerValueGetter:{validate:__name(_options=>{const headerValueGetter=_options.headerValueGetter;return typeof headerValueGetter=="function"||typeof headerValueGetter=="string"?null:"headerValueGetter must be a function or a valid string expression"},"validate")},icons:{validate:__name(({icons})=>{if(icons){if(icons.smallDown)return _errMsg(262);if(icons.smallLeft)return _errMsg(263);if(icons.smallRight)return _errMsg(264)}return null},"validate")},mainMenuItems:{module:"ColumnMenu"},menuTabs:__name(options=>{var _a238;const enterpriseMenuTabs=["columnsMenuTab","generalMenuTab"];return(_a238=options.menuTabs)!=null&&_a238.some(tab=>enterpriseMenuTabs.includes(tab))?{module:"ColumnMenu"}:null},"menuTabs"),pivot:{module:"SharedPivot"},pivotIndex:{module:"SharedPivot"},rowDrag:{module:"RowDrag"},rowGroup:{module:"SharedRowGrouping"},rowGroupIndex:{module:"SharedRowGrouping"},sortingOrder:{validate:__name(_options=>{const sortingOrder=_options.sortingOrder;if(Array.isArray(sortingOrder)&&sortingOrder.length>0){const invalidItems=sortingOrder.filter(a=>!DEFAULT_SORTING_ORDER.includes(a));if(invalidItems.length>0)return`sortingOrder must be an array with elements from [${DEFAULT_SORTING_ORDER.map(toStringWithNullUndefined).join()}], currently it includes [${invalidItems.map(toStringWithNullUndefined).join()}]`}else if(!Array.isArray(sortingOrder)||sortingOrder.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${sortingOrder}`;return null},"validate")},tooltipField:{module:"Tooltip"},tooltipValueGetter:{module:"Tooltip"},type:{validate:__name(_options=>{const type=_options.type;return type instanceof Array?type.some(a=>typeof a!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof type=="string"?null:"colDef.type should be of type 'string' | 'string[]'"},"validate")},rowSpan:{validate:__name((_options,{suppressRowTransform})=>suppressRowTransform?null:"colDef.rowSpan requires suppressRowTransform to be enabled.","validate")},spanRows:{module:"CellSpan",dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[!1,void 0]},rowSpan:{required:[!1,void 0]}},validate:__name((_options,{rowSelection,cellSelection,suppressRowTransform,enableCellSpan,rowDragEntireRow,enableCellTextSelection})=>typeof rowSelection=="object"&&(rowSelection==null?void 0:rowSelection.mode)==="singleRow"&&rowSelection!=null&&rowSelection.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":cellSelection?"colDef.spanRows is not supported with cellSelection.":suppressRowTransform?"colDef.spanRows is not supported with suppressRowTransform.":enableCellSpan?rowDragEntireRow?"colDef.spanRows is not supported with rowDragEntireRow.":enableCellTextSelection?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled.","validate")}}),"COLUMN_DEFINITION_VALIDATIONS"),colDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0},ALL_PROPERTIES=__name(()=>Object.keys(colDefPropertyMap),"ALL_PROPERTIES"),COL_DEF_VALIDATORS=__name(()=>({objectName:"colDef",allProperties:ALL_PROPERTIES(),docsUrl:"column-properties/",deprecations:COLUMN_DEFINITION_DEPRECATIONS(),validations:COLUMN_DEFINITION_VALIDATIONS()}),"COL_DEF_VALIDATORS"),GRID_OPTION_DEPRECATIONS=__name(()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."}}),"GRID_OPTION_DEPRECATIONS");function toConstrainedNum(key,value,min,max=Number.MAX_VALUE){return typeof value=="number"||value==null?value==null||value>=min&&value<=max?null:max===Number.MAX_VALUE?`${key}: value should be greater than or equal to ${min}`:`${key}: value should be between ${min} and ${max}`:`${key}: value should be a number`}__name(toConstrainedNum,"toConstrainedNum");var GRID_OPTION_VALIDATIONS=__name(()=>{const definedValidations={alignedGrids:{module:"AlignedGrids"},allowContextMenuWithControlKey:{module:"ContextMenu"},autoSizePadding:{validate({autoSizePadding}){return toConstrainedNum("autoSizePadding",autoSizePadding,0)}},autoSizeStrategy:{module:"ColumnAutoSize"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize}){return toConstrainedNum("cacheBlockSize",cacheBlockSize,1)}},cacheOverflowSize:{validate({cacheOverflowSize}){return toConstrainedNum("cacheOverflowSize",cacheOverflowSize,1)}},cellSelection:{module:"CellSelection"},columnHoverHighlight:{module:"ColumnHover"},datasource:{supportedRowModels:["infinite"],module:"InfiniteRowModel"},doesExternalFilterPass:{module:"ExternalFilter"},domLayout:{validate:__name(options=>{const domLayout=options.domLayout,validLayouts=["autoHeight","normal","print"];return domLayout&&!validLayouts.includes(domLayout)?`domLayout must be one of [${validLayouts.join()}], currently it's ${domLayout}`:null},"validate")},editType:{module:"EditCore"},enableAdvancedFilter:{module:"AdvancedFilter"},enableCharts:{module:"IntegratedCharts"},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{module:"CellSelection",dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},findSearchValue:{module:"Find"},rowNumbers:{module:"RowNumbers"},getContextMenuItems:{module:"ContextMenu"},getLocaleText:{module:"Locale"},getMainMenuItems:{module:"ColumnMenu"},getRowClass:{module:"RowStyle"},getRowStyle:{module:"RowStyle"},grandTotalRow:{module:"SharedRowGrouping"},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},icons:{validate:__name(({icons})=>{if(icons){if(icons.smallDown)return _errMsg(262);if(icons.smallLeft)return _errMsg(263);if(icons.smallRight)return _errMsg(264)}return null},"validate")},infiniteInitialRowCount:{validate({infiniteInitialRowCount}){return toConstrainedNum("infiniteInitialRowCount",infiniteInitialRowCount,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},initialState:{module:"GridState"},isExternalFilterPresent:{module:"ExternalFilter"},keepDetailRowsCount:{validate({keepDetailRowsCount}){return toConstrainedNum("keepDetailRowsCount",keepDetailRowsCount,1)}},localeText:{module:"Locale"},masterDetail:{module:"SharedMasterDetail"},pagination:{module:"Pagination"},paginationPageSize:{validate({paginationPageSize}){return toConstrainedNum("paginationPageSize",paginationPageSize,1)}},paginationPageSizeSelector:{validate:__name(options=>{const values=options.paginationPageSizeSelector;return typeof values=="boolean"||values==null||values.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`},"validate")},pinnedTopRowData:{module:"PinnedRow"},pinnedBottomRowData:{module:"PinnedRow"},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}},module:"SharedPivot"},pivotPanelShow:{module:"RowGroupingPanel"},quickFilterText:{supportedRowModels:["clientSide"],module:"QuickFilter"},rowBuffer:{validate({rowBuffer}){return toConstrainedNum("rowBuffer",rowBuffer,0)}},rowClass:{validate:__name(options=>typeof options.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null,"validate"),module:"RowStyle"},rowClassRules:{module:"RowStyle"},rowData:{supportedRowModels:["clientSide"],module:"ClientSideRowModel"},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{treeData:{required:[!1,void 0]},pagination:{required:[!1,void 0]}},module:"RowDrag"},rowGroupPanelShow:{module:"RowGroupingPanel"},rowSelection:{validate({rowSelection}){return rowSelection&&typeof rowSelection=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':rowSelection&&typeof rowSelection!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":rowSelection&&rowSelection.mode!=="multiRow"&&rowSelection.mode!=="singleRow"?`Selection mode "${rowSelection.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null},module:"SharedRowSelection"},rowStyle:{validate:__name(options=>{const rowStyle=options.rowStyle;return rowStyle&&typeof rowStyle=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null},"validate"),module:"RowStyle"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"ServerSideRowModel"},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount}){return toConstrainedNum("serverSideInitialRowCount",serverSideInitialRowCount,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sideBar:{module:"SideBar"},sortingOrder:{validate:__name(_options=>{const sortingOrder=_options.sortingOrder;if(Array.isArray(sortingOrder)&&sortingOrder.length>0){const invalidItems=sortingOrder.filter(a=>!DEFAULT_SORTING_ORDER.includes(a));if(invalidItems.length>0)return`sortingOrder must be an array with elements from [${DEFAULT_SORTING_ORDER.map(toStringWithNullUndefined).join()}], currently it includes [${invalidItems.map(toStringWithNullUndefined).join()}]`}else if(!Array.isArray(sortingOrder)||sortingOrder.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${sortingOrder}`;return null},"validate")},statusBar:{module:"StatusBar"},tooltipHideDelay:{validate:__name(options=>options.tooltipHideDelay&&options.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null,"validate")},tooltipShowDelay:{validate:__name(options=>options.tooltipShowDelay&&options.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null,"validate")},treeData:{supportedRowModels:["clientSide","serverSide"],module:"SharedTreeData",validate:__name(options=>{const rowModel=options.rowModelType??"clientSide";switch(rowModel){case"clientSide":{const{treeDataChildrenField,treeDataParentIdField,getDataPath,getRowId}=options;if(!treeDataChildrenField&&!treeDataParentIdField&&!getDataPath)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(treeDataChildrenField){if(getDataPath)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(treeDataParentIdField)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(treeDataParentIdField){if(!getRowId)return"getRowId callback not provided, tree data with parent id cannot be built.";if(getDataPath)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const ssrmWarning=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${rowModel} row model.`;return options.isServerSideGroup&&options.getServerSideGroupKey?null:ssrmWarning}}return null},"validate")},treeDataChildrenField:{module:"SharedTreeData"},treeDataParentIdField:{module:"SharedTreeData"},undoRedoCellEditing:{module:"UndoRedoEdit"},valueCache:{module:"ValueCache"},viewportDatasource:{supportedRowModels:["viewport"],module:"ViewportRowModel"},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize}){return toConstrainedNum("viewportRowModelBufferSize",viewportRowModelBufferSize,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize}){return toConstrainedNum("viewportRowModelPageSize",viewportRowModelPageSize,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},enableCellSpan:{module:"CellSpan"},autoGroupColumnDef:{validate({autoGroupColumnDef,showOpenedGroup}){return autoGroupColumnDef!=null&&autoGroupColumnDef.field&&showOpenedGroup?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":autoGroupColumnDef!=null&&autoGroupColumnDef.valueGetter&&showOpenedGroup?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}}},validations={};return _BOOLEAN_GRID_OPTIONS.forEach(key=>{validations[key]={expectedType:"boolean"}}),_NUMBER_GRID_OPTIONS.forEach(key=>{validations[key]={expectedType:"number"}}),_mergeDeep(validations,definedValidations),validations},"GRID_OPTION_VALIDATIONS"),GRID_OPTIONS_VALIDATORS=__name(()=>({objectName:"gridOptions",allProperties:[..._ALL_GRID_OPTIONS,..._ALL_EVENTS.map(event=>_getCallbackForEvent(event))],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:GRID_OPTION_DEPRECATIONS(),validations:GRID_OPTION_VALIDATIONS()}),"GRID_OPTIONS_VALIDATORS"),ICON_VALUES={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1},ICON_MODULES={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore"},DEPRECATED_ICONS_V33=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),MENU_ITEM_MODULES={pinSubMenu:"PinnedColumn",pinLeft:"PinnedColumn",pinRight:"PinnedColumn",clearPinned:"PinnedColumn",valueAggSubMenu:"SharedAggregation",autoSizeThis:"ColumnAutoSize",autoSizeAll:"ColumnAutoSize",rowGroup:"SharedRowGrouping",rowUnGroup:"SharedRowGrouping",resetColumns:"CommunityCore",expandAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],contractAll:["ClientSideRowModelHierarchy","ServerSideRowModel"],copy:"Clipboard",copyWithHeaders:"Clipboard",copyWithGroupHeaders:"Clipboard",cut:"Clipboard",paste:"Clipboard",export:["CsvExport","ExcelExport"],csvExport:"CsvExport",excelExport:"ExcelExport",separator:"CommunityCore",pivotChart:"IntegratedCharts",chartRange:"IntegratedCharts",columnFilter:"ColumnFilter",columnChooser:"ColumnMenu",sortAscending:"Sort",sortDescending:"Sort",sortUnSort:"Sort"},_a153,ValidationService=(_a153=class extends BeanStub{constructor(){super(...arguments),this.beanName="validation"}wireBeans(beans){this.gridOptions=beans.gridOptions,provideValidationServiceLogger(this)}postConstruct(){this.processGridOptions(this.gridOptions)}warnOnInitialPropertyUpdate(source,key){source==="api"&&INITIAL_GRID_OPTION_KEYS[key]&&_warn(22,{key})}processGridOptions(options){this.processOptions(options,GRID_OPTIONS_VALIDATORS())}validateApiFunction(functionName,apiFunction){return validateApiFunction(functionName,apiFunction,this.beans)}missingUserComponent(propertyName,componentName,agGridDefaults,jsComps){const moduleForComponent=USER_COMP_MODULES[componentName];moduleForComponent?this.gos.assertModuleRegistered(moduleForComponent,`AG Grid '${propertyName}' component: ${componentName}`):_warn(101,{propertyName,componentName,agGridDefaults,jsComps})}checkRowEvents(eventType){DEPRECATED_ROW_NODE_EVENTS.has(eventType)&&_warn(10,{eventType})}validateIcon(iconName){if(DEPRECATED_ICONS_V33.has(iconName)&&_warn(43,{iconName}),ICON_VALUES[iconName])return;const moduleName=ICON_MODULES[iconName];if(moduleName){_error(200,{reasonOrId:`icon '${iconName}'`,moduleName,gridScoped:_areModulesGridScoped(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}_warn(134,{iconName})}validateMenuItem(key){const moduleName=MENU_ITEM_MODULES[key];moduleName&&this.gos.assertModuleRegistered(moduleName,`menu item '${key}'`)}isProvidedUserComp(compName){return!!USER_COMP_MODULES[compName]}validateColDef(colDef,colId,skipInferenceCheck){var _a238;(skipInferenceCheck||!((_a238=this.beans.dataTypeSvc)!=null&&_a238.isColPendingInference(colId)))&&this.processOptions(colDef,COL_DEF_VALIDATORS())}processOptions(options,validator){const{validations,deprecations,allProperties,propertyExceptions,objectName,docsUrl}=validator;allProperties&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(options,[...propertyExceptions??[],...Object.keys(deprecations)],allProperties,objectName,docsUrl);const warnings=new Set,getRules=__name(key=>{const rulesOrGetter=validations[key];if(rulesOrGetter)if(typeof rulesOrGetter=="function"){const fromGetter=rulesOrGetter(options,this.gridOptions,this.beans);if(!fromGetter)return;if("objectName"in fromGetter){const value=options[key];if(Array.isArray(value)){value.forEach(item=>{this.processOptions(item,fromGetter)});return}this.processOptions(options[key],fromGetter);return}return fromGetter}else return rulesOrGetter;else return},"getRules");Object.keys(options).forEach(key=>{const deprecation=deprecations[key];if(deprecation){const{message,version}=deprecation;warnings.add(`As of v${version}, ${String(key)} is deprecated. ${message??""}`)}const value=options[key];if(value==null||value===!1)return;const rules=getRules(key);if(!rules)return;const{module,dependencies,validate,supportedRowModels,expectedType}=rules;if(expectedType){const actualType=typeof value;if(actualType!==expectedType){warnings.add(`${String(key)} should be of type '${expectedType}' but received '${actualType}' (${value}).`);return}}if(supportedRowModels){const rowModel=this.gridOptions.rowModelType??"clientSide";if(!supportedRowModels.includes(rowModel)){warnings.add(`${String(key)} is not supported with the '${rowModel}' row model. It is only valid with: ${supportedRowModels.join(", ")}.`);return}}if(module){const modules=Array.isArray(module)?module:[module];let allRegistered=!0;if(modules.forEach(m=>{this.gos.assertModuleRegistered(m,String(key))||(allRegistered=!1)}),!allRegistered)return}if(dependencies){const warning=this.checkForRequiredDependencies(key,dependencies,options);if(warning){warnings.add(warning);return}}if(validate){const warning=validate(options,this.gridOptions,this.beans);if(warning){warnings.add(warning);return}}}),warnings.size>0&&warnings.forEach(warning=>{_warnOnce(warning)})}checkForRequiredDependencies(key,validator,options){const failedOptions=Object.entries(validator).filter(([key2,value])=>{const gridOptionValue=options[key2];return!value.required.includes(gridOptionValue)});return failedOptions.length===0?null:failedOptions.map(([failedKey,possibleOptions])=>`'${String(key)}' requires '${failedKey}' to be one of [${possibleOptions.required.map(o=>o===null?"null":o===void 0?"undefined":o).join(", ")}]. ${possibleOptions.reason??""}`).join(`
           `)}checkProperties(object,exceptions,validProperties,containerName,docsUrl){const VUE_FRAMEWORK_PROPS=["__ob__","__v_skip","__metadata__"],invalidProperties=_fuzzyCheckStrings(Object.getOwnPropertyNames(object),[...VUE_FRAMEWORK_PROPS,...exceptions,...validProperties],validProperties),invalidPropertiesKeys=Object.keys(invalidProperties);for(const key of invalidPropertiesKeys){const value=invalidProperties[key];let message=`invalid ${containerName} property '${key}' did you mean any of these: ${value.slice(0,8).join(", ")}.`;validProperties.includes("context")&&(message+=`
If you are trying to annotate ${containerName} with application data, use the '${containerName}.context' property instead.`),_warnOnce(message)}if(invalidPropertiesKeys.length>0&&docsUrl){const url=this.beans.frameworkOverrides.getDocLink(docsUrl);_warnOnce(`to see all the valid ${containerName} properties please check: ${url}`)}}getConsoleMessage(id,args){return getError(id,args)}},__name(_a153,"ValidationService"),_a153);function _fuzzyCheckStrings(inputValues,validValues,allSuggestions){const fuzzyMatches={},invalidInputs=inputValues.filter(inputValue=>!validValues.some(validValue=>validValue===inputValue));return invalidInputs.length>0&&invalidInputs.forEach(invalidInput=>fuzzyMatches[invalidInput]=_fuzzySuggestions({inputValue:invalidInput,allSuggestions}).values),fuzzyMatches}__name(_fuzzyCheckStrings,"_fuzzyCheckStrings");var DEPRECATED_ROW_NODE_EVENTS=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),ValidationModule={moduleName:"Validation",version:VERSION,beans:[ValidationService]};function updateRowNodeAfterFilter(rowNode){rowNode.sibling&&(rowNode.sibling.childrenAfterFilter=rowNode.childrenAfterFilter)}__name(updateRowNodeAfterFilter,"updateRowNodeAfterFilter");var _a154,FilterStage=(_a154=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(beans){this.filterManager=beans.filterManager}execute(params){const{changedPath}=params;this.filter(changedPath)}filter(changedPath){var _a238;const filterActive=!!((_a238=this.filterManager)!=null&&_a238.isChildFilterPresent());this.filterNodes(filterActive,changedPath)}filterNodes(filterActive,changedPath){const filterCallback=__name((rowNode,includeChildNodes)=>{rowNode.hasChildren()&&filterActive&&!includeChildNodes?rowNode.childrenAfterFilter=rowNode.childrenAfterGroup.filter(childNode=>{const passBecauseChildren=childNode.childrenAfterFilter&&childNode.childrenAfterFilter.length>0,passBecauseDataPasses=childNode.data&&this.filterManager.doesRowPassFilter({rowNode:childNode});return passBecauseChildren||passBecauseDataPasses}):rowNode.childrenAfterFilter=rowNode.childrenAfterGroup,updateRowNodeAfterFilter(rowNode)},"filterCallback");if(this.doingTreeDataFiltering()){const treeDataDepthFirstFilter=__name((rowNode,alreadyFoundInParent)=>{if(rowNode.childrenAfterGroup)for(let i=0;i<rowNode.childrenAfterGroup.length;i++){const childNode=rowNode.childrenAfterGroup[i],foundInParent=alreadyFoundInParent||this.filterManager.doesRowPassFilter({rowNode:childNode});childNode.childrenAfterGroup?treeDataDepthFirstFilter(rowNode.childrenAfterGroup[i],foundInParent):filterCallback(childNode,foundInParent)}filterCallback(rowNode,alreadyFoundInParent)},"treeDataDepthFirstFilter"),treeDataFilterCallback=__name(rowNode=>treeDataDepthFirstFilter(rowNode,!1),"treeDataFilterCallback");changedPath.executeFromRootNode(treeDataFilterCallback)}else{const defaultFilterCallback=__name(rowNode=>filterCallback(rowNode,!1),"defaultFilterCallback");changedPath.forEachChangedNodeDepthFirst(defaultFilterCallback,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},__name(_a154,"FilterStage"),_a154),_a155,HeaderFilterCellCtrl=(_a155=class extends AbstractHeaderCellCtrl{constructor(){super(...arguments),this.iconCreated=!1}setComp(comp,eGui,eButtonShowMainFilter,eFloatingFilterBody,compBeanInput){this.comp=comp;const compBean=setupCompBean(this,this.beans.context,compBeanInput);this.eButtonShowMainFilter=eButtonShowMainFilter,this.eFloatingFilterBody=eFloatingFilterBody,this.setGui(eGui,compBean),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(compBean),this.setupLeft(compBean),this.setupHover(compBean),this.setupFocus(compBean),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(compBean),this.setupUi(),compBean.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(compBean),compBean.addManagedListeners(this.column,{colDefChanged:__name(()=>this.onColDefChanged(compBean),"colDefChanged")}),compBean.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column,beans}=this,colDef=column.colDef;return _addGridCommonParams(beans.gos,{colDef,column,floatingFilter:!0})}setupActive(){const colDef=this.column.getColDef(),filterExists=!!colDef.filter,floatingFilterExists=!!colDef.floatingFilter;this.active=filterExists&&floatingFilterExists}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const eMenuIcon=_createIconNoSpan("filter",this.beans,this.column);eMenuIcon&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(eMenuIcon))}setupFocus(compBean){compBean.createManagedBean(new ManagedFocusFeature(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const localeTextFunc=this.getLocaleTextFunc();_setAriaLabel(this.eButtonShowMainFilter,localeTextFunc("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){var _a238;const{beans}=this;if(_getActiveDomElement(beans)===this.eGui)return;const nextFocusableEl=_findNextFocusableElement(beans,this.eGui,null,e.shiftKey);if(nextFocusableEl){(_a238=beans.headerNavigation)==null||_a238.scrollToColumn(this.column),e.preventDefault(),nextFocusableEl.focus();return}const nextFocusableColumn=this.findNextColumnWithFloatingFilter(e.shiftKey);nextFocusableColumn&&beans.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:nextFocusableColumn},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(backwards){const presentedColsService=this.beans.visibleCols;let nextCol=this.column;do if(nextCol=backwards?presentedColsService.getColBefore(nextCol):presentedColsService.getColAfter(nextCol),!nextCol)break;while(!nextCol.getColDef().filter||!nextCol.getColDef().floatingFilter);return nextCol}handleKeyDown(e){super.handleKeyDown(e);const wrapperHasFocus=this.getWrapperHasFocus();switch(e.key){case KeyCode.UP:case KeyCode.DOWN:wrapperHasFocus||e.preventDefault();case KeyCode.LEFT:case KeyCode.RIGHT:if(wrapperHasFocus)return;e.stopPropagation();case KeyCode.ENTER:wrapperHasFocus&&_focusInto(this.eGui)&&e.preventDefault();break;case KeyCode.ESCAPE:wrapperHasFocus||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const notFromHeaderWrapper=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),fromWithinHeader=!!e.relatedTarget&&_isElementChildOfClass(e.relatedTarget,"ag-floating-filter");if(notFromHeaderWrapper&&fromWithinHeader&&e.target===this.eGui){const lastFocusEvent=this.lastFocusEvent,fromTab=!!(lastFocusEvent&&lastFocusEvent.key===KeyCode.TAB);if(lastFocusEvent&&fromTab){const shouldFocusLast=lastFocusEvent.shiftKey;_focusInto(this.eGui,shouldFocusLast)}}this.focusThis()}setupHover(compBean){var _a238;(_a238=this.beans.colHover)==null||_a238.addHeaderFilterColumnHoverListener(compBean,this.comp,this.column,this.eGui)}setupLeft(compBean){const setLeftFeature=new SetLeftFeature(this.column,this.eGui,this.beans);compBean.createManagedBean(setLeftFeature)}setupFilterButton(){var _a238;this.suppressFilterButton=!((_a238=this.beans.menuSvc)!=null&&_a238.isFloatingFilterButtonEnabled(this.column)),this.highlightFilterButtonWhenActive=!_isLegacyMenuEnabled(this.gos)}setupUserComp(){var _a238;if(!this.active)return;const compDetails=(_a238=this.beans.filterManager)==null?void 0:_a238.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());compDetails&&this.setCompDetails(compDetails)}setCompDetails(compDetails){this.userCompDetails=compDetails,this.comp.setCompDetails(compDetails)}showParentFilter(){var _a238;const eventSource=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;(_a238=this.beans.menuSvc)==null||_a238.showFilterMenu({column:this.column,buttonElement:eventSource,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(compBean){if(!this.active)return;const{filterManager}=this.beans,syncWithFilter=__name(event=>{if((event==null?void 0:event.source)==="filterDestroyed"&&!this.isAlive())return;const compPromise=this.comp.getFloatingFilterComp();compPromise&&compPromise.then(comp=>{if(comp){const parentModel=filterManager==null?void 0:filterManager.getCurrentFloatingFilterParentModel(this.column),filterChangedEvent=event?{...event,columns:event.columns??[],source:event.source==="api"?"api":"columnFilter"}:null;comp.onParentModelChanged(parentModel,filterChangedEvent)}})},"syncWithFilter");[this.destroySyncListener]=compBean.addManagedListeners(this.column,{filterChanged:syncWithFilter}),filterManager!=null&&filterManager.isFilterActive(this.column)&&syncWithFilter(null)}setupWidth(compBean){const listener=__name(()=>{const width=`${this.column.getActualWidth()}px`;this.comp.setWidth(width)},"listener");compBean.addManagedListeners(this.column,{widthChanged:listener}),listener()}setupFilterChangedListener(compBean){this.active&&([this.destroyFilterChangedListener]=compBean.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var _a238;if(!this.suppressFilterButton&&this.comp){const isFilterAllowed=!!((_a238=this.beans.filterManager)!=null&&_a238.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(isFilterAllowed),this.highlightFilterButtonWhenActive&&isFilterAllowed&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(compBean){var _a238;const wasActive=this.active;this.setupActive();const becomeActive=!wasActive&&this.active;wasActive&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const newCompDetails=this.active?(_a238=this.beans.filterManager)==null?void 0:_a238.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,compPromise=this.comp.getFloatingFilterComp();!compPromise||!newCompDetails?this.updateCompDetails(compBean,newCompDetails,becomeActive):compPromise.then(compInstance=>{var _a239;!compInstance||(_a239=this.beans.filterManager)!=null&&_a239.areFilterCompsDifferent(this.userCompDetails??null,newCompDetails)?this.updateCompDetails(compBean,newCompDetails,becomeActive):this.updateFloatingFilterParams(newCompDetails)})}updateCompDetails(compBean,compDetails,becomeActive){this.isAlive()&&(this.setCompDetails(compDetails),this.setupFilterButton(),this.setupUi(),becomeActive&&(this.setupSyncWithFilter(compBean),this.setupFilterChangedListener(compBean)))}updateFloatingFilterParams(userCompDetails){var _a238;if(!userCompDetails)return;const params=userCompDetails.params;(_a238=this.comp.getFloatingFilterComp())==null||_a238.then(floatingFilter=>{floatingFilter!=null&&floatingFilter.refresh&&typeof floatingFilter.refresh=="function"&&floatingFilter.refresh(params)})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}},__name(_a155,"HeaderFilterCellCtrl"),_a155);function showColumnMenu(beans,colKey){var _a238;const column=beans.colModel.getCol(colKey);if(!column){_error(12,{colKey});return}(_a238=beans.menuSvc)==null||_a238.showColumnMenu({column,positionBy:"auto"})}__name(showColumnMenu,"showColumnMenu");function hidePopupMenu(beans){var _a238;(_a238=beans.menuSvc)==null||_a238.hidePopupMenu()}__name(hidePopupMenu,"hidePopupMenu");var SharedMenuModule={moduleName:"SharedMenu",version:VERSION,beans:[MenuService],apiFunctions:{showColumnMenu,hidePopupMenu}},instanceIdSeq=0,WAIT_FOR_POPUP_CONTENT_RESIZE=200,_a156,PopupService=(_a156=class extends BeanStub{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,p=>{this.gridCtrl=p.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const ePopupParent=this.gos.get("popupParent");return ePopupParent||this.gridCtrl.getGui()}positionPopupForMenu(params){const{eventSource,ePopup,column,node,event}=params,sourceRect=eventSource.getBoundingClientRect(),parentRect=this.getParentRect();this.setAlignedTo(eventSource,ePopup);let minWidthSet=!1;const updatePosition=__name(()=>{const y=this.keepXYWithinBounds(ePopup,sourceRect.top-parentRect.top,0),minWidth=ePopup.clientWidth>0?ePopup.clientWidth:200;minWidthSet||(ePopup.style.minWidth=`${minWidth}px`,minWidthSet=!0);const maxX=parentRect.right-parentRect.left-minWidth;let x;return this.gos.get("enableRtl")?(x=xLeftPosition(),x<0&&(x=xRightPosition(),this.setAlignedStyles(ePopup,"left")),x>maxX&&(x=0,this.setAlignedStyles(ePopup,"right"))):(x=xRightPosition(),x>maxX&&(x=xLeftPosition(),this.setAlignedStyles(ePopup,"right")),x<0&&(x=0,this.setAlignedStyles(ePopup,"left"))),{x,y};function xRightPosition(){return sourceRect.right-parentRect.left-2}__name(xRightPosition,"xRightPosition");function xLeftPosition(){return sourceRect.left-parentRect.left-minWidth}__name(xLeftPosition,"xLeftPosition")},"updatePosition");this.positionPopup({ePopup,keepWithinBounds:!0,updatePosition,postProcessCallback:__name(()=>this.callPostProcessPopup("subMenu",ePopup,eventSource,event instanceof MouseEvent?event:void 0,column,node),"postProcessCallback")})}positionPopupUnderMouseEvent(params){const{ePopup,nudgeX,nudgeY,skipObserver}=params;this.positionPopup({ePopup,nudgeX,nudgeY,keepWithinBounds:!0,skipObserver,updatePosition:__name(()=>this.calculatePointerAlign(params.mouseEvent),"updatePosition"),postProcessCallback:__name(()=>this.callPostProcessPopup(params.type,params.ePopup,null,params.mouseEvent,params.column,params.rowNode),"postProcessCallback")})}calculatePointerAlign(e){const parentRect=this.getParentRect();return{x:e.clientX-parentRect.left,y:e.clientY-parentRect.top}}positionPopupByComponent(params){const{ePopup,nudgeX,nudgeY,keepWithinBounds,eventSource,alignSide="left",position="over",column,rowNode,type}=params,sourceRect=eventSource.getBoundingClientRect(),parentRect=this.getParentRect();this.setAlignedTo(eventSource,ePopup);const updatePosition=__name(()=>{let x=sourceRect.left-parentRect.left;alignSide==="right"&&(x-=ePopup.offsetWidth-sourceRect.width);let y;return position==="over"?(y=sourceRect.top-parentRect.top,this.setAlignedStyles(ePopup,"over")):(this.setAlignedStyles(ePopup,"under"),this.shouldRenderUnderOrAbove(ePopup,sourceRect,parentRect,params.nudgeY||0)==="under"?y=sourceRect.top-parentRect.top+sourceRect.height:y=sourceRect.top-ePopup.offsetHeight-(nudgeY||0)*2-parentRect.top),{x,y}},"updatePosition");this.positionPopup({ePopup,nudgeX,nudgeY,keepWithinBounds,updatePosition,postProcessCallback:__name(()=>this.callPostProcessPopup(type,ePopup,eventSource,null,column,rowNode),"postProcessCallback")})}shouldRenderUnderOrAbove(ePopup,targetCompRect,parentRect,nudgeY){const spaceAvailableUnder=parentRect.bottom-targetCompRect.bottom,spaceAvailableAbove=targetCompRect.top-parentRect.top,spaceRequired=ePopup.offsetHeight+nudgeY;return spaceAvailableUnder>spaceRequired?"under":spaceAvailableAbove>spaceRequired||spaceAvailableAbove>spaceAvailableUnder?"above":"under"}setAlignedStyles(ePopup,positioned){const popupIdx=this.getPopupIndex(ePopup);if(popupIdx===-1)return;const popup=this.popupList[popupIdx],{alignedToElement}=popup;!alignedToElement||(["right","left","over","above","under"].forEach(position=>{alignedToElement.classList.remove(`ag-has-popup-positioned-${position}`),ePopup.classList.remove(`ag-popup-positioned-${position}`)}),!positioned)||(alignedToElement.classList.add(`ag-has-popup-positioned-${positioned}`),ePopup.classList.add(`ag-popup-positioned-${positioned}`))}setAlignedTo(eventSource,ePopup){const popupIdx=this.getPopupIndex(ePopup);if(popupIdx!==-1){const popup=this.popupList[popupIdx];popup.alignedToElement=eventSource}}callPostProcessPopup(type,ePopup,eventSource,mouseEvent,column,rowNode){const callback=this.gos.getCallback("postProcessPopup");callback&&callback({column,rowNode,ePopup,type,eventSource,mouseEvent})}positionPopup(params){const{ePopup,keepWithinBounds,nudgeX,nudgeY,skipObserver,updatePosition}=params,lastSize={width:0,height:0},updatePopupPosition=__name((fromResizeObserver=!1)=>{let{x,y}=updatePosition();fromResizeObserver&&ePopup.clientWidth===lastSize.width&&ePopup.clientHeight===lastSize.height||(lastSize.width=ePopup.clientWidth,lastSize.height=ePopup.clientHeight,nudgeX&&(x+=nudgeX),nudgeY&&(y+=nudgeY),keepWithinBounds&&(x=this.keepXYWithinBounds(ePopup,x,1),y=this.keepXYWithinBounds(ePopup,y,0)),ePopup.style.left=`${x}px`,ePopup.style.top=`${y}px`,params.postProcessCallback&&params.postProcessCallback())},"updatePopupPosition");if(updatePopupPosition(),!skipObserver){const resizeObserverDestroyFunc=_observeResize(this.beans,ePopup,()=>updatePopupPosition(!0));setTimeout(()=>resizeObserverDestroyFunc(),WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(popup=>popup.element)}getParentRect(){const eDocument=_getDocument(this.beans);let popupParent=this.getPopupParent();return popupParent===eDocument.body?popupParent=eDocument.documentElement:getComputedStyle(popupParent).position==="static"&&(popupParent=popupParent.offsetParent),_getElementRectWithOffset(popupParent)}keepXYWithinBounds(ePopup,position,direction){const isVertical=direction===0,sizeProperty=isVertical?"clientHeight":"clientWidth",anchorProperty=isVertical?"top":"left",offsetProperty=isVertical?"height":"width",scrollPositionProperty=isVertical?"scrollTop":"scrollLeft",eDocument=_getDocument(this.beans),docElement=eDocument.documentElement,popupParent=this.getPopupParent(),popupRect=ePopup.getBoundingClientRect(),parentRect=popupParent.getBoundingClientRect(),documentRect=eDocument.documentElement.getBoundingClientRect(),isBody=popupParent===eDocument.body,offsetSize=Math.ceil(popupRect[offsetProperty]);let sizeOfParent=isBody?(isVertical?_getAbsoluteHeight:_getAbsoluteWidth)(docElement)+docElement[scrollPositionProperty]:popupParent[sizeProperty];isBody&&(sizeOfParent-=Math.abs(documentRect[anchorProperty]-parentRect[anchorProperty]));const max=sizeOfParent-offsetSize;return Math.min(Math.max(position,0),Math.abs(max))}addPopup(params){const eDocument=_getDocument(this.beans),{eChild,ariaLabel,alwaysOnTop,positionCallback,anchorToElement}=params;if(!eDocument)return _warn(122),{hideFunc:__name(()=>{},"hideFunc")};const pos=this.getPopupIndex(eChild);if(pos!==-1)return{hideFunc:this.popupList[pos].hideFunc};this.initialisePopupPosition(eChild);const wrapperEl=this.createPopupWrapper(eChild,ariaLabel,!!alwaysOnTop),removeListeners=this.addEventListenersToPopup({...params,wrapperEl});return positionCallback&&positionCallback(),this.addPopupToPopupList(eChild,wrapperEl,removeListeners,anchorToElement),{hideFunc:removeListeners}}initialisePopupPosition(element){const ePopupParentRect=this.getPopupParent().getBoundingClientRect();_exists(element.style.top)||(element.style.top=`${ePopupParentRect.top*-1}px`),_exists(element.style.left)||(element.style.left=`${ePopupParentRect.left*-1}px`)}createPopupWrapper(element,ariaLabel,alwaysOnTop){const ePopupParent=this.getPopupParent(),{environment,gos}=this.beans,eWrapper=_createElement({tag:"div"});return environment.applyThemeClasses(eWrapper),eWrapper.classList.add("ag-popup"),element.classList.add(gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),element.hasAttribute("role")||_setAriaRole(element,"dialog"),_setAriaLabel(element,ariaLabel),eWrapper.appendChild(element),ePopupParent.appendChild(eWrapper),alwaysOnTop?this.setAlwaysOnTop(element,!0):this.bringPopupToFront(element),eWrapper}handleThemeChange(e){if(e.themeChanged){const environment=this.beans.environment;for(const popup of this.popupList)environment.applyThemeClasses(popup.wrapper)}}addEventListenersToPopup(params){const beans=this.beans,eDocument=_getDocument(beans),ePopupParent=this.getPopupParent(),{wrapperEl,eChild:popupEl,closedCallback,afterGuiAttached,closeOnEsc,modal}=params;let popupHidden=!1;const hidePopupOnKeyboardEvent=__name(event=>{if(!wrapperEl.contains(_getActiveDomElement(beans)))return;event.key===KeyCode.ESCAPE&&!_isStopPropagationForAgGrid(event)&&removeListeners({keyboardEvent:event})},"hidePopupOnKeyboardEvent"),hidePopupOnMouseEvent=__name(event=>removeListeners({mouseEvent:event}),"hidePopupOnMouseEvent"),hidePopupOnTouchEvent=__name(event=>removeListeners({touchEvent:event}),"hidePopupOnTouchEvent"),removeListeners=__name((popupParams={})=>{const{mouseEvent,touchEvent,keyboardEvent,forceHide}=popupParams;!forceHide&&(this.isEventFromCurrentPopup({mouseEvent,touchEvent},popupEl)||popupHidden)||(popupHidden=!0,ePopupParent.removeChild(wrapperEl),eDocument.removeEventListener("keydown",hidePopupOnKeyboardEvent),eDocument.removeEventListener("mousedown",hidePopupOnMouseEvent),eDocument.removeEventListener("touchstart",hidePopupOnTouchEvent),eDocument.removeEventListener("contextmenu",hidePopupOnMouseEvent),this.eventSvc.removeEventListener("dragStarted",hidePopupOnMouseEvent),closedCallback&&closedCallback(mouseEvent||touchEvent||keyboardEvent),this.removePopupFromPopupList(popupEl))},"removeListeners");return afterGuiAttached&&afterGuiAttached({hidePopup:removeListeners}),window.setTimeout(()=>{closeOnEsc&&eDocument.addEventListener("keydown",hidePopupOnKeyboardEvent),modal&&(eDocument.addEventListener("mousedown",hidePopupOnMouseEvent),this.eventSvc.addEventListener("dragStarted",hidePopupOnMouseEvent),eDocument.addEventListener("touchstart",hidePopupOnTouchEvent),eDocument.addEventListener("contextmenu",hidePopupOnMouseEvent))},0),removeListeners}addPopupToPopupList(element,wrapperEl,removeListeners,anchorToElement){this.popupList.push({element,wrapper:wrapperEl,hideFunc:removeListeners,instanceId:instanceIdSeq++,isAnchored:!!anchorToElement}),anchorToElement&&this.setPopupPositionRelatedToElement(element,anchorToElement)}getPopupIndex(el){return this.popupList.findIndex(p=>p.element===el)}setPopupPositionRelatedToElement(popupEl,relativeElement){const popupIndex=this.getPopupIndex(popupEl);if(popupIndex===-1)return;const popup=this.popupList[popupIndex];if(popup.stopAnchoringPromise&&popup.stopAnchoringPromise.then(destroyFunc=>destroyFunc&&destroyFunc()),popup.stopAnchoringPromise=void 0,popup.isAnchored=!1,!relativeElement)return;const destroyPositionTracker=this.keepPopupPositionedRelativeTo({element:relativeElement,ePopup:popupEl,hidePopup:popup.hideFunc});return popup.stopAnchoringPromise=destroyPositionTracker,popup.isAnchored=!0,destroyPositionTracker}removePopupFromPopupList(element){this.setAlignedStyles(element,null),this.setPopupPositionRelatedToElement(element,null),this.popupList=this.popupList.filter(p=>p.element!==element)}keepPopupPositionedRelativeTo(params){const eParent=this.getPopupParent(),parentRect=eParent.getBoundingClientRect(),{element,ePopup}=params,sourceRect=element.getBoundingClientRect(),extractFromPixelValue=__name(pxSize=>parseInt(pxSize.substring(0,pxSize.length-1),10),"extractFromPixelValue"),createPosition=__name((prop,direction)=>{const initialDiff=parentRect[prop]-sourceRect[prop],initial=extractFromPixelValue(ePopup.style[prop]);return{initialDiff,lastDiff:initialDiff,initial,last:initial,direction}},"createPosition"),topPosition=createPosition("top",0),leftPosition=createPosition("left",1),fwOverrides=this.beans.frameworkOverrides;return new AgPromise(resolve=>{fwOverrides.wrapIncoming(()=>{fwOverrides.setInterval(()=>{const pRect=eParent.getBoundingClientRect(),sRect=element.getBoundingClientRect();if(sRect.top==0&&sRect.left==0&&sRect.height==0&&sRect.width==0){params.hidePopup();return}const calculateNewPosition=__name((position,prop)=>{const current=extractFromPixelValue(ePopup.style[prop]);position.last!==current&&(position.initial=current,position.last=current);const currentDiff=pRect[prop]-sRect[prop];if(currentDiff!=position.lastDiff){const newValue=this.keepXYWithinBounds(ePopup,position.initial+position.initialDiff-currentDiff,position.direction);ePopup.style[prop]=`${newValue}px`,position.last=newValue}position.lastDiff=currentDiff},"calculateNewPosition");calculateNewPosition(topPosition,"top"),calculateNewPosition(leftPosition,"left")},200).then(intervalId=>{resolve(__name(()=>{intervalId!=null&&window.clearInterval(intervalId)},"result"))})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(popup=>popup.isAnchored)}isEventFromCurrentPopup(params,target){const{mouseEvent,touchEvent}=params,event=mouseEvent||touchEvent;if(!event)return!1;const indexOfThisChild=this.getPopupIndex(target);if(indexOfThisChild===-1)return!1;for(let i=indexOfThisChild;i<this.popupList.length;i++){const popup=this.popupList[i];if(_isElementInEventPath(popup.element,event))return!0}return this.isElementWithinCustomPopup(event.target)}isElementWithinCustomPopup(el){const eDocument=_getDocument(this.beans);for(;el&&el!==eDocument.body;){if(el.classList.contains("ag-custom-component-popup")||el.parentElement===null)return!0;el=el.parentElement}return!1}getWrapper(ePopup){for(;!ePopup.classList.contains("ag-popup")&&ePopup.parentElement;)ePopup=ePopup.parentElement;return ePopup.classList.contains("ag-popup")?ePopup:null}setAlwaysOnTop(ePopup,alwaysOnTop){const eWrapper=this.getWrapper(ePopup);eWrapper&&(eWrapper.classList.toggle("ag-always-on-top",!!alwaysOnTop),alwaysOnTop&&this.bringPopupToFront(eWrapper))}bringPopupToFront(ePopup){const parent=this.getPopupParent(),popupList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup")),popupLen=popupList.length,eWrapper=this.getWrapper(ePopup);if(!eWrapper||popupLen<=1||!parent.contains(ePopup))return;const standardPopupList=[],alwaysOnTopList=[];for(const popup of popupList)popup!==eWrapper&&(popup.classList.contains("ag-always-on-top")?alwaysOnTopList.push(popup):standardPopupList.push(popup));const innerElsScrollMap=[],onTopLength=alwaysOnTopList.length,targetList=eWrapper.classList.contains("ag-always-on-top")||!onTopLength?[...standardPopupList,...alwaysOnTopList,eWrapper]:[...standardPopupList,eWrapper,...alwaysOnTopList];for(let i=0;i<=popupLen;i++){const currentPopup=targetList[i];if(popupList[i]===targetList[i]||currentPopup===eWrapper)continue;currentPopup.querySelectorAll("div").forEach(el=>{el.scrollTop!==0&&innerElsScrollMap.push([el,el.scrollTop])}),i===0?parent.insertAdjacentElement("afterbegin",currentPopup):targetList[i-1].insertAdjacentElement("afterend",currentPopup)}for(;innerElsScrollMap.length;){const currentEl=innerElsScrollMap.pop();currentEl[0].scrollTop=currentEl[1]}}},__name(_a156,"PopupService"),_a156),PopupModule={moduleName:"Popup",version:VERSION,beans:[PopupService]},columnFiltersCSS=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input [disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:1px solid var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function isColumnFilterPresent(beans){const filterManager=beans.filterManager;return!!(filterManager!=null&&filterManager.isColumnFilterPresent())||!!(filterManager!=null&&filterManager.isAggregateFilterPresent())}__name(isColumnFilterPresent,"isColumnFilterPresent");function getColumnFilterInstance(beans,key){var _a238;return((_a238=beans.filterManager)==null?void 0:_a238.getColumnFilterInstance(key))??Promise.resolve(void 0)}__name(getColumnFilterInstance,"getColumnFilterInstance");function destroyFilter(beans,key){var _a238;const column=beans.colModel.getColDefCol(key);if(column)return(_a238=beans.filterManager)==null?void 0:_a238.destroyFilter(column,"api")}__name(destroyFilter,"destroyFilter");function setFilterModel(beans,model){beans.frameworkOverrides.wrapIncoming(()=>{var _a238;return(_a238=beans.filterManager)==null?void 0:_a238.setFilterModel(model)})}__name(setFilterModel,"setFilterModel");function getFilterModel(beans){var _a238;return((_a238=beans.filterManager)==null?void 0:_a238.getFilterModel())??{}}__name(getFilterModel,"getFilterModel");function getColumnFilterModel(beans,column){var _a238;return((_a238=beans.filterManager)==null?void 0:_a238.getColumnFilterModel(column))??null}__name(getColumnFilterModel,"getColumnFilterModel");function setColumnFilterModel(beans,column,model){var _a238;return((_a238=beans.filterManager)==null?void 0:_a238.setColumnFilterModel(column,model))??Promise.resolve()}__name(setColumnFilterModel,"setColumnFilterModel");function showColumnFilter(beans,colKey){var _a238;const column=beans.colModel.getCol(colKey);if(!column){_error(12,{colKey});return}(_a238=beans.menuSvc)==null||_a238.showFilterMenu({column,containerType:"columnFilter",positionBy:"auto"})}__name(showColumnFilter,"showColumnFilter");var MONTH_LOCALE_TEXT={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},MONTH_KEYS=["january","february","march","april","may","june","july","august","september","october","november","december"];function setFilterNumberComparator(a,b){return a==null?-1:b==null?1:parseFloat(a)-parseFloat(b)}__name(setFilterNumberComparator,"setFilterNumberComparator");var _a157,ColumnFilterService=(_a157=class extends BeanStub{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}postConstruct(){var _a238,_b2;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),beforeRefreshModel:__name(({params})=>{var _a239;(params.rowDataUpdated||(_a239=params.changedProps)!=null&&_a239.has("treeData"))&&this.onNewRowsLoaded("rowDataUpdated")},"beforeRefreshModel"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...((_b2=(_a238=this.gos.get("initialState"))==null?void 0:_a238.filter)==null?void 0:_b2.filterModel)??{}}}setFilterModel(model,source="api"){const{colModel,dataTypeSvc,filterManager}=this.beans;if(dataTypeSvc!=null&&dataTypeSvc.isPendingInference){this.filterModelUpdateQueue.push({model,source});return}const allPromises=[],previousModel=this.getFilterModel(!0);if(model){const modelKeys=new Set(Object.keys(model));this.allColumnFilters.forEach((filterWrapper,colId)=>{const newModel=model[colId];allPromises.push(setModelOnFilterWrapper(filterWrapper.filterPromise,newModel)),modelKeys.delete(colId)}),modelKeys.forEach(colId=>{const column=colModel.getColDefCol(colId)||colModel.getCol(colId);if(!column){_warn(62,{colId});return}if(!column.isFilterAllowed()){_warn(63,{colId});return}const filterWrapper=this.getOrCreateFilterWrapper(column);if(!filterWrapper){_warn(64,{colId});return}allPromises.push(setModelOnFilterWrapper(filterWrapper.filterPromise,model[colId]))})}else this.allColumnFilters.forEach(filterWrapper=>{allPromises.push(setModelOnFilterWrapper(filterWrapper.filterPromise,null))});AgPromise.all(allPromises).then(()=>{const currentModel=this.getFilterModel(!0),columns=[];this.allColumnFilters.forEach((filterWrapper,colId)=>{const before=previousModel?previousModel[colId]:null,after=currentModel?currentModel[colId]:null;_jsonEquals(before,after)||columns.push(filterWrapper.column)}),columns.length>0&&(filterManager==null||filterManager.onFilterChanged({columns,source}))})}getFilterModel(excludeInitialState){var _a238;const result={},{allColumnFilters,initialFilterModel,beans:{colModel}}=this;if(allColumnFilters.forEach((filterWrapper,key)=>{const model=this.getModelFromFilterWrapper(filterWrapper);_exists(model)&&(result[key]=model)}),!excludeInitialState)for(const colId of Object.keys(initialFilterModel)){const model=initialFilterModel[colId];_exists(model)&&!allColumnFilters.has(colId)&&((_a238=colModel.getCol(colId))!=null&&_a238.isFilterAllowed())&&(result[colId]=model)}return result}getModelFromFilterWrapper(filterWrapper){const{filter}=filterWrapper;return filter?typeof filter.getModel!="function"?(_warn(66),null):filter.getModel():this.getModelFromInitialState(filterWrapper.column)}getModelFromInitialState(column){return this.initialFilterModel[column.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){this.initialFilterModel={};const{allColumnFilters}=this;return allColumnFilters.size?(allColumnFilters.forEach(filterWrapper=>this.disposeFilterWrapper(filterWrapper,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(node,filterToSkip){return this.doColumnFiltersPass(node,filterToSkip,!0)}updateActiveFilters(){const isFilterActive=__name(filter=>filter?filter.isFilterActive?filter.isFilterActive():(_warn(67),!1):!1,"isFilterActive"),{colModel,gos}=this.beans,groupFilterEnabled=!!_getGroupAggFiltering(gos),isAggFilter=__name(column=>{if(!column.isPrimary())return!0;const isShowingPrimaryColumns=!colModel.isPivotActive();return!column.isValueActive()||!isShowingPrimaryColumns?!1:colModel.isPivotMode()?!0:groupFilterEnabled},"isAggFilter"),activeAggregateFilters=[],activeColumnFilters=[];return this.forEachColumnFilter((filter,filterWrapper)=>{isFilterActive(filter)&&(isAggFilter(filterWrapper.column)?activeAggregateFilters.push(filter):activeColumnFilters.push(filter))}).then(()=>{this.activeAggregateFilters=activeAggregateFilters,this.activeColumnFilters=activeColumnFilters})}updateFilterFlagInColumns(source,additionalEventAttributes){return this.forEachColumnFilter((filter,filterWrapper)=>this.setColFilterActive(filterWrapper.column,filter.isFilterActive(),source,additionalEventAttributes))}forEachColumnFilter(callback){const promises=[];return this.allColumnFilters.forEach(filterWrapper=>{const filterPromise=filterWrapper.filterPromise;filterPromise&&promises.push(filterPromise.then(filter=>callback(filter,filterWrapper)))}),AgPromise.all(promises)}doColumnFiltersPass(node,filterToSkip,targetAggregates){const{data,aggData}=node,targetedFilters=targetAggregates?this.activeAggregateFilters:this.activeColumnFilters,targetedData=targetAggregates?aggData:data;for(let i=0;i<targetedFilters.length;i++){const filter=targetedFilters[i];if(!(filter==null||filter===filterToSkip)){if(typeof filter.doesFilterPass!="function"){_error(91);continue}if(!filter.doesFilterPass({node,data:targetedData}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(params){const{rowRenderer,filterManager}=this.beans,action=__name(()=>{this.isAlive()&&(filterManager==null||filterManager.onFilterChanged(params))},"action");rowRenderer.isRefreshInProgress()?setTimeout(action,0):action()}updateBeforeFilterChanged(params={}){const{filterInstance,additionalEventAttributes}=params;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",additionalEventAttributes).then(()=>{this.allColumnFilters.forEach(filterWrapper=>{filterWrapper.filterPromise&&filterWrapper.filterPromise.then(filter=>{filter&&filter!==filterInstance&&filter.onAnyFilterChanged&&filter.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(source){this.forEachColumnFilter(filter=>{var _a238;(_a238=filter.onNewRowsLoaded)==null||_a238.call(filter)}).then(()=>this.updateFilterFlagInColumns(source,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createGetValue(filterColumn){const{filterValueSvc,colModel}=this.beans;return(rowNode,column)=>{const columnToUse=column?colModel.getCol(column):filterColumn;return columnToUse?filterValueSvc.getValue(columnToUse,rowNode):void 0}}isFilterActive(column){const{filter}=this.cachedFilter(column)??{};return filter?filter.isFilterActive():this.getModelFromInitialState(column)!=null}getOrCreateFilterWrapper(column){if(!column.isFilterAllowed())return null;let filterWrapper=this.cachedFilter(column);return filterWrapper||(filterWrapper=this.createFilterWrapper(column),this.setColumnFilterWrapper(column,filterWrapper)),filterWrapper}cachedFilter(column){return this.allColumnFilters.get(column.getColId())}getDefaultFilter(column){let defaultFilter;const{gos,dataTypeSvc}=this.beans;if(_isSetFilterByDefault(gos))defaultFilter="agSetColumnFilter";else{const cellDataType=dataTypeSvc==null?void 0:dataTypeSvc.getBaseDataType(column);cellDataType==="number"?defaultFilter="agNumberColumnFilter":cellDataType==="date"||cellDataType==="dateString"?defaultFilter="agDateColumnFilter":defaultFilter="agTextColumnFilter"}return defaultFilter}getDefaultFloatingFilter(column){let defaultFloatingFilterType;const{gos,dataTypeSvc}=this.beans;if(_isSetFilterByDefault(gos))defaultFloatingFilterType="agSetColumnFloatingFilter";else{const cellDataType=dataTypeSvc==null?void 0:dataTypeSvc.getBaseDataType(column);cellDataType==="number"?defaultFloatingFilterType="agNumberColumnFloatingFilter":cellDataType==="date"||cellDataType==="dateString"?defaultFloatingFilterType="agDateColumnFloatingFilter":defaultFloatingFilterType="agTextColumnFloatingFilter"}return defaultFloatingFilterType}createFilterInstance(column,filterWrapper){const defaultFilter=this.getDefaultFilter(column),colDef=column.getColDef();let filterInstance;const params={...this.createFilterParams(column,colDef),filterModifiedCallback:__name(()=>this.filterModifiedCallbackFactory(filterInstance,column)(),"filterModifiedCallback"),filterChangedCallback:__name(additionalEventAttributes=>this.filterChangedCallbackFactory(filterInstance,column)(additionalEventAttributes),"filterChangedCallback"),doesRowPassOtherFilter:__name(node=>{var _a238;return((_a238=this.beans.filterManager)==null?void 0:_a238.doesRowPassOtherFilters(filterInstance,node))??!0},"doesRowPassOtherFilter")},compDetails=_getFilterDetails(this.beans.userCompFactory,colDef,params,defaultFilter);return compDetails?{filterPromise:__name(()=>{const filterPromise=compDetails.newAgStackInstance();return filterPromise.then(r=>{filterInstance=r,filterWrapper&&(filterWrapper.filter=r??void 0)}),filterPromise},"filterPromise"),compDetails}:{filterPromise:null,compDetails:null}}createFilterParams(column,colDef){return _addGridCommonParams(this.gos,{column,colDef,rowModel:this.beans.rowModel,filterChangedCallback:__name(()=>{},"filterChangedCallback"),filterModifiedCallback:__name(()=>{},"filterModifiedCallback"),getValue:this.createGetValue(column),doesRowPassOtherFilter:__name(()=>!0,"doesRowPassOtherFilter")})}createFilterWrapper(column){const filterWrapper={column,filterPromise:null,compDetails:null},{filterPromise,compDetails}=this.createFilterInstance(column,filterWrapper);return filterWrapper.filterPromise=(filterPromise==null?void 0:filterPromise())??null,filterWrapper.compDetails=compDetails,filterWrapper}onColumnsChanged(){const columns=[],{colModel,filterManager}=this.beans;this.allColumnFilters.forEach((wrapper,colId)=>{let currentColumn;wrapper.column.isPrimary()?currentColumn=colModel.getColDefCol(colId):currentColumn=colModel.getCol(colId),!(currentColumn&&currentColumn===wrapper.column)&&(columns.push(wrapper.column),this.disposeFilterWrapper(wrapper,"columnChanged"),this.disposeColumnListener(colId))});const allFiltersAreGroupFilters=columns.every(isGroupFilter);columns.length>0&&!allFiltersAreGroupFilters?filterManager==null||filterManager.onFilterChanged({columns,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){var _a238,_b2;(_b2=(_a238=this.beans.autoColSvc)==null?void 0:_a238.getColumns())==null||_b2.forEach(groupColumn=>{isGroupFilter(groupColumn)&&this.getOrCreateFilterWrapper(groupColumn)})}isFilterAllowed(column){if(!column.isFilterAllowed())return!1;const{filter}=this.allColumnFilters.get(column.getColId())??{};return filter&&typeof(filter==null?void 0:filter.isFilterAllowed)=="function"?filter.isFilterAllowed():!0}getFloatingFilterCompDetails(column,showParentFilter){const parentFilterInstance=__name(callback=>{var _a238;const filterComponent=(_a238=this.getOrCreateFilterWrapper(column))==null?void 0:_a238.filterPromise;filterComponent!=null&&filterComponent.then(instance=>{callback(_unwrapUserComp(instance))})},"parentFilterInstance"),colDef=column.getColDef(),filterParams={...this.createFilterParams(column,colDef),filterChangedCallback:__name(()=>parentFilterInstance(filterInstance=>this.filterChangedCallbackFactory(filterInstance,column)()),"filterChangedCallback")},{userCompFactory,frameworkOverrides}=this.beans,finalFilterParams=_mergeFilterParamsWithApplicationProvidedParams(userCompFactory,colDef,filterParams);let defaultFloatingFilterType=_getDefaultFloatingFilterType(frameworkOverrides,colDef,()=>this.getDefaultFloatingFilter(column));defaultFloatingFilterType==null&&(defaultFloatingFilterType="agReadOnlyFloatingFilter");const params=_addGridCommonParams(this.gos,{column,filterParams:finalFilterParams,currentParentModel:__name(()=>this.getCurrentFloatingFilterParentModel(column),"currentParentModel"),parentFilterInstance,showParentFilter});return _getFloatingFilterCompDetails(userCompFactory,colDef,params,defaultFloatingFilterType)}getCurrentFloatingFilterParentModel(column){return this.getModelFromFilterWrapper(this.cachedFilter(column)??{column})}destroyFilter(column,source="api"){const colId=column.getColId(),filterWrapper=this.allColumnFilters.get(colId);this.disposeColumnListener(colId),delete this.initialFilterModel[colId],filterWrapper&&this.disposeFilterWrapper(filterWrapper,source).then(wasActive=>{var _a238;wasActive&&this.isAlive()&&((_a238=this.beans.filterManager)==null||_a238.onFilterChanged({columns:[column],source:"api"}))})}disposeColumnListener(colId){const columnListener=this.allColumnListeners.get(colId);columnListener&&(this.allColumnListeners.delete(colId),columnListener())}disposeFilterWrapper(filterWrapper,source){var _a238;return((_a238=filterWrapper.filterPromise)==null?void 0:_a238.then(filter=>{const isActive=!!(filter!=null&&filter.isFilterActive());return this.destroyBean(filter),this.setColFilterActive(filterWrapper.column,!1,"filterDestroyed"),this.allColumnFilters.delete(filterWrapper.column.getColId()),this.eventSvc.dispatchEvent({type:"filterDestroyed",source,column:filterWrapper.column}),isActive}))??AgPromise.resolve(!1)}filterModifiedCallbackFactory(filter,column){return()=>{this.eventSvc.dispatchEvent({type:"filterModified",column,filterInstance:filter})}}filterChangedCallbackFactory(filter,column){return additionalEventAttributes=>{const source=(additionalEventAttributes==null?void 0:additionalEventAttributes.source)??"columnFilter",params={filter,additionalEventAttributes,columns:[column],source};this.callOnFilterChangedOutsideRenderCycle(params)}}checkDestroyFilter(colId){const filterWrapper=this.allColumnFilters.get(colId);if(!filterWrapper)return;const column=filterWrapper.column,{compDetails}=column.isFilterAllowed()?this.createFilterInstance(column):{compDetails:null};if(this.areFilterCompsDifferent(filterWrapper.compDetails,compDetails)){this.destroyFilter(column,"paramsUpdated");return}const newFilterParams=column.getColDef().filterParams;if(!filterWrapper.filterPromise){this.destroyFilter(column,"paramsUpdated");return}filterWrapper.filterPromise.then(filter=>{(filter!=null&&filter.refresh?filter.refresh({...this.createFilterParams(column,column.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(filter,column),filterChangedCallback:this.filterChangedCallbackFactory(filter,column),doesRowPassOtherFilter:__name(node=>{var _a238;return((_a238=this.beans.filterManager)==null?void 0:_a238.doesRowPassOtherFilters(filter,node))??!0},"doesRowPassOtherFilter"),...newFilterParams}):!0)===!1&&this.destroyFilter(column,"paramsUpdated")})}setColumnFilterWrapper(column,filterWrapper){const colId=column.getColId();this.allColumnFilters.set(colId,filterWrapper),this.allColumnListeners.set(colId,this.addManagedListeners(column,{colDefChanged:__name(()=>this.checkDestroyFilter(colId),"colDefChanged")})[0])}areFilterCompsDifferent(oldCompDetails,newCompDetails){if(!newCompDetails||!oldCompDetails)return!0;const{componentClass:oldComponentClass}=oldCompDetails,{componentClass:newComponentClass}=newCompDetails;return!(oldComponentClass===newComponentClass||(oldComponentClass==null?void 0:oldComponentClass.render)&&(newComponentClass==null?void 0:newComponentClass.render)&&oldComponentClass.render===newComponentClass.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(col=>col.getColDef().floatingFilter)}getColumnFilterInstance(key){return new Promise(resolve=>{this.getFilterInstanceImpl(key).then(filter=>{resolve(_unwrapUserComp(filter))})})}getFilterInstanceImpl(key){var _a238;const column=this.beans.colModel.getColDefCol(key);return column?((_a238=this.getOrCreateFilterWrapper(column))==null?void 0:_a238.filterPromise)??AgPromise.resolve(null):AgPromise.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model,source})=>this.setFilterModel(model,source)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key,model,resolve})=>{this.setColumnFilterModel(key,model).then(()=>resolve())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(key){const filterWrapper=this.getFilterWrapper(key);return filterWrapper?this.getModelFromFilterWrapper(filterWrapper):null}setColumnFilterModel(key,model){const{colModel,dataTypeSvc}=this.beans;if(dataTypeSvc!=null&&dataTypeSvc.isPendingInference){let resolve=__name(()=>{},"resolve");const promise=new Promise(res=>{resolve=res});return this.columnFilterModelUpdateQueue.push({key,model,resolve}),promise}const column=colModel.getColDefCol(key),filterWrapper=column?this.getOrCreateFilterWrapper(column):null;return filterWrapper?__name(promise=>new Promise(resolve=>{promise.then(result=>resolve(result))}),"convertPromise")(setModelOnFilterWrapper(filterWrapper.filterPromise,model)):Promise.resolve()}getFilterWrapper(key){const column=this.beans.colModel.getColDefCol(key);return column?this.cachedFilter(column)??null:null}setColDefPropertiesForDataType(colDef,dataTypeDefinition,formatValue){const usingSetFilter=_isSetFilterByDefault(this.gos),translate=this.getLocaleTextFunc(),mergeFilterParams=__name(params=>{const{filterParams}=colDef;colDef.filterParams=typeof filterParams=="object"?{...filterParams,...params}:params},"mergeFilterParams");switch(dataTypeDefinition.baseDataType){case"number":{usingSetFilter&&mergeFilterParams({comparator:setFilterNumberComparator});break}case"boolean":{mergeFilterParams(usingSetFilter?{valueFormatter:__name(params=>_exists(params.value)?translate(String(params.value),params.value?"True":"False"):translate("blanks","(Blanks)"),"valueFormatter")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:__name((_filterValues,cellValue)=>cellValue,"predicate"),numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:__name((_filterValues,cellValue)=>cellValue===!1,"predicate"),numberOfInputs:0}]});break}case"date":{mergeFilterParams(usingSetFilter?{valueFormatter:__name(params=>{const valueFormatted=formatValue(params);return _exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")},"valueFormatter"),treeList:!0,treeListFormatter:__name((pathKey,level)=>{if(pathKey==="NaN")return translate("invalidDate","Invalid Date");if(level===1&&pathKey!=null){const monthKey=MONTH_KEYS[Number(pathKey)-1];return translate(monthKey,MONTH_LOCALE_TEXT[monthKey])}return pathKey??translate("blanks","(Blanks)")},"treeListFormatter")}:{isValidDate});break}case"dateString":{const convertToDate=dataTypeDefinition.dateParser;mergeFilterParams(usingSetFilter?{valueFormatter:__name(params=>{const valueFormatted=formatValue(params);return _exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")},"valueFormatter"),treeList:!0,treeListPathGetter:__name(value=>{const date=convertToDate(value??void 0);return date?[String(date.getFullYear()),String(date.getMonth()+1),String(date.getDate())]:null},"treeListPathGetter"),treeListFormatter:__name((pathKey,level)=>{if(level===1&&pathKey!=null){const monthKey=MONTH_KEYS[Number(pathKey)-1];return translate(monthKey,MONTH_LOCALE_TEXT[monthKey])}return pathKey??translate("blanks","(Blanks)")},"treeListFormatter")}:{comparator:__name((filterDate,cellValue)=>{const cellAsDate=convertToDate(cellValue);return cellValue==null||cellAsDate<filterDate?-1:cellAsDate>filterDate?1:0},"comparator"),isValidDate:__name(value=>typeof value=="string"&&isValidDate(convertToDate(value)),"isValidDate")});break}case"object":{usingSetFilter?mergeFilterParams({valueFormatter:__name(params=>{const valueFormatted=formatValue(params);return _exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")},"valueFormatter")}):colDef.filterValueGetter=params=>formatValue({column:params.column,node:params.node,value:this.beans.valueSvc.getValue(params.column,params.node)});break}}}setColFilterActive(column,active,source,additionalEventAttributes){column.filterActive!==active&&(column.filterActive=active,column.dispatchColEvent("filterActiveChanged",source)),column.dispatchColEvent("filterChanged",source,additionalEventAttributes)}destroy(){super.destroy(),this.allColumnFilters.forEach(filterWrapper=>this.disposeFilterWrapper(filterWrapper,"gridDestroyed")),this.allColumnListeners.clear()}},__name(_a157,"ColumnFilterService"),_a157);function setModelOnFilterWrapper(filterPromise,newModel){return filterPromise?new AgPromise(resolve=>{filterPromise.then(filter=>{typeof filter.setModel!="function"&&(_warn(65),resolve()),(filter.setModel(newModel)||AgPromise.resolve()).then(()=>resolve())})}):AgPromise.resolve()}__name(setModelOnFilterWrapper,"setModelOnFilterWrapper");function isGroupFilter(column){return column.getColDef().filter==="agGroupColumnFilter"}__name(isGroupFilter,"isGroupFilter");function isValidDate(value){return value instanceof Date&&!isNaN(value.getTime())}__name(isValidDate,"isValidDate");function isAnyFilterPresent(beans){var _a238;return!!((_a238=beans.filterManager)!=null&&_a238.isAnyFilterPresent())}__name(isAnyFilterPresent,"isAnyFilterPresent");function onFilterChanged(beans,source="api"){var _a238;(_a238=beans.filterManager)==null||_a238.onFilterChanged({source})}__name(onFilterChanged,"onFilterChanged");var _a158,FilterManager=(_a158=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(beans){this.quickFilter=beans.quickFilter,this.advancedFilter=beans.advancedFilter,this.colFilter=beans.colFilter}postConstruct(){const refreshFiltersForAggregations=this.refreshFiltersForAggregations.bind(this),updateAdvFilterColumns=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:refreshFiltersForAggregations,columnPivotChanged:refreshFiltersForAggregations,columnPivotModeChanged:refreshFiltersForAggregations,newColumnsLoaded:updateAdvFilterColumns,columnVisible:updateAdvFilterColumns,advancedFilterEnabledChanged:__name(({enabled})=>this.onAdvFilterEnabledChanged(enabled),"advancedFilterEnabledChanged"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:__name(()=>this.onFilterChanged({source:"quickFilter"}),"quickFilterChanged")});const{gos}=this;this.alwaysPassFilter=gos.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=gos.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const isFilterPresent=this.gos.getCallback("isExternalFilterPresent");return typeof isFilterPresent=="function"&&isFilterPresent({})}doesExternalFilterPass(node){const doesFilterPass=this.gos.get("doesExternalFilterPass");return typeof doesFilterPass=="function"&&doesFilterPass(node)}setFilterModel(model,source="api"){var _a238;if(this.isAdvFilterEnabled()){this.warnAdvFilters();return}(_a238=this.colFilter)==null||_a238.setFilterModel(model,source)}getFilterModel(){var _a238;return((_a238=this.colFilter)==null?void 0:_a238.getFilterModel())??{}}isColumnFilterPresent(){var _a238;return!!((_a238=this.colFilter)!=null&&_a238.isColumnFilterPresent())}isAggregateFilterPresent(){var _a238;return!!((_a238=this.colFilter)!=null&&_a238.isAggregateFilterPresent())}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(enabled){var _a238,_b2;enabled?(_a238=this.colFilter)!=null&&_a238.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):(_b2=this.advancedFilter)!=null&&_b2.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){var _a238;return!!((_a238=this.advancedFilter)!=null&&_a238.isEnabled())}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){_getGroupAggFiltering(this.gos)&&this.onFilterChanged()}onFilterChanged(params={}){const{source,additionalEventAttributes,columns=[]}=params;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(params):AgPromise.resolve()).then(()=>{var _a238;const filterChangedEvent={source,type:"filterChanged",columns};additionalEventAttributes&&_mergeDeep(filterChangedEvent,additionalEventAttributes),this.eventSvc.dispatchEvent(filterChangedEvent),(_a238=this.colFilter)==null||_a238.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var _a238;return!!((_a238=this.colFilter)!=null&&_a238.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var _a238;return!!((_a238=this.quickFilter)!=null&&_a238.isFilterPresent())}updateAggFiltering(){this.aggFiltering=!!_getGroupAggFiltering(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(filterToSkip,node){return this.doesRowPassFilter({rowNode:node,filterInstanceToSkip:filterToSkip})}doesRowPassAggregateFilters(params){var _a238;const{rowNode}=params;return(_a238=this.alwaysPassFilter)!=null&&_a238.call(this,rowNode)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(rowNode)||this.isAggregateFilterPresent()&&!this.colFilter.doAggregateFiltersPass(rowNode,params.filterInstanceToSkip))}doesRowPassFilter(params){var _a238;const{rowNode}=params;return(_a238=this.alwaysPassFilter)!=null&&_a238.call(this,rowNode)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(rowNode)||this.externalFilterPresent&&!this.doesExternalFilterPass(rowNode)||this.isColumnFilterPresent()&&!this.colFilter.doColumnFiltersPass(rowNode,params.filterInstanceToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(rowNode))}isFilterActive(column){var _a238;return!!((_a238=this.colFilter)!=null&&_a238.isFilterActive(column))}getOrCreateFilterWrapper(column){var _a238;return((_a238=this.colFilter)==null?void 0:_a238.getOrCreateFilterWrapper(column))??null}getDefaultFloatingFilter(column){return this.colFilter.getDefaultFloatingFilter(column)}createFilterParams(column,colDef){return this.colFilter.createFilterParams(column,colDef)}isFilterAllowed(column){var _a238;return this.isAdvFilterEnabled()?!1:!!((_a238=this.colFilter)!=null&&_a238.isFilterAllowed(column))}getFloatingFilterCompDetails(column,showParentFilter){var _a238;return(_a238=this.colFilter)==null?void 0:_a238.getFloatingFilterCompDetails(column,showParentFilter)}getCurrentFloatingFilterParentModel(column){var _a238;return(_a238=this.colFilter)==null?void 0:_a238.getCurrentFloatingFilterParentModel(column)}destroyFilter(column,source="api"){var _a238;(_a238=this.colFilter)==null||_a238.destroyFilter(column,source)}areFilterCompsDifferent(oldCompDetails,newCompDetails){var _a238;return!!((_a238=this.colFilter)!=null&&_a238.areFilterCompsDifferent(oldCompDetails,newCompDetails))}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(expression,source="api"){var _a238;if(this.isAdvFilterEnabled()){if((_a238=this.beans.dataTypeSvc)!=null&&_a238.isPendingInference){this.advFilterModelUpdateQueue.push(expression);return}this.advancedFilter.setModel(expression??null),this.onFilterChanged({source})}}toggleAdvFilterBuilder(show,source){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source,force:show})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var _a238;return this.isAdvFilterEnabled()?!1:!!((_a238=this.colFilter)!=null&&_a238.hasFloatingFilters())}getColumnFilterInstance(key){var _a238;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):((_a238=this.colFilter)==null?void 0:_a238.getColumnFilterInstance(key))??Promise.resolve(void 0)}warnAdvFilters(){_warn(68)}setupAdvFilterHeaderComp(eCompToInsertBefore){var _a238;(_a238=this.advancedFilter)==null||_a238.getCtrl().setupHeaderComp(eCompToInsertBefore)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach(model=>this.setAdvFilterModel(model)),this.advFilterModelUpdateQueue=[]}getColumnFilterModel(key){var _a238;return(_a238=this.colFilter)==null?void 0:_a238.getColumnFilterModel(key)}setColumnFilterModel(key,model){var _a238;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):((_a238=this.colFilter)==null?void 0:_a238.setColumnFilterModel(key,model))??Promise.resolve()}setColDefPropertiesForDataType(colDef,dataTypeDefinition,formatValue){var _a238;(_a238=this.colFilter)==null||_a238.setColDefPropertiesForDataType(colDef,dataTypeDefinition,formatValue)}},__name(_a158,"FilterManager"),_a158),_a159,FilterMenuFactory=(_a159=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(beans){this.popupSvc=beans.popupSvc}hideActiveMenu(){var _a238;(_a238=this.hidePopup)==null||_a238.call(this)}showMenuAfterMouseEvent(column,mouseEvent,containerType,onClosedCallback){this.showPopup(column,eMenu=>{var _a238;(_a238=this.popupSvc)==null||_a238.positionPopupUnderMouseEvent({column,type:containerType,mouseEvent,ePopup:eMenu})},containerType,mouseEvent.target,_isLegacyMenuEnabled(this.gos),onClosedCallback)}showMenuAfterButtonClick(column,eventSource,containerType,onClosedCallback){let multiplier=-1,alignSide="left";const isLegacyMenuEnabled=_isLegacyMenuEnabled(this.gos);!isLegacyMenuEnabled&&this.gos.get("enableRtl")&&(multiplier=1,alignSide="right");const nudgeX=isLegacyMenuEnabled?void 0:4*multiplier,nudgeY=isLegacyMenuEnabled?void 0:4;this.showPopup(column,eMenu=>{var _a238;(_a238=this.popupSvc)==null||_a238.positionPopupByComponent({type:containerType,eventSource,ePopup:eMenu,nudgeX,nudgeY,alignSide,keepWithinBounds:!0,position:"under",column})},containerType,eventSource,isLegacyMenuEnabled,onClosedCallback)}showPopup(column,positionCallback,containerType,eventSource,isLegacyMenuEnabled,onClosedCallback){var _a238;const comp=column?this.createBean(new FilterWrapperComp(column,"COLUMN_MENU")):void 0;if(this.activeMenu=comp,!(comp!=null&&comp.hasFilter())||!column){_error(57);return}const eMenu=_createElement({tag:"div",cls:`ag-menu${isLegacyMenuEnabled?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(eMenu,{keydown:__name(e=>this.trapFocusWithin(e,eMenu),"keydown")}),eMenu.appendChild(comp==null?void 0:comp.getGui());let hidePopup;const afterGuiDetached=__name(()=>comp==null?void 0:comp.afterGuiDetached(),"afterGuiDetached"),anchorToElement=_isColumnMenuAnchoringEnabled(this.gos)?eventSource??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,closedCallback=__name(e=>{_setColMenuVisible(column,!1,"contextMenu");const isKeyboardEvent=e instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),isKeyboardEvent&&eventSource&&_isVisible(eventSource)){const focusableEl=_findTabbableParent(eventSource);focusableEl==null||focusableEl.focus({preventScroll:!0})}afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,containerType,column),onClosedCallback==null||onClosedCallback()},"closedCallback"),translate=this.getLocaleTextFunc(),ariaLabel=isLegacyMenuEnabled&&containerType!=="columnFilter"?translate("ariaLabelColumnMenu","Column Menu"):translate("ariaLabelColumnFilter","Column Filter"),addPopupRes=(_a238=this.popupSvc)==null?void 0:_a238.addPopup({modal:!0,eChild:eMenu,closeOnEsc:!0,closedCallback,positionCallback:__name(()=>positionCallback(eMenu),"positionCallback"),anchorToElement,ariaLabel});addPopupRes&&(this.hidePopup=hidePopup=addPopupRes.hideFunc),comp.afterInit().then(()=>{positionCallback(eMenu),comp.afterGuiAttached({container:containerType,hidePopup})}),_setColMenuVisible(column,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,containerType,column)}trapFocusWithin(e,menu){e.key!==KeyCode.TAB||e.defaultPrevented||_findNextFocusableElement(this.beans,menu,!1,e.shiftKey)||(e.preventDefault(),_focusInto(menu,e.shiftKey))}dispatchVisibleChangedEvent(visible,containerType,column){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible,switchingTab:!1,key:containerType,column:column??null,columnGroup:null})}isMenuEnabled(column){return column.isFilterAllowed()&&(column.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},__name(_a159,"FilterMenuFactory"),_a159),_a160,FilterValueService=(_a160=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(column,rowNode){if(!rowNode)return;const colDef=column.getColDef(),{filterValueGetter}=colDef;return filterValueGetter?this.executeFilterValueGetter(filterValueGetter,rowNode.data,column,rowNode,colDef):this.beans.valueSvc.getValue(column,rowNode)}executeFilterValueGetter(valueGetter,data,column,node,colDef){const{expressionSvc,valueSvc}=this.beans,params=_addGridCommonParams(this.gos,{data,node,column,colDef,getValue:valueSvc.getValueCallback.bind(valueSvc,node)});return typeof valueGetter=="function"?valueGetter(params):expressionSvc==null?void 0:expressionSvc.evaluate(valueGetter,params)}},__name(_a160,"FilterValueService"),_a160),ReadOnlyFloatingFilterElement={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},_a161,ReadOnlyFloatingFilter=(_a161=class extends Component{constructor(){super(ReadOnlyFloatingFilterElement,[AgInputTextFieldSelector]),this.eFloatingFilterText=RefPlaceholder}init(params){this.params=params;const displayName=this.beans.colNames.getDisplayNameForColumn(params.column,"header",!0);this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${displayName} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`)}onParentModelChanged(parentModel){if(parentModel==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(filterInstance=>{if(filterInstance.getModelAsString){const modelAsString=filterInstance.getModelAsString(parentModel);this.eFloatingFilterText.setValue(modelAsString)}})}refresh(params){this.init(params)}},__name(_a161,"ReadOnlyFloatingFilter"),_a161),_a162,OptionsFactory=(_a162=class{constructor(){this.customFilterOptions={}}init(params,defaultOptions){this.filterOptions=params.filterOptions||defaultOptions,this.mapCustomOptions(),this.selectDefaultItem(params)}mapCustomOptions(){const{filterOptions}=this;filterOptions&&filterOptions.forEach(filterOption=>{if(typeof filterOption=="string")return;const requiredProperties=[["displayKey"],["displayName"],["predicate","test"]],propertyCheck=__name(keys=>keys.some(key=>filterOption[key]!=null)?!0:(_warn(72,{keys}),!1),"propertyCheck");if(!requiredProperties.every(propertyCheck)){this.filterOptions=filterOptions.filter(v=>v===filterOption)||[];return}this.customFilterOptions[filterOption.displayKey]=filterOption})}selectDefaultItem(params){const{filterOptions}=this;if(params.defaultOption)this.defaultOption=params.defaultOption;else if(filterOptions.length>=1){const firstFilterOption=filterOptions[0];typeof firstFilterOption=="string"?this.defaultOption=firstFilterOption:firstFilterOption.displayKey?this.defaultOption=firstFilterOption.displayKey:_warn(73)}else _warn(74)}getCustomOption(name){return this.customFilterOptions[name]}},__name(_a162,"OptionsFactory"),_a162);function removeItems(items,startPosition,deleteCount){return deleteCount==null?items.splice(startPosition):items.splice(startPosition,deleteCount)}__name(removeItems,"removeItems");function isBlank(cellValue){return cellValue==null||typeof cellValue=="string"&&cellValue.trim().length===0}__name(isBlank,"isBlank");function getDefaultJoinOperator(defaultJoinOperator){return defaultJoinOperator==="AND"||defaultJoinOperator==="OR"?defaultJoinOperator:"AND"}__name(getDefaultJoinOperator,"getDefaultJoinOperator");function evaluateCustomFilter(customFilterOption,values,cellValue){if(customFilterOption==null)return;const{predicate}=customFilterOption;if(predicate!=null&&!values.some(v=>v==null))return predicate(values,cellValue)}__name(evaluateCustomFilter,"evaluateCustomFilter");function validateAndUpdateConditions(conditions,maxNumConditions){let numConditions=conditions.length;return numConditions>maxNumConditions&&(conditions.splice(maxNumConditions),_warn(78),numConditions=maxNumConditions),numConditions}__name(validateAndUpdateConditions,"validateAndUpdateConditions");var _a163,SimpleFilter=(_a163=class extends ProvidedFilter{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(type){const customOpts=this.optionsFactory.getCustomOption(type);if(customOpts){const{numberOfInputs}=customOpts;return numberOfInputs??1}return type&&["empty","notBlank","blank"].indexOf(type)>=0?0:type==="inRange"?2:1}onFloatingFilterChanged(type,value){this.setTypeFromFloatingFilter(type),this.setValueFromFloatingFilter(value),this.onUiChanged(!0)}setTypeFromFloatingFilter(type){this.eTypes.forEach((eType,position)=>{const value=position===0?type:this.optionsFactory.defaultOption;eType.setValue(value,!0)})}getModelFromUi(){const conditions=this.getUiCompleteConditions();return conditions.length===0?null:this.maxNumConditions>1&&conditions.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions}:conditions[0]}getConditionTypes(){return this.eTypes.map(eType=>eType.getValue())}getConditionType(position){return this.eTypes[position].getValue()}getJoinOperator(){const{eJoinOperatorsOr,defaultJoinOperator}=this;return eJoinOperatorsOr.length===0?defaultJoinOperator:eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(a,b){if(!a&&!b)return!0;if(!a&&b||a&&!b)return!1;const aIsSimple=!a.operator,bIsSimple=!b.operator;if(!aIsSimple&&bIsSimple||aIsSimple&&!bIsSimple)return!1;let res;if(aIsSimple){const aSimple=a,bSimple=b;res=this.areSimpleModelsEqual(aSimple,bSimple)}else{const aCombined=a,bCombined=b;res=aCombined.operator===bCombined.operator&&_areEqual(aCombined.conditions,bCombined.conditions,(aModel,bModel)=>this.areSimpleModelsEqual(aModel,bModel))}return res}shouldRefresh(newParams){var _a238;const model=this.getModel(),conditions=model?model.conditions??[model]:null,newOptionsList=((_a238=newParams.filterOptions)==null?void 0:_a238.map(option=>typeof option=="string"?option:option.displayKey))??this.getDefaultFilterOptions();return!(!(!conditions||conditions.every(condition=>newOptionsList.find(option=>option===condition.type)!==void 0))||typeof newParams.maxNumConditions=="number"&&conditions&&conditions.length>newParams.maxNumConditions)}refresh(newParams){return!this.shouldRefresh(newParams)||!super.refresh(newParams)?!1:(this.setParams(newParams),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(model){if(model.operator){const combinedModel=model;let conditions=combinedModel.conditions;conditions==null&&(conditions=[],_warn(77));const numConditions=validateAndUpdateConditions(conditions,this.maxNumConditions),numPrevConditions=this.getNumConditions();if(numConditions<numPrevConditions)this.removeConditionsAndOperators(numConditions);else if(numConditions>numPrevConditions)for(let i=numPrevConditions;i<numConditions;i++)this.createJoinOperatorPanel(),this.createOption();const orChecked=combinedModel.operator==="OR";this.eJoinOperatorsAnd.forEach(eJoinOperatorAnd=>eJoinOperatorAnd.setValue(!orChecked,!0)),this.eJoinOperatorsOr.forEach(eJoinOperatorOr=>eJoinOperatorOr.setValue(orChecked,!0)),conditions.forEach((condition,position)=>{this.eTypes[position].setValue(condition.type,!0),this.setConditionIntoUi(condition,position)})}else{const simpleModel=model;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(simpleModel.type,!0),this.setConditionIntoUi(simpleModel,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),AgPromise.resolve()}doesFilterPass(params){const model=this.getModel();if(model==null)return!0;const{operator}=model,models=[];if(operator){const combinedModel=model;models.push(...combinedModel.conditions??[])}else models.push(model);return models[operator&&operator==="OR"?"some":"every"](m=>this.individualConditionPasses(params,m))}setParams(params){super.setParams(params),this.setNumConditions(params),this.defaultJoinOperator=getDefaultJoinOperator(params.defaultJoinOperator),this.filterPlaceholder=params.filterPlaceholder,this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(params){let maxNumConditions=params.maxNumConditions??2;maxNumConditions<1&&(_warn(79),maxNumConditions=1),this.maxNumConditions=maxNumConditions;let numAlwaysVisibleConditions=params.numAlwaysVisibleConditions??1;numAlwaysVisibleConditions<1&&(_warn(80),numAlwaysVisibleConditions=1),numAlwaysVisibleConditions>maxNumConditions&&(_warn(81),numAlwaysVisibleConditions=maxNumConditions),this.numAlwaysVisibleConditions=numAlwaysVisibleConditions}createOption(){const eType=this.createManagedBean(new AgSelect);this.eTypes.push(eType),eType.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(eType.getGui());const eConditionBody=this.createValueElement();this.eConditionBodies.push(eConditionBody),this.eFilterBody.appendChild(eConditionBody),this.putOptionsIntoDropdown(eType),this.resetType(eType);const position=this.getNumConditions()-1;this.forEachPositionInput(position,element=>this.resetInput(element)),this.addChangedListeners(eType,position)}createJoinOperatorPanel(){const eJoinOperatorPanel=_createElement({tag:"div",cls:"ag-filter-condition"});this.eJoinOperatorPanels.push(eJoinOperatorPanel);const eJoinOperatorAnd=this.createJoinOperator(this.eJoinOperatorsAnd,eJoinOperatorPanel,"and"),eJoinOperatorOr=this.createJoinOperator(this.eJoinOperatorsOr,eJoinOperatorPanel,"or");this.eFilterBody.appendChild(eJoinOperatorPanel);const index=this.eJoinOperatorPanels.length-1,uniqueGroupId=this.joinOperatorId++;this.resetJoinOperatorAnd(eJoinOperatorAnd,index,uniqueGroupId),this.resetJoinOperatorOr(eJoinOperatorOr,index,uniqueGroupId),this.isReadOnly()||(eJoinOperatorAnd.onValueChange(this.listener),eJoinOperatorOr.onValueChange(this.listener))}createJoinOperator(eJoinOperators,eJoinOperatorPanel,andOr){const eJoinOperator=this.createManagedBean(new AgRadioButton);eJoinOperators.push(eJoinOperator);const baseClass="ag-filter-condition-operator";return eJoinOperator.addCssClass(baseClass),eJoinOperator.addCssClass(`${baseClass}-${andOr}`),eJoinOperatorPanel.appendChild(eJoinOperator.getGui()),eJoinOperator}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(option=>typeof option=="string"?this.createBoilerplateListOption(option):this.createCustomListOption(option))}putOptionsIntoDropdown(eType){const{filterListOptions}=this;filterListOptions.forEach(listOption=>{eType.addOption(listOption)}),eType.setDisabled(filterListOptions.length<=1)}createBoilerplateListOption(option){return{value:option,text:this.translate(option)}}createCustomListOption(option){const{displayKey}=option,customOption=this.optionsFactory.getCustomOption(option.displayKey);return{value:displayKey,text:customOption?this.getLocaleTextFunc()(customOption.displayKey,customOption.displayName):this.translate(displayKey)}}createBodyTemplate(){return null}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const joinOperator=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,joinOperator)}updateNumConditions(){let lastUiCompletePosition=-1,areAllConditionsUiComplete=!0;for(let position=0;position<this.getNumConditions();position++)this.isConditionUiComplete(position)?lastUiCompletePosition=position:areAllConditionsUiComplete=!1;if(this.shouldAddNewConditionAtEnd(areAllConditionsUiComplete))this.createJoinOperatorPanel(),this.createOption();else{const activePosition=this.lastUiCompletePosition??this.getNumConditions()-2;if(lastUiCompletePosition<activePosition){this.removeConditionsAndOperators(activePosition+1);const removeStartPosition=lastUiCompletePosition+1,numConditionsToRemove=activePosition-removeStartPosition;numConditionsToRemove>0&&this.removeConditionsAndOperators(removeStartPosition,numConditionsToRemove),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=lastUiCompletePosition}updateConditionStatusesAndValues(lastUiCompletePosition,joinOperator){this.eTypes.forEach((eType,position)=>{const disabled=this.isConditionDisabled(position,lastUiCompletePosition);eType.setDisabled(disabled||this.filterListOptions.length<=1),position===1&&(_setDisabled(this.eJoinOperatorPanels[0],disabled),this.eJoinOperatorsAnd[0].setDisabled(disabled),this.eJoinOperatorsOr[0].setDisabled(disabled))}),this.eConditionBodies.forEach((element,index)=>{_setDisplayed(element,this.isConditionBodyVisible(index))});const orChecked=(joinOperator??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(eJoinOperatorAnd=>{eJoinOperatorAnd.setValue(!orChecked,!0)}),this.eJoinOperatorsOr.forEach(eJoinOperatorOr=>{eJoinOperatorOr.setValue(orChecked,!0)}),this.forEachInput((element,index,position,numberOfInputs)=>{this.setElementDisplayed(element,index<numberOfInputs),this.setElementDisabled(element,this.isConditionDisabled(position,lastUiCompletePosition))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(areAllConditionsUiComplete){return areAllConditionsUiComplete&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(startPosition,deleteCount){if(startPosition>=this.getNumConditions())return;const{eTypes,eConditionBodies,eJoinOperatorPanels,eJoinOperatorsAnd,eJoinOperatorsOr}=this;this.removeComponents(eTypes,startPosition,deleteCount),this.removeElements(eConditionBodies,startPosition,deleteCount),this.removeValueElements(startPosition,deleteCount);const joinOperatorIndex=Math.max(startPosition-1,0);this.removeElements(eJoinOperatorPanels,joinOperatorIndex,deleteCount),this.removeComponents(eJoinOperatorsAnd,joinOperatorIndex,deleteCount),this.removeComponents(eJoinOperatorsOr,joinOperatorIndex,deleteCount)}removeElements(elements,startPosition,deleteCount){removeItems(elements,startPosition,deleteCount).forEach(element=>_removeFromParent(element))}removeComponents(components,startPosition,deleteCount){removeItems(components,startPosition,deleteCount).forEach(comp=>{_removeFromParent(comp.getGui()),this.destroyBean(comp)})}afterGuiAttached(params){var _a238;if(super.afterGuiAttached(params),this.resetPlaceholder(),!(params!=null&&params.suppressFocus)){const{eFilterBody,eTypes}=this;let elementToFocus;if(!this.isReadOnly()){const firstInput=this.getInputs(0)[0];firstInput instanceof AgAbstractInputField&&this.isConditionBodyVisible(0)?elementToFocus=firstInput.getInputElement():elementToFocus=(_a238=eTypes[0])==null?void 0:_a238.getFocusableElement()}(elementToFocus??eFilterBody).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();const appliedModel=this.getModel();this.resetUiToActiveModel(appliedModel);let lastUiCompletePosition=-1,updatedLastUiCompletePosition=-1,conditionsRemoved=!1;const joinOperator=this.getJoinOperator();for(let position=this.getNumConditions()-1;position>=0;position--)if(this.isConditionUiComplete(position))lastUiCompletePosition===-1&&(lastUiCompletePosition=position,updatedLastUiCompletePosition=position);else{const shouldRemovePositionAtEnd=position>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(position-1),positionBeforeLastUiCompletePosition=position<lastUiCompletePosition;(shouldRemovePositionAtEnd||positionBeforeLastUiCompletePosition)&&(this.removeConditionsAndOperators(position,1),conditionsRemoved=!0,positionBeforeLastUiCompletePosition&&updatedLastUiCompletePosition--)}let shouldUpdateConditionStatusesAndValues=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),shouldUpdateConditionStatusesAndValues=!0),this.shouldAddNewConditionAtEnd(updatedLastUiCompletePosition===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),shouldUpdateConditionStatusesAndValues=!0),shouldUpdateConditionStatusesAndValues&&this.updateConditionStatusesAndValues(updatedLastUiCompletePosition,joinOperator),conditionsRemoved&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=updatedLastUiCompletePosition}getPlaceholderText(defaultPlaceholder,position){let placeholder=this.translate(defaultPlaceholder);if(typeof this.filterPlaceholder=="function"){const filterOptionKey=this.eTypes[position].getValue(),filterOption=this.translate(filterOptionKey);placeholder=this.filterPlaceholder({filterOptionKey,filterOption,placeholder})}else typeof this.filterPlaceholder=="string"&&(placeholder=this.filterPlaceholder);return placeholder}resetPlaceholder(){const globalTranslate=this.getLocaleTextFunc();this.forEachInput((element,index,position,numberOfInputs)=>{if(!(element instanceof AgAbstractInputField))return;const placeholder=index===0&&numberOfInputs>1?"inRangeStart":index===0?"filterOoo":"inRangeEnd",ariaLabel=index===0&&numberOfInputs>1?globalTranslate("ariaFilterFromValue","Filter from value"):index===0?globalTranslate("ariaFilterValue","Filter Value"):globalTranslate("ariaFilterToValue","Filter to Value");element.setInputPlaceholder(this.getPlaceholderText(placeholder,position)),element.setInputAriaLabel(ariaLabel)})}setElementValue(element,value,fromFloatingFilter){element instanceof AgAbstractInputField&&element.setValue(value!=null?String(value):null,!0)}setElementDisplayed(element,displayed){element instanceof Component&&_setDisplayed(element.getGui(),displayed)}setElementDisabled(element,disabled){element instanceof Component&&_setDisabled(element.getGui(),disabled)}attachElementOnChange(element,listener){element instanceof AgAbstractInputField&&element.onValueChange(listener)}forEachInput(cb){this.getConditionTypes().forEach((type,position)=>{this.forEachPositionTypeInput(position,type,cb)})}forEachPositionInput(position,cb){const type=this.getConditionType(position);this.forEachPositionTypeInput(position,type,cb)}forEachPositionTypeInput(position,type,cb){const numberOfInputs=this.getNumberOfInputs(type),inputs=this.getInputs(position);for(let index=0;index<inputs.length;index++){const input=inputs[index];input!=null&&cb(input,index,position,numberOfInputs)}}isConditionDisabled(position,lastUiCompletePosition){return this.isReadOnly()?!0:position===0?!1:position>lastUiCompletePosition+1}isConditionBodyVisible(position){const type=this.getConditionType(position);return this.getNumberOfInputs(type)>0}isConditionUiComplete(position){return!(position>=this.getNumConditions()||this.getConditionType(position)==="empty"||this.getValues(position).some(v=>v==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const conditions=[];for(let position=0;position<this.getNumConditions();position++)this.isConditionUiComplete(position)&&conditions.push(this.createCondition(position));return conditions}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let i=this.getNumConditions();i<this.numAlwaysVisibleConditions;i++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(silent){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(eType=>this.resetType(eType)),this.eJoinOperatorsAnd.forEach((eJoinOperatorAnd,index)=>this.resetJoinOperatorAnd(eJoinOperatorAnd,index,this.joinOperatorId+index)),this.eJoinOperatorsOr.forEach((eJoinOperatorOr,index)=>this.resetJoinOperatorOr(eJoinOperatorOr,index,this.joinOperatorId+index)),this.joinOperatorId++,this.forEachInput(element=>this.resetInput(element)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,silent||this.onUiChanged(),AgPromise.resolve()}resetType(eType){const filteringLabel=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");eType.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(filteringLabel).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(eJoinOperatorAnd,index,uniqueGroupId){this.resetJoinOperator(eJoinOperatorAnd,index,this.defaultJoinOperator==="AND",this.translate("andCondition"),uniqueGroupId)}resetJoinOperatorOr(eJoinOperatorOr,index,uniqueGroupId){this.resetJoinOperator(eJoinOperatorOr,index,this.defaultJoinOperator==="OR",this.translate("orCondition"),uniqueGroupId)}resetJoinOperator(eJoinOperator,index,value,label,uniqueGroupId){this.updateJoinOperatorDisabled(eJoinOperator.setValue(value,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${uniqueGroupId}`).setLabel(label),index)}updateJoinOperatorsDisabled(){const updater=__name((eJoinOperator,index)=>this.updateJoinOperatorDisabled(eJoinOperator,index),"updater");this.eJoinOperatorsAnd.forEach(updater),this.eJoinOperatorsOr.forEach(updater)}updateJoinOperatorDisabled(eJoinOperator,index){eJoinOperator.setDisabled(this.isReadOnly()||index>0)}resetInput(element){this.setElementValue(element,null),this.setElementDisabled(element,this.isReadOnly())}setConditionIntoUi(model,position){const values=this.mapValuesFromModel(model);this.forEachInput((element,index,elPosition)=>{elPosition===position&&this.setElementValue(element,values[index]!=null?values[index]:null)})}setValueFromFloatingFilter(value){this.forEachInput((element,index,position)=>{this.setElementValue(element,index===0&&position===0?value:null,!0)})}addChangedListeners(eType,position){this.isReadOnly()||(eType.onValueChange(this.listener),this.forEachPositionInput(position,element=>{this.attachElementOnChange(element,this.listener)}))}individualConditionPasses(params,filterModel){const cellValue=this.getCellValue(params.node),values=this.mapValuesFromModel(filterModel),customFilterOption=this.optionsFactory.getCustomOption(filterModel.type),customFilterResult=evaluateCustomFilter(customFilterOption,values,cellValue);return customFilterResult??(cellValue==null?this.evaluateNullValue(filterModel.type):this.evaluateNonNullValue(values,cellValue,filterModel,params))}hasInvalidInputs(){return!1}},__name(_a163,"SimpleFilter"),_a163),_a164,ScalarFilter=(_a164=class extends SimpleFilter{setParams(params){super.setParams(params),this.scalarFilterParams=params}evaluateNullValue(filterType){const{includeBlanksInEquals,includeBlanksInNotEqual,includeBlanksInGreaterThan,includeBlanksInLessThan,includeBlanksInRange}=this.scalarFilterParams;switch(filterType){case"equals":if(includeBlanksInEquals)return!0;break;case"notEqual":if(includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(includeBlanksInLessThan)return!0;break;case"inRange":if(includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(values,cellValue,filterModel){const type=filterModel.type;if(!this.isValid(cellValue))return type==="notEqual"||type==="notBlank";const comparator=this.comparator(),compareResult=values[0]!=null?comparator(values[0],cellValue):0;switch(type){case"equals":return compareResult===0;case"notEqual":return compareResult!==0;case"greaterThan":return compareResult>0;case"greaterThanOrEqual":return compareResult>=0;case"lessThan":return compareResult<0;case"lessThanOrEqual":return compareResult<=0;case"inRange":{const compareToResult=comparator(values[1],cellValue);return this.scalarFilterParams.inRangeInclusive?compareResult>=0&&compareToResult<=0:compareResult>0&&compareToResult<0}case"blank":return isBlank(cellValue);case"notBlank":return!isBlank(cellValue);default:return _warn(76,{filterModelType:type}),!0}}},__name(_a164,"ScalarFilter"),_a164),_a165,DateCompWrapper=(_a165=class{constructor(context,userCompFactory,colDef,dateComponentParams,eParent,onReady){this.alive=!0,this.context=context,this.eParent=eParent;const compDetails=_getDateCompDetails(userCompFactory,colDef,dateComponentParams);compDetails&&compDetails.newAgStackInstance().then(dateComp=>{var _a238,_b2;if(!this.alive){context.destroyBean(dateComp);return}if(this.dateComp=dateComp,!dateComp)return;eParent.appendChild(dateComp.getGui()),(_a238=dateComp==null?void 0:dateComp.afterGuiAttached)==null||_a238.call(dateComp);const{tempValue,disabled}=this;tempValue&&dateComp.setDate(tempValue),disabled!=null&&((_b2=dateComp.setDisabled)==null||_b2.call(dateComp,disabled)),onReady==null||onReady(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(value){const dateComp=this.dateComp;dateComp?dateComp.setDate(value):this.tempValue=value}setDisabled(disabled){var _a238;const dateComp=this.dateComp;dateComp?(_a238=dateComp.setDisabled)==null||_a238.call(dateComp,disabled):this.disabled=disabled}setDisplayed(displayed){_setDisplayed(this.eParent,displayed)}setInputPlaceholder(placeholder){var _a238,_b2;(_b2=(_a238=this.dateComp)==null?void 0:_a238.setInputPlaceholder)==null||_b2.call(_a238,placeholder)}setInputAriaLabel(label){var _a238,_b2;(_b2=(_a238=this.dateComp)==null?void 0:_a238.setInputAriaLabel)==null||_b2.call(_a238,label)}afterGuiAttached(params){var _a238,_b2;(_b2=(_a238=this.dateComp)==null?void 0:_a238.afterGuiAttached)==null||_b2.call(_a238,params)}updateParams(params){var _a238,_b2;(_b2=(_a238=this.dateComp)==null?void 0:_a238.refresh)==null||_b2.call(_a238,params)}},__name(_a165,"DateCompWrapper"),_a165),DEFAULT_DATE_FILTER_OPTIONS=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],_a166,SimpleFilterModelFormatter=(_a166=class{constructor(getLocaleTextFunc,optionsFactory,valueFormatter){this.getLocaleTextFunc=getLocaleTextFunc,this.optionsFactory=optionsFactory,this.valueFormatter=valueFormatter}getModelAsString(model){if(!model)return null;const isCombined=model.operator!=null,translate=this.getLocaleTextFunc();if(isCombined){const combinedModel=model,customOptions=(combinedModel.conditions??[]).map(condition=>this.getModelAsString(condition)),joinOperatorTranslateKey=combinedModel.operator==="AND"?"andCondition":"orCondition";return customOptions.join(` ${translate(joinOperatorTranslateKey,FILTER_LOCALE_TEXT[joinOperatorTranslateKey])} `)}else{if(model.type==="blank"||model.type==="notBlank")return translate(model.type,model.type);{const condition=model,customOption=this.optionsFactory.getCustomOption(condition.type),{displayKey,displayName,numberOfInputs}=customOption||{};return displayKey&&displayName&&numberOfInputs===0?(translate(displayKey,displayName),displayName):this.conditionToString(condition,customOption)}}}updateParams(params){this.optionsFactory=params.optionsFactory}formatValue(value){const valueFormatter=this.valueFormatter;return valueFormatter?valueFormatter(value??null)??"":String(value)}},__name(_a166,"SimpleFilterModelFormatter"),_a166),_a167,DateFilterModelFormatter=(_a167=class extends SimpleFilterModelFormatter{constructor(dateFilterParams,getLocaleTextFunc,optionsFactory){super(getLocaleTextFunc,optionsFactory),this.dateFilterParams=dateFilterParams}conditionToString(condition,options){const{type}=condition,{numberOfInputs}=options||{},isRange=type=="inRange"||numberOfInputs===2,dateFrom=_parseDateTimeFromString(condition.dateFrom),dateTo=_parseDateTimeFromString(condition.dateTo),format=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(isRange){const formattedFrom=dateFrom!==null?_dateToFormattedString(dateFrom,format):"null",formattedTo=dateTo!==null?_dateToFormattedString(dateTo,format):"null";return`${formattedFrom}-${formattedTo}`}return dateFrom!=null?_dateToFormattedString(dateFrom,format):`${type}`}updateParams(params){super.updateParams(params),this.dateFilterParams=params.dateFilterParams}},__name(_a167,"DateFilterModelFormatter"),_a167),DEFAULT_MIN_YEAR=1e3,DEFAULT_MAX_YEAR=1/0,_a168,DateFilter=(_a168=class extends ScalarFilter{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=DEFAULT_MIN_YEAR,this.maxValidYear=DEFAULT_MAX_YEAR,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(params){super.afterGuiAttached(params),this.dateConditionFromComps[0].afterGuiAttached(params)}mapValuesFromModel(filterModel){const{dateFrom,dateTo,type}=filterModel||{};return[dateFrom&&_parseDateTimeFromString(dateFrom)||null,dateTo&&_parseDateTimeFromString(dateTo)||null].slice(0,this.getNumberOfInputs(type))}comparator(){return this.dateFilterParams.comparator??defaultDateComparator}isValid(value){const isValidDate2=this.dateFilterParams.isValidDate;return!isValidDate2||isValidDate2(value)}setParams(params){this.dateFilterParams=params,super.setParams(params);const yearParser=__name((param,fallback)=>{if(params[param]!=null)if(isNaN(params[param]))_warn(82,{param});else return params[param]==null?fallback:Number(params[param]);return fallback},"yearParser");this.minValidYear=yearParser("minValidYear",DEFAULT_MIN_YEAR),this.maxValidYear=yearParser("maxValidYear",DEFAULT_MAX_YEAR),this.minValidYear>this.maxValidYear&&_warn(83),this.minValidDate=params.minValidDate?params.minValidDate instanceof Date?params.minValidDate:_parseDateTimeFromString(params.minValidDate):null,this.maxValidDate=params.maxValidDate?params.maxValidDate instanceof Date?params.maxValidDate:_parseDateTimeFromString(params.maxValidDate):null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&_warn(84),this.filterModelFormatter=new DateFilterModelFormatter(this.dateFilterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory)}createDateCompWrapper(element){const{beans:{userCompFactory,context,gos},dateFilterParams}=this,dateCompWrapper=new DateCompWrapper(context,userCompFactory,dateFilterParams.colDef,_addGridCommonParams(gos,{onDateChanged:__name(()=>this.onUiChanged(),"onDateChanged"),filterParams:dateFilterParams,location:"filter"}),element);return this.addDestroyFunc(()=>dateCompWrapper.destroy()),dateCompWrapper}setElementValue(element,value){element.setDate(value)}setElementDisplayed(element,displayed){element.setDisplayed(displayed)}setElementDisabled(element,disabled){element.setDisabled(disabled)}getDefaultFilterOptions(){return DEFAULT_DATE_FILTER_OPTIONS}createValueElement(){const eCondition=_getDocument(this.beans).createElement("div");return eCondition.classList.add("ag-filter-body"),this.createFromToElement(eCondition,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(eCondition,this.eConditionPanelsTo,this.dateConditionToComps,"to"),eCondition}createFromToElement(eCondition,eConditionPanels,dateConditionComps,fromTo){const eConditionPanel=_getDocument(this.beans).createElement("div");eConditionPanel.classList.add(`ag-filter-${fromTo}`),eConditionPanel.classList.add(`ag-filter-date-${fromTo}`),eConditionPanels.push(eConditionPanel),eCondition.appendChild(eConditionPanel),dateConditionComps.push(this.createDateCompWrapper(eConditionPanel))}removeValueElements(startPosition,deleteCount){this.removeDateComps(this.dateConditionFromComps,startPosition,deleteCount),this.removeDateComps(this.dateConditionToComps,startPosition,deleteCount),removeItems(this.eConditionPanelsFrom,startPosition,deleteCount),removeItems(this.eConditionPanelsTo,startPosition,deleteCount)}removeDateComps(components,startPosition,deleteCount){removeItems(components,startPosition,deleteCount).forEach(comp=>comp.destroy())}isValidDateValue(value){if(value===null)return!1;const{minValidDate,maxValidDate,minValidYear,maxValidYear}=this;if(minValidDate){if(value<minValidDate)return!1}else if(value.getUTCFullYear()<minValidYear)return!1;if(maxValidDate){if(value>maxValidDate)return!1}else if(value.getUTCFullYear()>maxValidYear)return!1;return!0}isConditionUiComplete(position){if(!super.isConditionUiComplete(position))return!1;let valid=!0;return this.forEachInput((element,index,elPosition,numberOfInputs)=>{elPosition!==position||!valid||index>=numberOfInputs||(valid=valid&&this.isValidDateValue(element.getDate()))}),valid}areSimpleModelsEqual(aSimple,bSimple){return aSimple.dateFrom===bSimple.dateFrom&&aSimple.dateTo===bSimple.dateTo&&aSimple.type===bSimple.type}createCondition(position){const type=this.getConditionType(position),model={},values=this.getValues(position);return values.length>0&&(model.dateFrom=_serialiseDate(values[0])),values.length>1&&(model.dateTo=_serialiseDate(values[1])),{dateFrom:null,dateTo:null,filterType:this.filterType,type,...model}}resetPlaceholder(){const globalTranslate=this.getLocaleTextFunc(),placeholder=this.translate("dateFormatOoo"),ariaLabel=globalTranslate("ariaFilterValue","Filter Value");this.forEachInput(element=>{element.setInputPlaceholder(placeholder),element.setInputAriaLabel(ariaLabel)})}getInputs(position){const{dateConditionFromComps,dateConditionToComps}=this;return position>=dateConditionFromComps.length?[null,null]:[dateConditionFromComps[position],dateConditionToComps[position]]}getValues(position){const result=[];return this.forEachPositionInput(position,(element,index,_elPosition,numberOfInputs)=>{index<numberOfInputs&&result.push(element.getDate())}),result}translate(key){return key==="lessThan"?super.translate("before"):key==="greaterThan"?super.translate("after"):super.translate(key)}getModelAsString(model){return this.filterModelFormatter.getModelAsString(model)??""}},__name(_a168,"DateFilter"),_a168);function defaultDateComparator(filterDate,cellValue){const cellAsDate=cellValue;return cellAsDate<filterDate?-1:cellAsDate>filterDate?1:0}__name(defaultDateComparator,"defaultDateComparator");var _a169,SimpleFloatingFilter=(_a169=class extends Component{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(model){if(!model){this.lastType=this.optionsFactory.defaultOption;return}const isCombined=model.operator;let condition;isCombined?condition=model.conditions[0]:condition=model,this.lastType=condition.type}canWeEditAfterModelFromParentFilter(model){if(!model)return this.isTypeEditable(this.lastType);if(model.operator)return!1;const simpleModel=model;return this.isTypeEditable(simpleModel.type)}init(params){this.setSimpleParams(params,!1)}setSimpleParams(params,update=!0){const optionsFactory=new OptionsFactory;this.optionsFactory=optionsFactory,optionsFactory.init(params.filterParams,this.getDefaultOptions());const defaultOption=optionsFactory.defaultOption;update||(this.lastType=defaultOption),this.readOnly=!!params.filterParams.readOnly;const editable=this.isTypeEditable(defaultOption);this.setEditable(editable)}refresh(params){this.setSimpleParams(params)}hasSingleInput(filterType){var _a238;const numberOfInputs=(_a238=this.optionsFactory.getCustomOption(filterType))==null?void 0:_a238.numberOfInputs;return numberOfInputs==null||numberOfInputs==1}isTypeEditable(type){const uneditableTypes=["inRange","empty","blank","notBlank"];return!!type&&!this.readOnly&&this.hasSingleInput(type)&&uneditableTypes.indexOf(type)<0}getAriaLabel(params){return`${this.beans.colNames.getDisplayNameForColumn(params.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},__name(_a169,"SimpleFloatingFilter"),_a169),DateFloatingFilterElement={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},_a170,DateFloatingFilter=(_a170=class extends SimpleFloatingFilter{constructor(){super(DateFloatingFilterElement,[AgInputTextFieldSelector]),this.eReadOnlyText=RefPlaceholder,this.eDateWrapper=RefPlaceholder}getDefaultOptions(){return DEFAULT_DATE_FILTER_OPTIONS}init(params){super.init(params),this.params=params,this.filterParams=params.filterParams,this.createDateComponent(),this.filterModelFormatter=new DateFilterModelFormatter(this.filterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory);const translate=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(translate("ariaDateFilterInput","Date Filter Input"))}refresh(params){super.refresh(params),this.params=params,this.filterParams=params.filterParams,this.dateComp.updateParams(this.getDateComponentParams()),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(params.currentParentModel())}updateCompOnModelChange(model){const allowEditing=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(model);if(this.setEditable(allowEditing),allowEditing){const dateModel=model?_parseDateTimeFromString(model.dateFrom):null;this.dateComp.setDate(dateModel),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(model)),this.dateComp.setDate(null)}setEditable(editable){_setDisplayed(this.eDateWrapper,editable),_setDisplayed(this.eReadOnlyText.getGui(),!editable)}onParentModelChanged(model,event){event!=null&&event.afterFloatingFilter||event!=null&&event.afterDataChange||(super.setLastTypeFromModel(model),this.updateCompOnModelChange(model))}onDateChanged(){const filterValueDate=this.dateComp.getDate(),filterValueText=_serialiseDate(filterValueDate);this.params.parentFilterInstance(filterInstance=>{if(filterInstance){const date=_parseDateTimeFromString(filterValueText);filterInstance.onFloatingFilterChanged(this.lastType||null,date)}})}getDateComponentParams(){const{filterParams,column}=this.params,debounceMs=getDebounceMs(filterParams,this.defaultDebounceMs);return _addGridCommonParams(this.gos,{onDateChanged:_debounce(this,this.onDateChanged.bind(this),debounceMs),filterParams:column.getColDef().filterParams,location:"floatingFilter"})}createDateComponent(){const{beans:{context,userCompFactory},eDateWrapper,params}=this;this.dateComp=new DateCompWrapper(context,userCompFactory,params.column.getColDef(),this.getDateComponentParams(),eDateWrapper,dateComp=>{dateComp.setInputAriaLabel(this.getAriaLabel(params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},__name(_a170,"DateFloatingFilter"),_a170),DefaultDateElement={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},_a171,DefaultDateComponent=(_a171=class extends Component{constructor(){super(DefaultDateElement,[AgInputTextFieldSelector]),this.eDateInput=RefPlaceholder,this.isApply=!1,this.applyOnFocusOut=!1}init(params){this.params=params,this.setParams(params);const inputElement=this.eDateInput.getInputElement();this.addManagedListeners(inputElement,{mouseDown:__name(()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||inputElement.focus({preventScroll:!0})},"mouseDown"),input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(isChange){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!isChange,isChange&&this.params.onDateChanged();return}isChange||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(params){const inputElement=this.eDateInput.getInputElement(),shouldUseBrowserDatePicker=this.shouldUseBrowserDatePicker(params);this.usingSafariDatePicker=shouldUseBrowserDatePicker&&_isBrowserSafari(),inputElement.type=shouldUseBrowserDatePicker?"date":"text";const{minValidYear,maxValidYear,minValidDate,maxValidDate,buttons}=params.filterParams||{};if(minValidDate&&minValidYear&&_warn(85),maxValidDate&&maxValidYear&&_warn(86),minValidDate&&maxValidDate){const[parsedMinValidDate,parsedMaxValidDate]=[minValidDate,maxValidDate].map(v=>v instanceof Date?v:_parseDateTimeFromString(v));parsedMinValidDate&&parsedMaxValidDate&&parsedMinValidDate.getTime()>parsedMaxValidDate.getTime()&&_warn(87)}minValidDate?minValidDate instanceof Date?inputElement.min=_dateToFormattedString(minValidDate):inputElement.min=minValidDate:minValidYear&&(inputElement.min=`${minValidYear}-01-01`),maxValidDate?maxValidDate instanceof Date?inputElement.max=_dateToFormattedString(maxValidDate):inputElement.max=maxValidDate:maxValidYear&&(inputElement.max=`${maxValidYear}-12-31`),this.isApply=params.location==="floatingFilter"&&!!(buttons!=null&&buttons.includes("apply"))}refresh(params){this.params=params,this.setParams(params)}getDate(){return _parseDateTimeFromString(this.eDateInput.getValue())}setDate(date){this.eDateInput.setValue(_serialiseDate(date,!1))}setInputPlaceholder(placeholder){this.eDateInput.setInputPlaceholder(placeholder)}setInputAriaLabel(ariaLabel){this.eDateInput.setAriaLabel(ariaLabel)}setDisabled(disabled){this.eDateInput.setDisabled(disabled)}afterGuiAttached(params){(!params||!params.suppressFocus)&&this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(params){var _a238;return((_a238=params==null?void 0:params.filterParams)==null?void 0:_a238.browserDatePicker)??!0}},__name(_a171,"DefaultDateComponent"),_a171),DEFAULT_NUMBER_FILTER_OPTIONS=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],_a172,NumberFilterModelFormatter=(_a172=class extends SimpleFilterModelFormatter{conditionToString(condition,options){const{numberOfInputs}=options||{},{filter,filterTo,type}=condition,isRange=type=="inRange"||numberOfInputs===2,formatValue=this.formatValue.bind(this);return isRange?`${formatValue(filter)}-${formatValue(filterTo)}`:filter!=null?formatValue(filter):`${type}`}},__name(_a172,"NumberFilterModelFormatter"),_a172);function getAllowedCharPattern(filterParams){const{allowedCharPattern}=filterParams??{};return allowedCharPattern??null}__name(getAllowedCharPattern,"getAllowedCharPattern");var _a173,NumberFilter=(_a173=class extends ScalarFilter{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}refresh(params){return this.numberFilterParams.allowedCharPattern!==params.allowedCharPattern?!1:super.refresh(params)}mapValuesFromModel(filterModel){const{filter,filterTo,type}=filterModel||{};return[this.processValue(filter),this.processValue(filterTo)].slice(0,this.getNumberOfInputs(type))}comparator(){return(left,right)=>left===right?0:left<right?1:-1}isValid(value){return!isNaN(value)}setParams(params){this.numberFilterParams=params,super.setParams(params),this.filterModelFormatter=new NumberFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return DEFAULT_NUMBER_FILTER_OPTIONS}setElementValue(element,value,fromFloatingFilter){const{numberFormatter}=this.numberFilterParams,valueToSet=!fromFloatingFilter&&numberFormatter?numberFormatter(value??null):value;super.setElementValue(element,valueToSet)}createValueElement(){const allowedCharPattern=getAllowedCharPattern(this.numberFilterParams),eCondition=_createElement({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(eCondition,this.eValuesFrom,"from",allowedCharPattern),this.createFromToElement(eCondition,this.eValuesTo,"to",allowedCharPattern),eCondition}createFromToElement(eCondition,eValues,fromTo,allowedCharPattern){const eValue=this.createManagedBean(allowedCharPattern?new AgInputTextField({allowedCharPattern}):new AgInputNumberField);eValue.addCssClass(`ag-filter-${fromTo}`),eValue.addCssClass("ag-filter-filter"),eValues.push(eValue),eCondition.appendChild(eValue.getGui())}removeValueElements(startPosition,deleteCount){const removeComps=__name(eGui=>this.removeComponents(eGui,startPosition,deleteCount),"removeComps");removeComps(this.eValuesFrom),removeComps(this.eValuesTo)}getValues(position){const result=[];return this.forEachPositionInput(position,(element,index,_elPosition,numberOfInputs)=>{index<numberOfInputs&&result.push(this.processValue(this.stringToFloat(element.getValue())))}),result}areSimpleModelsEqual(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type}processValue(value){return value==null||isNaN(value)?null:value}stringToFloat(value){if(typeof value=="number")return value;let filterText=_makeNull(value);filterText!=null&&filterText.trim()===""&&(filterText=null);const numberParser=this.numberFilterParams.numberParser;return numberParser?numberParser(filterText):filterText==null||filterText.trim()==="-"?null:parseFloat(filterText)}createCondition(position){const type=this.getConditionType(position),model={filterType:this.filterType,type},values=this.getValues(position);return values.length>0&&(model.filter=values[0]),values.length>1&&(model.filterTo=values[1]),model}getInputs(position){const{eValuesFrom,eValuesTo}=this;return position>=eValuesFrom.length?[null,null]:[eValuesFrom[position],eValuesTo[position]]}getModelAsString(model){return this.filterModelFormatter.getModelAsString(model)??""}hasInvalidInputs(){let invalidInputs=!1;return this.forEachInput(element=>{if(!element.getInputElement().validity.valid){invalidInputs=!0;return}}),invalidInputs}},__name(_a173,"NumberFilter"),_a173),_a174,FloatingFilterTextInputService=(_a174=class extends BeanStub{constructor(params){super(),this.params=params,this.eInput=RefPlaceholder,this.onValueChanged=()=>{}}setupGui(parentElement){var _a238;this.eInput=this.createManagedBean(new AgInputTextField((_a238=this.params)==null?void 0:_a238.config));const eInput=this.eInput.getGui();parentElement.appendChild(eInput);const listener=__name(e=>this.onValueChanged(e),"listener");this.addManagedListeners(eInput,{input:listener,keydown:listener})}setEditable(editable){this.eInput.setDisabled(!editable)}getValue(){return this.eInput.getValue()}setValue(value,silent){this.eInput.setValue(value,silent)}setValueChangedListener(listener){this.onValueChanged=listener}setParams({ariaLabel,autoComplete}){const{eInput}=this;eInput.setInputAriaLabel(ariaLabel),autoComplete!==void 0&&eInput.setAutoComplete(autoComplete)}},__name(_a174,"FloatingFilterTextInputService"),_a174);function trimInputForFilter(value){const trimmedInput=value==null?void 0:value.trim();return trimmedInput===""?value:trimmedInput}__name(trimInputForFilter,"trimInputForFilter");var TextInputFloatingFilterElement={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},_a175,TextInputFloatingFilter=(_a175=class extends SimpleFloatingFilter{constructor(){super(...arguments),this.eFloatingFilterInputContainer=RefPlaceholder,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(TextInputFloatingFilterElement)}onParentModelChanged(model,event){event!=null&&event.afterFloatingFilter||event!=null&&event.afterDataChange||(this.setLastTypeFromModel(model),this.setEditable(this.canWeEditAfterModelFromParentFilter(model)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(model)))}init(params){this.setupFloatingFilterInputService(params),super.init(params),this.setTextInputParams(params)}setupFloatingFilterInputService(params){this.inputSvc=this.createFloatingFilterInputService(params),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(params){this.params=params;const autoComplete=params.browserAutoComplete??!1,{inputSvc,defaultDebounceMs,readOnly}=this;if(inputSvc.setParams({ariaLabel:this.getAriaLabel(params),autoComplete}),this.applyActive=isUseApplyButton(params.filterParams),!readOnly){const debounceMs=getDebounceMs(params.filterParams,defaultDebounceMs),toDebounce=_debounce(this,this.syncUpWithParentFilter.bind(this),debounceMs);inputSvc.setValueChangedListener(toDebounce)}}refresh(params){super.refresh(params),this.setTextInputParams(params)}recreateFloatingFilterInputService(params){const{inputSvc}=this,value=inputSvc.getValue();_clearElement(this.eFloatingFilterInputContainer),this.destroyBean(inputSvc),this.setupFloatingFilterInputService(params),inputSvc.setValue(value,!0)}syncUpWithParentFilter(e){const isEnterKey=e.key===KeyCode.ENTER;if(this.applyActive&&!isEnterKey)return;const{inputSvc,params}=this;let value=inputSvc.getValue();params.filterParams.trimInput&&(value=trimInputForFilter(value),inputSvc.setValue(value,!0)),params.parentFilterInstance(filterInstance=>{filterInstance==null||filterInstance.onFloatingFilterChanged(this.lastType||null,value||null)})}setEditable(editable){this.inputSvc.setEditable(editable)}},__name(_a175,"TextInputFloatingFilter"),_a175),_a176,FloatingFilterNumberInputService=(_a176=class extends BeanStub{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(parentElement){this.eNumberInput=this.createManagedBean(new AgInputNumberField),this.eTextInput=this.createManagedBean(new AgInputTextField),this.eTextInput.setDisabled(!0);const eNumberInput=this.eNumberInput.getGui(),eTextInput=this.eTextInput.getGui();parentElement.appendChild(eNumberInput),parentElement.appendChild(eTextInput),this.setupListeners(eNumberInput,e=>this.onValueChanged(e)),this.setupListeners(eTextInput,e=>this.onValueChanged(e))}setEditable(editable){this.numberInputActive=editable,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(autoComplete){this.eNumberInput.setAutoComplete(autoComplete),this.eTextInput.setAutoComplete(autoComplete)}getValue(){return this.getActiveInputElement().getValue()}setValue(value,silent){this.getActiveInputElement().setValue(value,silent)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(listener){this.onValueChanged=listener}setupListeners(element,listener){this.addManagedListeners(element,{input:listener,keydown:listener})}setParams(params){this.setAriaLabel(params.ariaLabel),params.autoComplete!==void 0&&this.setAutoComplete(params.autoComplete)}setAriaLabel(ariaLabel){this.eNumberInput.setInputAriaLabel(ariaLabel),this.eTextInput.setInputAriaLabel(ariaLabel)}},__name(_a176,"FloatingFilterNumberInputService"),_a176),_a177,NumberFloatingFilter=(_a177=class extends TextInputFloatingFilter{init(params){var _a238;super.init(params),this.filterModelFormatter=new NumberFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory,(_a238=params.filterParams)==null?void 0:_a238.numberFormatter)}refresh(params){getAllowedCharPattern(params.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(params),super.refresh(params),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return DEFAULT_NUMBER_FILTER_OPTIONS}createFloatingFilterInputService(params){return this.allowedCharPattern=getAllowedCharPattern(params.filterParams),this.allowedCharPattern?this.createManagedBean(new FloatingFilterTextInputService({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new FloatingFilterNumberInputService)}},__name(_a177,"NumberFloatingFilter"),_a177),DEFAULT_TEXT_FILTER_OPTIONS=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],_a178,TextFilterModelFormatter=(_a178=class extends SimpleFilterModelFormatter{conditionToString(condition,options){const{numberOfInputs}=options||{},{filter,filterTo,type}=condition;return type=="inRange"||numberOfInputs===2?`${filter}-${filterTo}`:filter!=null?`${filter}`:`${type}`}},__name(_a178,"TextFilterModelFormatter"),_a178),_a179,TextFilter=(_a179=class extends SimpleFilter{constructor(){super("textFilter"),this.filterType="text",this.defaultFormatter=from=>from,this.defaultLowercaseFormatter=from=>from==null?null:from.toString().toLowerCase(),this.defaultMatcher=({filterOption,value,filterText})=>{if(filterText==null)return!1;switch(filterOption){case"contains":return value.indexOf(filterText)>=0;case"notContains":return value.indexOf(filterText)<0;case"equals":return value===filterText;case"notEqual":return value!=filterText;case"startsWith":return value.indexOf(filterText)===0;case"endsWith":{const index=value.lastIndexOf(filterText);return index>=0&&index===value.length-filterText.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}setParams(params){this.textFilterParams=params,super.setParams(params),this.matcher=params.textMatcher||this.defaultMatcher,this.formatter=params.textFormatter||(params.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new TextFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory)}createCondition(position){const type=this.getConditionType(position),model={filterType:this.filterType,type},values=this.getValuesWithSideEffects(position,!0);return values.length>0&&(model.filter=values[0]),values.length>1&&(model.filterTo=values[1]),model}areSimpleModelsEqual(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type}getInputs(position){const{eValuesFrom,eValuesTo}=this;return position>=eValuesFrom.length?[null,null]:[eValuesFrom[position],eValuesTo[position]]}getValues(position){return this.getValuesWithSideEffects(position,!1)}getValuesWithSideEffects(position,applySideEffects){const result=[];return this.forEachPositionInput(position,(element,index,_elPosition,numberOfInputs)=>{if(index<numberOfInputs){let value=_makeNull(element.getValue());applySideEffects&&this.textFilterParams.trimInput&&(value=trimInputForFilter(value)??null,element.setValue(value,!0)),result.push(value)}}),result}getDefaultFilterOptions(){return DEFAULT_TEXT_FILTER_OPTIONS}createValueElement(){const eCondition=_createElement({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(eCondition,this.eValuesFrom,"from"),this.createFromToElement(eCondition,this.eValuesTo,"to"),eCondition}createFromToElement(eCondition,eValues,fromTo){const eValue=this.createManagedBean(new AgInputTextField);eValue.addCssClass(`ag-filter-${fromTo}`),eValue.addCssClass("ag-filter-filter"),eValues.push(eValue),eCondition.appendChild(eValue.getGui())}removeValueElements(startPosition,deleteCount){const removeComps=__name(eGui=>this.removeComponents(eGui,startPosition,deleteCount),"removeComps");removeComps(this.eValuesFrom),removeComps(this.eValuesTo)}mapValuesFromModel(filterModel){const{filter,filterTo,type}=filterModel||{};return[filter||null,filterTo||null].slice(0,this.getNumberOfInputs(type))}evaluateNullValue(filterType){return filterType?["notEqual","notContains","blank"].indexOf(filterType)>=0:!1}evaluateNonNullValue(values,cellValue,filterModel,params){const formattedValues=values.map(v=>this.formatter(v))||[],cellValueFormatted=this.formatter(cellValue),{api,colDef,column,context,textFormatter}=this.textFilterParams;if(filterModel.type==="blank")return isBlank(cellValue);if(filterModel.type==="notBlank")return!isBlank(cellValue);const matcherParams={api,colDef,column,context,node:params.node,data:params.data,filterOption:filterModel.type,value:cellValueFormatted,textFormatter};return formattedValues.some(v=>this.matcher({...matcherParams,filterText:v}))}getModelAsString(model){return this.filterModelFormatter.getModelAsString(model)??""}},__name(_a179,"TextFilter"),_a179),_a180,TextFloatingFilter=(_a180=class extends TextInputFloatingFilter{init(params){super.init(params),this.filterModelFormatter=new TextFilterModelFormatter(this.getLocaleTextFunc.bind(this),this.optionsFactory)}refresh(params){super.refresh(params),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return DEFAULT_TEXT_FILTER_OPTIONS}createFloatingFilterInputService(){return this.createManagedBean(new FloatingFilterTextInputService)}},__name(_a180,"TextFloatingFilter"),_a180);function isQuickFilterPresent(beans){var _a238;return!!((_a238=beans.quickFilter)!=null&&_a238.isFilterPresent())}__name(isQuickFilterPresent,"isQuickFilterPresent");function getQuickFilter(beans){var _a238;return(_a238=beans.quickFilter)==null?void 0:_a238.getText()}__name(getQuickFilter,"getQuickFilter");function resetQuickFilter(beans){var _a238;(_a238=beans.quickFilter)==null||_a238.resetCache()}__name(resetQuickFilter,"resetQuickFilter");var _a181,QuickFilterService=(_a181=class extends BeanStub{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const resetListener=this.resetCache.bind(this),gos=this.gos;this.addManagedEventListeners({columnPivotModeChanged:resetListener,newColumnsLoaded:resetListener,columnRowGroupChanged:resetListener,columnVisible:__name(()=>{gos.get("includeHiddenColumnsInQuickFilter")||this.resetCache()},"columnVisible")}),this.addManagedPropertyListener("quickFilterText",e=>this.setFilter(e.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(gos.get("quickFilterText")),this.parser=gos.get("quickFilterParser"),this.matcher=gos.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){var _a238;const{autoColSvc,colModel,gos,pivotResultCols}=this.beans,pivotMode=colModel.isPivotMode(),groupAutoCols=autoColSvc==null?void 0:autoColSvc.getColumns(),providedCols=colModel.getColDefCols();let columnsForQuickFilter=(pivotMode&&!gos.get("applyQuickFilterBeforePivotOrAgg")?(_a238=pivotResultCols==null?void 0:pivotResultCols.getPivotResultCols())==null?void 0:_a238.list:providedCols)??[];groupAutoCols&&(columnsForQuickFilter=columnsForQuickFilter.concat(groupAutoCols)),this.colsToUse=gos.get("includeHiddenColumnsInQuickFilter")?columnsForQuickFilter:columnsForQuickFilter.filter(col=>col.isVisible()||col.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(node){const usingCache=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(usingCache,node):this.quickFilterParts.every(part=>usingCache?this.doesRowPassCache(node,part):this.doesRowPassNoCache(node,part))}resetCache(){this.beans.rowModel.forEachNode(node=>node.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter,parser}=this;quickFilter?this.quickFilterParts=parser?parser(quickFilter):quickFilter.split(" "):this.quickFilterParts=null}parseFilter(newFilter){return _exists(newFilter)?newFilter.toUpperCase():null}setFilter(newFilter){if(newFilter!=null&&typeof newFilter!="string"){_warn(70,{newFilter});return}const parsedFilter=this.parseFilter(newFilter);this.quickFilter!==parsedFilter&&(this.quickFilter=parsedFilter,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const parser=this.gos.get("quickFilterParser"),matcher=this.gos.get("quickFilterMatcher"),hasChanged=parser!==this.parser||matcher!==this.matcher;this.parser=parser,this.matcher=matcher,hasChanged&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(node,filterPart){return this.colsToUse.some(column=>{const part=this.getTextForColumn(column,node);return _exists(part)&&part.indexOf(filterPart)>=0})}doesRowPassCache(node,filterPart){return this.checkGenerateAggText(node),node.quickFilterAggregateText.indexOf(filterPart)>=0}doesRowPassMatcher(usingCache,node){let quickFilterAggregateText;usingCache?(this.checkGenerateAggText(node),quickFilterAggregateText=node.quickFilterAggregateText):quickFilterAggregateText=this.getAggText(node);const{quickFilterParts,matcher}=this;return matcher(quickFilterParts,quickFilterAggregateText)}checkGenerateAggText(node){node.quickFilterAggregateText||(node.quickFilterAggregateText=this.getAggText(node))}getTextForColumn(column,node){let value=this.beans.filterValueSvc.getValue(column,node);const colDef=column.getColDef();if(colDef.getQuickFilterText){const params=_addGridCommonParams(this.gos,{value,node,data:node.data,column,colDef});value=colDef.getQuickFilterText(params)}return _exists(value)?value.toString().toUpperCase():null}getAggText(node){const stringParts=[];return this.colsToUse.forEach(column=>{const part=this.getTextForColumn(column,node);_exists(part)&&stringParts.push(part)}),stringParts.join(`
`)}},__name(_a181,"QuickFilterService"),_a181),ClientSideRowModelFilterModule={moduleName:"ClientSideRowModelFilter",version:VERSION,rowModels:["clientSide"],beans:[FilterStage]},FilterCoreModule={moduleName:"FilterCore",version:VERSION,beans:[FilterManager],apiFunctions:{isAnyFilterPresent,onFilterChanged},css:[columnFiltersCSS],dependsOn:[ClientSideRowModelFilterModule]},FilterValueModule={moduleName:"FilterValue",version:VERSION,beans:[FilterValueService]},ColumnFilterModule={moduleName:"ColumnFilter",version:VERSION,beans:[ColumnFilterService,FilterMenuFactory],dynamicBeans:{headerFilterCellCtrl:HeaderFilterCellCtrl},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent,getColumnFilterInstance,destroyFilter,setFilterModel,getFilterModel,getColumnFilterModel,setColumnFilterModel,showColumnFilter},dependsOn:[FilterCoreModule,PopupModule,FilterValueModule,SharedMenuModule]},CustomFilterModule={moduleName:"CustomFilter",version:VERSION,userComponents:{agReadOnlyFloatingFilter:ReadOnlyFloatingFilter},dependsOn:[ColumnFilterModule]},TextFilterModule={moduleName:"TextFilter",version:VERSION,dependsOn:[ColumnFilterModule],userComponents:{agTextColumnFilter:TextFilter,agTextColumnFloatingFilter:TextFloatingFilter}},NumberFilterModule={moduleName:"NumberFilter",version:VERSION,dependsOn:[ColumnFilterModule],userComponents:{agNumberColumnFilter:NumberFilter,agNumberColumnFloatingFilter:NumberFloatingFilter}},DateFilterModule={moduleName:"DateFilter",version:VERSION,dependsOn:[ColumnFilterModule],userComponents:{agDateColumnFilter:DateFilter,agDateInput:DefaultDateComponent,agDateColumnFloatingFilter:DateFloatingFilter}},QuickFilterCoreModule={moduleName:"QuickFilterCore",version:VERSION,rowModels:["clientSide"],beans:[QuickFilterService],dependsOn:[FilterCoreModule,FilterValueModule]},QuickFilterModule={moduleName:"QuickFilter",version:VERSION,apiFunctions:{isQuickFilterPresent,getQuickFilter,resetQuickFilter},dependsOn:[QuickFilterCoreModule]},ExternalFilterModule={moduleName:"ExternalFilter",version:VERSION,dependsOn:[FilterCoreModule]},_a182,UndoRedoAction=(_a182=class{constructor(cellValueChanges){this.cellValueChanges=cellValueChanges}},__name(_a182,"UndoRedoAction"),_a182),_a183,RangeUndoRedoAction=(_a183=class extends UndoRedoAction{constructor(cellValueChanges,initialRange,finalRange,ranges){super(cellValueChanges),this.initialRange=initialRange,this.finalRange=finalRange,this.ranges=ranges}},__name(_a183,"RangeUndoRedoAction"),_a183),DEFAULT_STACK_SIZE=10,_a184,UndoRedoStack=(_a184=class{constructor(maxStackSize){this.actionStack=[],this.maxStackSize=maxStackSize||DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(item){item.cellValueChanges&&item.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(item))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},__name(_a184,"UndoRedoStack"),_a184),_a185,UndoRedoService=(_a185=class extends BeanStub{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=event=>{const eventCell={column:event.column,rowIndex:event.rowIndex,rowPinned:event.rowPinned},isCellEditing=this.activeCellEdit!==null&&_areCellsEqual(this.activeCellEdit,eventCell),isRowEditing=this.activeRowEdit!==null&&_isSameRow(this.activeRowEdit,eventCell);if(!(isCellEditing||isRowEditing||this.isPasting||this.isRangeInAction))return;const{rowPinned,rowIndex,column,oldValue,value}=event,cellValueChange={rowPinned,rowIndex,columnId:column.getColId(),newValue:value,oldValue};this.cellValueChanges.push(cellValueChange)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos,ctrlsSvc}=this.beans;if(!gos.get("undoRedoCellEditing"))return;const undoRedoLimit=gos.get("undoRedoCellEditingLimit");if(undoRedoLimit<=0)return;this.undoStack=new UndoRedoStack(undoRedoLimit),this.redoStack=new UndoRedoStack(undoRedoLimit),this.addListeners();const listener=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:__name(e=>{e.keepUndoRedoStack||this.clearStacks()},"modelUpdated"),columnPivotModeChanged:listener,newColumnsLoaded:listener,columnGroupOpened:listener,columnRowGroupChanged:listener,columnMoved:listener,columnPinned:listener,columnVisible:listener,rowDragEnd:listener}),ctrlsSvc.whenReady(this,p=>{this.gridBodyCtrl=p.gridBodyCtrl})}getCurrentUndoStackSize(){var _a238;return((_a238=this.undoStack)==null?void 0:_a238.getCurrentStackSize())??0}getCurrentRedoStackSize(){var _a238;return((_a238=this.redoStack)==null?void 0:_a238.getCurrentStackSize())??0}undo(source){const{eventSvc,undoStack,redoStack}=this;eventSvc.dispatchEvent({type:"undoStarted",source});const operationPerformed=this.undoRedo(undoStack,redoStack,"initialRange","oldValue","undo");eventSvc.dispatchEvent({type:"undoEnded",source,operationPerformed})}redo(source){const{eventSvc,undoStack,redoStack}=this;eventSvc.dispatchEvent({type:"redoStarted",source});const operationPerformed=this.undoRedo(redoStack,undoStack,"finalRange","newValue","redo");eventSvc.dispatchEvent({type:"redoEnded",source,operationPerformed})}undoRedo(undoRedoStack,opposingUndoRedoStack,rangeProperty,cellValueChangeProperty,source){if(!undoRedoStack)return!1;const undoRedoAction=undoRedoStack.pop();return!undoRedoAction||!undoRedoAction.cellValueChanges?!1:(this.processAction(undoRedoAction,cellValueChange=>cellValueChange[cellValueChangeProperty],source),undoRedoAction instanceof RangeUndoRedoAction?this.processRange(undoRedoAction.ranges||[undoRedoAction[rangeProperty]]):this.processCell(undoRedoAction.cellValueChanges),opposingUndoRedoStack.push(undoRedoAction),!0)}processAction(action,valueExtractor,source){action.cellValueChanges.forEach(cellValueChange=>{const{rowIndex,rowPinned,columnId}=cellValueChange,rowPosition={rowIndex,rowPinned},currentRow=_getRowNode(this.beans,rowPosition);currentRow.displayed&&currentRow.setDataValue(columnId,valueExtractor(cellValueChange),source)})}processRange(ranges){let lastFocusedCell;const rangeSvc=this.beans.rangeSvc;rangeSvc.removeAllCellRanges(!0),ranges.forEach((range,idx)=>{if(!range)return;const startRow=range.startRow,endRow=range.endRow;idx===ranges.length-1&&(lastFocusedCell={rowPinned:startRow.rowPinned,rowIndex:startRow.rowIndex,columnId:range.startColumn.getColId()},this.setLastFocusedCell(lastFocusedCell));const cellRangeParams={rowStartIndex:startRow.rowIndex,rowStartPinned:startRow.rowPinned,rowEndIndex:endRow.rowIndex,rowEndPinned:endRow.rowPinned,columnStart:range.startColumn,columns:range.columns};rangeSvc.addCellRange(cellRangeParams)})}processCell(cellValueChanges){const cellValueChange=cellValueChanges[0],{rowIndex,rowPinned}=cellValueChange,rowPosition={rowIndex,rowPinned},row=_getRowNode(this.beans,rowPosition),lastFocusedCell={rowPinned:cellValueChange.rowPinned,rowIndex:row.rowIndex,columnId:cellValueChange.columnId};this.setLastFocusedCell(lastFocusedCell)}setLastFocusedCell(lastFocusedCell){const{rowIndex,columnId,rowPinned}=lastFocusedCell,{colModel,focusSvc,rangeSvc}=this.beans,column=colModel.getCol(columnId);if(!column)return;const{scrollFeature}=this.gridBodyCtrl;scrollFeature.ensureIndexVisible(rowIndex),scrollFeature.ensureColumnVisible(column);const cellPosition={rowIndex,column,rowPinned};focusSvc.setFocusedCell({...cellPosition,forceBrowserFocus:!0}),rangeSvc==null||rangeSvc.setRangeToCell(cellPosition)}addListeners(){this.addManagedEventListeners({rowEditingStarted:__name(e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},"rowEditingStarted"),rowEditingStopped:__name(()=>{const action=new UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(action),this.activeRowEdit=null},"rowEditingStopped"),cellEditingStarted:__name(e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},"cellEditingStarted"),cellEditingStopped:__name(e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const action=new UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(action)}},"cellEditingStopped"),pasteStart:__name(()=>{this.isPasting=!0},"pasteStart"),pasteEnd:__name(()=>{const action=new UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(action),this.isPasting=!1},"pasteEnd"),fillStart:__name(()=>{this.isRangeInAction=!0},"fillStart"),fillEnd:__name(event=>{const action=new RangeUndoRedoAction(this.cellValueChanges,event.initialRange,event.finalRange);this.pushActionsToUndoStack(action),this.isRangeInAction=!1},"fillEnd"),keyShortcutChangedCellStart:__name(()=>{this.isRangeInAction=!0},"keyShortcutChangedCellStart"),keyShortcutChangedCellEnd:__name(()=>{let action;const{rangeSvc,gos}=this.beans;rangeSvc&&_isCellSelectionEnabled(gos)?action=new RangeUndoRedoAction(this.cellValueChanges,void 0,void 0,[...rangeSvc.getCellRanges()]):action=new UndoRedoAction(this.cellValueChanges),this.pushActionsToUndoStack(action),this.isRangeInAction=!1},"keyShortcutChangedCellEnd")})}pushActionsToUndoStack(action){this.undoStack.push(action),this.cellValueChanges=[],this.redoStack.clear()}},__name(_a185,"UndoRedoService"),_a185),cellEditingCSS=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;width:100%}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}",CheckboxCellEditorElement={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},_a186,CheckboxCellEditor=(_a186=class extends PopupComponent{constructor(){super(CheckboxCellEditorElement,[AgCheckboxSelector]),this.eCheckbox=RefPlaceholder}init(params){this.params=params;const isSelected=params.value??void 0,eCheckbox=this.eCheckbox;eCheckbox.setValue(isSelected),eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(isSelected),this.addManagedListeners(eCheckbox,{fieldValueChanged:__name(event=>this.setAriaLabel(event.selected),"fieldValueChanged")})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(isSelected){const translate=this.getLocaleTextFunc(),stateName=_getAriaCheckboxStateName(translate,isSelected),ariaLabel=translate("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${ariaLabel} (${stateName})`)}},__name(_a186,"CheckboxCellEditor"),_a186),_a187,SimpleCellEditor=(_a187=class extends PopupComponent{constructor(cellEditorInput){super({tag:"div",cls:"ag-cell-edit-wrapper",children:[cellEditorInput.getTemplate()]},cellEditorInput.getAgComponents()),this.cellEditorInput=cellEditorInput,this.eInput=RefPlaceholder}init(params){this.params=params;const{cellStartedEdit,eventKey,suppressPreventDefault}=params,eInput=this.eInput;this.cellEditorInput.init(eInput,params);let startValue,shouldSetStartValue=!0;cellStartedEdit?(this.focusAfterAttached=!0,eventKey===KeyCode.BACKSPACE||eventKey===KeyCode.DELETE?startValue="":eventKey&&eventKey.length===1?suppressPreventDefault?shouldSetStartValue=!1:startValue=eventKey:(startValue=this.cellEditorInput.getStartValue(),eventKey!==KeyCode.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,startValue=this.cellEditorInput.getStartValue()),shouldSetStartValue&&startValue!=null&&eInput.setStartValue(startValue),this.addManagedElementListeners(eInput.getGui(),{keydown:__name(event=>{const{key}=event;(key===KeyCode.PAGE_UP||key===KeyCode.PAGE_DOWN)&&event.preventDefault()},"keydown")})}afterGuiAttached(){var _a238,_b2;const translate=this.getLocaleTextFunc(),eInput=this.eInput;if(eInput.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;_isBrowserSafari()||eInput.getFocusableElement().focus();const inputEl=eInput.getInputElement();this.highlightAllOnFocus?inputEl.select():(_b2=(_a238=this.cellEditorInput).setCaret)==null||_b2.call(_a238)}focusIn(){const eInput=this.eInput,focusEl=eInput.getFocusableElement(),inputEl=eInput.getInputElement();focusEl.focus(),inputEl.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},__name(_a187,"SimpleCellEditor"),_a187),DateCellElement={tag:"ag-input-date-field",ref:"eInput",cls:"ag-cell-editor"},_a188,DateCellEditorInput=(_a188=class{getTemplate(){return DateCellElement}getAgComponents(){return[AgInputDateFieldSelector]}init(eInput,params){this.eInput=eInput,this.params=params;const{min,max,step}=params;min!=null&&eInput.setMin(min),max!=null&&eInput.setMax(max),step!=null&&eInput.setStep(step)}getValue(){const{eInput,params}=this,value=eInput.getDate();return!_exists(value)&&!_exists(params.value)?params.value:value??null}getStartValue(){const{value}=this.params;if(value instanceof Date)return _serialiseDate(value,!1)}},__name(_a188,"DateCellEditorInput"),_a188),_a189,DateCellEditor=(_a189=class extends SimpleCellEditor{constructor(){super(new DateCellEditorInput)}},__name(_a189,"DateCellEditor"),_a189),DateStringCellElement={tag:"ag-input-date-field",ref:"eInput",cls:"ag-cell-editor"},_a190,DateStringCellEditorInput=(_a190=class{constructor(getDataTypeService){this.getDataTypeService=getDataTypeService}getTemplate(){return DateStringCellElement}getAgComponents(){return[AgInputDateFieldSelector]}init(eInput,params){this.eInput=eInput,this.params=params;const{min,max,step}=params;min!=null&&eInput.setMin(min),max!=null&&eInput.setMax(max),step!=null&&eInput.setStep(step)}getValue(){const{params,eInput}=this,value=this.formatDate(eInput.getDate());return!_exists(value)&&!_exists(params.value)?params.value:params.parseValue(value??"")}getStartValue(){return _serialiseDate(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(value){const dataTypeSvc=this.getDataTypeService();return dataTypeSvc?dataTypeSvc.getDateParserFunction(this.params.column)(value):_parseDateTimeFromString(value)??void 0}formatDate(value){const dataTypeSvc=this.getDataTypeService();return dataTypeSvc?dataTypeSvc.getDateFormatterFunction(this.params.column)(value):_serialiseDate(value??null,!1)??void 0}},__name(_a190,"DateStringCellEditorInput"),_a190),_a191,DateStringCellEditor=(_a191=class extends SimpleCellEditor{constructor(){super(new DateStringCellEditorInput(()=>this.beans.dataTypeSvc))}},__name(_a191,"DateStringCellEditor"),_a191),LargeTextCellElement={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eTextArea",cls:"ag-large-text-input"}]},_a192,LargeTextCellEditor=(_a192=class extends PopupComponent{constructor(){super(LargeTextCellElement,[AgInputTextAreaSelector]),this.eTextArea=RefPlaceholder}init(params){this.params=params,this.focusAfterAttached=params.cellStartedEdit,this.eTextArea.setMaxLength(params.maxLength||200).setCols(params.cols||60).setRows(params.rows||10),params.value!=null&&this.eTextArea.setValue(params.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(event){const key=event.key;(key===KeyCode.LEFT||key===KeyCode.UP||key===KeyCode.RIGHT||key===KeyCode.DOWN||event.shiftKey&&key===KeyCode.ENTER)&&event.stopPropagation()}afterGuiAttached(){const translate=this.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const value=this.eTextArea.getValue(),params=this.params;return!_exists(value)&&!_exists(params.value)?params.value:params.parseValue(value)}},__name(_a192,"LargeTextCellEditor"),_a192),NumberCellElement={tag:"ag-input-number-field",ref:"eInput",cls:"ag-cell-editor"},_a193,NumberCellEditorInput=(_a193=class{getTemplate(){return NumberCellElement}getAgComponents(){return[AgInputNumberFieldSelector]}init(eInput,params){this.eInput=eInput,this.params=params;const{max,min,precision,step}=params;max!=null&&eInput.setMax(max),min!=null&&eInput.setMin(min),precision!=null&&eInput.setPrecision(precision),step!=null&&eInput.setStep(step);const inputEl=eInput.getInputElement();params.preventStepping?eInput.addManagedElementListeners(inputEl,{keydown:this.preventStepping}):params.showStepperButtons&&inputEl.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===KeyCode.UP||e.key===KeyCode.DOWN)&&e.preventDefault()}getValue(){const{eInput,params}=this,value=eInput.getValue();if(!_exists(value)&&!_exists(params.value))return params.value;let parsedValue=params.parseValue(value);if(parsedValue==null)return parsedValue;if(typeof parsedValue=="string"){if(parsedValue==="")return null;parsedValue=Number(parsedValue)}return isNaN(parsedValue)?null:parsedValue}getStartValue(){return this.params.value}setCaret(){_isBrowserSafari()&&this.eInput.getInputElement().focus({preventScroll:!0})}},__name(_a193,"NumberCellEditorInput"),_a193),_a194,NumberCellEditor=(_a194=class extends SimpleCellEditor{constructor(){super(new NumberCellEditorInput)}},__name(_a194,"NumberCellEditor"),_a194),SelectCellElement={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eSelect",cls:"ag-cell-editor"}]},_a195,SelectCellEditor=(_a195=class extends PopupComponent{constructor(){super(SelectCellElement,[AgSelectSelector]),this.eSelect=RefPlaceholder,this.startedByEnter=!1}wireBeans(beans){this.valueSvc=beans.valueSvc}init(params){this.focusAfterAttached=params.cellStartedEdit;const{eSelect,valueSvc,gos}=this,{values,value,eventKey}=params;if(_missing(values)){_warn(58);return}this.startedByEnter=eventKey!=null?eventKey===KeyCode.ENTER:!1;let hasValue=!1;values.forEach(currentValue=>{const option={value:currentValue},valueFormatted=valueSvc.formatValue(params.column,null,currentValue),valueFormattedExits=valueFormatted!=null;option.text=valueFormattedExits?valueFormatted:currentValue,eSelect.addOption(option),hasValue=hasValue||value===currentValue}),hasValue?eSelect.setValue(params.value,!0):params.values.length&&eSelect.setValue(params.values[0],!0);const{valueListGap,valueListMaxWidth,valueListMaxHeight}=params;valueListGap!=null&&eSelect.setPickerGap(valueListGap),valueListMaxHeight!=null&&eSelect.setPickerMaxHeight(valueListMaxHeight),valueListMaxWidth!=null&&eSelect.setPickerMaxWidth(valueListMaxWidth),gos.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:__name(()=>params.stopEditing(),"selectedItem")})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},__name(_a195,"SelectCellEditor"),_a195),TextCellEditorElement={tag:"ag-input-text-field",ref:"eInput",cls:"ag-cell-editor"},_a196,TextCellEditorInput=(_a196=class{getTemplate(){return TextCellEditorElement}getAgComponents(){return[AgInputTextFieldSelector]}init(eInput,params){this.eInput=eInput,this.params=params;const maxLength=params.maxLength;maxLength!=null&&eInput.setMaxLength(maxLength)}getValue(){const{eInput,params}=this,value=eInput.getValue();return!_exists(value)&&!_exists(params.value)?params.value:params.parseValue(value)}getStartValue(){const params=this.params;return params.useFormatter||params.column.getColDef().refData?params.formatValue(params.value):params.value}setCaret(){const eInput=this.eInput,value=eInput.getValue(),len=_exists(value)&&value.length||0;len&&eInput.getInputElement().setSelectionRange(len,len)}},__name(_a196,"TextCellEditorInput"),_a196),_a197,TextCellEditor=(_a197=class extends SimpleCellEditor{constructor(){super(new TextCellEditorInput)}},__name(_a197,"TextCellEditor"),_a197);function getVerticalPixelRange(beans){return beans.ctrlsSvc.getScrollFeature().getVScrollPosition()}__name(getVerticalPixelRange,"getVerticalPixelRange");function getHorizontalPixelRange(beans){return beans.ctrlsSvc.getScrollFeature().getHScrollPosition()}__name(getHorizontalPixelRange,"getHorizontalPixelRange");function ensureColumnVisible(beans,key,position="auto"){beans.frameworkOverrides.wrapIncoming(()=>beans.ctrlsSvc.getScrollFeature().ensureColumnVisible(key,position),"ensureVisible")}__name(ensureColumnVisible,"ensureColumnVisible");function ensureIndexVisible(beans,index,position){beans.frameworkOverrides.wrapIncoming(()=>beans.ctrlsSvc.getScrollFeature().ensureIndexVisible(index,position),"ensureVisible")}__name(ensureIndexVisible,"ensureIndexVisible");function ensureNodeVisible(beans,nodeSelector,position=null){beans.frameworkOverrides.wrapIncoming(()=>beans.ctrlsSvc.getScrollFeature().ensureNodeVisible(nodeSelector,position),"ensureVisible")}__name(ensureNodeVisible,"ensureNodeVisible");function undoCellEditing(beans){var _a238;(_a238=beans.undoRedo)==null||_a238.undo("api")}__name(undoCellEditing,"undoCellEditing");function redoCellEditing(beans){var _a238;(_a238=beans.undoRedo)==null||_a238.redo("api")}__name(redoCellEditing,"redoCellEditing");function getCellEditorInstances(beans,params={}){const res=[];return beans.rowRenderer.getCellCtrls(params.rowNodes,params.columns).forEach(cellCtrl=>{var _a238;const cellEditor=(_a238=cellCtrl.comp)==null?void 0:_a238.getCellEditor();cellEditor&&res.push(_unwrapUserComp(cellEditor))}),res}__name(getCellEditorInstances,"getCellEditorInstances");function getEditingCells(beans){const res=[];return beans.rowRenderer.getAllCellCtrls().forEach(cellCtrl=>{if(cellCtrl.editing){const{cellPosition}=cellCtrl;res.push(cellPosition)}}),res}__name(getEditingCells,"getEditingCells");function stopEditing(beans,cancel=!1){var _a238;(_a238=beans.editSvc)==null||_a238.stopAllEditing(cancel)}__name(stopEditing,"stopEditing");function startEditingCell(beans,params){const column=beans.colModel.getCol(params.colKey);if(!column){_warn(12,{colKey:params.colKey});return}const cellPosition={rowIndex:params.rowIndex,rowPinned:params.rowPinned||null,column};params.rowPinned==null&&ensureIndexVisible(beans,params.rowIndex),ensureColumnVisible(beans,params.colKey);const cell=_getCellByPosition(beans,cellPosition);if(!cell)return;const{focusSvc,gos,editSvc}=beans,isFocusWithinCell=__name(()=>{const activeElement=_getActiveDomElement(beans),eCell=cell.eGui;return activeElement!==eCell&&!!(eCell!=null&&eCell.contains(activeElement))},"isFocusWithinCell"),forceBrowserFocus=gos.get("stopEditingWhenCellsLoseFocus")&&isFocusWithinCell();(forceBrowserFocus||!focusSvc.isCellFocused(cellPosition))&&focusSvc.setFocusedCell({...cellPosition,forceBrowserFocus,preventScrollOnBrowserFocus:!0}),editSvc==null||editSvc.startRowOrCellEdit(cell,params.key)}__name(startEditingCell,"startEditingCell");function getCurrentUndoSize(beans){var _a238;return((_a238=beans.undoRedo)==null?void 0:_a238.getCurrentUndoStackSize())??0}__name(getCurrentUndoSize,"getCurrentUndoSize");function getCurrentRedoSize(beans){var _a238;return((_a238=beans.undoRedo)==null?void 0:_a238.getCurrentRedoStackSize())??0}__name(getCurrentRedoSize,"getCurrentRedoSize");var PopupEditorElement={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},_a198,PopupEditorWrapper=(_a198=class extends PopupComponent{constructor(params){super(PopupEditorElement),this.params=params}postConstruct(){_setDomData(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const eGui=this.getGui(),params=this.params,listener=__name(event=>{_isUserSuppressingKeyboardEvent(this.gos,event,params.node,params.column,!0)||params.onKeyDown(event)},"listener");this.addManagedElementListeners(eGui,{keydown:listener})}},__name(_a198,"PopupEditorWrapper"),_a198),_a199,EditService=(_a199=class extends BeanStub{constructor(){super(...arguments),this.beanName="editSvc"}startEditing(cellCtrl,key=null,cellStartedEdit=!1,event=null){var _a238;if(!cellCtrl.isCellEditable()||cellCtrl.editing)return!1;if(!cellCtrl.comp)return cellCtrl.onCompAttachedFuncs.push(()=>{this.startEditing(cellCtrl,key,cellStartedEdit,event)}),!0;const editorParams=this.createCellEditorParams(cellCtrl,key,cellStartedEdit),colDef=cellCtrl.column.getColDef(),compDetails=_getCellEditorDetails(this.beans.userCompFactory,colDef,editorParams),popup=(compDetails==null?void 0:compDetails.popupFromSelector)!=null?compDetails.popupFromSelector:!!colDef.cellEditorPopup,position=(compDetails==null?void 0:compDetails.popupPositionFromSelector)!=null?compDetails.popupPositionFromSelector:colDef.cellEditorPopupPosition;return setEditing(cellCtrl,!0,compDetails),cellCtrl.comp.setEditDetails(compDetails,popup,position,this.gos.get("reactiveCustomComponents")),this.eventSvc.dispatchEvent(cellCtrl.createEvent(event,"cellEditingStarted")),!((_a238=compDetails==null?void 0:compDetails.params)!=null&&_a238.suppressPreventDefault)}stopEditing(cellCtrl,cancel=!1){if(cellCtrl.onEditorAttachedFuncs=[],!cellCtrl.editing)return!1;const{comp:cellComp,column,rowNode}=cellCtrl,{newValue,newValueExists}=takeValueFromCellEditor(cancel,cellComp),oldValue=this.beans.valueSvc.getValueForDisplay(column,rowNode);let valueChanged=!1;return newValueExists&&(valueChanged=saveNewValue(cellCtrl,oldValue,newValue,rowNode,column)),setEditing(cellCtrl,!1,void 0),cellComp.setEditDetails(),cellCtrl.updateAndFormatValue(!1),cellCtrl.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventSvc.dispatchEvent({...cellCtrl.createEvent(null,"cellEditingStopped"),oldValue,newValue,valueChanged}),valueChanged}handleColDefChanged(cellCtrl){var _a238;const cellEditor=(_a238=cellCtrl.comp)==null?void 0:_a238.getCellEditor();if(cellEditor!=null&&cellEditor.refresh){const{eventKey,cellStartedEdit}=cellCtrl.editCompDetails.params,editorParams=this.createCellEditorParams(cellCtrl,eventKey,cellStartedEdit),colDef=cellCtrl.column.getColDef(),compDetails=_getCellEditorDetails(this.beans.userCompFactory,colDef,editorParams);cellEditor.refresh(compDetails.params)}}setFocusOutOnEditor(cellCtrl){if(!cellCtrl.editing)return;const cellEditor=cellCtrl.comp.getCellEditor();cellEditor&&cellEditor.focusOut&&cellEditor.focusOut()}setFocusInOnEditor(cellCtrl){if(!cellCtrl.editing)return;const cellComp=cellCtrl.comp,cellEditor=cellComp.getCellEditor();cellEditor!=null&&cellEditor.focusIn?cellEditor.focusIn():(cellCtrl.focusCell(!0),cellCtrl.onEditorAttachedFuncs.push(()=>{var _a238,_b2;return(_b2=(_a238=cellComp.getCellEditor())==null?void 0:_a238.focusIn)==null?void 0:_b2.call(_a238)}))}createPopupEditorWrapper(params){return new PopupEditorWrapper(params)}stopAllEditing(cancel=!1){this.beans.rowRenderer.getAllRowCtrls().forEach(rowCtrl=>this.stopRowEditing(rowCtrl,cancel))}stopRowEditing(rowCtrl,cancel=!1){var _a238;if(rowCtrl.stoppingRowEdit)return;const cellControls=rowCtrl.getAllCellCtrls(),isRowEdit=rowCtrl.editing;rowCtrl.stoppingRowEdit=!0;let fireRowEditEvent=!1;for(const ctrl of cellControls){const valueChanged=ctrl.stopEditing(cancel);isRowEdit&&!cancel&&!fireRowEditEvent&&valueChanged&&(fireRowEditEvent=!0)}fireRowEditEvent&&this.eventSvc.dispatchEvent(rowCtrl.createRowEvent("rowValueChanged")),isRowEdit&&((_a238=this.beans.rowEditSvc)==null||_a238.setEditing(rowCtrl,!1)),rowCtrl.stoppingRowEdit=!1}addStopEditingWhenGridLosesFocus(viewports){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const focusOutListener=__name(event=>{const elementWithFocus=event.relatedTarget;if(_getTabIndex(elementWithFocus)===null){this.stopAllEditing();return}let clickInsideGrid=viewports.some(viewport=>viewport.contains(elementWithFocus))&&_isElementInThisGrid(this.gos,elementWithFocus);if(!clickInsideGrid){const popupSvc=this.beans.popupSvc;clickInsideGrid=!!popupSvc&&(popupSvc.getActivePopups().some(popup=>popup.contains(elementWithFocus))||popupSvc.isElementWithinCustomPopup(elementWithFocus))}clickInsideGrid||this.stopAllEditing()},"focusOutListener");viewports.forEach(viewport=>this.addManagedElementListeners(viewport,{focusout:focusOutListener}))}setInlineEditingCss(rowCtrl){const editing=rowCtrl.editing||rowCtrl.getAllCellCtrls().some(cellCtrl=>cellCtrl.editing);rowCtrl.forEachGui(void 0,gui=>{gui.rowComp.addOrRemoveCssClass("ag-row-inline-editing",editing),gui.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!editing)})}isCellEditable(column,rowNode){if(rowNode.group){if(this.gos.get("treeData")){if(!rowNode.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return column.isColumnFunc(rowNode,column.colDef.editable)}startRowOrCellEdit(cellCtrl,key,event=null){var _a238;return cellCtrl.comp?this.gos.get("editType")==="fullRow"?((_a238=this.beans.rowEditSvc)==null?void 0:_a238.startEditing(cellCtrl.rowCtrl,key,cellCtrl))??!1:this.startEditing(cellCtrl,key,!0,event):(cellCtrl.onCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(cellCtrl,key,event)}),!0)}stopRowOrCellEdit(cellCtrl,cancel=!1,suppressNavigateAfterEdit=!1,shiftKey=!1){this.gos.get("editType")==="fullRow"?this.stopRowEditing(cellCtrl.rowCtrl,cancel):this.stopEditing(cellCtrl,cancel),suppressNavigateAfterEdit||this.navigateAfterEdit(shiftKey,cellCtrl.cellPosition)}createCellEditorParams(cellCtrl,key,cellStartedEdit){const{column,rowNode,cellPosition:{rowIndex}}=cellCtrl,{valueSvc,gos}=this.beans;return _addGridCommonParams(gos,{value:valueSvc.getValueForDisplay(column,rowNode),eventKey:key,column,colDef:column.getColDef(),rowIndex,node:rowNode,data:rowNode.data,cellStartedEdit,onKeyDown:cellCtrl.onKeyDown.bind(cellCtrl),stopEditing:this.stopRowOrCellEdit.bind(this,cellCtrl,!1),eGridCell:cellCtrl.eGui,parseValue:__name(newValue=>valueSvc.parseValue(column,rowNode,newValue,cellCtrl.value),"parseValue"),formatValue:cellCtrl.formatValue.bind(cellCtrl)})}navigateAfterEdit(shiftKey,cellPosition){var _a238;if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const key=shiftKey?KeyCode.UP:KeyCode.DOWN;(_a238=this.beans.navigation)==null||_a238.navigateToNextCell(null,key,cellPosition,!1)}}},__name(_a199,"EditService"),_a199);function setEditing(cellCtrl,editing,compDetails){cellCtrl.editCompDetails=compDetails,cellCtrl.editing!==editing&&(cellCtrl.editing=editing)}__name(setEditing,"setEditing");function takeValueFromCellEditor(cancel,cellComp){const noValueResult={newValueExists:!1};if(cancel)return noValueResult;const cellEditor=cellComp.getCellEditor();return!cellEditor||cellEditor.isCancelAfterEnd&&cellEditor.isCancelAfterEnd()?noValueResult:{newValue:cellEditor.getValue(),newValueExists:!0}}__name(takeValueFromCellEditor,"takeValueFromCellEditor");function saveNewValue(cellCtrl,oldValue,newValue,rowNode,column){if(newValue===oldValue)return!1;cellCtrl.suppressRefreshCell=!0;const valueChanged=rowNode.setDataValue(column,newValue,"edit");return cellCtrl.suppressRefreshCell=!1,valueChanged}__name(saveNewValue,"saveNewValue");var _a200,RowEditService=(_a200=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowEditSvc"}startEditing(rowCtrl,key=null,sourceRenderedCell=null,event=null){if(rowCtrl.editing)return!1;let preventDefault=!0,atLeastOneEditing=!1;const{editSvc}=this.beans;return rowCtrl.getAllCellCtrls().forEach(cellCtrl=>{const cellStartedEdit=cellCtrl===sourceRenderedCell;cellStartedEdit?preventDefault=(editSvc==null?void 0:editSvc.startEditing(cellCtrl,key,cellStartedEdit,event))??!1:editSvc==null||editSvc.startEditing(cellCtrl,null,cellStartedEdit,event),atLeastOneEditing||(atLeastOneEditing=cellCtrl.editing)}),atLeastOneEditing&&this.setEditing(rowCtrl,!0),preventDefault}setEditing(rowCtrl,value){rowCtrl.editing=value,rowCtrl.forEachGui(void 0,gui=>gui.rowComp.addOrRemoveCssClass("ag-row-editing",value));const event=value?rowCtrl.createRowEvent("rowEditingStarted"):rowCtrl.createRowEvent("rowEditingStopped");this.eventSvc.dispatchEvent(event)}},__name(_a200,"RowEditService"),_a200),EditCoreModule={moduleName:"EditCore",version:VERSION,beans:[EditService,RowEditService],apiFunctions:{getCellEditorInstances,getEditingCells,stopEditing,startEditingCell},dependsOn:[PopupModule],css:[cellEditingCSS]},UndoRedoEditModule={moduleName:"UndoRedoEdit",version:VERSION,beans:[UndoRedoService],apiFunctions:{undoCellEditing,redoCellEditing,getCurrentUndoSize,getCurrentRedoSize},dependsOn:[EditCoreModule]},TextEditorModule={moduleName:"TextEditor",version:VERSION,userComponents:{agCellEditor:TextCellEditor,agTextCellEditor:TextCellEditor},dependsOn:[EditCoreModule]},NumberEditorModule={moduleName:"NumberEditor",version:VERSION,userComponents:{agNumberCellEditor:{classImp:NumberCellEditor,params:{suppressPreventDefault:!0}}},dependsOn:[EditCoreModule]},DateEditorModule={moduleName:"DateEditor",version:VERSION,userComponents:{agDateCellEditor:DateCellEditor,agDateStringCellEditor:DateStringCellEditor},dependsOn:[EditCoreModule]},CheckboxEditorModule={moduleName:"CheckboxEditor",version:VERSION,userComponents:{agCheckboxCellEditor:CheckboxCellEditor},dependsOn:[EditCoreModule]},SelectEditorModule={moduleName:"SelectEditor",version:VERSION,userComponents:{agSelectCellEditor:SelectCellEditor},dependsOn:[EditCoreModule]},LargeTextEditorModule={moduleName:"LargeTextEditor",version:VERSION,userComponents:{agLargeTextCellEditor:LargeTextCellEditor},dependsOn:[EditCoreModule]},CustomEditorModule={moduleName:"CustomEditor",version:VERSION,dependsOn:[EditCoreModule]},_a201,SelectionColService=(_a201=class extends BeanStub{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",event=>{this.onSelectionOptionsChanged(event.currentValue,event.previousValue,_convertColumnEventSourceType(event.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(cols){const selectionCols=this.columns;selectionCols!=null&&(cols.list=selectionCols.list.concat(cols.list),cols.tree=selectionCols.tree.concat(cols.tree),_updateColsMap(cols))}createColumns(cols,updateOrders){var _a238,_b2;const destroyCollection=__name(()=>{var _a239;_destroyColumnTree(this.beans,(_a239=this.columns)==null?void 0:_a239.tree),this.columns=null},"destroyCollection"),newTreeDepth=cols.treeDepth,treeDepthSame=(((_a238=this.columns)==null?void 0:_a238.treeDepth)??-1)==newTreeDepth,list=this.generateSelectionCols();if(_areColIdsEqual(list,((_b2=this.columns)==null?void 0:_b2.list)??[])&&treeDepthSame)return;destroyCollection();const{colGroupSvc}=this.beans,treeDepth=(colGroupSvc==null?void 0:colGroupSvc.findDepth(cols.tree))??0,tree=(colGroupSvc==null?void 0:colGroupSvc.balanceTreeForAutoCols(list,treeDepth))??[];this.columns={list,tree,treeDepth,map:{}},updateOrders(__name(cols2=>{if(!cols2)return null;const colsFiltered=cols2.filter(col=>!isColumnSelectionCol(col));return[...list,...colsFiltered]},"putSelectionColsFirstInList"))}updateColumns(event){var _a238;const source=_convertColumnEventSourceType(event.source),current=event.currentValue;(_a238=this.columns)==null||_a238.list.forEach(col=>{const newColDef=this.createSelectionColDef(current);col.setColDef(newColDef,null,source),_applyColumnState(this.beans,{state:[{colId:col.getColId(),...newColDef}]},source)})}getColumn(key){var _a238;return((_a238=this.columns)==null?void 0:_a238.list.find(col=>_columnsMatch(col,key)))??null}getColumns(){var _a238;return((_a238=this.columns)==null?void 0:_a238.list)??null}isSelectionColumnEnabled(){var _a238,_b2;const{gos,beans}=this,rowSelection=gos.get("rowSelection");if(typeof rowSelection!="object"||!_isRowSelection(gos))return!1;const hasAutoCols=(((_b2=(_a238=beans.autoColSvc)==null?void 0:_a238.getColumns())==null?void 0:_b2.length)??0)>0;if(rowSelection.checkboxLocation==="autoGroupColumn"&&hasAutoCols)return!1;const checkboxes=!!_getCheckboxes(rowSelection),headerCheckbox=_getHeaderCheckbox(rowSelection);return checkboxes||headerCheckbox}createSelectionColDef(def){const{gos}=this.beans,selectionColumnDef=def??gos.get("selectionColumnDef"),enableRTL=gos.get("enableRtl"),{rowSpan:_,spanRows:__,...filteredSelColDef}=selectionColumnDef??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:enableRTL?"right":"left",comparator(valueA,valueB,nodeA,nodeB){const aSelected=nodeA.isSelected(),bSelected=nodeB.isSelected();return aSelected===bSelected?0:aSelected?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...filteredSelColDef,colId:SELECTION_COLUMN_ID}}generateSelectionCols(){var _a238;if(!this.isSelectionColumnEnabled())return[];const colDef=this.createSelectionColDef(),colId=colDef.colId;(_a238=this.beans.validation)==null||_a238.validateColDef(colDef,colId,!0);const col=new AgColumn(colDef,null,colId,!1);return this.createBean(col),[col]}onSelectionOptionsChanged(current,prev,source){const prevCheckbox=prev&&typeof prev!="string"?_getCheckboxes(prev):void 0,currCheckbox=current&&typeof current!="string"?_getCheckboxes(current):void 0,checkboxHasChanged=prevCheckbox!==currCheckbox,prevHeaderCheckbox=prev&&typeof prev!="string"?_getHeaderCheckbox(prev):void 0,currHeaderCheckbox=current&&typeof current!="string"?_getHeaderCheckbox(current):void 0,headerCheckboxHasChanged=prevHeaderCheckbox!==currHeaderCheckbox,currLocation=_getCheckboxLocation(current),prevLocation=_getCheckboxLocation(prev);(checkboxHasChanged||headerCheckboxHasChanged||currLocation!==prevLocation)&&this.beans.colModel.refreshAll(source)}destroy(){var _a238;_destroyColumnTree(this.beans,(_a238=this.columns)==null?void 0:_a238.tree),super.destroy()}refreshVisibility(source){if(!this.isSelectionColumnEnabled())return;const beans=this.beans,visibleColumns=beans.visibleCols.getAllTrees()??[];if(visibleColumns.length!==0){if(!visibleColumns.some(isLeafColumnSelectionCol)){const existingState=_getColumnState(beans).find(state=>isColumnSelectionCol(state.colId));existingState&&_applyColumnState(beans,{state:[{colId:existingState.colId,hide:!existingState.hide}]},source)}if(visibleColumns.length===1){const firstColumn=visibleColumns[0],leafSelectionCol=getLeafColumnSelectionCol(firstColumn);if(!leafSelectionCol)return;_applyColumnState(beans,{state:[{colId:leafSelectionCol.getColId(),hide:!0}]},source)}}}},__name(_a201,"SelectionColService"),_a201),isLeafColumnSelectionCol=__name(c=>{var _a238;return c.isColumn?isColumnSelectionCol(c):((_a238=c.getChildren())==null?void 0:_a238.some(isLeafColumnSelectionCol))??!1},"isLeafColumnSelectionCol");function getLeafColumnSelectionCol(c){if(c.isColumn)return isColumnSelectionCol(c)?c:null;const children=c.getChildren()??[];for(const child of children){const selCol=getLeafColumnSelectionCol(child);if(selCol)return selCol}return null}__name(getLeafColumnSelectionCol,"getLeafColumnSelectionCol");function setNodesSelected(beans,params){var _a238;if(!params.nodes.every(node=>node.rowPinned?(_warn(59),!1):node.id===void 0?(_warn(60),!1):!0))return;const{nodes,source,newValue}=params;(_a238=beans.selectionSvc)==null||_a238.setNodesSelected({nodes,source:source??"api",newValue})}__name(setNodesSelected,"setNodesSelected");function selectAll(beans,selectAll2,source="apiSelectAll"){var _a238;(_a238=beans.selectionSvc)==null||_a238.selectAllRowNodes({source,selectAll:selectAll2})}__name(selectAll,"selectAll");function deselectAll(beans,selectAll2,source="apiSelectAll"){var _a238;(_a238=beans.selectionSvc)==null||_a238.deselectAllRowNodes({source,selectAll:selectAll2})}__name(deselectAll,"deselectAll");function selectAllFiltered(beans,source="apiSelectAllFiltered"){var _a238;(_a238=beans.selectionSvc)==null||_a238.selectAllRowNodes({source,selectAll:"filtered"})}__name(selectAllFiltered,"selectAllFiltered");function deselectAllFiltered(beans,source="apiSelectAllFiltered"){var _a238;(_a238=beans.selectionSvc)==null||_a238.deselectAllRowNodes({source,selectAll:"filtered"})}__name(deselectAllFiltered,"deselectAllFiltered");function selectAllOnCurrentPage(beans,source="apiSelectAllCurrentPage"){var _a238;(_a238=beans.selectionSvc)==null||_a238.selectAllRowNodes({source,selectAll:"currentPage"})}__name(selectAllOnCurrentPage,"selectAllOnCurrentPage");function deselectAllOnCurrentPage(beans,source="apiSelectAllCurrentPage"){var _a238;(_a238=beans.selectionSvc)==null||_a238.deselectAllRowNodes({source,selectAll:"currentPage"})}__name(deselectAllOnCurrentPage,"deselectAllOnCurrentPage");function getSelectedNodes(beans){var _a238;return((_a238=beans.selectionSvc)==null?void 0:_a238.getSelectedNodes())??[]}__name(getSelectedNodes,"getSelectedNodes");function getSelectedRows(beans){var _a238;return((_a238=beans.selectionSvc)==null?void 0:_a238.getSelectedRows())??[]}__name(getSelectedRows,"getSelectedRows");var _a202,SelectionService=(_a202=class extends BaseSelectionService{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos}=this;this.mode=_getRowSelectionMode(gos),this.groupSelectsDescendants=_getGroupSelectsDescendants(gos),this.groupSelectsFiltered=_getGroupSelection(gos)==="filteredDescendants",this.masterSelectsDetail=_getMasterSelects(gos)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const groupSelectsDescendants=_getGroupSelectsDescendants(gos),selectionMode=_getRowSelectionMode(gos),groupSelectsFiltered=_getGroupSelection(gos)==="filteredDescendants";this.masterSelectsDetail=_getMasterSelects(gos)==="detail",(groupSelectsDescendants!==this.groupSelectsDescendants||groupSelectsFiltered!==this.groupSelectsFiltered||selectionMode!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=groupSelectsDescendants,this.groupSelectsFiltered=groupSelectsFiltered,this.mode=selectionMode)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(event,rowNode,source){if(this.isRowSelectionBlocked(rowNode))return 0;const selection=this.inferNodeSelections(rowNode,event.shiftKey,event.metaKey||event.ctrlKey,source);return selection==null?0:(this.selectionCtx.selectAll=!1,"select"in selection?(selection.reset?this.resetNodes():this.selectRange(selection.deselect,!1,source),this.selectRange(selection.select,!0,source)):this.setNodesSelected({nodes:[selection.node],newValue:selection.newValue,clearSelection:selection.clearSelection,event,source}))}setNodesSelected({newValue,clearSelection,suppressFinishActions,nodes,event,source}){var _a238;if(!_isRowSelection(this.gos)&&newValue)return _warn(132),0;if(nodes.length===0)return 0;if(nodes.length>1&&!this.isMultiSelect())return _warn(130),0;let updatedCount=0;for(let i=0;i<nodes.length;i++){const rowNode=nodes[i],node=_normaliseFooterRef(rowNode),skipThisNode=this.groupSelectsFiltered&&node.group;if(node.rowPinned){_warn(59);continue}if(node.id===void 0){_warn(60);continue}skipThisNode||this.selectRowNode(node,newValue,event,source)&&(this.detailSelection.delete(node.id),updatedCount++),this.groupSelectsDescendants&&((_a238=node.childrenAfterGroup)!=null&&_a238.length)&&(updatedCount+=this.selectChildren(node,newValue,source))}return suppressFinishActions||(newValue&&(clearSelection||!this.isMultiSelect())&&(updatedCount+=this.clearOtherNodes(_normaliseFooterRef(nodes[0]),source)),updatedCount>0&&(this.updateGroupsFromChildrenSelections(source),this.dispatchSelectionChanged(source))),updatedCount}selectRange(nodesToSelect,value,source){let updatedCount=0;return nodesToSelect.forEach(rowNode=>{if(rowNode.group&&this.groupSelectsDescendants)return;this.selectRowNode(rowNode,value,void 0,source)&&updatedCount++}),updatedCount>0&&(this.updateGroupsFromChildrenSelections(source),this.dispatchSelectionChanged(source)),updatedCount}selectChildren(node,newValue,source){const children=this.groupSelectsFiltered?node.childrenAfterAggFilter:node.childrenAfterGroup;return children?this.setNodesSelected({newValue,clearSelection:!1,suppressFinishActions:!0,source,nodes:children}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const selectedRows=[];return this.selectedNodes.forEach(rowNode=>selectedRows.push(rowNode.data)),selectedRows}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(predicate){const newSelectedNodes=new Map;this.selectedNodes.forEach((rowNode,key)=>{predicate(rowNode)&&newSelectedNodes.set(key,rowNode)}),this.selectedNodes=newSelectedNodes}updateGroupsFromChildrenSelections(source,changedPath){if(!this.groupSelectsDescendants)return!1;const{gos,rowModel}=this.beans;if(!_isClientSideRowModel(gos))return!1;const rootNode=rowModel.rootNode;if(!rootNode)return!1;changedPath||(changedPath=new ChangedPath(!0,rootNode),changedPath.active=!1);let selectionChanged=!1;return changedPath.forEachChangedNodeDepthFirst(rowNode=>{if(rowNode!==rootNode){const selected=this.calculateSelectedFromChildren(rowNode);selectionChanged=this.selectRowNode(rowNode,selected===null?!1:selected,void 0,source)||selectionChanged}}),selectionChanged}clearOtherNodes(rowNodeToKeepSelected,source){const groupsToRefresh=new Map;let updatedCount=0;return this.selectedNodes.forEach(otherRowNode=>{if(otherRowNode&&otherRowNode.id!==rowNodeToKeepSelected.id){const rowNode=this.selectedNodes.get(otherRowNode.id);updatedCount+=this.setNodesSelected({nodes:[rowNode],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source}),this.groupSelectsDescendants&&otherRowNode.parent&&groupsToRefresh.set(otherRowNode.parent.id,otherRowNode.parent)}}),groupsToRefresh.forEach(group=>{const selected=this.calculateSelectedFromChildren(group);this.selectRowNode(group,selected===null?!1:selected,void 0,source)}),updatedCount}onRowSelected(event){const rowNode=event.node;this.groupSelectsDescendants&&rowNode.group||(rowNode.isSelected()?this.selectedNodes.set(rowNode.id,rowNode):this.selectedNodes.delete(rowNode.id))}syncInRowNode(rowNode,oldNode){this.syncInOldRowNode(rowNode,oldNode),this.syncInNewRowNode(rowNode)}createDaemonNode(rowNode){if(!rowNode.id)return;const oldNode=new RowNode(this.beans);return oldNode.id=rowNode.id,oldNode.data=rowNode.data,oldNode.__daemon=!0,oldNode.__selected=rowNode.__selected,oldNode.level=rowNode.level,oldNode}syncInOldRowNode(rowNode,oldNode){oldNode&&rowNode.id!==oldNode.id&&this.selectedNodes.get(oldNode.id)==rowNode&&this.selectedNodes.set(oldNode.id,oldNode)}syncInNewRowNode(rowNode){this.selectedNodes.has(rowNode.id)?(rowNode.__selected=!0,this.selectedNodes.set(rowNode.id,rowNode)):rowNode.__selected=!1}reset(source){const selectionCount=this.getSelectionCount();this.resetNodes(),selectionCount&&this.dispatchSelectionChanged(source)}resetNodes(){this.selectedNodes.forEach(node=>{this.selectRowNode(node,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos,rowModel}=this.beans;if(!_isClientSideRowModel(gos))return;const topLevelNodes=rowModel.getTopLevelNodes();if(topLevelNodes===null)return;const result=[];function traverse(nodes){for(let i=0,l=nodes.length;i<l;i++){const node=nodes[i];node.isSelected()?result.push(node):node.group&&node.childrenAfterGroup&&traverse(node.childrenAfterGroup)}}return __name(traverse,"traverse"),traverse(topLevelNodes),result}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source,selectAll:selectAll2}){const rowModelClientSide=_isClientSideRowModel(this.gos);let updatedNodes=!1;const callback=__name(rowNode=>{const updated=this.selectRowNode(_normaliseFooterRef(rowNode),!1,void 0,source);updatedNodes||(updatedNodes=updated)},"callback");if(selectAll2==="currentPage"||selectAll2==="filtered"){if(!rowModelClientSide){_error(102);return}this.getNodesToSelect(selectAll2).forEach(callback)}else this.selectedNodes.forEach(callback),this.reset(source);if(this.selectionCtx.selectAll=!1,rowModelClientSide&&this.groupSelectsDescendants){const updated=this.updateGroupsFromChildrenSelections(source);updatedNodes||(updatedNodes=updated)}updatedNodes&&this.dispatchSelectionChanged(source)}getSelectedCounts(selectAll2){let selectedCount=0,notSelectedCount=0;return this.getNodesToSelect(selectAll2).forEach(node=>{this.groupSelectsDescendants&&node.group||(node.isSelected()?selectedCount++:node.selectable&&notSelectedCount++)}),{selectedCount,notSelectedCount}}getSelectAllState(selectAll2){const{selectedCount,notSelectedCount}=this.getSelectedCounts(selectAll2);return _calculateSelectAllState(selectedCount,notSelectedCount)??null}hasNodesToSelect(selectAll2){return this.getNodesToSelect(selectAll2).filter(node=>node.selectable).length>0}getNodesToSelect(selectAll2){if(!this.canSelectAll())return[];const nodes=[];if(selectAll2==="currentPage")return this.forEachNodeOnPage(node=>{if(!node.group){nodes.push(node);return}if(!node.expanded&&!node.footer){const recursivelyAddChildren=__name(child=>{var _a238;nodes.push(child),(_a238=child.childrenAfterFilter)!=null&&_a238.length&&child.childrenAfterFilter.forEach(recursivelyAddChildren)},"recursivelyAddChildren");recursivelyAddChildren(node);return}this.groupSelectsDescendants||nodes.push(node)}),nodes;const clientSideRowModel=this.beans.rowModel;return selectAll2==="filtered"?(clientSideRowModel.forEachNodeAfterFilter(node=>{nodes.push(node)}),nodes):(clientSideRowModel.forEachNode(node=>{nodes.push(node)}),nodes)}forEachNodeOnPage(callback){const{pageBounds,rowModel}=this.beans,firstRow=pageBounds.getFirstRow(),lastRow=pageBounds.getLastRow();for(let i=firstRow;i<=lastRow;i++){const node=rowModel.getRow(i);node&&callback(node)}}selectAllRowNodes(params){const{gos,selectionCtx}=this;if(!_isRowSelection(gos)){_warn(132);return}if(_isUsingNewRowSelectionAPI(gos)&&!_isMultiRowSelection(gos)){_warn(130);return}if(!this.canSelectAll())return;const{source,selectAll:selectAll2}=params;let updatedNodes=!1;if(this.getNodesToSelect(selectAll2).forEach(rowNode=>{const updated=this.selectRowNode(_normaliseFooterRef(rowNode),!0,void 0,source);updatedNodes||(updatedNodes=updated)}),selectionCtx.selectAll=!0,_isClientSideRowModel(gos)&&this.groupSelectsDescendants){const updated=this.updateGroupsFromChildrenSelections(source);updatedNodes||(updatedNodes=updated)}updatedNodes&&this.dispatchSelectionChanged(source)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(state,source){if(!Array.isArray(state)){_error(103);return}const rowIds=new Set(state),nodes=[];this.beans.rowModel.forEachNode(node=>{rowIds.has(node.id)&&nodes.push(node)}),this.setNodesSelected({newValue:!0,nodes,source})}canSelectAll(){const{gos,rowModel}=this.beans;return _isClientSideRowModel(gos)?!0:(_error(100,{rowModelType:rowModel.getType()}),!1)}updateSelectable(changedPath){var _a238;const{gos,rowModel}=this.beans;if(!_isRowSelection(gos))return;const source="selectableChanged",skipLeafNodes=changedPath!==void 0,isCSRMGroupSelectsDescendants=_isClientSideRowModel(gos)&&this.groupSelectsDescendants,nodesToDeselect=[],nodeCallback=__name(node=>{var _a239;if(skipLeafNodes&&!node.group)return;if(isCSRMGroupSelectsDescendants&&node.group){const hasSelectableChild=((_a239=node.childrenAfterGroup)==null?void 0:_a239.some(rowNode=>rowNode.selectable))??!1;this.setRowSelectable(node,hasSelectableChild,!0);return}!this.updateRowSelectable(node,!0)&&node.isSelected()&&nodesToDeselect.push(node)},"nodeCallback");if(isCSRMGroupSelectsDescendants){if(changedPath===void 0){const rootNode=rowModel.rootNode;changedPath=rootNode?new ChangedPath(!1,rootNode):void 0}changedPath==null||changedPath.forEachChangedNodeDepthFirst(nodeCallback,!skipLeafNodes,!skipLeafNodes)}else rowModel.forEachNode(nodeCallback);nodesToDeselect.length&&this.setNodesSelected({nodes:nodesToDeselect,newValue:!1,source}),!skipLeafNodes&&isCSRMGroupSelectsDescendants&&((_a238=this.updateGroupsFromChildrenSelections)==null||_a238.call(this,source))}updateSelectableAfterGrouping(changedPath){var _a238;this.updateSelectable(changedPath),this.groupSelectsDescendants&&((_a238=this.updateGroupsFromChildrenSelections)!=null&&_a238.call(this,"rowGroupChanged",changedPath))&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(node,e){var _a238,_b2;if(!this.masterSelectsDetail)return;const detailApi=(_b2=(_a238=node.detailNode)==null?void 0:_a238.detailGridInfo)==null?void 0:_b2.api;if(!detailApi)return;const isSelectAll=_isAllSelected(detailApi);if(node.isSelected()!==isSelectAll&&this.selectRowNode(node,isSelectAll,e,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!isSelectAll){const detailSelected=this.detailSelection.get(node.id)??new Set;for(const n of detailApi.getSelectedNodes())detailSelected.add(n.id);this.detailSelection.set(node.id,detailSelected)}}setDetailSelectionState(masterNode,detailGridOptions,detailApi){if(this.masterSelectsDetail){if(!_isMultiRowSelection(detailGridOptions)){_warn(269);return}switch(masterNode.isSelected()){case!0:{detailApi.selectAll();break}case!1:{detailApi.deselectAll();break}case void 0:{const selectedIds=this.detailSelection.get(masterNode.id);if(selectedIds){const nodes=[];for(const id of selectedIds){const n=detailApi.getRowNode(id);n&&nodes.push(n)}detailApi.setNodesSelected({nodes,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(source){this.eventSvc.dispatchEvent({type:"selectionChanged",source,selectedNodes:this.getSelectedNodes(),serverSideState:null})}},__name(_a202,"SelectionService"),_a202);function _normaliseFooterRef(node){return node.footer?node.sibling:node}__name(_normaliseFooterRef,"_normaliseFooterRef");function _isAllSelected(api){let selectedCount=0,notSelectedCount=0;return api.forEachNode(node=>{node.isSelected()?selectedCount++:node.selectable&&notSelectedCount++}),_calculateSelectAllState(selectedCount,notSelectedCount)}__name(_isAllSelected,"_isAllSelected");function _calculateSelectAllState(selected,notSelected){if(selected===0&&notSelected===0)return!1;if(!(selected>0&&notSelected>0))return selected>0}__name(_calculateSelectAllState,"_calculateSelectAllState");var SharedRowSelectionModule={moduleName:"SharedRowSelection",version:VERSION,beans:[SelectionColService],apiFunctions:{setNodesSelected,selectAll,deselectAll,selectAllFiltered,deselectAllFiltered,selectAllOnCurrentPage,deselectAllOnCurrentPage,getSelectedNodes,getSelectedRows}},RowSelectionModule={moduleName:"RowSelection",version:VERSION,rowModels:["clientSide","infinite","viewport"],beans:[SelectionService],dependsOn:[SharedRowSelectionModule]};function expandAll(beans){var _a238;(_a238=beans.expansionSvc)==null||_a238.expandAll(!0)}__name(expandAll,"expandAll");function collapseAll(beans){var _a238;(_a238=beans.expansionSvc)==null||_a238.expandAll(!1)}__name(collapseAll,"collapseAll");function onRowHeightChanged(beans){const clientSideRowModel=_getClientSideRowModel(beans),serverSideRowModel=_getServerSideRowModel(beans);clientSideRowModel?clientSideRowModel.onRowHeightChanged():serverSideRowModel&&serverSideRowModel.onRowHeightChanged()}__name(onRowHeightChanged,"onRowHeightChanged");function setRowCount(beans,rowCount,maxRowFound){var _a238;const serverSideRowModel=_getServerSideRowModel(beans);if(serverSideRowModel){if(((_a238=beans.rowGroupColsSvc)==null?void 0:_a238.columns.length)===0){if(rowCount<0){_error(238);return}serverSideRowModel.setRowCount(rowCount,maxRowFound);return}_error(28);return}const infiniteRowModel=_getInfiniteRowModel(beans);if(infiniteRowModel){infiniteRowModel.setRowCount(rowCount,maxRowFound);return}}__name(setRowCount,"setRowCount");function getCacheBlockState(beans){var _a238;return _isServerSideRowModel(beans.gos)?beans.rowModel.getBlockStates():((_a238=beans.rowNodeBlockLoader)==null?void 0:_a238.getBlockState())??{}}__name(getCacheBlockState,"getCacheBlockState");function isLastRowIndexKnown(beans){return beans.rowModel.isLastRowIndexKnown()}__name(isLastRowIndexKnown,"isLastRowIndexKnown");var CsrmSsrmSharedApiModule={moduleName:"CsrmSsrmSharedApi",version:VERSION,apiFunctions:{expandAll,collapseAll,onRowHeightChanged}},SsrmInfiniteSharedApiModule={moduleName:"SsrmInfiniteSharedApi",version:VERSION,apiFunctions:{setRowCount,getCacheBlockState,isLastRowIndexKnown}},_a203,AlignedGridsService=(_a203=class extends BeanStub{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let alignedGrids=this.gos.get("alignedGrids")??[];const isCallbackConfig=typeof alignedGrids=="function";return typeof alignedGrids=="function"&&(alignedGrids=alignedGrids()),alignedGrids.map(alignedGrid=>{var _a238;if(!alignedGrid){_error(18),isCallbackConfig||_error(20);return}if(this.isGridApi(alignedGrid))return alignedGrid;const refOrComp=alignedGrid;return"current"in refOrComp?(_a238=refOrComp.current)==null?void 0:_a238.api:(refOrComp.api||_error(19),refOrComp.api)}).filter(api=>!!api&&!api.isDestroyed())}isGridApi(ref){return!!ref&&!!ref.dispatchEvent}postConstruct(){const fireColumnEvent=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:fireColumnEvent,columnVisible:fireColumnEvent,columnPinned:fireColumnEvent,columnGroupOpened:fireColumnEvent,columnResized:fireColumnEvent,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:__name(({event})=>this.onColumnEvent(event),"alignedGridColumn"),alignedGridScroll:__name(({event})=>this.onScrollEvent(event),"alignedGridScroll")})}fireEvent(event){this.consuming||this.getAlignedGridApis().forEach(api=>{api.isDestroyed()||api.dispatchEvent(event)})}onEvent(callback){this.consuming=!0,callback(),this.consuming=!1}fireColumnEvent(columnEvent){this.fireEvent({type:"alignedGridColumn",event:columnEvent})}fireScrollEvent(scrollEvent){scrollEvent.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:scrollEvent})}onScrollEvent(event){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(event.left,!0)})}extractDataFromEvent(event,func){const result=[];return event.columns?event.columns.forEach(column=>{result.push(func(column))}):event.column&&result.push(func(event.column)),result}getMasterColumns(event){return this.extractDataFromEvent(event,col=>col)}getColumnIds(event){return this.extractDataFromEvent(event,col=>col.getColId())}onColumnEvent(event){this.onEvent(()=>{switch(event.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(event);break}case"columnGroupOpened":{this.processGroupOpenedEvent(event);break}case"columnPivotChanged":_warn(21);break}})}processGroupOpenedEvent(groupOpenedEvent){const{colGroupSvc}=this.beans;colGroupSvc&&groupOpenedEvent.columnGroups.forEach(masterGroup=>{let otherColumnGroup=null;masterGroup&&(otherColumnGroup=colGroupSvc.getProvidedColGroup(masterGroup.getGroupId())),!(masterGroup&&!otherColumnGroup)&&colGroupSvc.setColumnGroupOpened(otherColumnGroup,masterGroup.isExpanded(),"alignedGridChanged")})}processColumnEvent(colEvent){var _a238;const masterColumn=colEvent.column;let otherColumn=null;const beans=this.beans,{colResize,ctrlsSvc,colModel}=beans;if(masterColumn&&(otherColumn=colModel.getColDefCol(masterColumn.getColId())),masterColumn&&!otherColumn)return;const masterColumns=this.getMasterColumns(colEvent);switch(colEvent.type){case"columnMoved":{const destColState=colEvent.api.getColumnState().map(s=>({colId:s.colId}));_applyColumnState(beans,{state:destColState,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const destColState=colEvent.api.getColumnState().map(s=>({colId:s.colId,hide:s.hide}));_applyColumnState(beans,{state:destColState},"alignedGridChanged")}break;case"columnPinned":{const destColState=colEvent.api.getColumnState().map(s=>({colId:s.colId,pinned:s.pinned}));_applyColumnState(beans,{state:destColState},"alignedGridChanged")}break;case"columnResized":{const resizedEvent=colEvent,columnWidths={};masterColumns.forEach(column=>{columnWidths[column.getId()]={key:column.getColId(),newWidth:column.getActualWidth()}}),(_a238=resizedEvent.flexColumns)==null||_a238.forEach(col=>{columnWidths[col.getId()]&&delete columnWidths[col.getId()]}),colResize==null||colResize.setColumnWidths(Object.values(columnWidths),!1,resizedEvent.finished,"alignedGridChanged");break}}const isVerticalScrollShowing=ctrlsSvc.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(api=>{api.setGridOption("alwaysShowVerticalScroll",isVerticalScrollShowing)})}},__name(_a203,"AlignedGridsService"),_a203),AlignedGridsModule={moduleName:"AlignedGrids",version:VERSION,beans:[AlignedGridsService]},_a204,ClientSideNodeManager=(_a204=class extends AbstractClientSideNodeManager{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}},__name(_a204,"ClientSideNodeManager"),_a204),_a205,ChangedRowNodes=(_a205=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(node){this.adds.delete(node)||(this.updates.delete(node),this.removals.add(node))}update(node){this.adds.has(node)||this.updates.add(node)}add(node){this.adds.add(node)}},__name(_a205,"ChangedRowNodes"),_a205);function updateChildIndexes(rowNode){if(_missing(rowNode.childrenAfterSort))return;const listToSort=rowNode.childrenAfterSort;for(let i=0;i<listToSort.length;i++){const child=listToSort[i],firstChild=i===0,lastChild=i===rowNode.childrenAfterSort.length-1;child.setFirstChild(firstChild),child.lastChild!==lastChild&&(child.lastChild=lastChild,child.dispatchRowEvent("lastChildChanged")),child.childIndex!==i&&(child.childIndex=i,child.dispatchRowEvent("childIndexChanged"))}}__name(updateChildIndexes,"updateChildIndexes");function updateRowNodeAfterSort(rowNode){rowNode.sibling&&(rowNode.sibling.childrenAfterSort=rowNode.childrenAfterSort),updateChildIndexes(rowNode)}__name(updateRowNodeAfterSort,"updateRowNodeAfterSort");var _a206,SortStage=(_a206=class extends BeanStub{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(params){const beans=this.beans,sortOptions=beans.sortSvc.getSortOptions(),sortActive=_exists(sortOptions)&&sortOptions.length>0,deltaSort=sortActive&&!!params.changedRowNodes&&this.gos.get("deltaSort"),sortContainsGroupColumns=sortOptions.some(({column})=>_isColumnsSortingCoupledToGroup(beans.gos)?column.isPrimary()&&column.isRowGroupActive():!!column.getColDef().showRowGroup);this.sort(beans,sortOptions,sortActive,deltaSort,params.changedRowNodes,params.changedPath,sortContainsGroupColumns)}sort(beans,sortOptions,sortActive,useDeltaSort,changedRowNodes,changedPath,sortContainsGroupColumns){const{gos,colModel,rowGroupColsSvc,rowNodeSorter,rowRenderer,showRowGroupCols}=beans,groupMaintainOrder=gos.get("groupMaintainOrder"),groupColumnsPresent=colModel.getCols().some(c=>c.isRowGroupActive()),isPivotMode=colModel.isPivotMode(),postSortFunc=gos.getCallback("postSortRows");let hasAnyFirstChildChanged=!1;const callback=__name(rowNode=>{var _a238,_b2;const skipSortingPivotLeafs=isPivotMode&&rowNode.leafGroup,skipSortingGroups=groupMaintainOrder&&groupColumnsPresent&&!rowNode.leafGroup&&!sortContainsGroupColumns;let newChildrenAfterSort;if(skipSortingGroups){const nextGroup=(_a238=rowGroupColsSvc==null?void 0:rowGroupColsSvc.columns)==null?void 0:_a238[rowNode.level+1],wasSortExplicitlyRemoved=(nextGroup==null?void 0:nextGroup.getSort())===null,childrenToBeSorted=rowNode.childrenAfterAggFilter.slice(0);if(rowNode.childrenAfterSort&&!wasSortExplicitlyRemoved){const indexedOrders={};rowNode.childrenAfterSort.forEach((node,idx)=>{indexedOrders[node.id]=idx}),childrenToBeSorted.sort((row1,row2)=>(indexedOrders[row1.id]??0)-(indexedOrders[row2.id]??0))}newChildrenAfterSort=childrenToBeSorted}else!sortActive||skipSortingPivotLeafs?newChildrenAfterSort=rowNode.childrenAfterAggFilter.slice(0):useDeltaSort&&changedRowNodes?newChildrenAfterSort=doDeltaSort(rowNodeSorter,rowNode,changedRowNodes,changedPath,sortOptions):newChildrenAfterSort=rowNodeSorter.doFullSort(rowNode.childrenAfterAggFilter,sortOptions);if(hasAnyFirstChildChanged||(hasAnyFirstChildChanged=((_b2=rowNode.childrenAfterSort)==null?void 0:_b2[0])!==newChildrenAfterSort[0]),rowNode.childrenAfterSort=newChildrenAfterSort,updateRowNodeAfterSort(rowNode),postSortFunc){const params={nodes:rowNode.childrenAfterSort};postSortFunc(params)}},"callback");if(changedPath==null||changedPath.forEachChangedNodeDepthFirst(callback),hasAnyFirstChildChanged&&this.gos.get("groupHideOpenParents")){const columns=showRowGroupCols==null?void 0:showRowGroupCols.getShowRowGroupCols();columns!=null&&columns.length&&rowRenderer.refreshCells({columns,force:!0})}}},__name(_a206,"SortStage"),_a206);function doDeltaSort(rowNodeSorter,rowNode,changedRowNodes,changedPath,sortOptions){const unsortedRows=rowNode.childrenAfterAggFilter,oldSortedRows=rowNode.childrenAfterSort;if(!oldSortedRows)return rowNodeSorter.doFullSort(unsortedRows,sortOptions);const untouchedRows=new Set,touchedRows=[],{updates,adds}=changedRowNodes;for(let i=0,len=unsortedRows.length;i<len;++i){const row=unsortedRows[i];updates.has(row)||adds.has(row)||changedPath&&!changedPath.canSkip(row)?touchedRows.push({currentPos:touchedRows.length,rowNode:row}):untouchedRows.add(row.id)}const sortedUntouchedRows=oldSortedRows.filter(child=>untouchedRows.has(child.id)).map((rowNode2,currentPos)=>({currentPos,rowNode:rowNode2}));return touchedRows.sort((a,b)=>rowNodeSorter.compareRowNodes(sortOptions,a,b)),mergeSortedArrays(rowNodeSorter,sortOptions,touchedRows,sortedUntouchedRows)}__name(doDeltaSort,"doDeltaSort");function mergeSortedArrays(rowNodeSorter,sortOptions,arr1,arr2){const res=[];let i=0,j=0;const arr1Length=arr1.length,arr2Length=arr2.length;for(;i<arr1Length&&j<arr2Length;){const a=arr1[i],b=arr2[j],compareResult=rowNodeSorter.compareRowNodes(sortOptions,a,b);let chosen;compareResult<0?(chosen=a,++i):(chosen=b,++j),res.push(chosen.rowNode)}for(;i<arr1Length;)res.push(arr1[i++].rowNode);for(;j<arr2Length;)res.push(arr2[j++].rowNode);return res}__name(mergeSortedArrays,"mergeSortedArrays");var _a207,ClientSideRowModel=(_a207=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=_debounce(this,this.onRowHeightChanged.bind(this),100)}wireBeans(beans){this.colModel=beans.colModel,this.valueCache=beans.valueCache,this.filterStage=beans.filterStage,this.sortStage=beans.sortStage,this.flattenStage=beans.flattenStage,this.groupStage=beans.groupStage,this.aggStage=beans.aggStage,this.pivotStage=beans.pivotStage,this.filterAggStage=beans.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter(stage=>!!stage);const refreshEverythingFunc=this.refreshModel.bind(this,{step:"group"}),refreshEverythingAfterColsChangedFunc=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:refreshEverythingAfterColsChangedFunc,columnRowGroupChanged:refreshEverythingFunc,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:refreshEverythingFunc,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new RowNode(this.beans);const nodeManager=this.getNewNodeManager();this.nodeManager=nodeManager,nodeManager.activate(this.rootNode)}getNewNodeManager(){const{gos,beans}=this;switch(_getGroupingApproach(gos)){case"treeNested":return beans.csrmChildrenTreeNodeSvc??beans.csrmNodeSvc;case"treePath":return beans.csrmPathTreeNodeSvc??beans.csrmNodeSvc;default:return beans.csrmNodeSvc}}addPropertyListeners(){const allProps=["treeData","treeDataChildrenField",...this.orderedStages.flatMap(({refreshProps})=>[...refreshProps])];this.addManagedPropertyListeners(allProps,params=>{var _a238;const properties=(_a238=params.changeSet)==null?void 0:_a238.properties;properties&&this.onPropChange(properties)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(startPixel,endPixel,startLimitIndex,endLimitIndex){let atLeastOneChange,res=!1;do{atLeastOneChange=!1;const rowAtStartPixel=this.getRowIndexAtPixel(startPixel),rowAtEndPixel=this.getRowIndexAtPixel(endPixel),firstRow=Math.max(rowAtStartPixel,startLimitIndex),lastRow=Math.min(rowAtEndPixel,endLimitIndex);for(let rowIndex=firstRow;rowIndex<=lastRow;rowIndex++){const rowNode=this.getRow(rowIndex);if(rowNode.rowHeightEstimated){const rowHeight=_getRowHeightForNode(this.beans,rowNode);rowNode.setRowHeight(rowHeight.height),atLeastOneChange=!0,res=!0}}atLeastOneChange&&this.setRowTopAndRowIndex()}while(atLeastOneChange);return res}onPropChange(properties){var _a238;if(!this.rootNode)return;const gos=this.gos,changedProps=new Set(properties),params={step:"nothing",changedProps},rowDataChanged=changedProps.has("rowData"),oldNodeManager=this.nodeManager,nodeManager=this.getNewNodeManager(),reset=oldNodeManager!==nodeManager||rowDataChanged&&changedProps.has("treeData")&&gos.get("treeData")||changedProps.has("treeDataChildrenField")&&gos.get("treeData");let newRowData;if((reset||rowDataChanged)&&(newRowData=gos.get("rowData"),newRowData!=null&&!Array.isArray(newRowData)&&(newRowData=null,_warn(1))),reset&&(rowDataChanged||(newRowData=(oldNodeManager==null?void 0:oldNodeManager.extractRowData())??newRowData),oldNodeManager!==nodeManager&&(oldNodeManager==null||oldNodeManager.deactivate(),this.nodeManager=nodeManager),nodeManager.activate(this.rootNode)),newRowData&&(!reset&&!this.isEmpty()&&newRowData.length>0&&gos.exists("getRowId")&&!gos.get("resetRowDataOnUpdate")?(params.keepRenderedRows=!0,params.animate=!this.gos.get("suppressAnimationFrame"),params.changedRowNodes=new ChangedRowNodes,nodeManager.setImmutableRowData(params,newRowData)):(params.rowDataUpdated=!0,params.newData=!0,(_a238=this.beans.selectionSvc)==null||_a238.reset("rowDataChanged"),this.rowNodesCountReady=!0,nodeManager.setNewRowData(newRowData))),params.rowDataUpdated)params.step="group";else if(params.step==="nothing"){for(const{refreshProps,step}of this.orderedStages)if(properties.some(prop=>refreshProps.has(prop))){params.step=step;break}}params.step!=="nothing"&&this.refreshModel(params)}setRowTopAndRowIndex(){const{beans}=this,defaultRowHeight=beans.environment.getDefaultRowHeight();let nextRowTop=0;const displayedRowsMapped=new Set,allowEstimate=_isDomLayout(this.gos,"normal"),rowsToDisplay=this.rowsToDisplay;for(let i=0,len=rowsToDisplay.length;i<len;++i){const rowNode=rowsToDisplay[i];if(rowNode.id!=null&&displayedRowsMapped.add(rowNode.id),rowNode.rowHeight==null){const rowHeight=_getRowHeightForNode(beans,rowNode,allowEstimate,defaultRowHeight);rowNode.setRowHeight(rowHeight.height,rowHeight.estimated)}rowNode.setRowTop(nextRowTop),rowNode.setRowIndex(i),nextRowTop+=rowNode.rowHeight}return displayedRowsMapped}clearRowTopAndRowIndex(changedPath,displayedRowsMapped){const changedPathActive=changedPath.active,clearIfNotDisplayed=__name(rowNode=>{rowNode&&rowNode.id!=null&&!displayedRowsMapped.has(rowNode.id)&&rowNode.clearRowTopAndRowIndex()},"clearIfNotDisplayed"),recurse=__name(rowNode=>{if(rowNode!==null&&(clearIfNotDisplayed(rowNode),clearIfNotDisplayed(rowNode.detailNode),clearIfNotDisplayed(rowNode.sibling),rowNode.hasChildren()&&rowNode.childrenAfterGroup)){const isRootNode=rowNode.level==-1;changedPathActive&&!isRootNode&&!rowNode.expanded||rowNode.childrenAfterGroup.forEach(recurse)}},"recurse");recurse(this.rootNode)}ensureRowsAtPixel(rowNodes,pixel,increment=0){var _a238;const indexAtPixelNow=this.getRowIndexAtPixel(pixel),rowNodeAtPixelNow=this.getRow(indexAtPixelNow),animate=!this.gos.get("suppressAnimationFrame");if(rowNodeAtPixelNow===rowNodes[0])return!1;const allLeafChildren=(_a238=this.rootNode)==null?void 0:_a238.allLeafChildren;return allLeafChildren?(rowNodes.forEach(rowNode=>{_removeFromArray(allLeafChildren,rowNode)}),rowNodes.forEach((rowNode,idx)=>{allLeafChildren.splice(Math.max(indexAtPixelNow+increment,0)+idx,0,rowNode)}),rowNodes.forEach((rowNode,index)=>{rowNode.sourceRowIndex=index}),this.refreshModel({step:"group",keepRenderedRows:!0,animate,rowNodesOrderChanged:!0}),!0):!1}highlightRowAtPixel(rowNode,pixel){const indexAtPixelNow=pixel!=null?this.getRowIndexAtPixel(pixel):null,rowNodeAtPixelNow=indexAtPixelNow!=null?this.getRow(indexAtPixelNow):null;if(!rowNodeAtPixelNow||!rowNode||pixel==null){this.clearHighlightedRow();return}const highlight=this.getHighlightPosition(pixel,rowNodeAtPixelNow),isSamePosition=this.isHighlightingCurrentPosition(rowNode,rowNodeAtPixelNow,highlight),isDifferentNode=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==rowNodeAtPixelNow;(isSamePosition||isDifferentNode)&&(this.clearHighlightedRow(),isSamePosition)||(this.setRowNodeHighlighted(rowNodeAtPixelNow,highlight),this.lastHighlightedRow=rowNodeAtPixelNow)}setRowNodeHighlighted(rowNode,highlighted){rowNode.highlighted!==highlighted&&(rowNode.highlighted=highlighted,rowNode.dispatchRowEvent("rowHighlightChanged"))}getHighlightPosition(pixel,rowNode){if(!rowNode){const index=this.getRowIndexAtPixel(pixel);if(rowNode=this.getRow(index||0),!rowNode)return"Below"}const{rowTop,rowHeight}=rowNode;return pixel-rowTop<rowHeight/2?"Above":"Below"}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(movingRowNode,hoveredRowNode,highlightPosition){if(movingRowNode===hoveredRowNode)return!0;const diff=highlightPosition==="Above"?-1:1;return this.getRow(hoveredRowNode.rowIndex+diff)===movingRowNode}clearHighlightedRow(){this.lastHighlightedRow&&(this.setRowNodeHighlighted(this.lastHighlightedRow,null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){const rootNode=this.rootNode;if(!rootNode||this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===rootNode)return 1;const filteredChildren=rootNode.childrenAfterAggFilter,totalFooterInc=rootNode.sibling?1:0;return(filteredChildren?filteredChildren.length:0)+totalFooterInc}getTopLevelRowDisplayedIndex(topLevelIndex){const{rootNode,rowsToDisplay}=this;if(!rootNode||!rowsToDisplay.length||rowsToDisplay[0]===rootNode)return topLevelIndex;const{childrenAfterSort}=rootNode,getDefaultIndex=__name(adjustedIndex=>{let rowNode=childrenAfterSort[adjustedIndex];if(this.gos.get("groupHideOpenParents"))for(;rowNode.expanded&&rowNode.childrenAfterSort&&rowNode.childrenAfterSort.length>0;)rowNode=rowNode.childrenAfterSort[0];return rowNode.rowIndex},"getDefaultIndex"),{footerSvc}=this.beans;return footerSvc?footerSvc.getTopDisplayIndex(rowsToDisplay,topLevelIndex,childrenAfterSort,getDefaultIndex):getDefaultIndex(topLevelIndex)}getTopLevelIndexFromDisplayedIndex(displayedIndex){var _a238;const{rootNode,rowsToDisplay}=this;if(!rootNode||!rowsToDisplay.length||rowsToDisplay[0]===rootNode)return displayedIndex;let node=this.getRow(displayedIndex);for(node.footer&&(node=node.sibling);node.parent&&node.parent!==rootNode;)node=node.parent;const topLevelIndex=(_a238=rootNode.childrenAfterSort)==null?void 0:_a238.findIndex(childNode=>childNode===node);return topLevelIndex===-1?displayedIndex:topLevelIndex??displayedIndex}getRowBounds(index){const rowNode=this.rowsToDisplay[index];return rowNode?{rowTop:rowNode.rowTop,rowHeight:rowNode.rowHeight}:null}onRowGroupOpened(){const animate=_isAnimateRows(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate})}onFilterChanged(event){if(event.afterDataChange)return;const animate=_isAnimateRows(this.gos),step=event.columns.length===0||event.columns.some(col=>col.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step,keepRenderedRows:!0,animate})}onSortChanged(){const animate=_isAnimateRows(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(enabled){const changedPath=new ChangedPath(!1,this.rootNode);return enabled||(changedPath.active=!1),changedPath}isSuppressModelUpdateAfterUpdateTransaction(params){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes,newData,rowDataUpdated}=params;return!(!changedRowNodes||newData||!rowDataUpdated||changedRowNodes.removals.size||changedRowNodes.adds.size)}refreshModel(params){var _a238,_b2;if(!this.rootNode)return;const changedPath=params.changedPath??(params.changedPath=this.createChangePath(!params.newData&&!!params.rowDataUpdated));if((_b2=(_a238=this.nodeManager).refreshModel)==null||_b2.call(_a238,params,this.started),this.eventSvc.dispatchEvent({type:"beforeRefreshModel",params}),!this.started||(params.rowDataUpdated&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(params)))return;switch(this.isRefreshingModel=!0,params.step){case"group":this.doRowGrouping(params.changedRowNodes,changedPath,!!params.rowNodesOrderChanged,!!params.afterColumnsChanged);case"filter":this.doFilter(changedPath);case"pivot":this.doPivot(changedPath);case"aggregate":this.doAggregate(changedPath);case"filter_aggregates":this.doFilterAggregates(changedPath);case"sort":this.doSort(params.changedRowNodes,changedPath);case"map":this.doRowsToDisplay()}const displayedNodesMapped=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(changedPath,displayedNodesMapped),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:params.animate,keepRenderedRows:params.keepRenderedRows,newData:params.newData,newPage:!1,keepUndoRedoStack:params.keepUndoRedoStack})}isEmpty(){var _a238,_b2,_c;return!((_b2=(_a238=this.rootNode)==null?void 0:_a238.allLeafChildren)!=null&&_b2.length)||!((_c=this.colModel)!=null&&_c.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(firstInRange,lastInRange){let started=!1,finished=!1;const result=[],groupsSelectChildren=_getGroupSelectsDescendants(this.gos);return this.forEachNodeAfterFilterAndSort(rowNode=>{if(finished)return;if(started&&(rowNode===lastInRange||rowNode===firstInRange)&&(finished=!0,rowNode.group&&groupsSelectChildren)){result.push(...rowNode.allLeafChildren);return}if(!started){if(rowNode!==lastInRange&&rowNode!==firstInRange)return;started=!0}if(!rowNode.group||!groupsSelectChildren){result.push(rowNode);return}}),result}getTopLevelNodes(){var _a238;return((_a238=this.rootNode)==null?void 0:_a238.childrenAfterGroup)??null}getRow(index){return this.rowsToDisplay[index]}isRowPresent(rowNode){return this.rowsToDisplay.indexOf(rowNode)>=0}getRowIndexAtPixel(pixelToMatch){const rowsToDisplay=this.rowsToDisplay;if(this.isEmpty()||rowsToDisplay.length===0)return-1;let bottomPointer=0,topPointer=rowsToDisplay.length-1;if(pixelToMatch<=0)return 0;if(_last(rowsToDisplay).rowTop<=pixelToMatch)return rowsToDisplay.length-1;let oldBottomPointer=-1,oldTopPointer=-1;for(;;){const midPointer=Math.floor((bottomPointer+topPointer)/2),currentRowNode=rowsToDisplay[midPointer];if(this.isRowInPixel(currentRowNode,pixelToMatch)||(currentRowNode.rowTop<pixelToMatch?bottomPointer=midPointer+1:currentRowNode.rowTop>pixelToMatch&&(topPointer=midPointer-1),oldBottomPointer===bottomPointer&&oldTopPointer===topPointer))return midPointer;oldBottomPointer=bottomPointer,oldTopPointer=topPointer}}isRowInPixel(rowNode,pixelToMatch){const topPixel=rowNode.rowTop,bottomPixel=rowNode.rowTop+rowNode.rowHeight;return topPixel<=pixelToMatch&&bottomPixel>pixelToMatch}forEachLeafNode(callback){var _a238,_b2;(_b2=(_a238=this.rootNode)==null?void 0:_a238.allLeafChildren)==null||_b2.forEach((rowNode,index)=>callback(rowNode,index))}forEachNode(callback,includeFooterNodes=!1){this.depthFirstSearchRowNodes(callback,includeFooterNodes)}forEachDisplayedNode(callback){this.rowsToDisplay.forEach(callback)}forEachNodeAfterFilter(callback,includeFooterNodes=!1){this.depthFirstSearchRowNodes(callback,includeFooterNodes,node=>node.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(callback,includeFooterNodes=!1){this.depthFirstSearchRowNodes(callback,includeFooterNodes,node=>node.childrenAfterSort)}forEachPivotNode(callback,includeFooterNodes=!1,afterSort=!1){const childrenField=afterSort?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(callback,includeFooterNodes,node=>node.leafGroup?null:node[childrenField])}depthFirstSearchRowNodes(callback,includeFooterNodes=!1,getChildren=node2=>node2.childrenAfterGroup,node=this.rootNode,startIndex=0){let index=startIndex;if(!node)return index;const isRootNode=node===this.rootNode;isRootNode||callback(node,index++);const{footerSvc}=this.beans;if(node.hasChildren()&&!node.footer){const children=getChildren(node);if(children){index=(footerSvc==null?void 0:footerSvc.addTotalRows(index,node,callback,includeFooterNodes,isRootNode,"top"))??index;for(const node2 of children)index=this.depthFirstSearchRowNodes(callback,includeFooterNodes,getChildren,node2,index);return(footerSvc==null?void 0:footerSvc.addTotalRows(index,node,callback,includeFooterNodes,isRootNode,"bottom"))??index}}return index}doAggregate(changedPath){var _a238;const rootNode=this.rootNode;rootNode&&((_a238=this.aggStage)==null||_a238.execute({rowNode:rootNode,changedPath}))}doFilterAggregates(changedPath){const rootNode=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:rootNode,changedPath}):rootNode.childrenAfterAggFilter=rootNode.childrenAfterFilter}doSort(changedRowNodes,changedPath){this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes,changedPath}):changedPath.forEachChangedNodeDepthFirst(rowNode=>{rowNode.childrenAfterSort=rowNode.childrenAfterAggFilter.slice(0),updateRowNodeAfterSort(rowNode)})}doRowGrouping(changedRowNodes,changedPath,rowNodesOrderChanged,afterColumnsChanged){var _a238;const rootNode=this.rootNode;if(!((_a238=this.groupStage)==null?void 0:_a238.execute({rowNode:rootNode,changedPath,changedRowNodes,rowNodesOrderChanged,afterColumnsChanged}))&&!this.nodeManager.treeData){const sibling=rootNode.sibling;rootNode.childrenAfterGroup=rootNode.allLeafChildren,sibling&&(sibling.childrenAfterGroup=rootNode.childrenAfterGroup),rootNode.updateHasChildren()}this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(changedPath){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath}):changedPath.forEachChangedNodeDepthFirst(rowNode=>{rowNode.childrenAfterFilter=rowNode.childrenAfterGroup,updateRowNodeAfterFilter(rowNode)},!0)}doPivot(changedPath){var _a238;(_a238=this.pivotStage)==null||_a238.execute({rowNode:this.rootNode,changedPath})}getRowNode(id){if(typeof id=="string"&&id.indexOf(ROW_ID_PREFIX_ROW_GROUP)==0){let res;return this.forEachNode(node=>{node.id===id&&(res=node)}),res}return this.nodeManager.getRowNode(id)}batchUpdateRowData(rowDataTransaction,callback){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const waitMillis=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},waitMillis)}this.rowDataTransactionBatch.push({rowDataTransaction,callback})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var _a238,_b2;(_a238=this.valueCache)==null||_a238.onDataChanged();const callbackFuncsBound=[],rowNodeTrans=[],changedRowNodes=new ChangedRowNodes;let orderChanged=!1;(_b2=this.rowDataTransactionBatch)==null||_b2.forEach(tranItem=>{this.rowNodesCountReady=!0;const{rowNodeTransaction,rowsInserted}=this.nodeManager.updateRowData(tranItem.rowDataTransaction,changedRowNodes);rowsInserted&&(orderChanged=!0),rowNodeTrans.push(rowNodeTransaction),tranItem.callback&&callbackFuncsBound.push(tranItem.callback.bind(null,rowNodeTransaction))}),this.commitTransactions(orderChanged,changedRowNodes),callbackFuncsBound.length>0&&window.setTimeout(()=>{callbackFuncsBound.forEach(func=>func())},0),rowNodeTrans.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:rowNodeTrans}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(rowDataTran){var _a238;(_a238=this.valueCache)==null||_a238.onDataChanged(),this.rowNodesCountReady=!0;const changedRowNodes=new ChangedRowNodes,{rowNodeTransaction,rowsInserted}=this.nodeManager.updateRowData(rowDataTran,changedRowNodes);return this.commitTransactions(rowsInserted,changedRowNodes),rowNodeTransaction}commitTransactions(rowNodesOrderChanged,changedRowNodes){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{flattenStage,rootNode}=this;let rowsToDisplay;if(flattenStage)rowsToDisplay=flattenStage.execute({rowNode:rootNode});else{rowsToDisplay=(rootNode==null?void 0:rootNode.childrenAfterSort)??[];for(const row of rowsToDisplay)row.setUiLevel(0)}this.rowsToDisplay=rowsToDisplay}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const rootNode=this.rootNode;if(!rootNode)return;const atLeastOne=this.resetRowHeightsForAllRowNodes();rootNode.setRowHeight(rootNode.rowHeight,!0),rootNode.sibling&&rootNode.sibling.setRowHeight(rootNode.sibling.rowHeight,!0),atLeastOne&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let atLeastOne=!1;return this.forEachNode(rowNode=>{rowNode.setRowHeight(rowNode.rowHeight,!0);const detailNode=rowNode.detailNode;detailNode&&detailNode.setRowHeight(detailNode.rowHeight,!0),rowNode.sibling&&rowNode.sibling.setRowHeight(rowNode.sibling.rowHeight,!0),atLeastOne=!0}),atLeastOne}onGridStylesChanges(e){var _a238;if(e.rowHeightChanged){if((_a238=this.beans.rowAutoHeight)!=null&&_a238.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.lastHighlightedRow=null,this.orderedStages=_EmptyArray,this.rowsToDisplay=_EmptyArray}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},__name(_a207,"ClientSideRowModel"),_a207);function onGroupExpandedOrCollapsed(beans){var _a238;(_a238=beans.expansionSvc)==null||_a238.onGroupExpandedOrCollapsed()}__name(onGroupExpandedOrCollapsed,"onGroupExpandedOrCollapsed");function refreshClientSideRowModel(beans,step){const clientSideRowModel=_getClientSideRowModel(beans);clientSideRowModel&&((!step||step==="everything")&&(step="group"),clientSideRowModel.refreshModel({step,keepRenderedRows:!0,animate:!beans.gos.get("suppressAnimationFrame")}))}__name(refreshClientSideRowModel,"refreshClientSideRowModel");function isRowDataEmpty(beans){var _a238;return((_a238=_getClientSideRowModel(beans))==null?void 0:_a238.isEmpty())??!0}__name(isRowDataEmpty,"isRowDataEmpty");function forEachLeafNode(beans,callback){var _a238;(_a238=_getClientSideRowModel(beans))==null||_a238.forEachLeafNode(callback)}__name(forEachLeafNode,"forEachLeafNode");function forEachNodeAfterFilter(beans,callback){var _a238;(_a238=_getClientSideRowModel(beans))==null||_a238.forEachNodeAfterFilter(callback)}__name(forEachNodeAfterFilter,"forEachNodeAfterFilter");function forEachNodeAfterFilterAndSort(beans,callback){var _a238;(_a238=_getClientSideRowModel(beans))==null||_a238.forEachNodeAfterFilterAndSort(callback)}__name(forEachNodeAfterFilterAndSort,"forEachNodeAfterFilterAndSort");function resetRowHeights(beans){var _a238,_b2;if((_a238=beans.rowAutoHeight)!=null&&_a238.active){_warn(3);return}(_b2=_getClientSideRowModel(beans))==null||_b2.resetRowHeights()}__name(resetRowHeights,"resetRowHeights");function applyTransaction(beans,rowDataTransaction){return beans.frameworkOverrides.wrapIncoming(()=>{var _a238;return(_a238=_getClientSideRowModel(beans))==null?void 0:_a238.updateRowData(rowDataTransaction)})}__name(applyTransaction,"applyTransaction");function applyTransactionAsync(beans,rowDataTransaction,callback){beans.frameworkOverrides.wrapIncoming(()=>{var _a238;return(_a238=_getClientSideRowModel(beans))==null?void 0:_a238.batchUpdateRowData(rowDataTransaction,callback)})}__name(applyTransactionAsync,"applyTransactionAsync");function flushAsyncTransactions(beans){beans.frameworkOverrides.wrapIncoming(()=>{var _a238;return(_a238=_getClientSideRowModel(beans))==null?void 0:_a238.flushAsyncTransactions()})}__name(flushAsyncTransactions,"flushAsyncTransactions");function getBestCostNodeSelection(beans){var _a238;return(_a238=beans.selectionSvc)==null?void 0:_a238.getBestCostNodeSelection()}__name(getBestCostNodeSelection,"getBestCostNodeSelection");var ClientSideRowModelModule={moduleName:"ClientSideRowModel",version:VERSION,rowModels:["clientSide"],beans:[ClientSideNodeManager,ClientSideRowModel,SortStage],dependsOn:[SortModule]},ClientSideRowModelApiModule={moduleName:"ClientSideRowModelApi",version:VERSION,apiFunctions:{onGroupExpandedOrCollapsed,refreshClientSideRowModel,isRowDataEmpty,forEachLeafNode,forEachNodeAfterFilter,forEachNodeAfterFilterAndSort,resetRowHeights,applyTransaction,applyTransactionAsync,flushAsyncTransactions,getBestCostNodeSelection},dependsOn:[CsrmSsrmSharedApiModule]},_a208,GridSerializer=(_a208=class extends BeanStub{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(beans){this.visibleCols=beans.visibleCols,this.colModel=beans.colModel,this.rowModel=beans.rowModel,this.pinnedRowModel=beans.pinnedRowModel}serialize(gridSerializingSession,params={}){const{allColumns,columnKeys,skipRowGroups,exportRowNumbers}=params,columnsToExport=this.getColumnsToExport({allColumns,skipRowGroups,columnKeys,exportRowNumbers});return[this.prepareSession(columnsToExport),this.prependContent(params),this.exportColumnGroups(params,columnsToExport),this.exportHeaders(params,columnsToExport),this.processPinnedTopRows(params,columnsToExport),this.processRows(params,columnsToExport),this.processPinnedBottomRows(params,columnsToExport),this.appendContent(params)].reduce((composed,f)=>f(composed),gridSerializingSession).parse()}processRow(gridSerializingSession,params,columnsToExport,node){var _a238;const rowSkipper=params.shouldRowBeSkipped||(()=>!1),isExplicitExportSelection=params.rowPositions!=null||!!params.onlySelected,hideOpenParents=this.gos.get("groupHideOpenParents")&&!isExplicitExportSelection,isLeafNode=this.colModel.isPivotMode()?node.leafGroup:!node.group,isFooter=!!node.footer,shouldSkipCurrentGroup=node.allChildrenCount===1&&((_a238=node.childrenAfterGroup)==null?void 0:_a238.length)===1&&_canSkipShowingRowGroup(this.gos,node);if(!isLeafNode&&!isFooter&&(params.skipRowGroups||shouldSkipCurrentGroup||hideOpenParents)||params.onlySelected&&!node.isSelected()||params.skipPinnedTop&&node.rowPinned==="top"||params.skipPinnedBottom&&node.rowPinned==="bottom"||node.level===-1&&!isLeafNode&&!isFooter||rowSkipper(_addGridCommonParams(this.gos,{node})))return;const rowAccumulator=gridSerializingSession.onNewBodyRow(node);if(columnsToExport.forEach((column,index)=>{rowAccumulator.onColumn(column,index,node)}),params.getCustomContentBelowRow){const content=params.getCustomContentBelowRow(_addGridCommonParams(this.gos,{node}));content&&gridSerializingSession.addCustomContent(content)}}appendContent(params){return gridSerializingSession=>{const appendContent=params.appendContent;return appendContent&&gridSerializingSession.addCustomContent(appendContent),gridSerializingSession}}prependContent(params){return gridSerializingSession=>{const prependContent=params.prependContent;return prependContent&&gridSerializingSession.addCustomContent(prependContent),gridSerializingSession}}prepareSession(columnsToExport){return gridSerializingSession=>(gridSerializingSession.prepare(columnsToExport),gridSerializingSession)}exportColumnGroups(params,columnsToExport){return gridSerializingSession=>{if(!params.skipColumnGroupHeaders){const idCreator=new GroupInstanceIdCreator,{colGroupSvc}=this.beans,displayedGroups=colGroupSvc?colGroupSvc.createColumnGroups({columns:columnsToExport,idCreator,pinned:null,isStandaloneStructure:!0}):columnsToExport;this.recursivelyAddHeaderGroups(displayedGroups,gridSerializingSession,params.processGroupHeaderCallback)}return gridSerializingSession}}exportHeaders(params,columnsToExport){return gridSerializingSession=>{if(!params.skipColumnHeaders){const gridRowIterator=gridSerializingSession.onNewHeaderRow();columnsToExport.forEach((column,index)=>{gridRowIterator.onColumn(column,index,void 0)})}return gridSerializingSession}}processPinnedTopRows(params,columnsToExport){return gridSerializingSession=>{var _a238;const processRow=this.processRow.bind(this,gridSerializingSession,params,columnsToExport);return params.rowPositions?params.rowPositions.filter(position=>position.rowPinned==="top").sort((a,b)=>a.rowIndex-b.rowIndex).map(position=>{var _a239;return(_a239=this.pinnedRowModel)==null?void 0:_a239.getPinnedTopRow(position.rowIndex)}).forEach(processRow):(_a238=this.pinnedRowModel)==null||_a238.forEachPinnedRow("top",processRow),gridSerializingSession}}processRows(params,columnsToExport){return gridSerializingSession=>{var _a238;const rowModel=this.rowModel,usingCsrm=_isClientSideRowModel(this.gos),usingSsrm=_isServerSideRowModel(this.gos),onlySelectedNonStandardModel=!usingCsrm&&params.onlySelected,processRow=this.processRow.bind(this,gridSerializingSession,params,columnsToExport),{exportedRows="filteredAndSorted"}=params;if(params.rowPositions)return params.rowPositions.filter(position=>position.rowPinned==null).sort((a,b)=>a.rowIndex-b.rowIndex).map(position=>rowModel.getRow(position.rowIndex)).forEach(processRow),gridSerializingSession;if(this.colModel.isPivotMode())return usingCsrm?rowModel.forEachPivotNode(processRow,!0,exportedRows==="filteredAndSorted"):usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow,!0):rowModel.forEachNode(processRow),gridSerializingSession;if(params.onlySelectedAllPages||onlySelectedNonStandardModel){const selectedNodes=((_a238=this.beans.selectionSvc)==null?void 0:_a238.getSelectedNodes())??[];this.replicateSortedOrder(selectedNodes),selectedNodes.forEach(processRow)}else exportedRows==="all"?rowModel.forEachNode(processRow):usingCsrm||usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow,!0):rowModel.forEachNode(processRow);return gridSerializingSession}}replicateSortedOrder(rows){const{sortSvc,rowNodeSorter}=this.beans;if(!sortSvc||!rowNodeSorter)return;const sortOptions=sortSvc.getSortOptions(),compareNodes=__name((rowA,rowB)=>{var _a238,_b2;return rowA.rowIndex!=null&&rowB.rowIndex!=null?rowA.rowIndex-rowB.rowIndex:rowA.level===rowB.level?((_a238=rowA.parent)==null?void 0:_a238.id)===((_b2=rowB.parent)==null?void 0:_b2.id)?rowNodeSorter.compareRowNodes(sortOptions,{rowNode:rowA,currentPos:rowA.rowIndex??-1},{rowNode:rowB,currentPos:rowB.rowIndex??-1}):compareNodes(rowA.parent,rowB.parent):rowA.level>rowB.level?compareNodes(rowA.parent,rowB):compareNodes(rowA,rowB.parent)},"compareNodes");rows.sort(compareNodes)}processPinnedBottomRows(params,columnsToExport){return gridSerializingSession=>{var _a238;const processRow=this.processRow.bind(this,gridSerializingSession,params,columnsToExport);return params.rowPositions?params.rowPositions.filter(position=>position.rowPinned==="bottom").sort((a,b)=>a.rowIndex-b.rowIndex).map(position=>{var _a239;return(_a239=this.pinnedRowModel)==null?void 0:_a239.getPinnedBottomRow(position.rowIndex)}).forEach(processRow):(_a238=this.pinnedRowModel)==null||_a238.forEachPinnedRow("bottom",processRow),gridSerializingSession}}getColumnsToExport(params){const{allColumns=!1,skipRowGroups=!1,exportRowNumbers=!1,columnKeys}=params,{colModel,gos,visibleCols}=this,isPivotMode=colModel.isPivotMode(),filterSpecialColumns=__name(col=>isColumnSelectionCol(col)?!1:!isRowNumberCol(col)||exportRowNumbers,"filterSpecialColumns");if(columnKeys&&columnKeys.length)return colModel.getColsForKeys(columnKeys).filter(filterSpecialColumns);const isTreeData=gos.get("treeData");let columnsToExport=[];return allColumns&&!isPivotMode?columnsToExport=colModel.getCols():columnsToExport=visibleCols.allCols,columnsToExport=columnsToExport.filter(column=>filterSpecialColumns(column)&&(skipRowGroups&&!isTreeData?!isColumnGroupAutoCol(column):!0)),columnsToExport}recursivelyAddHeaderGroups(displayedGroups,gridSerializingSession,processGroupHeaderCallback){const directChildrenHeaderGroups=[];displayedGroups.forEach(columnGroupChild=>{const columnGroup=columnGroupChild;columnGroup.getChildren&&columnGroup.getChildren().forEach(it=>directChildrenHeaderGroups.push(it))}),displayedGroups.length>0&&isColumnGroup2(displayedGroups[0])&&this.doAddHeaderHeader(gridSerializingSession,displayedGroups,processGroupHeaderCallback),directChildrenHeaderGroups&&directChildrenHeaderGroups.length>0&&this.recursivelyAddHeaderGroups(directChildrenHeaderGroups,gridSerializingSession,processGroupHeaderCallback)}doAddHeaderHeader(gridSerializingSession,displayedGroups,processGroupHeaderCallback){const gridRowIterator=gridSerializingSession.onNewHeaderGroupingRow();let columnIndex=0;displayedGroups.forEach(columnGroupChild=>{const columnGroup=columnGroupChild;let name;processGroupHeaderCallback?name=processGroupHeaderCallback(_addGridCommonParams(this.gos,{columnGroup})):name=this.beans.colNames.getDisplayNameForColumnGroup(columnGroup,"header");const collapsibleGroupRanges=columnGroup.getLeafColumns().reduce((collapsibleGroups,currentColumn,currentIdx,arr)=>{let lastGroup=_last(collapsibleGroups);return currentColumn.getColumnGroupShow()==="open"?(!lastGroup||lastGroup[1]!=null)&&(lastGroup=[currentIdx],collapsibleGroups.push(lastGroup)):lastGroup&&lastGroup[1]==null&&(lastGroup[1]=currentIdx-1),currentIdx===arr.length-1&&lastGroup&&lastGroup[1]==null&&(lastGroup[1]=currentIdx),collapsibleGroups},[]);gridRowIterator.onColumn(columnGroup,name||"",columnIndex++,columnGroup.getLeafColumns().length-1,collapsibleGroupRanges)})}},__name(_a208,"GridSerializer"),_a208),SharedExportModule={moduleName:"SharedExport",version:VERSION,beans:[GridSerializer]},LINE_SEPARATOR=`\r
`,_a209,CsvSerializingSession=(_a209=class extends BaseGridSerializingSession{constructor(config){super(config),this.isFirstLine=!0,this.result="";const{suppressQuotes,columnSeparator}=config;this.suppressQuotes=suppressQuotes,this.columnSeparator=columnSeparator}addCustomContent(content){content&&(typeof content=="string"?(/^\s*\n/.test(content)||this.beginNewLine(),content=content.replace(/\r?\n/g,LINE_SEPARATOR),this.result+=content):content.forEach(row=>{this.beginNewLine(),row.forEach((cell,index)=>{index!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(cell.data.value||""),cell.mergeAcross&&this.appendEmptyCells(cell.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(columnGroup,header,index,span){index!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(header),this.appendEmptyCells(span)}appendEmptyCells(count){for(let i=1;i<=count;i++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(column,index){index!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(column))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(column,index,node){index!=0&&(this.result+=this.columnSeparator);const rowCellValue=this.extractRowCellValue(column,index,index,"csv",node);this.result+=this.putInQuotes(rowCellValue.valueFormatted??rowCellValue.value)}putInQuotes(value){if(this.suppressQuotes)return value;if(value==null)return'""';let stringValue;return typeof value=="string"?stringValue=value:typeof value.toString=="function"?stringValue=value.toString():(_warn(53),stringValue=""),'"'+stringValue.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=LINE_SEPARATOR),this.isFirstLine=!1}},__name(_a209,"CsvSerializingSession"),_a209),_a210,CsvCreator=(_a210=class extends BaseCreator{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(beans){this.colModel=beans.colModel,this.colNames=beans.colNames,this.rowGroupColsSvc=beans.rowGroupColsSvc,this.valueSvc=beans.valueSvc}getMergedParams(params){const baseParams4=this.gos.get("defaultCsvExportParams");return Object.assign({},baseParams4,params)}export(userParams){if(this.isExportSuppressed()){_warn(51);return}const mergedParams=this.getMergedParams(userParams),data=this.getData(mergedParams),packagedFile=new Blob(["\uFEFF",data],{type:"text/plain"}),fileName=typeof mergedParams.fileName=="function"?mergedParams.fileName(_addGridCommonParams(this.gos,{})):mergedParams.fileName;_downloadFile(this.getFileName(fileName),packagedFile)}exportDataAsCsv(params){this.export(params)}getDataAsCsv(params,skipDefaultParams=!1){const mergedParams=skipDefaultParams?Object.assign({},params):this.getMergedParams(params);return this.getData(mergedParams)}getDefaultFileExtension(){return"csv"}createSerializingSession(params){const{colModel,colNames,rowGroupColsSvc,valueSvc,gos}=this,{processCellCallback,processHeaderCallback,processGroupHeaderCallback,processRowGroupCallback,suppressQuotes,columnSeparator}=params;return new CsvSerializingSession({colModel,colNames,valueSvc,gos,processCellCallback:processCellCallback||void 0,processHeaderCallback:processHeaderCallback||void 0,processGroupHeaderCallback:processGroupHeaderCallback||void 0,processRowGroupCallback:processRowGroupCallback||void 0,suppressQuotes:suppressQuotes||!1,columnSeparator:columnSeparator||",",rowGroupColsSvc})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}},__name(_a210,"CsvCreator"),_a210);function getDataAsCsv(beans,params){var _a238;return(_a238=beans.csvCreator)==null?void 0:_a238.getDataAsCsv(params)}__name(getDataAsCsv,"getDataAsCsv");function exportDataAsCsv(beans,params){var _a238;(_a238=beans.csvCreator)==null||_a238.exportDataAsCsv(params)}__name(exportDataAsCsv,"exportDataAsCsv");var CsvExportModule={moduleName:"CsvExport",version:VERSION,beans:[CsvCreator],apiFunctions:{getDataAsCsv,exportDataAsCsv},dependsOn:[SharedExportModule]},_a211,InfiniteBlock=(_a211=class extends BeanStub{constructor(id,parentCache,params){super(),this.id=id,this.parentCache=parentCache,this.params=params,this.state="needsLoading",this.version=0,this.startRow=id*params.blockSize,this.endRow=this.startRow+params.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(version){this.isRequestMostRecentAndLive(version)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(version,rows,lastRow){this.successCommon(version,{rowData:rows,rowCount:lastRow})}isRequestMostRecentAndLive(version){const thisIsMostRecentRequest=version===this.version,weAreNotDestroyed=this.isAlive();return thisIsMostRecentRequest&&weAreNotDestroyed}successCommon(version,params){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(version)&&(this.state="loaded",this.processServerResult(params))}postConstruct(){this.rowNodes=[];const{params:{blockSize,rowHeight},startRow,beans,rowNodes}=this;for(let i=0;i<blockSize;i++){const rowIndex=startRow+i,rowNode=new RowNode(beans);rowNode.setRowHeight(rowHeight),rowNode.uiLevel=0,rowNode.setRowIndex(rowIndex),rowNode.setRowTop(rowHeight*rowIndex),rowNodes.push(rowNode)}}getBlockStateJson(){const{id,startRow,endRow,state:pageStatus}=this;return{id:""+id,state:{blockNumber:id,startRow,endRow,pageStatus}}}setDataAndId(rowNode,data,index){_exists(data)?rowNode.setDataAndId(data,index.toString()):rowNode.setDataAndId(void 0,void 0)}loadFromDatasource(){const params=this.createLoadParams();if(_missing(this.params.datasource.getRows)){_warn(90);return}window.setTimeout(()=>{this.params.datasource.getRows(params)},0)}createLoadParams(){const{startRow,endRow,version,params:{sortModel,filterModel},gos}=this;return{startRow,endRow,successCallback:this.pageLoaded.bind(this,version),failCallback:this.pageLoadFailed.bind(this,version),sortModel,filterModel,context:_addGridCommonParams(gos,{}).context}}forEachNode(callback,sequence,rowCount){this.rowNodes.forEach((rowNode,index)=>{this.startRow+index<rowCount&&callback(rowNode,sequence.value++)})}getRow(rowIndex,dontTouchLastAccessed=!1){dontTouchLastAccessed||(this.lastAccessed=this.params.lastAccessedSequence.value++);const localIndex=rowIndex-this.startRow;return this.rowNodes[localIndex]}processServerResult(params){const{rowNodes,beans}=this;rowNodes.forEach((rowNode,index)=>{const data=params.rowData?params.rowData[index]:void 0;!rowNode.id&&rowNode.alreadyRendered&&data&&(rowNodes[index]=new RowNode(beans),rowNodes[index].setRowIndex(rowNode.rowIndex),rowNodes[index].setRowTop(rowNode.rowTop),rowNodes[index].setRowHeight(rowNode.rowHeight),rowNode.clearRowTopAndRowIndex()),this.setDataAndId(rowNodes[index],data,this.startRow+index)});const finalRowCount=params.rowCount!=null&&params.rowCount>=0?params.rowCount:void 0;this.parentCache.pageLoaded(this,finalRowCount)}destroy(){this.rowNodes.forEach(rowNode=>{rowNode.clearRowTopAndRowIndex()}),super.destroy()}},__name(_a211,"InfiniteBlock"),_a211),MAX_EMPTY_BLOCKS_TO_KEEP=2,_a212,InfiniteCache=(_a212=class extends BeanStub{constructor(params){super(),this.params=params,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=params.initialRowCount}getRow(rowIndex,dontCreatePage=!1){const blockId=Math.floor(rowIndex/this.params.blockSize);let block=this.blocks[blockId];if(!block){if(dontCreatePage)return;block=this.createBlock(blockId)}return block.getRow(rowIndex)}createBlock(blockNumber){const params=this.params,newBlock=this.createBean(new InfiniteBlock(blockNumber,this,params));return this.blocks[newBlock.id]=newBlock,this.blockCount++,this.purgeBlocksIfNeeded(newBlock),params.rowNodeBlockLoader.addBlock(newBlock),newBlock}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(block=>block.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(block=>this.destroyBlock(block)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(block,lastRow){this.isAlive()&&(_logIfDebug(this.gos,`InfiniteCache - onPageLoaded: page = ${block.id}, lastRow = ${lastRow}`),this.checkRowCount(block,lastRow),this.onCacheUpdated())}purgeBlocksIfNeeded(blockToExclude){const blocksForPurging=this.getBlocksInOrder().filter(b=>b!=blockToExclude),lastAccessedComparator=__name((a,b)=>b.lastAccessed-a.lastAccessed,"lastAccessedComparator");blocksForPurging.sort(lastAccessedComparator);const maxBlocksProvided=this.params.maxBlocksInCache>0,blocksToKeep=maxBlocksProvided?this.params.maxBlocksInCache-1:null,emptyBlocksToKeep=MAX_EMPTY_BLOCKS_TO_KEEP-1;blocksForPurging.forEach((block,index)=>{const purgeBecauseBlockEmpty=block.state==="needsLoading"&&index>=emptyBlocksToKeep,purgeBecauseCacheFull=maxBlocksProvided?index>=blocksToKeep:!1;if(purgeBecauseBlockEmpty||purgeBecauseCacheFull){if(this.isBlockCurrentlyDisplayed(block)||this.isBlockFocused(block))return;this.removeBlockFromCache(block)}})}isBlockFocused(block){const focusedCell=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!focusedCell||focusedCell.rowPinned!=null)return!1;const{startRow,endRow}=block;return focusedCell.rowIndex>=startRow&&focusedCell.rowIndex<endRow}isBlockCurrentlyDisplayed(block){const{startRow,endRow}=block;return this.beans.rowRenderer.isRangeInRenderedViewport(startRow,endRow-1)}removeBlockFromCache(blockToRemove){blockToRemove&&this.destroyBlock(blockToRemove)}checkRowCount(block,lastRow){if(typeof lastRow=="number"&&lastRow>=0)this.rowCount=lastRow,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize,overflowSize}=this.params,lastRowIndexPlusOverflow=(block.id+1)*blockSize+overflowSize;this.rowCount<lastRowIndexPlusOverflow&&(this.rowCount=lastRowIndexPlusOverflow)}}setRowCount(rowCount,lastRowIndexKnown){this.rowCount=rowCount,_exists(lastRowIndexKnown)&&(this.lastRowIndexKnown=lastRowIndexKnown),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(callback){const sequence={value:0};this.getBlocksInOrder().forEach(block=>block.forEachNode(callback,sequence,this.rowCount))}getBlocksInOrder(){const blockComparator=__name((a,b)=>a.id-b.id,"blockComparator");return Object.values(this.blocks).sort(blockComparator)}destroyBlock(block){delete this.blocks[block.id],this.destroyBean(block),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(block)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const blocksToDestroy=[];this.getBlocksInOrder().forEach(block=>{block.id*this.params.blockSize>=this.rowCount&&blocksToDestroy.push(block)}),blocksToDestroy.length>0&&blocksToDestroy.forEach(block=>this.destroyBlock(block))}purgeCache(){this.getBlocksInOrder().forEach(block=>this.removeBlockFromCache(block)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(firstInRange,lastInRange){const result=[];let lastBlockId=-1,inActiveRange=!1;const numberSequence={value:0};let foundGapInSelection=!1;return this.getBlocksInOrder().forEach(block=>{if(!foundGapInSelection){if(inActiveRange&&lastBlockId+1!==block.id){foundGapInSelection=!0;return}lastBlockId=block.id,block.forEachNode(rowNode=>{const hitFirstOrLast=rowNode===firstInRange||rowNode===lastInRange;(inActiveRange||hitFirstOrLast)&&result.push(rowNode),hitFirstOrLast&&(inActiveRange=!inActiveRange)},numberSequence,this.rowCount)}}),foundGapInSelection||inActiveRange?[]:result}},__name(_a212,"InfiniteCache"),_a212),_a213,InfiniteRowModel=(_a213=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowModel"}getRowBounds(index){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*index}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=_getRowHeightAsNumber(this.beans),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=_getRowHeightAsNumber(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){var _a238;let resetRequired;this.cacheParams?resetRequired=!_jsonEquals(this.cacheParams.sortModel,((_a238=this.beans.sortSvc)==null?void 0:_a238.getSortModel())??[]):resetRequired=!0,resetRequired&&this.reset()}getType(){return"infinite"}setDatasource(datasource){this.destroyDatasource(),this.datasource=datasource,datasource&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(firstInRange,lastInRange){var _a238;return((_a238=this.infiniteCache)==null?void 0:_a238.getRowNodesInRange(firstInRange,lastInRange))??[]}reset(){var _a238;if(!this.datasource)return;_getRowIdCallback(this.gos)!=null||(_a238=this.beans.selectionSvc)==null||_a238.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const beans=this.beans,{filterManager,sortSvc,rowNodeBlockLoader,eventSvc,gos}=beans;this.cacheParams={datasource:this.datasource,filterModel:(filterManager==null?void 0:filterManager.getFilterModel())??{},sortModel:(sortSvc==null?void 0:sortSvc.getSortModel())??[],rowNodeBlockLoader,initialRowCount:gos.get("infiniteInitialRowCount"),maxBlocksInCache:gos.get("maxBlocksInCache"),rowHeight:_getRowHeightAsNumber(beans),overflowSize:gos.get("cacheOverflowSize"),blockSize:gos.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new InfiniteCache(this.cacheParams)),eventSvc.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(node=>{node.setRowHeight(this.rowHeight),node.setRowTop(this.rowHeight*node.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(rowIndex){const infiniteCache=this.infiniteCache;if(infiniteCache&&!(rowIndex>=infiniteCache.getRowCount()))return infiniteCache.getRow(rowIndex)}getRowNode(id){let result;return this.forEachNode(rowNode=>{rowNode.id===id&&(result=rowNode)}),result}forEachNode(callback){var _a238;(_a238=this.infiniteCache)==null||_a238.forEachNodeDeep(callback)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(topLevelIndex){return topLevelIndex}getRowIndexAtPixel(pixel){if(this.rowHeight!==0){const rowIndexForPixel=Math.floor(pixel/this.rowHeight),lastRowIndex=this.getRowCount()-1;return rowIndexForPixel>lastRowIndex?lastRowIndex:rowIndexForPixel}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(rowNode){return!!this.getRowNode(rowNode.id)}refreshCache(){var _a238;(_a238=this.infiniteCache)==null||_a238.refreshCache()}purgeCache(){var _a238;(_a238=this.infiniteCache)==null||_a238.purgeCache()}isLastRowIndexKnown(){var _a238;return((_a238=this.infiniteCache)==null?void 0:_a238.isLastRowIndexKnown())??!1}setRowCount(rowCount,lastRowIndexKnown){var _a238;(_a238=this.infiniteCache)==null||_a238.setRowCount(rowCount,lastRowIndexKnown)}},__name(_a213,"InfiniteRowModel"),_a213);function refreshInfiniteCache(beans){var _a238;(_a238=_getInfiniteRowModel(beans))==null||_a238.refreshCache()}__name(refreshInfiniteCache,"refreshInfiniteCache");function purgeInfiniteCache(beans){var _a238;(_a238=_getInfiniteRowModel(beans))==null||_a238.purgeCache()}__name(purgeInfiniteCache,"purgeInfiniteCache");function getInfiniteRowCount(beans){var _a238;return(_a238=_getInfiniteRowModel(beans))==null?void 0:_a238.getRowCount()}__name(getInfiniteRowCount,"getInfiniteRowCount");var _a214,RowNodeBlockLoader=(_a214=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=_getMaxConcurrentDatasourceRequests(this.gos);const blockLoadDebounceMillis=this.gos.get("blockLoadDebounceMillis");blockLoadDebounceMillis&&blockLoadDebounceMillis>0&&(this.checkBlockToLoadDebounce=_debounce(this,this.performCheckBlocksToLoad.bind(this),blockLoadDebounceMillis))}addBlock(block){this.blocks.push(block),block.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(block){_removeFromArray(this.blocks,block)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){_logIfDebug(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const loadAvailability=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,blocksToLoad=this.blocks.filter(block=>block.state==="needsLoading").slice(0,loadAvailability);this.activeBlockLoadsCount+=blocksToLoad.length,blocksToLoad.forEach(block=>block.load()),this.printCacheStatus()}getBlockState(){const result={};return this.blocks.forEach(block=>{const{id,state}=block.getBlockStateJson();result[id]=state}),result}printCacheStatus(){_logIfDebug(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},__name(_a214,"RowNodeBlockLoader"),_a214),InfiniteRowModelCoreModule={moduleName:"InfiniteRowModelCore",version:VERSION,rowModels:["infinite"],beans:[InfiniteRowModel,RowNodeBlockLoader]},InfiniteRowModelModule={moduleName:"InfiniteRowModel",version:VERSION,apiFunctions:{refreshInfiniteCache,purgeInfiniteCache,getInfiniteRowCount},dependsOn:[InfiniteRowModelCoreModule,SsrmInfiniteSharedApiModule]},ARROW_UP="",ARROW_DOWN="",AnimateShowChangeCellRendererElement={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},_a215,AnimateShowChangeCellRenderer=(_a215=class extends Component{constructor(){super(AnimateShowChangeCellRendererElement),this.eValue=RefPlaceholder,this.eDelta=RefPlaceholder,this.refreshCount=0}init(params){this.refresh(params,!0)}showDelta(params,delta){const absDelta=Math.abs(delta),valueFormatted=params.formatValue(absDelta),valueToUse=_exists(valueFormatted)?valueFormatted:absDelta,deltaUp=delta>=0,eDelta=this.eDelta;deltaUp?eDelta.textContent=ARROW_UP+valueToUse:eDelta.textContent=ARROW_DOWN+valueToUse,eDelta.classList.toggle("ag-value-change-delta-up",deltaUp),eDelta.classList.toggle("ag-value-change-delta-down",!deltaUp)}setTimerToRemoveDelta(){this.refreshCount++;const refreshCountCopy=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{refreshCountCopy===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),_clearElement(this.eDelta)}refresh(params,isInitialRender=!1){var _a238;const{value,valueFormatted}=params,{eValue,lastValue,beans}=this;if(value===lastValue||(_exists(valueFormatted)?eValue.textContent=valueFormatted:_exists(value)?eValue.textContent=value:_clearElement(eValue),(_a238=beans.filterManager)!=null&&_a238.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof value=="number"&&typeof lastValue=="number"){const delta=value-lastValue;this.showDelta(params,delta)}return lastValue&&eValue.classList.add("ag-value-change-value-highlight"),isInitialRender||this.setTimerToRemoveDelta(),this.lastValue=value,!0}},__name(_a215,"AnimateShowChangeCellRenderer"),_a215),animateSlideCellRendererCSS=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",AnimateSlideCellRendererElement={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},_a216,AnimateSlideCellRenderer=(_a216=class extends Component{constructor(){super(AnimateSlideCellRendererElement),this.eCurrent=RefPlaceholder,this.refreshCount=0,this.registerCSS(animateSlideCellRendererCSS)}init(params){this.refresh(params,!0)}addSlideAnimation(){this.refreshCount++;const refreshCountCopy=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const{beans,eCurrent}=this,prevElement=_createElement({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=prevElement,prevElement.textContent=eCurrent.textContent,this.getGui().insertBefore(prevElement,eCurrent),beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{refreshCountCopy===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{refreshCountCopy===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(params,isInitialRender=!1){var _a238;let value=params.value;if(_missing(value)&&(value=""),value===this.lastValue||(_a238=this.beans.filterManager)!=null&&_a238.isSuppressFlashingCellsBecauseFiltering())return!1;isInitialRender||this.addSlideAnimation(),this.lastValue=value;const eCurrent=this.eCurrent;return _exists(params.valueFormatted)?eCurrent.textContent=params.valueFormatted:_exists(params.value)?eCurrent.textContent=value:_clearElement(eCurrent),!0}},__name(_a216,"AnimateSlideCellRenderer"),_a216),_a217,CellFlashService=(_a217=class extends BeanStub{constructor(){super(...arguments),this.beanName="cellFlashSvc"}onFlashCells(cellCtrl,event){if(!cellCtrl.comp)return;const cellId=_createCellId(cellCtrl.cellPosition);event.cells[cellId]&&this.animateCell(cellCtrl,"highlight")}flashCell(cellCtrl,delays){this.animateCell(cellCtrl,"data-changed",delays==null?void 0:delays.flashDuration,delays==null?void 0:delays.fadeDuration)}animateCell(cellCtrl,cssName,flashDuration,fadeDuration){const cellComp=cellCtrl.comp;if(!cellComp)return;const{gos}=this;if(flashDuration||(flashDuration=gos.get("cellFlashDuration")),flashDuration===0)return;_exists(fadeDuration)||(fadeDuration=gos.get("cellFadeDuration"));const fullName=`ag-cell-${cssName}`,animationFullName=`ag-cell-${cssName}-animation`;cellComp.addOrRemoveCssClass(fullName,!0),cellComp.addOrRemoveCssClass(animationFullName,!1);const eCell=cellCtrl.eGui;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{cellCtrl.isAlive()&&(cellComp.addOrRemoveCssClass(fullName,!1),cellComp.addOrRemoveCssClass(animationFullName,!0),eCell.style.transition=`background-color ${fadeDuration}ms`,window.setTimeout(()=>{cellCtrl.isAlive()&&(cellComp.addOrRemoveCssClass(animationFullName,!1),eCell.style.transition="")},fadeDuration))},flashDuration)})}},__name(_a217,"CellFlashService"),_a217);function flashCells(beans,params={}){const{cellFlashSvc}=beans;cellFlashSvc&&beans.frameworkOverrides.wrapIncoming(()=>{beans.rowRenderer.getCellCtrls(params.rowNodes,params.columns).forEach(cellCtrl=>cellFlashSvc.flashCell(cellCtrl,params))})}__name(flashCells,"flashCells");var HighlightChangesModule={moduleName:"HighlightChanges",version:VERSION,beans:[CellFlashService],userComponents:{agAnimateShowChangeCellRenderer:AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:AnimateSlideCellRenderer},apiFunctions:{flashCells}};function getState(beans){var _a238;return((_a238=beans.stateSvc)==null?void 0:_a238.getState())??{}}__name(getState,"getState");function migrateGridStateModel(state){switch(state={...state},state.version||(state.version="32.1.0"),state.version){case"32.1.0":state=migrateV32_1(state)}return state}__name(migrateGridStateModel,"migrateGridStateModel");function migrateV32_1(state){return state.cellSelection=jsonGet(state,"rangeSelection"),state}__name(migrateV32_1,"migrateV32_1");function jsonGet(json,key){if(json&&typeof json=="object")return json[key]}__name(jsonGet,"jsonGet");var _a218,StateService=(_a218=class extends BeanStub{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=_debounce(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=_debounce(this,()=>{this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())},0),this.onRowSelectedDebounced=_debounce(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){this.isClientSideRowModel=_isClientSideRowModel(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",VERSION);const suppressEventsAndDispatchInitEvent=this.suppressEventsAndDispatchInitEvent.bind(this);this.beans.ctrlsSvc.whenReady(this,()=>suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const[newColumnsLoadedDestroyFunc,rowCountReadyDestroyFunc,firstDataRenderedDestroyFunc]=this.addManagedEventListeners({newColumnsLoaded:__name(({source})=>{source==="gridInitializing"&&(newColumnsLoadedDestroyFunc(),suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},"newColumnsLoaded"),rowCountReady:__name(()=>{rowCountReadyDestroyFunc==null||rowCountReadyDestroyFunc(),suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},"rowCountReady"),firstDataRendered:__name(()=>{firstDataRenderedDestroyFunc==null||firstDataRenderedDestroyFunc(),suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())},"firstDataRendered")})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getInitialState(){return migrateGridStateModel(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){const stateUpdater=__name(()=>this.updateCachedState("sideBar",this.getSideBarState()),"stateUpdater");stateUpdater(),this.addManagedEventListeners({toolPanelVisibleChanged:stateUpdater,sideBarUpdated:stateUpdater})}setupStateOnColumnsInitialised(){const initialState=this.getInitialState();this.setColumnState(initialState),this.setColumnGroupState(initialState),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const onUpdate=__name(state=>()=>this.updateColumnState([state]),"onUpdate");this.addManagedEventListeners({columnValueChanged:onUpdate("aggregation"),columnMoved:onUpdate("columnOrder"),columnPinned:onUpdate("columnPinning"),columnResized:onUpdate("columnSizing"),columnVisible:onUpdate("columnVisibility"),columnPivotChanged:onUpdate("pivot"),columnPivotModeChanged:onUpdate("pivot"),columnRowGroupChanged:onUpdate("rowGroup"),sortChanged:onUpdate("sort"),newColumnsLoaded:__name(()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),"newColumnsLoaded"),columnGroupOpened:__name(()=>this.updateCachedState("columnGroup",this.getColumnGroupState()),"columnGroupOpened")})}setupStateOnRowCountReady(){const{filter:filterState,rowGroupExpansion:rowGroupExpansionState,rowSelection:rowSelectionState,pagination:paginationState}=this.getInitialState();filterState&&this.setFilterState(filterState),rowGroupExpansionState&&this.setRowGroupExpansionState(rowGroupExpansionState),rowSelectionState&&this.setRowSelectionState(rowSelectionState),paginationState&&this.setPaginationState(paginationState);const updateCachedState=this.updateCachedState.bind(this);updateCachedState("filter",this.getFilterState()),updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),updateCachedState("rowSelection",this.getRowSelectionState()),updateCachedState("pagination",this.getPaginationState());const updateRowGroupExpansionState=__name(()=>{this.updateRowGroupExpansionStateTimer=0,updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())},"updateRowGroupExpansionState");this.addManagedEventListeners({filterChanged:__name(()=>updateCachedState("filter",this.getFilterState()),"filterChanged"),rowGroupOpened:__name(()=>this.onRowGroupOpenedDebounced(),"rowGroupOpened"),expandOrCollapseAll:updateRowGroupExpansionState,columnRowGroupChanged:updateRowGroupExpansionState,rowDataUpdated:__name(()=>{this.gos.get("groupDefaultExpanded")!==0&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(updateRowGroupExpansionState)))},"rowDataUpdated"),selectionChanged:__name(()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},"selectionChanged"),paginationChanged:__name(event=>{(event.newPage||event.newPageSize)&&updateCachedState("pagination",this.getPaginationState())},"paginationChanged")})}setupStateOnFirstDataRendered(){const{scroll:scrollState,cellSelection:cellSelectionState,focusedCell:focusedCellState,columnOrder:columnOrderState}=this.getInitialState();focusedCellState&&this.setFocusedCellState(focusedCellState),cellSelectionState&&this.setCellSelectionState(cellSelectionState),scrollState&&this.setScrollState(scrollState),this.setColumnPivotState(!!(columnOrderState!=null&&columnOrderState.orderedColIds));const updateCachedState=this.updateCachedState.bind(this);updateCachedState("sideBar",this.getSideBarState()),updateCachedState("focusedCell",this.getFocusedCellState());const cellSelection=this.getRangeSelectionState();updateCachedState("rangeSelection",cellSelection),updateCachedState("cellSelection",cellSelection),updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:__name(()=>updateCachedState("focusedCell",this.getFocusedCellState()),"cellFocused"),cellSelectionChanged:__name(event=>{if(event.finished){const cellSelection2=this.getRangeSelectionState();updateCachedState("rangeSelection",cellSelection2),updateCachedState("cellSelection",cellSelection2)}},"cellSelectionChanged"),bodyScrollEnd:__name(()=>updateCachedState("scroll",this.getScrollState()),"bodyScrollEnd")})}getColumnState(){const beans=this.beans,pivotMode=beans.colModel.isPivotMode(),sortColumns=[],groupColIds=[],aggregationColumns=[],pivotColIds=[],leftColIds=[],rightColIds=[],hiddenColIds=[],columnSizes=[],columns=[];let defaultSortIndex=0;const columnState=_getColumnState(beans);for(let i=0;i<columnState.length;i++){const{colId,sort,sortIndex,rowGroup,rowGroupIndex,aggFunc,pivot,pivotIndex,pinned,hide,width,flex}=columnState[i];columns.push(colId),sort&&(sortColumns[sortIndex??defaultSortIndex++]={colId,sort}),rowGroup&&(groupColIds[rowGroupIndex??0]=colId),typeof aggFunc=="string"&&aggregationColumns.push({colId,aggFunc}),pivot&&(pivotColIds[pivotIndex??0]=colId),pinned&&(pinned==="right"?rightColIds:leftColIds).push(colId),hide&&hiddenColIds.push(colId),(flex!=null||width)&&columnSizes.push({colId,flex:flex??void 0,width})}return{sort:sortColumns.length?{sortModel:sortColumns}:void 0,rowGroup:groupColIds.length?{groupColIds}:void 0,aggregation:aggregationColumns.length?{aggregationModel:aggregationColumns}:void 0,pivot:pivotColIds.length||pivotMode?{pivotMode,pivotColIds}:void 0,columnPinning:leftColIds.length||rightColIds.length?{leftColIds,rightColIds}:void 0,columnVisibility:hiddenColIds.length?{hiddenColIds}:void 0,columnSizing:columnSizes.length?{columnSizingModel:columnSizes}:void 0,columnOrder:columns.length?{orderedColIds:columns}:void 0}}setColumnState(initialState){const{sort:sortState,rowGroup:groupState,aggregation:aggregationState,pivot:pivotState,columnPinning:columnPinningState,columnVisibility:columnVisibilityState,columnSizing:columnSizingState,columnOrder:columnOrderState,partialColumnState}=initialState,columnStateMap={},getColumnState2=__name(colId=>{let columnState=columnStateMap[colId];return columnState||(columnState={colId},columnStateMap[colId]=columnState,columnState)},"getColumnState2"),defaultState=partialColumnState?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};sortState&&(sortState.sortModel.forEach(({colId,sort},sortIndex)=>{const columnState=getColumnState2(colId);columnState.sort=sort,columnState.sortIndex=sortIndex}),defaultState.sort=null,defaultState.sortIndex=null),groupState&&(groupState.groupColIds.forEach((colId,rowGroupIndex)=>{const columnState=getColumnState2(colId);columnState.rowGroup=!0,columnState.rowGroupIndex=rowGroupIndex}),defaultState.rowGroup=null,defaultState.rowGroupIndex=null),aggregationState&&(aggregationState.aggregationModel.forEach(({colId,aggFunc})=>{getColumnState2(colId).aggFunc=aggFunc}),defaultState.aggFunc=null),pivotState&&(pivotState.pivotColIds.forEach((colId,pivotIndex)=>{const columnState=getColumnState2(colId);columnState.pivot=!0,columnState.pivotIndex=pivotIndex}),this.gos.updateGridOptions({options:{pivotMode:pivotState.pivotMode},source:"gridInitializing"}),defaultState.pivot=null,defaultState.pivotIndex=null),columnPinningState&&(columnPinningState.leftColIds.forEach(colId=>{getColumnState2(colId).pinned="left"}),columnPinningState.rightColIds.forEach(colId=>{getColumnState2(colId).pinned="right"}),defaultState.pinned=null),columnVisibilityState&&(columnVisibilityState.hiddenColIds.forEach(colId=>{getColumnState2(colId).hide=!0}),defaultState.hide=null),columnSizingState&&(columnSizingState.columnSizingModel.forEach(({colId,flex,width})=>{const columnState=getColumnState2(colId);columnState.flex=flex??null,columnState.width=width}),defaultState.flex=null);const columns=columnOrderState==null?void 0:columnOrderState.orderedColIds,applyOrder=!!(columns!=null&&columns.length),columnStates=applyOrder?columns.map(colId=>getColumnState2(colId)):Object.values(columnStateMap);columnStates.length&&(this.columnStates=columnStates,_applyColumnState(this.beans,{state:columnStates,applyOrder,defaultState},"gridInitializing"))}setColumnPivotState(applyOrder){const columnStates=this.columnStates;this.columnStates=void 0;const columnGroupStates=this.columnGroupStates;this.columnGroupStates=void 0;const beans=this.beans,{pivotResultCols,colGroupSvc}=beans;if(pivotResultCols!=null&&pivotResultCols.isPivotResultColsPresent()){if(columnStates){const secondaryColumnStates=[];for(const columnState of columnStates)pivotResultCols.getPivotResultCol(columnState.colId)&&secondaryColumnStates.push(columnState);_applyColumnState(beans,{state:secondaryColumnStates,applyOrder},"gridInitializing")}columnGroupStates&&(colGroupSvc==null||colGroupSvc.setColumnGroupState(columnGroupStates,"gridInitializing"))}}getColumnGroupState(){const colGroupSvc=this.beans.colGroupSvc;if(!colGroupSvc)return;const columnGroupState=colGroupSvc.getColumnGroupState(),openColumnGroups=[];return columnGroupState.forEach(({groupId,open})=>{open&&openColumnGroups.push(groupId)}),openColumnGroups.length?{openColumnGroupIds:openColumnGroups}:void 0}setColumnGroupState(initialState){var _a238;const colGroupSvc=this.beans.colGroupSvc;if(!Object.prototype.hasOwnProperty.call(initialState,"columnGroup")||!colGroupSvc)return;const openColumnGroups=new Set((_a238=initialState.columnGroup)==null?void 0:_a238.openColumnGroupIds),stateItems=colGroupSvc.getColumnGroupState().map(({groupId})=>{const open=openColumnGroups.has(groupId);return open&&openColumnGroups.delete(groupId),{groupId,open}});openColumnGroups.forEach(groupId=>{stateItems.push({groupId,open:!0})}),stateItems.length&&(this.columnGroupStates=stateItems),colGroupSvc.setColumnGroupState(stateItems,"gridInitializing")}getFilterState(){const filterManager=this.beans.filterManager;let filterModel=filterManager==null?void 0:filterManager.getFilterModel();filterModel&&Object.keys(filterModel).length===0&&(filterModel=void 0);const advancedFilterModel=(filterManager==null?void 0:filterManager.getAdvFilterModel())??void 0;return filterModel||advancedFilterModel?{filterModel,advancedFilterModel}:void 0}setFilterState(filterState){const filterManager=this.beans.filterManager,{filterModel,advancedFilterModel}=filterState??{};filterModel&&(filterManager==null||filterManager.setFilterModel(filterModel,"columnFilter")),advancedFilterModel&&(filterManager==null||filterManager.setAdvFilterModel(advancedFilterModel,"advancedFilter"))}getRangeSelectionState(){var _a238;const cellRanges=(_a238=this.beans.rangeSvc)==null?void 0:_a238.getCellRanges().map(cellRange=>{const{id,type,startRow,endRow,columns,startColumn}=cellRange;return{id,type,startRow,endRow,colIds:columns.map(column=>column.getColId()),startColId:startColumn.getColId()}});return cellRanges!=null&&cellRanges.length?{cellRanges}:void 0}setCellSelectionState(cellSelectionState){const{gos,rangeSvc,colModel,visibleCols}=this.beans;if(!_isCellSelectionEnabled(gos)||!rangeSvc)return;const cellRanges=[];cellSelectionState.cellRanges.forEach(cellRange=>{const columns=[];if(cellRange.colIds.forEach(colId=>{const column=colModel.getCol(colId);column&&columns.push(column)}),!columns.length)return;let startColumn=colModel.getCol(cellRange.startColId);if(!startColumn){const allColumns=visibleCols.allCols,columnSet=new Set(columns);startColumn=allColumns.find(column=>columnSet.has(column))}cellRanges.push({...cellRange,columns,startColumn})}),rangeSvc.setCellRanges(cellRanges)}getScrollState(){if(!this.isClientSideRowModel)return;const scrollFeature=this.beans.ctrlsSvc.getScrollFeature(),{left}=(scrollFeature==null?void 0:scrollFeature.getHScrollPosition())??{left:0},{top}=(scrollFeature==null?void 0:scrollFeature.getVScrollPosition())??{top:0};return top||left?{top,left}:void 0}setScrollState(scrollState){if(!this.isClientSideRowModel)return;const{top,left}=scrollState,{frameworkOverrides,rowRenderer,animationFrameSvc,ctrlsSvc}=this.beans;frameworkOverrides.wrapIncoming(()=>{var _a238;ctrlsSvc.get("center").setCenterViewportScrollLeft(left),(_a238=ctrlsSvc.getScrollFeature())==null||_a238.setVerticalScrollPosition(top),rowRenderer.redraw({afterScroll:!0}),animationFrameSvc==null||animationFrameSvc.flushAllFrames()})}getSideBarState(){var _a238,_b2;return(_b2=(_a238=this.beans.sideBar)==null?void 0:_a238.comp)==null?void 0:_b2.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const focusedCell=this.beans.focusSvc.getFocusedCell();if(focusedCell){const{column,rowIndex,rowPinned}=focusedCell;return{colId:column.getColId(),rowIndex,rowPinned}}}setFocusedCellState(focusedCellState){if(!this.isClientSideRowModel)return;const{colId,rowIndex,rowPinned}=focusedCellState,{focusSvc,colModel}=this.beans;focusSvc.setFocusedCell({column:colModel.getCol(colId),rowIndex,rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination,gos}=this.beans;if(!pagination)return;const page=pagination.getCurrentPage(),pageSize=gos.get("paginationAutoPageSize")?void 0:pagination.getPageSize();if(!(!page&&!pageSize))return{page,pageSize}}setPaginationState(paginationState){const{pagination,gos}=this.beans;pagination&&(paginationState.pageSize&&!gos.get("paginationAutoPageSize")&&pagination.setPageSize(paginationState.pageSize,"initialState"),typeof paginationState.page=="number"&&pagination.setPage(paginationState.page))}getRowSelectionState(){var _a238;const selectionSvc=this.beans.selectionSvc;if(!selectionSvc)return;const selectionState=selectionSvc.getSelectionState();return!selectionState||!Array.isArray(selectionState)&&(selectionState.selectAll===!1||selectionState.selectAllChildren===!1)&&!((_a238=selectionState==null?void 0:selectionState.toggledNodes)!=null&&_a238.length)?void 0:selectionState}setRowSelectionState(rowSelectionState){var _a238;(_a238=this.beans.selectionSvc)==null||_a238.setSelectionState(rowSelectionState,"gridInitializing")}getRowGroupExpansionState(){const{expansionSvc,rowModel}=this.beans;if(!expansionSvc)return;const expandedRowGroups=[];return rowModel.forEachNode(({expanded,id})=>{expanded&&id&&expandedRowGroups.push(id)}),expandedRowGroups.length?{expandedRowGroupIds:expandedRowGroups}:void 0}setRowGroupExpansionState(rowGroupExpansionState){var _a238;(_a238=this.beans.expansionSvc)==null||_a238.expandRows(rowGroupExpansionState.expandedRowGroupIds)}updateColumnState(features){const newColumnState=this.getColumnState();let hasChanged=!1;const cachedState=this.cachedState;for(const key of Object.keys(newColumnState)){const value=newColumnState[key];_jsonEquals(value,cachedState[key])||(hasChanged=!0)}this.cachedState={...cachedState,...newColumnState},hasChanged&&this.dispatchStateUpdateEvent(features)}updateCachedState(key,value){const existingValue=this.cachedState[key];this.setCachedStateValue(key,value),_jsonEquals(value,existingValue)||this.dispatchStateUpdateEvent([key])}setCachedStateValue(key,value){this.cachedState={...this.cachedState,[key]:value}}refreshStaleState(){const staleStateKeys=this.staleStateKeys;staleStateKeys.forEach(key=>{switch(key){case"rowSelection":this.setCachedStateValue(key,this.getRowSelectionState());break}}),staleStateKeys.clear()}dispatchStateUpdateEvent(sources){this.suppressEvents||(sources.forEach(source=>this.queuedUpdateSources.add(source)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const queuedUpdateSources=this.queuedUpdateSources,sources=Array.from(queuedUpdateSources);queuedUpdateSources.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources,state:this.cachedState})}suppressEventsAndDispatchInitEvent(updateFunc){this.suppressEvents=!0;const colAnimation=this.beans.colAnimation;colAnimation==null||colAnimation.setSuppressAnimation(!0),updateFunc(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(colAnimation==null||colAnimation.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},__name(_a218,"StateService"),_a218),GridStateModule={moduleName:"GridState",version:VERSION,beans:[StateService],apiFunctions:{getState}};function paginationIsLastPageFound(beans){return beans.rowModel.isLastRowIndexKnown()}__name(paginationIsLastPageFound,"paginationIsLastPageFound");function paginationGetPageSize(beans){var _a238;return((_a238=beans.pagination)==null?void 0:_a238.getPageSize())??100}__name(paginationGetPageSize,"paginationGetPageSize");function paginationGetCurrentPage(beans){var _a238;return((_a238=beans.pagination)==null?void 0:_a238.getCurrentPage())??0}__name(paginationGetCurrentPage,"paginationGetCurrentPage");function paginationGetTotalPages(beans){var _a238;return((_a238=beans.pagination)==null?void 0:_a238.getTotalPages())??1}__name(paginationGetTotalPages,"paginationGetTotalPages");function paginationGetRowCount(beans){return beans.pagination?beans.pagination.getMasterRowCount():beans.rowModel.getRowCount()}__name(paginationGetRowCount,"paginationGetRowCount");function paginationGoToNextPage(beans){var _a238;(_a238=beans.pagination)==null||_a238.goToNextPage()}__name(paginationGoToNextPage,"paginationGoToNextPage");function paginationGoToPreviousPage(beans){var _a238;(_a238=beans.pagination)==null||_a238.goToPreviousPage()}__name(paginationGoToPreviousPage,"paginationGoToPreviousPage");function paginationGoToFirstPage(beans){var _a238;(_a238=beans.pagination)==null||_a238.goToFirstPage()}__name(paginationGoToFirstPage,"paginationGoToFirstPage");function paginationGoToLastPage(beans){var _a238;(_a238=beans.pagination)==null||_a238.goToLastPage()}__name(paginationGoToLastPage,"paginationGoToLastPage");function paginationGoToPage(beans,page){var _a238;(_a238=beans.pagination)==null||_a238.goToPage(page)}__name(paginationGoToPage,"paginationGoToPage");var _a219,PaginationAutoPageSizeService=(_a219=class extends BeanStub{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,p=>{this.centerRowsCtrl=p.center;const listener=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:listener,scrollVisibilityChanged:listener}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const bodyHeight=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(bodyHeight>0){const beans=this.beans,update=__name(()=>{const rowHeight=Math.max(_getRowHeightAsNumber(beans),1),newPageSize=Math.floor(bodyHeight/rowHeight);beans.pagination.setPageSize(newPageSize,"autoCalculated")},"update");this.isBodyRendered?_debounce(this,update,50)():(update(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},__name(_a219,"PaginationAutoPageSizeService"),_a219),paginationPageSizeSelector="paginationPageSizeSelector",PageSizeSelectorCompElement={tag:"span",cls:"ag-paging-page-size"},_a220,PageSizeSelectorComp=(_a220=class extends Component{constructor(){super(PageSizeSelectorCompElement),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const newValue=this.selectPageSizeComp.getValue();if(!newValue)return;const paginationPageSize=Number(newValue);isNaN(paginationPageSize)||paginationPageSize<1||paginationPageSize===this.pagination.getPageSize()||(this.pagination.setPageSize(paginationPageSize,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(beans){this.pagination=beans.pagination}postConstruct(){this.addManagedPropertyListener(paginationPageSizeSelector,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:__name(event=>this.handlePaginationChanged(event),"paginationChanged")})}handlePaginationChanged(paginationChangedEvent){if(!this.selectPageSizeComp||!(paginationChangedEvent!=null&&paginationChangedEvent.newPageSize))return;const paginationPageSize=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(paginationPageSize)?this.selectPageSizeComp.setValue(paginationPageSize.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(show){this.selectPageSizeComp&&!show&&this.reset(),show&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){_clearElement(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(paginationPageSizeSelector)!==!1}reloadPageSizesSelector(){const pageSizeOptions=this.getPageSizeSelectorValues(),paginationPageSizeOption=this.pagination.getPageSize(),shouldAddAndSelectEmptyOption=!paginationPageSizeOption||!pageSizeOptions.includes(paginationPageSizeOption);if(shouldAddAndSelectEmptyOption){const pageSizeSet=this.gos.exists("paginationPageSize"),pageSizesSet=this.gos.get(paginationPageSizeSelector)!==!0;_warn(94,{pageSizeSet,pageSizesSet,pageSizeOptions,paginationPageSizeOption}),pageSizesSet||_warn(95,{paginationPageSizeOption,paginationPageSizeSelector}),pageSizeOptions.unshift("")}const value=String(shouldAddAndSelectEmptyOption?"":paginationPageSizeOption);this.selectPageSizeComp?(_areEqual(this.pageSizeOptions,pageSizeOptions)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(pageSizeOptions)),this.pageSizeOptions=pageSizeOptions),this.selectPageSizeComp.setValue(value,!0)):this.createPageSizeSelectorComp(pageSizeOptions,value),this.hasEmptyOption=shouldAddAndSelectEmptyOption}createPageSizeSelectOptions(pageSizeOptions){return pageSizeOptions.map(value=>({value:String(value)}))}createPageSizeSelectorComp(pageSizeOptions,value){const localeTextFunc=this.getLocaleTextFunc(),localisedLabel=localeTextFunc("pageSizeSelectorLabel","Page Size:"),localisedAriaLabel=localeTextFunc("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new AgSelect).addOptions(this.createPageSizeSelectOptions(pageSizeOptions)).setValue(value).setAriaLabel(localisedAriaLabel).setLabel(localisedLabel).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const defaultValues=[20,50,100],paginationPageSizeSelectorValues=this.gos.get(paginationPageSizeSelector);return!Array.isArray(paginationPageSizeSelectorValues)||!(paginationPageSizeSelectorValues!=null&&paginationPageSizeSelectorValues.length)?defaultValues:[...paginationPageSizeSelectorValues].sort((a,b)=>a-b)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},__name(_a220,"PageSizeSelectorComp"),_a220),PageSizeSelectorSelector={selector:"AG-PAGE-SIZE-SELECTOR",component:PageSizeSelectorComp},paginationCompCSS=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:max(var(--ag-row-height),22px);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",_a221,PaginationComp=(_a221=class extends TabGuardComp{constructor(){super(),this.btFirst=RefPlaceholder,this.btPrevious=RefPlaceholder,this.btNext=RefPlaceholder,this.btLast=RefPlaceholder,this.lbRecordCount=RefPlaceholder,this.lbFirstRowOnPage=RefPlaceholder,this.lbLastRowOnPage=RefPlaceholder,this.lbCurrent=RefPlaceholder,this.lbTotal=RefPlaceholder,this.pageSizeComp=RefPlaceholder,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(paginationCompCSS)}wireBeans(beans){this.rowModel=beans.rowModel,this.pagination=beans.pagination,this.ariaAnnounce=beans.ariaAnnounce}postConstruct(){const isRtl=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[PageSizeSelectorSelector]);const{btFirst,btPrevious,btNext,btLast}=this;this.activateTabIndex([btFirst,btPrevious,btNext,btLast]),btFirst.insertAdjacentElement("afterbegin",_createIconNoSpan(isRtl?"last":"first",this.beans)),btPrevious.insertAdjacentElement("afterbegin",_createIconNoSpan(isRtl?"next":"previous",this.beans)),btNext.insertAdjacentElement("afterbegin",_createIconNoSpan(isRtl?"previous":"next",this.beans)),btLast.insertAdjacentElement("afterbegin",_createIconNoSpan(isRtl?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:__name(()=>{},"onTabKeyDown"),focusInnerElement:__name(fromBottom=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(fromBottom):_focusGridInnerElement(this.beans,fromBottom),"focusInnerElement"),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(allowFocus){this.allowFocusInnerElement=allowFocus}onPaginationChanged(){const paginationPanelEnabled=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(paginationPanelEnabled),paginationPanelEnabled&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(item=>{const{el,fn}=item;this.addManagedListeners(el,{click:fn,keydown:__name(e=>{(e.key===KeyCode.ENTER||e.key===KeyCode.SPACE)&&(e.preventDefault(),fn())},"keydown")})}),_addFocusableContainerListener(this.beans,this,this.getGui()),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(value){const userFunc=this.gos.getCallback("paginationNumberFormatter");return userFunc?userFunc({value}):_formatNumberCommas(value,this.getLocaleTextFunc.bind(this))}getTemplate(){const localeTextFunc=this.getLocaleTextFunc(),idPrefix=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${idPrefix}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${idPrefix}-first-row`}},{tag:"span",attrs:{id:`${idPrefix}-to`},children:localeTextFunc("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${idPrefix}-last-row`}},{tag:"span",attrs:{id:`${idPrefix}-of`},children:localeTextFunc("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${idPrefix}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":localeTextFunc("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":localeTextFunc("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${idPrefix}-start-page`},children:localeTextFunc("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${idPrefix}-start-page-number`}},{tag:"span",attrs:{id:`${idPrefix}-of-page`},children:localeTextFunc("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${idPrefix}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":localeTextFunc("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":localeTextFunc("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const currentPage=this.pagination.getCurrentPage(),maxRowFound=this.rowModel.isLastRowIndexKnown(),totalPages=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=currentPage===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const zeroPagesToDisplay=this.isZeroPagesToDisplay(),onLastPage=currentPage===totalPages-1;this.nextButtonDisabled=onLastPage||zeroPagesToDisplay,this.lastButtonDisabled=!maxRowFound||zeroPagesToDisplay||currentPage===totalPages-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(button,disabled){_setAriaDisabled(button,disabled),button.classList.toggle("ag-disabled",disabled)}isZeroPagesToDisplay(){const maxRowFound=this.rowModel.isLastRowIndexKnown(),totalPages=this.pagination.getTotalPages();return maxRowFound&&totalPages===0}updateLabels(){const lastPageFound=this.rowModel.isLastRowIndexKnown(),totalPages=this.pagination.getTotalPages(),masterRowCount=this.pagination.getMasterRowCount(),rowCount=lastPageFound?masterRowCount:null,currentPage=this.pagination.getCurrentPage(),pageSize=this.pagination.getPageSize();let startRow,endRow;this.isZeroPagesToDisplay()?startRow=endRow=0:(startRow=pageSize*currentPage+1,endRow=startRow+pageSize-1,lastPageFound&&endRow>rowCount&&(endRow=rowCount));const theoreticalEndRow=startRow+pageSize-1,isLoadingPageSize=!lastPageFound&&masterRowCount<theoreticalEndRow,lbFirstRowOnPage=this.formatNumber(startRow);this.lbFirstRowOnPage.textContent=lbFirstRowOnPage;let lbLastRowOnPage;const localeTextFunc=this.getLocaleTextFunc();isLoadingPageSize?lbLastRowOnPage=localeTextFunc("pageLastRowUnknown","?"):lbLastRowOnPage=this.formatNumber(endRow),this.lbLastRowOnPage.textContent=lbLastRowOnPage;const toDisplay=totalPages>0?currentPage+1:0,lbCurrent=this.formatNumber(toDisplay);this.lbCurrent.textContent=lbCurrent;let lbTotal,lbRecordCount;if(lastPageFound)lbTotal=this.formatNumber(totalPages),lbRecordCount=this.formatNumber(rowCount);else{const moreText=localeTextFunc("more","more");lbTotal=moreText,lbRecordCount=moreText}this.lbTotal.textContent=lbTotal,this.lbRecordCount.textContent=lbRecordCount,this.announceAriaStatus(lbFirstRowOnPage,lbLastRowOnPage,lbRecordCount,lbCurrent,lbTotal)}announceAriaStatus(lbFirstRowOnPage,lbLastRowOnPage,lbRecordCount,lbCurrent,lbTotal){var _a238,_b2;const localeTextFunc=this.getLocaleTextFunc(),strPage=localeTextFunc("page","Page"),strTo=localeTextFunc("to","to"),strOf=localeTextFunc("of","of"),ariaRowStatus=`${lbFirstRowOnPage} ${strTo} ${lbLastRowOnPage} ${strOf} ${lbRecordCount}`,ariaPageStatus=`${strPage} ${lbCurrent} ${strOf} ${lbTotal}`;ariaRowStatus!==this.ariaRowStatus&&(this.ariaRowStatus=ariaRowStatus,(_a238=this.ariaAnnounce)==null||_a238.announceValue(ariaRowStatus,"paginationRow")),ariaPageStatus!==this.ariaPageStatus&&(this.ariaPageStatus=ariaPageStatus,(_b2=this.ariaAnnounce)==null||_b2.announceValue(ariaPageStatus,"paginationPage"))}setTotalLabelsToZero(){const strZero=this.formatNumber(0);this.lbFirstRowOnPage.textContent=strZero,this.lbCurrent.textContent=strZero,this.lbLastRowOnPage.textContent=strZero,this.lbTotal.textContent=strZero,this.lbRecordCount.textContent=strZero,this.announceAriaStatus(strZero,strZero,strZero,strZero,strZero)}},__name(_a221,"PaginationComp"),_a221),PaginationSelector={selector:"AG-PAGINATION",component:PaginationComp},_a222,PaginationService=(_a222=class extends BeanStub{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const gos=this.gos;this.active=gos.get("pagination"),this.pageSizeFromGridOptions=gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return PaginationSelector}isPaginateChildRows(){const gos=this.gos;return gos.get("groupHideParentOfSingleChild")||gos.get("groupRemoveSingleChildren")||gos.get("groupRemoveLowestSingleChildren")?!0:gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(page){const currentPage=this.currentPage;!this.active||currentPage===page||typeof currentPage!="number"||(this.currentPage=page,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}goToPageWithIndex(index){var _a238,_b2;if(!this.active)return;let adjustedIndex=index;this.paginateChildRows||(adjustedIndex=((_b2=(_a238=this.beans.rowModel).getTopLevelIndexFromDisplayedIndex)==null?void 0:_b2.call(_a238,index))??index),this.goToPage(Math.floor(adjustedIndex/this.pageSize))}isRowInPage(rowIndex){return this.active?rowIndex>=this.topDisplayedRowIndex&&rowIndex<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const rowCount=this.beans.rowModel.getRowCount(),lastPage=Math.floor(rowCount/this.pageSize);this.goToPage(lastPage)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(page){this.currentPage=page}get pageSize(){return _exists(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:_exists(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:_exists(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:_exists(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const oldPageSize=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==oldPageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(size,source){const currentSize=this.pageSize;switch(source){case"autoCalculated":this.pageSizeAutoCalculated=size;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=size,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=size;break;case"gridOptions":this.pageSizeFromGridOptions=size,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}currentSize!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const totalPages=this.totalPages;this.currentPage>=totalPages&&(this.currentPage=totalPages-1);const currentPage=this.currentPage;(!isFinite(currentPage)||isNaN(currentPage)||currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const rowModel=this.beans.rowModel,masterRowCount=rowModel.getTopLevelRowCount();if(this.masterRowCount=masterRowCount,masterRowCount<=0){this.setZeroRows();return}const pageSize=this.pageSize,masterLastRowIndex=masterRowCount-1;this.totalPages=Math.floor(masterLastRowIndex/pageSize)+1,this.adjustCurrentPageIfInvalid();const currentPage=this.currentPage,masterPageStartIndex=pageSize*currentPage;let masterPageEndIndex=pageSize*(currentPage+1)-1;if(masterPageEndIndex>masterLastRowIndex&&(masterPageEndIndex=masterLastRowIndex),this.topDisplayedRowIndex=rowModel.getTopLevelRowDisplayedIndex(masterPageStartIndex),masterPageEndIndex===masterLastRowIndex)this.bottomDisplayedRowIndex=rowModel.getRowCount()-1;else{const firstIndexNotToShow=rowModel.getTopLevelRowDisplayedIndex(masterPageEndIndex+1);this.bottomDisplayedRowIndex=firstIndexNotToShow-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const masterRowCount=this.beans.rowModel.getRowCount();if(this.masterRowCount=masterRowCount,masterRowCount===0){this.setZeroRows();return}const{pageSize,currentPage}=this,maxRowIndex=masterRowCount-1;this.totalPages=Math.floor(maxRowIndex/pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=pageSize*currentPage,this.bottomDisplayedRowIndex=pageSize*(currentPage+1)-1,this.bottomDisplayedRowIndex>maxRowIndex&&(this.bottomDisplayedRowIndex=maxRowIndex)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(params){const{keepRenderedRows=!1,newPage=!1,newPageSize=!1}=params;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage,newPageSize,keepRenderedRows})}},__name(_a222,"PaginationService"),_a222),PaginationModule={moduleName:"Pagination",version:VERSION,beans:[PaginationService,PaginationAutoPageSizeService],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound,paginationGetPageSize,paginationGetCurrentPage,paginationGetTotalPages,paginationGetRowCount,paginationGoToNextPage,paginationGoToPreviousPage,paginationGoToFirstPage,paginationGoToLastPage,paginationGoToPage},dependsOn:[PopupModule]};function redrawRows(beans,params={}){const rowNodes=params?params.rowNodes:void 0;beans.frameworkOverrides.wrapIncoming(()=>beans.rowRenderer.redrawRows(rowNodes))}__name(redrawRows,"redrawRows");function setRowNodeExpanded(beans,rowNode,expanded,expandParents,forceSync){rowNode&&(expandParents&&rowNode.parent&&rowNode.parent.level!==-1&&setRowNodeExpanded(beans,rowNode.parent,expanded,expandParents,forceSync),rowNode.setExpanded(expanded,void 0,forceSync))}__name(setRowNodeExpanded,"setRowNodeExpanded");function getRowNode(beans,id){return beans.rowModel.getRowNode(id)}__name(getRowNode,"getRowNode");function addRenderedRowListener(beans,eventName,rowIndex,callback){beans.rowRenderer.addRenderedRowListener(eventName,rowIndex,callback)}__name(addRenderedRowListener,"addRenderedRowListener");function getRenderedNodes(beans){return beans.rowRenderer.getRenderedNodes()}__name(getRenderedNodes,"getRenderedNodes");function forEachNode(beans,callback,includeFooterNodes){beans.rowModel.forEachNode(callback,includeFooterNodes)}__name(forEachNode,"forEachNode");function getFirstDisplayedRowIndex(beans){return beans.rowRenderer.firstRenderedRow}__name(getFirstDisplayedRowIndex,"getFirstDisplayedRowIndex");function getLastDisplayedRowIndex(beans){return beans.rowRenderer.lastRenderedRow}__name(getLastDisplayedRowIndex,"getLastDisplayedRowIndex");function getDisplayedRowAtIndex(beans,index){return beans.rowModel.getRow(index)}__name(getDisplayedRowAtIndex,"getDisplayedRowAtIndex");function getDisplayedRowCount(beans){return beans.rowModel.getRowCount()}__name(getDisplayedRowCount,"getDisplayedRowCount");var RowApiModule={moduleName:"RowApi",version:VERSION,apiFunctions:{redrawRows,setRowNodeExpanded,getRowNode,addRenderedRowListener,getRenderedNodes,forEachNode,getFirstDisplayedRowIndex,getLastDisplayedRowIndex,getDisplayedRowAtIndex,getDisplayedRowCount}},ScrollApiModule={moduleName:"ScrollApi",version:VERSION,apiFunctions:{getVerticalPixelRange,getHorizontalPixelRange,ensureColumnVisible,ensureIndexVisible,ensureNodeVisible}};function setGridAriaProperty(beans,property,value){if(!property)return;const eGrid=beans.ctrlsSvc.getGridBodyCtrl().eGridBody,ariaProperty=`aria-${property}`;value===null?eGrid.removeAttribute(ariaProperty):eGrid.setAttribute(ariaProperty,value)}__name(setGridAriaProperty,"setGridAriaProperty");function refreshCells(beans,params={}){beans.frameworkOverrides.wrapIncoming(()=>beans.rowRenderer.refreshCells(params))}__name(refreshCells,"refreshCells");function refreshHeader(beans){beans.frameworkOverrides.wrapIncoming(()=>beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(c=>c.refresh()))}__name(refreshHeader,"refreshHeader");function isAnimationFrameQueueEmpty(beans){var _a238;return((_a238=beans.animationFrameSvc)==null?void 0:_a238.isQueueEmpty())??!0}__name(isAnimationFrameQueueEmpty,"isAnimationFrameQueueEmpty");function flushAllAnimationFrames(beans){var _a238;(_a238=beans.animationFrameSvc)==null||_a238.flushAllFrames()}__name(flushAllAnimationFrames,"flushAllAnimationFrames");function getSizesForCurrentTheme(beans){return{rowHeight:_getRowHeightAsNumber(beans),headerHeight:getHeaderHeight(beans)}}__name(getSizesForCurrentTheme,"getSizesForCurrentTheme");function getCellRendererInstances(beans,params={}){var _a238;const cellRenderers=[];if(beans.rowRenderer.getCellCtrls(params.rowNodes,params.columns).forEach(cellCtrl=>{const cellRenderer=cellCtrl.getCellRenderer();cellRenderer!=null&&cellRenderers.push(_unwrapUserComp(cellRenderer))}),(_a238=params.columns)!=null&&_a238.length)return cellRenderers;const fullWidthRenderers=[],rowIdMap=mapRowNodes(params.rowNodes);return beans.rowRenderer.getAllRowCtrls().forEach(rowCtrl=>{if(rowIdMap&&!isRowInMap(rowCtrl.rowNode,rowIdMap)||!rowCtrl.isFullWidth())return;const renderers=rowCtrl.getFullWidthCellRenderers();for(let i=0;i<renderers.length;i++){const renderer=renderers[i];renderer!=null&&fullWidthRenderers.push(_unwrapUserComp(renderer))}}),[...fullWidthRenderers,...cellRenderers]}__name(getCellRendererInstances,"getCellRendererInstances");var RenderApiModule={moduleName:"RenderApi",version:VERSION,apiFunctions:{setGridAriaProperty,refreshCells,refreshHeader,isAnimationFrameQueueEmpty,flushAllAnimationFrames,getSizesForCurrentTheme,getCellRendererInstances}};function sizeColumnsToFit(beans,paramsOrGridWidth){var _a238,_b2;typeof paramsOrGridWidth=="number"?(_a238=beans.colAutosize)==null||_a238.sizeColumnsToFit(paramsOrGridWidth,"api"):(_b2=beans.colAutosize)==null||_b2.sizeColumnsToFitGridBody(paramsOrGridWidth)}__name(sizeColumnsToFit,"sizeColumnsToFit");function autoSizeColumns(beans,keys,skipHeader){var _a238;(_a238=beans.colAutosize)==null||_a238.autoSizeCols({colKeys:keys,skipHeader,source:"api"})}__name(autoSizeColumns,"autoSizeColumns");function autoSizeAllColumns(beans,skipHeader){var _a238;(_a238=beans.colAutosize)==null||_a238.autoSizeAllColumns("api",skipHeader)}__name(autoSizeAllColumns,"autoSizeAllColumns");var _a223,ColumnAutosizeService=(_a223=class extends BeanStub{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){this.addManagedEventListeners({firstDataRendered:__name(()=>this.onFirstDataRendered(),"firstDataRendered")})}autoSizeCols(params){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeCols(params));return}const{colKeys,skipHeader,skipHeaderGroups,stopAtGroup,source="api"}=params,{animationFrameSvc,renderStatus,colModel,autoWidthCalc,visibleCols}=this.beans;if(animationFrameSvc==null||animationFrameSvc.flushAllFrames(),this.timesDelayed<5&&renderStatus&&!renderStatus.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.autoSizeCols(params)});return}this.timesDelayed=0;const columnsAutoSized=[];let changesThisTimeAround=-1;const shouldSkipHeader=skipHeader??this.gos.get("skipHeaderOnAutoSize"),shouldSkipHeaderGroups=skipHeaderGroups??shouldSkipHeader;for(;changesThisTimeAround!==0;){changesThisTimeAround=0;const updatedColumns=[];colKeys.forEach(key=>{if(!key)return;const column=colModel.getCol(key);if(!column||isRowNumberCol(column)||columnsAutoSized.indexOf(column)>=0)return;const preferredWidth=autoWidthCalc.getPreferredWidthForColumn(column,shouldSkipHeader);if(preferredWidth>0){const newWidth=normaliseColumnWidth(column,preferredWidth);column.setActualWidth(newWidth,source),columnsAutoSized.push(column),changesThisTimeAround++}updatedColumns.push(column)}),updatedColumns.length&&visibleCols.refresh(source)}shouldSkipHeaderGroups||this.autoSizeColumnGroupsByColumns(colKeys,source,stopAtGroup),dispatchColumnResizedEvent(this.eventSvc,columnsAutoSized,!0,"autosizeColumns")}autoSizeColumn(key,source,skipHeader){key&&this.autoSizeCols({colKeys:[key],skipHeader,skipHeaderGroups:!0,source})}autoSizeColumnGroupsByColumns(keys,source,stopAtGroup){const{colModel,ctrlsSvc}=this.beans,columnGroups=new Set;colModel.getColsForKeys(keys).forEach(col=>{let parent=col.getParent();for(;parent&&parent!=stopAtGroup;)parent.isPadding()||columnGroups.add(parent),parent=parent.getParent()});let headerGroupCtrl;const resizedColumns=[];for(const columnGroup of columnGroups){for(const headerContainerCtrl of ctrlsSvc.getHeaderRowContainerCtrls())if(headerGroupCtrl=headerContainerCtrl.getHeaderCtrlForColumn(columnGroup),headerGroupCtrl)break;headerGroupCtrl&&headerGroupCtrl.resizeLeafColumnsToFit(source)}return resizedColumns}autoSizeAllColumns(source,skipHeader){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(source,skipHeader));return}const allDisplayedColumns=this.beans.visibleCols.allCols;this.autoSizeCols({colKeys:allDisplayedColumns,skipHeader,source})}addColumnAutosize(element,column){const skipHeaderOnAutoSize=this.gos.get("skipHeaderOnAutoSize"),autoSizeColListener=__name(()=>{this.autoSizeColumn(column,"uiColumnResized",skipHeaderOnAutoSize)},"autoSizeColListener");element.addEventListener("dblclick",autoSizeColListener);const touchListener=new TouchListener(element);return touchListener.addEventListener("doubleTap",autoSizeColListener),()=>{element.removeEventListener("dblclick",autoSizeColListener),touchListener.removeEventListener("doubleTap",autoSizeColListener),touchListener.destroy()}}addColumnGroupResize(element,columnGroup,callback){const skipHeaderOnAutoSize=this.gos.get("skipHeaderOnAutoSize"),listener=__name(()=>{const keys=[];columnGroup.getDisplayedLeafColumns().forEach(column=>{column.getColDef().suppressAutoSize||keys.push(column.getColId())}),keys.length>0&&this.autoSizeCols({colKeys:keys,skipHeader:skipHeaderOnAutoSize,stopAtGroup:columnGroup,source:"uiColumnResized"}),callback()},"listener");return element.addEventListener("dblclick",listener),()=>element.removeEventListener("dblclick",listener)}sizeColumnsToFitGridBody(params,nextTimeout){if(!this.isAlive())return;const{ctrlsSvc,scrollVisibleSvc}=this.beans,gridBodyCtrl=ctrlsSvc.getGridBodyCtrl(),scrollWidthToRemove=gridBodyCtrl.isVerticalScrollShowing()?scrollVisibleSvc.getScrollbarWidth():0,availableWidth=_getInnerWidth(gridBodyCtrl.eGridBody)-scrollWidthToRemove;if(availableWidth>0){this.sizeColumnsToFit(availableWidth,"sizeColumnsToFit",!1,params);return}nextTimeout===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(params,100)},0):nextTimeout===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(params,500)},100):nextTimeout===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(params,-1)},500):_warn(29)}sizeColumnsToFit(gridWidth,source="sizeColumnsToFit",silent,params){var _a238;if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(gridWidth,source,silent,params));return}const limitsMap={};params&&((_a238=params==null?void 0:params.columnLimits)==null||_a238.forEach(({key,...dimensions})=>{limitsMap[typeof key=="string"?key:key.getColId()]=dimensions}));const allDisplayedColumns=this.beans.visibleCols.allCols;if(gridWidth<=0||!allDisplayedColumns.length||gridWidth===getWidthOfColsInList(allDisplayedColumns)&&allDisplayedColumns.every(column=>{if(column.colDef.suppressSizeToFit)return!0;const widthOverride=limitsMap==null?void 0:limitsMap[column.getId()],minWidth=(widthOverride==null?void 0:widthOverride.minWidth)??(params==null?void 0:params.defaultMinWidth),maxWidth=(widthOverride==null?void 0:widthOverride.maxWidth)??(params==null?void 0:params.defaultMaxWidth),colWidth=column.getActualWidth();return(minWidth==null||colWidth>=minWidth)&&(maxWidth==null||colWidth<=maxWidth)}))return;const colsToSpread=[],colsToNotSpread=[];allDisplayedColumns.forEach(column=>{column.getColDef().suppressSizeToFit===!0?colsToNotSpread.push(column):colsToSpread.push(column)});const colsToDispatchEventFor=colsToSpread.slice(0);let finishedResizing=!1;const moveToNotSpread=__name(column=>{_removeFromArray(colsToSpread,column),colsToNotSpread.push(column)},"moveToNotSpread");for(colsToSpread.forEach(column=>{column.resetActualWidth(source);const widthOverride=limitsMap==null?void 0:limitsMap[column.getId()],minOverride=(widthOverride==null?void 0:widthOverride.minWidth)??(params==null?void 0:params.defaultMinWidth),maxOverride=(widthOverride==null?void 0:widthOverride.maxWidth)??(params==null?void 0:params.defaultMaxWidth),colWidth=column.getActualWidth();typeof minOverride=="number"&&colWidth<minOverride?column.setActualWidth(minOverride,source,!0):typeof maxOverride=="number"&&colWidth>maxOverride&&column.setActualWidth(maxOverride,source,!0)});!finishedResizing;){finishedResizing=!0;const availablePixels=gridWidth-getWidthOfColsInList(colsToNotSpread);if(availablePixels<=0)colsToSpread.forEach(column=>{var _a239;const widthOverride=((_a239=limitsMap==null?void 0:limitsMap[column.getId()])==null?void 0:_a239.minWidth)??(params==null?void 0:params.defaultMinWidth);if(typeof widthOverride=="number"){column.setActualWidth(widthOverride,source,!0);return}column.setActualWidth(column.minWidth,source)});else{const scale=availablePixels/getWidthOfColsInList(colsToSpread);let pixelsForLastCol=availablePixels;for(let i=colsToSpread.length-1;i>=0;i--){const column=colsToSpread[i],widthOverride=limitsMap==null?void 0:limitsMap[column.getId()],minOverride=(widthOverride==null?void 0:widthOverride.minWidth)??(params==null?void 0:params.defaultMinWidth),maxOverride=(widthOverride==null?void 0:widthOverride.maxWidth)??(params==null?void 0:params.defaultMaxWidth),colMinWidth=column.getMinWidth(),colMaxWidth=column.getMaxWidth(),minWidth=typeof minOverride=="number"&&minOverride>colMinWidth?minOverride:colMinWidth,maxWidth=typeof maxOverride=="number"&&maxOverride<colMaxWidth?maxOverride:colMaxWidth;let newWidth=Math.round(column.getActualWidth()*scale);newWidth<minWidth?(newWidth=minWidth,moveToNotSpread(column),finishedResizing=!1):newWidth>maxWidth?(newWidth=maxWidth,moveToNotSpread(column),finishedResizing=!1):i===0&&(newWidth=pixelsForLastCol),column.setActualWidth(newWidth,source,!0),pixelsForLastCol-=newWidth}}}colsToDispatchEventFor.forEach(col=>{col.fireColumnWidthChangedEvent(source)});const visibleCols=this.beans.visibleCols;visibleCols.setLeftValues(source),visibleCols.updateBodyWidths(),!silent&&dispatchColumnResizedEvent(this.eventSvc,colsToDispatchEventFor,!0,source)}applyAutosizeStrategy(){const autoSizeStrategy=this.gos.get("autoSizeStrategy");if(!autoSizeStrategy)return;const{type}=autoSizeStrategy;setTimeout(()=>{if(type==="fitGridWidth"){const{columnLimits:propColumnLimits,defaultMinWidth,defaultMaxWidth}=autoSizeStrategy,columnLimits=propColumnLimits==null?void 0:propColumnLimits.map(({colId:key,minWidth,maxWidth})=>({key,minWidth,maxWidth}));this.sizeColumnsToFitGridBody({defaultMinWidth,defaultMaxWidth,columnLimits})}else type==="fitProvidedWidth"&&this.sizeColumnsToFit(autoSizeStrategy.width,"sizeColumnsToFit")})}onFirstDataRendered(){const autoSizeStrategy=this.gos.get("autoSizeStrategy");if((autoSizeStrategy==null?void 0:autoSizeStrategy.type)!=="fitCellContents")return;const{colIds:columns,skipHeader}=autoSizeStrategy;setTimeout(()=>{columns?this.autoSizeCols({colKeys:columns,skipHeader,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",skipHeader)})}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(resizeOperation=>resizeOperation()),this.resizeOperationQueue=[]}pushResizeOperation(func){this.resizeOperationQueue.push(func)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}},__name(_a223,"ColumnAutosizeService"),_a223);function normaliseColumnWidth(column,newWidth){const minWidth=column.getMinWidth();newWidth<minWidth&&(newWidth=minWidth);const maxWidth=column.getMaxWidth();return column.isGreaterThanMax(newWidth)&&(newWidth=maxWidth),newWidth}__name(normaliseColumnWidth,"normaliseColumnWidth");var ColumnAutoSizeModule={moduleName:"ColumnAutoSize",version:VERSION,beans:[ColumnAutosizeService],apiFunctions:{sizeColumnsToFit,autoSizeColumns,autoSizeAllColumns},dependsOn:[AutoWidthModule]};function getPinnedTopRowCount(beans){var _a238;return((_a238=beans.pinnedRowModel)==null?void 0:_a238.getPinnedTopRowCount())??0}__name(getPinnedTopRowCount,"getPinnedTopRowCount");function getPinnedBottomRowCount(beans){var _a238;return((_a238=beans.pinnedRowModel)==null?void 0:_a238.getPinnedBottomRowCount())??0}__name(getPinnedBottomRowCount,"getPinnedBottomRowCount");function getPinnedTopRow(beans,index){var _a238;return(_a238=beans.pinnedRowModel)==null?void 0:_a238.getPinnedTopRow(index)}__name(getPinnedTopRow,"getPinnedTopRow");function getPinnedBottomRow(beans,index){var _a238;return(_a238=beans.pinnedRowModel)==null?void 0:_a238.getPinnedBottomRow(index)}__name(getPinnedBottomRow,"getPinnedBottomRow");var _a224,PinnedRowModel=(_a224=class extends BeanStub{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const gos=this.gos;this.setPinnedRowData(gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(floating){return this.getCache(floating).order.length===0}isRowsToRender(floating){return!this.isEmpty(floating)}onGridStylesChanges(e){if(e.rowHeightChanged){const estimateRowHeight=__name(rowNode=>{rowNode.setRowHeight(rowNode.rowHeight,!0)},"estimateRowHeight");forEach(this.pinnedBottomRows,estimateRowHeight),forEach(this.pinnedTopRows,estimateRowHeight)}}ensureRowHeightsValid(){let anyChange=!1,rowTop=0;const updateRowHeight=__name(rowNode=>{if(rowNode.rowHeightEstimated){const rowHeight=_getRowHeightForNode(this.beans,rowNode);rowNode.setRowTop(rowTop),rowNode.setRowHeight(rowHeight.height),rowTop+=rowHeight.height,anyChange=!0}},"updateRowHeight");return forEach(this.pinnedBottomRows,updateRowHeight),rowTop=0,forEach(this.pinnedTopRows,updateRowHeight),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),anyChange}setPinnedRowData(rowData,floating){this.updateNodesFromRowData(rowData,floating),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(allData,floating){const nodes=this.getCache(floating);if(allData===void 0){nodes.order.length=0,nodes.cache={};return}const getRowId=_getRowIdCallback(this.gos),idPrefix=floating==="top"?ROW_ID_PREFIX_TOP_PINNED:ROW_ID_PREFIX_BOTTOM_PINNED,nodesToRemove=new Set(nodes.order),newOrder=[],dataIds=new Set;let nextRowTop=0,i=-1;for(const data of allData){const id=(getRowId==null?void 0:getRowId({data,level:0,rowPinned:floating}))??idPrefix+this.nextId++;if(dataIds.has(id)){_warn(96,{id,data});continue}i++,dataIds.add(id),newOrder.push(id);const existingNode=getById(nodes,id);if(existingNode!==void 0)existingNode.data!==data&&existingNode.setData(data),nextRowTop+=this.setRowTopAndRowIndex(existingNode,nextRowTop,i),nodesToRemove.delete(id);else{const rowNode=new RowNode(this.beans);rowNode.id=id,rowNode.data=data,rowNode.rowPinned=floating,nextRowTop+=this.setRowTopAndRowIndex(rowNode,nextRowTop,i),nodes.cache[id]=rowNode,nodes.order.push(id)}}nodesToRemove.forEach(id=>{var _a238;(_a238=getById(nodes,id))==null||_a238.clearRowTopAndRowIndex(),delete nodes.cache[id]}),nodes.order=newOrder}setRowTopAndRowIndex(rowNode,rowTop,rowIndex){return rowNode.setRowTop(rowTop),rowNode.setRowHeight(_getRowHeightForNode(this.beans,rowNode).height),rowNode.setRowIndex(rowIndex),rowNode.rowHeight}getPinnedTopTotalHeight(){return getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return getSize(this.pinnedTopRows)}getPinnedBottomRowCount(){return getSize(this.pinnedBottomRows)}getPinnedTopRow(index){return getByIndex(this.pinnedTopRows,index)}getPinnedBottomRow(index){return getByIndex(this.pinnedBottomRows,index)}getPinnedRowById(id,floating){return getById(this.getCache(floating),id)}forEachPinnedRow(floating,callback){return forEach(this.getCache(floating),callback)}getCache(floating){return floating==="top"?this.pinnedTopRows:this.pinnedBottomRows}},__name(_a224,"PinnedRowModel"),_a224);function getTotalHeight(rowNodes){const size=getSize(rowNodes);if(size===0)return 0;const node=getByIndex(rowNodes,size-1);return node===void 0?0:node.rowTop+node.rowHeight}__name(getTotalHeight,"getTotalHeight");function getById(cache,id){return cache.cache[id]}__name(getById,"getById");function getByIndex(cache,i){return getById(cache,cache.order[i])}__name(getByIndex,"getByIndex");function forEach(cache,callback){cache.order.forEach((id,index)=>{const node=getById(cache,id);node&&callback(node,index)})}__name(forEach,"forEach");function getSize(cache){return cache.order.length}__name(getSize,"getSize");var PinnedRowModule={moduleName:"PinnedRow",version:VERSION,beans:[PinnedRowModel],apiFunctions:{getPinnedTopRowCount,getPinnedBottomRowCount,getPinnedTopRow,getPinnedBottomRow}},_a225,SpannedCellCtrl=(_a225=class extends CellCtrl{constructor(cellSpan,rowCtrl,beans){super(cellSpan.col,cellSpan.firstNode,beans,rowCtrl),this.cellSpan=cellSpan,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(comp,eCell,eWrapper,eCellWrapper,printLayout,startEditing,compBean){this.eWrapper=eWrapper,super.setComp(comp,eCell,eWrapper,eCellWrapper,printLayout,startEditing,compBean),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){this.rowNode.rowIndex!=null&&_setAriaRowIndex(this.eGui,this.rowNode.rowIndex)}setAriaRowSpan(){_setAriaRowSpan(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(cellPos){this.focusedCellPosition=cellPos}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const focusedCell=this.beans.focusSvc.getFocusedCell();return!!focusedCell&&this.cellSpan.doesSpanContain(focusedCell)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.addOrRemoveCssClass(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(event){const{beans}=this;if(_isCellFocusSuppressed(beans)){this.focusedCellPosition=void 0;return}const cellFocused=this.isCellFocused();cellFocused||(this.focusedCellPosition=void 0),event&&cellFocused&&(this.focusedCellPosition={rowIndex:event.rowIndex,rowPinned:event.rowPinned,column:event.column}),super.onCellFocused(event)}getRootElement(){return this.eWrapper}},__name(_a225,"SpannedCellCtrl"),_a225),_a226,SpannedRowCtrl=(_a226=class extends RowCtrl{onRowIndexChanged(){super.onRowIndexChanged(),this.getAllCellCtrls().forEach(c=>c.refreshAriaRowIndex())}getInitialRowClasses(_rowContainerType){return["ag-spanned-row"]}getNewCellCtrl(col){var _a238;const cellSpan=(_a238=this.beans.rowSpanSvc)==null?void 0:_a238.getCellSpan(col,this.rowNode);if(!(!cellSpan||cellSpan.firstNode!==this.rowNode))return new SpannedCellCtrl(cellSpan,this,this.beans)}isCorrectCtrlForSpan(cell){var _a238;const cellSpan=(_a238=this.beans.rowSpanSvc)==null?void 0:_a238.getCellSpan(cell.column,this.rowNode);return!cellSpan||cellSpan.firstNode!==this.rowNode?!1:cell.getCellSpan()===cellSpan}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},__name(_a226,"SpannedRowCtrl"),_a226),_a227,SpannedRowRenderer=(_a227=class extends BeanStub{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(ctrlsKey){const{rowSpanSvc}=this.beans,ctrlsName=`${ctrlsKey}Ctrls`,previousCtrls=this[ctrlsName],previousCtrlsSize=previousCtrls.size,rowCtrls=this.getAllRelevantRowControls(ctrlsKey),newRowCtrls=new Map;let hasNewSpans=!1;for(const ctrl of rowCtrls)ctrl.isAlive()&&(rowSpanSvc==null||rowSpanSvc.forEachSpannedColumn(ctrl.rowNode,(col,cellSpan)=>{if(newRowCtrls.has(cellSpan.firstNode))return;const existingCtrl=previousCtrls.get(cellSpan.firstNode);if(existingCtrl){newRowCtrls.set(cellSpan.firstNode,existingCtrl),previousCtrls.delete(cellSpan.firstNode);return}hasNewSpans=!0;const newCtrl=new SpannedRowCtrl(cellSpan.firstNode,this.beans,!1,!1,!1);newRowCtrls.set(cellSpan.firstNode,newCtrl)}));this[ctrlsName]=newRowCtrls;const sameCount=newRowCtrls.size===previousCtrlsSize;if(!(!hasNewSpans&&sameCount)){for(const oldCtrl of previousCtrls.values())oldCtrl.destroyFirstPass(!0),oldCtrl.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey})}}getAllRelevantRowControls(ctrlsKey){const{rowRenderer}=this.beans;switch(ctrlsKey){case"top":return rowRenderer.topRowCtrls;case"bottom":return rowRenderer.bottomRowCtrls;case"center":return rowRenderer.allRowCtrls}}getCellByPosition(cellPosition){const{rowSpanSvc}=this.beans,cellSpan=rowSpanSvc==null?void 0:rowSpanSvc.getCellSpanByPosition(cellPosition);if(!cellSpan)return;const ctrlsName=`${_normalisePinnedValue(cellPosition.rowPinned)}Ctrls`,ctrl=this[ctrlsName].get(cellSpan.firstNode);if(ctrl)return ctrl.getAllCellCtrls().find(cellCtrl=>cellCtrl.column===cellPosition.column)}getCtrls(container){const ctrlsName=`${container}Ctrls`;return[...this[ctrlsName].values()]}destroyRowCtrls(container){const ctrlsName=`${container}Ctrls`;for(const ctrl of this[ctrlsName].values())ctrl.destroyFirstPass(!0),ctrl.destroySecondPass();this[ctrlsName]=new Map}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},__name(_a227,"SpannedRowRenderer"),_a227),_normalisePinnedValue=__name(pinned=>pinned??"center","_normalisePinnedValue"),_a228,CellSpan=(_a228=class{constructor(col,firstNode){this.col=col,this.firstNode=firstNode,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(firstNode)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(node){this.spannedNodes.add(node),this.lastNode=node}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(cellPosition){return cellPosition.column!==this.col||cellPosition.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=cellPosition.rowIndex&&cellPosition.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){var _a238;const autoHeight=(_a238=this.firstNode.__autoHeights)==null?void 0:_a238[this.col.getColId()];if(autoHeight==null)return;let allButLastHeights=0;return this.spannedNodes.forEach(node=>{node!==this.lastNode&&(allButLastHeights+=node.rowHeight)}),autoHeight-allButLastHeights}},__name(_a228,"CellSpan"),_a228),_a229,RowSpanCache=(_a229=class extends BeanStub{constructor(column){super(),this.column=column}buildCache(pinned){var _a238;const{column,beans:{gos,pinnedRowModel,rowModel,valueSvc,pagination}}=this,{colDef}=column,oldMap=this[`${pinned}ValueNodeMap`],newMap=new Map,isFullWidthCellFunc=gos.getCallback("isFullWidthRow"),equalsFnc=colDef.equals,customCompare=colDef.spanRows,isCustomCompare=typeof customCompare=="function";let lastNode=null,spanData=null,lastValue;const setNewHead=__name((node,value)=>{lastNode=node,spanData=null,lastValue=value},"setNewHead"),checkNodeForCache=__name(node=>{const doesNodeSupportSpanning=!node.isExpandable()&&!node.group&&!node.detail&&(isFullWidthCellFunc?!isFullWidthCellFunc({rowNode:node}):!0);if(node.rowIndex==null||!doesNodeSupportSpanning){setNewHead(null,null);return}if(lastNode==null||node.level!==lastNode.level||node.footer||spanData&&node.rowIndex-1!==(spanData==null?void 0:spanData.getLastNode().rowIndex)){setNewHead(node,valueSvc.getValue(column,node));return}const value=valueSvc.getValue(column,node);if(isCustomCompare){const params=_addGridCommonParams(gos,{valueA:lastValue,nodeA:lastNode,valueB:value,nodeB:node,column,colDef});if(!customCompare(params)){setNewHead(node,value);return}}else if(equalsFnc?!equalsFnc(lastValue,value):lastValue!==value){setNewHead(node,value);return}if(!spanData){const oldSpan=oldMap==null?void 0:oldMap.get(lastNode);(oldSpan==null?void 0:oldSpan.firstNode)===lastNode?(oldSpan.reset(),spanData=oldSpan):spanData=new CellSpan(column,lastNode),newMap.set(lastNode,spanData)}spanData.addSpannedNode(node),newMap.set(node,spanData)},"checkNodeForCache");switch(pinned){case"center":(_a238=rowModel.forEachDisplayedNode)==null||_a238.call(rowModel,node=>{(!pagination||pagination.isRowInPage(node.rowIndex))&&checkNodeForCache(node)});break;case"top":pinnedRowModel==null||pinnedRowModel.forEachPinnedRow("top",checkNodeForCache);break;case"bottom":pinnedRowModel==null||pinnedRowModel.forEachPinnedRow("bottom",checkNodeForCache);break}this[`${pinned}ValueNodeMap`]=newMap}isCellSpanning(node){return!!this.getCellSpan(node)}getCellSpan(node){return this[`${_normalisePinnedValue(node.rowPinned)}ValueNodeMap`].get(node)}},__name(_a229,"RowSpanCache"),_a229),_a230,RowSpanService=(_a230=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=_debounce(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=_debounce(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const onRowDataUpdated=this.onRowDataUpdated.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:this.buildPinnedCaches.bind(this),rowNodeDataChanged:onRowDataUpdated,cellValueChanged:onRowDataUpdated})}register(column){const{gos}=this.beans;if(!gos.get("enableCellSpan")||this.spanningColumns.has(column))return;const cache=this.createManagedBean(new RowSpanCache(column));this.spanningColumns.set(column,cache),cache.buildCache("top"),cache.buildCache("bottom"),cache.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(pinned){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned})}deregister(column){this.spanningColumns.delete(column)}onRowDataUpdated({node}){const{spannedRowRenderer}=this.beans;if(node.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),spannedRowRenderer==null||spannedRowRenderer.createCtrls("top"),spannedRowRenderer==null||spannedRowRenderer.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),spannedRowRenderer==null||spannedRowRenderer.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(cache=>cache.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(cache=>{cache.buildCache("top"),cache.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(col,rowNode){const cache=this.spanningColumns.get(col);return cache?cache.isCellSpanning(rowNode):!1}getCellSpanByPosition(position){const{pinnedRowModel,rowModel}=this.beans,col=position.column,index=position.rowIndex,cache=this.spanningColumns.get(col);if(!cache)return;let node;switch(position.rowPinned){case"top":node=pinnedRowModel==null?void 0:pinnedRowModel.getPinnedTopRow(index);break;case"bottom":node=pinnedRowModel==null?void 0:pinnedRowModel.getPinnedBottomRow(index);break;default:node=rowModel.getRow(index)}if(node)return cache.getCellSpan(node)}getCellStart(position){const span=this.getCellSpanByPosition(position);return span?{...position,rowIndex:span.firstNode.rowIndex}:position}getCellEnd(position){const span=this.getCellSpanByPosition(position);return span?{...position,rowIndex:span.getLastNode().rowIndex}:position}getCellSpan(col,rowNode){const cache=this.spanningColumns.get(col);if(cache)return cache.getCellSpan(rowNode)}forEachSpannedColumn(rowNode,callback){for(const[col,cache]of this.spanningColumns)if(cache.isCellSpanning(rowNode)){const spanningNode=cache.getCellSpan(rowNode);callback(col,spanningNode)}}destroy(){super.destroy(),this.spanningColumns.clear()}},__name(_a230,"RowSpanService"),_a230),CellSpanModule={moduleName:"CellSpan",version:VERSION,beans:[RowSpanService,SpannedRowRenderer]},_a231,CellCustomStyleFeature=(_a231=class extends BeanStub{constructor(cellCtrl,beans){super(),this.cellCtrl=cellCtrl,this.staticClasses=[],this.beans=beans,this.column=cellCtrl.column}setComp(comp){this.cellComp=comp,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column,cellComp}=this,colDef=column.colDef,cellClassRules=colDef.cellClassRules,cellClassParams=this.getCellClassParams(column,colDef);processClassRules(this.beans.expressionSvc,cellClassRules===this.cellClassRules?void 0:this.cellClassRules,cellClassRules,cellClassParams,className=>cellComp.addOrRemoveCssClass(className,!0),className=>cellComp.addOrRemoveCssClass(className,!1)),this.cellClassRules=cellClassRules}applyUserStyles(){const column=this.column,colDef=column.colDef,cellStyle=colDef.cellStyle;if(!cellStyle)return;let styles;if(typeof cellStyle=="function"){const cellStyleParams=this.getCellClassParams(column,colDef);styles=cellStyle(cellStyleParams)}else styles=cellStyle;styles&&this.cellComp.setUserStyles(styles)}applyClassesFromColDef(){const{column,cellComp}=this,colDef=column.colDef,cellClassParams=this.getCellClassParams(column,colDef);this.staticClasses.forEach(className=>cellComp.addOrRemoveCssClass(className,!1));const newStaticClasses=this.beans.cellStyles.getStaticCellClasses(colDef,cellClassParams);this.staticClasses=newStaticClasses,newStaticClasses.forEach(className=>cellComp.addOrRemoveCssClass(className,!0))}getCellClassParams(column,colDef){const{value,rowNode}=this.cellCtrl;return _addGridCommonParams(this.beans.gos,{value,data:rowNode.data,node:rowNode,colDef,column,rowIndex:rowNode.rowIndex})}},__name(_a231,"CellCustomStyleFeature"),_a231),_a232,CellStyleService=(_a232=class extends BeanStub{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(colDef,params,onApplicableClass,onNotApplicableClass){processClassRules(this.beans.expressionSvc,void 0,colDef.cellClassRules,params,onApplicableClass,onNotApplicableClass),this.processStaticCellClasses(colDef,params,onApplicableClass)}getStaticCellClasses(colDef,params){const{cellClass}=colDef;if(!cellClass)return[];let classOrClasses;return typeof cellClass=="function"?classOrClasses=cellClass(params):classOrClasses=cellClass,typeof classOrClasses=="string"&&(classOrClasses=[classOrClasses]),classOrClasses||[]}createCellCustomStyleFeature(ctrl,beans){return new CellCustomStyleFeature(ctrl,beans)}processStaticCellClasses(colDef,params,onApplicableClass){this.getStaticCellClasses(colDef,params).forEach(cssClassItem=>{onApplicableClass(cssClassItem)})}},__name(_a232,"CellStyleService"),_a232),CellStyleModule={moduleName:"CellStyle",version:VERSION,beans:[CellStyleService]},RowStyleModule={moduleName:"RowStyle",version:VERSION,beans:[RowStyleService]};function isColumnHovered(beans,column){var _a238;return!!((_a238=beans.colHover)!=null&&_a238.isHovered(column))}__name(isColumnHovered,"isColumnHovered");var _a233,HoverFeature=(_a233=class extends BeanStub{constructor(columns,element){super(),this.columns=columns,this.element=element,this.destroyManagedListeners=[],this.enableFeature=enabled=>{const{beans,gos,element:element2,columns:columns2}=this,colHover=beans.colHover;enabled??!!gos.get("columnHoverHighlight")?this.destroyManagedListeners=this.addManagedElementListeners(element2,{mouseover:colHover.setMouseOver.bind(colHover,columns2),mouseout:colHover.clearMouseOver.bind(colHover)}):(this.destroyManagedListeners.forEach(fn=>fn()),this.destroyManagedListeners=[])}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue})=>{this.enableFeature(currentValue)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},__name(_a233,"HoverFeature"),_a233),CSS_COLUMN_HOVER="ag-column-hover",_a234,ColumnHoverService=(_a234=class extends BeanStub{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue})=>{currentValue||this.clearMouseOver()})}setMouseOver(columns){this.updateState(columns)}clearMouseOver(){this.updateState(null)}isHovered(column){if(!this.gos.get("columnHoverHighlight"))return!1;const selectedColumns=this.selectedColumns;return!!selectedColumns&&selectedColumns.indexOf(column)>=0}addHeaderColumnHoverListener(compBean,comp,column){const listener=__name(()=>{const isHovered=this.isHovered(column);comp.addOrRemoveCssClass("ag-column-hover",isHovered)},"listener");compBean.addManagedEventListeners({columnHoverChanged:listener}),listener()}onCellColumnHover(column,cellComp){if(!cellComp)return;const isHovered=this.isHovered(column);cellComp.addOrRemoveCssClass(CSS_COLUMN_HOVER,isHovered)}addHeaderFilterColumnHoverListener(compBean,comp,column,eGui){this.createHoverFeature(compBean,[column],eGui);const listener=__name(()=>{const hovered=this.isHovered(column);comp.addOrRemoveCssClass("ag-column-hover",hovered)},"listener");compBean.addManagedEventListeners({columnHoverChanged:listener}),listener()}createHoverFeature(compBean,columns,eGui){compBean.createManagedBean(new HoverFeature(columns,eGui))}updateState(columns){this.selectedColumns=columns,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},__name(_a234,"ColumnHoverService"),_a234),ColumnHoverModule={moduleName:"ColumnHover",version:VERSION,beans:[ColumnHoverService],apiFunctions:{isColumnHovered}},_a235,ApiEventService=(_a235=class extends BeanStub{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){var _a238,_b2;this.wrapSvc=(_b2=(_a238=this.beans.frameworkOverrides).createGlobalEventListenerWrapper)==null?void 0:_b2.call(_a238)}addEventListener(eventType,userListener){var _a238;const listener=((_a238=this.wrapSvc)==null?void 0:_a238.wrap(userListener))??userListener,async=!ALWAYS_SYNC_GLOBAL_EVENTS.has(eventType),listeners=async?this.asyncListeners:this.syncListeners;listeners.has(eventType)||listeners.set(eventType,new Set),listeners.get(eventType).add(listener),this.eventSvc.addEventListener(eventType,listener,async)}removeEventListener(eventType,userListener){var _a238,_b2;const listener=((_a238=this.wrapSvc)==null?void 0:_a238.unwrap(userListener))??userListener,asyncListeners=this.asyncListeners.get(eventType),hasAsync=!!(asyncListeners!=null&&asyncListeners.delete(listener));hasAsync||(_b2=this.syncListeners.get(eventType))==null||_b2.delete(listener),this.eventSvc.removeEventListener(eventType,listener,hasAsync)}addGlobalListener(userListener){var _a238;const listener=((_a238=this.wrapSvc)==null?void 0:_a238.wrapGlobal(userListener))??userListener,syncListener=__name((eventType,event)=>{ALWAYS_SYNC_GLOBAL_EVENTS.has(eventType)&&listener(eventType,event)},"syncListener"),asyncListener=__name((eventType,event)=>{ALWAYS_SYNC_GLOBAL_EVENTS.has(eventType)||listener(eventType,event)},"asyncListener");this.globalListenerPairs.set(userListener,{syncListener,asyncListener});const eventSvc=this.eventSvc;eventSvc.addGlobalListener(syncListener,!1),eventSvc.addGlobalListener(asyncListener,!0)}removeGlobalListener(userListener){const{eventSvc,wrapSvc,globalListenerPairs}=this,listener=(wrapSvc==null?void 0:wrapSvc.unwrapGlobal(userListener))??userListener;if(globalListenerPairs.has(listener)){const{syncListener,asyncListener}=globalListenerPairs.get(listener);eventSvc.removeGlobalListener(syncListener,!1),eventSvc.removeGlobalListener(asyncListener,!0),globalListenerPairs.delete(userListener)}else this.syncGlobalListeners.delete(listener),eventSvc.removeGlobalListener(listener,!1)}destroyEventListeners(map,async){map.forEach((listeners,eventType)=>{listeners.forEach(listener=>this.eventSvc.removeEventListener(eventType,listener,async)),listeners.clear()}),map.clear()}destroyGlobalListeners(set,async){set.forEach(listener=>this.eventSvc.removeGlobalListener(listener,async)),set.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs,eventSvc}=this;globalListenerPairs.forEach(({syncListener,asyncListener})=>{eventSvc.removeGlobalListener(syncListener,!1),eventSvc.removeGlobalListener(asyncListener,!0)}),globalListenerPairs.clear()}},__name(_a235,"ApiEventService"),_a235);function addEventListener(beans,eventType,listener){var _a238;(_a238=beans.apiEventSvc)==null||_a238.addEventListener(eventType,listener)}__name(addEventListener,"addEventListener");function removeEventListener(beans,eventType,listener){var _a238;(_a238=beans.apiEventSvc)==null||_a238.removeEventListener(eventType,listener)}__name(removeEventListener,"removeEventListener");function addGlobalListener(beans,listener){var _a238;(_a238=beans.apiEventSvc)==null||_a238.addGlobalListener(listener)}__name(addGlobalListener,"addGlobalListener");function removeGlobalListener(beans,listener){var _a238;(_a238=beans.apiEventSvc)==null||_a238.removeGlobalListener(listener)}__name(removeGlobalListener,"removeGlobalListener");var EventApiModule={moduleName:"EventApi",version:VERSION,apiFunctions:{addEventListener,addGlobalListener,removeEventListener,removeGlobalListener},beans:[ApiEventService]},tooltipCSS=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);white-space:normal}.ag-tooltip,.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",_a236,TooltipService=(_a236=class extends BeanStub{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(existingTooltipFeature,ctrl,value,shouldDisplayTooltip){existingTooltipFeature&&ctrl.destroyBean(existingTooltipFeature);const isTooltipWhenTruncated=_isShowTooltipWhenTruncated(this.gos),{column,eGui}=ctrl,colDef=column.getColDef();!shouldDisplayTooltip&&isTooltipWhenTruncated&&!colDef.headerComponent&&(shouldDisplayTooltip=_shouldDisplayTooltip(()=>eGui.querySelector(".ag-header-cell-text")));const tooltipCtrl={getColumn:__name(()=>column,"getColumn"),getColDef:__name(()=>column.getColDef(),"getColDef"),getGui:__name(()=>eGui,"getGui"),getLocation:__name(()=>"header","getLocation"),getTooltipValue:__name(()=>value??column.getColDef().headerTooltip,"getTooltipValue"),shouldDisplayTooltip};let tooltipFeature=this.createTooltipFeature(tooltipCtrl);return tooltipFeature&&(tooltipFeature=ctrl.createBean(tooltipFeature),ctrl.setRefreshFunction("tooltip",()=>tooltipFeature.refreshTooltip())),tooltipFeature}setupHeaderGroupTooltip(existingTooltipFeature,ctrl,value,shouldDisplayTooltip){existingTooltipFeature&&ctrl.destroyBean(existingTooltipFeature);const isTooltipWhenTruncated=_isShowTooltipWhenTruncated(this.gos),{column,eGui}=ctrl,colGroupDef=column.getColGroupDef();!shouldDisplayTooltip&&isTooltipWhenTruncated&&!(colGroupDef!=null&&colGroupDef.headerGroupComponent)&&(shouldDisplayTooltip=_shouldDisplayTooltip(()=>eGui.querySelector(".ag-header-group-text")));const tooltipCtrl={getColumn:__name(()=>column,"getColumn"),getGui:__name(()=>eGui,"getGui"),getLocation:__name(()=>"headerGroup","getLocation"),getTooltipValue:__name(()=>value??(colGroupDef&&colGroupDef.headerTooltip),"getTooltipValue"),shouldDisplayTooltip};colGroupDef&&(tooltipCtrl.getColDef=()=>colGroupDef);const tooltipFeature=this.createTooltipFeature(tooltipCtrl);return tooltipFeature&&ctrl.createBean(tooltipFeature)}enableCellTooltipFeature(ctrl,value,shouldDisplayTooltip){const{column,rowNode}=ctrl,getTooltipValue=__name(()=>{const colDef=column.getColDef(),data=rowNode.data;if(colDef.tooltipField&&_exists(data))return _getValueUsingField(data,colDef.tooltipField,column.isTooltipFieldContainsDots());const valueGetter=colDef.tooltipValueGetter;return valueGetter?valueGetter(_addGridCommonParams(this.gos,{location:"cell",colDef:column.getColDef(),column,rowIndex:ctrl.cellPosition.rowIndex,node:rowNode,data:rowNode.data,value:ctrl.value,valueFormatted:ctrl.valueFormatted})):null},"getTooltipValue"),isTooltipWhenTruncated=_isShowTooltipWhenTruncated(this.gos);!shouldDisplayTooltip&&isTooltipWhenTruncated&&!ctrl.isCellRenderer()&&(shouldDisplayTooltip=_shouldDisplayTooltip(()=>{const eCell=ctrl.eGui;return eCell.children.length===0?eCell:eCell.querySelector(".ag-cell-value")}));const tooltipCtrl={getColumn:__name(()=>column,"getColumn"),getColDef:__name(()=>column.getColDef(),"getColDef"),getRowIndex:__name(()=>ctrl.cellPosition.rowIndex,"getRowIndex"),getRowNode:__name(()=>rowNode,"getRowNode"),getGui:__name(()=>ctrl.eGui,"getGui"),getLocation:__name(()=>"cell","getLocation"),getTooltipValue:value!=null?()=>value:getTooltipValue,getValueFormatted:__name(()=>ctrl.valueFormatted,"getValueFormatted"),shouldDisplayTooltip};return this.createTooltipFeature(tooltipCtrl,this.beans)}refreshRowTooltip(existingTooltipFeature,ctrl,value,shouldDisplayTooltip){const tooltipParams={getGui:__name(()=>ctrl.getFullWidthElement(),"getGui"),getTooltipValue:__name(()=>value,"getTooltipValue"),getLocation:__name(()=>"fullWidthRow","getLocation"),shouldDisplayTooltip},beans=this.beans,context=beans.context;existingTooltipFeature&&ctrl.destroyBean(existingTooltipFeature,context);const tooltipFeature=this.createTooltipFeature(tooltipParams,beans);return ctrl.createBean(tooltipFeature,context)}initCol(column){const{colDef}=column;column.tooltipEnabled=_exists(colDef.tooltipField)||_exists(colDef.tooltipValueGetter)||_exists(colDef.tooltipComponent)}createTooltipFeature(tooltipCtrl,beans){return this.beans.registry.createDynamicBean("tooltipFeature",!1,tooltipCtrl,beans)}},__name(_a236,"TooltipService"),_a236),TooltipModule={moduleName:"Tooltip",version:VERSION,beans:[TooltipService],dynamicBeans:{tooltipFeature:TooltipFeature},userComponents:{agTooltipComponent:TooltipComponent2},dependsOn:[PopupModule],css:[tooltipCSS]},LocaleModule={moduleName:"Locale",version:VERSION,beans:[LocaleService]},_a237,RowAutoHeightService=(_a237=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=_debounce(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){var _a238,_b2,_c,_d;const{visibleCols,rowModel,rowSpanSvc,pinnedRowModel}=this.beans,displayedAutoHeightCols=visibleCols.autoHeightCols;let anyNodeChanged=!1;const updateDisplayedRowHeights=__name(row=>{var _a239;const autoHeights=row.__autoHeights;let newRowHeight=_getRowHeightForNode(this.beans,row).height;for(const col of displayedAutoHeightCols){let cellHeight=autoHeights==null?void 0:autoHeights[col.getColId()];const spannedCell=rowSpanSvc==null?void 0:rowSpanSvc.getCellSpan(col,row);if(spannedCell){if(spannedCell.getLastNode()!==row)continue;if(cellHeight=(_a239=rowSpanSvc==null?void 0:rowSpanSvc.getCellSpan(col,row))==null?void 0:_a239.getLastNodeAutoHeight(),!cellHeight)return}if(cellHeight==null){if(this.colSpanSkipCell(col,row))continue;return}newRowHeight=Math.max(cellHeight,newRowHeight)}newRowHeight!==row.rowHeight&&(row.setRowHeight(newRowHeight),anyNodeChanged=!0)},"updateDisplayedRowHeights");(_a238=pinnedRowModel==null?void 0:pinnedRowModel.forEachPinnedRow)==null||_a238.call(pinnedRowModel,"top",updateDisplayedRowHeights),(_b2=pinnedRowModel==null?void 0:pinnedRowModel.forEachPinnedRow)==null||_b2.call(pinnedRowModel,"bottom",updateDisplayedRowHeights),(_c=rowModel.forEachDisplayedNode)==null||_c.call(rowModel,updateDisplayedRowHeights),anyNodeChanged&&((_d=rowModel.onRowHeightChanged)==null||_d.call(rowModel))}setRowAutoHeight(rowNode,cellHeight,column){if(rowNode.__autoHeights??(rowNode.__autoHeights={}),cellHeight==null){delete rowNode.__autoHeights[column.getId()];return}const previousCellHeight=rowNode.__autoHeights[column.getId()];rowNode.__autoHeights[column.getId()]=cellHeight,previousCellHeight!==cellHeight&&this.requestCheckAutoHeight()}colSpanSkipCell(col,node){const{colModel,colViewport,visibleCols}=this.beans;if(!colModel.colSpanActive)return!1;let activeColsForRow=[];switch(col.getPinned()){case"left":activeColsForRow=visibleCols.getLeftColsForRow(node);break;case"right":activeColsForRow=visibleCols.getRightColsForRow(node);break;case null:activeColsForRow=colViewport.getColsWithinViewport(node);break}return!activeColsForRow.includes(col)}setupCellAutoHeight(cellCtrl,eCellWrapper,compBean){if(!cellCtrl.column.isAutoHeight()||!eCellWrapper)return!1;this.wasEverActive=!0;const eParentCell=eCellWrapper.parentElement,{rowNode,column}=cellCtrl,beans=this.beans,measureHeight=__name(timesCalled=>{if(cellCtrl.editing||!cellCtrl.isAlive()||!compBean.isAlive())return;const{paddingTop,paddingBottom,borderBottomWidth,borderTopWidth}=_getElementSize(eParentCell),extraHeight=paddingTop+paddingBottom+borderBottomWidth+borderTopWidth,autoHeight=eCellWrapper.offsetHeight+extraHeight;if(timesCalled<5){const doc=_getDocument(beans),notYetInDom=!doc||!doc.contains(eCellWrapper),possiblyNoContentYet=autoHeight==0;if(notYetInDom||possiblyNoContentYet){window.setTimeout(()=>measureHeight(timesCalled+1),0);return}}this.setRowAutoHeight(rowNode,autoHeight,column)},"measureHeight"),listener=__name(()=>measureHeight(0),"listener");listener();const destroyResizeObserver=_observeResize(beans,eCellWrapper,listener);return compBean.addDestroyFunc(()=>{destroyResizeObserver(),this.setRowAutoHeight(rowNode,void 0,column)}),!0}setAutoHeightActive(cols){this.active=cols.list.some(col=>col.isVisible()&&col.isAutoHeight())}},__name(_a237,"RowAutoHeightService"),_a237),RowAutoHeightModule={moduleName:"RowAutoHeight",version:VERSION,beans:[RowAutoHeightService]},AllCommunityModule={moduleName:"AllCommunity",version:VERSION,dependsOn:[ClientSideRowModelModule,CsvExportModule,InfiniteRowModelModule,ValidationModule,TextEditorModule,NumberEditorModule,DateEditorModule,CheckboxEditorModule,SelectEditorModule,LargeTextEditorModule,CustomEditorModule,UndoRedoEditModule,TextFilterModule,NumberFilterModule,DateFilterModule,CustomFilterModule,QuickFilterModule,ExternalFilterModule,GridStateModule,AlignedGridsModule,PaginationModule,ColumnApiModule,RowApiModule,ScrollApiModule,RenderApiModule,ColumnAutoSizeModule,RowDragModule,PinnedRowModule,RowSelectionModule,ValueCacheModule,CellStyleModule,ColumnHoverModule,RowStyleModule,EventApiModule,CellApiModule,HighlightChangesModule,TooltipModule,LocaleModule,RowAutoHeightModule,DragAndDropModule,ClientSideRowModelApiModule,CellSpanModule]};export{AgPromise as A,BaseComponentWrapper as B,CssClassManager as C,AllCommunityModule as D,EmptyBean as E,FakeHScrollComp as F,GridHeaderCtrl as G,HeaderRowContainerCtrl as H,ModuleRegistry as M,RowContainerCtrl as R,TabGuardCtrl as T,VanillaFrameworkOverrides as V,_escapeString as _,_getGridRegisteredModules as a,_warn as b,_observeResize as c,_getActiveDomElement as d,_getRowContainerOptions as e,_getRowViewportClass as f,_getRowContainerClass as g,_getRowSpanContainerClass as h,GridBodyCtrl as i,GridCtrl as j,_isClientSideRowModel as k,_isServerSideRowModel as l,_combineAttributesAndGridOptions as m,_getGlobalGridOption as n,GridCoreCreator as o,_processOnChange as p,_setAriaSort as q,_removeAriaSort as r,_removeFromParent as s,_setAriaRowCount as t,_setAriaColCount as u,FakeVScrollComp as v,TabGuardClassNames as w,BeanStub as x,_getLocaleTextFunc as y,themeQuartz as z};
//# sourceMappingURL=ag-grid-community-DMn73PjZ.js.map
